function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (typeof call === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"], {
  /***/
  "./$$_lazy_route_resource lazy recursive":
  /*!******************************************************!*\
    !*** ./$$_lazy_route_resource lazy namespace object ***!
    \******************************************************/

  /*! no static exports found */

  /***/
  function $$_lazy_route_resourceLazyRecursive(module, exports) {
    function webpackEmptyAsyncContext(req) {
      // Here Promise.resolve().then() is used instead of new Promise() to prevent
      // uncaught exception popping up in devtools
      return Promise.resolve().then(function () {
        var e = new Error("Cannot find module '" + req + "'");
        e.code = 'MODULE_NOT_FOUND';
        throw e;
      });
    }

    webpackEmptyAsyncContext.keys = function () {
      return [];
    };

    webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
    module.exports = webpackEmptyAsyncContext;
    webpackEmptyAsyncContext.id = "./$$_lazy_route_resource lazy recursive";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html":
  /*!**************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html ***!
    \**************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppAppComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<app-ngbheader [isLoginPage]=\"isLoginPage\"></app-ngbheader>\r\n<div class=\"container app-content\">\r\n  <div class=\"row no-gutters mt-2 app-content-inner-box\">\r\n    <div class=\"col-md-12\">\r\n      <router-outlet></router-outlet>\r\n    </div>\r\n  </div>\r\n</div>\r\n<footer *ngIf=\"!isLoginPage\" class=\"card small mt-2 app-footer\">\r\n  <div class=\"card-footer text-center\">\r\n    <app-status-check></app-status-check>\r\n    <button *ngIf=\"false && !heartBeatState\" (click)=\"setHeartBeatState(true)\">Enable HeartBeat Check</button>\r\n    <button *ngIf=\"false && heartBeatState\" (click)=\"setHeartBeatState(false)\">Disable HeartBeat Check</button>\r\n    <button *ngIf=\"deferredInstallPrompt\" (click)=\"installApp()\">Install app</button>\r\n  </div>\r\n</footer>\r\n<div #addScripts></div>\r\n\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/auth/auth.component.html":
  /*!**************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/auth/auth.component.html ***!
    \**************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesAuthAuthComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"bg\"></div>\r\n<div class=\"container h-100\">\r\n    <div class=\"d-flex justify-content-center h-100\">\r\n      <div class=\"w-100 justify-content-center align-self-center\">\r\n        <div class=\"brand-circle-container\">\r\n          <div class=\"brand-circle-grey\"></div>\r\n        </div>\r\n        <h1><span class=\"lato-black\">Inventory</span><span class=\"lato-light\">App</span></h1>\r\n        <div class=\"user_card user_card_loginbox_bg\">\r\n\r\n            <div class=\"d-flex justify-content-center lato-light mb-2\">\r\n              <h2>Anmeldung</h2>\r\n            </div>\r\n\r\n            <div class=\"d-flex justify-content-center form_container\">\r\n                <form #loginForm=ngForm (ngSubmit)=\"onLoginSubmit()\">\r\n\r\n                    <div class=\"input-group mb-4\">\r\n                        <div class=\"input-group-append\">\r\n                            <span class=\"input-group-text\">\r\n                                <fa-icon [icon]=\"['fa', 'user']\"></fa-icon>\r\n                            </span>\r\n                        </div>\r\n                        <input type=\"text\" class=\"form-control input_user lato-light\" name=\"user\" placeholder=\"Benutzername\"\r\n                            [(ngModel)]=\"form.email\"\r\n                            minlength=\"3\"\r\n                            pattern=\"[a-zA-Z0-9.@-]{3,}\"\r\n                            required\r\n                        >\r\n                    </div>\r\n\r\n                    <div class=\"input-group mb-5\">\r\n                        <div class=\"input-group-append\">\r\n                            <span class=\"input-group-text\">\r\n                                <fa-icon [icon]=\"['fa', 'key']\"></fa-icon>\r\n                            </span>\r\n                        </div>\r\n                        <input required type=\"password\" class=\"form-control input_pass lato-light\" name=\"password\" placeholder=\"Passwort\"\r\n                        [(ngModel)]=\"form.password\"\r\n                        required>\r\n                    </div>\r\n                    <div class=\"d-flex justify-content-center login_container\">\r\n                     <button type=\"button\" name=\"button\" class=\"btn login_btn lato-light\"\r\n                     (click)=\"onLoginSubmit()\"\r\n                     [disabled]=\"loginForm.invalid\">LOGIN</button>\r\n                   </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div *ngIf=\"error\" class=\"alert alert-danger\" style=\"max-width:90vw\">{{ error }}</div>\r\n      </div>\r\n    </div>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/dbsync/dbsync.component.html":
  /*!******************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/dbsync/dbsync.component.html ***!
    \******************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesDbsyncDbsyncComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div *ngIf=\"currInventur\">\r\n  <div class=\"card mt-1\">\r\n    <div class=\"card-header\">Aktuelle Inventur: {{ currInventur.Titel }}</div>\r\n    <div class=\"card-body\">\r\n      <h5 class=\"card-title\"></h5>\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">Titel</div>\r\n        <div class=\"col\">{{ currInventur.Titel }}</div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">Inventur-ID (Jobid)</div>\r\n        <div class=\"col\">{{ currInventur.jobid }}</div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">Mandant-ID</div>\r\n        <div class=\"col\">{{ currInventur.mid }}</div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">Created</div>\r\n        <div class=\"col\">{{ currInventur.created_at }}</div>\r\n      </div>\r\n\r\n      <div *ngIf=\"currUser\" class=\"row\">\r\n        <div class=\"col\">User</div>\r\n        <div class=\"col\">{{ currUser.email }}</div>\r\n      </div>\r\n\r\n    </div>\r\n    <div class=\"card-footer\">\r\n      <button [disabled]=\"syncInProcess\" class=\"btn btn-danger\" (click)=\"resetCurrJob()\">Inventurdaten komplett neu laden</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"card mt-2\">\r\n  <div class=\"card-header\">Synchronisierung</div>\r\n  <div class=\"card-body\">\r\n    <h4 class=\"card-title\">Aktueller Status</h4>\r\n    <div class=\"row\">\r\n      <div class=\"col-3\">Client-Revision-ID</div>\r\n      <div class=\"col\">{{ clientRevisionId }}</div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-3\">Unsynced Changes</div>\r\n      <div class=\"col\">{{ numUnsyncedChanges }}</div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-3\">Server-Revision-ID</div>\r\n      <div class=\"col\">{{ serverRevisionId }}</div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-3\">Server-Changes</div>\r\n      <div class=\"col\">{{ numServerChanges }}</div>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-3\">Status</div>\r\n      <div class=\"col\">{{syncStatusName}} ({{syncStatus}})</div>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-3\">Finished</div>\r\n      <div class=\"col\">{{syncFinished | json }}</div>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-3\">Auto-Run</div>\r\n      <div class=\"col\">{{ syncAutoRun | json }}</div>\r\n    </div>\r\n  </div>\r\n  <div class=\"card-footer\">\r\n    <button *ngIf=\"syncAutoRun\" class=\"btn btn-danger\" (click)=\"syncAutoStop()\"> Autmatische Synchronisierung stoppen</button>\r\n    <button *ngIf=\"!syncAutoRun\" class=\"btn btn-success\" (click)=\"syncAutoStart()\"> Autmatische Synchronisierung starten</button>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"card mt-2\" *ngIf=\"currProcess\">\r\n  <div class=\"card-header\">Laufender Prozess</div>\r\n  <div class=\"card-body\">\r\n    <div class=\"row\">\r\n      <div class=\"col\">Status</div>\r\n      <div class=\"col\">{{ syncStatusName }}</div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col\">Start</div>\r\n      <div class=\"col\">{{ currProcess.starttime | date }}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"card mt-2\" *ngIf=\"lastServerSyncErrors.length > 0\">\r\n  <div class=\"card-header\">Synchronisations-Fehler</div>\r\n  <h4 class=\"card-title\">Fehler bei letzter Synchroniserung\r\n    (InventurId: {{ lastServerSyncJobid}}) um {{ lastServerSyncDate | date }}</h4>\r\n  Anzahl: {{ lastServerSyncErrors.length }}<br>\r\n\r\n    <table class=\"table table-striped\">\r\n      <thead>\r\n      <tr>\r\n        <th scope=\"col\">#</th>\r\n        <th scope=\"col\">Table</th>\r\n        <th scope=\"col\">Log-Id</th>\r\n        <th scope=\"col\">Aktion</th>\r\n        <th scope=\"col\">Fehlercode</th>\r\n        <th scope=\"col\">Fehlermeldung</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr *ngFor=\"let item of lastServerSyncErrors; index as i\">\r\n        <th scope=\"row\">{{ i + 1 }}</th>\r\n        <td>{{ item.table }}</td>\r\n        <td>{{ item.clientChangeLogId | number }}</td>\r\n        <td>{{ item.type | number }}</td>\r\n        <td>{{ item.error_code }}</td>\r\n        <td>{{ item.error_msg }}</td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n    * type: 1=Insert, 2=Update, 3=Delete\r\n</div>\r\n\r\n<div class=\"card mt-2\" id=\"totalProgress\" *ngIf=\"syncTotal && syncTotal.total\">\r\n  <p><ngb-progressbar [striped]=\"true\" [animated]=\"true\" [value]=\"syncTotal.percent\"></ngb-progressbar></p>\r\n  <div class=\"row\">\r\n    <div class=\"col\">{{ syncTotal.executed }}</div>\r\n    <div class=\"col\">von {{ syncTotal.total }}</div>\r\n    <div class=\"col pull-right\">{{ syncTotal.percent }} %</div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"card mt-2\" id=\"tableProgress\" *ngIf=\"syncTables && syncTables.length > 0\">\r\n  <div class=\"row\" *ngFor=\"let st of syncTables; let stIdx = index\">\r\n    <div class=\"col\">{{ st.total }}</div>\r\n    <div class=\"col\">{{ st.puts }}</div>\r\n    <div class=\"col\">{{ st.modified }}</div>\r\n    <div class=\"col\">{{ st.deleted }}</div>\r\n    <div class=\"col\">{{ st.executed }}</div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/invent-form.component.html":
  /*!****************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/invent-form.component.html ***!
    \****************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormInventFormComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"blobs-overlay\" *ngIf=\"blobAlert && useOverlay === 1\">\r\n  <div class=\"blobs-container\">\r\n    <ng-container [ngSwitch]=\"blobAlert\">\r\n      <div class=\"blob red animate\" *ngSwitchCase=\"'danger'\"></div>\r\n      <div class=\"blob green animate\" *ngSwitchCase=\"'success'\"></div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n<div class=\"blobs-overlay\" *ngIf=\"blobAlert && useOverlay === 2\">\r\n  <div class=\"blobs-container\">\r\n    <ng-container [ngSwitch]=\"blobAlert\">\r\n      <div class=\"blob red animate\" *ngSwitchCase=\"'danger'\"></div>\r\n      <div class=\"blob green animate\" *ngSwitchCase=\"'success'\"></div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"row no-gutters mb-1\">\r\n  <div class=\"form-group col-4\">\r\n    <label for=\"kunde\" class=\"mb-0\">Mandant</label>\r\n    <input id=\"kunde\" class=\"form-control\" [readOnly]=\"true\" [attr.value]=\"kundeName\">\r\n  </div>\r\n  <div class=\"form-group col-4 px-1\">\r\n    <label for=\"adresse\" class=\"mb-0\">Adresse</label>\r\n    <input id=\"adresse\" class=\"form-control\" [readOnly]=\"true\" [attr.value]=\"adresse\">\r\n  </div>\r\n  <div class=\"form-group col-4\">\r\n    <label for=\"raum\" class=\"mb-0\">Raum</label>\r\n    <input id=\"raum\" [ngClass]=\"{ 'bg-danger': !raum }\" class=\"form-control\" [readOnly]=\"true\" [attr.value]=\"raumNr\">\r\n  </div>\r\n</div>\r\n\r\n<div class=\"row mb-4\">\r\n  <div class=\"col-6\">\r\n    <app-progressbar [shortTitle]=\"'Gesamt'\" [title]=\"'Fortschrittsanzeige gesamt'\"\r\n                     [sendDoneClick]=\"true\"\r\n                     (clickedDone)=\"showGesamtDone()\"\r\n                     [sendRestClick]=\"true\"\r\n                     (clickedRest)=\"showGesamtRest()\"\r\n                     [value]=\"jobProgress.done\" [total]=\"jobProgress.total\"></app-progressbar>\r\n  </div>\r\n  <div class=\"col-6\">\r\n    <app-progressbar [shortTitle]=\"'Raum'\"  [title]=\"'Fortschrittsanzeige Raum'\"\r\n                     [sendDoneClick]=\"true\"\r\n                     (clickedDone)=\"showRaumDone()\"\r\n                     [sendRestClick]=\"true\"\r\n                     (clickedRest)=\"showRaumRest()\"\r\n                     [value]=\"raumProgress.done\" [total]=\"raumProgress.total\"></app-progressbar>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"row mt-4\">\r\n  <label for=\"raumCode\" class=\"col-4\"><strong>Raumdaten</strong></label>\r\n\r\n  <div class=\"col-8 text-right\">\r\n    <div #invDrop=\"ngbDropdown\" ngbDropdown style=\"display: inline-block\">\r\n      <button [ngClass]=\"{\r\n        'btn-outline-success': jobLockStatus === 2,\r\n        'btn-outline-info': jobLockStatus === 1,\r\n        'btn-outline-secondary': jobLockStatus === 0\r\n        }\"\r\n              ngbDropdownToggle\r\n              id=\"dropdownLockStatus\"\r\n              class=\"btn btn-sm dropdown-toggle\"\r\n              type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n              aria-expanded=\"false\"> Inventur ({{ jobLockStatus }})\r\n        <ng-container [ngSwitch]=\"jobLockStatus\">\r\n          <fa-icon *ngSwitchCase=\"2\" [icon]=\"faLock\"></fa-icon>\r\n          <fa-icon *ngSwitchCase=\"1\" [icon]=\"faUnlockAlt\"></fa-icon>\r\n          <fa-icon *ngSwitchDefault [icon]=\"faLock\"></fa-icon>\r\n        </ng-container>\r\n      </button>\r\n      <div class=\"dropdown-menu dropdown-menu-right\" [style.right]=\"0\" ngbDropdownMenu aria-labelledby=\"dropdownLockStatus\">\r\n        <button ngbDropdownItem class=\"dropdown-item\"\r\n                (click)=\"setJobLockStatusClosed()\"><fa-icon [attr.class]=\"'text-danger'\" [icon]=\"faLock\"></fa-icon>\r\n          Inventur schließen\r\n        </button>\r\n        <button ngbDropdownItem class=\"dropdown-item\"\r\n                (click)=\"setJobLockStatusOpened()\"><fa-icon [attr.class]=\"'text-success'\" [icon]=\"faUnlockAlt\"></fa-icon>\r\n          Inventur in Arbeit\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div #myDrop=\"ngbDropdown\" ngbDropdown style=\"display: inline-block\">\r\n      <button [ngClass]=\"{\r\n        'btn-outline-success': raumEditStatus === 2,\r\n        'btn-outline-info': raumEditStatus === 1,\r\n        'btn-outline-secondary': raumEditStatus === 0\r\n        }\"\r\n              ngbDropdownToggle\r\n              id=\"dropdownRaumStatus\"\r\n              class=\"btn btn-sm dropdown-toggle\"\r\n              type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n              aria-expanded=\"false\"> Raum\r\n        <ng-container [ngSwitch]=\"raumEditStatus\">\r\n          <fa-icon *ngSwitchCase=\"2\" [icon]=\"faCheck\"></fa-icon>\r\n          <fa-icon *ngSwitchCase=\"1\" [icon]=\"faDoorOpen\"></fa-icon>\r\n          <fa-icon *ngSwitchDefault [icon]=\"faDoorClosed\"></fa-icon>\r\n        </ng-container>\r\n      </button>\r\n      <div class=\"dropdown-menu dropdown-menu-right\" [style.width]=\"'200px'\" ngbDropdownMenu aria-labelledby=\"dropdownRaumStatus\">\r\n        <button ngbDropdownItem class=\"dropdown-item\"\r\n                (click)=\"setRaumEditStatusClosed()\"><fa-icon [attr.class]=\"'text-success'\" [icon]=\"faCheck\"></fa-icon>\r\n          Fertig\r\n        </button>\r\n        <button ngbDropdownItem class=\"dropdown-item\"\r\n                (click)=\"setRaumEditStatusStarted()\"><fa-icon [attr.class]=\"'text-info'\" [icon]=\"faDoorOpen\"></fa-icon>\r\n          In Arbeit\r\n        </button>\r\n        <button *ngIf=\"raumProgress.done === 0\" ngbDropdownItem class=\"dropdown-item\"\r\n                (click)=\"setRaumEditStatusUntouched()\"><fa-icon [attr.class]=\"'text-secondary'\" [icon]=\"faDoorClosed\"></fa-icon>\r\n          Noch nicht begonnen\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"form-group row\">\r\n  <div class=\"col input-group mb-1\">\r\n    <div class=\"input-group-prepend\">\r\n      <span class=\"input-group-text\">BCode</span>\r\n    </div>\r\n    <input id=\"raumCode\" readonly #raumBarcode type=\"text\"\r\n           class=\"form-control\" [value]=\"formInventar.RaumBarcode\" (input)=\"onRaumBarcodeInput( $event )\" placeholder=\"Raum-Barcode\" aria-label=\"Raumcode\">\r\n    <div class=\"input-group-append\">\r\n      <button class=\"btn btn-outline-success\" type=\"button\" (click)=\"openScanner(raumBarcode)\"><fa-icon [icon]=\"faBarcode\"></fa-icon></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"form-group row\">\r\n  <div class=\"col input-group mb-1\">\r\n    <div class=\"input-group-prepend\">\r\n      <span class=\"input-group-text\">Nr</span>\r\n    </div>\r\n    <input id=\"raumNr\" readonly type=\"text\" [value]=\"formInventar.Raum\" class=\"form-control\" placeholder=\"Raumnr\" aria-label=\"Raumnummer\">\r\n    <div class=\"input-group-append\">\r\n      <button class=\"btn btn-outline-success\" type=\"button\" (click)=\"openSelectSearchRaum()\">\r\n        <fa-icon [icon]=\"faBookReader\"></fa-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"form-group row\">\r\n  <div class=\"col input-group mb-1\">\r\n    <div class=\"input-group-prepend\">\r\n      <span class=\"input-group-text\">Bez.</span>\r\n    </div>\r\n    <input  id=\"raumBez\" readonly type=\"text\" [value]=\"formInventar.Raumbezeichnung\"\r\n            placeholder=\"Raumbezeichnung\" class=\"form-control\">\r\n    <div class=\"input-group-append\">\r\n      <button class=\"btn btn-outline-success\" [disabled]=\"!formInventar.ruuid\" type=\"button\" (click)=\"openEditRaum()\">\r\n        <fa-icon [icon]=\"faEdit\"></fa-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"form-group row\">\r\n  <div class=\"col input-group mb-1\">\r\n    <div class=\"btn-group input-group\" role=\"group\" aria-label=\"First group\">\r\n      <div class=\"input-group-prepend\">\r\n        <span class=\"input-group-text\">Bild</span>\r\n      </div>\r\n      <div class=\"input-group-append\">\r\n        <button type=\"button\" class=\"btn btn-success\" (click)=\"openCreateRaumImage()\"><fa-icon [icon]=\"faCamera\"></fa-icon>\r\n          <span class=\"d-none d-md-inline\"> anlegen </span>\r\n        </button>\r\n        <div *ngIf=\"raumBilder.length > 0\" #raumBilderDrop=\"ngbDropdown\" class=\"btn btn-light\" ngbDropdown style=\"display: inline-block\">\r\n          <button\r\n            ngbDropdownToggle\r\n            id=\"dropdownRaumbilder\"\r\n            class=\"btn btn-sm dropdown-toggle\"\r\n            type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n            aria-expanded=\"false\"> {{ raumBilder.length }} Fotos\r\n          </button>\r\n          <div class=\"dropdown-menu dropdown-menu-right\" [style.width]=\"'200px'\" ngbDropdownMenu aria-labelledby=\"dropdownRaumbilder\">\r\n            <button *ngFor=\"let img of raumBilder; let idx = index\"\r\n                    (click)=\"openRaumbild(idx)\"\r\n                    class=\"dropdown-item\" ngbDropdownItem>{{ img.name }}</button>\r\n          </div>\r\n        </div>\r\n\r\n        <div *ngIf=\"raumPlaene.length > 0\" #raumPlaeneDrop=\"ngbDropdown\" class=\"btn btn-light\"\r\n             ngbDropdown\r\n             style=\"display: inline-block\">\r\n          <button\r\n            ngbDropdownToggle\r\n            id=\"dropdownRaumplaene\"\r\n            class=\"btn btn-sm dropdown-toggle\"\r\n            type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n            aria-expanded=\"false\"> {{ raumPlaene.length }} Pläne\r\n          </button>\r\n          <div class=\"dropdown-menu dropdown-menu-right\" ngbDropdownMenu aria-labelledby=\"dropdownRaumplaene\">\r\n            <button *ngFor=\"let img of raumPlaene; let idx = index\"\r\n                    (click)=\"openRaumplan(idx)\"\r\n                    class=\"dropdown-item\" ngbDropdownItem>{{ img.name }}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"row mt-4\">\r\n  <label for=\"raumCode\" class=\"col\"><strong>Inventar-Daten</strong></label>\r\n</div>\r\n<ng-container *ngIf=\"raum; else MissingRaum\">\r\n  <div class=\"form-group row\">\r\n      <div class=\"col input-group mb-1\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">BCode</span>\r\n        </div>\r\n        <input id=\"elmBarcode\" class=\"form-control\" type=\"text\" aria-label=\"Barcode\"\r\n               required #invBarcode readonly\r\n               [ngClass]=\"{'bg-danger': waitingForNewInventarBarcode || waitingForInventarData }\"\r\n               [attr.value]=\"formInventar.Barcode\"\r\n               [placeholder]=\"!waitingForNewInventarBarcode ? 'Inventar-Barcode ...' : 'Warte auf Inventar-Barcode ...'\">\r\n        <div class=\"input-group-append\">\r\n          <button class=\"btn btn-outline-success\" type=\"button\" (click)=\"openScanner(invBarcode)\">\r\n            <fa-icon [icon]=\"faBarcode\"></fa-icon>\r\n          </button>\r\n        </div>\r\n      </div>\r\n  </div>\r\n  <ngb-alert *ngIf=\"waitingForInventarData\" type=\"danger\" (close)=\"clearFormInventar()\">\r\n    Warte auf Artikelzuweisung für neuen Inventar-Barcode: <b>{{ formInventar.Barcode }}</b><br>\r\n    <i>Sollte der Barcode bekannt sein, können Sie die Funktion reIndexBarcodeLookup in den Einstellungen nutzen!</i>\r\n  </ngb-alert>\r\n  <ngb-alert *ngIf=\"waitingForNewInventarBarcode\" type=\"danger\">\r\n    Warte auf neuen Inventar-Barcode für {{ formInventar.Bezeichnung }}\r\n  </ngb-alert>\r\n\r\n  <div class=\"form-group row\">\r\n      <div class=\"col input-group mb-1\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">Bez.</span>\r\n        </div>\r\n        <input id=\"elmArtBez\" readonly type=\"text\" [attr.value]=\"formInventar.Bezeichnung\" class=\"form-control\" placeholder=\"Artikelbezeichnung\" aria-label=\"Artikelbezeichnung\">\r\n        <div class=\"input-group-append\">\r\n          <button class=\"btn btn-outline-success\" type=\"button\" (click)=\"openSelectCreateArtikel()\">\r\n            <fa-icon [icon]=\"faBookReader\"></fa-icon>\r\n          </button>\r\n        </div>\r\n      </div>\r\n  </div>\r\n\r\n  <div class=\"form-group row\">\r\n    <div class=\"col input-group mb-1\">\r\n      <div class=\"input-group-prepend\">\r\n        <span class=\"input-group-text\">Typ</span>\r\n      </div>\r\n      <input  id=\"elmArtTyp\" type=\"text\" [attr.value]=\"formInventar.Typ\" class=\"form-control\">\r\n      <div class=\"input-group-append\">\r\n        <button class=\"btn btn-outline-success\" [disabled]=\"!formInventar.uuid\" type=\"button\" (click)=\"openEditInventar()\">\r\n          <fa-icon [icon]=\"faEdit\"></fa-icon>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"form-group row\">\r\n    <!-- label for=\"elmArtTyp\" class=\"col-2 col-sm-2 col-md-2 col-lg-2 d-none\">Bild</label -->\r\n    <div class=\"col mb-1\">\r\n\r\n      <div class=\"btn-toolbar justify-content-between w-100\" role=\"toolbar\" aria-label=\"Toolbar with button groups\">\r\n        <div class=\"btn-group input-group\" role=\"group\" aria-label=\"First group\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\">Bild</span>\r\n          </div>\r\n          <div class=\"input-group-append\">\r\n            <button type=\"button\" class=\"btn btn-info\"\r\n                    *ngIf=\"artikelImageExists\"\r\n                    (click)=\"openShowArtikelImage()\"><fa-icon [icon]=\"faImage\"></fa-icon>\r\n              <span class=\"d-none d-md-inline\"> anzeigen </span>\r\n            </button>\r\n            <button type=\"button\" class=\"btn btn-success\"\r\n                    *ngIf=\"artikelImageExists\"\r\n                    [disabled]=\"!formInventar.gcuuid\"\r\n                    (click)=\"openEditArtikelImage()\"><fa-icon [icon]=\"faEdit\"></fa-icon>\r\n              <span class=\"d-none d-md-inline\"> bearbeiten </span>\r\n            </button>\r\n            <button type=\"button\" class=\"btn btn-success\"\r\n                    *ngIf=\"!artikelImageExists\"\r\n                    [disabled]=\"!formInventar.gcuuid\"\r\n                    (click)=\"openCreateArtikelImage()\"><fa-icon [icon]=\"faCamera\"></fa-icon>\r\n              <span class=\"d-none d-md-inline\"> anlegen </span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"btn-group input-group\">\r\n          <div class=\"input-group-prepend\">\r\n            <div class=\"input-group-text\" id=\"btnGroupAddon2\">Kunst</div>\r\n          </div>\r\n          <div class=\"input-group-append\">\r\n            <button type=\"button\" class=\"btn btn-dark\" (click)=\"createKunstwerk()\"><fa-icon [icon]=\"faPlus\"></fa-icon>\r\n              <span class=\"d-none d-md-inline\"> anlegen </span></button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</ng-container>\r\n<ng-template #MissingRaum>\r\n  <ngb-alert [type]=\"'danger'\" [dismissible]=\"false\">\r\n    Bitte wählen Sie einen Raum aus!\r\n  </ngb-alert>\r\n</ng-template>\r\n\r\n<div id=\"formBottomDivider\" class=\"row no-gutters mb-0 border-bottom\">\r\n  <div id=\"inventurTitel\" class=\"col\">\r\n    {{ inventur.Titel }}\r\n  </div>\r\n</div>\r\n\r\n<div [hidden]=\"!manualBCInputEnabled\">\r\n  <h5>Barcode-Scanning Test</h5>\r\n  <div class=\"row\">\r\n    <div class=\"col\">\r\n      <h6>Scanner Simulator</h6>\r\n      <textarea class=\"scanner-detect-ignore\" #inputSimulateBarcode></textarea><br>\r\n      <button (click)=\"simulateScanner()\">Barcode senden</button><br>\r\n    </div>\r\n    <div class=\"col\">\r\n      <app-scannerdetection (scanned)=\"handleScanData($event)\" [config]=\"scanDetectorConfig\">\r\n        <h6>Scan-Detector Barcode</h6>\r\n        <textarea #input2 [ngClass]=\"lastScanDetectClass\"></textarea><br>\r\n        (Zeit: {{ lastScanDetectTime | date:'hh:mm:ss' }})\r\n      </app-scannerdetection>\r\n    </div>\r\n    <div class=\"d-none\">{{ formInventar | json }}</div>\r\n  </div>\r\n  <div class=\"row\">\r\n    <div class=\"col-12\">\r\n      <textarea style=\"height:90vh;width:90vw\" class=\"bcRawInput\" #rawInputBarcodes></textarea><br>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<audio *ngIf=\"beepSuccessSrc\" id=\"beepSuccess\" [src]=\"beepSuccessSrc\" autoPlay=\"autoplay\" [muted]=\"'muted'\"></audio>\r\n<audio *ngIf=\"beepErrorSrc\" id=\"beepError\" [src]=\"beepErrorSrc\" autoPlay=\"autoplay\" [muted]=\"'muted'\"></audio>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.html":
  /*!*****************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.html ***!
    \*****************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsBatchBarcodesBatchBarcodesComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"blobs-overlay\" *ngIf=\"blobAlert && useOverlay === 1\">\r\n  <div class=\"blobs-container\">\r\n    <ng-container [ngSwitch]=\"blobAlert\">\r\n      <div class=\"blob red animate\" *ngSwitchCase=\"'danger'\"></div>\r\n      <div class=\"blob green animate\" *ngSwitchCase=\"'success'\"></div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n<div class=\"blobs-overlay\" *ngIf=\"blobAlert && useOverlay === 2\">\r\n  <div class=\"blobs-container\">\r\n    <ng-container [ngSwitch]=\"blobAlert\">\r\n      <div class=\"blob red animate\" *ngSwitchCase=\"'danger'\"></div>\r\n      <div class=\"blob green animate\" *ngSwitchCase=\"'success'\"></div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"modal-header\">\r\n  <h6 class=\"modal-title\">Barcodes-Batchverarbeitung</h6>\r\n  <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"activeModal.dismiss('Cross click')\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <ng-container *ngIf=\"loadingShow\">\r\n    <strong>Lade {{ loadingTotal }} Barcodes</strong>\r\n    <p *ngIf=\"loadingTotal\">\r\n      <ngb-progressbar\r\n        [type]=\"loadingType\"\r\n        [value]=\"loadingPercent\"\r\n        [striped]=\"loadingAnimated\"\r\n        [animated]=\"true\"><i>\r\n      {{ loadingCurrent }} von {{ loadingTotal }}\r\n    </i></ngb-progressbar></p>\r\n  </ng-container>\r\n\r\n  <div class=\"card\">\r\n    <div class=\"card-body\">\r\n      <h5 class=\"card-title\">Raum {{ raum.Raum}} {{ raum.Raumbezeichnung }}</h5>\r\n      <p class=\"card-text\" *ngIf=\"raum\">\r\n        <app-progressbar [shortTitle]=\"'Raum'\"  [title]=\"'Fortschrittsanzeige Raum'\"\r\n                         [value]=\"raumProgress.done\"\r\n                         [total]=\"raumProgress.total\">\r\n        </app-progressbar>\r\n      </p>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"scanResultHistory.length > 0\">\r\n    <hr class=\"mt-3\">\r\n    <div *ngIf=\"false\" class=\"w-100 text-right\">\r\n      <button class=\"btn btn-secondary btn-sm\" (click)=\"clearHistory()\">clear history</button>\r\n    </div>\r\n\r\n    <h5>Inventar: {{ scanResultHistory.length }} </h5>\r\n    <div *ngFor=\"let item of scanResultHistory\">\r\n      <div class=\"card mt-2\">\r\n        <div class=\"card-body\" style=\"padding:.5rem\">\r\n          <h5 class=\"card-title\">{{ item.result.barcode }}</h5>\r\n\r\n          <div *ngIf=\"item.image && item.image.data_url\" class=\"float-right\">\r\n            <img [src]=\"item.image.data_url\" style=\"max-width:100%;max-height:50px\">\r\n          </div>\r\n\r\n          <p class=\"card-text\">\r\n            <span class=\"font-weight-bold\">{{ item.typToString }}:</span>{{ item.infos }}\r\n          </p>\r\n          <p *ngIf=\"false\">\r\n            {{ item | json }}\r\n          </p>\r\n\r\n        </div>\r\n\r\n        <div class=\"btn-group w-100\" *ngIf=\"item.typ === typeofLookupInventar;else elseNoInv\">\r\n          <button class=\"btn btn-success btn-sm col-6\" (click)=\"applyResult(item)\"><fa-icon [icon]=\"faCheck\"></fa-icon></button>\r\n          <button class=\"btn btn-danger btn-sm col-6\" (click)=\"removeResult(item)\"><fa-icon [icon]=\"faRemove\"></fa-icon></button>\r\n        </div>\r\n        <div class=\"btn-group w-100\" #elseNoInv>\r\n          <ngb-alert type=\"error\">\r\n          Fehler: Dies ist kein existierender Inventar-Barcode!\r\n          </ngb-alert>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div *ngIf=\"scanResultAssigned.length > 0\">\r\n    <hr class=\"mt-3\">\r\n    <h5>Zugewiesenes Inventar: {{ scanResultAssigned.length }} </h5>\r\n\r\n    <div *ngFor=\"let item of scanResultAssigned\">\r\n      <div class=\"card mt-2\">\r\n        <div class=\"card-body\" style=\"padding:.5rem\">\r\n          <h5 class=\"card-title\">{{ item.result.barcode }}</h5>\r\n\r\n          <div *ngIf=\"item.image && item.image.data_url\" class=\"float-right\">\r\n            <img [src]=\"item.image.data_url\" style=\"max-width:100%;max-height:50px\">\r\n          </div>\r\n\r\n          <p class=\"card-text\">\r\n            <span class=\"font-weight-bold\">{{ item.typToString }}:</span>{{ item.infos }}\r\n          </p>\r\n          <p *ngIf=\"false\">\r\n            {{ item | json }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"activeModal.close('Close click')\">Close</button>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.html":
  /*!*****************************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.html ***!
    \*****************************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsCreateArtikelImageCreateArtikelImageComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\">Artikelfoto erstellen</h4>\r\n  <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"activeModal.dismiss('Cross click')\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <!-- You can now use angular-cropper component in app.component.html -->\r\n  <input style=\"display:none\" type=\"file\" accept=\"image/*\" #inputUploadFile (change)=\"onInputImageFile($event, inputUploadFile)\" />\r\n  <input style=\"display:none\" type=\"file\"accept=\"image/*\" #inputUploadImage capture=\"camera\" (change)=\"onInputImageFile($event, inputUploadImage)\" />\r\n  <canvas id=\"prepareImgCanvas\" #prepareImgCanvas style=\"display:none;\"></canvas>\r\n\r\n  <div class=\"editor\" *ngIf=\"imageUrl\">\r\n    <div class=\"canvas\">\r\n      <angular-cropper\r\n          #angularCropper\r\n          *ngIf=\"imageUrl\"\r\n          [cropperOptions]=\"config\"\r\n          [imageUrl]=\"imageUrl\">\r\n      </angular-cropper>\r\n      <!--\r\n      (cropstart)=\"cropStart($event)\"\r\n      (crop)=\"onCrop($event)\"\r\n      (cropmove)=\"cropMove($event)\"\r\n      (cropend)=\"cropEnd($event)\"\r\n      (ready)=\"onCropperReady($event)\"\r\n      -->\r\n    </div>\r\n\r\n\r\n    <div class=\"toolbar-cropend\" *ngIf=\"cropStatus === 5\">\r\n      <button class=\"btn btn-sm btn-success btn-icon-cirular\" (click)=\"crop()\"><fa-icon [icon]=\"faCheck\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-danger btn-icon-cirular\" (click)=\"cropReset()\"><fa-icon [icon]=\"faBan\"></fa-icon></button>\r\n    </div>\r\n    <div class=\"toolbar btn-group btn-group-sm rounded\">\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"setDragModeToMove()\"><fa-icon [icon]=\"faMove\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"setDragModeToCrop()\"><fa-icon [icon]=\"faCrop\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"zoomIn()\"><fa-icon [icon]=\"faSearchPlus\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"zoomOut()\"><fa-icon [icon]=\"faSearchMinus\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"rotateLeft()\"><fa-icon [icon]=\"faRotateLeft\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"rotateRight()\"><fa-icon [icon]=\"faRotateRight\"></fa-icon></button>\r\n    </div>\r\n  </div>\r\n  <img *ngIf=\"previewImgUrl\" [src]=\"previewImgUrl\" class=\"mt-1\" style=\"max-width:100%; max-height:150px;\"/>\r\n  <p class=\"d-none\">create-artikel-image works!</p>\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <div class=\"btn-toolbar\">\r\n    <div class=\"btn-group mr-5\">\r\n      <button class=\"btn btn-info\" (click)=\"openInputUploadFile()\">\r\n        <fa-icon [icon]=\"faUpload\"></fa-icon>\r\n        <span class=\"d-none d-md-inline\">Upload</span>\r\n      </button>\r\n      <button class=\"btn btn-info\" (click)=\"openInputUploadImage()\">\r\n        <fa-icon [icon]=\"faCamera\"></fa-icon>\r\n        <span class=\"d-none d-md-inline\">Photo</span>\r\n      </button>\r\n    </div>\r\n    <div class=\"btn-group\">\r\n\r\n      <button type=\"button\" class=\"btn btn-secondary\" (click)=\"close()\">\r\n        <fa-icon [icon]=\"faBan\"></fa-icon>\r\n        Abbr<span class=\"d-none d-md-inline\">echen</span><span class=\"d-inline d-md-none\">.</span>\r\n      </button>\r\n      <button type=\"button\" class=\"btn btn-success\" (click)=\"save()\" *ngIf=\"imageUrl\">\r\n        <fa-icon [icon]=\"faSave\"></fa-icon>\r\n        <span class=\"d-none d-md-inline\">Fertig</span>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.html":
  /*!***********************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.html ***!
    \***********************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsCreateRaumImageCreateRaumImageComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\">Raumfoto erstellen</h4>\r\n  <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"activeModal.dismiss('Cross click')\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <!-- You can now use angular-cropper component in app.component.html -->\r\n  <input style=\"display:none\" type=\"file\" accept=\"image/*\" #inputUploadFile (change)=\"onInputImageFile($event, inputUploadFile)\" />\r\n  <input style=\"display:none\" type=\"file\"accept=\"image/*\" #inputUploadImage capture=\"camera\" (change)=\"onInputImageFile($event, inputUploadImage)\" />\r\n  <canvas id=\"prepareImgCanvas\" #prepareImgCanvas style=\"display:none;\"></canvas>\r\n\r\n  <div class=\"editor\" *ngIf=\"imageUrl\">\r\n    <div class=\"canvas\">\r\n      <angular-cropper\r\n        #angularCropper\r\n        *ngIf=\"imageUrl\"\r\n        [cropperOptions]=\"config\"\r\n        [imageUrl]=\"imageUrl\">\r\n      </angular-cropper>\r\n      <!--\r\n      (cropstart)=\"cropStart($event)\"\r\n      (crop)=\"onCrop($event)\"\r\n      (cropmove)=\"cropMove($event)\"\r\n      (cropend)=\"cropEnd($event)\"\r\n      (ready)=\"onCropperReady($event)\"\r\n      -->\r\n    </div>\r\n\r\n\r\n    <div class=\"toolbar-cropend\" *ngIf=\"cropStatus === 5\">\r\n      <button class=\"btn btn-sm btn-success btn-icon-cirular\" (click)=\"crop()\"><fa-icon [icon]=\"faCheck\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-danger btn-icon-cirular\" (click)=\"cropReset()\"><fa-icon [icon]=\"faBan\"></fa-icon></button>\r\n    </div>\r\n    <div class=\"toolbar btn-group btn-group-sm rounded\">\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"setDragModeToMove()\"><fa-icon [icon]=\"faMove\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"setDragModeToCrop()\"><fa-icon [icon]=\"faCrop\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"zoomIn()\"><fa-icon [icon]=\"faSearchPlus\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"zoomOut()\"><fa-icon [icon]=\"faSearchMinus\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"rotateLeft()\"><fa-icon [icon]=\"faRotateLeft\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"rotateRight()\"><fa-icon [icon]=\"faRotateRight\"></fa-icon></button>\r\n    </div>\r\n  </div>\r\n  <img *ngIf=\"previewImgUrl\" [src]=\"previewImgUrl\" class=\"mt-1\" style=\"max-width:100%; max-height:150px;\"/>\r\n  <p class=\"d-none\">create-raum-image works!</p>\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <div class=\"btn-toolbar\">\r\n    <div class=\"btn-group mr-5\">\r\n      <button class=\"btn btn-info\" (click)=\"openInputUploadFile()\">\r\n        <fa-icon [icon]=\"faUpload\"></fa-icon>\r\n        <span class=\"d-none d-md-inline\"> Upload </span>\r\n      </button>\r\n      <button class=\"btn btn-info\" (click)=\"openInputUploadImage()\">\r\n        <fa-icon [icon]=\"faCamera\"></fa-icon>\r\n        <span class=\"d-none d-md-inline\"> Photo </span>\r\n      </button>\r\n    </div>\r\n    <div class=\"btn-group\">\r\n\r\n      <button type=\"button\" class=\"btn btn-secondary\" (click)=\"close()\">\r\n        <fa-icon [icon]=\"faBan\"></fa-icon>\r\n        Abbr<span class=\"d-none d-md-inline\">echen</span></button>\r\n      <button type=\"button\" class=\"btn btn-success\" (click)=\"save()\" *ngIf=\"imageUrl\">\r\n        <fa-icon [icon]=\"faSave\"></fa-icon>\r\n        <span class=\"d-none d-md-inline\">Fertig</span></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.html":
  /*!***************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.html ***!
    \***************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsEditInventarEditInventarComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header p-0\" style=\"padding:0.1rem\">\r\n  <div class=\"btn-group row no-gutters w-100\">\r\n    <button type=\"button\" class=\"btn btn-danger col-2\" (click)=\"activeModal.dismiss('Cross click')\">\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\" id=\"modal-basic-title\">Inventar bearbeiten</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <form #inventarForm=\"ngForm\">\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"editInventarBarcode\" class=\"d-none\">Barcode: </label>\r\n      <div class=\"input-group mb-1\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">BCode</span>\r\n        </div>\r\n        <input readonly id=\"editInventarBarcode\" #editInventarBarcode (change)=\"formValidate()\" class=\"form-control formcontrol-edit-barcode\" (paste)=\"$event.preventDefault()\" placeholder=\"Barcode\"\r\n               name=\"code\"\r\n               [(ngModel)]=\"inventarInput.code\"\r\n               #code=\"ngModel\"\r\n        >\r\n        <div class=\"input-group-append\">\r\n          <button class=\"btn btn-outline-success\" type=\"button\" (click)=\"openScanner(editInventarBarcode)\"><fa-icon [icon]=\"faCamera\"></fa-icon></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\" [ngClass]=\"{\r\n        'has-warning': false,\r\n        'has-info': false\r\n        }\">\r\n      <label for=\"Bezeichnung\" class=\"d-none\">Bez.: </label>\r\n      <div class=\"input-group mb-1\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">Bezg</span>\r\n        </div>\r\n        <input id=\"Bezeichnung\" class=\"form-control\" placeholder=\"Bezeichnung\"\r\n               name=\"Bezeichnung\"\r\n               [(ngModel)]=\"inventarInput.Bezeichnung\"\r\n               #bezeichnung=\"ngModel\"\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"Hersteller\" class=\"d-none\">Hersteller:</label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">HST</span>\r\n        </div>\r\n        <input\r\n          id=\"Hersteller\"\r\n          name=\"Hersteller\"\r\n          placeholder=\"Hersteller\"\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          [(ngModel)]=\"inventarInput.Hersteller\"\r\n          [ngbTypeahead]=\"search\"\r\n        >\r\n        <!--\r\n          (selectItem)=\"onSelectHersteller($event)\"\r\n          [inputFormatter]=\"formatter\"\r\n          [resultFormatter]=\"formatter\"\r\n          (change)=\"onChangeHersteller($event)\"\r\n          (focus)=\"focus$.next($any($event).target.value)\"\r\n          (click)=\"click$.next($any($event).target.value)\"\r\n          #instance=\"ngbTypeahead\"\r\n        / -->\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"Gruppe\" class=\"d-none\">Gruppe: </label>\r\n\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">GRP</span>\r\n        </div>\r\n        <input id=\"Gruppe\" class=\"form-control\" placeholder=\"Gruppe\"\r\n               name=\"Gruppe\"\r\n               [(ngModel)]=\"inventarInput.Gruppe\"\r\n               [ngbTypeahead]=\"searchGruppen\"\r\n               (input)=\"onInput($event)\"\r\n        >\r\n        <!--\r\n               (change)=\"onChangeGruppe($event)\"\r\n               (selectItem)=\"onSelectGruppe($event)\"\r\n               [inputFormatter]=\"formatter\"\r\n               [resultFormatter]=\"formatter\"\r\n               (focus)=\"focusGrp$.next($any($event).target.value)\"\r\n               (click)=\"clickGrp$.next($any($event).target.value)\"\r\n               #instanceGrp=\"ngbTypeahead\"\r\n        -->\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"Kategorie\" class=\"d-none\">Kategorie: </label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">KTG</span>\r\n        </div>\r\n        <input id=\"Kategorie\" class=\"form-control\" placeholder=\"Kategorie\"\r\n               name=\"Kategorie\"\r\n               [(ngModel)]=\"inventarInput.Kategorie\"\r\n               (input)=\"onInput($event)\"\r\n        >\r\n        <!--\r\n               (change)=\"onChange($event)\"\r\n               (selectItem)=\"onSelectKategorie($event)\"\r\n               [ngbTypeahead]=\"searchKategorien\"\r\n               [inputFormatter]=\"formatter\"\r\n               [resultFormatter]=\"formatter\"\r\n               (focus)=\"focusKtg$.next($any($event).target.value)\"\r\n               (click)=\"clickKtg$.next($any($event).target.value)\"\r\n               #instanceKtg=\"ngbTypeahead\"\r\n        -->\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"typ\" class=\"d-none\">Artikel-Typ: </label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">TYP</span>\r\n        </div>\r\n        <input id=\"typ\" class=\"form-control\" placeholder=\"Artikel-Typ\"\r\n               name=\"typ\"\r\n               [(ngModel)]=\"inventarInput.Typ\"\r\n               [ngbTypeahead]=\"searchTypen\"\r\n               (input)=\"onInput($event)\"\r\n        >\r\n        <!--\r\n               (change)=\"onChange($event)\"\r\n               (selectItem)=\"onSelectTypen($event)\"\r\n               [inputFormatter]=\"formatter\"\r\n               [resultFormatter]=\"formatter\"\r\n               (focus)=\"focusTyp$.next($any($event).target.value)\"\r\n               (click)=\"clickTyp$.next($any($event).target.value)\"\r\n               #instanceTyp=\"ngbTypeahead\"\r\n        -->\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"Groesse\" class=\"d-none\">Abmessungen: </label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">Größe</span>\r\n        </div>\r\n        <input id=\"Groesse\" class=\"form-control\" placeholder=\"Groesse\"\r\n               name=\"Groesse\"\r\n               [(ngModel)]=\"inventarInput.Groesse\"\r\n               [ngbTypeahead]=\"searchGroessen\"\r\n               (input)=\"onInput($event)\"\r\n        >\r\n        <!--\r\n               (change)=\"onChange($event)\"\r\n               (selectItem)=\"onSelectGroessen($event)\"\r\n               [inputFormatter]=\"formatter\"\r\n               [resultFormatter]=\"formatter\"\r\n               (focus)=\"focusGrs$.next($any($event).target.value)\"\r\n               (click)=\"clickGrs$.next($any($event).target.value)\"\r\n               #instanceGrs=\"ngbTypeahead\"\r\n        -->\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"Farbe\" class=\"d-none\">Farbe: </label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">Farbe</span>\r\n        </div>\r\n        <input id=\"Farbe\" class=\"form-control\" placeholder=\"Farbe\"\r\n               name=\"Farbe\"\r\n               [(ngModel)]=\"inventarInput.Farbe\"\r\n               [ngbTypeahead]=\"searchFarben\"\r\n               (input)=\"onInput($event)\"\r\n               >\r\n        <!--\r\n               (change)=\"onChange($event)\"\r\n               (input)=\"onInput($event)\"\r\n               (selectItem)=\"onSelectFarben($event)\"\r\n               [inputFormatter]=\"formatter\"\r\n               [resultFormatter]=\"formatter\"\r\n               (focus)=\"focusFa$.next($any($event).target.value)\"\r\n               (click)=\"clickFa$.next($any($event).target.value)\"\r\n               #instanceFa=\"ngbTypeahead\"\r\n        -->\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"Farbe\" class=\"d-none\">Zustand: </label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">Zustand</span>\r\n        </div>\r\n        <input id=\"Zustand\" class=\"form-control\" placeholder=\"Zustand\"\r\n               name=\"Zustand\"\r\n               [(ngModel)]=\"inventarInput.Zustand\">\r\n      </div>\r\n    </div>\r\n\r\n  </form>\r\n</div>\r\n<ngb-alert [type]=\"'danger'\" [dismissible]=\"false\" *ngFor=\"let vError of validationErrors\">\r\n  {{ vError }}\r\n</ngb-alert>\r\n\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"onSubmit($event)\">Inventar aktualisieren</button>\r\n  <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"activeModal.close('Close click')\">Close</button>\r\n  <div *ngIf=\"formError\" class=\"alert-danger\"> {{formError}} </div>\r\n  <div>\r\n    <ngb-pagination [collectionSize]=\"collectionSize\" [(page)]=\"page\" [maxSize]=\"maxSize\" [pageSize]=\"pageSize\" (pageChange)=\"onPageChange(page)\"></ngb-pagination>\r\n  </div>\r\n  <div class=\"row no-gutters\">\r\n    <div class=\"card col-sm-6\" *ngFor=\"let item of listExistingArticlePage\">\r\n      <img *ngIf=\"item.img_id\" class=\"card-img-top\" src=\"...\" alt=\"\">\r\n      <div class=\"card-body \">\r\n        <h6 class=\"card-title\">{{ item.Bezeichnung }}</h6>\r\n        <div *ngIf=\"item.Hersteller\"><small>Hst: {{ item.Hersteller }}</small></div>\r\n        <div *ngIf=\"item.Gruppe\"><small>Grp: {{ item.Gruppe }}</small></div>\r\n        <div *ngIf=\"item.Typ\"><small>Typ: {{ item.Typ }}</small></div>\r\n        <div *ngIf=\"item.Kategorie\"><small>Ktg: {{ item.Kategorie }}</small></div>\r\n        <div *ngIf=\"item.Farbe || item.Groesse\"><small>{{ item.Farbe }} {{ item.Groesse }}</small></div>\r\n        <div *ngIf=\"item.inventar_count\"><small>{{ item.inventar_count }}</small></div>\r\n      </div>\r\n      <div class=\"card-footer text-center\">\r\n        <button (click)=\"applyItemAsInput(item)\" class=\"btn btn-sm btn-info\">Als Vorlage übernehmen</button>\r\n        <button (click)=\"applyItemAsArtikel(item)\" class=\"btn btn-sm btn-primary\">Artikel Übernehmen</button>\r\n      </div>\r\n    </div><!-- Close: div.card -->\r\n  </div><!-- Close: div.row -->\r\n</div>\r\n\r\n<!-- button class=\"btn btn-lg btn-outline-primary\" (click)=\"open(content)\">Raum zuordnen</button -->\r\n\r\n<hr>\r\n\r\n<pre>{{closeResult}}</pre>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.html":
  /*!*******************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.html ***!
    \*******************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsEditRaumEditRaumComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header p-0\" style=\"padding:0.1rem\">\r\n  <div class=\"btn-group row no-gutters w-100\">\r\n    <div class=\"col-10\"></div>\r\n    <button type=\"button\" class=\"btn btn-danger col-2\" (click)=\"activeModal.dismiss('Cross click')\">\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\" id=\"modal-basic-title\">Raum bearbeiten</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <form #raumForm=\"ngForm\">\r\n\r\n    <div class=\"form-group\" [ngClass]=\"{\r\n        'has-error': raum.dirty && (raum.invalid || raumExistsStatus === 1),\r\n        'has-info': raum.dirty && raumExistsStatus === -1\r\n        }\">\r\n      <label for=\"dateOfBirth\" class=\"d-none\">Raum-Nr.: </label>\r\n      <div class=\"input-group mb-1\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">RNr</span>\r\n        </div>\r\n        <input id=\"Raum\" class=\"form-control\" placeholder=\"Raumnr\"\r\n               name=\"Raum\"\r\n               [(ngModel)]=\"raumInput.Raum\"\r\n               #raum=\"ngModel\"\r\n               (change)=\"checkIfRaumExists()\"\r\n               required\r\n        >\r\n      </div>\r\n      <div *ngIf=\"raum.valid\">\r\n        <div *ngIf=\"raumExistsStatus===-1\" class=\"help-block\">Raumangabe wird geprüft</div>\r\n        <div *ngIf=\"raumExistsStatus===1\" class=\"help-block\">Raum existiert bereits</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\" [ngClass]=\"{\r\n        'has-warning': bezeichnung.dirty && (bezeichnung.invalid || bezeichnungExistsStatus === 1),\r\n        'has-info': bezeichnung.dirty && bezeichnungExistsStatus === -1\r\n        }\">\r\n      <label for=\"Bezeichnung\" class=\"d-none\">Raum-Bez.: </label>\r\n      <div class=\"input-group mb-1\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">Bezg</span>\r\n        </div>\r\n        <input id=\"Bezeichnung\" class=\"form-control\" placeholder=\"Raumbezeichnung\"\r\n               name=\"Bezeichnung\"\r\n               [(ngModel)]=\"raumInput.Raumbezeichnung\"\r\n               #bezeichnung=\"ngModel\"\r\n               (change)=\"checkIfRaumbezeichnungExists()\"\r\n        >\r\n      </div>\r\n      <div *ngIf=\"bezeichnung.valid\">\r\n        <div *ngIf=\"bezeichnungExistsStatus===-1\" class=\"help-block\">Bezeichnung wird geprüft</div>\r\n        <div *ngIf=\"bezeichnungExistsStatus===1\" class=\"help-block\">Es existiert bereits ein Raum mit dieser Bezeichnung</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"Etage\" class=\"d-none\">Etage: </label>\r\n      <div class=\"input-group mb-1\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">Etage</span>\r\n        </div>\r\n        <input id=\"Etage\" class=\"form-control\" placeholder=\"Etage\"\r\n               name=\"Etage\"\r\n               [(ngModel)]=\"raumInput.Etage\"\r\n               [ngbTypeahead]=\"searchEtage\"\r\n               #etage=\"ngModel\"\r\n               required\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"editRaumBarcode\" class=\"d-none\">Barcode: </label>\r\n      <div class=\"input-group mb-1\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">BCode</span>\r\n        </div>\r\n        <input readonly id=\"editRaumBarcode\" #editRaumBarcode (change)=\"formValidate()\" class=\"form-control formcontrol-xedit-barcode\" (paste)=\"$event.preventDefault()\" placeholder=\"Barcode\"\r\n               name=\"code\"\r\n               [(ngModel)]=\"raumInput.code\"\r\n               #code=\"ngModel\"\r\n        >\r\n        <div class=\"input-group-append\">\r\n          <button class=\"btn btn-outline-success\" type=\"button\" (click)=\"openScanner(editRaumBarcode)\"><fa-icon [icon]=\"faBarcode\"></fa-icon></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\" *ngIf=\"false\">\r\n      <label for=\"dateOfBirth\">Datum (Dummy)</label>\r\n      <div class=\"input-group\">\r\n        <input id=\"dateOfBirth\" class=\"form-control\" placeholder=\"yyyy-mm-dd\" name=\"dp\" ngbDatepicker #dp=\"ngbDatepicker\">\r\n        <div class=\"input-group-append\">\r\n          <button class=\"btn btn-outline-secondary calendar\" (click)=\"dp.toggle()\" type=\"button\"></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n<ngb-alert [type]=\"'danger'\" [dismissible]=\"false\" *ngFor=\"let vError of validationErrors\">\r\n  {{ vError }}\r\n</ngb-alert>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"onSubmit($event)\">Raum aktualisieren</button>\r\n  <div *ngIf=\"formError\" class=\"alert-danger\"> {{formError}} </div>\r\n  formIsValid: {{formIsValid | json }} <br>\r\n  raumForm.form.valid: {{ raumForm.form.valid | json }}\r\n</div>\r\n\r\n<!-- button class=\"btn btn-lg btn-outline-primary\" (click)=\"open(content)\">Raum zuordnen</button -->\r\n\r\n<hr>\r\n\r\n<pre>{{closeResult}}</pre>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.html":
  /*!*********************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.html ***!
    \*********************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsGesamtListDoneGesamtListDoneComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header p-0\" style=\"padding:0.1rem\">\r\n  <div class=\"btn-group row no-gutters w-100\">\r\n    <button class=\"btn btn-primary col-10 text-left pl-3\" (click)=\"showGesamtRestForm()\">\r\n      <fa-icon [icon]=\"faSignOutAlt\" class=\"mr-3\"></fa-icon> Zeige fehlende Räume\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-danger col-2\" (click)=\"activeModal.dismiss('Cross click')\">\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\">Bereits inventarisierte Räume</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n\r\n  <table class=\"table table-striped\">\r\n    <thead>\r\n    <tr>\r\n      <th scope=\"col\">#</th>\r\n      <th scope=\"col\" sortable=\"Bezeichnung\">Etage</th>\r\n      <th scope=\"col\" sortable=\"Typ\">Raum</th>\r\n      <th scope=\"col\" sortable=\"Typ\">Fertig</th>\r\n      <th scope=\"col\" sortable=\"Typ\">Prgoress</th>\r\n      <th scope=\"col\" sortable=\"Menge\">Vorher</th>\r\n      <th scope=\"col\" sortable=\"Menge\">Nacher</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n    <tr *ngFor=\"let item of raeumeListDone; let rowNr = index\">\r\n      <th scope=\"row\">{{ rowNr }}</th>\r\n      <th>{{ item.Etage }}</th>\r\n      <td><span class=\"btn btn-link\" (click)=\"onSelectRaum(item.uuid)\">{{ item.Raum }}</span></td>\r\n      <td>\r\n        <fa-icon *ngIf=\"item.editStatus === 2; else elseInProgress\"  [attr.class]=\"'text-success'\" [icon]=\"faCheck\"></fa-icon>\r\n        <ng-template #elseInProgress><fa-icon [attr.class]=\"'text-info'\" [icon]=\"faInWork\"></fa-icon></ng-template>\r\n      </td>\r\n      <td>\r\n        <ng-container [ngSwitch]=\"item.statusIconName\">\r\n          <fa-icon [attr.class]=\"'text-danger'\" *ngSwitchCase=\"'empty'\" [icon]=\"faEmpty\"></fa-icon>\r\n          <fa-icon [attr.class]=\"'text-warning'\" *ngSwitchCase=\"'quarter'\" [icon]=\"faQuarter\"></fa-icon>\r\n          <fa-icon [attr.class]=\"'text-info'\" *ngSwitchCase=\"'half'\" [icon]=\"faHalf\"></fa-icon>\r\n          <fa-icon [attr.class]=\"'text-success'\" *ngSwitchCase=\"'three-quarter'\" [icon]=\"faThreeQuarter\"></fa-icon>\r\n          <fa-icon [attr.class]=\"'text-success'\" *ngSwitchCase=\"'full'\" [icon]=\"faFull\"></fa-icon>\r\n        </ng-container> {{ item.progress }}%\r\n      </td>\r\n      <td>{{ item.total }}</td>\r\n      <td>{{ item.done }}</td>\r\n    </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.html":
  /*!*********************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.html ***!
    \*********************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsGesamtListRestGesamtListRestComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header p-0\" style=\"padding:0.1rem\">\r\n  <div class=\"btn-group row no-gutters w-100\">\r\n    <button class=\"btn btn-primary col-10 text-left pl-3\" (click)=\"showGesamtDoneForm()\">\r\n      <fa-icon [icon]=\"faSignOutAlt\" class=\"mr-3\"></fa-icon> Zeige bereits aufgenommene Räume\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-danger col-2\" (click)=\"activeModal.dismiss('Cross click')\">\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\">Noch nicht inventarisierte Räume</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n\r\n  <table class=\"table table-striped\">\r\n    <thead>\r\n    <tr>\r\n      <th scope=\"col\">#</th>\r\n      <th scope=\"col\" sortable=\"Bezeichnung\">Etage</th>\r\n      <th scope=\"col\" sortable=\"Typ\">Raum</th>\r\n      <th scope=\"col\" sortable=\"Typ\">Gestarted</th>\r\n      <th scope=\"col\" sortable=\"Menge\">Vorher</th>\r\n      <th scope=\"col\" sortable=\"Menge\">Nacher</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n    <tr *ngFor=\"let item of raeumeListDone; let rowNr = index\">\r\n      <th scope=\"row\">{{ rowNr + 1 }}</th>\r\n      <th>{{ item.Etage }}</th>\r\n      <td><span class=\"btn btn-link\" (click)=\"onSelectRaum(item.uuid)\">{{ item.Raum }}</span></td>\r\n      <td>{{ item.editStatus === 0 ? 'Nein' : 'Ja' }}</td>\r\n      <td>{{ item.total }}</td>\r\n      <td>{{ item.done }}</td>\r\n    </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/imagebox/imagebox.component.html":
  /*!*****************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/imagebox/imagebox.component.html ***!
    \*****************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsImageboxImageboxComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\">{{ titel }}</h4>\r\n  <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"activeModal.dismiss('Cross click')\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <div *ngIf=\"false\">\r\n  numImages: {{ numImages }}\r\n  numImgFound: {{ numImgFound }}\r\n  numImgLoaded: {{ numImgLoaded }}\r\n  numImgFinished: {{ numImgFinished }}\r\n  finishedLoading: {{ finishedLoading | json }}\r\n  error: {{ error }}\r\n  </div>\r\n  <ng-template *ngIf=\"(!currImg || currImg === null || currImg.loadingStatus !== htmlImageLoadingStatus.Loaded); else ImageBox\">\r\n    <div *ngIf=\"error\">{{ error }}</div>\r\n    <div *ngIf=\"currImg\">\r\n      <div *ngIf=\"currImg.loadingStatus === htmlImageLoadingStatus.Pending\">Bild wird vorbereitet!</div>\r\n      <div *ngIf=\"currImg.loadingStatus === htmlImageLoadingStatus.Loading\">Bild wird geladen!</div>\r\n      <div *ngIf=\"currImg.loadingStatus === htmlImageLoadingStatus.Aborted\">Ladevorgang wurde abgebrochen!</div>\r\n      <div *ngIf=\"currImg.error\">{{ currImg.error }}</div>\r\n    </div>\r\n  </ng-template>\r\n  <ng-template #ImageBox>\r\n    <h3>{{currImgIdx + 1 }}/{{numImages}} {{ currImg.name }}</h3>\r\n    <p *ngIf=\"currImg.desc\">{{ currImg.desc }}</p>\r\n    <div style=\"position:relative;text-align:center\">\r\n      <button class=\"btn btn-mini btn-light\"\r\n              style=\"position:absolute;left:10px;top:calc(50% - 1rem);\"\r\n              (click)=\"prev()\" *ngIf=\"currImgIdx > 0\">\r\n        <fa-icon [icon]=\"faAngleLeft\"></fa-icon>\r\n      </button>\r\n      <button class=\"btn btn-mini btn-light\"\r\n              style=\"position:absolute;right:10px;top:calc(50% - 1rem);\"\r\n              (click)=\"next()\" *ngIf=\"currImgIdx < (numImages - 1)\">\r\n        <fa-icon [icon]=\"faAngleRight\"></fa-icon>\r\n      </button>\r\n      <button  class=\"btn btn-mini btn-danger\"\r\n               style=\"position:absolute;left:calc(50% - .5rem);bottom:.5rem;\"\r\n               (click)=\"delete(currImg.uuid)\">\r\n        <fa-icon [icon]=\"faTrashAlt\"></fa-icon>\r\n      </button>\r\n      <img [src]=\"currImg.img.src\" style=\"max-width:99%;max-height:99%;margin-left:auto;margin-right:auto\">\r\n      <div class=\"carousel-caption\" style=\"position:absolute;bottom:2rem;text-align:center\">\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <ngb-carousel *ngIf=\"false && finishedLoading && numImgLoaded > 0\">\r\n      <ng-template *ngFor=\"let item of images; let i = index\" ngbSlide>\r\n        <ng-container *ngIf=\"item !== null && item.img && item.loadingStatus===htmlImageLoadingStatus.Loaded\">\r\n          <div class=\"picsum-img-wrapper\">\r\n            <img [src]=\"item.img.src\" class=\"slide-img-by-dataurl\" alt=\"{{ item.titel }}\">\r\n          </div>\r\n          <div class=\"carousel-caption\">\r\n            <h3>{{ item.name }}</h3>\r\n            <p *ngIf=\"item.desc\">{{ item.desc }}}</p>\r\n          </div>\r\n        </ng-container>\r\n      </ng-template>\r\n    </ngb-carousel>\r\n  </ng-template>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.html":
  /*!*****************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.html ***!
    \*****************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsRaumListDoneRaumListDoneComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header p-0\" style=\"padding:0.1rem\">\r\n  <div class=\"btn-group row no-gutters w-100\">\r\n    <button class=\"btn btn-primary col-10 text-left pl-3\" (click)=\"showRaumRestForm($event)\">\r\n      <fa-icon [icon]=\"faSignOutAlt\" class=\"mr-3\"></fa-icon> Zeige fehlendes Inventar\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-danger col-2\" (click)=\"activeModal.dismiss('Cross click')\">\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\">Bereits inventarisiert</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n\r\n  <table class=\"table table-striped\">\r\n    <thead>\r\n    <tr>\r\n      <th scope=\"col\">#</th>\r\n      <th scope=\"col\" sortable=\"Bezeichnung\">Bezeichnung</th>\r\n      <th scope=\"col\" sortable=\"Typ\">Typ</th>\r\n      <th scope=\"col\" sortable=\"Menge\">Menge</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n    <tr *ngFor=\"let item of inventarListDone; let rowNr = index\">\r\n      <th scope=\"row\">{{ rowNr + 1 }}</th>\r\n      <td>{{ item.Bezeichnung }}</td>\r\n      <td>{{ item.Typ }}</td>\r\n      <td>{{ item.Menge }}</td>\r\n    </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.html":
  /*!*****************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.html ***!
    \*****************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsRaumListRestRaumListRestComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header p-0\" style=\"padding:0.1rem\">\r\n  <div class=\"btn-group row no-gutters w-100\">\r\n    <button class=\"btn btn-primary col-10 text-left pl-3\" (click)=\"showRaumDoneForm($event)\">\r\n      <fa-icon [icon]=\"faSignOutAlt\" class=\"mr-3\"></fa-icon> Zeige zugewiesenes Inventar\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-danger col-2\" (click)=\"activeModal.dismiss('Cross click')\">\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\">Dieses Inventar fehlt noch</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n\r\n  <table class=\"table table-striped\">\r\n    <thead>\r\n    <tr>\r\n      <th scope=\"col\">#</th>\r\n      <th scope=\"col\" sortable=\"Bezeichnung\">Bezeichnung</th>\r\n      <th scope=\"col\" sortable=\"Typ\">Typ</th>\r\n      <th scope=\"col\" sortable=\"Menge\">Menge</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n    <tr *ngFor=\"let item of inventarListRest; let rowNr = index\">\r\n      <th scope=\"row\">{{ rowNr + 1 }}</th>\r\n      <td>{{ item.Bezeichnung }}</td>\r\n      <td>{{ item.Typ }}</td>\r\n      <td>{{ item.Menge }}</td>\r\n    </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/scanner/scanner.component.html":
  /*!***************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/scanner/scanner.component.html ***!
    \***************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsScannerScannerComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header\">\r\n  <h6 class=\"modal-title\">Barcode scannen!</h6>\r\n  <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"activeModal.dismiss('Cross click')\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <select (change)=\"onDeviceSelectChange($event.target.value)\">\r\n    <option value=\"\" [selected]=\"!currentDevice\">No Device Selected</option>\r\n    <option *ngFor=\"let device of availableDevices\" [value]=\"device.deviceId\"\r\n            [selected]=\"currentDevice && device.deviceId === currentDevice.deviceId\">{{device.label}}</option>\r\n  </select>\r\n  <div class=\"scanner-view-port\">\r\n    <zxing-scanner\r\n      #scanner\r\n      [style.height]=\"'5rem'\"\r\n\r\n      [torch]=\"torchEnabled\"\r\n      [(device)]=\"currentDevice\"\r\n      (scanSuccess)=\"onCodeResult($event)\"\r\n      [formats]=\"formatsEnabled\"\r\n      [tryHarder]=\"tryHarder\"\r\n      (permissionResponse)=\"onHasPermission($event)\"\r\n      (camerasFound)=\"onCamerasFound($event)\"\r\n      (torchCompatible)=\"onTorchCompatible($event)\">\r\n    </zxing-scanner>\r\n    <div *ngIf=\"currentDevice\" id=\"ScannerFocusRedLine\"></div>\r\n  </div>\r\n\r\n  <div class=\"input-group mb-3\" *ngIf=\"allowBarcodeInput\">\r\n    <input type=\"text\" class=\"form-control\" #bcInputTest\r\n           placeholder=\"Barcode\" aria-label=\"Barcode\" aria-describedby=\"button-addon2\">\r\n    <div class=\"input-group-append\">\r\n      <button class=\"btn btn-outline-primary\" type=\"button\" id=\"button-addon2\"\r\n              (click)=\"bctest(bcInputTest.value)\"><fa-icon [icon]=\"faCheck\"></fa-icon></button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"card\" *ngIf=\"scanResultCurrent\">\r\n    <div class=\"card-body\">\r\n      <h5 class=\"card-title\">{{ scanResultCurrent.barcode }}</h5>\r\n\r\n      <div *ngIf=\"scanResultCurrent.image && scanResultCurrent.image.data_url\" class=\"float-right\">\r\n        <img [src]=\"scanResultCurrent.image.data_url\" style=\"max-width:200%;max-height:150px\">\r\n      </div>\r\n\r\n      <p class=\"card-text\">\r\n        <span class=\"font-weight-bold\">{{ scanResultCurrent.typToString }}:</span> {{ scanResultCurrent.infos }}\r\n      </p>\r\n\r\n    </div>\r\n    <div class=\"btn-group w-100\">\r\n      <button class=\"btn btn-success btn-sm col-6\" (click)=\"applyResult()\"><fa-icon [icon]=\"faCheck\"></fa-icon></button>\r\n      <button class=\"col-6 btn btn-danger\" ngbButton (click)=\"clearResult()\"><fa-icon [icon]=\"faRemove\"></fa-icon></button>\r\n    </div>\r\n\r\n  </div>\r\n\r\n  <div *ngIf=\"scanResultHistory.length > 0\">\r\n    <hr class=\"mt-3\">\r\n    <div class=\"w-100 text-right\">\r\n      <button class=\"btn btn-secondary btn-sm\" (click)=\"clearHistory()\">clear history</button>\r\n    </div>\r\n\r\n    <div *ngFor=\"let item of scanResultHistory\">\r\n      <div class=\"card mt-2\">\r\n        <div class=\"card-body\" style=\"padding:.5rem\">\r\n          <h5 class=\"card-title\">{{ item.barcode }}</h5>\r\n\r\n          <div *ngIf=\"item.image && item.image.data_url\" class=\"float-right\">\r\n            <img [src]=\"item.image.data_url\" style=\"max-width:100%;max-height:50px\">\r\n          </div>\r\n\r\n          <p class=\"card-text\">\r\n            <span class=\"font-weight-bold\">{{ item.typToString }}:</span> {{ item.infos }}\r\n          </p>\r\n\r\n        </div>\r\n\r\n        <div class=\"btn-group w-100\">\r\n          <button class=\"btn btn-success btn-sm col-6\" (click)=\"applyHistoryResult(item)\"><fa-icon [icon]=\"faCheck\"></fa-icon></button>\r\n          <button class=\"btn btn-danger btn-sm col-6\" (click)=\"removeResult(item)\"><fa-icon [icon]=\"faRemove\"></fa-icon></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"activeModal.close('Close click')\">Close</button>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.html":
  /*!*******************************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.html ***!
    \*******************************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsSelectCreateArtikelSelectCreateArtikelComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header p-0\" style=\"padding:0.1rem\">\r\n  <div class=\"btn-group row no-gutters w-100\">\r\n    <button class=\"btn btn-primary col-10 text-left pl-3\" (click)=\"showSearchForm($event)\">\r\n      <fa-icon [icon]=\"faSignOutAlt\" class=\"mr-3\"></fa-icon> <fa-icon [icon]=\"faSearch\"></fa-icon> Artikel suchen\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-danger col-2\" (click)=\"activeModal.dismiss('Cross click')\">\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\" id=\"modal-basic-title\">{{ formTitle }}</h4>\r\n</div>\r\n<div class=\"modal-body artikel-form\" [ngClass]=\"{ 'artikel-form-kunst': formType === formTypeKunst }\">\r\n  <form #myForm=\"ngForm\">\r\n    <div *ngIf=\"formLabels.Hersteller.isVisible\" class=\"form-group\">\r\n      <label for=\"Hersteller\" class=\"d-none\">{{ formLabels.Hersteller.label }}:</label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">{{ formLabels.Hersteller.labelShort }}</span>\r\n        </div>\r\n      <input\r\n        id=\"Hersteller\"\r\n        name=\"Hersteller\"\r\n        [placeholder]=\"formLabels.Hersteller.placeholder\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        [(ngModel)]=\"artikelDaten.Hersteller\"\r\n        (selectItem)=\"onSelectHersteller($event)\"\r\n        [ngbTypeahead]=\"search\"\r\n        [inputFormatter]=\"formatter\"\r\n        [resultFormatter]=\"formatter\"\r\n        (change)=\"onChangeHersteller($event)\"\r\n        (focus)=\"focus$.next($any($event).target.value)\"\r\n        (click)=\"click$.next($any($event).target.value)\"\r\n        #instance=\"ngbTypeahead\"\r\n      />\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"formLabels.Gruppe.isVisible\" class=\"form-group\">\r\n      <label for=\"typ\" class=\"d-none\">{{ formLabels.Gruppe.label }}: </label>\r\n\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">{{ formLabels.Gruppe.labelShort }}</span>\r\n        </div>\r\n        <input id=\"Gruppe\" class=\"form-control\"\r\n               [placeholder]=\"formLabels.Gruppe.placeholder\"\r\n               name=\"Gruppe\"\r\n               [(ngModel)]=\"artikelDaten.Gruppe\"\r\n               (change)=\"onChangeGruppe($event)\"\r\n               (input)=\"onInput($event)\"\r\n               (selectItem)=\"onSelectGruppe($event)\"\r\n               [ngbTypeahead]=\"searchGruppen\"\r\n               [inputFormatter]=\"formatter\"\r\n               [resultFormatter]=\"formatter\"\r\n               (focus)=\"focusGrp$.next($any($event).target.value)\"\r\n               (click)=\"clickGrp$.next($any($event).target.value)\"\r\n               #instanceGrp=\"ngbTypeahead\"\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"formLabels.Kategorie.isVisible\" class=\"form-group\">\r\n      <label for=\"typ\" class=\"d-none\">{{ formLabels.Kategorie.label }}: </label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">{{ formLabels.Kategorie.labelShort }}</span>\r\n        </div>\r\n        <input id=\"Kategorie\" class=\"form-control\"\r\n               [placeholder]=\"formLabels.Kategorie.placeholder\"\r\n               name=\"Kategorie\"\r\n               [(ngModel)]=\"artikelDaten.Kategorie\"\r\n               (change)=\"onChange($event)\"\r\n               (input)=\"onInput($event)\"\r\n               (selectItem)=\"onSelectKategorie($event)\"\r\n               [ngbTypeahead]=\"searchKategorien\"\r\n               [inputFormatter]=\"formatter\"\r\n               [resultFormatter]=\"formatter\"\r\n               (focus)=\"focusKtg$.next($any($event).target.value)\"\r\n               (click)=\"clickKtg$.next($any($event).target.value)\"\r\n               #instanceKtg=\"ngbTypeahead\"\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"formLabels.Bezeichnung.isVisible\" class=\"form-group\" [ngClass]=\"{\r\n        'has-error': bezeichnung.dirty && (bezeichnung.invalid || numBezeichnungExists === 1),\r\n        'has-info': bezeichnung.dirty && numBezeichnungExists === -1\r\n        }\">\r\n      <label for=\"Bezeichnung\" class=\"d-none\">{{ formLabels.Bezeichnung.label }}: </label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">{{ formLabels.Bezeichnung.labelShort }}</span>\r\n        </div>\r\n        <input id=\"Bezeichnung\" class=\"form-control\"\r\n               [placeholder]=\"formLabels.Bezeichnung.placeholder\"\r\n               name=\"Bezeichnung\"\r\n               [(ngModel)]=\"artikelDaten.Bezeichnung\"\r\n               #bezeichnung=\"ngModel\"\r\n               (change)=\"checkIfABezeichnungExistsGlobal()\"\r\n               (input)=\"onInput($event)\"\r\n               required\r\n        >\r\n      </div>\r\n      <div *ngIf=\"bezeichnung.valid\">\r\n        <div *ngIf=\"numBezeichnungExists === -1\" class=\"help-block\">Artikelangabe wird geprüft {{ numBezeichnungExists }}</div>\r\n        <div *ngIf=\"numBezeichnungExists > 0\" class=\"help-block\">Artikel existiert bereits {{ numBezeichnungExists }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"formLabels.Typ.isVisible\" class=\"form-group\">\r\n      <label for=\"typ\" class=\"d-none\">{{ formLabels.Typ.label }}: </label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">{{ formLabels.Typ.labelShort }}</span>\r\n        </div>\r\n        <input id=\"typ\" class=\"form-control\"\r\n               [placeholder]=\"formLabels.Typ.placeholder\"\r\n               name=\"typ\"\r\n               [(ngModel)]=\"artikelDaten.Typ\"\r\n               (change)=\"onChange($event)\"\r\n               (input)=\"onInput($event)\"\r\n               (selectItem)=\"onSelectTypen($event)\"\r\n               [ngbTypeahead]=\"searchTypen\"\r\n               [inputFormatter]=\"formatter\"\r\n               [resultFormatter]=\"formatter\"\r\n               (focus)=\"focusTyp$.next($any($event).target.value)\"\r\n               (click)=\"clickTyp$.next($any($event).target.value)\"\r\n               #instanceTyp=\"ngbTypeahead\"\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"formLabels.Groesse.isVisible\" class=\"form-group\">\r\n      <label for=\"Groesse\" class=\"d-none\">{{ formLabels.Groesse.label }}: </label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">{{ formLabels.Groesse.labelShort }}</span>\r\n        </div>\r\n        <input id=\"Groesse\" class=\"form-control\"\r\n               [placeholder]=\"formLabels.Groesse.placeholder\"\r\n               name=\"Groesse\"\r\n               [(ngModel)]=\"artikelDaten.Groesse\"\r\n               (change)=\"onChange($event)\"\r\n               (input)=\"onInput($event)\"\r\n               (selectItem)=\"onSelectGroessen($event)\"\r\n               [ngbTypeahead]=\"searchGroessen\"\r\n               [inputFormatter]=\"formatter\"\r\n               [resultFormatter]=\"formatter\"\r\n               (focus)=\"focusGrs$.next($any($event).target.value)\"\r\n               (click)=\"clickGrs$.next($any($event).target.value)\"\r\n               #instanceGrs=\"ngbTypeahead\"\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"formLabels.Farbe.isVisible\" class=\"form-group\">\r\n      <label for=\"Farbe\" class=\"d-none\">{{ formLabels.Farbe.label }}: </label>\r\n      <div class=\"input-group mb-3\">\r\n        <div class=\"input-group-prepend\">\r\n          <span class=\"input-group-text\">{{ formLabels.Farbe.labelShort }}</span>\r\n        </div>\r\n        <input id=\"Farbe\" class=\"form-control\"\r\n               [placeholder]=\"formLabels.Farbe.placeholder\"\r\n               name=\"Farbe\"\r\n               [(ngModel)]=\"artikelDaten.Farbe\"\r\n               (change)=\"onChange($event)\"\r\n               (input)=\"onInput($event)\"\r\n               (selectItem)=\"onSelectFarben($event)\"\r\n               [ngbTypeahead]=\"searchFarben\"\r\n               [inputFormatter]=\"formatter\"\r\n               [resultFormatter]=\"formatter\"\r\n               (focus)=\"focusFa$.next($any($event).target.value)\"\r\n               (click)=\"clickFa$.next($any($event).target.value)\"\r\n               #instanceFa=\"ngbTypeahead\"\r\n        >\r\n      </div>\r\n    </div>\r\n  </form>\r\n  <pre>{{closeResult}}</pre>\r\n  <p class=\"d-none\">select-create-artikel works!</p>\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"activeModal.close('Close click')\">Close</button>\r\n  <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"onSubmit($event)\" [disabled]=\"!formIsValid || !myForm.form.valid\">Artikel anlegen</button>\r\n  <div *ngIf=\"formError\" class=\"alert-danger\"> {{formError}} </div>\r\n  <div>\r\n    <ngb-pagination [collectionSize]=\"collectionSize\" [(page)]=\"page\" [maxSize]=\"maxSize\" [pageSize]=\"pageSize\" (pageChange)=\"onPageChange(page)\"></ngb-pagination>\r\n  </div>\r\n  <div class=\"row no-gutters\">\r\n    <div class=\"card col-sm-6\" *ngFor=\"let item of listExistingArticlePage\">\r\n      <img *ngIf=\"item.img_id\" class=\"card-img-top\" src=\"...\" alt=\"\">\r\n      <div class=\"card-body \">\r\n        <h6 class=\"card-title\">{{ item.Bezeichnung }}</h6>\r\n        <div *ngIf=\"item.Hersteller\"><small>Hst: {{ item.Hersteller }}</small></div>\r\n        <div *ngIf=\"item.Gruppe\"><small>Grp: {{ item.Gruppe }}</small></div>\r\n        <div *ngIf=\"item.Typ\"><small>Typ: {{ item.Typ }}</small></div>\r\n        <div *ngIf=\"item.Kategorie\"><small>Ktg: {{ item.Kategorie }}</small></div>\r\n        <div *ngIf=\"item.Farbe || item.Groesse\"><small>{{ item.Farbe }} {{ item.Groesse }}</small></div>\r\n        <div *ngIf=\"item.inventar_count\"><small>{{ item.inventar_count }}</small></div>\r\n      </div>\r\n      <div class=\"card-footer text-center\">\r\n        <button (click)=\"applyItemAsInput(item)\" class=\"btn btn-sm btn-info\">Als Vorlage übernehmen</button>\r\n        <button (click)=\"applyItemAsArtikel(item)\" class=\"btn btn-sm btn-primary\">Artikel Übernehmen</button>\r\n      </div>\r\n    </div><!-- Close: div.card -->\r\n  </div><!-- Close: div.row -->\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.html":
  /*!*************************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.html ***!
    \*************************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsSelectCreateRaumSelectCreateRaumComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header p-0\" style=\"padding:0.1rem\">\r\n  <div class=\"btn-group row no-gutters w-100\">\r\n    <button class=\"btn btn-primary col-10 text-left pl-3\" (click)=\"showSearchForm($event)\">\r\n      <fa-icon [icon]=\"faSignOutAlt\" class=\"mr-3\"></fa-icon> <fa-icon [icon]=\"faSearch\"></fa-icon> Raum suchen\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-danger col-2\" (click)=\"activeModal.dismiss('Cross click')\">\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n <div class=\"modal-header\">\r\n    <h4 class=\"modal-title\" id=\"modal-basic-title\">Raum anlegen</h4>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <form #raumForm=\"ngForm\">\r\n\r\n      <div class=\"form-group\" [ngClass]=\"{\r\n        'has-error': raum.dirty && (raum.invalid || raumExistsStatus === 1),\r\n        'has-info': raum.dirty && raumExistsStatus === -1\r\n        }\">\r\n        <label for=\"dateOfBirth\" class=\"d-none\">Raum-Nr.: </label>\r\n        <div class=\"input-group mb-1\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\">RNr</span>\r\n          </div>\r\n          <input id=\"Raum\" class=\"form-control\" placeholder=\"Raumnr\"\r\n                 name=\"Raum\"\r\n                 [(ngModel)]=\"raumDaten.Raum\"\r\n                 #raum=\"ngModel\"\r\n                 (change)=\"checkIfRaumExists()\"\r\n                 required\r\n          >\r\n        </div>\r\n        <div *ngIf=\"raum.valid\">\r\n          <div *ngIf=\"raumExistsStatus===-1\" class=\"help-block\">Raumangabe wird geprüft</div>\r\n          <div *ngIf=\"raumExistsStatus===1\" class=\"help-block\">Raum existiert bereits</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\" [ngClass]=\"{\r\n        'has-warning': bezeichnung.dirty && (bezeichnung.invalid || bezeichnungExistsStatus === 1),\r\n        'has-info': bezeichnung.dirty && bezeichnungExistsStatus === -1\r\n        }\">\r\n        <label for=\"Bezeichnung\" class=\"d-none\">Raum-Bez.: </label>\r\n        <div class=\"input-group mb-1\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\">Bezg</span>\r\n          </div>\r\n          <input id=\"Bezeichnung\" class=\"form-control\" placeholder=\"Raumbezeichnung\"\r\n                 name=\"Bezeichnung\"\r\n                 [(ngModel)]=\"raumDaten.Raumbezeichnung\"\r\n                 #bezeichnung=\"ngModel\"\r\n                 (change)=\"checkIfRaumbezeichnungExists()\"\r\n          >\r\n        </div>\r\n        <div *ngIf=\"bezeichnung.valid\">\r\n          <div *ngIf=\"bezeichnungExistsStatus===-1\" class=\"help-block\">Bezeichnung wird geprüft</div>\r\n          <div *ngIf=\"bezeichnungExistsStatus===1\" class=\"help-block\">Es existiert bereits ein Raum mit dieser Bezeichnung</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"Etage\" class=\"d-none\">Etage: </label>\r\n        <div class=\"input-group mb-1\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\">Etage</span>\r\n          </div>\r\n          <input id=\"Etage\" class=\"form-control\" placeholder=\"Etage\"\r\n                 name=\"Etage\"\r\n                 [(ngModel)]=\"raumDaten.Etage\"\r\n                 #etage=\"ngModel\"\r\n                 required\r\n          >\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"newRaumBarcode\" class=\"d-none\">Barcode: </label>\r\n        <div class=\"input-group mb-1\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\">BCode</span>\r\n          </div>\r\n          <input readonly id=\"newRaumBarcode\" #newRaumBarcode class=\"form-control formcontrol-edit-barcode\" (paste)=\"$event.preventDefault()\" placeholder=\"Barcode\"\r\n                 name=\"code\"\r\n                 [(ngModel)]=\"raumDaten.code\"\r\n                 #code=\"ngModel\"\r\n          >\r\n          <div class=\"input-group-append\">\r\n            <button class=\"btn btn-outline-success\" type=\"button\" (click)=\"openScanner(newRaumBarcode)\"><fa-icon [icon]=\"faCamera\"></fa-icon></button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\" *ngIf=\"false\">\r\n        <label for=\"dateOfBirth\">Datum (Dummy)</label>\r\n        <div class=\"input-group\">\r\n          <input id=\"dateOfBirth\" class=\"form-control\" placeholder=\"yyyy-mm-dd\" name=\"dp\" ngbDatepicker #dp=\"ngbDatepicker\">\r\n          <div class=\"input-group-append\">\r\n            <button class=\"btn btn-outline-secondary calendar\" (click)=\"dp.toggle()\" type=\"button\"></button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-outline-dark\" (click)=\"onSubmit($event)\" [disabled]=\"!formIsValid || !raumForm.form.valid\">Raum anlegen</button>\r\n    <div *ngIf=\"formError\" class=\"alert-danger\"> {{formError}} </div>\r\n  </div>\r\n\r\n<!-- button class=\"btn btn-lg btn-outline-primary\" (click)=\"open(content)\">Raum zuordnen</button -->\r\n\r\n<hr>\r\n\r\n<pre>{{closeResult}}</pre>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.html":
  /*!*******************************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.html ***!
    \*******************************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsSelectSearchArtikelSelectSearchArtikelComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header p-0\" style=\"padding:0.1rem\">\r\n  <div class=\"btn-group row no-gutters w-100\">\r\n  <button class=\"btn btn-primary col-10 text-left pl-3\" (click)=\"showCreateForm($event)\">\r\n    <fa-icon [icon]=\"faSignOutAlt\" class=\"mr-3\"></fa-icon> <fa-icon [icon]=\"faPlus\"></fa-icon> Neuen Artikel anlegen\r\n  </button>\r\n  <button type=\"button\" class=\"btn btn-danger col-2\" (click)=\"activeModal.dismiss('Cross click')\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n  </div>\r\n</div>\r\n<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\">Artikelauswahl</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <label for=\"typeahead-prevent-manual-entry\">Artikel suchen:</label>\r\n  <div class=\"input-group\">\r\n    <div class=\"input-group-prepend\">\r\n      <span class=\"input-group-text\"><fa-icon [icon]=\"faSearch\"></fa-icon></span>\r\n    </div>\r\n    <input id=\"typeahead-prevent-manual-entry\" #searchArtikelInput type=\"text\" class=\"form-control\"\r\n           (selectItem)=\"onSelectItem($event)\"\r\n           [(ngModel)]=\"model\"\r\n           [ngbTypeahead]=\"search\"\r\n           [inputFormatter]=\"formatter\"\r\n           [resultFormatter]=\"formatter\"\r\n           [editable]='false' />\r\n  </div>\r\n  <hr>\r\n  <pre class=\"d-none\">Model: {{ model | json }}</pre>\r\n\r\n  <p class=\"d-none\">select-search-artikel works! {{ clientId }}</p>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.html":
  /*!*************************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.html ***!
    \*************************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsSelectSearchRaumSelectSearchRaumComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-header p-0\" style=\"padding:0.1rem\">\r\n  <div class=\"btn-group row no-gutters w-100\">\r\n    <button class=\"btn btn-primary col-10 text-left pl-3\" (click)=\"showCreateForm($event)\">\r\n      <fa-icon [icon]=\"faSignOutAlt\" class=\"mr-3\"></fa-icon> <fa-icon [icon]=\"faPlus\"></fa-icon> Neuen Raum anlegen\r\n    </button>\r\n    <button type=\"button\" class=\"btn btn-danger col-2\" (click)=\"activeModal.dismiss('Cross click')\">\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n<div class=\"modal-header\">\r\n  <h4 class=\"modal-title\">Raumauswahl</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <label for=\"typeahead-prevent-manual-entry\" class=\"mb-0\">Raum suchen:</label>\r\n  <div class=\"input-group mb-1\">\r\n    <div class=\"input-group-prepend\">\r\n      <span class=\"input-group-text\"><fa-icon [icon]=\"faSearch\"></fa-icon></span>\r\n    </div>\r\n  <input id=\"typeahead-prevent-manual-entry\" #searchInput type=\"text\" class=\"form-control\"\r\n         (selectItem)=\"onSelectItem($event)\"\r\n         [(ngModel)]=\"model\"\r\n         [ngbTypeahead]=\"search\"\r\n         [inputFormatter]=\"formatter\"\r\n         [resultFormatter]=\"formatter\"\r\n         [editable]='false' />\r\n  </div>\r\n  <hr>\r\n\r\n  <p class=\"d-none\">select-search-raum works! {{ gebaeudeId }}</p>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.html":
  /*!*************************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.html ***!
    \*************************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsShowArtikelImageShowArtikelImageComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-body\">\r\n  <ngb-alert [type]=\"'danger'\" *ngIf=\"error\" (close)=\"error = ''\"></ngb-alert>\r\n\r\n  <div class=\"editor\" *ngIf=\"imageUrl\">\r\n    <div class=\"canvas\">\r\n      <angular-cropper\r\n          #angularCropper\r\n          *ngIf=\"imageUrl\"\r\n          [cropperOptions]=\"config\"\r\n          [imageUrl]=\"imageUrl\">\r\n      </angular-cropper>\r\n    </div>\r\n\r\n\r\n    <div class=\"toolbar-close\">\r\n      <button class=\"btn btn-sm btn-danger btn-icon-cirular\" (click)=\"close()\"><fa-icon [icon]=\"faClose\"></fa-icon></button>\r\n    </div>\r\n    <div class=\"toolbar btn-group btn-group-sm rounded\">\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"zoomIn()\"><fa-icon [icon]=\"faSearchPlus\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"zoomOut()\"><fa-icon [icon]=\"faSearchMinus\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"rotateLeft()\"><fa-icon [icon]=\"faRotateLeft\"></fa-icon></button>\r\n      <button class=\"btn btn-sm btn-light\" (click)=\"rotateRight()\"><fa-icon [icon]=\"faRotateRight\"></fa-icon></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.html":
  /*!*******************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.html ***!
    \*******************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesInventFormModalsShowRaumImageShowRaumImageComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"modal-body\">\n  {{ titel }}\n  <ngb-alert [type]=\"'danger'\" *ngIf=\"error\" (close)=\"error = ''\"></ngb-alert>\n\n  <div class=\"editor\" *ngIf=\"imageUrl\">\n    <div class=\"canvas\">\n      <angular-cropper\n        #angularCropper\n        *ngIf=\"imageUrl\"\n        [cropperOptions]=\"config\"\n        [imageUrl]=\"imageUrl\">\n      </angular-cropper>\n    </div>\n\n\n    <div class=\"toolbar-close\">\n      <button class=\"btn btn-sm btn-danger btn-icon-cirular\" (click)=\"close()\"><fa-icon [icon]=\"faClose\"></fa-icon></button>\n    </div>\n    <div class=\"toolbar btn-group btn-group-sm rounded\">\n      <button class=\"btn btn-sm btn-light\" (click)=\"zoomIn()\"><fa-icon [icon]=\"faSearchPlus\"></fa-icon></button>\n      <button class=\"btn btn-sm btn-light\" (click)=\"zoomOut()\"><fa-icon [icon]=\"faSearchMinus\"></fa-icon></button>\n      <button class=\"btn btn-sm btn-light\" (click)=\"rotateLeft()\"><fa-icon [icon]=\"faRotateLeft\"></fa-icon></button>\n      <button class=\"btn btn-sm btn-light\" (click)=\"rotateRight()\"><fa-icon [icon]=\"faRotateRight\"></fa-icon></button>\n    </div>\n  </div>\n</div>\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/select-inventory/select-inventory.component.html":
  /*!**************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/select-inventory/select-inventory.component.html ***!
    \**************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesSelectInventorySelectInventoryComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "\r\n<div *ngIf=\"false && lastInventoryDetails as inv\">\r\n  Möchten Sie die vorherige Inventur fortsetzen?<br>\r\n  <div *ngIf=\"1\" class=\"row\">\r\n    <div class=\"col-3\">Titel</div>\r\n    <div class=\"col-8\">{{ inv.Titel }}</div>\r\n  </div>\r\n  <div *ngIf=\"1\" class=\"row\">\r\n    <div class=\"col-3\">Mandant</div>\r\n    <div class=\"col-8\">{{ inv.Mandant }}</div>\r\n  </div>\r\n  <div *ngIf=\"1\" class=\"row\">\r\n    <div class=\"col-3\">Gebaeude</div>\r\n    <div class=\"col-8\">{{ inv.Gebaeude }}</div>\r\n  </div>\r\n  <div *ngIf=\"inv.Raum\" class=\"row\">\r\n    <div class=\"col-3\">Raum</div>\r\n    <div class=\"col-8\">{{ inv.Raum }}</div>\r\n  </div>\r\n  <div *ngIf=\"inv.Raumbezeichnung\" class=\"row\">\r\n    <div class=\"col-3\">R-Bezeichnung</div>\r\n    <div class=\"col-8\">{{ inv.Raumbezeichnung }}</div>\r\n  </div>\r\n  <div *ngIf=\"inv.Etage\" class=\"row\">\r\n    <div class=\"col-3\">Etage</div>\r\n    <div class=\"col-8\">{{ inv.Etage }}</div>\r\n  </div>\r\n  <button class=\"btn btn-primary\" (click)=\"gotoLastInventory()\">Fortsetzen</button>\r\n</div>\r\n\r\n<h5>Inventarisierung auswählen</h5>\r\n<form (ngSubmit)=\"onSubmit()\" #f=\"ngForm\" class=\"select-inventory\">\r\n\r\n  <div class=\"form-group\">\r\n    <div class=\"row no-gutters input-group mb-1\">\r\n      <div class=\"col-auto input-group-prepend\">\r\n        <span class=\"input-group-text border-secondary\">Kunde</span>\r\n      </div>\r\n      <div ngbDropdown #myDropKunde=\"ngbDropdown\" class=\"col myDropdown\">\r\n        <button (click)=\"$event.preventDefault(); $event.stopPropagation(); myDropKunde.isOpen() ? myDropKunde.close() : myDropKunde.open();\"\r\n                class=\"col btn btn-outline-secondary\" id=\"dropKunde\" ngbDropdownAnchor>\r\n          <ng-container *ngIf=\"client\"><span>{{ client.Mandant }}</span></ng-container>\r\n          <ng-container *ngIf=\"!client && statusLoadingUserInventories < 5\"><span>Kunden werden geladen</span></ng-container>\r\n          <ng-container *ngIf=\"!client && statusLoadingUserInventories >= 5 && clients && clients.length > 0\"><span>Bitte Kunde auswählen</span></ng-container>\r\n          <ng-container *ngIf=\"!client && statusLoadingUserInventories >= 5 && (!clients || clients.length === 0)\"><span>Keine Auswahl vorhanden</span></ng-container>\r\n        </button>\r\n\r\n        <div ngbDropdownMenu aria-labelledby=\"dropKunde\" class=\"border-secondary rounded-bottom\">\r\n          <button ngbDropdownItem *ngFor=\"let _client of clients; let i = index\"\r\n                  (click)=\"$event.preventDefault(); $event.stopPropagation(); clientChanged(i)\"\r\n                  [attr.data-index]=\"i\"\r\n                  [value]=\"i\">{{_client.Mandant}}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"form-group\">\r\n    <div class=\"row no-gutters input-group mb-1\">\r\n      <div class=\"col-auto input-group-prepend\">\r\n        <span class=\"input-group-text border-secondary\">Inventur</span>\r\n      </div>\r\n      <div ngbDropdown #myInventoryDrop=\"ngbDropdown\" class=\"col myDropdown\">\r\n        <button (click)=\"$event.preventDefault(); $event.stopPropagation(); myInventoryDrop.isOpen() ? myInventoryDrop.close() : myInventoryDrop.open();\"\r\n                class=\"col btn btn-outline-secondary\" id=\"dropInventory\" ngbDropdownAnchor>\r\n          <ng-container *ngIf=\"inventory && lastInventory && inventory.jobid === lastInventory.jobid\"><span>{{ inventory.Titel }} (Zuletzt in Arbeit)</span></ng-container>\r\n          <ng-container *ngIf=\"inventory && (!lastInventory || inventory.jobid !== lastInventory.jobid)\"><span>{{ inventory.Titel }}</span></ng-container>\r\n          <ng-container *ngIf=\"!inventory && statusLoadingUserInventories < 5\"><span>Inventarisierungen werden geladen</span></ng-container>\r\n          <ng-container *ngIf=\"!inventory && statusLoadingUserInventories >= 5 && inventoriesSelectable && inventoriesSelectable.length > 0\"><span>Bitte Inventur auswählen</span></ng-container>\r\n          <ng-container *ngIf=\"!inventory && statusLoadingUserInventories >= 5 && (!inventoriesSelectable || inventoriesSelectable.length === 0)\"><span>Keine Auswahl vorhanden</span></ng-container>\r\n        </button>\r\n\r\n        <div ngbDropdownMenu aria-labelledby=\"dropInventory\" class=\"border-secondary rounded-bottom\">\r\n          <button ngbDropdownItem *ngFor=\"let _inventory of inventoriesSelectable; let i = index\"\r\n                  (click)=\"$event.preventDefault(); $event.stopPropagation(); inventorySelectionChanged(_inventory.jobid)\"\r\n                  [attr.data-index]=\"_inventory.jobid\"\r\n                  [value]=\"_inventory.jobid\">{{_inventory.Titel}}\r\n            <ng-container *ngIf=\"lastInventory && _inventory.jobid === lastInventory.jobid\">\r\n            (Zuletzt in Arbeit)\r\n          </ng-container></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"true\" class=\"form-group\">\r\n    <div class=\"row no-gutters input-group mb-1\">\r\n      <div class=\"col-auto input-group-prepend\">\r\n        <span class=\"input-group-text border-secondary\">Standort</span>\r\n      </div>\r\n      <div ngbDropdown #myGebaeudeDrop2=\"ngbDropdown\" class=\"col myDropdown\">\r\n        <button (click)=\"$event.preventDefault(); $event.stopPropagation(); myGebaeudeDrop2.isOpen() ? myGebaeudeDrop2.close() : myGebaeudeDrop2.open();\"\r\n                [disabled]=\"!inventory\"\r\n                class=\"col btn btn-outline-secondary\" id=\"dropGebaeude2\" ngbDropdownAnchor>\r\n          <ng-container *ngIf=\"building\"><span>{{ building.Gebaeude }}</span> <span *ngIf=\"lastBuilding && building.gid === lastBuilding.gid\">(Zuletzt in Arbeit)</span></ng-container>\r\n          <ng-container *ngIf=\"!building && statusLoadingUserInventories < 5\"><span>Standorte werden geladen</span></ng-container>\r\n          <ng-container *ngIf=\"!building && statusLoadingUserInventories >= 5 && buildings && buildings.length > 0\"><span>Bitte Standort auswählen</span></ng-container>\r\n          <ng-container *ngIf=\"!building && statusLoadingUserInventories >= 5 && (!buildings || buildings.length === 0)\"><span>Keine Auswahl vorhanden</span></ng-container>\r\n        </button>\r\n\r\n        <div ngbDropdownMenu aria-labelledby=\"dropGebaeude2\" class=\"border-secondary rounded-bottom\" style=\"max-height:50vh;overflow-y:scroll\">\r\n          <button ngbDropdownItem *ngFor=\"let _bldg of buildings; let i = index\"\r\n                  (click)=\"$event.preventDefault(); $event.stopPropagation(); buildingChanged(i)\"\r\n                  [attr.data-index]=\"i\"\r\n                  [value]=\"i\">{{_bldg.Gebaeude}}\r\n            <ng-container *ngIf=\"lastBuilding && _bldg.gid === lastBuilding.gid\">\r\n              (Zuletzt in Arbeit)\r\n            </ng-container></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"form-group\">\r\n    <app-progressbar [title]=\"'Anzahl Elemente'\" [value]=\"doneElements\" [total]=\"totalElements\"></app-progressbar>\r\n  </div>\r\n\r\n  <div class=\"form-group\">\r\n    <div class=\"row no-gutters\">\r\n      <div class=\"col col-sm-6 offset-sm-6\">\r\n        <button [disabled]=\"!building || loading\" class=\"btn btn-primary w-100\">Starten</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"mt-2\">\r\n    <ng-container [ngSwitch]=\"statusLoadingUserInventories\">\r\n      <span *ngSwitchCase=\"0\"></span>\r\n      <ngb-alert *ngSwitchCase=\"1\" [type]=\"'danger'\" [dismissible]=\"false\">[{{statusLoadingUserInventories}}] Warte auf Internet-Verbindung</ngb-alert>\r\n      <ngb-alert *ngSwitchCase=\"2\" [type]=\"'danger'\" [dismissible]=\"false\">[{{statusLoadingUserInventories}}] Warte auf Server-Verbindung</ngb-alert>\r\n      <ngb-alert *ngSwitchCase=\"3\" [type]=\"'warning'\" [dismissible]=\"false\">[{{statusLoadingUserInventories}}] Verbindung wird aufgebaut</ngb-alert>\r\n      <ngb-alert *ngSwitchCase=\"4\" [type]=\"'info'\" [dismissible]=\"false\">[{{statusLoadingUserInventories}}] Daten werden abgerufen</ngb-alert>\r\n      <ngb-alert *ngSwitchCase=\"5\" [type]=\"'success'\" [dismissible]=\"false\">[{{statusLoadingUserInventories}}] Auswahldaten wurden geladen</ngb-alert>\r\n      <ngb-alert *ngSwitchCase=\"6\" [type]=\"'danger'\" [dismissible]=\"false\">[{{statusLoadingUserInventories}}] Leider ist etwas schiefgelaufen</ngb-alert>\r\n    </ng-container>\r\n    <ngb-alert [type]=\"'info'\" *ngIf=\"status\" class=\"alert-info\">{{status}}</ngb-alert>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"form-group\" *ngIf=\"tablesLoadingStarted\">\r\n    <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"tablesLoadingDetailsIsExpanded=!tablesLoadingDetailsIsExpanded\"\r\n            [attr.aria-expanded]=\"!tablesLoadingDetailsIsExpanded\"\r\n            aria-controls=\"collapseExample\">\r\n      Details {{ tablesLoadingDetailsIsExpanded ? \"ausblenden\" : \"einblenden\"}}\r\n    </button>\r\n    <div class=\"card\" *ngIf=\"tablesLoadingDetailsIsExpanded\">\r\n      <div class=\"card-body\">\r\n        <div *ngFor=\"let item of tablesLoadingStatus; let t = index\">\r\n          {{ item.table }} {{ item.status }}\r\n          <p><ngb-progressbar type=\"success\"\r\n                            [value]=\"item.progress\"\r\n                            [striped]=\"!item.finished\"\r\n                            [animated]=\"!item.finished\">{{item.current}} von {{item.total}}</ngb-progressbar></p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"lastMetaMsg !== '' && !tablesLoadingStarted\">\r\n    <ngb-alert [type]=\"'success'\" (close)=\"lastMetaMsg = ''\">{{ lastMetaMsg }}</ngb-alert>\r\n  </div>\r\n\r\n  <div *ngIf=\"lastMetaErr !== '' && !tablesLoadingStarted\">\r\n    <ngb-alert [type]=\"'danger'\" (close)=\"lastMetaErr = ''\">{{ lastMetaErr }}</ngb-alert>\r\n  </div>\r\n\r\n  <div *ngIf=\"showListmetaMsg\">\r\n    <p *ngFor=\"let msg of listMetaMsg\">\r\n      <ngb-alert [type]=\"msg.type\" (close)=\"closeMsg(msg)\">{{ msg.message }}</ngb-alert>\r\n    </p>\r\n  </div>\r\n\r\n</form>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/settings/settings.component.html":
  /*!**********************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pages/settings/settings.component.html ***!
    \**********************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppPagesSettingsSettingsComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<div class=\"blobs-overlay\" *ngIf=\"blobAlert && useOverlay === 1\">\r\n  <div class=\"blobs-container\">\r\n    <ng-container [ngSwitch]=\"blobAlert\">\r\n      <div class=\"blob red animate\" *ngSwitchCase=\"'danger'\"></div>\r\n      <div class=\"blob green animate\" *ngSwitchCase=\"'success'\"></div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n<div class=\"blobs-overlay\" *ngIf=\"blobAlert && useOverlay === 2\">\r\n  <div class=\"blobs-container\">\r\n    <ng-container [ngSwitch]=\"blobAlert\">\r\n      <div class=\"blob red animate\" *ngSwitchCase=\"'danger'\"></div>\r\n      <div class=\"blob green animate\" *ngSwitchCase=\"'success'\"></div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"card mt-1\">\r\n  <div class=\"card-body\">\r\n    <h5 class=\"card-title\">Barcode-Index neu aufbauen</h5>\r\n    <p class=\"card-text\">\r\n      Der Barcode-Index dient der schnelleren Auswertung von Barcode-Eingaben.\r\n      Sollten Barcodes nicht gefunden werden, obwohl sie vorhanden sein sollten,\r\n      nutzen sie diese Funktion, um den Index basierend auf Objektkatalog-, Inventar- und Raumdaten\r\n      neu aufzubauen\r\n    </p>\r\n    <button class=\"btn btn-primary\" [disabled]=\"buildBcLookup\" (click)=\"reIndexBarcodeLookup()\">reIndexBarcodeLookup</button>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"card mt-1\">\r\n  <div class=\"card-body\">\r\n    <h5 class=\"card-title\">Sound und visuelles Feedback testen</h5>\r\n    <div class=\"card-text\">\r\n      Barcode-Scans werden mit akkustischen und visuellen Feedback quittiert.\r\n      <h6>Erfolgreiche Scans:</h6>\r\n      Grüne Welle und einer Piep-Ton\r\n\r\n      <h6>Fehlerhafte Scan:</h6>\r\n      Rote Welle und länger anhaltender Piep-Ton\r\n    </div>\r\n    <button class=\"btn btn-success\" (click)=\"playSuccess()\">Sound Success</button>\r\n    <button class=\"btn btn-danger\" (click)=\"playError()\">Sound Error</button>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"card mt-1\">\r\n  <div class=\"card-body\">\r\n    <h5 class=\"card-title\">Manuelle Barcode-Simulation</h5>\r\n    <div class=\"card-text\">\r\n      Die Barcode-Eingabe kann zu Testzwecken manuelle simuliert werden.\r\n    </div>\r\n\r\n    <div class=\"btn-group btn-group-toggle\" ngbRadioGroup (change)=\"changeManualBCInput($event)\" name=\"radioBasic\" [(ngModel)]=\"enableManualBCInput\">\r\n\r\n      <label ngbButtonLabel class=\"btn-primary\">\r\n        <input ngbButton type=\"radio\" [value]=\"true\"> On\r\n      </label>\r\n      <label ngbButtonLabel class=\"btn-primary\">\r\n        <input ngbButton type=\"radio\" [value]=\"false\"> Off\r\n      </label>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"card\">\r\n  <div class=\"card-body\">\r\n    <h5 class=\"card-title\">Browser(Handy)-Datenbank leeren</h5>\r\n    <p class=\"card-text\">\r\n      Mit dieser Funktion werden 'alle' Datenbank-Inhalte des Browsers/Handy gelöscht.<br>\r\n      Unsynchronisierte Änderungen gehen hierbei verloren!<br>\r\n      Benutzen Sie diese Funktion nur wenn alle Daten bereits synchronisiert sind!<br>\r\n      Datenbank: {{ dbName }} Version {{ dbVersion }}\r\n    </p>\r\n    <button class=\"btn btn-danger\" [disabled]=\"buildBcLookup\" (click)=\"dbClear()\">Datenbank leeren</button>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"card\">\r\n  <div class=\"card-body\">\r\n    <h5 class=\"card-title\">Browser(Handy)-Datenbank löschen</h5>\r\n    <p class=\"card-text\">\r\n      Mit dieser Funktion wird die Browser/Handy-Datenbank gelöscht.<br>\r\n      Unsynchronisierte Änderungen gehen hierbei verloren!<br>\r\n      Die Datenbank-Struktur wird nach einem Seiten-Reload neu aufgebaut.<br>\r\n      Benutzen Sie diese Funktion nur wenn alle Daten bereits synchronisiert sind\r\n      oder schwerwiegende Fehler aufgetreten sind.<br>\r\n      Datenbank: {{ dbName }} Version {{ dbVersion }}\r\n    </p>\r\n    <button class=\"btn btn-danger\" [disabled]=\"buildBcLookup\" (click)=\"dbDelete()\">Datenbank löschen</button>\r\n  </div>\r\n</div>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/ngbheader/ngbheader.component.html":
  /*!************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/ngbheader/ngbheader.component.html ***!
    \************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppSharedComponentsNgbheaderNgbheaderComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<nav class=\"navbar navbar-expand-md navbar-light xxx-bg-light app-navbar\">\r\n  <span class=\"navbar-brand\">\r\n    <img class=\"logo\" src=\"/assets/mertens-logo-221x45.png\">\r\n  </span>\r\n  <button class=\"navbar-toggler\" type=\"button\"\r\n          aria-controls=\"navbarContent\" [attr.aria-expanded]=\"!collapsed\"\r\n          aria-label=\"Toggle navigation\" (click)=\"collapsed = !collapsed\">\r\n    <span class=\"navbar-toggler-icon\"></span>\r\n  </button>\r\n\r\n  <div class=\"navbar-collapse\" [class.collapse]=\"collapsed\" id=\"navbarContent\">\r\n    <ul *ngIf=\"!isLoginPage\" class=\"navbar-nav ml-auto\">\r\n\r\n      <li *ngIf=\"false\" routerLinkActive=\"active\" class=\"nav-item\">\r\n        <a class=\"nav-link\" routerLink=\"/auth\">Login</a>\r\n      </li>\r\n\r\n      <li routerLinkActive=\"active\" class=\"nav-item\">\r\n        <a class=\"nav-link\" routerLink=\"/select-inventory\">Select</a>\r\n      </li>\r\n\r\n      <li routerLinkActive=\"active\" class=\"nav-item\">\r\n        <a class=\"nav-link\" (click)=\"continueLastInventory()\">Inventarisieren</a>\r\n      </li>\r\n\r\n      <li routerLinkActive=\"active\" class=\"nav-item\">\r\n        <a class=\"nav-link\" routerLink=\"/sync\">Sync</a>\r\n      </li>\r\n\r\n      <li routerLinkActive=\"active\" class=\"nav-item\">\r\n        <a class=\"nav-link\" routerLink=\"/settings\"><fa-icon [icon]=\"faCog\"></fa-icon></a>\r\n      </li>\r\n\r\n\r\n      <li routerLinkActive=\"active\" class=\"nav-item\">\r\n        <a class=\"nav-link\" routerLink=\"/auth/logout\">Logout</a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</nav>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/progressbar/progressbar.component.html":
  /*!****************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/progressbar/progressbar.component.html ***!
    \****************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppSharedComponentsProgressbarProgressbarComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<label class=\"mb-0\">\r\n  <span class=\"d-none d-md-inline\">{{title}}: </span>\r\n  <span class=\"d-inline d-md-none\">{{short}}: </span>\r\n  {{totalText}}\r\n</label>\r\n<div>\r\n\r\n  <div class=\"progress progress-elemente\" (click)=\"onClickRest($event)\"  [ngClass]=\"{'bg-danger' : total > 0}\">\r\n    <div class=\"progress-bar bg-success\" (click)=\"onClickBarDone($event)\"  [ngClass]=\"type\" role=\"progressbar\" [style.width]=\"progressAmount + '%'\">\r\n    </div>\r\n    <span class=\"progress-text\">{{donePercentText}}</span>\r\n  </div>\r\n\r\n  <div class=\"row\">\r\n    <div class=\"col-6 text-success\">\r\n\r\n      <button type=\"button\" (click)=\"onClickDone($event)\" class=\"btn btn-sm btn-light btn-sx text-success\">\r\n        <span class=\"d-none d-md-inline\">\r\n        Erledigt </span>{{doneAmountText}}\r\n      </button>\r\n\r\n    </div>\r\n    <div class=\"col-6 text-danger text-right\">\r\n\r\n      <button type=\"button\" (click)=\"onClickRest($event)\" class=\"btn btn-sm btn-light btn-sx text-danger\">\r\n        <span class=\"d-none d-md-inline\">\r\n        Rest </span>{{restAmountText}}\r\n      </button>\r\n\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/scannerdetection/scannerdetection.component.html":
  /*!**************************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/scannerdetection/scannerdetection.component.html ***!
    \**************************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppSharedComponentsScannerdetectionScannerdetectionComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "<ng-content></ng-content>\r\n";
    /***/
  },

  /***/
  "./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/status-check/status-check.component.html":
  /*!******************************************************************************************************************!*\
    !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/status-check/status-check.component.html ***!
    \******************************************************************************************************************/

  /*! exports provided: default */

  /***/
  function node_modulesRawLoaderDistCjsJsSrcAppSharedComponentsStatusCheckStatusCheckComponentHtml(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "\r\n  <span class=\"badge mr-2\" [ngClass]=\"{\r\n        'badge-success':currentState?.hasNetworkConnection,\r\n        'badge-danger':!currentState?.hasNetworkConnection\r\n        }\">\r\n      {{ currentState?.hasNetworkConnection ? 'Online' : 'Offline' }}\r\n  </span>\r\n  <span class=\"badge mr-2\" [ngClass]=\"{\r\n        'badge-success': currentState?.hasServerAccess,\r\n        'badge-danger': !currentState?.hasServerAccess\r\n        }\">\r\n      Backend: {{ currentState?.hasServerAccess ? 'ON' : 'OFF' }}\r\n  </span>\r\n  <span class=\"badge mr-2\" [ngClass]=\"{\r\n        'badge-success': currentState?.hasValidSession,\r\n        'badge-danger': !currentState?.hasValidSession\r\n        }\">\r\n      {{ currentState?.hasValidSession ? 'Eingeloggt' : 'Login abgelaufen' }}\r\n  </span>\r\n  <ng-container *ngIf=\"numUnsynced > -1\">\r\n    <span class=\"badge mr-2\" [ngClass]=\"{\r\n        'badge-success':numUnsynced===0,\r\n        'badge-danger':numUnsynced!==0\r\n        }\">\r\n      Unsynced:  {{ numUnsynced }}\r\n    </span>\r\n  </ng-container>\r\n    <span class=\"badge badge-info\">\r\n      v{{currentApplicationVersion}}\r\n    </span>\r\n";
    /***/
  },

  /***/
  "./node_modules/tslib/tslib.es6.js":
  /*!*****************************************!*\
    !*** ./node_modules/tslib/tslib.es6.js ***!
    \*****************************************/

  /*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __createBinding, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault, __classPrivateFieldGet, __classPrivateFieldSet */

  /***/
  function node_modulesTslibTslibEs6Js(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__extends", function () {
      return __extends;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__assign", function () {
      return _assign;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__rest", function () {
      return __rest;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__decorate", function () {
      return __decorate;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__param", function () {
      return __param;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__metadata", function () {
      return __metadata;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__awaiter", function () {
      return __awaiter;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__generator", function () {
      return __generator;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__createBinding", function () {
      return __createBinding;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__exportStar", function () {
      return __exportStar;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__values", function () {
      return __values;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__read", function () {
      return __read;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__spread", function () {
      return __spread;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__spreadArrays", function () {
      return __spreadArrays;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__await", function () {
      return __await;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__asyncGenerator", function () {
      return __asyncGenerator;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__asyncDelegator", function () {
      return __asyncDelegator;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__asyncValues", function () {
      return __asyncValues;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__makeTemplateObject", function () {
      return __makeTemplateObject;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__importStar", function () {
      return __importStar;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__importDefault", function () {
      return __importDefault;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__classPrivateFieldGet", function () {
      return __classPrivateFieldGet;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "__classPrivateFieldSet", function () {
      return __classPrivateFieldSet;
    });
    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation.
    
    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.
    
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */

    /* global Reflect, Promise */


    var _extendStatics = function extendStatics(d, b) {
      _extendStatics = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (d, b) {
        d.__proto__ = b;
      } || function (d, b) {
        for (var p in b) {
          if (b.hasOwnProperty(p)) d[p] = b[p];
        }
      };

      return _extendStatics(d, b);
    };

    function __extends(d, b) {
      _extendStatics(d, b);

      function __() {
        this.constructor = d;
      }

      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    var _assign = function __assign() {
      _assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];

          for (var p in s) {
            if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
          }
        }

        return t;
      };

      return _assign.apply(this, arguments);
    };

    function __rest(s, e) {
      var t = {};

      for (var p in s) {
        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];
      }

      if (s != null && typeof Object.getOwnPropertySymbols === "function") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
        if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
      }
      return t;
    }

    function __decorate(decorators, target, key, desc) {
      var c = arguments.length,
          r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
          d;
      if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {
        if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
      }
      return c > 3 && r && Object.defineProperty(target, key, r), r;
    }

    function __param(paramIndex, decorator) {
      return function (target, key) {
        decorator(target, key, paramIndex);
      };
    }

    function __metadata(metadataKey, metadataValue) {
      if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
    }

    function __awaiter(thisArg, _arguments, P, generator) {
      function adopt(value) {
        return value instanceof P ? value : new P(function (resolve) {
          resolve(value);
        });
      }

      return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) {
          try {
            step(generator.next(value));
          } catch (e) {
            reject(e);
          }
        }

        function rejected(value) {
          try {
            step(generator["throw"](value));
          } catch (e) {
            reject(e);
          }
        }

        function step(result) {
          result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
        }

        step((generator = generator.apply(thisArg, _arguments || [])).next());
      });
    }

    function __generator(thisArg, body) {
      var _ = {
        label: 0,
        sent: function sent() {
          if (t[0] & 1) throw t[1];
          return t[1];
        },
        trys: [],
        ops: []
      },
          f,
          y,
          t,
          g;
      return g = {
        next: verb(0),
        "throw": verb(1),
        "return": verb(2)
      }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
        return this;
      }), g;

      function verb(n) {
        return function (v) {
          return step([n, v]);
        };
      }

      function step(op) {
        if (f) throw new TypeError("Generator is already executing.");

        while (_) {
          try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];

            switch (op[0]) {
              case 0:
              case 1:
                t = op;
                break;

              case 4:
                _.label++;
                return {
                  value: op[1],
                  done: false
                };

              case 5:
                _.label++;
                y = op[1];
                op = [0];
                continue;

              case 7:
                op = _.ops.pop();

                _.trys.pop();

                continue;

              default:
                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
                  _ = 0;
                  continue;
                }

                if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
                  _.label = op[1];
                  break;
                }

                if (op[0] === 6 && _.label < t[1]) {
                  _.label = t[1];
                  t = op;
                  break;
                }

                if (t && _.label < t[2]) {
                  _.label = t[2];

                  _.ops.push(op);

                  break;
                }

                if (t[2]) _.ops.pop();

                _.trys.pop();

                continue;
            }

            op = body.call(thisArg, _);
          } catch (e) {
            op = [6, e];
            y = 0;
          } finally {
            f = t = 0;
          }
        }

        if (op[0] & 5) throw op[1];
        return {
          value: op[0] ? op[1] : void 0,
          done: true
        };
      }
    }

    function __createBinding(o, m, k, k2) {
      if (k2 === undefined) k2 = k;
      o[k2] = m[k];
    }

    function __exportStar(m, exports) {
      for (var p in m) {
        if (p !== "default" && !exports.hasOwnProperty(p)) exports[p] = m[p];
      }
    }

    function __values(o) {
      var s = typeof Symbol === "function" && Symbol.iterator,
          m = s && o[s],
          i = 0;
      if (m) return m.call(o);
      if (o && typeof o.length === "number") return {
        next: function next() {
          if (o && i >= o.length) o = void 0;
          return {
            value: o && o[i++],
            done: !o
          };
        }
      };
      throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
    }

    function __read(o, n) {
      var m = typeof Symbol === "function" && o[Symbol.iterator];
      if (!m) return o;
      var i = m.call(o),
          r,
          ar = [],
          e;

      try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {
          ar.push(r.value);
        }
      } catch (error) {
        e = {
          error: error
        };
      } finally {
        try {
          if (r && !r.done && (m = i["return"])) m.call(i);
        } finally {
          if (e) throw e.error;
        }
      }

      return ar;
    }

    function __spread() {
      for (var ar = [], i = 0; i < arguments.length; i++) {
        ar = ar.concat(__read(arguments[i]));
      }

      return ar;
    }

    function __spreadArrays() {
      for (var s = 0, i = 0, il = arguments.length; i < il; i++) {
        s += arguments[i].length;
      }

      for (var r = Array(s), k = 0, i = 0; i < il; i++) {
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {
          r[k] = a[j];
        }
      }

      return r;
    }

    ;

    function __await(v) {
      return this instanceof __await ? (this.v = v, this) : new __await(v);
    }

    function __asyncGenerator(thisArg, _arguments, generator) {
      if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
      var g = generator.apply(thisArg, _arguments || []),
          i,
          q = [];
      return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () {
        return this;
      }, i;

      function verb(n) {
        if (g[n]) i[n] = function (v) {
          return new Promise(function (a, b) {
            q.push([n, v, a, b]) > 1 || resume(n, v);
          });
        };
      }

      function resume(n, v) {
        try {
          step(g[n](v));
        } catch (e) {
          settle(q[0][3], e);
        }
      }

      function step(r) {
        r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);
      }

      function fulfill(value) {
        resume("next", value);
      }

      function reject(value) {
        resume("throw", value);
      }

      function settle(f, v) {
        if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);
      }
    }

    function __asyncDelegator(o) {
      var i, p;
      return i = {}, verb("next"), verb("throw", function (e) {
        throw e;
      }), verb("return"), i[Symbol.iterator] = function () {
        return this;
      }, i;

      function verb(n, f) {
        i[n] = o[n] ? function (v) {
          return (p = !p) ? {
            value: __await(o[n](v)),
            done: n === "return"
          } : f ? f(v) : v;
        } : f;
      }
    }

    function __asyncValues(o) {
      if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
      var m = o[Symbol.asyncIterator],
          i;
      return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () {
        return this;
      }, i);

      function verb(n) {
        i[n] = o[n] && function (v) {
          return new Promise(function (resolve, reject) {
            v = o[n](v), settle(resolve, reject, v.done, v.value);
          });
        };
      }

      function settle(resolve, reject, d, v) {
        Promise.resolve(v).then(function (v) {
          resolve({
            value: v,
            done: d
          });
        }, reject);
      }
    }

    function __makeTemplateObject(cooked, raw) {
      if (Object.defineProperty) {
        Object.defineProperty(cooked, "raw", {
          value: raw
        });
      } else {
        cooked.raw = raw;
      }

      return cooked;
    }

    ;

    function __importStar(mod) {
      if (mod && mod.__esModule) return mod;
      var result = {};
      if (mod != null) for (var k in mod) {
        if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
      }
      result["default"] = mod;
      return result;
    }

    function __importDefault(mod) {
      return mod && mod.__esModule ? mod : {
        "default": mod
      };
    }

    function __classPrivateFieldGet(receiver, privateMap) {
      if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to get private field on non-instance");
      }

      return privateMap.get(receiver);
    }

    function __classPrivateFieldSet(receiver, privateMap, value) {
      if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to set private field on non-instance");
      }

      privateMap.set(receiver, value);
      return value;
    }
    /***/

  },

  /***/
  "./package.json":
  /*!**********************!*\
    !*** ./package.json ***!
    \**********************/

  /*! exports provided: name, version, scripts, private, dependencies, devDependencies, default */

  /***/
  function packageJson(module) {
    module.exports = JSON.parse("{\"name\":\"frontend\",\"version\":\"2.0.1\",\"scripts\":{\"ng\":\"ng\",\"start\":\"ng serve --aot --host 0.0.0.0 --disable-host-check\",\"startssl\":\"ng serve --aot --port 4235 --host inventory.local --disable-host-check --ssl true --sslCert=./ssl/localhost.crt --sslKey=./ssl/localhost.key --open\",\"startssl_test\":\"ng serve --host inventory.local --publicHost inventory.local:4200/sockjs-node --disable-host-check --ssl true --sslCert=./ssl/localhost.crt --sslKey=./ssl/localhost.key\",\"prebuild\":\"yarn version --patch\",\"build\":\"ng build\",\"build-prod\":\"ng build --output-path=dist/prod --configuration=production\",\"build-rc\":\"ng build --output-path=dist/rc --configuration=rc\",\"build-dev\":\"ng build --output-path=dist/dev --configuration=dev\",\"firebase-deploy-prod\":\"firebase deploy --only hosting:frontend\",\"firebase-deploy-rc\":\"firebase deploy --only hosting:rc\",\"firebase-deploy-dev\":\"firebase deploy --only hosting:dev\",\"firebase-deploy-all\":\"firebase deploy\",\"startpwaOld\":\"http-server -p 4225 -c-1 dist/frontend -S -C ssh_pem/cert.pem -K ssh_pem/key.pem -o\",\"startpwa\":\"http-server -p 4225 -c-1 dist/frontend -S -C ssl/public_crt.pem -K ssl/private_key.pem -o\",\"startpwa-rc\":\"http-server -p 4245 -c-1 dist/rc -S -C ssl/public_crt.pem -K ssl/private_key.pem -o\",\"startpwa-dev\":\"http-server -p 4255 -c-1 dist/dev -S -C ssl/public_crt.pem -K ssl/private_key.pem -o\",\"startpwa-prod\":\"http-server -p 4265 -c-1 dist/prod -S -C ssl/public_crt.pem -K ssl/private_key.pem -o\",\"buildpwa\":\"yarn run prebuild && ng build --prod --project frontend\",\"rebuild\":\"ng build --prod --project frontend\",\"test\":\"ng test\",\"lint\":\"ng lint\",\"e2e\":\"ng e2e\",\"serve-dist\":\"ts-node node-dist-server.ts\",\"serve-dist-js\":\"node node-dist-server.js\"},\"private\":true,\"dependencies\":{\"@angular/animations\":\"~8.2.14\",\"@angular/common\":\"~8.2.14\",\"@angular/compiler\":\"~8.2.14\",\"@angular/core\":\"~8.2.14\",\"@angular/fire\":\"5.4.2\",\"@angular/forms\":\"~8.2.14\",\"@angular/platform-browser\":\"~8.2.14\",\"@angular/platform-browser-dynamic\":\"~8.2.14\",\"@angular/pwa\":\"^0.1000.5\",\"@angular/router\":\"~8.2.14\",\"@angular/service-worker\":\"~8.2.14\",\"@auth0/angular-jwt\":\"^5.0.2\",\"@fortawesome/angular-fontawesome\":\"0.4.0\",\"@fortawesome/fontawesome-svg-core\":\"^1.2.8\",\"@fortawesome/free-brands-svg-icons\":\"^5.5.0\",\"@fortawesome/free-regular-svg-icons\":\"^5.5.0\",\"@fortawesome/free-solid-svg-icons\":\"^5.5.0\",\"@ng-bootstrap/ng-bootstrap\":\"^5.1.5\",\"@types/crypto-js\":\"3.1.47\",\"@zxing/ngx-scanner\":\"^3.0.0\",\"angular-cropperjs\":\"^1.0.2\",\"bootstrap\":\"^4.4.1\",\"browser-image-compression\":\"^1.0.11\",\"compress\":\"^0.99.0\",\"compressorjs\":\"^1.0.6\",\"cropperjs\":\"^1.5.6\",\"crypto-js\":\"3.3.0\",\"dexie\":\"2.0.4\",\"dexie-observable\":\"1.0.0-beta.7\",\"dexie-relationships\":\"^1.2.11\",\"dexie-syncable\":\"1.0.0-beta.6\",\"es6-shim\":\"^0.35.5\",\"express\":\"^4.17.1\",\"express-cors\":\"0.0.3\",\"faker\":\"^4.1.0\",\"firebase\":\">= 5.5.7 <8\",\"global\":\"^4.4.0\",\"guid-typescript\":\"^1.0.9\",\"json-server\":\"^0.15.1\",\"ngx-toastr\":\"10.0.4\",\"ngx-webcam\":\"0.2.6\",\"rxjs\":\"~6.4.0\",\"ts-md5\":\"^1.2.7\",\"tslib\":\"^1.10.0\",\"web-push\":\"^3.4.4\",\"zone.js\":\"~0.9.1\"},\"devDependencies\":{\"@angular-devkit/architect\":\"<0.900 || ^0.900.0-0 || ^9.0.0-0\",\"@angular-devkit/build-angular\":\"^0.803.23\",\"@angular/cli\":\"8.3.0\",\"@angular/compiler-cli\":\"~8.2.14\",\"@angular/language-service\":\"~8.2.14\",\"@types/browser-image-compression\":\"^1.0.1\",\"@types/jasmine\":\"~3.3.8\",\"@types/jasminewd2\":\"~2.0.3\",\"@types/node\":\"^14.14.22\",\"codelyzer\":\"^5.0.0\",\"express-serve-static-core\":\"^0.1.1\",\"firebase-tools\":\"^7.12.0\",\"fuzzy\":\"^0.1.3\",\"inquirer\":\"^6.2.2\",\"inquirer-autocomplete-prompt\":\"^1.0.1\",\"jasmine-core\":\"~3.4.0\",\"jasmine-spec-reporter\":\"~4.2.1\",\"karma\":\"~4.1.0\",\"karma-chrome-launcher\":\"~2.2.0\",\"karma-coverage-istanbul-reporter\":\"~2.0.1\",\"karma-jasmine\":\"~2.0.1\",\"karma-jasmine-html-reporter\":\"^1.4.0\",\"moment\":\"^2.24.0\",\"protractor\":\"~5.4.0\",\"reflect-metadata\":\"^0.1.13\",\"spa-http-server\":\"^0.9.0\",\"ts-node\":\"^8.8.2\",\"tslint\":\"~5.15.0\",\"typescript\":\"~3.5.3\"}}");
    /***/
  },

  /***/
  "./src/app/app.component.scss":
  /*!************************************!*\
    !*** ./src/app/app.component.scss ***!
    \************************************/

  /*! exports provided: default */

  /***/
  function srcAppAppComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "h1 {\n  color: #fff;\n}\n\ndiv.c1 div.c1-1 {\n  color: green;\n}\n\ndiv.c1-1 {\n  color: red;\n}\n\n.body-bg-login {\n  background: linear-gradient(to right bottom, #1cc7d0, #013ca6, #013ca6, #1cc7d0);\n}\n\n.app-content .app-content-inner-box {\n  min-height: calc(100% - 72px);\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxhcHAuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNJLFdBQUE7QUNBSjs7QURJSTtFQUNJLFlBQUE7QUNEUjs7QURLQTtFQUNJLFVBQUE7QUNGSjs7QURLQTtFQUNFLGdGQUFBO0FDRkY7O0FES0E7RUFDRSw2QkFBQTtBQ0ZGIiwiZmlsZSI6InNyYy9hcHAvYXBwLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmgxIHtcclxuICAgIGNvbG9yOiAjZmZmO1xyXG59XHJcblxyXG5kaXYuYzEge1xyXG4gICAgZGl2LmMxLTEge1xyXG4gICAgICAgIGNvbG9yOiBncmVlbjtcclxuICAgIH1cclxufVxyXG5cclxuZGl2LmMxLTEge1xyXG4gICAgY29sb3I6IHJlZDtcclxufVxyXG5cclxuLmJvZHktYmctbG9naW4ge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCBib3R0b20sICMxY2M3ZDAgLCMwMTNjYTYsICMwMTNjYTYsIzFjYzdkMCk7XHJcbn1cclxuXHJcbi5hcHAtY29udGVudCAuYXBwLWNvbnRlbnQtaW5uZXItYm94IHtcclxuICBtaW4taGVpZ2h0OiBjYWxjKDEwMCUgLSA3MnB4KTtcclxufVxyXG4iLCJoMSB7XG4gIGNvbG9yOiAjZmZmO1xufVxuXG5kaXYuYzEgZGl2LmMxLTEge1xuICBjb2xvcjogZ3JlZW47XG59XG5cbmRpdi5jMS0xIHtcbiAgY29sb3I6IHJlZDtcbn1cblxuLmJvZHktYmctbG9naW4ge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQgYm90dG9tLCAjMWNjN2QwLCAjMDEzY2E2LCAjMDEzY2E2LCAjMWNjN2QwKTtcbn1cblxuLmFwcC1jb250ZW50IC5hcHAtY29udGVudC1pbm5lci1ib3gge1xuICBtaW4taGVpZ2h0OiBjYWxjKDEwMCUgLSA3MnB4KTtcbn0iXX0= */";
    /***/
  },

  /***/
  "./src/app/app.component.ts":
  /*!**********************************!*\
    !*** ./src/app/app.component.ts ***!
    \**********************************/

  /*! exports provided: AppComponent */

  /***/
  function srcAppAppComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "AppComponent", function () {
      return AppComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _shared_services_connection_service_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ./shared/services/connection-service.service */
    "./src/app/shared/services/connection-service.service.ts");
    /* harmony import */


    var _angular_service_worker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @angular/service-worker */
    "./node_modules/@angular/service-worker/fesm2015/service-worker.js");
    /* harmony import */


    var ngx_toastr__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ngx-toastr */
    "./node_modules/ngx-toastr/fesm2015/ngx-toastr.js");
    /* harmony import */


    var _environments_environment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../environments/environment */
    "./src/environments/environment.ts");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/fesm2015/router.js");

    var AppComponent = /*#__PURE__*/function () {
      function AppComponent(connectionService, toastr, router, swUpdate, swPush) {
        var _this = this;

        _classCallCheck(this, AppComponent);

        this.connectionService = connectionService;
        this.toastr = toastr;
        this.router = router;
        this.swUpdate = swUpdate;
        this.swPush = swPush;
        this.title = 'frontend';
        this.url = '';
        this.isLoginPage = false;
        this.currentApplicationVersion = _environments_environment__WEBPACK_IMPORTED_MODULE_5__["environment"].appVersion;
        this.VAPID_PUBLIC_KEY = 'BG2ymYfILNZzi183knEsp5PkW8jaGhsMR0u1iAriOfRUjKrLuAQLE6oZf_TguLnBPDksMDE900zi_qnoqmjOE3Y';
        this.heartBeatState = this.connectionService.options.enableHeartbeat;

        if (this.swUpdate.isEnabled) {
          this.setupUpdates();
        }

        this.router.events.subscribe(function (event) {
          if (event instanceof _angular_router__WEBPACK_IMPORTED_MODULE_6__["NavigationEnd"]) {
            console.log('router.event (NavigationEnd)', _this.router.url, {
              event: event
            });
            _this.url = event.url;
            var rgxAuth = new RegExp('\/auth\\b');
            _this.isLoginPage = rgxAuth.test(_this.url);
          }
        });
      }

      _createClass(AppComponent, [{
        key: "onPrompt",
        value: function onPrompt(event) {
          this.deferredInstallPrompt = event;
          return false;
        }
      }, {
        key: "setHeartBeatState",
        value: function setHeartBeatState(state) {
          this.heartBeatState = state;
          this.connectionService.updateOptions({
            enableHeartbeat: state
          });
        }
        /*
        
                updates.available.subscribe(event => {
                  console.log('current version is', event.current);
                  console.log('available version is', event.available);
                });
                updates.activated.subscribe(event => {
                  console.log('old version was', event.previous);
                  console.log('new version is', event.current);
                });
        
                updates.available.subscribe(event => {
                    updates.activateUpdate().then(() => this.updateApp());
                });
         */

      }, {
        key: "setupUpdates",
        value: function setupUpdates() {
          var _this2 = this;

          return;
          this.swUpdate.available.subscribe(function (event) {
            // Update wurde entdeckt
            console.log('current version is', event.current);
            console.log('available version is', event.available);
            var message = 'Aktuelle Version: ' + event.current + '<br>Aktuelle Version' + event.available;
            var action = 'New Version is available!'; // Benutzer auf Update hinweisen und Seite neu laden

            _this2.toastr.info(message, action).onAction.subscribe(function () {
              return location.reload();
            });
          }); // Update herunterladen

          this.swUpdate.activateUpdate().then(function (e) {
            // Update wurde heruntergeladen
            var message = 'Anwendung wurde aktualisert und wird neu geladen';
            var action = 'Reload!'; // Benutzer auf Update hinweisen und Seite neu laden

            _this2.toastr.info(message, action).onAction.subscribe(function () {
              return location.reload();
            });
          }); // Auf Updates prüfen

          this.swUpdate.checkForUpdate();
        }
      }, {
        key: "setupPush",
        value: function setupPush() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
            var pushSubscription;
            return regeneratorRuntime.wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    _context.next = 2;
                    return this.swPush.requestSubscription({
                      serverPublicKey: this.VAPID_PUBLIC_KEY
                    }).then(function (sub) {
                      console.log('Push Subscription', sub);
                    }, function (err) {
                      console.error('error registering for push', err);
                    });

                  case 2:
                    pushSubscription = _context.sent;
                    console.log({
                      pushSubscription: pushSubscription
                    });

                  case 4:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee, this);
          }));
        }
      }, {
        key: "installApp",
        value: function installApp() {
          this.deferredInstallPrompt.prompt();
        }
      }]);

      return AppComponent;
    }();

    AppComponent.ctorParameters = function () {
      return [{
        type: _shared_services_connection_service_service__WEBPACK_IMPORTED_MODULE_2__["ConnectionService"]
      }, {
        type: ngx_toastr__WEBPACK_IMPORTED_MODULE_4__["ToastrService"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_6__["Router"]
      }, {
        type: _angular_service_worker__WEBPACK_IMPORTED_MODULE_3__["SwUpdate"]
      }, {
        type: _angular_service_worker__WEBPACK_IMPORTED_MODULE_3__["SwPush"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"])('window:beforeinstallprompt', ['$event'])], AppComponent.prototype, "onPrompt", null);
    AppComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-root',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./app.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./app.component.scss */
      "./src/app/app.component.scss"))["default"]]
    })], AppComponent);
    /***/
  },

  /***/
  "./src/app/app.module.ts":
  /*!*******************************!*\
    !*** ./src/app/app.module.ts ***!
    \*******************************/

  /*! exports provided: AppModule */

  /***/
  function srcAppAppModuleTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "AppModule", function () {
      return AppModule;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/platform-browser */
    "./node_modules/@angular/platform-browser/fesm2015/platform-browser.js");
    /* harmony import */


    var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @angular/forms */
    "./node_modules/@angular/forms/fesm2015/forms.js");
    /* harmony import */


    var _angular_common_http__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @angular/common/http */
    "./node_modules/@angular/common/fesm2015/http.js");
    /* harmony import */


    var _fortawesome_angular_fontawesome__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! @fortawesome/angular-fontawesome */
    "./node_modules/@fortawesome/angular-fontawesome/fesm2015/angular-fontawesome.js");
    /* harmony import */


    var _fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! @fortawesome/fontawesome-svg-core */
    "./node_modules/@fortawesome/fontawesome-svg-core/index.es.js");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _fortawesome_free_regular_svg_icons__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! @fortawesome/free-regular-svg-icons */
    "./node_modules/@fortawesome/free-regular-svg-icons/index.es.js");
    /* harmony import */


    var _fortawesome_free_brands_svg_icons__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! @fortawesome/free-brands-svg-icons */
    "./node_modules/@fortawesome/free-brands-svg-icons/index.es.js");
    /* harmony import */


    var _app_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
    /*! ./app.component */
    "./src/app/app.component.ts");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _pages_auth_auth_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(
    /*! ./pages/auth/auth.component */
    "./src/app/pages/auth/auth.component.ts");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/fesm2015/router.js");
    /* harmony import */


    var _pages_select_inventory_select_inventory_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(
    /*! ./pages/select-inventory/select-inventory.component */
    "./src/app/pages/select-inventory/select-inventory.component.ts");
    /* harmony import */


    var _shared_components_ngbheader_ngbheader_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(
    /*! ./shared/components/ngbheader/ngbheader.component */
    "./src/app/shared/components/ngbheader/ngbheader.component.ts");
    /* harmony import */


    var _pages_invent_form_invent_form_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(
    /*! ./pages/invent-form/invent-form.component */
    "./src/app/pages/invent-form/invent-form.component.ts");
    /* harmony import */


    var _shared_inventory_progress_inventory_progress_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(
    /*! ./shared/inventory-progress/inventory-progress.directive */
    "./src/app/shared/inventory-progress/inventory-progress.directive.ts");
    /* harmony import */


    var _shared_components_progressbar_progressbar_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(
    /*! ./shared/components/progressbar/progressbar.component */
    "./src/app/shared/components/progressbar/progressbar.component.ts");
    /* harmony import */


    var _pages_auth_auth_interceptor_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(
    /*! ./pages/auth/auth-interceptor.service */
    "./src/app/pages/auth/auth-interceptor.service.ts");
    /* harmony import */


    var _pages_invent_form_modals_select_create_raum_select_create_raum_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(
    /*! ./pages/invent-form/modals/select-create-raum/select-create-raum.component */
    "./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_select_create_artikel_select_create_artikel_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(
    /*! ./pages/invent-form/modals/select-create-artikel/select-create-artikel.component */
    "./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_create_artikel_image_create_artikel_image_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(
    /*! ./pages/invent-form/modals/create-artikel-image/create-artikel-image.component */
    "./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_show_artikel_image_show_artikel_image_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(
    /*! ./pages/invent-form/modals/show-artikel-image/show-artikel-image.component */
    "./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_select_search_raum_select_search_raum_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(
    /*! ./pages/invent-form/modals/select-search-raum/select-search-raum.component */
    "./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_select_search_artikel_select_search_artikel_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(
    /*! ./pages/invent-form/modals/select-search-artikel/select-search-artikel.component */
    "./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.ts");
    /* harmony import */


    var _shared_services_api_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(
    /*! ./shared/services/api.service */
    "./src/app/shared/services/api.service.ts");
    /* harmony import */


    var _shared_components_status_check_status_check_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(
    /*! ./shared/components/status-check/status-check.component */
    "./src/app/shared/components/status-check/status-check.component.ts");
    /* harmony import */


    var ngx_webcam__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(
    /*! ngx-webcam */
    "./node_modules/ngx-webcam/fesm2015/ngx-webcam.js");
    /* harmony import */


    var angular_cropperjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(
    /*! angular-cropperjs */
    "./node_modules/angular-cropperjs/fesm2015/angular-cropperjs.js");
    /* harmony import */


    var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(
    /*! @angular/platform-browser/animations */
    "./node_modules/@angular/platform-browser/fesm2015/animations.js");
    /* harmony import */


    var ngx_toastr__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(
    /*! ngx-toastr */
    "./node_modules/ngx-toastr/fesm2015/ngx-toastr.js");
    /* harmony import */


    var _zxing_ngx_scanner__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(
    /*! @zxing/ngx-scanner */
    "./node_modules/@zxing/ngx-scanner/fesm2015/zxing-ngx-scanner.js");
    /* harmony import */


    var _pages_invent_form_modals_scanner_scanner_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(
    /*! ./pages/invent-form/modals/scanner/scanner.component */
    "./src/app/pages/invent-form/modals/scanner/scanner.component.ts");
    /* harmony import */


    var _shared_directives_scannerinput_directive__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(
    /*! ./shared/directives/scannerinput.directive */
    "./src/app/shared/directives/scannerinput.directive.ts");
    /* harmony import */


    var _shared_components_scannerdetection_scannerdetection_component__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(
    /*! ./shared/components/scannerdetection/scannerdetection.component */
    "./src/app/shared/components/scannerdetection/scannerdetection.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_raum_list_done_raum_list_done_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(
    /*! ./pages/invent-form/modals/raum-list-done/raum-list-done.component */
    "./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_raum_list_rest_raum_list_rest_component__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(
    /*! ./pages/invent-form/modals/raum-list-rest/raum-list-rest.component */
    "./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_gesamt_list_rest_gesamt_list_rest_component__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(
    /*! ./pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component */
    "./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_gesamt_list_done_gesamt_list_done_component__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(
    /*! ./pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component */
    "./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.ts");
    /* harmony import */


    var _pages_dbsync_dbsync_component__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(
    /*! ./pages/dbsync/dbsync.component */
    "./src/app/pages/dbsync/dbsync.component.ts");
    /* harmony import */


    var _pages_settings_settings_component__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(
    /*! ./pages/settings/settings.component */
    "./src/app/pages/settings/settings.component.ts");
    /* harmony import */


    var _environments_environment__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(
    /*! ../environments/environment */
    "./src/environments/environment.ts");
    /* harmony import */


    var _angular_service_worker__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(
    /*! @angular/service-worker */
    "./node_modules/@angular/service-worker/fesm2015/service-worker.js");
    /* harmony import */


    var _pages_invent_form_modals_edit_raum_edit_raum_component__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(
    /*! ./pages/invent-form/modals/edit-raum/edit-raum.component */
    "./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_edit_inventar_edit_inventar_component__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(
    /*! ./pages/invent-form/modals/edit-inventar/edit-inventar.component */
    "./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.ts");
    /* harmony import */


    var _pages_auth_auth_guard_service__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(
    /*! ./pages/auth/auth-guard.service */
    "./src/app/pages/auth/auth-guard.service.ts");
    /* harmony import */


    var _pages_invent_form_modals_imagebox_imagebox_component__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(
    /*! ./pages/invent-form/modals/imagebox/imagebox.component */
    "./src/app/pages/invent-form/modals/imagebox/imagebox.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_show_raum_image_show_raum_image_component__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(
    /*! ./pages/invent-form/modals/show-raum-image/show-raum-image.component */
    "./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_create_raum_image_create_raum_image_component__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(
    /*! ./pages/invent-form/modals/create-raum-image/create-raum-image.component */
    "./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.ts");
    /* harmony import */


    var _pages_invent_form_modals_batch_barcodes_batch_barcodes_component__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(
    /*! ./pages/invent-form/modals/batch-barcodes/batch-barcodes.component */
    "./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.ts");
    /* harmony import */


    var _shared_services_client_config_load_service__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(
    /*! ./shared/services/client-config-load.service */
    "./src/app/shared/services/client-config-load.service.ts"); // import imageCompression from 'browser-image-compression';
    // the scanner


    var appRoutes = [{
      path: '',
      component: _pages_auth_auth_component__WEBPACK_IMPORTED_MODULE_12__["AuthComponent"]
    }, {
      path: 'auth',
      component: _pages_auth_auth_component__WEBPACK_IMPORTED_MODULE_12__["AuthComponent"]
    }, {
      path: 'auth/logout',
      component: _pages_auth_auth_component__WEBPACK_IMPORTED_MODULE_12__["AuthComponent"]
    }, {
      path: 'select-inventory',
      component: _pages_select_inventory_select_inventory_component__WEBPACK_IMPORTED_MODULE_14__["SelectInventoryComponent"],
      canActivate: [_pages_auth_auth_guard_service__WEBPACK_IMPORTED_MODULE_46__["AuthGuardService"]]
    }, {
      path: 'form-inventory/:clientid/:buildingid/:roomid',
      component: _pages_invent_form_invent_form_component__WEBPACK_IMPORTED_MODULE_16__["InventFormComponent"],
      canActivate: [_pages_auth_auth_guard_service__WEBPACK_IMPORTED_MODULE_46__["AuthGuardService"]]
    }, {
      path: 'form-inventory/:clientid/:buildingid',
      component: _pages_invent_form_invent_form_component__WEBPACK_IMPORTED_MODULE_16__["InventFormComponent"],
      canActivate: [_pages_auth_auth_guard_service__WEBPACK_IMPORTED_MODULE_46__["AuthGuardService"]]
    }, {
      path: 'form-inventory',
      component: _pages_invent_form_invent_form_component__WEBPACK_IMPORTED_MODULE_16__["InventFormComponent"],
      canActivate: [_pages_auth_auth_guard_service__WEBPACK_IMPORTED_MODULE_46__["AuthGuardService"]]
    }, {
      path: 'sync',
      component: _pages_dbsync_dbsync_component__WEBPACK_IMPORTED_MODULE_40__["DbsyncComponent"],
      canActivate: [_pages_auth_auth_guard_service__WEBPACK_IMPORTED_MODULE_46__["AuthGuardService"]]
    }, {
      path: 'settings',
      component: _pages_settings_settings_component__WEBPACK_IMPORTED_MODULE_41__["SettingsComponent"],
      canActivate: [_pages_auth_auth_guard_service__WEBPACK_IMPORTED_MODULE_46__["AuthGuardService"]]
    }];

    function persist() {
      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {
        return regeneratorRuntime.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.t0 = navigator.storage && navigator.storage.persist;

                if (!_context2.t0) {
                  _context2.next = 5;
                  break;
                }

                _context2.next = 4;
                return navigator.storage.persist();

              case 4:
                _context2.t0 = _context2.sent;

              case 5:
                return _context2.abrupt("return", _context2.t0);

              case 6:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      }));
    }

    if ('localStorage' in window && localStorage.getItem('ClientDeviceId') === null) {
      localStorage.setItem('ClientDeviceId', JSON.stringify(0));
    }

    persist();

    var AppModule = function AppModule() {
      _classCallCheck(this, AppModule);

      _fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_6__["library"].add(_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_7__["faSquare"], _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_7__["faCheckSquare"], _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_7__["faBarcode"], _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_7__["faUser"], _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_7__["faKey"], _fortawesome_free_regular_svg_icons__WEBPACK_IMPORTED_MODULE_8__["faSquare"], _fortawesome_free_regular_svg_icons__WEBPACK_IMPORTED_MODULE_8__["faCheckSquare"], _fortawesome_free_brands_svg_icons__WEBPACK_IMPORTED_MODULE_9__["faStackOverflow"], _fortawesome_free_brands_svg_icons__WEBPACK_IMPORTED_MODULE_9__["faGithub"], _fortawesome_free_brands_svg_icons__WEBPACK_IMPORTED_MODULE_9__["faMedium"]);
    };

    AppModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
      declarations: [_app_component__WEBPACK_IMPORTED_MODULE_10__["AppComponent"], _pages_auth_auth_component__WEBPACK_IMPORTED_MODULE_12__["AuthComponent"], _pages_select_inventory_select_inventory_component__WEBPACK_IMPORTED_MODULE_14__["SelectInventoryComponent"], _shared_components_ngbheader_ngbheader_component__WEBPACK_IMPORTED_MODULE_15__["NgbheaderComponent"], _pages_invent_form_invent_form_component__WEBPACK_IMPORTED_MODULE_16__["InventFormComponent"], _shared_inventory_progress_inventory_progress_directive__WEBPACK_IMPORTED_MODULE_17__["InventoryProgressDirective"], _shared_components_progressbar_progressbar_component__WEBPACK_IMPORTED_MODULE_18__["ProgressbarComponent"], _pages_invent_form_modals_select_create_raum_select_create_raum_component__WEBPACK_IMPORTED_MODULE_20__["SelectCreateRaumComponent"], _pages_invent_form_modals_select_create_artikel_select_create_artikel_component__WEBPACK_IMPORTED_MODULE_21__["SelectCreateArtikelComponent"], _pages_invent_form_modals_create_artikel_image_create_artikel_image_component__WEBPACK_IMPORTED_MODULE_22__["CreateArtikelImageComponent"], _pages_invent_form_modals_show_artikel_image_show_artikel_image_component__WEBPACK_IMPORTED_MODULE_23__["ShowArtikelImageComponent"], _pages_invent_form_modals_scanner_scanner_component__WEBPACK_IMPORTED_MODULE_33__["ScannerComponent"], _shared_directives_scannerinput_directive__WEBPACK_IMPORTED_MODULE_34__["ScannerinputDirective"], _shared_components_scannerdetection_scannerdetection_component__WEBPACK_IMPORTED_MODULE_35__["ScannerdetectionComponent"], _pages_invent_form_modals_select_search_raum_select_search_raum_component__WEBPACK_IMPORTED_MODULE_24__["SelectSearchRaumComponent"], _pages_invent_form_modals_select_search_artikel_select_search_artikel_component__WEBPACK_IMPORTED_MODULE_25__["SelectSearchArtikelComponent"], _shared_components_status_check_status_check_component__WEBPACK_IMPORTED_MODULE_27__["StatusCheckComponent"], _pages_invent_form_modals_raum_list_done_raum_list_done_component__WEBPACK_IMPORTED_MODULE_36__["RaumListDoneComponent"], _pages_invent_form_modals_raum_list_rest_raum_list_rest_component__WEBPACK_IMPORTED_MODULE_37__["RaumListRestComponent"], _pages_invent_form_modals_gesamt_list_rest_gesamt_list_rest_component__WEBPACK_IMPORTED_MODULE_38__["GesamtListRestComponent"], _pages_invent_form_modals_gesamt_list_done_gesamt_list_done_component__WEBPACK_IMPORTED_MODULE_39__["GesamtListDoneComponent"], _pages_dbsync_dbsync_component__WEBPACK_IMPORTED_MODULE_40__["DbsyncComponent"], _pages_settings_settings_component__WEBPACK_IMPORTED_MODULE_41__["SettingsComponent"], _pages_invent_form_modals_edit_raum_edit_raum_component__WEBPACK_IMPORTED_MODULE_44__["EditRaumComponent"], _pages_invent_form_modals_edit_inventar_edit_inventar_component__WEBPACK_IMPORTED_MODULE_45__["EditInventarComponent"], _pages_invent_form_modals_imagebox_imagebox_component__WEBPACK_IMPORTED_MODULE_47__["ImageboxComponent"], _pages_invent_form_modals_show_raum_image_show_raum_image_component__WEBPACK_IMPORTED_MODULE_48__["ShowRaumImageComponent"], _pages_invent_form_modals_create_raum_image_create_raum_image_component__WEBPACK_IMPORTED_MODULE_49__["CreateRaumImageComponent"], _pages_invent_form_modals_batch_barcodes_batch_barcodes_component__WEBPACK_IMPORTED_MODULE_50__["BatchBarcodesComponent"]],
      imports: [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__["BrowserModule"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormsModule"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_11__["NgbModule"], _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpClientModule"], _angular_router__WEBPACK_IMPORTED_MODULE_13__["RouterModule"].forRoot(appRoutes), _fortawesome_angular_fontawesome__WEBPACK_IMPORTED_MODULE_5__["FontAwesomeModule"], _zxing_ngx_scanner__WEBPACK_IMPORTED_MODULE_32__["ZXingScannerModule"], ngx_webcam__WEBPACK_IMPORTED_MODULE_28__["WebcamModule"], angular_cropperjs__WEBPACK_IMPORTED_MODULE_29__["AngularCropperjsModule"], _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_30__["BrowserAnimationsModule"], ngx_toastr__WEBPACK_IMPORTED_MODULE_31__["ToastrModule"].forRoot({
        enableHtml: true,
        closeButton: true,
        progressBar: true,
        maxOpened: 6,
        autoDismiss: true,
        preventDuplicates: true,
        resetTimeoutOnDuplicate: true
      }), _angular_service_worker__WEBPACK_IMPORTED_MODULE_43__["ServiceWorkerModule"].register('ngsw-worker.js', {
        enabled: _environments_environment__WEBPACK_IMPORTED_MODULE_42__["environment"].production,
        registrationStrategy: 'registerImmediately'
      })],
      entryComponents: [_pages_invent_form_modals_create_artikel_image_create_artikel_image_component__WEBPACK_IMPORTED_MODULE_22__["CreateArtikelImageComponent"], _pages_invent_form_modals_show_artikel_image_show_artikel_image_component__WEBPACK_IMPORTED_MODULE_23__["ShowArtikelImageComponent"], _pages_invent_form_modals_scanner_scanner_component__WEBPACK_IMPORTED_MODULE_33__["ScannerComponent"], _pages_invent_form_modals_select_create_artikel_select_create_artikel_component__WEBPACK_IMPORTED_MODULE_21__["SelectCreateArtikelComponent"], _pages_invent_form_modals_select_create_raum_select_create_raum_component__WEBPACK_IMPORTED_MODULE_20__["SelectCreateRaumComponent"], _pages_invent_form_modals_select_search_raum_select_search_raum_component__WEBPACK_IMPORTED_MODULE_24__["SelectSearchRaumComponent"], _pages_invent_form_modals_select_search_artikel_select_search_artikel_component__WEBPACK_IMPORTED_MODULE_25__["SelectSearchArtikelComponent"], _pages_invent_form_modals_raum_list_done_raum_list_done_component__WEBPACK_IMPORTED_MODULE_36__["RaumListDoneComponent"], _pages_invent_form_modals_raum_list_rest_raum_list_rest_component__WEBPACK_IMPORTED_MODULE_37__["RaumListRestComponent"], _pages_invent_form_modals_gesamt_list_rest_gesamt_list_rest_component__WEBPACK_IMPORTED_MODULE_38__["GesamtListRestComponent"], _pages_invent_form_modals_gesamt_list_done_gesamt_list_done_component__WEBPACK_IMPORTED_MODULE_39__["GesamtListDoneComponent"], _pages_invent_form_modals_edit_raum_edit_raum_component__WEBPACK_IMPORTED_MODULE_44__["EditRaumComponent"], _pages_invent_form_modals_edit_inventar_edit_inventar_component__WEBPACK_IMPORTED_MODULE_45__["EditInventarComponent"], _pages_invent_form_modals_imagebox_imagebox_component__WEBPACK_IMPORTED_MODULE_47__["ImageboxComponent"], _pages_invent_form_modals_show_raum_image_show_raum_image_component__WEBPACK_IMPORTED_MODULE_48__["ShowRaumImageComponent"], _pages_invent_form_modals_create_raum_image_create_raum_image_component__WEBPACK_IMPORTED_MODULE_49__["CreateRaumImageComponent"], _pages_invent_form_modals_batch_barcodes_batch_barcodes_component__WEBPACK_IMPORTED_MODULE_50__["BatchBarcodesComponent"]],
      providers: [{
        provide: _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HTTP_INTERCEPTORS"],
        useClass: _pages_auth_auth_interceptor_service__WEBPACK_IMPORTED_MODULE_19__["AuthInterceptorService"],
        multi: true
      }, {
        provide: _angular_core__WEBPACK_IMPORTED_MODULE_1__["APP_INITIALIZER"],
        useFactory: _shared_services_client_config_load_service__WEBPACK_IMPORTED_MODULE_51__["ClientConfigLoadService"].initializeClientConfig,
        multi: true,
        deps: [_shared_services_client_config_load_service__WEBPACK_IMPORTED_MODULE_51__["ClientConfigLoadService"]]
      }, _shared_services_api_service__WEBPACK_IMPORTED_MODULE_26__["ApiService"]],
      bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_10__["AppComponent"]]
    })], AppModule);
    /***/
  },

  /***/
  "./src/app/pages/auth/auth-guard.service.ts":
  /*!**************************************************!*\
    !*** ./src/app/pages/auth/auth-guard.service.ts ***!
    \**************************************************/

  /*! exports provided: AuthGuardService */

  /***/
  function srcAppPagesAuthAuthGuardServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "AuthGuardService", function () {
      return AuthGuardService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/fesm2015/router.js");
    /* harmony import */


    var _auth_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ./auth.service */
    "./src/app/pages/auth/auth.service.ts");

    var AuthGuardService = /*#__PURE__*/function () {
      function AuthGuardService(auth, router) {
        _classCallCheck(this, AuthGuardService);

        this.auth = auth;
        this.router = router;
      }

      _createClass(AuthGuardService, [{
        key: "canActivate",
        value: function canActivate() {
          var isLoggedIn = this.auth.isLoggedIn();

          if (!this.auth.isLoggedIn()) {
            console.log('#16 AuthGuardService navigate to auth', {
              isLoggedIn: isLoggedIn
            });
            this.router.navigate(['auth']);
            return false;
          }

          return true;
        }
      }]);

      return AuthGuardService;
    }();

    AuthGuardService.ctorParameters = function () {
      return [{
        type: _auth_service__WEBPACK_IMPORTED_MODULE_3__["AuthService"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"]
      }];
    };

    AuthGuardService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], AuthGuardService);
    /***/
  },

  /***/
  "./src/app/pages/auth/auth-interceptor.service.ts":
  /*!********************************************************!*\
    !*** ./src/app/pages/auth/auth-interceptor.service.ts ***!
    \********************************************************/

  /*! exports provided: AuthInterceptorService */

  /***/
  function srcAppPagesAuthAuthInterceptorServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "AuthInterceptorService", function () {
      return AuthInterceptorService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _environments_environment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../../environments/environment */
    "./src/environments/environment.ts");
    /* harmony import */


    var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! rxjs */
    "./node_modules/rxjs/_esm2015/index.js");
    /* harmony import */


    var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! rxjs/operators */
    "./node_modules/rxjs/_esm2015/operators/index.js");
    /* harmony import */


    var _auth_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ./auth.service */
    "./src/app/pages/auth/auth.service.ts");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/fesm2015/router.js");

    var AuthInterceptorService = /*#__PURE__*/function () {
      function AuthInterceptorService(authService, router) {
        _classCallCheck(this, AuthInterceptorService);

        this.authService = authService;
        this.router = router;
        this.applicationVersion = _environments_environment__WEBPACK_IMPORTED_MODULE_2__["environment"].appVersion;
      }

      _createClass(AuthInterceptorService, [{
        key: "addAuthHeader",
        value: function addAuthHeader(request) {
          var user = this.authService.getUser();

          if (!user) {
            return request;
          }

          return request.clone({
            setHeaders: {
              Authorization: "Bearer ".concat(user.token),
              'Client-Device-Id': "".concat(this.authService.getClientDeviceId()),
              'Client-App-Version': this.applicationVersion
            }
          });
        }
      }, {
        key: "handleResponseError",
        value: function handleResponseError(error, request, next) {
          // Business error
          if (error.status === 400) {// Show message
          } else if (error.status === 401 || error.status === 403) {
            if (this.router.url.indexOf('/auth') === -1) {
              console.error('Login ist abgelaufen. Bitte neu einloggen! navigate to /auth');
              this.router.navigateByUrl('/auth');
            }
          }

          return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(error);
        }
      }, {
        key: "intercept",
        value: function intercept(req, next) {
          var _this3 = this;

          // Handle Request
          var request = this.addAuthHeader(req); // Handle Response

          return next.handle(request).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(function (error, caught) {
            return _this3.handleResponseError(error, request, next);
          }));
        }
      }]);

      return AuthInterceptorService;
    }();

    AuthInterceptorService.ctorParameters = function () {
      return [{
        type: _auth_service__WEBPACK_IMPORTED_MODULE_5__["AuthService"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_6__["Router"]
      }];
    };

    AuthInterceptorService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], AuthInterceptorService);
    /***/
  },

  /***/
  "./src/app/pages/auth/auth.component.scss":
  /*!************************************************!*\
    !*** ./src/app/pages/auth/auth.component.scss ***!
    \************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesAuthAuthComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "/* Coded with love by Mutiullah Samim */\nbody,\nhtml {\n  margin: 0;\n  padding: 0;\n  height: 100%;\n}\nh1, .h1 {\n  z-index: 1;\n  font-size: 2rem;\n  font-weight: 100;\n  color: #2d2d2d !important;\n  position: relative;\n  text-align: center;\n  width: 100%;\n  margin-bottom: 2rem;\n}\nh2, .h2 {\n  font-size: 3rem;\n  color: #2d2d2d;\n  margin-bottom: 1.5rem;\n}\n.user_card.user_card_loginbox_bg {\n  background-color: #eeeeee;\n  box-sizing: border-box;\n  width: 100%;\n  max-width: 520px;\n  padding-top: 1.5rem;\n  padding-bottom: 1.5rem;\n  padding-left: 5%;\n  padding-right: 5%;\n  margin-bottom: 1.5rem;\n  margin-top: auto;\n  margin-left: auto;\n  margin-right: auto;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n.form_container {\n  width: 100%;\n}\n.form_container form {\n  width: 100%;\n}\n.login_btn {\n  width: 75%;\n  max-width: 230px;\n  min-width: 160px;\n  background: #2d2d2d !important;\n  color: #ffffff !important;\n  font-size: 1.2rem;\n  border-radius: 0 !important;\n}\n.login_btn:focus {\n  box-shadow: none !important;\n  outline: 0px !important;\n}\n.login_container {\n  margin-top: 2rem;\n  padding: 0;\n}\n.input-group-text {\n  background: #c6c6c6 !important;\n  color: white !important;\n  border: 0 !important;\n  font-size: 1.2rem;\n}\n.input_user,\n.input_pass:focus {\n  box-shadow: none !important;\n  outline: 0px !important;\n}\n.custom-checkbox .custom-control-input:checked ~ .custom-control-label::before {\n  background-color: #c0392b !important;\n}\n.form_containter .form-control,\n.form-control {\n  background-color: #ffffff !important;\n  font-size: 1.2rem;\n  color: #2d2d2d;\n}\n/* Change Autocomplete styles in Chrome*/\ninput:-webkit-autofill,\ninput:-webkit-autofill:hover,\ninput:-webkit-autofill:focus,\ntextarea:-webkit-autofill,\ntextarea:-webkit-autofill:hover,\ntextarea:-webkit-autofill:focus,\nselect:-webkit-autofill,\nselect:-webkit-autofill:hover,\nselect:-webkit-autofill:focus {\n  border: none;\n  color: #2d2d2d !important;\n  -webkit-text-fill-color: #2d2d2d;\n  -webkit-box-shadow: none;\n  transition: background-color 5000s ease-in-out 0s;\n  transition: background-color 5000s ease-in-out 0s;\n  transition: background-color 5000s ease-in-out 0s;\n  font-family: \"Lato\" !important;\n  font-weight: 300 !important;\n  font-style: normal !important;\n  font-size: 1.3rem !important;\n}\ninput:-webkit-autofill::first-line {\n  font-family: \"Lato\";\n  font-weight: 300;\n  font-style: normal;\n  font-size: 1.3rem;\n  color: #2d2d2d !important;\n}\n.form-control.ng-invalid {\n  border-right: 0.4rem solid #f7a9a9;\n}\n.form-control.ng-valid {\n  border-right: 0.4rem solid #adfaad;\n}\n.brand-circle-container {\n  width: 100%;\n  text-align: center;\n  margin-top: 10px;\n  margin-bottom: 5px;\n}\n.brand-circle-grey {\n  margin-left: auto;\n  margin-right: auto;\n  width: 18vh;\n  height: 18vh;\n  min-width: 100px;\n  min-height: 100px;\n  max-width: 180px;\n  max-height: 180px;\n  border-radius: 50%;\n  background-color: #eee;\n  margin-bottom: 1.6vh;\n  margin-top: 2vh;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvYXV0aC9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxhdXRoXFxhdXRoLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9wYWdlcy9hdXRoL2F1dGguY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUMsdUNBQUE7QUFDRDs7RUFFSSxTQUFBO0VBQ0EsVUFBQTtFQUNBLFlBQUE7QUNDSjtBRElFO0VBQ0UsVUFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxtQkFBQTtBQ0RKO0FER0U7RUFDRSxlQUFBO0VBQ0EsY0FBQTtFQUNBLHFCQUFBO0FDQUo7QURFRTtFQUNFLHlCQUFBO0VBQ0Esc0JBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7RUFFQSxtQkFBQTtFQUNBLHNCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUVBLHFCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBRUEsa0JBQUE7RUFDQSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxzQkFBQTtBQ0ZKO0FEVUE7RUFDRSxXQUFBO0FDUEY7QURTQTtFQUNFLFdBQUE7QUNORjtBRFFBO0VBQ0UsVUFBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSw4QkFBQTtFQUNBLHlCQUFBO0VBQ0EsaUJBQUE7RUFDQSwyQkFBQTtBQ0xGO0FEUUE7RUFDSSwyQkFBQTtFQUNBLHVCQUFBO0FDTEo7QURPQTtFQUNFLGdCQUFBO0VBQ0UsVUFBQTtBQ0pKO0FETUE7RUFDRSw4QkFBQTtFQUNBLHVCQUFBO0VBQ0Esb0JBQUE7RUFDQSxpQkFBQTtBQ0hGO0FETUE7O0VBRUksMkJBQUE7RUFDQSx1QkFBQTtBQ0hKO0FES0E7RUFDSSxvQ0FBQTtBQ0ZKO0FES0E7O0VBRUUsb0NBQUE7RUFDQSxpQkFBQTtFQUNBLGNBQUE7QUNGRjtBRElBLHdDQUFBO0FBQ0U7Ozs7Ozs7OztFQVNFLFlBQUE7RUFDQSx5QkFBQTtFQUNBLGdDQUFBO0VBQ0Esd0JBQUE7RUFDQSxpREFBQTtFQUNBLGlEQUFBO0VBQ0EsaURBQUE7RUFDQSw4QkFBQTtFQUNBLDJCQUFBO0VBQ0EsNkJBQUE7RUFDQSw0QkFBQTtBQ0RKO0FESUU7RUFDRSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtFQUNBLHlCQUFBO0FDREo7QURJQTtFQUNFLGtDQUFBO0FDREY7QURLQTtFQUNFLGtDQUFBO0FDRkY7QURLQTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0Esa0JBQUE7QUNGRjtBREtBO0VBQ0UsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLHNCQUFBO0VBQ0Esb0JBQUE7RUFDQSxlQUFBO0FDRkYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9hdXRoL2F1dGguY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcdC8qIENvZGVkIHdpdGggbG92ZSBieSBNdXRpdWxsYWggU2FtaW0gKi9cclxuYm9keSxcclxuaHRtbCB7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcblxyXG4uYmcge1xyXG59XHJcbiAgaDEsIC5oMSB7XHJcbiAgICB6LWluZGV4OiAxO1xyXG4gICAgZm9udC1zaXplOiAycmVtO1xyXG4gICAgZm9udC13ZWlnaHQ6IDEwMDtcclxuICAgIGNvbG9yOiAjMmQyZDJkICFpbXBvcnRhbnQ7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIG1hcmdpbi1ib3R0b206IDJyZW07XHJcbiAgfVxyXG4gIGgyLCAuaDIge1xyXG4gICAgZm9udC1zaXplOiAzcmVtO1xyXG4gICAgY29sb3I6ICMyZDJkMmQ7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XHJcbiAgfVxyXG4gIC51c2VyX2NhcmQudXNlcl9jYXJkX2xvZ2luYm94X2JnIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7XHJcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBtYXgtd2lkdGg6IDUyMHB4O1xyXG5cclxuICAgIHBhZGRpbmctdG9wOiAxLjVyZW07XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogMS41cmVtO1xyXG4gICAgcGFkZGluZy1sZWZ0OiA1JTtcclxuICAgIHBhZGRpbmctcmlnaHQ6IDUlO1xyXG5cclxuICAgIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcclxuICAgIG1hcmdpbi10b3A6IGF1dG87XHJcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgIG1hcmdpbi1yaWdodDogYXV0bztcclxuXHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgLy9ib3gtc2hhZG93OiAwIDRweCA4cHggMCByZ2JhKDAsIDAsIDAsIDAuMiksIDAgNnB4IDIwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTkpO1xyXG4gICAgLy8td2Via2l0LWJveC1zaGFkb3c6IDAgNHB4IDhweCAwIHJnYmEoMCwgMCwgMCwgMC4yKSwgMCA2cHggMjBweCAwIHJnYmEoMCwgMCwgMCwgMC4xOSk7XHJcbiAgICAvLy1tb3otYm94LXNoYWRvdzogMCA0cHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpLCAwIDZweCAyMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjE5KTtcclxuICAgIC8vIGJvcmRlci1yYWRpdXM6IDVweDtcclxuXHJcbn1cclxuXHJcbi5mb3JtX2NvbnRhaW5lciB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuLmZvcm1fY29udGFpbmVyIGZvcm0ge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcbi5sb2dpbl9idG4ge1xyXG4gIHdpZHRoOiA3NSU7XHJcbiAgbWF4LXdpZHRoOiAyMzBweDtcclxuICBtaW4td2lkdGg6IDE2MHB4O1xyXG4gIGJhY2tncm91bmQ6ICMyZDJkMmQgIWltcG9ydGFudDtcclxuICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50O1xyXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xyXG4gIGJvcmRlci1yYWRpdXM6IDAgIWltcG9ydGFudDtcclxufVxyXG5cclxuLmxvZ2luX2J0bjpmb2N1cyB7XHJcbiAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7XHJcbiAgICBvdXRsaW5lOiAwcHggIWltcG9ydGFudDtcclxufVxyXG4ubG9naW5fY29udGFpbmVyIHtcclxuICBtYXJnaW4tdG9wOiAycmVtO1xyXG4gICAgcGFkZGluZzogMDtcclxufVxyXG4uaW5wdXQtZ3JvdXAtdGV4dCB7XHJcbiAgYmFja2dyb3VuZDogI2M2YzZjNiAhaW1wb3J0YW50O1xyXG4gIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xyXG4gIGJvcmRlcjogMCAhaW1wb3J0YW50O1xyXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xyXG4gIC8vIGJvcmRlci1yYWRpdXM6IDAuMjVyZW0gMCAwIDAuMjVyZW0gIWltcG9ydGFudDtcclxufVxyXG4uaW5wdXRfdXNlcixcclxuLmlucHV0X3Bhc3M6Zm9jdXMge1xyXG4gICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50O1xyXG4gICAgb3V0bGluZTogMHB4ICFpbXBvcnRhbnQ7XHJcbn1cclxuLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWNvbnRyb2wtaW5wdXQ6Y2hlY2tlZH4uY3VzdG9tLWNvbnRyb2wtbGFiZWw6OmJlZm9yZSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzAzOTJiICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi5mb3JtX2NvbnRhaW50ZXIgLmZvcm0tY29udHJvbCxcclxuLmZvcm0tY29udHJvbCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50O1xyXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xyXG4gIGNvbG9yOiAjMmQyZDJkO1xyXG59XHJcbi8qIENoYW5nZSBBdXRvY29tcGxldGUgc3R5bGVzIGluIENocm9tZSovXHJcbiAgaW5wdXQ6LXdlYmtpdC1hdXRvZmlsbCxcclxuICBpbnB1dDotd2Via2l0LWF1dG9maWxsOmhvdmVyLFxyXG4gIGlucHV0Oi13ZWJraXQtYXV0b2ZpbGw6Zm9jdXMsXHJcbiAgdGV4dGFyZWE6LXdlYmtpdC1hdXRvZmlsbCxcclxuICB0ZXh0YXJlYTotd2Via2l0LWF1dG9maWxsOmhvdmVyLFxyXG4gIHRleHRhcmVhOi13ZWJraXQtYXV0b2ZpbGw6Zm9jdXMsXHJcbiAgc2VsZWN0Oi13ZWJraXQtYXV0b2ZpbGwsXHJcbiAgc2VsZWN0Oi13ZWJraXQtYXV0b2ZpbGw6aG92ZXIsXHJcbiAgc2VsZWN0Oi13ZWJraXQtYXV0b2ZpbGw6Zm9jdXMge1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgY29sb3I6ICMyZDJkMmQgIWltcG9ydGFudDtcclxuICAgIC13ZWJraXQtdGV4dC1maWxsLWNvbG9yOiAjMmQyZDJkO1xyXG4gICAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lO1xyXG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciA1MDAwcyBlYXNlLWluLW91dCAwcztcclxuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgNTAwMHMgZWFzZS1pbi1vdXQgMHM7XHJcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDUwMDBzIGVhc2UtaW4tb3V0IDBzO1xyXG4gICAgZm9udC1mYW1pbHk6ICdMYXRvJyAhaW1wb3J0YW50O1xyXG4gICAgZm9udC13ZWlnaHQ6IDMwMCAhaW1wb3J0YW50O1xyXG4gICAgZm9udC1zdHlsZTogbm9ybWFsICFpbXBvcnRhbnQ7XHJcbiAgICBmb250LXNpemU6IDEuM3JlbSAhaW1wb3J0YW50O1xyXG4gIH1cclxuXHJcbiAgaW5wdXQ6LXdlYmtpdC1hdXRvZmlsbDo6Zmlyc3QtbGluZSB7XHJcbiAgICBmb250LWZhbWlseTogJ0xhdG8nO1xyXG4gICAgZm9udC13ZWlnaHQ6IDMwMDtcclxuICAgIGZvbnQtc3R5bGU6IG5vcm1hbDtcclxuICAgIGZvbnQtc2l6ZTogMS4zcmVtO1xyXG4gICAgY29sb3I6ICMyZDJkMmQgIWltcG9ydGFudDtcclxuICB9XHJcblxyXG4uZm9ybS1jb250cm9sLm5nLWludmFsaWQge1xyXG4gIGJvcmRlci1yaWdodDogMC40cmVtIHNvbGlkIHJnYigyNDcsIDE2OSwgMTY5KTtcclxufVxyXG5cclxuXHJcbi5mb3JtLWNvbnRyb2wubmctdmFsaWQge1xyXG4gIGJvcmRlci1yaWdodDogMC40cmVtIHNvbGlkIHJnYigxNzMsIDI1MCwgMTczKTtcclxufVxyXG5cclxuLmJyYW5kLWNpcmNsZS1jb250YWluZXJ7XHJcbiAgd2lkdGg6MTAwJTtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgbWFyZ2luLXRvcDoxMHB4O1xyXG4gIG1hcmdpbi1ib3R0b206NXB4O1xyXG59XHJcblxyXG4uYnJhbmQtY2lyY2xlLWdyZXkge1xyXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gIG1hcmdpbi1yaWdodDogYXV0bztcclxuICB3aWR0aDogMTh2aDtcclxuICBoZWlnaHQ6IDE4dmg7XHJcbiAgbWluLXdpZHRoOiAxMDBweDtcclxuICBtaW4taGVpZ2h0OiAxMDBweDtcclxuICBtYXgtd2lkdGg6IDE4MHB4O1xyXG4gIG1heC1oZWlnaHQ6IDE4MHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xyXG4gIG1hcmdpbi1ib3R0b206IDEuNnZoO1xyXG4gIG1hcmdpbi10b3A6IDJ2aFxyXG59XHJcblxyXG5cclxuIiwiLyogQ29kZWQgd2l0aCBsb3ZlIGJ5IE11dGl1bGxhaCBTYW1pbSAqL1xuYm9keSxcbmh0bWwge1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuaDEsIC5oMSB7XG4gIHotaW5kZXg6IDE7XG4gIGZvbnQtc2l6ZTogMnJlbTtcbiAgZm9udC13ZWlnaHQ6IDEwMDtcbiAgY29sb3I6ICMyZDJkMmQgIWltcG9ydGFudDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXJnaW4tYm90dG9tOiAycmVtO1xufVxuXG5oMiwgLmgyIHtcbiAgZm9udC1zaXplOiAzcmVtO1xuICBjb2xvcjogIzJkMmQyZDtcbiAgbWFyZ2luLWJvdHRvbTogMS41cmVtO1xufVxuXG4udXNlcl9jYXJkLnVzZXJfY2FyZF9sb2dpbmJveF9iZyB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXgtd2lkdGg6IDUyMHB4O1xuICBwYWRkaW5nLXRvcDogMS41cmVtO1xuICBwYWRkaW5nLWJvdHRvbTogMS41cmVtO1xuICBwYWRkaW5nLWxlZnQ6IDUlO1xuICBwYWRkaW5nLXJpZ2h0OiA1JTtcbiAgbWFyZ2luLWJvdHRvbTogMS41cmVtO1xuICBtYXJnaW4tdG9wOiBhdXRvO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxuXG4uZm9ybV9jb250YWluZXIge1xuICB3aWR0aDogMTAwJTtcbn1cblxuLmZvcm1fY29udGFpbmVyIGZvcm0ge1xuICB3aWR0aDogMTAwJTtcbn1cblxuLmxvZ2luX2J0biB7XG4gIHdpZHRoOiA3NSU7XG4gIG1heC13aWR0aDogMjMwcHg7XG4gIG1pbi13aWR0aDogMTYwcHg7XG4gIGJhY2tncm91bmQ6ICMyZDJkMmQgIWltcG9ydGFudDtcbiAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxLjJyZW07XG4gIGJvcmRlci1yYWRpdXM6IDAgIWltcG9ydGFudDtcbn1cblxuLmxvZ2luX2J0bjpmb2N1cyB7XG4gIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbiAgb3V0bGluZTogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5sb2dpbl9jb250YWluZXIge1xuICBtYXJnaW4tdG9wOiAycmVtO1xuICBwYWRkaW5nOiAwO1xufVxuXG4uaW5wdXQtZ3JvdXAtdGV4dCB7XG4gIGJhY2tncm91bmQ6ICNjNmM2YzYgIWltcG9ydGFudDtcbiAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gIGJvcmRlcjogMCAhaW1wb3J0YW50O1xuICBmb250LXNpemU6IDEuMnJlbTtcbn1cblxuLmlucHV0X3VzZXIsXG4uaW5wdXRfcGFzczpmb2N1cyB7XG4gIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbiAgb3V0bGluZTogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5jdXN0b20tY2hlY2tib3ggLmN1c3RvbS1jb250cm9sLWlucHV0OmNoZWNrZWQgfiAuY3VzdG9tLWNvbnRyb2wtbGFiZWw6OmJlZm9yZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNjMDM5MmIgIWltcG9ydGFudDtcbn1cblxuLmZvcm1fY29udGFpbnRlciAuZm9ybS1jb250cm9sLFxuLmZvcm0tY29udHJvbCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxLjJyZW07XG4gIGNvbG9yOiAjMmQyZDJkO1xufVxuXG4vKiBDaGFuZ2UgQXV0b2NvbXBsZXRlIHN0eWxlcyBpbiBDaHJvbWUqL1xuaW5wdXQ6LXdlYmtpdC1hdXRvZmlsbCxcbmlucHV0Oi13ZWJraXQtYXV0b2ZpbGw6aG92ZXIsXG5pbnB1dDotd2Via2l0LWF1dG9maWxsOmZvY3VzLFxudGV4dGFyZWE6LXdlYmtpdC1hdXRvZmlsbCxcbnRleHRhcmVhOi13ZWJraXQtYXV0b2ZpbGw6aG92ZXIsXG50ZXh0YXJlYTotd2Via2l0LWF1dG9maWxsOmZvY3VzLFxuc2VsZWN0Oi13ZWJraXQtYXV0b2ZpbGwsXG5zZWxlY3Q6LXdlYmtpdC1hdXRvZmlsbDpob3ZlcixcbnNlbGVjdDotd2Via2l0LWF1dG9maWxsOmZvY3VzIHtcbiAgYm9yZGVyOiBub25lO1xuICBjb2xvcjogIzJkMmQyZCAhaW1wb3J0YW50O1xuICAtd2Via2l0LXRleHQtZmlsbC1jb2xvcjogIzJkMmQyZDtcbiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lO1xuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDUwMDBzIGVhc2UtaW4tb3V0IDBzO1xuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDUwMDBzIGVhc2UtaW4tb3V0IDBzO1xuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDUwMDBzIGVhc2UtaW4tb3V0IDBzO1xuICBmb250LWZhbWlseTogXCJMYXRvXCIgIWltcG9ydGFudDtcbiAgZm9udC13ZWlnaHQ6IDMwMCAhaW1wb3J0YW50O1xuICBmb250LXN0eWxlOiBub3JtYWwgIWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxLjNyZW0gIWltcG9ydGFudDtcbn1cblxuaW5wdXQ6LXdlYmtpdC1hdXRvZmlsbDo6Zmlyc3QtbGluZSB7XG4gIGZvbnQtZmFtaWx5OiBcIkxhdG9cIjtcbiAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xuICBmb250LXNpemU6IDEuM3JlbTtcbiAgY29sb3I6ICMyZDJkMmQgIWltcG9ydGFudDtcbn1cblxuLmZvcm0tY29udHJvbC5uZy1pbnZhbGlkIHtcbiAgYm9yZGVyLXJpZ2h0OiAwLjRyZW0gc29saWQgI2Y3YTlhOTtcbn1cblxuLmZvcm0tY29udHJvbC5uZy12YWxpZCB7XG4gIGJvcmRlci1yaWdodDogMC40cmVtIHNvbGlkICNhZGZhYWQ7XG59XG5cbi5icmFuZC1jaXJjbGUtY29udGFpbmVyIHtcbiAgd2lkdGg6IDEwMCU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLXRvcDogMTBweDtcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xufVxuXG4uYnJhbmQtY2lyY2xlLWdyZXkge1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICB3aWR0aDogMTh2aDtcbiAgaGVpZ2h0OiAxOHZoO1xuICBtaW4td2lkdGg6IDEwMHB4O1xuICBtaW4taGVpZ2h0OiAxMDBweDtcbiAgbWF4LXdpZHRoOiAxODBweDtcbiAgbWF4LWhlaWdodDogMTgwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcbiAgbWFyZ2luLWJvdHRvbTogMS42dmg7XG4gIG1hcmdpbi10b3A6IDJ2aDtcbn0iXX0= */";
    /***/
  },

  /***/
  "./src/app/pages/auth/auth.component.ts":
  /*!**********************************************!*\
    !*** ./src/app/pages/auth/auth.component.ts ***!
    \**********************************************/

  /*! exports provided: AuthComponent */

  /***/
  function srcAppPagesAuthAuthComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "AuthComponent", function () {
      return AuthComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _auth_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ./auth.service */
    "./src/app/pages/auth/auth.service.ts");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/fesm2015/router.js");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _shared_services_connection_service_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../../shared/services/connection-service.service */
    "./src/app/shared/services/connection-service.service.ts");

    var AuthComponent = /*#__PURE__*/function () {
      function AuthComponent(authService, router, connection, baseData) {
        _classCallCheck(this, AuthComponent);

        this.authService = authService;
        this.router = router;
        this.connection = connection;
        this.baseData = baseData;
        this.isLoginMode = true;
        this.isLoading = false;
        this.error = null;
        this.hasConnection = false;
        this.hasServerConnection = false;
        this.form = {
          email: null,
          password: null
        };
      }

      _createClass(AuthComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {
          var _this4 = this;

          this.authService.logout();
          this.hasConnection = this.connection.hasServerAccess;
          this.hasServerConnection = this.connection.hasServerAccess;
          this.connectionSubscription = this.connection.monitor().subscribe(function (conn) {
            _this4.hasConnection = conn.hasNetworkConnection;
            _this4.hasServerConnection = conn.hasServerAccess;
          });
        }
      }, {
        key: "ngOnDestroy",
        value: function ngOnDestroy() {
          this.connectionSubscription.unsubscribe();
        }
      }, {
        key: "onLoginSubmit",
        value: function onLoginSubmit() {
          var _this5 = this;

          var auth;
          var email = this.form.email;
          var password = this.form.password;
          this.isLoading = true;
          auth = this.authService.login(email, password);
          auth.then(function (resData) {
            console.log(resData);
            _this5.isLoading = false;

            _this5.router.navigate(['/select-inventory']);

            _this5.form.email = '';
            _this5.form.password = '';
          });
          auth["catch"](function (errorMessage) {
            console.error('AuthComponent.onLoginSubmit() #73', errorMessage);
            _this5.error = errorMessage;
            _this5.isLoading = false;
          });
        }
      }]);

      return AuthComponent;
    }();

    AuthComponent.ctorParameters = function () {
      return [{
        type: _auth_service__WEBPACK_IMPORTED_MODULE_2__["AuthService"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]
      }, {
        type: _shared_services_connection_service_service__WEBPACK_IMPORTED_MODULE_5__["ConnectionService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_4__["BasedataService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], AuthComponent.prototype, "username", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], AuthComponent.prototype, "password", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], AuthComponent.prototype, "onlineStatusMessage", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], AuthComponent.prototype, "onlineStatus", void 0);
    AuthComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-auth',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./auth.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/auth/auth.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./auth.component.scss */
      "./src/app/pages/auth/auth.component.scss"))["default"]]
    })], AuthComponent);
    /***/
  },

  /***/
  "./src/app/pages/auth/auth.service.ts":
  /*!********************************************!*\
    !*** ./src/app/pages/auth/auth.service.ts ***!
    \********************************************/

  /*! exports provided: AuthService */

  /***/
  function srcAppPagesAuthAuthServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "AuthService", function () {
      return AuthService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/common/http */
    "./node_modules/@angular/common/fesm2015/http.js");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/fesm2015/router.js");
    /* harmony import */


    var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! rxjs/operators */
    "./node_modules/rxjs/_esm2015/operators/index.js");
    /* harmony import */


    var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! rxjs */
    "./node_modules/rxjs/_esm2015/index.js");
    /* harmony import */


    var crypto_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! crypto-js */
    "./node_modules/crypto-js/index.js");
    /* harmony import */


    var crypto_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(crypto_js__WEBPACK_IMPORTED_MODULE_6__);
    /* harmony import */


    var _user_model__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ./user.model */
    "./src/app/pages/auth/user.model.ts");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! ../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _shared_services_connection_service_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! ../../shared/services/connection-service.service */
    "./src/app/shared/services/connection-service.service.ts");
    /* harmony import */


    var _shared_services_api_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
    /*! ../../shared/services/api.service */
    "./src/app/shared/services/api.service.ts");
    /* harmony import */


    var _shared_services_user_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
    /*! ../../shared/services/user.service */
    "./src/app/shared/services/user.service.ts");

    var AuthService = /*#__PURE__*/function () {
      function AuthService( // public jwtHelper: JwtHelperService,
      http, router, connection, baseData, userService, apiService) {
        _classCallCheck(this, AuthService);

        this.http = http;
        this.router = router;
        this.connection = connection;
        this.baseData = baseData;
        this.userService = userService;
        this.apiService = apiService;
        this.user = null;
        this.authPath = '/auth/login';
        this.pwSalt = 'Inventory';
      }

      _createClass(AuthService, [{
        key: "logout",
        value: function logout() {
          this.baseData.setCurrentUser(null);

          if (this.user) {
            this.user.isLoggedIn = false;
          }

          this.setUserData(this.user);
        }
      }, {
        key: "login",
        value: function login(email, password) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {
            var _this6 = this;

            var loginUrl, pwHash, hasNetwork, authenticatedUser, err, expiresIn;
            return regeneratorRuntime.wrap(function _callee3$(_context3) {
              while (1) {
                switch (_context3.prev = _context3.next) {
                  case 0:
                    loginUrl = this.apiService.getUrlByPath(this.authPath);
                    pwHash = this.getEncryptedPassword(password);
                    hasNetwork = this.connection.hasNetworkConnection;

                    if (this.connection.hasNetworkConnection) {
                      _context3.next = 19;
                      break;
                    }

                    _context3.next = 6;
                    return this.getUserByAuth(email, pwHash, true);

                  case 6:
                    authenticatedUser = _context3.sent;
                    err = 'Es besteht aktuell keine Serververbindung! ';

                    if (authenticatedUser) {
                      _context3.next = 13;
                      break;
                    }

                    console.error('AuthService.login offline: failed #65', {
                      email: email,
                      pwHash: pwHash,
                      hasNetwork: hasNetwork
                    });
                    err += 'Email und Passwort stimmen nicht mit der letzten Live-Anmeldung überein!' + '<br>';
                    _context3.next = 18;
                    break;

                  case 13:
                    console.log('AuthService.login offline: successful #66', authenticatedUser.email);
                    expiresIn = 1000 * 60 * 60;

                    if (authenticatedUser.expirationDate && authenticatedUser.expirationDate.getTime() > Date.now() + expiresIn) {
                      expiresIn = authenticatedUser.expirationDate.getTime() - Date.now();
                    }

                    this.handleAuthentication(email, authenticatedUser.id, authenticatedUser.token, expiresIn, +this.getClientDeviceId(), pwHash);
                    return _context3.abrupt("return", new rxjs__WEBPACK_IMPORTED_MODULE_5__["Observable"](function (observer) {
                      observer.next(true);
                      observer.complete();
                    }));

                  case 18:
                    throw err;

                  case 19:
                    return _context3.abrupt("return", this.http.post(loginUrl, {
                      email: email,
                      password: password,
                      returnSecureToken: true,
                      clientDeviceId: this.getClientDeviceId()
                    }).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(function (resData) {
                      console.log('AuthService.login', {
                        resData: resData
                      });

                      _this6.userService.put({
                        id: resData.auth_identifier,
                        name: email,
                        email: email,
                        password: pwHash,
                        remember_token: resData.access_token,
                        created_at: new Date()
                      });

                      _this6.handleAuthentication(email, resData.auth_identifier, resData.access_token, +resData.expires_in, +resData.clientDeviceId, pwHash);
                    })).toPromise());

                  case 20:
                  case "end":
                    return _context3.stop();
                }
              }
            }, _callee3, this);
          }));
        }
      }, {
        key: "handleAuthentication",
        value: function handleAuthentication(email, userId, token, expiresIn, clientDeviceId, pwHash) {
          var expirationDate = new Date(new Date().getTime() + expiresIn * 1000);
          this.user = new _user_model__WEBPACK_IMPORTED_MODULE_7__["User"](email, userId, token, expirationDate, pwHash);
          this.user.isLoggedIn = true;
          var previousUser = this.baseData.getCurrentUser();

          if (previousUser) {
            this.baseData.setPreviousUser(previousUser);
          }

          this.setUserData(this.user);
          this.setClientDeviceId(clientDeviceId);
          this.connection.setAuthState(true);
          this.connection.refresh();
        }
      }, {
        key: "setUserData",
        value: function setUserData(userData) {
          this.baseData.setCurrentUser(this.user);
          localStorage.setItem('userData', JSON.stringify(userData));
        }
      }, {
        key: "getUserByAuth",
        value: function getUserByAuth(email, password, pwIsEncrypted) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {
            var encPassword, userData, minExpirationTime, expireDate, lastUser;
            return regeneratorRuntime.wrap(function _callee4$(_context4) {
              while (1) {
                switch (_context4.prev = _context4.next) {
                  case 0:
                    encPassword = pwIsEncrypted ? password : this.getEncryptedPassword(password);
                    _context4.next = 3;
                    return this.userService.getByAuth(email, encPassword);

                  case 3:
                    userData = _context4.sent;
                    console.log('AuthServer.getUserByAuth(', email, password, ') #161 encPassword:', encPassword, 'userData:', userData);

                    if (!userData) {
                      _context4.next = 9;
                      break;
                    }

                    minExpirationTime = 1000 * 60 * 60 * 2;
                    expireDate = new Date(Date.now() + minExpirationTime);
                    return _context4.abrupt("return", new _user_model__WEBPACK_IMPORTED_MODULE_7__["User"](email, userData.id, userData.remember_token, expireDate, encPassword));

                  case 9:
                    lastUser = this.getUser();

                    if (!lastUser) {
                      lastUser = this.getPreviousUser();
                    }

                    if (!(lastUser.email === email && lastUser.pwHash === encPassword)) {
                      _context4.next = 13;
                      break;
                    }

                    return _context4.abrupt("return", lastUser);

                  case 13:
                    return _context4.abrupt("return", null);

                  case 14:
                  case "end":
                    return _context4.stop();
                }
              }
            }, _callee4, this);
          }));
        }
      }, {
        key: "getUserData",
        value: function getUserData() {
          return this.getUserDataOfLocalStorage('userData');
        }
      }, {
        key: "getPreviousUser",
        value: function getPreviousUser() {
          return this.getUserDataOfLocalStorage('previousUser');
        }
      }, {
        key: "getUserDataOfLocalStorage",
        value: function getUserDataOfLocalStorage(itemName) {
          var userDataString = localStorage.getItem(itemName);

          if (userDataString) {
            var userData = JSON.parse(userDataString);

            if (userData && 'uTokenExpirationDate' in userData) {
              userData.uTokenExpirationDate = new Date(userData.uTokenExpirationDate);
            }

            if (userData && 'email' in userData && 'id' in userData && 'uToken' in userData && 'uTokenExpirationDate' in userData && 'pwHash' in userData) {
              return new _user_model__WEBPACK_IMPORTED_MODULE_7__["User"](userData.email, userData.id, userData.uToken, userData.uTokenExpirationDate, userData.pwHash);
            }
          }

          return null;
        }
      }, {
        key: "setClientDeviceId",
        value: function setClientDeviceId(devid) {
          this.baseData.setCurrentDevice(devid);
        }
      }, {
        key: "getClientDeviceId",
        value: function getClientDeviceId() {
          return this.baseData.getCurrentDeviceId() || 0;
        }
      }, {
        key: "getUser",
        value: function getUser() {
          return this.getUserData();
        }
      }, {
        key: "getUserToken",
        value: function getUserToken() {
          if (this.user instanceof _user_model__WEBPACK_IMPORTED_MODULE_7__["User"]) {
            return this.user.token;
          }

          return '';
        }
      }, {
        key: "isLoggedIn",
        value: function isLoggedIn() {
          var user = this.getUser();
          var isLoggedIn = user && user instanceof _user_model__WEBPACK_IMPORTED_MODULE_7__["User"] && user.hasValidUiSession;

          if (!isLoggedIn) {
            console.log('app.pages.auth.auth.service.ts #187 user is not logged in: ', user);
          }

          return isLoggedIn;
        }
      }, {
        key: "isAuthenticated",
        value: function isAuthenticated() {
          if (!this.user || !(this.user instanceof _user_model__WEBPACK_IMPORTED_MODULE_7__["User"]) || !this.user.token) {
            return false;
          }

          var token = this.user.token;
          return this.user.expirationDate.getTime() <= Date.now(); // Check whether the token is expired and return
          // true or false
          // return !this.jwtHelper.isTokenExpired(token);
        }
      }, {
        key: "handleError",
        value: function handleError(errorRes) {
          var errorMessage = 'An unknown error occurred!';

          if (!errorRes.error || !errorRes.error.error) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["throwError"])(errorMessage);
          }

          switch (errorRes.error.error.message) {
            case 'EMAIL_EXISTS':
              errorMessage = 'This email exists already';
              break;

            case 'EMAIL_NOT_FOUND':
              errorMessage = 'This email does not exist.';
              break;

            case 'INVALID_PASSWORD':
              errorMessage = 'This password is not correct.';
              break;
          }

          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["throwError"])(errorMessage);
        }
      }, {
        key: "getEncryptedPassword",
        value: function getEncryptedPassword(password) {
          var pwHash = crypto_js__WEBPACK_IMPORTED_MODULE_6__["SHA3"](this.pwSalt + password);
          return crypto_js__WEBPACK_IMPORTED_MODULE_6__["enc"].Base64.stringify(pwHash);
        }
      }]);

      return AuthService;
    }();

    AuthService.ctorParameters = function () {
      return [{
        type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]
      }, {
        type: _shared_services_connection_service_service__WEBPACK_IMPORTED_MODULE_9__["ConnectionService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_8__["BasedataService"]
      }, {
        type: _shared_services_user_service__WEBPACK_IMPORTED_MODULE_11__["UserService"]
      }, {
        type: _shared_services_api_service__WEBPACK_IMPORTED_MODULE_10__["ApiService"]
      }];
    };

    AuthService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], AuthService);
    /***/
  },

  /***/
  "./src/app/pages/auth/user.model.ts":
  /*!******************************************!*\
    !*** ./src/app/pages/auth/user.model.ts ***!
    \******************************************/

  /*! exports provided: User */

  /***/
  function srcAppPagesAuthUserModelTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "User", function () {
      return User;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");

    var User = /*#__PURE__*/function () {
      function User(email, id, uToken, uTokenExpirationDate, pwHash) {
        _classCallCheck(this, User);

        this.email = email;
        this.id = id;
        this.uToken = uToken;
        this.uTokenExpirationDate = uTokenExpirationDate;
        this.pwHash = pwHash;
        var dateNow = new Date();
        var dateExp = uTokenExpirationDate instanceof Date ? uTokenExpirationDate : new Date(uTokenExpirationDate);
        this.isLoggedIn = uTokenExpirationDate !== null && dateNow < dateExp;

        if (typeof uTokenExpirationDate === 'string') {
          this.uTokenExpirationDate = new Date(uTokenExpirationDate);
        }
      }

      _createClass(User, [{
        key: "token",
        get: function get() {
          if (!this.uTokenExpirationDate || new Date() > this.uTokenExpirationDate) {
            return null;
          }

          return this.uToken;
        }
      }, {
        key: "hasValidUiSession",
        get: function get() {
          var hasValidUiSession = {
            isLoggedIn: this.isLoggedIn,
            uTokenExpirationDate: this.uTokenExpirationDate,
            Date: new Date(),
            result: false
          };

          if (this.isLoggedIn && new Date() < this.uTokenExpirationDate) {
            hasValidUiSession.result = true; // console.log('app.pages.auth.user.model.ts #34 ', hasValidUiSession);

            return true;
          }

          console.error('app.pages.auth.user.model.ts #39 use has no valid session ', hasValidUiSession);
          return false;
        }
      }, {
        key: "expirationDate",
        get: function get() {
          if (typeof this.uTokenExpirationDate === 'string') {
            this.uTokenExpirationDate = new Date(this.uTokenExpirationDate);
          }

          return this.uTokenExpirationDate;
        }
      }]);

      return User;
    }();
    /***/

  },

  /***/
  "./src/app/pages/dbsync/dbsync.component.scss":
  /*!****************************************************!*\
    !*** ./src/app/pages/dbsync/dbsync.component.scss ***!
    \****************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesDbsyncDbsyncComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2Ric3luYy9kYnN5bmMuY29tcG9uZW50LnNjc3MifQ== */";
    /***/
  },

  /***/
  "./src/app/pages/dbsync/dbsync.component.ts":
  /*!**************************************************!*\
    !*** ./src/app/pages/dbsync/dbsync.component.ts ***!
    \**************************************************/

  /*! exports provided: DbsyncComponent */

  /***/
  function srcAppPagesDbsyncDbsyncComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "DbsyncComponent", function () {
      return DbsyncComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _shared_services_dbsync_client_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../shared/services/dbsync-client.service */
    "./src/app/shared/services/dbsync-client.service.ts");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _shared_services_data_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../../shared/services/data.service */
    "./src/app/shared/services/data.service.ts");
    /* harmony import */


    var _shared_services_connection_service_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! ../../shared/services/connection-service.service */
    "./src/app/shared/services/connection-service.service.ts");
    /* harmony import */


    var _shared_services_dbsync_log_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ../../shared/services/dbsync-log.service */
    "./src/app/shared/services/dbsync-log.service.ts");
    /* harmony import */


    var _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! ../../shared/services/dexie.service */
    "./src/app/shared/services/dexie.service.ts");

    var DbsyncComponent = /*#__PURE__*/function () {
      function DbsyncComponent(dbsyncClient, baseData, networkService, dataService, dbsyncLogService, dexie) {
        _classCallCheck(this, DbsyncComponent);

        this.dbsyncClient = dbsyncClient;
        this.baseData = baseData;
        this.networkService = networkService;
        this.dataService = dataService;
        this.dbsyncLogService = dbsyncLogService;
        this.dexie = dexie;
        this.faSync = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSync"];
        this.faSyncAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSyncAlt"];
        this.syncInProcess = true;
        this.syncTables = [];
        this.lastServerSyncErrors = [];
        this.subscribedSyncJobProcesses = [];
        this.syncTotal = {
          jobid: 0,
          revisionId: 0,
          total: 0,
          executed: 0,
          percent: 0,
          puts: 0,
          modified: 0,
          deleted: 0,
          tables: [],
          chunks: 0,
          start: null
        };
      }

      _createClass(DbsyncComponent, [{
        key: "ngOnDestroy",
        value: function ngOnDestroy() {
          this.subscriptionSyncTotal.unsubscribe();
          this.subscriptionSyncTable.unsubscribe();
          this.subscriptionSyncMsg.unsubscribe();
          this.subscriptionSyncErr.unsubscribe();
          this.subscriptionNetworkService.unsubscribe();
          this.subscriptionAutoSyncChange.unsubscribe();
          this.subscriptionProcessStarted.unsubscribe();
          this.subscriptionProcessFinished.unsubscribe();
          this.subscriptionLastSyncErr.unsubscribe();
          this.removeAllSyncJobStatusSubscriptions();
        }
      }, {
        key: "ngOnInit",
        value: function ngOnInit() {
          var _this7 = this;

          this.jobid = this.baseData.getCurrentJobid();
          this.refreshStatusInfos();
          this.loadServerSyncErrors(this.jobid);
          this.subscriptionLastSyncErr = this.dbsyncClient.syncErrorChange.subscribe(function (result) {
            _this7.lastServerSyncErrors = [];

            if (result.count > 0) {
              _this7.loadServerSyncErrors(result.jobid);
            }
          });
          this.subscriptionSyncTable = this.dbsyncLogService.tableSyncProgress.subscribe(function (data) {
            var tb = data.table;
            var rv = data.revisionId;
            var num = data.executed;

            var syncTbl = _this7.syncTables.find(function (t) {
              return t.table === data.table;
            });

            if (!syncTbl) {
              syncTbl = Object.assign({}, data);

              _this7.syncTables.push(syncTbl);
            } else {
              syncTbl.executed = data.executed;
              syncTbl.puts = data.puts;
              syncTbl.modified = data.modified;
              syncTbl.deleted = data.deleted;
            }
          });
          this.subscriptionSyncTotal = this.dbsyncLogService.totalSyncProgress.subscribe(function (data) {
            _this7.refreshStatusInfos();

            if (data.executed === 0) {
              while (_this7.syncTables.length) {
                _this7.syncTables.pop();
              }
            }

            for (var _i = 0, _Object$keys = Object.keys(data); _i < _Object$keys.length; _i++) {
              var k = _Object$keys[_i];
              _this7.syncTotal[k] = data[k];
            }
          });
          this.subscriptionSyncMsg = this.dbsyncLogService.syncMessage.subscribe(function (data) {
            _this7.refreshStatusInfos();
          });
          this.subscriptionSyncErr = this.dbsyncLogService.syncError.subscribe(function (data) {
            _this7.refreshStatusInfos();
          });
          this.subscriptionNetworkService = this.networkService.monitor().subscribe(function () {
            if (_this7.networkService.hasServerAccess) {
              _this7.refreshStatusInfos();
            }
          });
          this.subscriptionAutoSyncChange = this.dbsyncClient.autoSyncChange.subscribe(function (isRunning) {
            _this7.syncAutoRun = isRunning;
          });
          this.subscriptionProcessStarted = this.dbsyncClient.processStarted.subscribe(function (proc) {
            console.log('Gestarted: Synchronisierung für Inventur mit JobId ' + proc.jobid, {
              proc: proc
            });

            if (proc.jobid === _this7.syncJobid) {
              _this7.syncInProcess = !proc.finished;
            }
          });
          this.subscriptionProcessFinished = this.dbsyncClient.processFinished.subscribe(function (proc) {
            console.log('Beendet: Synchronisierung für Inventur mit JobId ' + proc.jobid, {
              proc: proc
            });

            if (proc.jobid === _this7.syncJobid) {
              _this7.syncInProcess = !proc.finished;
            }
          });
        }
      }, {
        key: "loadServerSyncErrors",
        value: function loadServerSyncErrors(jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {
            var _this8 = this;

            return regeneratorRuntime.wrap(function _callee5$(_context5) {
              while (1) {
                switch (_context5.prev = _context5.next) {
                  case 0:
                    return _context5.abrupt("return", this.dexie.serverSyncErrors.where({
                      jobid: jobid
                    }).toArray().then(function (errors) {
                      errors.find(function (itm) {
                        if (itm.timestamp instanceof Date) {
                          _this8.lastServerSyncDate = itm.timestamp;
                          return true;
                        }

                        return false;
                      });
                      _this8.lastServerSyncJobid = jobid;
                      _this8.lastServerSyncErrors = errors;
                      return errors.length;
                    }));

                  case 1:
                  case "end":
                    return _context5.stop();
                }
              }
            }, _callee5, this);
          }));
        }
      }, {
        key: "refreshStatusInfos",
        value: function refreshStatusInfos() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {
            var _this9 = this;

            return regeneratorRuntime.wrap(function _callee6$(_context6) {
              while (1) {
                switch (_context6.prev = _context6.next) {
                  case 0:
                    this.jobid = this.baseData.getCurrentJobid();
                    this.syncJobid = this.jobid;
                    this.currInventur = this.baseData.getCurrentInventur();
                    this.deviceId = this.baseData.getCurrentDeviceId();
                    this.currUser = this.baseData.getCurrentUser();
                    this.syncUid = this.baseData.getCurrentUid();
                    this.syncDevid = this.baseData.getCurrentDeviceId();
                    this.currProcess = this.dbsyncClient.getProcessByJobId(this.jobid);
                    console.log({
                      method: 'refreshStatusInfos',
                      syncUid: this.syncUid,
                      syncUser: this.baseData.getCurrentUser(),
                      syncDevid: this.syncDevid,
                      syncStatus: this.syncStatus,
                      syncFinished: this.syncFinished
                    });
                    this.checkForUnsyncedChanges();

                    if (this.currProcess) {
                      this.syncInProcess = !this.currProcess.finished;
                      this.syncJobid = this.currProcess.jobid;
                      this.syncStatus = this.currProcess.getStatus();
                      this.syncStatusName = this.currProcess.getStatusName();
                      this.syncErrorMsg = this.currProcess.errorMsg;
                      this.syncFinished = this.currProcess.finished;
                      this.syncDuration = this.currProcess.duration;
                      this.syncDurFormatted = this.currProcess.durationFormatted;
                      console.log('Synchronisierung läuft ...', {
                        proc: this.currProcess
                      });
                    } else {
                      console.log('Synchronisierung läuft nicht ...');
                      this.syncStatus = _shared_services_dbsync_client_service__WEBPACK_IMPORTED_MODULE_2__["SyncJobStatus"].Init;
                      this.syncFinished = true;
                      this.syncInProcess = false;
                    }

                    console.log('DbsyncComponent.refreshStatusInfos() #248 call askServerForChanges', new Date().toString());
                    this.dbsyncClient.getLastServerChanges(this.jobid, 15 * 1000).then(function (infos) {
                      console.log('DbsyncComponent.refreshStatusInfos() #250 callback of async askServerForChange for jobid ' + _this9.jobid, {
                        infos: infos
                      });

                      if (infos.success) {
                        _this9.serverRevisionId = infos.MaxRevisionId;
                        _this9.numServerChanges = infos.NumChanges;
                      }
                    })["catch"](function (reason) {
                      console.error('DbsyncComponent.refreshStatusInfos() #257', {
                        reason: reason
                      });
                    });
                    this.dbsyncClient.getCurrentClientRevId().then(function (revid) {
                      _this9.clientRevisionId = revid;
                    });
                    this.syncAutoRun = this.dbsyncClient.autoSyncIsRunning();

                  case 15:
                  case "end":
                    return _context6.stop();
                }
              }
            }, _callee6, this);
          }));
        }
      }, {
        key: "checkForUnsyncedChanges",
        value: function checkForUnsyncedChanges() {
          var _this10 = this;

          this.dbsyncClient.numUnsyncedChangeLogsByJobId(this.jobid).then(function (num) {
            _this10.numUnsyncedChanges = num;
          });
        }
      }, {
        key: "syncAutoStop",
        value: function syncAutoStop() {
          this.dbsyncClient.autoSyncStop();
        }
      }, {
        key: "syncAutoStart",
        value: function syncAutoStart() {
          this.dbsyncClient.autoSyncStart(true);
        }
      }, {
        key: "syncCurrJob",
        value: function syncCurrJob() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {
            return regeneratorRuntime.wrap(function _callee7$(_context7) {
              while (1) {
                switch (_context7.prev = _context7.next) {
                  case 0:
                    if (typeof this.syncJobid === 'number') {
                      console.log('called syncCurrJob, call syncStart(' + this.syncJobid + ')');
                      this.syncStart(this.syncJobid);
                    } else {
                      console.error('syncJobid is not defined');
                    }

                  case 1:
                  case "end":
                    return _context7.stop();
                }
              }
            }, _callee7, this);
          }));
        }
      }, {
        key: "resetCurrJob",
        value: function resetCurrJob() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee8() {
            var _this11 = this;

            return regeneratorRuntime.wrap(function _callee8$(_context8) {
              while (1) {
                switch (_context8.prev = _context8.next) {
                  case 0:
                    console.log('#287 dbsync called resetCurrJob() this.syncJobid: ', this.syncJobid);
                    this.syncInProcess = true;
                    this.dataService.loadInventurDataByInventurId(this.syncJobid, true)["finally"](function () {
                      _this11.syncInProcess = false;
                    });

                  case 3:
                  case "end":
                    return _context8.stop();
                }
              }
            }, _callee8, this);
          }));
        }
      }, {
        key: "syncStart",
        value: function syncStart(jobid) {
          var _this12 = this;

          console.log('called syncStart, call dbsyncClient.syncJob(' + jobid + ')');
          var sync = this.dbsyncClient.syncJob(jobid);
          sync.then(function (proc) {
            if (_this12.isSyncJobStatusSubscribed(proc)) {
              return;
            }

            var syncJobStatusChangeSubscription = proc.statusChanged.subscribe(function (status) {
              _this12.syncJobid = proc.jobid;
              _this12.syncStatus = proc.getStatus();
              _this12.syncStatusName = proc.getStatusName();
              _this12.syncErrorMsg = _this12.currProcess && 'errorMsg' in _this12.currProcess ? _this12.currProcess.errorMsg : '';
              _this12.syncFinished = _this12.currProcess ? _this12.currProcess.finished : null;
              _this12.syncDuration = _this12.currProcess ? _this12.currProcess.duration : null;
              _this12.syncDurFormatted = _this12.currProcess ? _this12.currProcess.durationFormatted : '';
              console.log('Process-Status has changed', {
                proc: proc
              });
              _this12.syncInProcess = !proc.finished;

              if (proc.finished) {
                console.log('#186 dbsync.component remove/unsubscribe finished SyncJob');

                _this12.removeSyncJobStatusSubscriptionBySub(syncJobStatusChangeSubscription);
              }
            });

            _this12.addSyncJobStatusSubscription(proc, syncJobStatusChangeSubscription);
          });
        }
      }, {
        key: "isSyncJobStatusSubscribed",
        value: function isSyncJobStatusSubscribed(proc) {
          var foundProc = this.subscribedSyncJobProcesses.find(function (p) {
            return p[0] === proc;
          });
          return !!foundProc;
        }
      }, {
        key: "addSyncJobStatusSubscription",
        value: function addSyncJobStatusSubscription(proc, sub) {
          console.log('#200 dbsync.component addSyncJobStatusSubscription');
          this.subscribedSyncJobProcesses.push([proc, sub]);
        }
      }, {
        key: "removeSyncJobStatusSubscriptionBySub",
        value: function removeSyncJobStatusSubscriptionBySub(sub) {
          console.log('#204 dbsync.component removeSyncJobStatusSubscriptionBySub');
          var foundProc = this.subscribedSyncJobProcesses.find(function (p) {
            return p[1] === sub;
          });

          if (foundProc) {
            console.log('#207 dbsync.component foundProc');
            foundProc[1].unsubscribe();
            this.subscribedSyncJobProcesses = this.subscribedSyncJobProcesses.filter(function (p) {
              return p !== foundProc;
            });
          }
        }
      }, {
        key: "removeSyncJobStatusSubscriptionByProc",
        value: function removeSyncJobStatusSubscriptionByProc(proc) {
          console.log('#214 dbsync.component removeSyncJobStatusSubscriptionByProc');
          var foundProc = this.subscribedSyncJobProcesses.find(function (p) {
            return p[0] === proc;
          });

          if (foundProc) {
            console.log('#217 dbsync.component foundProc');
            foundProc[1].unsubscribe();
            this.subscribedSyncJobProcesses = this.subscribedSyncJobProcesses.filter(function (p) {
              return p !== foundProc;
            });
          }
        }
      }, {
        key: "removeAllSyncJobStatusSubscriptions",
        value: function removeAllSyncJobStatusSubscriptions() {
          console.log('#224 dbsync.component removeSyncJobStatusSubscriptionByProc');
          this.subscribedSyncJobProcesses.forEach(function (proc) {
            proc[1].unsubscribe();
          });
          this.subscribedSyncJobProcesses.length = 0;
        }
      }]);

      return DbsyncComponent;
    }();

    DbsyncComponent.ctorParameters = function () {
      return [{
        type: _shared_services_dbsync_client_service__WEBPACK_IMPORTED_MODULE_2__["DBSyncClientService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_3__["BasedataService"]
      }, {
        type: _shared_services_connection_service_service__WEBPACK_IMPORTED_MODULE_6__["ConnectionService"]
      }, {
        type: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_5__["DataService"]
      }, {
        type: _shared_services_dbsync_log_service__WEBPACK_IMPORTED_MODULE_7__["DbsyncLogService"]
      }, {
        type: _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_8__["DexieService"]
      }];
    };

    DbsyncComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-dbsync',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./dbsync.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/dbsync/dbsync.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./dbsync.component.scss */
      "./src/app/pages/dbsync/dbsync.component.scss"))["default"]]
    })], DbsyncComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/data-services/artikel.service.ts":
  /*!********************************************************************!*\
    !*** ./src/app/pages/invent-form/data-services/artikel.service.ts ***!
    \********************************************************************/

  /*! exports provided: ArtikelService */

  /***/
  function srcAppPagesInventFormDataServicesArtikelServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ArtikelService", function () {
      return ArtikelService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../../shared/services/dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var _auth_auth_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../auth/auth.service */
    "./src/app/pages/auth/auth.service.ts");
    /* harmony import */


    var guid_typescript__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! guid-typescript */
    "./node_modules/guid-typescript/dist/guid.js");
    /* harmony import */


    var guid_typescript__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(guid_typescript__WEBPACK_IMPORTED_MODULE_4__);
    /* harmony import */


    var dexie__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! dexie */
    "./node_modules/dexie/dist/dexie.es.js");
    /* harmony import */


    var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! rxjs */
    "./node_modules/rxjs/_esm2015/index.js");
    /* harmony import */


    var _shared_services_data_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ../../../shared/services/data.service */
    "./src/app/shared/services/data.service.ts");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! ../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _hersteller_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! ./hersteller.service */
    "./src/app/pages/invent-form/data-services/hersteller.service.ts");

    var ArtikelService = /*#__PURE__*/function () {
      function ArtikelService(dexie, authService, dataService, baseData, herstellerService) {
        _classCallCheck(this, ArtikelService);

        this.dexie = dexie;
        this.authService = authService;
        this.dataService = dataService;
        this.baseData = baseData;
        this.herstellerService = herstellerService;
      }

      _createClass(ArtikelService, [{
        key: "artikelBezeichnungExistsGlobal",
        value: function artikelBezeichnungExistsGlobal(bezeichnung) {
          var jobid = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {
            var globalItems, gcuuids;
            return regeneratorRuntime.wrap(function _callee9$(_context9) {
              while (1) {
                switch (_context9.prev = _context9.next) {
                  case 0:
                    _context9.next = 2;
                    return this.dexie.objektKatalogGlobal.where('Bezeichnung').equalsIgnoreCase(bezeichnung).toArray();

                  case 2:
                    globalItems = _context9.sent;

                    if (!(jobid !== 0 && globalItems && globalItems.length > 0)) {
                      _context9.next = 8;
                      break;
                    }

                    gcuuids = globalItems.map(function (itm) {
                      return itm.uuid;
                    });
                    _context9.next = 7;
                    return this.dexie.objektKatalogMandant.where('gcuuid').anyOf(gcuuids).and(function (itm) {
                      return itm.for_jobid === jobid;
                    }).count();

                  case 7:
                    return _context9.abrupt("return", _context9.sent);

                  case 8:
                    return _context9.abrupt("return", globalItems.length);

                  case 9:
                  case "end":
                    return _context9.stop();
                }
              }
            }, _callee9, this);
          }));
        }
      }, {
        key: "___DEL__artikelExistsMandant",
        value: function ___DEL__artikelExistsMandant(mid, gcid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee10() {
            var numItems;
            return regeneratorRuntime.wrap(function _callee10$(_context10) {
              while (1) {
                switch (_context10.prev = _context10.next) {
                  case 0:
                    _context10.next = 2;
                    return this.dexie.objektKatalogMandant.where({
                      mid: mid,
                      gcid: gcid
                    }).count();

                  case 2:
                    numItems = _context10.sent;
                    return _context10.abrupt("return", 0 < numItems);

                  case 4:
                  case "end":
                    return _context10.stop();
                }
              }
            }, _callee10, this);
          }));
        }
      }, {
        key: "artikelGlobalByBezeichnung",
        value: function artikelGlobalByBezeichnung(bezeichnung) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee11() {
            var items;
            return regeneratorRuntime.wrap(function _callee11$(_context11) {
              while (1) {
                switch (_context11.prev = _context11.next) {
                  case 0:
                    _context11.next = 2;
                    return this.dexie.objektKatalogGlobal.where('Bezeichnung').equalsIgnoreCase(bezeichnung).toArray();

                  case 2:
                    items = _context11.sent;
                    return _context11.abrupt("return", items);

                  case 4:
                  case "end":
                    return _context11.stop();
                }
              }
            }, _callee11, this);
          }));
        }
      }, {
        key: "artikelMcuuidByGcuuids",
        value: function artikelMcuuidByGcuuids(mid, gcuuids) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee12() {
            var items;
            return regeneratorRuntime.wrap(function _callee12$(_context12) {
              while (1) {
                switch (_context12.prev = _context12.next) {
                  case 0:
                    if (typeof gcuuids === 'string') {
                      gcuuids = [gcuuids];
                    }

                    _context12.next = 3;
                    return this.dexie.objektKatalogMandant.where('gcuuid').anyOf(gcuuids).filter(function (itm) {
                      return itm.mid === mid;
                    }).toArray();

                  case 3:
                    items = _context12.sent;
                    return _context12.abrupt("return", items);

                  case 5:
                  case "end":
                    return _context12.stop();
                }
              }
            }, _callee12, this);
          }));
        }
      }, {
        key: "___DEL__getGcuuidByGcuuid",
        value: function ___DEL__getGcuuidByGcuuid(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee13() {
            return regeneratorRuntime.wrap(function _callee13$(_context13) {
              while (1) {
                switch (_context13.prev = _context13.next) {
                  case 0:
                    return _context13.abrupt("return", this.dexie.objektKatalogGlobal.get(uuid).then(function (itm) {
                      return itm.uuid;
                    }));

                  case 1:
                  case "end":
                    return _context13.stop();
                }
              }
            }, _callee13, this);
          }));
        }
      }, {
        key: "insertArtikelData",
        value: function insertArtikelData(daten) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee14() {
            var db, katalog, hersteller, uid, jobid, deviceid, uuid, log, exists, sameData, insertData, insertNewData, insertKey;
            return regeneratorRuntime.wrap(function _callee14$(_context14) {
              while (1) {
                switch (_context14.prev = _context14.next) {
                  case 0:
                    db = this.dexie;
                    katalog = db.objektKatalogGlobal;
                    hersteller = db.hersteller;
                    uid = this.authService.getUser().id;
                    jobid = this.baseData.getCurrentJobid();
                    deviceid = this.baseData.getCurrentDeviceId();
                    uuid = guid_typescript__WEBPACK_IMPORTED_MODULE_4__["Guid"].create().toString();
                    log = {
                      log: true
                    };

                    if (!daten.Hersteller) {
                      _context14.next = 12;
                      break;
                    }

                    console.log('ArtikelService insertArtikelDate() #153');
                    _context14.next = 12;
                    return this.herstellerService.getByNameOrCreate(daten.Hersteller).then(function (hstData) {
                      daten.hid = hstData.hid;
                      daten.huuid = hstData.uuid;
                    });

                  case 12:
                    _context14.next = 14;
                    return katalog.where({
                      Bezeichnung: daten.Bezeichnung,
                      huuid: daten.huuid
                    }).toArray();

                  case 14:
                    exists = _context14.sent;

                    if (!exists) {
                      _context14.next = 23;
                      break;
                    }

                    sameData = exists.filter(function (itm) {
                      for (var _i2 = 0, _arr = ['huuid', 'Gruppe', 'Kategorie', 'Typ', 'Farbe', 'Groesse']; _i2 < _arr.length; _i2++) {
                        var k = _arr[_i2];

                        if (itm[k] !== daten[k]) {
                          return false;
                        }
                      }

                      return true;
                    });

                    if (!(sameData.length > 0)) {
                      _context14.next = 22;
                      break;
                    }

                    console.log('ArtikelService insertArtikelData() #175');
                    return _context14.abrupt("return", sameData[0]);

                  case 22:
                    Object(rxjs__WEBPACK_IMPORTED_MODULE_6__["throwError"])({
                      name: 'DuplicateEntry',
                      message: 'Es existiert bereits ein Katalogeintrag mit gleicher Bezeichnung,' + ' der aufgrund abweichender Details nicht übernommen werden kann.\n' + ' Da Bezeichnungen unique sein müssen, ändern sie diese bitte ab oder übernehmen den anderen Eintrag!',
                      data: sameData
                    });

                  case 23:
                    insertData = {
                      uuid: uuid,
                      hash: null,
                      code: uuid,
                      hid: daten.hid,
                      huuid: daten.huuid,
                      Bezeichnung: daten.Bezeichnung,
                      Typ: daten.Typ,
                      Gruppe: daten.Gruppe,
                      Kategorie: daten.Kategorie,
                      Farbe: daten.Farbe,
                      Groesse: daten.Groesse,
                      created_at: new Date(),
                      modified_at: null,
                      created_uid: uid,
                      created_device_id: deviceid,
                      created_jobid: jobid,
                      lid: !('lid' in daten) ? null : daten.lid,
                      Produktnr: !('Produktnr' in daten) ? null : daten.Produktnr,
                      Bild: !('Bild' in daten) ? null : daten.Bild,
                      AnlagenNr: !('AnlagenNr' in daten) ? null : daten.AnlagenNr,
                      GeraetNr: !('GeraetNr' in daten) ? null : daten.GeraetNr,
                      FibuNr: !('FibuNr' in daten) ? null : daten.FibuNr,
                      Flaeche: !('Flaeche' in daten) ? null : daten.Flaeche,
                      Gewicht: !('Gewicht' in daten) ? null : daten.Gewicht,
                      Baujahr: !('Baujahr' in daten) ? null : daten.Baujahr,
                      Kst: !('Kst' in daten) ? null : daten.Kst,
                      log: true
                    };
                    insertNewData = Object.assign({}, insertData, log);
                    _context14.next = 27;
                    return katalog.add(Object.assign({}, insertData, log));

                  case 27:
                    insertKey = _context14.sent;

                    if (!insertKey) {
                      console.error('ArtikelService # 220 insertArtikelData(daten) empty result insertKey', {
                        insertKey: insertKey,
                        insertNewData: insertNewData
                      });
                      alert('#219 ArtikelService.insertArtikelData(daten) empty Result. See console.log');
                    }

                    console.log('ArtikelService insertArtikelData() #223');
                    return _context14.abrupt("return", katalog.get(insertKey));

                  case 31:
                  case "end":
                    return _context14.stop();
                }
              }
            }, _callee14, this);
          }));
        }
      }, {
        key: "insertArtikelRefByGcidGcuuid",
        value: function insertArtikelRefByGcidGcuuid(gcuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee15() {
            var db, artikelRef, jobid, mid, uid, uuid, devID, log, d, code, insertData;
            return regeneratorRuntime.wrap(function _callee15$(_context15) {
              while (1) {
                switch (_context15.prev = _context15.next) {
                  case 0:
                    db = this.dexie;
                    artikelRef = db.objektKatalogMandant;
                    jobid = this.baseData.getCurrentJobid();
                    mid = this.baseData.getCurrentMid();
                    uid = this.authService.getUser().id;
                    uuid = guid_typescript__WEBPACK_IMPORTED_MODULE_4__["Guid"].create().toString();
                    devID = this.baseData.getCurrentDeviceId();
                    log = {
                      log: true
                    };
                    d = new Date();
                    code = uuid;
                    insertData = Object.assign({
                      gcuuid: gcuuid
                    }, {
                      mid: mid,
                      code: code,
                      for_jobid: jobid,
                      created_at: new Date(),
                      created_uid: uid,
                      created_device_id: devID,
                      uuid: uuid
                    }, log);
                    return _context15.abrupt("return", artikelRef.add(insertData)["catch"](function (reason) {
                      console.error(reason, 'ArtikelService.insertArtikelRefByGcidGcuuid #263 artikelRef.add', {
                        insertData: insertData
                      });
                      return null;
                    }).then(function (mcuuid) {
                      return artikelRef.get(mcuuid);
                    }));

                  case 12:
                  case "end":
                    return _context15.stop();
                }
              }
            }, _callee15, this);
          }));
        }
      }, {
        key: "insertArtikelRef",
        value: function insertArtikelRef(daten) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee16() {
            var db, artikelRef, jobid, uid, uuid, defaultMid, devID, log, artikelData, insertData;
            return regeneratorRuntime.wrap(function _callee16$(_context16) {
              while (1) {
                switch (_context16.prev = _context16.next) {
                  case 0:
                    db = this.dexie;
                    artikelRef = db.objektKatalogMandant;
                    jobid = this.baseData.getCurrentJobid();
                    uid = this.authService.getUser().id;
                    uuid = guid_typescript__WEBPACK_IMPORTED_MODULE_4__["Guid"].create().toString();
                    defaultMid = this.baseData.getCurrentMid();
                    devID = this.baseData.getCurrentDeviceId();
                    log = {
                      log: true
                    };

                    if (daten.gcuuid) {
                      _context16.next = 20;
                      break;
                    }

                    console.log('ArtikelService insertArtikelRef() #265', {
                      daten: Object.assign({}, daten)
                    });
                    _context16.next = 12;
                    return this.insertArtikelData(Object.assign({}, daten, log));

                  case 12:
                    artikelData = _context16.sent;
                    console.log('ArtikelService insertArtikelRef() #270 artikelData', {
                      artikelData: Object.assign({}, artikelData)
                    });

                    if (artikelData) {
                      _context16.next = 18;
                      break;
                    }

                    console.error('ArtikelService #267 unexpected empty Result: artikelData = this.insertArikelData()', {
                      artikelData: artikelData,
                      daten: daten
                    });
                    alert('ArikelService #269 unexpected Result for insertArtikelData. See console.log');
                    return _context16.abrupt("return", null);

                  case 18:
                    daten.gcid = artikelData.gcid;
                    daten.gcuuid = artikelData.uuid;

                  case 20:
                    insertData = {
                      mid: daten.mid || defaultMid,
                      gcid: daten.gcid,
                      gcuuid: daten.gcuuid,
                      for_jobid: jobid,
                      uuid: uuid,
                      code: uuid,
                      created_at: new Date(),
                      created_uid: uid,
                      created_jobid: jobid,
                      created_device_id: devID,
                      modified_at: null,
                      modified_uid: null
                    };
                    return _context16.abrupt("return", artikelRef.add(Object.assign({}, insertData, log)).then(function (insertUuid) {
                      return artikelRef.get({
                        uuid: insertUuid
                      });
                    })["catch"](function (reason) {
                      console.error(reason, 'ArtikelService #309 artikelRef.add', {
                        insertData: insertData
                      });
                      return null;
                    }));

                  case 22:
                  case "end":
                    return _context16.stop();
                }
              }
            }, _callee16, this);
          }));
        }
      }, {
        key: "insert",
        value: function insert(daten) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee17() {
            var existingGcuuid, artikelRefData, gItem, mItem, item, errorMsg;
            return regeneratorRuntime.wrap(function _callee17$(_context17) {
              while (1) {
                switch (_context17.prev = _context17.next) {
                  case 0:
                    _context17.prev = 0;
                    console.log('ArtikelService #295 insert(daten) call this.getFirstArtikelGcuuidByBasisDaten(daten)', {
                      daten: daten
                    });
                    _context17.prev = 2;
                    _context17.next = 5;
                    return this.getFirstArtikelGcuuidByBasisDaten(daten);

                  case 5:
                    existingGcuuid = _context17.sent;
                    daten.gcuuid = existingGcuuid;
                    _context17.next = 13;
                    break;

                  case 9:
                    _context17.prev = 9;
                    _context17.t0 = _context17["catch"](2);
                    console.error('ArtikelService #299', {
                      e: _context17.t0
                    });
                    throw _context17.t0;

                  case 13:
                    console.log('ArtikelService #303 insert(daten) call this.insertArtikelRef(daten)');
                    _context17.next = 16;
                    return this.insertArtikelRef(daten);

                  case 16:
                    artikelRefData = _context17.sent;
                    console.log('ArtikelService #305 artikelRefData = insert(daten)', {
                      daten: daten,
                      artikelRefData: artikelRefData
                    });

                    if (!(!artikelRefData || !('gcuuid' in artikelRefData))) {
                      _context17.next = 21;
                      break;
                    }

                    alert('ERROR: #307 ArtikelService.insert() after calling ArtikelService.insertArtikelRef(daten)' + JSON.stringify({
                      daten: daten
                    }));
                    return _context17.abrupt("return", {
                      success: false,
                      newId: null,
                      data: null,
                      newItem: null,
                      artikelRef: null,
                      artikelData: null
                    });

                  case 21:
                    _context17.next = 23;
                    return this.dexie.objektKatalogGlobal.get({
                      uuid: artikelRefData.gcuuid
                    });

                  case 23:
                    gItem = _context17.sent;
                    mItem = artikelRefData;
                    item = Object.assign({}, mItem, gItem, {
                      mcuuid: mItem.uuid
                    });
                    return _context17.abrupt("return", {
                      success: true,
                      newId: artikelRefData.uuid,
                      data: artikelRefData,
                      newItem: item,
                      artikelRef: artikelRefData,
                      artikelData: gItem
                    });

                  case 29:
                    _context17.prev = 29;
                    _context17.t1 = _context17["catch"](0);
                    errorMsg = ('name' in _context17.t1 ? _context17.t1.name + ': ' : '') + ('message' in _context17.t1 ? _context17.t1.message : JSON.stringify(_context17.t1));
                    return _context17.abrupt("return", {
                      success: false,
                      errorMsg: errorMsg,
                      debug: _context17.t1,
                      data: daten
                    });

                  case 33:
                  case "end":
                    return _context17.stop();
                }
              }
            }, _callee17, this, [[0, 29], [2, 9]]);
          }));
        }
      }, {
        key: "getFirstArtikelGcuuidByBasisDaten",
        value: function getFirstArtikelGcuuidByBasisDaten(properties) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee18() {
            var hst, filledProps, emptyProps, _i3, _Object$keys2, pName, query;

            return regeneratorRuntime.wrap(function _callee18$(_context18) {
              while (1) {
                switch (_context18.prev = _context18.next) {
                  case 0:
                    if (!('Hersteller' in properties && properties.Hersteller.length > 0)) {
                      _context18.next = 9;
                      break;
                    }

                    _context18.next = 3;
                    return this.herstellerService.getByName(properties.Hersteller);

                  case 3:
                    hst = _context18.sent;

                    if (!(hst && hst.uuid)) {
                      _context18.next = 8;
                      break;
                    }

                    properties.huuid = hst.uuid;
                    _context18.next = 9;
                    break;

                  case 8:
                    return _context18.abrupt("return", '');

                  case 9:
                    filledProps = {};
                    emptyProps = {};
                    _i3 = 0, _Object$keys2 = Object.keys(properties);

                  case 12:
                    if (!(_i3 < _Object$keys2.length)) {
                      _context18.next = 20;
                      break;
                    }

                    pName = _Object$keys2[_i3];

                    if (pName in properties) {
                      _context18.next = 16;
                      break;
                    }

                    return _context18.abrupt("continue", 17);

                  case 16:
                    if (properties[pName] !== '' && properties[pName] !== null) {
                      filledProps[pName] = properties[pName];
                    } else {
                      emptyProps[pName] = properties[pName];
                    }

                  case 17:
                    _i3++;
                    _context18.next = 12;
                    break;

                  case 20:
                    if (!(Object.keys(filledProps).length === 0)) {
                      _context18.next = 22;
                      break;
                    }

                    return _context18.abrupt("return", '');

                  case 22:
                    if (!(!('huuid' in filledProps) && !('Bezeichnung' in filledProps))) {
                      _context18.next = 24;
                      break;
                    }

                    return _context18.abrupt("return", '');

                  case 24:
                    if (properties.huuid && 'huuid' in filledProps) {
                      query = this.dexie.objektKatalogGlobal.where({
                        huuid: properties.huuid
                      });
                      delete filledProps.huuid;
                    } else if (properties.Bezeichnung && 'Bezeichnung' in filledProps) {
                      query = this.dexie.objektKatalogGlobal.where('Bezeichnung').equalsIgnoreCase(properties.Bezeichnung);
                      delete filledProps.Bezeichnung;
                    }

                    query.filter(function (okg) {
                      for (var _i4 = 0, _Object$keys3 = Object.keys(filledProps); _i4 < _Object$keys3.length; _i4++) {
                        var k = _Object$keys3[_i4];

                        if (k in okg && okg[k] !== filledProps[k]) {
                          return false;
                        }
                      }

                      for (var _i5 = 0, _Object$keys4 = Object.keys(emptyProps); _i5 < _Object$keys4.length; _i5++) {
                        var _k = _Object$keys4[_i5];

                        if (!(_k in okg) || okg[_k] === emptyProps[_k]) {
                          continue;
                        }

                        if (okg[_k] !== null && okg[_k] !== '') {
                          return false;
                        }
                      }

                      return true;
                    }).first().then(function (okg) {
                      if (okg && 'uuid' in okg) {
                        return okg.uuid;
                      } else {
                        return '';
                      }
                    });

                  case 26:
                  case "end":
                    return _context18.stop();
                }
              }
            }, _callee18, this);
          }));
        }
      }, {
        key: "__DEL__update",
        value: function __DEL__update(artikel) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee19() {
            return regeneratorRuntime.wrap(function _callee19$(_context19) {
              while (1) {
                switch (_context19.prev = _context19.next) {
                  case 0:
                    return _context19.abrupt("return", {
                      success: false
                    });

                  case 1:
                  case "end":
                    return _context19.stop();
                }
              }
            }, _callee19);
          }));
        }
      }, {
        key: "countArticleByHerstellerUuid",
        value: function countArticleByHerstellerUuid(huuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee20() {
            var artikelTbl;
            return regeneratorRuntime.wrap(function _callee20$(_context20) {
              while (1) {
                switch (_context20.prev = _context20.next) {
                  case 0:
                    artikelTbl = this.dexie.objektKatalogGlobal;
                    _context20.next = 3;
                    return artikelTbl.where({
                      huuid: huuid
                    }).count();

                  case 3:
                    return _context20.abrupt("return", _context20.sent);

                  case 4:
                  case "end":
                    return _context20.stop();
                }
              }
            }, _callee20, this);
          }));
        }
      }, {
        key: "countArticleByProperties",
        value: function countArticleByProperties(props) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee21() {
            var artikelTbl, query, propKeys;
            return regeneratorRuntime.wrap(function _callee21$(_context21) {
              while (1) {
                switch (_context21.prev = _context21.next) {
                  case 0:
                    artikelTbl = this.dexie.objektKatalogGlobal;
                    query = artikelTbl;
                    propKeys = Object.keys(props);
                    propKeys.forEach(function (k) {
                      if (!props[k]) {
                        delete props[k];
                      }
                    });

                    if (props.huuid) {
                      query = artikelTbl.where({
                        huuid: props.huuid
                      });
                      delete props.huuid;
                    }

                    if (!('filter' in query)) {
                      Object(rxjs__WEBPACK_IMPORTED_MODULE_6__["throwError"])('query has an Unexpected Type. ' + 'Expected Collection|Table with method filter! Given: ' + typeof query);
                    }

                    _context21.next = 8;
                    return query.filter(props).count();

                  case 8:
                    return _context21.abrupt("return", _context21.sent);

                  case 9:
                  case "end":
                    return _context21.stop();
                }
              }
            }, _callee21, this);
          }));
        }
      }, {
        key: "listArticleByProperties",
        value: function listArticleByProperties(mid, hstId, props) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee22() {
            var huuid, propKeys, join;
            return regeneratorRuntime.wrap(function _callee22$(_context22) {
              while (1) {
                switch (_context22.prev = _context22.next) {
                  case 0:
                    huuid = typeof hstId === 'string' ? hstId : null;
                    propKeys = Object.keys(props);
                    propKeys.forEach(function (k) {
                      if (!props[k]) {
                        delete props[k];
                      } else if (typeof props[k] === 'string') {
                        props[k] = props[k].toLowerCase();
                      }
                    });
                    propKeys = Object.keys(props);
                    join = {
                      table: 'objektKatalogGlobal',
                      where: huuid ? {
                        huuid: huuid
                      } : null,
                      joins: [{
                        parentKey: 'huuid',
                        key: 'uuid',
                        table: 'hersteller',
                        alias: 'hersteller',
                        resultType: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_7__["JoinResultType"].First
                      }, {
                        parentKey: 'uuid',
                        table: 'images',
                        key: 'gcuuid',
                        alias: 'image',
                        resultType: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_7__["JoinResultType"].First
                      }, {
                        parentKey: 'uuid',
                        table: 'objektKatalogMandant',
                        key: 'gcuuid',
                        alias: 'artikelRef',
                        multi: true,
                        where: {
                          mid: mid
                        },
                        joins: [{
                          parentKey: 'uuid',
                          table: 'inventar',
                          key: 'mcuuid',
                          alias: 'inventar_count',
                          multi: true,
                          resultType: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_7__["JoinResultType"].Count,
                          map: function map(obj) {
                            return {
                              uuid: obj.uuid,
                              ruuid: obj.ruuid
                            };
                          }
                        }],
                        filter: function filter(obj) {
                          return obj.mid === mid;
                        }
                      }],
                      filter: function filter(item) {
                        var _iterator = _createForOfIteratorHelper(propKeys),
                            _step;

                        try {
                          for (_iterator.s(); !(_step = _iterator.n()).done;) {
                            var k = _step.value;

                            if (!(k in item)) {
                              return false;
                            }

                            if (typeof props[k] === 'string' && typeof item[k] === 'string') {
                              if (-1 === item[k].toLowerCase().indexOf(props[k])) {
                                return false;
                              }
                            } else if (props[k] !== item[k]) {
                              return false;
                            }
                          }
                        } catch (err) {
                          _iterator.e(err);
                        } finally {
                          _iterator.f();
                        }

                        return true;
                      },
                      map: function map(obj) {
                        obj.gcuuid = obj.uuid;
                        obj.inventar_count = 0;
                        obj.Hersteller = '';
                        obj.img_id = null;
                        obj.img_uuid = null;
                        obj.mcid = null;
                        obj.mcuuid = null;

                        if (obj.hersteller !== undefined && obj.hersteller !== null) {
                          obj.Hersteller = obj.hersteller.Hersteller;
                        }

                        if (obj.image !== undefined && obj.image !== null) {
                          obj.img_id = obj.image.id;
                          obj.img_uuid = obj.image.uuid;
                        }

                        if (Array.isArray(obj.artikelRef)) {
                          obj.artikelRef.forEach(function (a) {
                            return obj.inventar_count += a.inventar_count;
                          });
                          obj.mcid = obj.artikelRef.length ? obj.artikelRef[0].mcid : null;
                          obj.mcuuid = obj.artikelRef.length ? obj.artikelRef[0].mcuuid : null;
                        } else if (!!obj.artikelRef) {
                          obj.inventar_count = obj.artikelRef.inventar_count;
                          obj.mcid = obj.artikelRef.mcid;
                          obj.mcuuid = obj.artikelRef.mcuuid;
                        }

                        return obj;
                      },
                      sort: function sort(a, b) {
                        var r = 'inventar_count' in a && 'inventar_count' in b ? a.inventar_count > b.inventar_count ? -1 : 1 : 0; // console.log('#311 sort joinie result', a.inventar_count, b.inventar_count, r);

                        return r;
                      },
                      limit: 10
                    };
                    return _context22.abrupt("return", this.dataService.joinie(join).then(function (list) {
                      console.log({
                        'joinie.result': list
                      });
                      return list;
                    }));

                  case 6:
                  case "end":
                    return _context22.stop();
                }
              }
            }, _callee22, this);
          }));
        }
      }, {
        key: "getGroupedArtikelGruppen",
        value: function getGroupedArtikelGruppen(where) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee23() {
            return regeneratorRuntime.wrap(function _callee23$(_context23) {
              while (1) {
                switch (_context23.prev = _context23.next) {
                  case 0:
                    return _context23.abrupt("return", this.getGroupedArtikelProperties('Gruppe', where));

                  case 1:
                  case "end":
                    return _context23.stop();
                }
              }
            }, _callee23, this);
          }));
        }
      }, {
        key: "getGroupedArtikelKategorien",
        value: function getGroupedArtikelKategorien(where) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee24() {
            return regeneratorRuntime.wrap(function _callee24$(_context24) {
              while (1) {
                switch (_context24.prev = _context24.next) {
                  case 0:
                    return _context24.abrupt("return", this.getGroupedArtikelProperties('Kategorie', where));

                  case 1:
                  case "end":
                    return _context24.stop();
                }
              }
            }, _callee24, this);
          }));
        }
      }, {
        key: "getGroupedArtikelTypen",
        value: function getGroupedArtikelTypen(where) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee25() {
            return regeneratorRuntime.wrap(function _callee25$(_context25) {
              while (1) {
                switch (_context25.prev = _context25.next) {
                  case 0:
                    return _context25.abrupt("return", this.getGroupedArtikelProperties('Typ', where));

                  case 1:
                  case "end":
                    return _context25.stop();
                }
              }
            }, _callee25, this);
          }));
        }
      }, {
        key: "getGroupedArtikelGroessen",
        value: function getGroupedArtikelGroessen(where) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee26() {
            return regeneratorRuntime.wrap(function _callee26$(_context26) {
              while (1) {
                switch (_context26.prev = _context26.next) {
                  case 0:
                    return _context26.abrupt("return", this.getGroupedArtikelProperties('Groesse', where));

                  case 1:
                  case "end":
                    return _context26.stop();
                }
              }
            }, _callee26, this);
          }));
        }
      }, {
        key: "getGroupedArtikelFarben",
        value: function getGroupedArtikelFarben(where) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee27() {
            return regeneratorRuntime.wrap(function _callee27$(_context27) {
              while (1) {
                switch (_context27.prev = _context27.next) {
                  case 0:
                    return _context27.abrupt("return", this.getGroupedArtikelProperties('Farbe', where));

                  case 1:
                  case "end":
                    return _context27.stop();
                }
              }
            }, _callee27, this);
          }));
        }
      }, {
        key: "getGroupedArtikelProperties",
        value: function getGroupedArtikelProperties(property, where) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee28() {
            var db, table, names, hasWhere, keysWhere, collection, uniqNames;
            return regeneratorRuntime.wrap(function _callee28$(_context28) {
              while (1) {
                switch (_context28.prev = _context28.next) {
                  case 0:
                    db = this.dexie;
                    table = db.objektKatalogGlobal;
                    names = [];
                    hasWhere = where && Object.keys(where).length > 0;
                    keysWhere = hasWhere ? Object.keys(where) : [];
                    collection = hasWhere ? table.where(where) : table.toCollection();
                    _context28.next = 8;
                    return table.orderBy(property).filter(function (itm) {
                      if (!(property in itm) || typeof itm[property] !== 'string' || itm[property].trim() === '') {
                        return false;
                      }

                      if (!hasWhere) {
                        return true;
                      }

                      var _iterator2 = _createForOfIteratorHelper(keysWhere),
                          _step2;

                      try {
                        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                          var k = _step2.value;

                          if (!(k in itm)) {
                            return false;
                          }

                          if (typeof itm[k] === 'string' && typeof where[k] === 'string') {
                            if (itm[k].toString().toLowerCase().trim() !== where[k].toString().toLowerCase().trim()) {
                              return false;
                            }
                          } else if (itm[k] !== where[k]) {
                            return false;
                          }
                        }
                      } catch (err) {
                        _iterator2.e(err);
                      } finally {
                        _iterator2.f();
                      }

                      return true;
                    }).uniqueKeys();

                  case 8:
                    uniqNames = _context28.sent;
                    uniqNames.forEach(function (n) {
                      if (typeof n === 'string') {
                        names.push(n);
                      }
                    });
                    return _context28.abrupt("return", names);

                  case 11:
                  case "end":
                    return _context28.stop();
                }
              }
            }, _callee28, this);
          }));
        }
      }, {
        key: "getGroupedArtikelGruppenKategorien",
        value: function getGroupedArtikelGruppenKategorien(where) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee30() {
            var _this13 = this;

            var db, Promise, table, uniqGrps;
            return regeneratorRuntime.wrap(function _callee30$(_context30) {
              while (1) {
                switch (_context30.prev = _context30.next) {
                  case 0:
                    console.log('#364 getGroupedArtikelGruppenKategorien', {
                      where: where
                    });
                    db = this.dexie;
                    Promise = dexie__WEBPACK_IMPORTED_MODULE_5__["default"].Promise;
                    table = db.objektKatalogGlobal;
                    _context30.next = 6;
                    return table.orderBy('Gruppe').uniqueKeys();

                  case 6:
                    uniqGrps = _context30.sent;
                    return _context30.abrupt("return", Promise.all(uniqGrps.map(function (grp) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this13, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee29() {
                        return regeneratorRuntime.wrap(function _callee29$(_context29) {
                          while (1) {
                            switch (_context29.prev = _context29.next) {
                              case 0:
                                return _context29.abrupt("return", table.orderBy('Kategorie').filter(function (itm) {
                                  return itm.Gruppe === grp && typeof itm.Kategorie === 'string' && itm.Kategorie.trim() !== '';
                                }).uniqueKeys());

                              case 1:
                              case "end":
                                return _context29.stop();
                            }
                          }
                        }, _callee29);
                      }));
                    })).then(function (ktgs) {
                      return uniqGrps.map(function (grp, i) {
                        return {
                          gruppe: grp.toString(),
                          kategorien: ktgs[i]
                        };
                      });
                    }));

                  case 8:
                  case "end":
                    return _context30.stop();
                }
              }
            }, _callee30, this);
          }));
        }
      }]);

      return ArtikelService;
    }();

    ArtikelService.ctorParameters = function () {
      return [{
        type: _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_2__["DexieService"]
      }, {
        type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_3__["AuthService"]
      }, {
        type: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_7__["DataService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_8__["BasedataService"]
      }, {
        type: _hersteller_service__WEBPACK_IMPORTED_MODULE_9__["HerstellerService"]
      }];
    };

    ArtikelService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], ArtikelService);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/data-services/barcode.service.ts":
  /*!********************************************************************!*\
    !*** ./src/app/pages/invent-form/data-services/barcode.service.ts ***!
    \********************************************************************/

  /*! exports provided: BarcodeService */

  /***/
  function srcAppPagesInventFormDataServicesBarcodeServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "BarcodeService", function () {
      return BarcodeService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../../shared/services/dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../../shared/interfaces/dexie.interfaces */
    "./src/app/shared/interfaces/dexie.interfaces.ts");

    var BarcodeService = /*#__PURE__*/function () {
      function BarcodeService(db) {
        _classCallCheck(this, BarcodeService);

        this.db = db;
        this.lastErrors = [];
        this.rebuildProcesses = [];
        this.isInDebugMode = false;
        this.lkup = this.db.barcodeLookup;
      }

      _createClass(BarcodeService, [{
        key: "simpleLookup",
        value: function simpleLookup(barcode, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee31() {
            var structLookupResult, indexLookupResult;
            return regeneratorRuntime.wrap(function _callee31$(_context31) {
              while (1) {
                switch (_context31.prev = _context31.next) {
                  case 0:
                    if (!(barcode.startsWith('R') || barcode.startsWith('A'))) {
                      _context31.next = 6;
                      break;
                    }

                    _context31.next = 3;
                    return this.bcAnalyzeLookup(barcode, jobid);

                  case 3:
                    structLookupResult = _context31.sent;

                    if (!(structLookupResult && structLookupResult.success)) {
                      _context31.next = 6;
                      break;
                    }

                    return _context31.abrupt("return", structLookupResult);

                  case 6:
                    _context31.next = 8;
                    return this.indexLookup(barcode, jobid);

                  case 8:
                    indexLookupResult = _context31.sent;

                    if (!indexLookupResult) {
                      _context31.next = 11;
                      break;
                    }

                    return _context31.abrupt("return", indexLookupResult);

                  case 11:
                    _context31.next = 13;
                    return this.allTablesLookup(barcode, jobid);

                  case 13:
                    return _context31.abrupt("return", _context31.sent);

                  case 14:
                  case "end":
                    return _context31.stop();
                }
              }
            }, _callee31, this);
          }));
        }
      }, {
        key: "indexLookup",
        value: function indexLookup(barcode, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee32() {
            var found, result, searchKey, item;
            return regeneratorRuntime.wrap(function _callee32$(_context32) {
              while (1) {
                switch (_context32.prev = _context32.next) {
                  case 0:
                    barcode = this.bcTrimZero(barcode);
                    _context32.next = 3;
                    return this.lkup.get({
                      code: barcode,
                      for_jobid: jobid
                    });

                  case 3:
                    found = _context32.sent;

                    if (this.isInDebugMode) {
                      console.log('BarcodeService.indexLookup(', {
                        barcode: barcode,
                        jobid: jobid
                      }, ') #57', {
                        found: found
                      });
                    }

                    result = {
                      barcode: barcode,
                      foundRef: found,
                      success: false,
                      lookupResultTable: _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].None,
                      data: null
                    };

                    if (!(found && found.uuid)) {
                      _context32.next = 31;
                      break;
                    }

                    searchKey = {
                      uuid: found.uuid
                    };
                    _context32.next = 10;
                    return this.db.table(found.table).get(searchKey);

                  case 10:
                    item = _context32.sent;

                    if (this.isInDebugMode) {
                      console.log('BarcodeService #68 indexLookup item = this.db.table(', found.table, ').get(', searchKey, ')', {
                        item: item
                      });
                    }

                    if (!item) {
                      _context32.next = 31;
                      break;
                    }

                    result.success = true;
                    result.data = item;
                    _context32.t0 = found.table;
                    _context32.next = _context32.t0 === 'inventar' ? 18 : _context32.t0 === 'raeume' ? 21 : _context32.t0 === 'objektKatalogMandant' ? 24 : _context32.t0 === 'objektKatalogGlobal' ? 27 : 30;
                    break;

                  case 18:
                    result.lookupResultTable = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].Inventar;
                    result.inventar = item;
                    return _context32.abrupt("break", 31);

                  case 21:
                    result.lookupResultTable = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].Raeume;
                    result.raum = item;
                    return _context32.abrupt("break", 31);

                  case 24:
                    result.lookupResultTable = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].ObjektKatalogMandant;
                    result.artikelRef = item;
                    return _context32.abrupt("break", 31);

                  case 27:
                    result.lookupResultTable = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].ObjektKatalogGlobal;
                    result.artikelData = item;
                    return _context32.abrupt("break", 31);

                  case 30:
                    result.lookupResultTable = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].Any;

                  case 31:
                    if (this.isInDebugMode) {
                      console.log('BarcodeService #99 indexLookup(', {
                        result: result,
                        barcode: barcode,
                        jobid: jobid
                      }, ')', {
                        found: found
                      });
                    }

                    return _context32.abrupt("return", result);

                  case 33:
                  case "end":
                    return _context32.stop();
                }
              }
            }, _callee32, this);
          }));
        }
      }, {
        key: "allTablesLookup",
        value: function allTablesLookup(barcode, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee33() {
            var result;
            return regeneratorRuntime.wrap(function _callee33$(_context33) {
              while (1) {
                switch (_context33.prev = _context33.next) {
                  case 0:
                    result = {
                      barcode: barcode,
                      foundRef: null,
                      success: false,
                      lookupResultTable: _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].None,
                      data: null
                    };
                    _context33.next = 3;
                    return this.db.inventar.where({
                      code: barcode,
                      for_jobid: jobid
                    }).first();

                  case 3:
                    result.data = _context33.sent;

                    if (!result.data) {
                      _context33.next = 9;
                      break;
                    }

                    result.lookupResultTable = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].Inventar;
                    result.success = true;
                    result.foundRef = {
                      code: barcode,
                      key: 'uuid',
                      id: result.data.uuid,
                      for_jobid: jobid,
                      table: 'inventar',
                      updateHelper: 0,
                      uuid: result.inventar.uuid
                    };
                    return _context33.abrupt("return", result);

                  case 9:
                    _context33.next = 11;
                    return this.db.raeume.where({
                      code: barcode,
                      for_jobid: jobid
                    }).first();

                  case 11:
                    result.data = _context33.sent;

                    if (!result.data) {
                      _context33.next = 17;
                      break;
                    }

                    result.lookupResultTable = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].Raeume;
                    result.success = true;
                    result.foundRef = {
                      code: barcode,
                      key: 'uuid',
                      id: result.data.uuid,
                      for_jobid: jobid,
                      table: 'raeume',
                      updateHelper: 0,
                      uuid: result.data.uuid
                    };
                    return _context33.abrupt("return", result);

                  case 17:
                    _context33.next = 19;
                    return this.db.objektKatalogMandant.where({
                      code: barcode,
                      for_jobid: jobid
                    }).first();

                  case 19:
                    result.data = _context33.sent;

                    if (!result.data) {
                      _context33.next = 25;
                      break;
                    }

                    result.lookupResultTable = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].ObjektKatalogMandant;
                    result.success = true;
                    result.foundRef = {
                      code: barcode,
                      key: 'uuid',
                      id: result.data.uuid,
                      for_jobid: jobid,
                      table: 'objektKatalogMandant',
                      updateHelper: 0,
                      uuid: result.data.uuid
                    };
                    return _context33.abrupt("return", result);

                  case 25:
                    return _context33.abrupt("return", result);

                  case 26:
                  case "end":
                    return _context33.stop();
                }
              }
            }, _callee33, this);
          }));
        }
      }, {
        key: "bcAnalyzeLookup",
        value: function bcAnalyzeLookup(barcode, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee34() {
            var matchesObjektbuchArtikel, matchesObjektbuchRaum, foundTable, foundTableKey, result, _matchesObjektbuchArt, sMcid, _matchesObjektbuchRau, sRid, objBookLkUp;

            return regeneratorRuntime.wrap(function _callee34$(_context34) {
              while (1) {
                switch (_context34.prev = _context34.next) {
                  case 0:
                    matchesObjektbuchArtikel = barcode.match(/^(A)(\d+)-/);
                    matchesObjektbuchRaum = !matchesObjektbuchArtikel ? barcode.match(/^(R)(\d+)-/) : false;
                    result = {
                      barcode: barcode,
                      foundRef: null,
                      success: false,
                      lookupResultTable: _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].None,
                      data: null
                    };

                    if (!matchesObjektbuchArtikel) {
                      _context34.next = 9;
                      break;
                    }

                    _matchesObjektbuchArt = _slicedToArray(matchesObjektbuchArtikel, 3), sMcid = _matchesObjektbuchArt[2];
                    foundTable = 'objektKatalogMandant';
                    foundTableKey = 'uuid';
                    _context34.next = 16;
                    break;

                  case 9:
                    if (!matchesObjektbuchRaum) {
                      _context34.next = 15;
                      break;
                    }

                    _matchesObjektbuchRau = _slicedToArray(matchesObjektbuchRaum, 3), sRid = _matchesObjektbuchRau[2];
                    foundTable = 'raeume';
                    foundTableKey = 'uuid';
                    _context34.next = 16;
                    break;

                  case 15:
                    return _context34.abrupt("return", result);

                  case 16:
                    _context34.next = 18;
                    return this.db.objektbuchBarcodesLookup.where({
                      code: barcode,
                      for_jobid: jobid,
                      table: foundTable
                    }).first();

                  case 18:
                    objBookLkUp = _context34.sent;

                    if (!(foundTable && objBookLkUp)) {
                      _context34.next = 35;
                      break;
                    }

                    _context34.next = 22;
                    return this.db.table(foundTable).where({
                      uuid: objBookLkUp.uuid
                    }).first();

                  case 22:
                    result.data = _context34.sent;

                    if (!result.data) {
                      _context34.next = 35;
                      break;
                    }

                    result.foundRef = {
                      code: barcode,
                      table: foundTable,
                      key: foundTableKey,
                      id: result.data.uuid,
                      uuid: result.data.uuid || null
                    };
                    result.success = true;
                    _context34.t0 = foundTable;
                    _context34.next = _context34.t0 === 'raeume' ? 29 : _context34.t0 === 'objektKatalogMandant' ? 32 : 35;
                    break;

                  case 29:
                    result.raum = result.data;
                    result.lookupResultTable = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].Raeume;
                    return _context34.abrupt("break", 35);

                  case 32:
                    result.artikelRef = result.data;
                    result.lookupResultTable = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].ObjektKatalogMandant;
                    return _context34.abrupt("break", 35);

                  case 35:
                    return _context34.abrupt("return", result);

                  case 36:
                  case "end":
                    return _context34.stop();
                }
              }
            }, _callee34, this);
          }));
        }
      }, {
        key: "bcTrimZero",
        value: function bcTrimZero(barcode) {
          barcode = barcode.trim();

          while (barcode.charAt(0) === '0') {
            barcode = barcode.substr(1).trim();
          }

          return barcode;
        }
      }, {
        key: "fullLookup",
        value: function fullLookup(barcode, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee35() {
            var simpleResult, lookupResultTableText;
            return regeneratorRuntime.wrap(function _callee35$(_context35) {
              while (1) {
                switch (_context35.prev = _context35.next) {
                  case 0:
                    barcode = this.bcTrimZero(barcode);
                    _context35.next = 3;
                    return this.simpleLookup(barcode, jobid);

                  case 3:
                    simpleResult = _context35.sent;
                    lookupResultTableText = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"][simpleResult.lookupResultTable];

                    if (this.isInDebugMode) {
                      console.log("BarcodeService.fullLookup() #230 for ".concat(barcode, " found ").concat(lookupResultTableText), {
                        simpleResult: simpleResult
                      });
                    }

                    if (!(!simpleResult.success || simpleResult.lookupResultTable === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].ObjektKatalogGlobal)) {
                      _context35.next = 9;
                      break;
                    }

                    if (this.isInDebugMode) {
                      console.log("BarcodeService.fullLookup() #235 for ".concat(barcode, " return ").concat(lookupResultTableText));
                    }

                    return _context35.abrupt("return", simpleResult);

                  case 9:
                    _context35.t0 = simpleResult.lookupResultTable;
                    _context35.next = _context35.t0 === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].ObjektKatalogMandant ? 12 : _context35.t0 === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].Raeume ? 21 : _context35.t0 === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultTable"].Inventar ? 26 : 49;
                    break;

                  case 12:
                    if (this.isInDebugMode) {
                      console.log("BarcodeService.fullLookup() #243 for ".concat(barcode, " fetch global Data for ").concat(lookupResultTableText));
                    }

                    _context35.next = 15;
                    return this.db.objektKatalogGlobal.get({
                      uuid: simpleResult.artikelRef.gcuuid
                    });

                  case 15:
                    simpleResult.artikelData = _context35.sent;
                    _context35.next = 18;
                    return this.db.images.get({
                      gcuuid: simpleResult.artikelRef.gcuuid
                    });

                  case 18:
                    simpleResult.image = _context35.sent;

                    if (simpleResult.image) {
                      simpleResult.image.data_url = null;
                      simpleResult.image.data_binary = null;
                    }

                    return _context35.abrupt("break", 49);

                  case 21:
                    if (this.isInDebugMode) {
                      console.log("BarcodeService.fullLookup() #255 for ".concat(barcode, " fetch gebaeude Data for ").concat(lookupResultTableText));
                    }

                    _context35.next = 24;
                    return this.db.gebaeude.get(simpleResult.raum.gid);

                  case 24:
                    simpleResult.gebaeude = _context35.sent;
                    return _context35.abrupt("break", 49);

                  case 26:
                    if (this.isInDebugMode) {
                      console.log('BarcodeService.fullLookup() #262' + " for ".concat(barcode, " fetch artikelRef/global/image/raum Data for ").concat(lookupResultTableText), {
                        mcuuid: simpleResult.inventar.mcuuid
                      });
                    }

                    _context35.next = 29;
                    return this.db.objektKatalogMandant.get({
                      uuid: simpleResult.inventar.mcuuid
                    });

                  case 29:
                    simpleResult.artikelRef = _context35.sent;

                    if (!simpleResult.artikelRef) {
                      _context35.next = 44;
                      break;
                    }

                    if (this.isInDebugMode) {
                      console.log('BarcodeService.fullLookup() #271 ', {
                        gcuuid: simpleResult.artikelRef.gcuuid
                      });
                    }

                    _context35.next = 34;
                    return this.db.objektKatalogGlobal.get({
                      uuid: simpleResult.artikelRef.gcuuid
                    });

                  case 34:
                    simpleResult.artikelData = _context35.sent;

                    if (this.isInDebugMode) {
                      console.log('BarcodeService.fullLookup() #254 ');
                    }

                    _context35.next = 38;
                    return this.db.images.filter(function (img) {
                      return 'mcuuid' in img && img.mcuuid === simpleResult.artikelRef.uuid;
                    }).first();

                  case 38:
                    simpleResult.image = _context35.sent;

                    if (simpleResult.image) {
                      _context35.next = 43;
                      break;
                    }

                    _context35.next = 42;
                    return this.db.images.where({
                      gcuuid: simpleResult.artikelRef.gcuuid
                    }).first();

                  case 42:
                    simpleResult.image = _context35.sent;

                  case 43:
                    if (simpleResult.image) {
                      simpleResult.image.data_url = null;
                      simpleResult.image.data_binary = null;
                    }

                  case 44:
                    if (this.isInDebugMode) {
                      console.log('BarcodeService.fullLookup() #261 ');
                    }

                    _context35.next = 47;
                    return this.db.raeume.get({
                      uuid: simpleResult.inventar.ruuid
                    });

                  case 47:
                    simpleResult.raum = _context35.sent;
                    return _context35.abrupt("break", 49);

                  case 49:
                    if (this.isInDebugMode) {
                      console.log("BarcodeService.fullLookup() #166 fullLookup for ".concat(barcode, " return data for ").concat(lookupResultTableText), {
                        simpleResult: simpleResult
                      });
                    }

                    return _context35.abrupt("return", simpleResult);

                  case 51:
                  case "end":
                    return _context35.stop();
                }
              }
            }, _callee35, this);
          }));
        }
      }, {
        key: "rebuild",
        value: function rebuild() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee36() {
            var _this14 = this;

            return regeneratorRuntime.wrap(function _callee36$(_context36) {
              while (1) {
                switch (_context36.prev = _context36.next) {
                  case 0:
                    return _context36.abrupt("return", Promise.all([this.rebuildTable(this.db.inventar), this.rebuildTable(this.db.raeume), this.rebuildTable(this.db.objektKatalogMandant)]).then(function (results) {
                      var numErrors = results.filter(function (re) {
                        return !re;
                      }).length;

                      _this14.addError('Beim Rebuild des Lookup-Indexes sind ' + numErrors + ' aufgetreten!');

                      return numErrors === 0;
                    }));

                  case 1:
                  case "end":
                    return _context36.stop();
                }
              }
            }, _callee36, this);
          }));
        }
      }, {
        key: "rebuildTable",
        value: function rebuildTable(table) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee37() {
            var _this15 = this;

            var keyName, tblName;
            return regeneratorRuntime.wrap(function _callee37$(_context37) {
              while (1) {
                switch (_context37.prev = _context37.next) {
                  case 0:
                    if (!this.rebuildProcesses.find(function (p) {
                      return p.table === table.name;
                    })) {
                      _context37.next = 2;
                      break;
                    }

                    return _context37.abrupt("return", false);

                  case 2:
                    this.rebuildProcesses.push({
                      jobid: 0,
                      table: table.name
                    });
                    keyName = table.schema.primKey.keyPath.toString();
                    tblName = table.name;
                    console.log('BarcodeService.rebuildTable() #323 delete index for table ', tblName);
                    _context37.next = 8;
                    return this.db.barcodeLookup.where('table').equals(tblName)["delete"]();

                  case 8:
                    return _context37.abrupt("return", this.db.transaction('rw', [table, this.db.barcodeLookup], function () {
                      table.each(function (item) {
                        _this15.db.barcodeLookup.put(Object.assign({
                          code: item.code,
                          table: tblName,
                          for_jobid: item.for_jobid,
                          key: keyName,
                          uuid: item.uuid,
                          updateHelper: 1
                        }, {
                          log: false
                        }));
                      });
                    }).then(function () {
                      return true;
                    })["finally"](function () {
                      _this15.rebuildProcesses = _this15.rebuildProcesses.filter(function (p) {
                        return p.table !== tblName;
                      });
                    }));

                  case 9:
                  case "end":
                    return _context37.stop();
                }
              }
            }, _callee37, this);
          }));
        }
      }, {
        key: "rebuildByJobid",
        value: function rebuildByJobid(jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee38() {
            var _this16 = this;

            return regeneratorRuntime.wrap(function _callee38$(_context38) {
              while (1) {
                switch (_context38.prev = _context38.next) {
                  case 0:
                    console.log('BarcodeService.rebuildByJobid(' + jobid + ') #346');
                    return _context38.abrupt("return", Promise.all([this.rebuildTableByJobid(this.db.inventar, jobid), this.rebuildTableByJobid(this.db.raeume, jobid), this.rebuildTableByJobid(this.db.objektKatalogMandant, jobid)]).then(function (results) {
                      var numErrors = results.filter(function (re) {
                        return !re;
                      }).length;

                      _this16.addError('#242 Beim Rebuild des Lookup-Indexes sind ' + numErrors + ' aufgetreten!');

                      return numErrors === 0;
                    }));

                  case 2:
                  case "end":
                    return _context38.stop();
                }
              }
            }, _callee38, this);
          }));
        }
      }, {
        key: "rebuildTableByJobid",
        value: function rebuildTableByJobid(table, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee39() {
            var _this17 = this;

            var keyName, tblName, numDeleted, count;
            return regeneratorRuntime.wrap(function _callee39$(_context39) {
              while (1) {
                switch (_context39.prev = _context39.next) {
                  case 0:
                    if (!this.rebuildProcesses.find(function (p) {
                      return (p.jobid === 0 || p.jobid === jobid) && p.table === table.name;
                    })) {
                      _context39.next = 3;
                      break;
                    }

                    console.error("BarcodeService.rebuildTableByJobid(".concat(table.name, ", ").concat(jobid, ") #360 Abort rebuild, is already running"));
                    return _context39.abrupt("return", false);

                  case 3:
                    this.rebuildProcesses.push({
                      jobid: jobid,
                      table: table.name
                    });
                    keyName = table.schema.primKey.keyPath.toString();
                    tblName = table.name;

                    if (this.isInDebugMode) {
                      console.log('BarcodeService.rebuildTableByJobid(' + jobid + ', ' + table + ') #253.' + ' barcode.service rebuildTableByJobid delete barcodeLookup for table ', tblName, jobid);
                    }

                    _context39.next = 9;
                    return this.db.barcodeLookup.where({
                      table: tblName,
                      for_jobid: jobid
                    })["delete"]();

                  case 9:
                    numDeleted = _context39.sent;

                    if (this.isInDebugMode) {
                      console.log("BarcodeService.rebuildTableByJobid(".concat(table.name, ", ").concat(jobid, ") #255"), ' numDeleted:', numDeleted);
                    }

                    count = 0;
                    return _context39.abrupt("return", this.db.transaction('rw', [table, this.db.barcodeLookup], function () {
                      table.where({
                        for_jobid: jobid
                      }).each(function (item) {
                        count += 1;
                        var putData = Object.assign({
                          code: item.code,
                          table: tblName,
                          for_jobid: item.for_jobid,
                          key: keyName,
                          uuid: item.uuid,
                          updateHelper: 1
                        }, {
                          log: false
                        });

                        if (!item.code) {
                          console.error('#359 BarcodeService.rebuildTableByJobid Missing Barcode', tblName, jobid, {
                            putData: putData
                          });
                          return;
                        }

                        _this17.db.barcodeLookup.put(putData)["catch"](function (argReason) {
                          console.error('#365 barcode.serve rebuildTableByJobid put Errors', tblName, jobid, {
                            argReason: argReason,
                            putData: putData
                          });
                          return false;
                        });
                      });
                    }).then(function () {
                      console.log("BarcodeService.rebuildTableByJobid(".concat(table.name, ", ").concat(jobid, ") #403 finished"), {
                        count: count
                      });
                      return true;
                    })["catch"](function (argReason) {
                      console.error("BarcodeService.rebuildTableByJobid(".concat(table.name, ", ").concat(jobid, ") #274 finished with Errors"), argReason);
                      return false;
                    })["finally"](function () {
                      _this17.rebuildProcesses = _this17.rebuildProcesses.filter(function (p) {
                        return p.jobid !== jobid && p.table !== tblName;
                      });
                    }));

                  case 13:
                  case "end":
                    return _context39.stop();
                }
              }
            }, _callee39, this);
          }));
        }
      }, {
        key: "importObjektbuchBarcodesLookup",
        value: function importObjektbuchBarcodesLookup() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee40() {
            var _this18 = this;

            var list;
            return regeneratorRuntime.wrap(function _callee40$(_context40) {
              while (1) {
                switch (_context40.prev = _context40.next) {
                  case 0:
                    console.log('BarcodeService.importObjektbuchBarcodesLookup() #405');
                    this.lkup.where({
                      updateHelper: 11
                    }).modify({
                      updateHelper: 12
                    });
                    _context40.next = 4;
                    return this.db.objektbuchBarcodesLookup.toArray();

                  case 4:
                    list = _context40.sent;
                    _context40.next = 7;
                    return list.forEach(function (item) {
                      item.updateHelper = 11;

                      if (_this18.isInDebugMode) {
                        console.log('BarcodeService.importObjektbuchBarcodesLookup() #3411 import ', {
                          item: item
                        });
                      }

                      _this18.lkup.put(Object.assign({}, item, {
                        log: false
                      })).then(function (r) {// console.log('#229 result of put', item, r);
                      })["catch"](function (err) {
                        console.error('#231', err);
                      });
                    });

                  case 7:
                    _context40.next = 9;
                    return this.lkup.where({
                      updateHelper: 12
                    })["delete"]();

                  case 9:
                    return _context40.abrupt("return", true);

                  case 10:
                  case "end":
                    return _context40.stop();
                }
              }
            }, _callee40, this);
          }));
        }
      }, {
        key: "rebuildOnRunningSystemByJobid",
        value: function rebuildOnRunningSystemByJobid(jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee41() {
            var _this19 = this;

            return regeneratorRuntime.wrap(function _callee41$(_context41) {
              while (1) {
                switch (_context41.prev = _context41.next) {
                  case 0:
                    return _context41.abrupt("return", Promise.all([this.rebuildTableOnRunningSystemByJobid(this.db.inventar, jobid).then(function () {
                      return true;
                    })["catch"](function () {
                      return false;
                    })["finally"](function () {
                      return console.log("BarcodeService.rebuildOnRunningSystemByJobid(".concat(jobid, ") #413 Finished Inventar"));
                    }), this.rebuildTableOnRunningSystemByJobid(this.db.raeume, jobid).then(function () {
                      return true;
                    })["catch"](function () {
                      return false;
                    })["finally"](function () {
                      return console.log("BarcodeService.rebuildOnRunningSystemByJobid(".concat(jobid, ") #415 Finished Raeume!"));
                    }), this.rebuildTableOnRunningSystemByJobid(this.db.objektKatalogMandant, jobid).then(function () {
                      return true;
                    })["catch"](function () {
                      return false;
                    })["finally"](function () {
                      return console.log("BarcodeService.rebuildOnRunningSystemByJobid(".concat(jobid, ") #417 Finished objektKatalogMandant!"));
                    })]).then(function (results) {
                      var numErrors = results.filter(function (re) {
                        return !re;
                      }).length;

                      if (numErrors) {
                        _this19.addError("Beim Rebuild des Lookup-Indexes sind ".concat(numErrors, " Fehler aufgetreten!"));

                        console.error("BarcodeService.rebuildOnRunningSystemByJobid(".concat(jobid, ") #439\n        Beim Rebuild des Lookup-Indexes sind ").concat(numErrors, " Fehler aufgetreten!"));
                      }

                      return numErrors === 0;
                    })["catch"](function (err) {
                      console.error("BarcodeService.rebuildOnRunningSystemByJobid(".concat(jobid, ") #423. Fehler beim Barcode-Lookup-Aufbau: "), {
                        err: err
                      });
                    }));

                  case 1:
                  case "end":
                    return _context41.stop();
                }
              }
            }, _callee41, this);
          }));
        }
      }, {
        key: "rebuildTableOnRunningSystemByJobid",
        value: function rebuildTableOnRunningSystemByJobid(table, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee42() {
            var keyName, tblName, tblBarcodeLookup, count, numDeletes;
            return regeneratorRuntime.wrap(function _callee42$(_context42) {
              while (1) {
                switch (_context42.prev = _context42.next) {
                  case 0:
                    if (!this.rebuildProcesses.find(function (p) {
                      return (p.jobid === 0 || p.jobid === jobid) && p.table === table.name;
                    })) {
                      _context42.next = 2;
                      break;
                    }

                    return _context42.abrupt("return", false);

                  case 2:
                    this.rebuildProcesses.push({
                      jobid: jobid,
                      table: table.name
                    });
                    keyName = table.schema.primKey.keyPath.toString();
                    tblName = table.name;
                    tblBarcodeLookup = this.db.barcodeLookup;
                    count = 0;
                    _context42.next = 9;
                    return this.db.transaction('rw', [tblBarcodeLookup, table], function () {
                      tblBarcodeLookup.where({
                        table: tblName,
                        for_jobid: jobid,
                        updateHelper: 1
                      }).modify({
                        updateHelper: 2
                      }).then(function () {
                        table.where({
                          for_jobid: jobid
                        }).filter(function (item) {
                          return !!item.code;
                        }).each(function (item) {
                          count += 1;
                          tblBarcodeLookup.put(Object.assign({
                            code: item.code,
                            table: tblName,
                            key: keyName,
                            for_jobid: jobid,
                            uuid: item.uuid,
                            updateHelper: 1
                          }, {
                            log: false
                          }));
                        });
                      });
                    });

                  case 9:
                    _context42.next = 11;
                    return tblBarcodeLookup.where({
                      table: tblName,
                      for_jobid: jobid,
                      updateHelper: 2
                    })["delete"]();

                  case 11:
                    numDeletes = _context42.sent;
                    console.log("BarcodeService.rebuildTableOnRunningSystemByJobid(".concat(table.name, ", ").concat(jobid, ") #477 finished"), {
                      count: count,
                      numDeletes: numDeletes
                    }); // Clear Finished Process from ProcessList

                    this.rebuildProcesses = this.rebuildProcesses.filter(function (p) {
                      return p.jobid !== jobid && p.table !== tblName;
                    });

                  case 14:
                  case "end":
                    return _context42.stop();
                }
              }
            }, _callee42, this);
          }));
        }
      }, {
        key: "rebuildOnRunningSystem",
        value: function rebuildOnRunningSystem() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee43() {
            var _this20 = this;

            return regeneratorRuntime.wrap(function _callee43$(_context43) {
              while (1) {
                switch (_context43.prev = _context43.next) {
                  case 0:
                    return _context43.abrupt("return", Promise.all([this.rebuildTableOnRunningSystem(this.db.inventar)["finally"](function () {
                      return console.log('BarcodeService.rebuildOnRunningSystem() #487 Finished Inventar');
                    }), this.rebuildTableOnRunningSystem(this.db.raeume)["finally"](function () {
                      return console.log('BarcodeService.rebuildOnRunningSystem() #489 Finished Raeume!');
                    }), this.rebuildTableOnRunningSystem(this.db.objektKatalogMandant)["finally"](function () {
                      return console.log('BarcodeService.rebuildOnRunningSystem() #491 Finished objektKatalogMandant!');
                    })]).then(function (results) {
                      var numErrors = results.filter(function (re) {
                        return !re;
                      }).length;

                      if (numErrors > 0) {
                        console.error("BarcodeService.rebuildOnRunningSystem() #495 Es sind ".concat(numErrors, " Fehler aufgetreten!"));

                        _this20.addError("Beim Rebuild des Lookup-Indexes sind ".concat(numErrors, " Fehler aufgetreten!"));
                      }

                      return numErrors === 0;
                    })["catch"](function (err) {
                      console.error('BarcodeService.rebuildOnRunningSystem() #500. Fehler beim Barcode-Lookup-Aufbau: ', {
                        err: err
                      });
                    }));

                  case 1:
                  case "end":
                    return _context43.stop();
                }
              }
            }, _callee43, this);
          }));
        }
      }, {
        key: "rebuildTableOnRunningSystem",
        value: function rebuildTableOnRunningSystem(table) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee44() {
            var _this21 = this;

            var keyName, tblName, tblBarcodeLookup;
            return regeneratorRuntime.wrap(function _callee44$(_context44) {
              while (1) {
                switch (_context44.prev = _context44.next) {
                  case 0:
                    if (!this.rebuildProcesses.find(function (p) {
                      return p.table === table.name;
                    })) {
                      _context44.next = 2;
                      break;
                    }

                    return _context44.abrupt("return", false);

                  case 2:
                    this.rebuildProcesses.push({
                      jobid: 0,
                      table: table.name
                    });
                    keyName = table.schema.primKey.keyPath.toString();
                    tblName = table.name;
                    tblBarcodeLookup = this.db.barcodeLookup;
                    console.log("BarcodeService.rebuildTableOnRunningSystem(".concat(table.name, ") #513 Start Transaction Re-Indexing"));
                    _context44.next = 9;
                    return this.db.transaction('rw', [tblBarcodeLookup, table], function () {
                      if (_this21.isInDebugMode) {
                        console.log("BarcodeService.rebuildTableOnRunningSystem(".concat(table.name, ") #515 Set Flag updateHelper=2"));
                      }

                      tblBarcodeLookup.where({
                        table: tblName,
                        updateHelper: 1
                      }).modify({
                        updateHelper: 2
                      }).then(function () {
                        if (_this21.isInDebugMode) {
                          console.log("BarcodeService.rebuildTableOnRunningSystem(".concat(table.name, ") #520 rebuild Index"));
                        }

                        table.filter(function (item) {
                          return !!item.code;
                        }).each(function (item) {
                          var forJobid = 'for_jobid' in item ? item.for_jobid : 0;
                          tblBarcodeLookup.put(Object.assign({
                            code: item.code,
                            table: tblName,
                            key: keyName,
                            for_jobid: forJobid,
                            uuid: item.uuid,
                            updateHelper: 1
                          }, {
                            log: false
                          }));
                        });
                      });
                    });

                  case 9:
                    if (this.isInDebugMode) {
                      console.log("BarcodeService.rebuildTableOnRunningSystem(".concat(table.name, ") #536 delete no more existing entries"));
                    }

                    _context44.next = 12;
                    return tblBarcodeLookup.where({
                      table: tblName,
                      updateHelper: 2
                    })["delete"]();

                  case 12:
                    // Clear Finished Process from ProcessList
                    this.rebuildProcesses = this.rebuildProcesses.filter(function (p) {
                      return p.table !== tblName;
                    });
                    return _context44.abrupt("return", true);

                  case 14:
                  case "end":
                    return _context44.stop();
                }
              }
            }, _callee44, this);
          }));
        }
      }, {
        key: "addBarcode",
        value: function addBarcode(item) {
          var log = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee45() {
            return regeneratorRuntime.wrap(function _callee45$(_context45) {
              while (1) {
                switch (_context45.prev = _context45.next) {
                  case 0:
                    return _context45.abrupt("return", this.db.barcodeLookup.add(Object.assign({}, item, {
                      log: log
                    })).then(function (key) {
                      return key[0];
                    })["catch"](function (reason) {
                      console.error(reason, 'BarcodeService.addBarcode #517 add', {
                        item: item
                      });
                      return '';
                    }));

                  case 1:
                  case "end":
                    return _context45.stop();
                }
              }
            }, _callee45, this);
          }));
        }
      }, {
        key: "replaceBarcodeByUuid",
        value: function replaceBarcodeByUuid(uuid, item) {
          var log = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee46() {
            var updItem, bcFound, numDel;
            return regeneratorRuntime.wrap(function _callee46$(_context46) {
              while (1) {
                switch (_context46.prev = _context46.next) {
                  case 0:
                    if (!('code' in item)) {
                      _context46.next = 15;
                      break;
                    }

                    updItem = item;
                    console.log('BarcodeService.updateBarcodeByuuid() #521 Run Barcode-Update ');
                    _context46.next = 5;
                    return this.db.barcodeLookup.where({
                      table: item.table,
                      for_jobid: item.for_jobid
                    }).filter(function (oldBcItem) {
                      return oldBcItem.uuid === item.uuid;
                    }).first();

                  case 5:
                    bcFound = _context46.sent;

                    if (!bcFound) {
                      _context46.next = 13;
                      break;
                    }

                    _context46.next = 9;
                    return this.db.barcodeLookup.where({
                      code: bcFound.code,
                      for_jobid: bcFound.for_jobid
                    })["delete"]();

                  case 9:
                    numDel = _context46.sent;
                    _context46.next = 12;
                    return this.addBarcode({
                      code: updItem.code,
                      for_jobid: item.for_jobid,
                      key: 'uuid',
                      table: item.table,
                      uuid: item.uuid
                    }, log);

                  case 12:
                    return _context46.abrupt("return", true);

                  case 13:
                    _context46.next = 16;
                    break;

                  case 15:
                    console.log('DbsyncClientService.sendByJobId() #701 No-Barcode-Update, Origin-Element not found ', {
                      item: item
                    });

                  case 16:
                    return _context46.abrupt("return", false);

                  case 17:
                  case "end":
                    return _context46.stop();
                }
              }
            }, _callee46, this);
          }));
        }
      }, {
        key: "addError",
        value: function addError(err) {
          this.lastErrors.push(err);

          if (this.lastErrors.length > 20) {
            this.lastErrors = this.lastErrors.slice(-20);
          }
        }
      }, {
        key: "getLastErrors",
        value: function getLastErrors() {
          return this.lastErrors;
        }
      }]);

      return BarcodeService;
    }();

    BarcodeService.ctorParameters = function () {
      return [{
        type: _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_2__["DexieService"]
      }];
    };

    BarcodeService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], BarcodeService);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/data-services/hersteller.service.ts":
  /*!***********************************************************************!*\
    !*** ./src/app/pages/invent-form/data-services/hersteller.service.ts ***!
    \***********************************************************************/

  /*! exports provided: HerstellerService */

  /***/
  function srcAppPagesInventFormDataServicesHerstellerServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "HerstellerService", function () {
      return HerstellerService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../../shared/services/dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var guid_typescript__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! guid-typescript */
    "./node_modules/guid-typescript/dist/guid.js");
    /* harmony import */


    var guid_typescript__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(guid_typescript__WEBPACK_IMPORTED_MODULE_4__);

    var HerstellerService = /*#__PURE__*/function () {
      function HerstellerService(dexie, baseData) {
        _classCallCheck(this, HerstellerService);

        this.dexie = dexie;
        this.baseData = baseData;
      }

      _createClass(HerstellerService, [{
        key: "getAll",
        value: function getAll() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee47() {
            return regeneratorRuntime.wrap(function _callee47$(_context47) {
              while (1) {
                switch (_context47.prev = _context47.next) {
                  case 0:
                    _context47.next = 2;
                    return this.dexie.hersteller.orderBy('Hersteller').toArray();

                  case 2:
                    return _context47.abrupt("return", _context47.sent);

                  case 3:
                  case "end":
                    return _context47.stop();
                }
              }
            }, _callee47, this);
          }));
        }
      }, {
        key: "getAllHerstellerWithUuids",
        value: function getAllHerstellerWithUuids() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee48() {
            var result;
            return regeneratorRuntime.wrap(function _callee48$(_context48) {
              while (1) {
                switch (_context48.prev = _context48.next) {
                  case 0:
                    result = [];
                    return _context48.abrupt("return", this.dexie.hersteller.orderBy('Hersteller').each(function (hst) {
                      result.push({
                        Hersteller: hst.Hersteller,
                        uuid: hst.uuid
                      });
                    }).then(function () {
                      return result;
                    }));

                  case 2:
                  case "end":
                    return _context48.stop();
                }
              }
            }, _callee48, this);
          }));
        }
      }, {
        key: "getByNameOrCreate",
        value: function getByNameOrCreate(name) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee49() {
            var hstExisting;
            return regeneratorRuntime.wrap(function _callee49$(_context49) {
              while (1) {
                switch (_context49.prev = _context49.next) {
                  case 0:
                    _context49.next = 2;
                    return this.getByName(name);

                  case 2:
                    hstExisting = _context49.sent;

                    if (!hstExisting) {
                      _context49.next = 5;
                      break;
                    }

                    return _context49.abrupt("return", hstExisting);

                  case 5:
                    return _context49.abrupt("return", this.createAndGetData(name));

                  case 6:
                  case "end":
                    return _context49.stop();
                }
              }
            }, _callee49, this);
          }));
        }
      }, {
        key: "getByName",
        value: function getByName(name) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee50() {
            var exakt, fuzzy;
            return regeneratorRuntime.wrap(function _callee50$(_context50) {
              while (1) {
                switch (_context50.prev = _context50.next) {
                  case 0:
                    console.log('called HerstellerService.getByName(name)');
                    _context50.next = 3;
                    return this.dexie.hersteller.where({
                      Hersteller: name
                    }).first();

                  case 3:
                    exakt = _context50.sent;

                    if (!(exakt !== undefined)) {
                      _context50.next = 7;
                      break;
                    }

                    console.log('Found Hersteller with strict compare-search');
                    return _context50.abrupt("return", exakt);

                  case 7:
                    _context50.next = 9;
                    return this.dexie.hersteller.filter(function (item) {
                      return item.Hersteller.trim().toLowerCase() === name.trim().toLowerCase();
                    }).first();

                  case 9:
                    fuzzy = _context50.sent;

                    if (fuzzy === undefined) {
                      console.log('Not Found Hersteller with strict compare-search, found with caseinsensitive');
                    } else {
                      console.error('Hersteller not found!');
                    }

                    return _context50.abrupt("return", fuzzy);

                  case 12:
                  case "end":
                    return _context50.stop();
                }
              }
            }, _callee50, this);
          }));
        }
      }, {
        key: "create",
        value: function create(name) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee51() {
            var jobid, uid, uuid, item;
            return regeneratorRuntime.wrap(function _callee51$(_context51) {
              while (1) {
                switch (_context51.prev = _context51.next) {
                  case 0:
                    jobid = this.baseData.getCurrentJobid();
                    uid = this.baseData.getCurrentUid();
                    uuid = guid_typescript__WEBPACK_IMPORTED_MODULE_4__["Guid"].create().toString();
                    item = {
                      Hersteller: name,
                      uuid: uuid,
                      for_jobid: jobid,
                      created_at: new Date(),
                      created_uid: uid,
                      created_jobid: jobid
                    };
                    return _context51.abrupt("return", this.dexie.hersteller.add(item).then(function (insertUuid) {
                      return insertUuid;
                    })["catch"](function (reason) {
                      console.error(reason, 'HerstellerService.create #75', {
                        item: item
                      });
                      return '';
                    }));

                  case 5:
                  case "end":
                    return _context51.stop();
                }
              }
            }, _callee51, this);
          }));
        }
      }, {
        key: "createAndGetData",
        value: function createAndGetData(name) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee52() {
            var uuid;
            return regeneratorRuntime.wrap(function _callee52$(_context52) {
              while (1) {
                switch (_context52.prev = _context52.next) {
                  case 0:
                    _context52.next = 2;
                    return this.create(name);

                  case 2:
                    uuid = _context52.sent;
                    return _context52.abrupt("return", this.dexie.hersteller.get({
                      uuid: uuid
                    }));

                  case 4:
                  case "end":
                    return _context52.stop();
                }
              }
            }, _callee52, this);
          }));
        }
      }]);

      return HerstellerService;
    }();

    HerstellerService.ctorParameters = function () {
      return [{
        type: _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_2__["DexieService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_3__["BasedataService"]
      }];
    };

    HerstellerService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], HerstellerService);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/data-services/images.service.ts":
  /*!*******************************************************************!*\
    !*** ./src/app/pages/invent-form/data-services/images.service.ts ***!
    \*******************************************************************/

  /*! exports provided: ImagesService */

  /***/
  function srcAppPagesInventFormDataServicesImagesServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ImagesService", function () {
      return ImagesService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../../shared/services/dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var guid_typescript__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! guid-typescript */
    "./node_modules/guid-typescript/dist/guid.js");
    /* harmony import */


    var guid_typescript__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(guid_typescript__WEBPACK_IMPORTED_MODULE_3__);
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");

    var ImagesService = /*#__PURE__*/function () {
      function ImagesService(dexie, baseData) {
        _classCallCheck(this, ImagesService);

        this.dexie = dexie;
        this.baseData = baseData;
      }

      _createClass(ImagesService, [{
        key: "insertArtikelImage",
        value: function insertArtikelImage(image, useJobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee53() {
            var _this22 = this;

            var jobid, uid, item;
            return regeneratorRuntime.wrap(function _callee53$(_context53) {
              while (1) {
                switch (_context53.prev = _context53.next) {
                  case 0:
                    jobid = useJobid || this.baseData.getCurrentJobid();
                    uid = this.baseData.getCurrentUid();
                    item = {
                      uuid: guid_typescript__WEBPACK_IMPORTED_MODULE_3__["Guid"].create().toString(),
                      name: image.name,
                      desc: image.desc,
                      size: image.size,
                      width: image.width,
                      height: image.height,
                      type: image.type,
                      for_jobid: image.for_jobid,
                      mcuuid: image.mcuuid,
                      gcuuid: image.gcuuid,
                      url: image.url || '',
                      data_binary: image.data_binary || null,
                      data_url: image.data_url || null,
                      revnr: 1,
                      created_at: image.created_at || new Date(),
                      created_uid: image.created_uid || uid,
                      created_jobid: image.created_jobid || jobid
                    };
                    return _context53.abrupt("return", this.dexie.images.add(item).then(function (imgUuid) {
                      _this22.addImageKatalogRef({
                        for_jobid: image.for_jobid,
                        RefTable: 'ObjektKatalogMandant',
                        RefUuid: image.mcuuid,
                        ImgUuid: imgUuid,
                        RefText: image.desc || image.name,
                        Pos: 1,
                        Kategorie: ''
                      });

                      return imgUuid;
                    })["catch"](function (reason) {
                      console.error(reason, 'ImageService.insertArtikelImage() #86 add ', {
                        uuid: item.uuid,
                        mcuuid: item.mcuuid,
                        gcuuid: item.gcuuid,
                        name: item.name,
                        size: item.size,
                        width: item.width,
                        height: item.height
                      });
                      return null;
                    }));

                  case 4:
                  case "end":
                    return _context53.stop();
                }
              }
            }, _callee53, this);
          }));
        }
      }, {
        key: "addImageKatalogRef",
        value: function addImageKatalogRef(data) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee54() {
            var uid, devID, jobid, item;
            return regeneratorRuntime.wrap(function _callee54$(_context54) {
              while (1) {
                switch (_context54.prev = _context54.next) {
                  case 0:
                    uid = this.baseData.getCurrentUid();
                    devID = this.baseData.getCurrentDeviceId();
                    jobid = this.baseData.getCurrentJobid();
                    item = {
                      for_jobid: data.for_jobid || jobid,
                      RefTable: data.RefTable,
                      RefUuid: data.RefUuid,
                      ImgUuid: data.ImgUuid,
                      RefText: data.RefText,
                      Pos: data.Pos,
                      Kategorie: data.Kategorie,
                      created_at: new Date(),
                      created_uid: uid,
                      created_jobid: jobid,
                      created_device_id: devID
                    };
                    return _context54.abrupt("return", this.dexie.objektKatalogImages.add(item).then(function (uuid) {
                      return uuid;
                    })["catch"](function (reason) {
                      console.error(reason, 'ImageService.addImageKatalogRef #119 ', {
                        item: item
                      });
                      return '';
                    }));

                  case 5:
                  case "end":
                    return _context54.stop();
                }
              }
            }, _callee54, this);
          }));
        }
      }, {
        key: "putRaumImage",
        value: function putRaumImage(image, ruuid, useJobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee55() {
            return regeneratorRuntime.wrap(function _callee55$(_context55) {
              while (1) {
                switch (_context55.prev = _context55.next) {
                  case 0:
                    return _context55.abrupt("return", this.insertRaumImage(image, ruuid, useJobid));

                  case 1:
                  case "end":
                    return _context55.stop();
                }
              }
            }, _callee55, this);
          }));
        }
      }, {
        key: "putArtikelImage",
        value: function putArtikelImage(image, useJobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee56() {
            return regeneratorRuntime.wrap(function _callee56$(_context56) {
              while (1) {
                switch (_context56.prev = _context56.next) {
                  case 0:
                    _context56.next = 2;
                    return this.dexie.images.where({
                      gcuuid: image.gcuuid
                    })["delete"]();

                  case 2:
                    return _context56.abrupt("return", this.insertArtikelImage(image, useJobid));

                  case 3:
                  case "end":
                    return _context56.stop();
                }
              }
            }, _callee56, this);
          }));
        }
      }, {
        key: "getImageByMcuuid",
        value: function getImageByMcuuid(mcuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee57() {
            return regeneratorRuntime.wrap(function _callee57$(_context57) {
              while (1) {
                switch (_context57.prev = _context57.next) {
                  case 0:
                    console.log('called ImageService.getImageByMcuuid:', mcuuid);
                    return _context57.abrupt("return", this.dexie.images.filter(function (img) {
                      return 'mcuuid' in img && img.mcuuid === mcuuid;
                    }).first().then(function (img) {
                      return img;
                    }, function (err) {
                      return null;
                    }));

                  case 3:
                  case "end":
                    return _context57.stop();
                }
              }
            }, _callee57, this);
          }));
        }
      }, {
        key: "getImageByGcuuid",
        value: function getImageByGcuuid(gcuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee58() {
            return regeneratorRuntime.wrap(function _callee58$(_context58) {
              while (1) {
                switch (_context58.prev = _context58.next) {
                  case 0:
                    console.log('called ImageService.getImageByGcuuid:', gcuuid);
                    return _context58.abrupt("return", this.dexie.images.where({
                      gcuuid: gcuuid
                    }).first());

                  case 2:
                  case "end":
                    return _context58.stop();
                }
              }
            }, _callee58, this);
          }));
        }
      }, {
        key: "getImageByUuid",
        value: function getImageByUuid(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee59() {
            return regeneratorRuntime.wrap(function _callee59$(_context59) {
              while (1) {
                switch (_context59.prev = _context59.next) {
                  case 0:
                    console.log('called ImageService.getImageByUuid:', uuid);
                    return _context59.abrupt("return", this.dexie.images.where({
                      uuid: uuid
                    }).first().then(function (img) {
                      return img;
                    }, function (err) {
                      return null;
                    }));

                  case 2:
                  case "end":
                    return _context59.stop();
                }
              }
            }, _callee59, this);
          }));
        }
      }, {
        key: "imageExistsOfGcuuid",
        value: function imageExistsOfGcuuid(gcuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee60() {
            return regeneratorRuntime.wrap(function _callee60$(_context60) {
              while (1) {
                switch (_context60.prev = _context60.next) {
                  case 0:
                    return _context60.abrupt("return", this.dexie.images.where({
                      gcuuid: gcuuid
                    }).count().then(function (nr) {
                      return nr > 0;
                    })["catch"](function (err) {
                      console.error(err);
                      return false;
                    }));

                  case 1:
                  case "end":
                    return _context60.stop();
                }
              }
            }, _callee60, this);
          }));
        }
      }, {
        key: "insertRaumImage",
        value: function insertRaumImage(image, ruuid, useJobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee61() {
            var _this23 = this;

            var jobid, uid, numExists, inc, incExists, incName, item;
            return regeneratorRuntime.wrap(function _callee61$(_context61) {
              while (1) {
                switch (_context61.prev = _context61.next) {
                  case 0:
                    jobid = useJobid || this.baseData.getCurrentJobid();
                    uid = this.baseData.getCurrentUid();
                    _context61.next = 4;
                    return this.dexie.images.where({
                      for_jobid: image.for_jobid,
                      name: image.name
                    }).count();

                  case 4:
                    numExists = _context61.sent;

                    if (!numExists) {
                      _context61.next = 16;
                      break;
                    }

                    inc = 1;
                    incExists = 0;
                    incName = '';

                  case 9:
                    ++inc;
                    incName = image.name + '(' + inc + ')';
                    _context61.next = 13;
                    return this.dexie.images.where({
                      for_jobid: image.for_jobid,
                      name: incName
                    }).count();

                  case 13:
                    incExists = _context61.sent;

                  case 14:
                    if (incExists > 0) {
                      _context61.next = 9;
                      break;
                    }

                  case 15:
                    image.name = incName;

                  case 16:
                    item = {
                      uuid: guid_typescript__WEBPACK_IMPORTED_MODULE_3__["Guid"].create().toString(),
                      name: image.name,
                      desc: image.desc,
                      size: image.size,
                      width: image.width,
                      height: image.height,
                      type: image.type,
                      for_jobid: image.for_jobid,
                      mcuuid: '',
                      gcuuid: '',
                      url: image.url || '',
                      data_binary: image.data_binary || null,
                      data_url: image.data_url || null,
                      revnr: 1,
                      created_at: image.created_at || new Date(),
                      created_uid: image.created_uid || uid,
                      created_jobid: image.created_jobid || jobid
                    };
                    return _context61.abrupt("return", this.dexie.images.add(item).then(function (imgUuid) {
                      _this23.addImageKatalogRef({
                        for_jobid: image.for_jobid,
                        RefTable: 'Raeume',
                        RefUuid: ruuid,
                        ImgUuid: imgUuid,
                        RefText: image.desc || image.name,
                        Pos: 1,
                        Kategorie: 'Bild'
                      });

                      return imgUuid;
                    })["catch"](function (reason) {
                      console.error(reason, 'ImagesService.insertRaumImage() #214 images.add', {
                        uuid: item.uuid,
                        name: item.name,
                        size: item.size,
                        width: item.width,
                        height: item.height
                      });
                      return null;
                    }));

                  case 18:
                  case "end":
                    return _context61.stop();
                }
              }
            }, _callee61, this);
          }));
        }
      }, {
        key: "deleteByUuid",
        value: function deleteByUuid(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee62() {
            var _this24 = this;

            return regeneratorRuntime.wrap(function _callee62$(_context62) {
              while (1) {
                switch (_context62.prev = _context62.next) {
                  case 0:
                    return _context62.abrupt("return", this.dexie.images.where({
                      uuid: uuid
                    })["delete"]().then(function (num) {
                      return _this24.dexie.objektKatalogImages.where({
                        ImgUuid: uuid
                      })["delete"]().then(function (numLinks) {
                        return num + numLinks;
                      })["catch"](function () {
                        console.error('ERROR: Can not delete links in objektKatalogImages for uuid: ' + uuid);
                        return num;
                      });
                    })["catch"](function () {
                      console.error('ERROR: Cannot Delete Image with uuid: ' + uuid);
                      return 0;
                    }));

                  case 1:
                  case "end":
                    return _context62.stop();
                }
              }
            }, _callee62, this);
          }));
        }
      }]);

      return ImagesService;
    }();

    ImagesService.ctorParameters = function () {
      return [{
        type: _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_2__["DexieService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_4__["BasedataService"]
      }];
    };

    ImagesService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], ImagesService);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/data-services/inventar.service.ts":
  /*!*********************************************************************!*\
    !*** ./src/app/pages/invent-form/data-services/inventar.service.ts ***!
    \*********************************************************************/

  /*! exports provided: InventarEditErrorCode, InventarService */

  /***/
  function srcAppPagesInventFormDataServicesInventarServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "InventarEditErrorCode", function () {
      return InventarEditErrorCode;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "InventarService", function () {
      return InventarService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../../shared/interfaces/dexie.interfaces */
    "./src/app/shared/interfaces/dexie.interfaces.ts");
    /* harmony import */


    var _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../../shared/services/dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var guid_typescript__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! guid-typescript */
    "./node_modules/guid-typescript/dist/guid.js");
    /* harmony import */


    var guid_typescript__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(guid_typescript__WEBPACK_IMPORTED_MODULE_4__);
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _auth_auth_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! ../../auth/auth.service */
    "./src/app/pages/auth/auth.service.ts");
    /* harmony import */


    var _artikel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ./artikel.service */
    "./src/app/pages/invent-form/data-services/artikel.service.ts");
    /* harmony import */


    var _hersteller_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! ./hersteller.service */
    "./src/app/pages/invent-form/data-services/hersteller.service.ts");
    /* harmony import */


    var _shared_services_variables_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! ../../../shared/services/variables.service */
    "./src/app/shared/services/variables.service.ts");
    /* harmony import */


    var _raum_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
    /*! ./raum.service */
    "./src/app/pages/invent-form/data-services/raum.service.ts");

    var InventarEditErrorCode;

    (function (InventarEditErrorCode) {
      InventarEditErrorCode[InventarEditErrorCode["NoError"] = 0] = "NoError";
      InventarEditErrorCode[InventarEditErrorCode["RaumNotFound"] = 1] = "RaumNotFound";
      InventarEditErrorCode[InventarEditErrorCode["InventarNotFound"] = 2] = "InventarNotFound";
      InventarEditErrorCode[InventarEditErrorCode["ArtikelNotFound"] = 3] = "ArtikelNotFound";
      InventarEditErrorCode[InventarEditErrorCode["ArtikelMandantNotFound"] = 4] = "ArtikelMandantNotFound";
      InventarEditErrorCode[InventarEditErrorCode["ArtikelGlobalNotFound"] = 5] = "ArtikelGlobalNotFound";
    })(InventarEditErrorCode || (InventarEditErrorCode = {}));

    var InventarService = /*#__PURE__*/function () {
      function InventarService(dexie, authService, baseData, herstellerService, artikelService, variablesService, raumService) {
        _classCallCheck(this, InventarService);

        this.dexie = dexie;
        this.authService = authService;
        this.baseData = baseData;
        this.herstellerService = herstellerService;
        this.artikelService = artikelService;
        this.variablesService = variablesService;
        this.raumService = raumService;
        this.changed = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
      }

      _createClass(InventarService, [{
        key: "returnResultSuccess",
        value: function returnResultSuccess(data) {
          var result = {
            type: data.type,
            success: true,
            message: data.message || ''
          };

          if (data.type === 1
          /* Create */
          ) {
              result.insertID = data.insertID;
              result.insertUUID = data.insertUUID;
            }

          return result;
        }
      }, {
        key: "getJobiId",
        value: function getJobiId() {
          return this.baseData.getCurrentJobid();
        }
      }, {
        key: "getMid",
        value: function getMid() {
          return this.baseData.getCurrentMid();
        }
      }, {
        key: "getUserId",
        value: function getUserId() {
          return this.authService.getUser().id;
        }
      }, {
        key: "getFreshUuid",
        value: function getFreshUuid() {
          return guid_typescript__WEBPACK_IMPORTED_MODULE_4__["Guid"].create().toString();
        }
      }, {
        key: "getNewKunstBarcode",
        value: function getNewKunstBarcode() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee63() {
            var jobid, varLastOffset, devid, offsetDefault, codeCheckInc, code, itemCheck;
            return regeneratorRuntime.wrap(function _callee63$(_context63) {
              while (1) {
                switch (_context63.prev = _context63.next) {
                  case 0:
                    jobid = this.getJobiId();
                    varLastOffset = 'KunstBarcodeOffset_' + jobid;
                    devid = this.baseData.getCurrentDeviceId().toString(10);
                    offsetDefault = '9' + devid.padStart(4, '0') + '00001';
                    _context63.next = 6;
                    return this.variablesService.get(varLastOffset, parseInt(offsetDefault, 10));

                  case 6:
                    codeCheckInc = _context63.sent;

                    if (!codeCheckInc) {
                      codeCheckInc = parseInt(offsetDefault, 10);
                    }

                    code = ''; // codeCheckInc;

                    itemCheck = null;

                  case 10:
                    code = codeCheckInc.toString(10);
                    _context63.next = 13;
                    return this.dexie.inventar.where({
                      for_jobid: jobid,
                      code: code
                    }).first();

                  case 13:
                    itemCheck = _context63.sent;
                    ++codeCheckInc;

                  case 15:
                    if (itemCheck) {
                      _context63.next = 10;
                      break;
                    }

                  case 16:
                    _context63.next = 18;
                    return this.variablesService.set(varLastOffset, parseInt(code, 10));

                  case 18:
                    return _context63.abrupt("return", code);

                  case 19:
                  case "end":
                    return _context63.stop();
                }
              }
            }, _callee63, this);
          }));
        }
      }, {
        key: "returnResultError",
        value: function returnResultError(data) {
          return {
            type: data.type,
            success: false,
            message: data.message || '',
            errorMsg: data.errorMsg || '',
            errorCode: data.errorCode || null
          };
        }
      }, {
        key: "getHello",
        value: function getHello() {
          return 'hello';
        }
      }, {
        key: "getInventar",
        value: function getInventar(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee64() {
            var result;
            return regeneratorRuntime.wrap(function _callee64$(_context64) {
              while (1) {
                switch (_context64.prev = _context64.next) {
                  case 0:
                    result = {
                      success: false,
                      inventar: null,
                      artikelRef: null,
                      artikelData: null,
                      hersteller: null
                    };
                    console.log('InventarService #155 getInventar(uuid: ', uuid, ')');
                    _context64.next = 4;
                    return this.dexie.inventar.get(uuid);

                  case 4:
                    result.inventar = _context64.sent;
                    console.log('InventarService #157 inventar.get(uuid: ', uuid, ')', {
                      result: result
                    });

                    if (!result.inventar) {
                      _context64.next = 25;
                      break;
                    }

                    console.log('InventarService #160 objektKatalogMandant.get(uuid: ', result.inventar.mcuuid, ')');
                    _context64.next = 10;
                    return this.dexie.objektKatalogMandant.get(result.inventar.mcuuid);

                  case 10:
                    result.artikelRef = _context64.sent;
                    console.log('InventarService #162 objektKatalogMandant.get(uuid: ', result.inventar.mcuuid, ')', {
                      resultArtikelRef: result.artikelRef
                    });

                    if (!result.artikelRef) {
                      _context64.next = 25;
                      break;
                    }

                    result.success = true;
                    console.log('InventarService #155 objektKatalogGlobal.get(uuid: ', result.artikelRef.gcuuid, ')');
                    _context64.next = 17;
                    return this.dexie.objektKatalogGlobal.get(result.artikelRef.gcuuid);

                  case 17:
                    result.artikelData = _context64.sent;
                    console.log('InventarService #155 objektKatalogGlobal.get(uuid: ', result.artikelRef.gcuuid, ')', {
                      resultArtikelData: result.artikelData
                    });

                    if (!result.artikelData.huuid) {
                      _context64.next = 25;
                      break;
                    }

                    console.log('InventarService #172 herteller.get(huuid: ', result.artikelData.huuid, ')');
                    _context64.next = 23;
                    return this.dexie.hersteller.get(result.artikelData.huuid);

                  case 23:
                    result.hersteller = _context64.sent;
                    console.log('InventarService #174 hersteller.get(huuid: ', result.artikelData.huuid, ')', {
                      resultHersteller: result.hersteller
                    });

                  case 25:
                    return _context64.abrupt("return", result);

                  case 26:
                  case "end":
                    return _context64.stop();
                }
              }
            }, _callee64, this);
          }));
        }
      }, {
        key: "insertInventar",
        value: function insertInventar(inventar, useJobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee65() {
            var jobid, uid, uuid, item, log, insertUuid, saved, lkupItem;
            return regeneratorRuntime.wrap(function _callee65$(_context65) {
              while (1) {
                switch (_context65.prev = _context65.next) {
                  case 0:
                    jobid = useJobid || this.getJobiId();
                    uid = this.getUserId();
                    uuid = this.getFreshUuid();
                    console.log('InventarService #189 insertInventar: ', {
                      inventar: inventar
                    });
                    item = {
                      mcid: inventar.mcid,
                      uuid: uuid,
                      mcuuid: inventar.mcuuid,
                      hash: '',
                      code: inventar.code,
                      ruuid: inventar.ruuid,
                      ruuid_neu: inventar.ruuid,
                      for_jobid: inventar.jobid || jobid,
                      jobid: inventar.jobid || jobid,
                      created_at: inventar.created_at || new Date(),
                      created_uid: inventar.created_uid || uid,
                      created_jobid: inventar.created_jobid || jobid
                    };
                    log = {
                      log: true
                    };
                    _context65.next = 8;
                    return this.dexie.inventar.add(Object.assign({}, item, log)).then(function (id) {
                      return id;
                    })["catch"](function (reason) {
                      console.error(reason, 'InventarService.insertInventar() #239 inventar.add', {
                        item: item
                      });
                      return '';
                    });

                  case 8:
                    insertUuid = _context65.sent;
                    console.log('InventarService #207 insertInventar: ', {
                      insertUuid: insertUuid,
                      data: Object.assign({}, item, log)
                    });
                    _context65.next = 12;
                    return this.dexie.inventar.get(insertUuid);

                  case 12:
                    saved = _context65.sent;
                    console.log('InventarService #207 insertInventar: ', {
                      insertUuid: insertUuid,
                      saved: saved,
                      data: Object.assign({}, item, log)
                    });

                    if (!(insertUuid && saved)) {
                      _context65.next = 20;
                      break;
                    }

                    this.dexie.barcodeLookup.add({
                      code: saved.code,
                      for_jobid: jobid,
                      table: 'inventar',
                      key: 'uuid',
                      uuid: insertUuid,
                      updateHelper: 11
                    })["catch"](function (reason) {
                      console.error(reason, 'InventarService.insertInventar() barcodeLookup.add', {
                        code: saved.code,
                        for_jobid: jobid,
                        table: 'inventar',
                        key: 'uuid',
                        uuid: insertUuid,
                        updateHelper: 11
                      });
                    });
                    _context65.next = 18;
                    return this.dexie.barcodeLookup.get({
                      code: saved.code,
                      for_jobid: jobid
                    });

                  case 18:
                    lkupItem = _context65.sent;
                    console.log('InventarService #220 insertInventar: ', {
                      insertUuid: insertUuid,
                      saved: saved,
                      lkupItem: lkupItem,
                      data: Object.assign({}, item, log)
                    });

                  case 20:
                    this.changed.emit({
                      type: 1
                      /* Create */
                      ,
                      table: this.dexie.inventar.name,
                      key: insertUuid,
                      uuid: uuid,
                      obj: item
                    });
                    return _context65.abrupt("return", this.returnResultSuccess({
                      type: 1
                      /* Create */
                      ,
                      insertUUID: uuid
                    }));

                  case 22:
                  case "end":
                    return _context65.stop();
                }
              }
            }, _callee65, this);
          }));
        }
      }, {
        key: "updateArtikelRef",
        value: function updateArtikelRef(uuid, inventar, useJobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee66() {
            var jobid, uid, inventarEditResult, item;
            return regeneratorRuntime.wrap(function _callee66$(_context66) {
              while (1) {
                switch (_context66.prev = _context66.next) {
                  case 0:
                    jobid = useJobid || this.getJobiId();
                    uid = this.getUserId();
                    /*
                    const inventar: DBDIInventar = {
                      mcid: this.formInventar.mcid,
                      mcuuid: this.formInventar.mcuuid,
                      ruuid: this.formInventar.ruuid,
                      code: this.formInventar.Barcode,
                      jobid,
                      created_at: new Date(),
                      created_uid: uid
                    };
                    */

                    inventarEditResult = {
                      type: 2
                      /* Update */
                      ,
                      success: false,
                      message: '',
                      errorMsg: '',
                      errorCode: InventarEditErrorCode.NoError,
                      insertUUID: uuid
                    };
                    item = {
                      mcid: inventar.mcid,
                      uuid: uuid,
                      mcuuid: inventar.mcuuid,
                      code: inventar.code,
                      jobid: inventar.jobid || jobid,
                      modified_at: inventar.modified_at || new Date(),
                      modified_uid: inventar.modified_uid || uid,
                      modified_jobid: inventar.modified_jobid || jobid
                    };
                    return _context66.abrupt("return", this.dexie.inventar.update(uuid, item).then(function (n) {
                      inventarEditResult.success = true;
                      inventarEditResult.message = 'Inventar wurde aktualisiert!';
                      return inventarEditResult;
                    }, function (reason) {
                      console.error('InventarService updateArtikelRef #277', {
                        uuid: uuid,
                        inventar: inventar,
                        updateData: item,
                        reason: reason
                      });
                      inventarEditResult.errorCode = InventarEditErrorCode.InventarNotFound;
                      inventarEditResult.message = 'Fehler bei Aktualisierung der Inventardaten! (siehe console.error)';
                      inventarEditResult.errorMsg = JSON.stringify(reason);
                      return inventarEditResult;
                    }));

                  case 5:
                  case "end":
                    return _context66.stop();
                }
              }
            }, _callee66, this);
          }));
        }
      }, {
        key: "updateByUuid",
        value: function updateByUuid(uuid, daten) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee67() {
            var _this25 = this;

            var updateData, jobid, uid, mid, devID, oldData, bUpdateBarceLookup, globalKatalogDaten, hstQuery, okgFilledFields, okgEmptyFieldnames, okgArtikelMatches, okgArtikel, okmArtikelRef, updateInv, result;
            return regeneratorRuntime.wrap(function _callee67$(_context67) {
              while (1) {
                switch (_context67.prev = _context67.next) {
                  case 0:
                    // return this.getInventar(ivid);
                    console.log('#205 updateById', {
                      uuid: uuid,
                      daten: daten
                    });
                    updateData = daten;
                    jobid = this.getJobiId();
                    uid = this.getUserId();
                    mid = this.getMid();
                    devID = this.baseData.getCurrentDeviceId();
                    _context67.next = 8;
                    return this.getInventar(uuid);

                  case 8:
                    oldData = _context67.sent;
                    bUpdateBarceLookup = false;
                    globalKatalogDaten = {
                      Bezeichnung: daten.Bezeichnung,
                      Gruppe: daten.Gruppe,
                      Kategorie: daten.Kategorie,
                      Typ: daten.Typ,
                      Farbe: daten.Farbe,
                      Groesse: daten.Groesse,
                      hid: daten.hid || 0,
                      huuid: daten.huuid || null
                    };

                    if (!daten.Hersteller) {
                      _context67.next = 26;
                      break;
                    }

                    console.log('#226 checkAndGet Hersteller: ', daten.Hersteller);
                    hstQuery = this.dexie.hersteller.where('Hersteller').equals(daten.Hersteller);
                    _context67.next = 16;
                    return hstQuery.count();

                  case 16:
                    _context67.t0 = _context67.sent;

                    if (!(_context67.t0 > 0)) {
                      _context67.next = 23;
                      break;
                    }

                    console.log('#228 checkAndGet Hersteller existiert bereits');
                    _context67.next = 21;
                    return this.dexie.hersteller.where('Hersteller').equals(daten.Hersteller).first().then(function (hstData) {
                      globalKatalogDaten.hid = hstData.hid;
                      globalKatalogDaten.huuid = hstData.uuid;
                    });

                  case 21:
                    _context67.next = 26;
                    break;

                  case 23:
                    console.log('#238 checkAndGet Hersteller wird angelegt');
                    _context67.next = 26;
                    return this.herstellerService.createAndGetData(daten.Hersteller).then(function (hst) {
                      globalKatalogDaten.hid = hst.hid;
                      globalKatalogDaten.huuid = hst.uuid;
                    });

                  case 26:
                    okgFilledFields = this.getFilledFields(globalKatalogDaten);
                    okgEmptyFieldnames = Object.keys(this.getEmptyFields(globalKatalogDaten));
                    _context67.next = 30;
                    return this.dexie.objektKatalogGlobal.filter(function (rslt) {
                      for (var _i6 = 0, _Object$keys5 = Object.keys(okgFilledFields); _i6 < _Object$keys5.length; _i6++) {
                        var ff = _Object$keys5[_i6];
                        var val = okgFilledFields[ff];
                        var valRslt = typeof rslt[ff] === 'string' ? rslt[ff].trim() : rslt[ff];

                        if (val !== valRslt) {
                          return false;
                        }
                      }

                      var _iterator3 = _createForOfIteratorHelper(okgEmptyFieldnames),
                          _step3;

                      try {
                        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                          var ef = _step3.value;

                          var _valRslt = typeof rslt[ef] === 'string' ? rslt[ef].trim() : rslt[ef];

                          if (null !== _valRslt && '' !== _valRslt) {
                            return false;
                          }
                        }
                      } catch (err) {
                        _iterator3.e(err);
                      } finally {
                        _iterator3.f();
                      }

                      return true;
                    }).toArray();

                  case 30:
                    okgArtikelMatches = _context67.sent;
                    console.log('#267 okgArtikelMatches', {
                      okgFilledFields: okgFilledFields,
                      okgEmptyFieldnames: okgEmptyFieldnames,
                      okgArtikelMatches: okgArtikelMatches
                    });
                    okgArtikel = null;
                    okmArtikelRef = null;
                    _context67.t1 = okgArtikelMatches.length;
                    _context67.next = _context67.t1 === 0 ? 37 : _context67.t1 === 1 ? 42 : 44;
                    break;

                  case 37:
                    console.log('#273 checkAndGet Artikel wird angelegt');
                    _context67.next = 40;
                    return this.artikelService.insertArtikelData(globalKatalogDaten);

                  case 40:
                    okgArtikel = _context67.sent;
                    return _context67.abrupt("break", 45);

                  case 42:
                    okgArtikel = okgArtikelMatches[0];
                    return _context67.abrupt("break", 45);

                  case 44:
                    okgArtikel = okgArtikelMatches.sort(function (a, b) {
                      var rankA = a.created_jobid === jobid ? 1 : a.modified_jobid === jobid ? 2 : 3;
                      var rankB = b.created_jobid === jobid ? 1 : b.modified_jobid === jobid ? 2 : 3;
                      return rankA < rankB ? -1 : rankA > rankB ? 1 : 0;
                    })[0];

                  case 45:
                    if (!okgArtikel) {
                      _context67.next = 68;
                      break;
                    }

                    console.log('#290 checkAndGet Artikel existiert/angelegt');
                    _context67.next = 49;
                    return this.dexie.objektKatalogMandant.where({
                      mid: mid,
                      for_jobid: jobid,
                      gcid: okgArtikel.gcid
                    }).first();

                  case 49:
                    okmArtikelRef = _context67.sent;

                    if (okmArtikelRef) {
                      _context67.next = 55;
                      break;
                    }

                    console.log('#296 checkAndGet ArtikelRef nuss angeleget werden');
                    _context67.next = 54;
                    return this.artikelService.insertArtikelRefByGcidGcuuid(okgArtikel.uuid);

                  case 54:
                    okmArtikelRef = _context67.sent;

                  case 55:
                    updateInv = {};

                    if (okmArtikelRef.uuid !== daten.mcuuid) {
                      updateInv.mcuuid = okmArtikelRef.uuid;
                    }

                    if (oldData.inventar.Zustand !== daten.Zustand) {
                      updateInv.Zustand = daten.Zustand;
                    }

                    if (oldData.inventar.code !== daten.code) {
                      updateInv.code = daten.code;
                      bUpdateBarceLookup = true;
                    }

                    if (!(Object.keys(updateInv).length > 0)) {
                      _context67.next = 68;
                      break;
                    }

                    console.log('#310 checkAndGet ArtikelRef-ID muss im Inventar aktualisiert werden');
                    updateInv.modified_at = new Date();
                    updateInv.modified_uid = uid;
                    updateInv.modified_jobid = jobid;
                    updateInv.modified_device_id = devID;
                    updateInv.log = true;
                    _context67.next = 68;
                    return this.dexie.inventar.update(uuid, updateInv).then(function () {
                      if (bUpdateBarceLookup) {
                        console.log('InventarService #353 call updateBarcodelookup(', {
                          ivid: uuid,
                          datenCode: daten.code
                        });

                        _this25.updateBarcodeLookup(uuid, daten.code, oldData.inventar.code);
                      } else {
                        console.log('InventarService #356 Barcode has not changed');
                      }
                    });

                  case 68:
                    _context67.next = 70;
                    return this.getInventar(uuid);

                  case 70:
                    result = _context67.sent;
                    console.log('#322 return Inventar-Data', result);
                    return _context67.abrupt("return", result);

                  case 73:
                  case "end":
                    return _context67.stop();
                }
              }
            }, _callee67, this);
          }));
        }
      }, {
        key: "updateRefs",
        value: function updateRefs(uuid, mcuuid, daten) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee68() {
            var _this26 = this;

            var jobid, uid, mid, devID, updateInv, oldData, bUpdateBarceLookup;
            return regeneratorRuntime.wrap(function _callee68$(_context68) {
              while (1) {
                switch (_context68.prev = _context68.next) {
                  case 0:
                    jobid = this.getJobiId();
                    uid = this.getUserId();
                    mid = this.getMid();
                    devID = this.baseData.getCurrentDeviceId();
                    updateInv = {};
                    _context68.next = 7;
                    return this.getInventar(uuid);

                  case 7:
                    oldData = _context68.sent;
                    bUpdateBarceLookup = false;
                    updateInv.mcuuid = mcuuid;

                    if (daten.Zustand && daten.Zustand !== oldData.inventar.Zustand) {
                      updateInv.Zustand = daten.Zustand;
                    }

                    if (daten.code && daten.code !== oldData.inventar.code) {
                      updateInv.code = daten.code;
                      bUpdateBarceLookup = true;
                    }

                    console.log('#310 checkAndGet ArtikelRef-ID muss im Inventar aktualisiert werden');
                    updateInv.modified_at = new Date();
                    updateInv.modified_uid = uid;
                    updateInv.modified_jobid = jobid;
                    updateInv.modified_device_id = devID;
                    updateInv.log = true;
                    this.dexie.inventar.update(uuid, updateInv).then(function () {
                      if (bUpdateBarceLookup) {
                        _this26.updateBarcodeLookup(uuid, daten.code, oldData.inventar.code);
                      }
                    });

                  case 19:
                  case "end":
                    return _context68.stop();
                }
              }
            }, _callee68, this);
          }));
        }
      }, {
        key: "updateBarcodeLookup",
        value: function updateBarcodeLookup(uuid, code, oldCode) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee69() {
            var savedRaumDataCode, savedRaumData, jobid, lkupKey, bcItem;
            return regeneratorRuntime.wrap(function _callee69$(_context69) {
              while (1) {
                switch (_context69.prev = _context69.next) {
                  case 0:
                    console.log('InventarService #410 called updateBarcodelookup(', {
                      uuid: uuid,
                      code: code
                    }, ')');
                    savedRaumDataCode = oldCode;
                    _context69.next = 4;
                    return this.dexie.inventar.get(uuid);

                  case 4:
                    savedRaumData = _context69.sent;

                    if (!oldCode) {
                      savedRaumDataCode = savedRaumData.code;
                    }

                    jobid = this.getJobiId();
                    console.log('InventarService #413 check if code has changed(', {
                      ivid: uuid,
                      code: code,
                      savedRaumDataCode: savedRaumDataCode
                    }, ')');

                    if (!(savedRaumDataCode !== code)) {
                      _context69.next = 21;
                      break;
                    }

                    lkupKey = {
                      code: savedRaumDataCode,
                      for_jobid: jobid
                    };
                    _context69.next = 12;
                    return this.dexie.barcodeLookup.get(lkupKey);

                  case 12:
                    bcItem = _context69.sent;

                    if (!bcItem) {
                      _context69.next = 19;
                      break;
                    }

                    console.log('InventarService #420 make update on existing bcItem: ', {
                      lkupKey: lkupKey
                    });
                    _context69.next = 17;
                    return this.dexie.barcodeLookup.update([savedRaumDataCode, jobid], {
                      code: code
                    });

                  case 17:
                    _context69.next = 21;
                    break;

                  case 19:
                    console.log('InventarService #425 create new bcItem');
                    this.dexie.barcodeLookup.put({
                      code: code,
                      for_jobid: jobid,
                      key: 'uuid',
                      table: 'inventar',
                      updateHelper: 1,
                      uuid: savedRaumData.uuid
                    });

                  case 21:
                  case "end":
                    return _context69.stop();
                }
              }
            }, _callee69, this);
          }));
        }
      }, {
        key: "getFilledFields",
        value: function getFilledFields(obj) {
          var allFields = Object.keys(obj);
          var filledFields = {};

          for (var _i7 = 0, _allFields = allFields; _i7 < _allFields.length; _i7++) {
            var f = _allFields[_i7];
            var val = typeof obj[f] === 'string' ? obj[f].trim() : obj[f];

            if (null === val || '' === val) {
              continue;
            }

            filledFields[f] = val;
          }

          return filledFields;
        }
      }, {
        key: "getEmptyFields",
        value: function getEmptyFields(obj) {
          var allFields = Object.keys(obj);
          var emptyFields = {};

          for (var _i8 = 0, _allFields2 = allFields; _i8 < _allFields2.length; _i8++) {
            var f = _allFields2[_i8];
            var val = typeof obj[f] === 'string' ? obj[f].trim() : obj[f];

            if (null === val || '' === val) {
              emptyFields[f] = val;
            }
          }

          return emptyFields;
        }
      }, {
        key: "assignRaum",
        value: function assignRaum(uuid, ruuid, useJobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee70() {
            var _this27 = this;

            var db, inventar, raeume, jobid, uid, devid, log;
            return regeneratorRuntime.wrap(function _callee70$(_context70) {
              while (1) {
                switch (_context70.prev = _context70.next) {
                  case 0:
                    db = this.dexie;
                    inventar = db.inventar;
                    raeume = db.raeume;
                    jobid = useJobid || this.baseData.getCurrentJobid();
                    uid = this.baseData.getCurrentUid();
                    devid = this.baseData.getCurrentDeviceId();
                    log = {
                      log: true
                    };
                    console.log('InventoryEditorService.assignInventarToRaum', {
                      uuid: uuid,
                      ruuid: ruuid,
                      jobid: jobid,
                      uid: uid,
                      devid: devid
                    });
                    return _context70.abrupt("return", Promise.all([inventar.get(uuid), raeume.get(ruuid)]).then(function (result) {
                      var inv = result[0];
                      var raum = result[1];
                      console.log('InventoryEditorService.assignInventarToRaum', {
                        inv: inv,
                        raum: raum
                      });

                      if (!inv) {
                        return _this27.returnResultError({
                          type: 2
                          /* Update */
                          ,
                          errorCode: InventarEditErrorCode.InventarNotFound
                        });
                      }

                      if (!raum) {
                        return _this27.returnResultError({
                          type: 2
                          /* Update */
                          ,
                          errorCode: InventarEditErrorCode.RaumNotFound
                        });
                      }

                      var changes = {
                        ruuid: raum.uuid,
                        jobid: jobid,
                        modified_at: new Date(),
                        modified_uid: uid,
                        modified_jobid: jobid,
                        modified_device_id: devid
                      };
                      return inventar.update(inv.uuid, Object.assign({}, changes, log)).then(function () {
                        _this27.changed.emit({
                          type: 2
                          /* Update */
                          ,
                          table: inventar.name,
                          key: inv.uuid,
                          uuid: inv.uuid,
                          obj: Object.assign({}, inv, changes),
                          mods: changes
                        });

                        if (raum.current_jobstatus === 0) {
                          _this27.raumService.setRaumStatus(_shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__["DBDIRaumEditStatus"].Started, ruuid, jobid);
                        }

                        return _this27.returnResultSuccess({
                          type: 2
                          /* Update */

                        });
                      });
                    }));

                  case 9:
                  case "end":
                    return _context70.stop();
                }
              }
            }, _callee70, this);
          }));
        }
      }, {
        key: "getInventarListRestByRaumUuid",
        value: function getInventarListRestByRaumUuid(ruuid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee71() {
            var inventarDataList, inventarList, artikelRefs, artikelData, _iterator4, _step4, _loop;

            return regeneratorRuntime.wrap(function _callee71$(_context71) {
              while (1) {
                switch (_context71.prev = _context71.next) {
                  case 0:
                    inventarDataList = [];
                    _context71.next = 3;
                    return this.dexie.inventar.where({
                      ruuid: ruuid
                    }).and(function (item) {
                      return item.jobid !== jobid;
                    }).sortBy('created_at');

                  case 3:
                    inventarList = _context71.sent;
                    _context71.next = 6;
                    return this.dexie.objektKatalogMandant.where('uuid').anyOf(inventarList.map(function (itm) {
                      return itm.mcuuid;
                    })).toArray();

                  case 6:
                    artikelRefs = _context71.sent;
                    _context71.next = 9;
                    return this.dexie.objektKatalogGlobal.where('uuid').anyOf(artikelRefs.map(function (itm) {
                      return itm.gcuuid;
                    })).toArray();

                  case 9:
                    artikelData = _context71.sent;
                    _iterator4 = _createForOfIteratorHelper(inventarList);

                    try {
                      _loop = function _loop() {
                        var inventar = _step4.value;
                        var d = {
                          inventar: inventar,
                          artikelRef: null,
                          artikelData: null
                        };
                        d.artikelRef = artikelRefs.find(function (itm) {
                          return itm.uuid === inventar.mcuuid;
                        });

                        if (d.artikelRef) {
                          d.artikelData = artikelData.find(function (itm) {
                            return itm.uuid === d.artikelRef.gcuuid;
                          });
                        }

                        inventarDataList.push(d);
                      };

                      for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
                        _loop();
                      }
                    } catch (err) {
                      _iterator4.e(err);
                    } finally {
                      _iterator4.f();
                    }

                    return _context71.abrupt("return", inventarDataList);

                  case 13:
                  case "end":
                    return _context71.stop();
                }
              }
            }, _callee71, this);
          }));
        }
      }, {
        key: "getInventarListDoneByRaumUuid",
        value: function getInventarListDoneByRaumUuid(ruuid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee72() {
            var inventarDataList, inventarList, artikelRefs, artikelData, _iterator5, _step5, _loop2;

            return regeneratorRuntime.wrap(function _callee72$(_context72) {
              while (1) {
                switch (_context72.prev = _context72.next) {
                  case 0:
                    inventarDataList = [];
                    _context72.next = 3;
                    return this.dexie.inventar.where({
                      ruuid: ruuid
                    }).and(function (item) {
                      return item.jobid === jobid;
                    }).sortBy('modified_at');

                  case 3:
                    inventarList = _context72.sent;
                    _context72.next = 6;
                    return this.dexie.objektKatalogMandant.where('uuid').anyOf(inventarList.map(function (itm) {
                      return itm.mcuuid;
                    })).toArray();

                  case 6:
                    artikelRefs = _context72.sent;
                    _context72.next = 9;
                    return this.dexie.objektKatalogGlobal.where('uuid').anyOf(artikelRefs.map(function (itm) {
                      return itm.gcuuid;
                    })).toArray();

                  case 9:
                    artikelData = _context72.sent;
                    _iterator5 = _createForOfIteratorHelper(inventarList);

                    try {
                      _loop2 = function _loop2() {
                        var inventar = _step5.value;
                        var d = {
                          inventar: inventar,
                          artikelRef: null,
                          artikelData: null
                        };
                        d.artikelRef = artikelRefs.find(function (itm) {
                          return itm.uuid === inventar.mcuuid;
                        });

                        if (d.artikelRef) {
                          d.artikelData = artikelData.find(function (itm) {
                            return itm.uuid === d.artikelRef.gcuuid;
                          });
                        }

                        inventarDataList.push(d);
                      };

                      for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
                        _loop2();
                      }
                    } catch (err) {
                      _iterator5.e(err);
                    } finally {
                      _iterator5.f();
                    }

                    return _context72.abrupt("return", inventarDataList);

                  case 13:
                  case "end":
                    return _context72.stop();
                }
              }
            }, _callee72, this);
          }));
        }
      }]);

      return InventarService;
    }();

    InventarService.ctorParameters = function () {
      return [{
        type: _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_3__["DexieService"]
      }, {
        type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_6__["AuthService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_5__["BasedataService"]
      }, {
        type: _hersteller_service__WEBPACK_IMPORTED_MODULE_8__["HerstellerService"]
      }, {
        type: _artikel_service__WEBPACK_IMPORTED_MODULE_7__["ArtikelService"]
      }, {
        type: _shared_services_variables_service__WEBPACK_IMPORTED_MODULE_9__["VariablesService"]
      }, {
        type: _raum_service__WEBPACK_IMPORTED_MODULE_10__["RaumService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], InventarService.prototype, "changed", void 0);
    InventarService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], InventarService);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/data-services/raum.service.ts":
  /*!*****************************************************************!*\
    !*** ./src/app/pages/invent-form/data-services/raum.service.ts ***!
    \*****************************************************************/

  /*! exports provided: RaumService */

  /***/
  function srcAppPagesInventFormDataServicesRaumServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "RaumService", function () {
      return RaumService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../../shared/interfaces/dexie.interfaces */
    "./src/app/shared/interfaces/dexie.interfaces.ts");
    /* harmony import */


    var _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../../shared/services/dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var guid_typescript__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! guid-typescript */
    "./node_modules/guid-typescript/dist/guid.js");
    /* harmony import */


    var guid_typescript__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(guid_typescript__WEBPACK_IMPORTED_MODULE_4__);
    /* harmony import */


    var _auth_auth_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../../auth/auth.service */
    "./src/app/pages/auth/auth.service.ts");
    /* harmony import */


    var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! rxjs */
    "./node_modules/rxjs/_esm2015/index.js");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");

    var RaumService = /*#__PURE__*/function () {
      function RaumService(dexie, authService, baseDataService) {
        _classCallCheck(this, RaumService);

        this.dexie = dexie;
        this.authService = authService;
        this.baseDataService = baseDataService;
        this.raumStatusChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
      }

      _createClass(RaumService, [{
        key: "raumExists",
        value: function raumExists(gid, raum) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee73() {
            var numRaeume;
            return regeneratorRuntime.wrap(function _callee73$(_context73) {
              while (1) {
                switch (_context73.prev = _context73.next) {
                  case 0:
                    _context73.next = 2;
                    return this.dexie.raeume.where('Raum').equalsIgnoreCase(raum).filter(function (itm) {
                      return itm.gid === gid;
                    }).count();

                  case 2:
                    numRaeume = _context73.sent;
                    return _context73.abrupt("return", 0 < numRaeume);

                  case 4:
                  case "end":
                    return _context73.stop();
                }
              }
            }, _callee73, this);
          }));
        }
      }, {
        key: "raumBezeichnungExists",
        value: function raumBezeichnungExists(gid, bezeichnung) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee74() {
            var numRaeume;
            return regeneratorRuntime.wrap(function _callee74$(_context74) {
              while (1) {
                switch (_context74.prev = _context74.next) {
                  case 0:
                    _context74.next = 2;
                    return this.dexie.raeume.where('Raumbezeichnung').equalsIgnoreCase(bezeichnung).filter(function (itm) {
                      return itm.gid === gid;
                    }).count();

                  case 2:
                    numRaeume = _context74.sent;
                    return _context74.abrupt("return", 0 < numRaeume);

                  case 4:
                  case "end":
                    return _context74.stop();
                }
              }
            }, _callee74, this);
          }));
        }
      }, {
        key: "codeExistsInInventur",
        value: function codeExistsInInventur(jobid, ruuid, code) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee75() {
            var raeume, numRaeume, exists;
            return regeneratorRuntime.wrap(function _callee75$(_context75) {
              while (1) {
                switch (_context75.prev = _context75.next) {
                  case 0:
                    raeume = this.dexie.raeume.where('code').equalsIgnoreCase(code.trim()).filter(function (itm) {
                      return itm.uuid !== ruuid && itm.for_jobid !== jobid;
                    });
                    _context75.next = 3;
                    return this.dexie.raeume.where('code').equalsIgnoreCase(code.trim()).filter(function (itm) {
                      return itm.uuid !== ruuid && itm.for_jobid !== jobid;
                    }).count();

                  case 3:
                    numRaeume = _context75.sent;
                    exists = 0 < numRaeume;
                    console.log('#85 raum.service.ts codeExistsInInventur', {
                      params: {
                        jobid: jobid,
                        ruuid: ruuid,
                        code: code
                      },
                      result: {
                        exists: exists,
                        raeume: raeume,
                        numRaeume: numRaeume
                      }
                    });
                    return _context75.abrupt("return", exists);

                  case 7:
                  case "end":
                    return _context75.stop();
                }
              }
            }, _callee75, this);
          }));
        }
      }, {
        key: "raumExistsInInventur",
        value: function raumExistsInInventur(jobid, ruuid, Raum) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee76() {
            var numRaeume;
            return regeneratorRuntime.wrap(function _callee76$(_context76) {
              while (1) {
                switch (_context76.prev = _context76.next) {
                  case 0:
                    _context76.next = 2;
                    return this.dexie.raeume.where('Raum').equalsIgnoreCase(Raum.trim()).filter(function (itm) {
                      return itm.uuid !== ruuid && itm.for_jobid !== jobid;
                    }).count();

                  case 2:
                    numRaeume = _context76.sent;
                    return _context76.abrupt("return", 0 < numRaeume);

                  case 4:
                  case "end":
                    return _context76.stop();
                }
              }
            }, _callee76, this);
          }));
        }
      }, {
        key: "get",
        value: function get(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee77() {
            return regeneratorRuntime.wrap(function _callee77$(_context77) {
              while (1) {
                switch (_context77.prev = _context77.next) {
                  case 0:
                    return _context77.abrupt("return", this.dexie.raeume.get(uuid));

                  case 1:
                  case "end":
                    return _context77.stop();
                }
              }
            }, _callee77, this);
          }));
        }
      }, {
        key: "insert",
        value: function insert(daten, useJobId) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee78() {
            var jobid, insertData, log, newId, newItem, errorMsg;
            return regeneratorRuntime.wrap(function _callee78$(_context78) {
              while (1) {
                switch (_context78.prev = _context78.next) {
                  case 0:
                    jobid = useJobId || this.baseDataService.getCurrentJobid();
                    insertData = {
                      gid: daten.gid,
                      uuid: guid_typescript__WEBPACK_IMPORTED_MODULE_4__["Guid"].create().toString(),
                      hash: '',
                      for_jobid: jobid,
                      code: daten.code,
                      raumid: '',
                      Raum: daten.Raum,
                      Raumbezeichnung: daten.Raumbezeichnung,
                      Etage: daten.Etage,
                      created_at: new Date(),
                      created_jobid: jobid,
                      created_uid: this.authService.getUser().id,
                      modified_at: null,
                      modified_uid: null
                    };
                    log = {
                      log: true
                    };
                    newId = '';
                    newItem = null;
                    _context78.prev = 5;
                    _context78.next = 8;
                    return this.dexie.raeume.add(Object.assign({}, insertData, log));

                  case 8:
                    newId = _context78.sent;
                    _context78.next = 11;
                    return this.dexie.raeume.get(newId);

                  case 11:
                    newItem = _context78.sent;
                    _context78.next = 18;
                    break;

                  case 14:
                    _context78.prev = 14;
                    _context78.t0 = _context78["catch"](5);
                    errorMsg = ('name' in _context78.t0 ? _context78.t0.name + ': ' : '') + ('message' in _context78.t0 ? _context78.t0.message : JSON.stringify(_context78.t0));
                    return _context78.abrupt("return", {
                      success: false,
                      errorMsg: errorMsg,
                      debug: _context78.t0,
                      data: insertData
                    });

                  case 18:
                    console.log('insert Raum ', {
                      newItem: newItem
                    });
                    return _context78.abrupt("return", {
                      success: true,
                      newId: newId,
                      newItem: newItem
                    });

                  case 20:
                  case "end":
                    return _context78.stop();
                }
              }
            }, _callee78, this, [[5, 14]]);
          }));
        }
      }, {
        key: "updateByUuid",
        value: function updateByUuid(uuid, raum) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee79() {
            var jobid, savedRaumData, hasUuid, updUuid, lkupKey, bcItem, _bcItem, numChanges, savedData;

            return regeneratorRuntime.wrap(function _callee79$(_context79) {
              while (1) {
                switch (_context79.prev = _context79.next) {
                  case 0:
                    console.log('#162 raum.service.ts updateById:', {
                      uuid: uuid,
                      raum: raum
                    });
                    jobid = this.baseDataService.getCurrentJobid();
                    _context79.next = 4;
                    return this.dexie.raeume.get(uuid);

                  case 4:
                    savedRaumData = _context79.sent;
                    hasUuid = 'uuid' in raum && typeof raum.uuid === 'string' && raum.uuid !== '';
                    updUuid = hasUuid && 'uuid' in raum ? raum.uuid : uuid;

                    if (!(savedRaumData.code && savedRaumData.code !== raum.code)) {
                      _context79.next = 23;
                      break;
                    }

                    lkupKey = {
                      code: savedRaumData.code,
                      for_jobid: jobid
                    };
                    console.log('#172 raum.service.ts Raum-Code has changed', {
                      lkupKey: lkupKey
                    });
                    _context79.next = 12;
                    return this.dexie.barcodeLookup.get(lkupKey);

                  case 12:
                    bcItem = _context79.sent;
                    console.log('#174 raum.service.ts check if bcItem exists', {
                      bcItem: bcItem
                    });

                    if (!bcItem) {
                      _context79.next = 17;
                      break;
                    }

                    _context79.next = 17;
                    return this.dexie.barcodeLookup["delete"]([savedRaumData.code, jobid])["catch"](function (reason) {
                      console.error('#177 Alter BC-Lookup fuer Raum konnte nicht geloescht werden!', {
                        reason: reason
                      });
                    });

                  case 17:
                    console.log('#184 raum.service.ts create new bcItem', {
                      code: raum.code,
                      for_jobid: jobid,
                      id: uuid,
                      key: 'uuid',
                      table: 'raeume',
                      updateHelper: 1,
                      uuid: updUuid
                    });

                    if (!raum.code) {
                      _context79.next = 21;
                      break;
                    }

                    _context79.next = 21;
                    return this.dexie.barcodeLookup.put({
                      code: raum.code,
                      for_jobid: jobid,
                      key: 'uuid',
                      table: 'raeume',
                      updateHelper: 1,
                      uuid: updUuid
                    });

                  case 21:
                    _context79.next = 28;
                    break;

                  case 23:
                    if (!raum.code) {
                      _context79.next = 28;
                      break;
                    }

                    _context79.next = 26;
                    return this.dexie.barcodeLookup.get({
                      code: raum.code,
                      for_jobid: jobid
                    });

                  case 26:
                    _bcItem = _context79.sent;

                    if (!_bcItem) {
                      this.dexie.barcodeLookup.put({
                        code: raum.code,
                        for_jobid: jobid,
                        key: 'uuid',
                        table: 'raeume',
                        updateHelper: 1,
                        uuid: updUuid
                      });
                    }

                  case 28:
                    console.log('#205 raum.service.ts update raum', {
                      uuid: uuid,
                      raum: raum
                    });
                    _context79.next = 31;
                    return this.dexie.raeume.update(uuid, Object.assign({}, raum, {
                      log: true
                    }));

                  case 31:
                    numChanges = _context79.sent;
                    _context79.next = 34;
                    return this.dexie.raeume.get(uuid);

                  case 34:
                    savedData = _context79.sent;
                    console.log('#208 raum.service.ts get updated raumItem', {
                      uuid: uuid,
                      savedData: savedData,
                      "return": {
                        success: numChanges > 0,
                        id: uuid,
                        item: savedData,
                        data: raum
                      }
                    });
                    return _context79.abrupt("return", {
                      success: numChanges > 0,
                      id: uuid,
                      item: savedData,
                      data: raum
                    });

                  case 37:
                  case "end":
                    return _context79.stop();
                }
              }
            }, _callee79, this);
          }));
        }
      }, {
        key: "__DEL__updateByUuid",
        value: function __DEL__updateByUuid(uuid, raum) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee80() {
            var numChanges, savedData;
            return regeneratorRuntime.wrap(function _callee80$(_context80) {
              while (1) {
                switch (_context80.prev = _context80.next) {
                  case 0:
                    _context80.next = 2;
                    return this.dexie.raeume.where({
                      uuid: uuid
                    }).modify(raum);

                  case 2:
                    numChanges = _context80.sent;
                    _context80.next = 5;
                    return this.dexie.raeume.where({
                      uuid: uuid
                    }).first();

                  case 5:
                    savedData = _context80.sent;
                    return _context80.abrupt("return", {
                      success: numChanges > 0,
                      id: savedData.uuid,
                      item: savedData,
                      data: raum
                    });

                  case 7:
                  case "end":
                    return _context80.stop();
                }
              }
            }, _callee80, this);
          }));
        }
      }, {
        key: "getRaumPlaene",
        value: function getRaumPlaene(ruuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee81() {
            var totalImages, imgWithUuids, imgUuids;
            return regeneratorRuntime.wrap(function _callee81$(_context81) {
              while (1) {
                switch (_context81.prev = _context81.next) {
                  case 0:
                    _context81.next = 2;
                    return this.dexie.objektKatalogImages.where({
                      RefTable: 'Raeume',
                      RefUuid: ruuid
                    }).toArray();

                  case 2:
                    totalImages = _context81.sent;
                    _context81.next = 5;
                    return this.dexie.objektKatalogImages.where({
                      RefTable: 'Raeume',
                      RefUuid: ruuid,
                      Kategorie: 'Plan'
                    }).toArray();

                  case 5:
                    imgWithUuids = _context81.sent;
                    imgUuids = imgWithUuids.map(function (row) {
                      return row.ImgUuid;
                    });
                    console.log('RaumService.getRaumPlaene, ruuid: ', ruuid, 'totalImages', totalImages, 'imgUuids', imgUuids);

                    if (!(imgUuids.length === 0)) {
                      _context81.next = 10;
                      break;
                    }

                    return _context81.abrupt("return", []);

                  case 10:
                    return _context81.abrupt("return", this.dexie.images.where('uuid').anyOf(imgUuids).toArray().then(function (images) {
                      return images.map(function (img) {
                        return {
                          uuid: img.uuid,
                          name: img.name,
                          type: img.type,
                          size: img.size,
                          width: img.width,
                          height: img.height,
                          desc: img.desc || '',
                          Kategorie: 'Plan',
                          RaumUuid: ruuid
                        };
                      });
                    }));

                  case 11:
                  case "end":
                    return _context81.stop();
                }
              }
            }, _callee81, this);
          }));
        }
      }, {
        key: "getRaumBilder",
        value: function getRaumBilder(ruuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee82() {
            var totalImages, imgUuids;
            return regeneratorRuntime.wrap(function _callee82$(_context82) {
              while (1) {
                switch (_context82.prev = _context82.next) {
                  case 0:
                    _context82.next = 2;
                    return this.dexie.objektKatalogImages.where({
                      RefTable: 'Raeume',
                      RefUuid: ruuid
                    }).toArray();

                  case 2:
                    totalImages = _context82.sent;
                    _context82.next = 5;
                    return this.dexie.objektKatalogImages.where({
                      RefTable: 'Raeume',
                      RefUuid: ruuid,
                      Kategorie: 'Bild'
                    }).toArray().then(function (rows) {
                      return rows.map(function (row) {
                        return row.ImgUuid;
                      });
                    });

                  case 5:
                    imgUuids = _context82.sent;
                    console.log('RaumService.getRaumBilder, ruuid: ', ruuid, 'totalImages', totalImages, 'imgUuids.length', imgUuids.length);

                    if (!(imgUuids.length === 0)) {
                      _context82.next = 9;
                      break;
                    }

                    return _context82.abrupt("return", []);

                  case 9:
                    return _context82.abrupt("return", this.dexie.images.where('uuid').anyOf(imgUuids).toArray().then(function (images) {
                      return images.map(function (img) {
                        return {
                          uuid: img.uuid,
                          name: img.name,
                          type: img.type,
                          size: img.size,
                          width: img.width,
                          height: img.height,
                          desc: img.desc || '',
                          Kategorie: 'Bild',
                          RaumUuid: ruuid
                        };
                      });
                    }));

                  case 10:
                  case "end":
                    return _context82.stop();
                }
              }
            }, _callee82, this);
          }));
        }
      }, {
        key: "getEtagenByGidInInventur",
        value: function getEtagenByGidInInventur(jobid, gid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee83() {
            var etagen;
            return regeneratorRuntime.wrap(function _callee83$(_context83) {
              while (1) {
                switch (_context83.prev = _context83.next) {
                  case 0:
                    etagen = [];
                    return _context83.abrupt("return", this.dexie.raeume.where({
                      for_jobid: jobid,
                      gid: gid
                    }).each(function (raum) {
                      if (etagen.indexOf(raum.Etage) === -1) {
                        etagen.push(raum.Etage);
                      }
                    }).then(function () {
                      return etagen;
                    }));

                  case 2:
                  case "end":
                    return _context83.stop();
                }
              }
            }, _callee83, this);
          }));
        }
      }, {
        key: "getRaumStatus",
        value: function getRaumStatus(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee84() {
            var raum;
            return regeneratorRuntime.wrap(function _callee84$(_context84) {
              while (1) {
                switch (_context84.prev = _context84.next) {
                  case 0:
                    _context84.next = 2;
                    return this.dexie.raeume.get(uuid);

                  case 2:
                    raum = _context84.sent;

                    if (!raum) {
                      _context84.next = 5;
                      break;
                    }

                    return _context84.abrupt("return", raum.current_jobstatus);

                  case 5:
                    Object(rxjs__WEBPACK_IMPORTED_MODULE_6__["throwError"])("ERROR - GetRaumStatus: Raum mit ID ".concat(uuid, " wurde nicht gefunden"));

                  case 6:
                  case "end":
                    return _context84.stop();
                }
              }
            }, _callee84, this);
          }));
        }
      }, {
        key: "triggerRaumStatus",
        value: function triggerRaumStatus(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee85() {
            var raum;
            return regeneratorRuntime.wrap(function _callee85$(_context85) {
              while (1) {
                switch (_context85.prev = _context85.next) {
                  case 0:
                    _context85.next = 2;
                    return this.dexie.raeume.get(uuid);

                  case 2:
                    raum = _context85.sent;
                    this.raumStatusChanged.emit({
                      uuid: uuid,
                      status: raum.current_jobstatus
                    });

                  case 4:
                  case "end":
                    return _context85.stop();
                }
              }
            }, _callee85, this);
          }));
        }
      }, {
        key: "setRaumStatus",
        value: function setRaumStatus(stat, uuid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee86() {
            var log, numChanges;
            return regeneratorRuntime.wrap(function _callee86$(_context86) {
              while (1) {
                switch (_context86.prev = _context86.next) {
                  case 0:
                    log = true;
                    _context86.next = 3;
                    return this.dexie.raeume.where({
                      uuid: uuid
                    }).modify({
                      current_jobstatus: stat,
                      current_jobid: jobid,
                      log: log
                    });

                  case 3:
                    numChanges = _context86.sent;

                    if (numChanges) {
                      this.triggerRaumStatus(uuid);
                    }

                    return _context86.abrupt("return", numChanges);

                  case 6:
                  case "end":
                    return _context86.stop();
                }
              }
            }, _callee86, this);
          }));
        }
      }, {
        key: "setRaumStatusInit",
        value: function setRaumStatusInit(uuid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee87() {
            return regeneratorRuntime.wrap(function _callee87$(_context87) {
              while (1) {
                switch (_context87.prev = _context87.next) {
                  case 0:
                    _context87.next = 2;
                    return this.setRaumStatus(_shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__["DBDIRaumEditStatus"].Init, uuid, jobid);

                  case 2:
                    return _context87.abrupt("return", _context87.sent);

                  case 3:
                  case "end":
                    return _context87.stop();
                }
              }
            }, _callee87, this);
          }));
        }
      }, {
        key: "setRaumStatusStarted",
        value: function setRaumStatusStarted(uuid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee88() {
            return regeneratorRuntime.wrap(function _callee88$(_context88) {
              while (1) {
                switch (_context88.prev = _context88.next) {
                  case 0:
                    _context88.next = 2;
                    return this.setRaumStatus(_shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__["DBDIRaumEditStatus"].Started, uuid, jobid);

                  case 2:
                    return _context88.abrupt("return", _context88.sent);

                  case 3:
                  case "end":
                    return _context88.stop();
                }
              }
            }, _callee88, this);
          }));
        }
      }, {
        key: "setRaumStatusClosed",
        value: function setRaumStatusClosed(uuid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee89() {
            return regeneratorRuntime.wrap(function _callee89$(_context89) {
              while (1) {
                switch (_context89.prev = _context89.next) {
                  case 0:
                    _context89.next = 2;
                    return this.setRaumStatus(_shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__["DBDIRaumEditStatus"].Closed, uuid, jobid);

                  case 2:
                    return _context89.abrupt("return", _context89.sent);

                  case 3:
                  case "end":
                    return _context89.stop();
                }
              }
            }, _callee89, this);
          }));
        }
      }, {
        key: "getRaeumeStartedByGebaeudeId",
        value: function getRaeumeStartedByGebaeudeId(gid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee90() {
            var _this28 = this;

            var raeume, raeumeStat;
            return regeneratorRuntime.wrap(function _callee90$(_context90) {
              while (1) {
                switch (_context90.prev = _context90.next) {
                  case 0:
                    _context90.next = 2;
                    return this.dexie.raeume.where({
                      gid: gid
                    }).toArray();

                  case 2:
                    raeume = _context90.sent;
                    _context90.next = 5;
                    return Promise.all(raeume.map(function (raum) {
                      return Promise.all([_this28.dexie.inventar.where({
                        ruuid: raum.uuid
                      }).count(), _this28.dexie.inventar.where({
                        ruuid: raum.uuid,
                        jobid: jobid
                      }).count()]).then(function (results) {
                        var total = results[0];
                        var done = results[1];
                        var progress = total > 0 ? done * 100 / total : -1;
                        return {
                          uuid: raum.uuid,
                          Raum: raum.Raum,
                          Etage: raum.Etage,
                          editStatus: raum.current_jobstatus,
                          progress: progress,
                          total: total,
                          done: done
                        };
                      });
                    }));

                  case 5:
                    raeumeStat = _context90.sent;
                    return _context90.abrupt("return", raeumeStat.filter(function (stat) {
                      return stat.editStatus === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__["DBDIRaumEditStatus"].Closed || stat.done > 0;
                    }));

                  case 7:
                  case "end":
                    return _context90.stop();
                }
              }
            }, _callee90, this);
          }));
        }
      }, {
        key: "getRaeumeToDoByGebaeudeId",
        value: function getRaeumeToDoByGebaeudeId(gid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee91() {
            var _this29 = this;

            var raeume, raeumeStat;
            return regeneratorRuntime.wrap(function _callee91$(_context91) {
              while (1) {
                switch (_context91.prev = _context91.next) {
                  case 0:
                    _context91.next = 2;
                    return this.dexie.raeume.where({
                      gid: gid
                    }).and(function (r) {
                      return r.current_jobstatus !== _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__["DBDIRaumEditStatus"].Closed;
                    }).toArray();

                  case 2:
                    raeume = _context91.sent;
                    _context91.next = 5;
                    return Promise.all(raeume.map(function (raum) {
                      return Promise.all([_this29.dexie.inventar.where({
                        ruuid: raum.uuid
                      }).count(), _this29.dexie.inventar.where({
                        ruuid: raum.uuid,
                        jobid: jobid
                      }).count()]).then(function (results) {
                        return {
                          uuid: raum.uuid,
                          Raum: raum.Raum,
                          Etage: raum.Etage,
                          progress: 0,
                          editStatus: raum.current_jobstatus,
                          total: results[0],
                          done: results[1]
                        };
                      });
                    }));

                  case 5:
                    raeumeStat = _context91.sent;
                    return _context91.abrupt("return", raeumeStat.filter(function (stat) {
                      return stat.done === 0;
                    }));

                  case 7:
                  case "end":
                    return _context91.stop();
                }
              }
            }, _callee91, this);
          }));
        }
      }]);

      return RaumService;
    }();

    RaumService.ctorParameters = function () {
      return [{
        type: _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_3__["DexieService"]
      }, {
        type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_5__["AuthService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_7__["BasedataService"]
      }];
    };

    RaumService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], RaumService);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/invent-form.component.scss":
  /*!**************************************************************!*\
    !*** ./src/app/pages/invent-form/invent-form.component.scss ***!
    \**************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormInventFormComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "#inventurTitel {\n  font-size: 0.7rem;\n  color: silver;\n  text-align: right;\n}\n\n#formBottomDivider {\n  margin-bottom: 1rem;\n}\n\ntextarea.NewFreshScan {\n  background-color: #8bffbb;\n  color: #b6121c;\n}\n\ntextarea.NewFreshScan.CountDown-4 {\n  background-color: #9effc4;\n  color: #98121c;\n}\n\ntextarea.NewFreshScan.CountDown-3 {\n  background-color: #aaffc9;\n  color: #7a111a;\n}\n\ntextarea.NewFreshScan.CountDown-2 {\n  background-color: #bcffcf;\n  color: #5c1018;\n}\n\ntextarea.NewFreshScan.CountDown-2 {\n  background-color: #ccffda;\n  color: #3e1119;\n}\n\ntextarea.NewFreshScan.CountDown-1 {\n  background-color: #d6ffe1;\n  color: #200f0f;\n}\n\ninput.bg-danger {\n  color: #ffffff;\n  font-weight: bold;\n}\n\ninput.bg-danger::-moz-placeholder {\n  color: #ffffff;\n  font-weight: bold;\n}\n\ninput.bg-danger::placeholder {\n  color: #ffffff;\n  font-weight: bold;\n}\n\n.input-group-text {\n  min-width: 3.5rem;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxwYWdlc1xcaW52ZW50LWZvcm1cXGludmVudC1mb3JtLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9pbnZlbnQtZm9ybS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLGlCQUFBO0FDQ0Y7O0FERUE7RUFDRSxtQkFBQTtBQ0NGOztBREVBO0VBQ0UseUJBQUE7RUFDQSxjQUFBO0FDQ0Y7O0FEQ0E7RUFDRSx5QkFBQTtFQUNBLGNBQUE7QUNFRjs7QURDQTtFQUNFLHlCQUFBO0VBQ0EsY0FBQTtBQ0VGOztBRENBO0VBQ0UseUJBQUE7RUFDQSxjQUFBO0FDRUY7O0FEQ0E7RUFDRSx5QkFBQTtFQUNBLGNBQUE7QUNFRjs7QURDQTtFQUNFLHlCQUFBO0VBQ0EsY0FBQTtBQ0VGOztBREFBO0VBQ0UsY0FBQTtFQUNBLGlCQUFBO0FDR0Y7O0FEQUE7RUFDRSxjQUFBO0VBQ0EsaUJBQUE7QUNHRjs7QURMQTtFQUNFLGNBQUE7RUFDQSxpQkFBQTtBQ0dGOztBRERBO0VBQ0UsaUJBQUE7QUNJRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL2ludmVudC1mb3JtLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2ludmVudHVyVGl0ZWwge1xyXG4gIGZvbnQtc2l6ZTogMC43cmVtO1xyXG4gIGNvbG9yOiBzaWx2ZXI7XHJcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbn1cclxuXHJcbiNmb3JtQm90dG9tRGl2aWRlciB7XHJcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxufVxyXG5cclxudGV4dGFyZWEuTmV3RnJlc2hTY2FuIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjOGJmZmJiO1xyXG4gIGNvbG9yOiAjYjYxMjFjO1xyXG59XHJcbnRleHRhcmVhLk5ld0ZyZXNoU2Nhbi5Db3VudERvd24tNCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzllZmZjNDtcclxuICBjb2xvcjogIzk4MTIxYztcclxufVxyXG5cclxudGV4dGFyZWEuTmV3RnJlc2hTY2FuLkNvdW50RG93bi0zIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWFmZmM5O1xyXG4gIGNvbG9yOiAjN2ExMTFhO1xyXG59XHJcblxyXG50ZXh0YXJlYS5OZXdGcmVzaFNjYW4uQ291bnREb3duLTIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNiY2ZmY2Y7XHJcbiAgY29sb3I6ICM1YzEwMTg7XHJcbn1cclxuXHJcbnRleHRhcmVhLk5ld0ZyZXNoU2Nhbi5Db3VudERvd24tMiB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2NjZmZkYTtcclxuICBjb2xvcjogIzNlMTExOTtcclxufVxyXG5cclxudGV4dGFyZWEuTmV3RnJlc2hTY2FuLkNvdW50RG93bi0xIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDZmZmUxO1xyXG4gIGNvbG9yOiAjMjAwZjBmO1xyXG59XHJcbmlucHV0LmJnLWRhbmdlciB7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbmlucHV0LmJnLWRhbmdlcjo6cGxhY2Vob2xkZXIge1xyXG4gIGNvbG9yOiAjZmZmZmZmO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi5pbnB1dC1ncm91cC10ZXh0IHtcclxuICBtaW4td2lkdGg6IDMuNXJlbTtcclxufVxyXG4iLCIjaW52ZW50dXJUaXRlbCB7XG4gIGZvbnQtc2l6ZTogMC43cmVtO1xuICBjb2xvcjogc2lsdmVyO1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn1cblxuI2Zvcm1Cb3R0b21EaXZpZGVyIHtcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbn1cblxudGV4dGFyZWEuTmV3RnJlc2hTY2FuIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzhiZmZiYjtcbiAgY29sb3I6ICNiNjEyMWM7XG59XG5cbnRleHRhcmVhLk5ld0ZyZXNoU2Nhbi5Db3VudERvd24tNCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM5ZWZmYzQ7XG4gIGNvbG9yOiAjOTgxMjFjO1xufVxuXG50ZXh0YXJlYS5OZXdGcmVzaFNjYW4uQ291bnREb3duLTMge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWFmZmM5O1xuICBjb2xvcjogIzdhMTExYTtcbn1cblxudGV4dGFyZWEuTmV3RnJlc2hTY2FuLkNvdW50RG93bi0yIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2JjZmZjZjtcbiAgY29sb3I6ICM1YzEwMTg7XG59XG5cbnRleHRhcmVhLk5ld0ZyZXNoU2Nhbi5Db3VudERvd24tMiB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNjY2ZmZGE7XG4gIGNvbG9yOiAjM2UxMTE5O1xufVxuXG50ZXh0YXJlYS5OZXdGcmVzaFNjYW4uQ291bnREb3duLTEge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDZmZmUxO1xuICBjb2xvcjogIzIwMGYwZjtcbn1cblxuaW5wdXQuYmctZGFuZ2VyIHtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG5pbnB1dC5iZy1kYW5nZXI6OnBsYWNlaG9sZGVyIHtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG4uaW5wdXQtZ3JvdXAtdGV4dCB7XG4gIG1pbi13aWR0aDogMy41cmVtO1xufSJdfQ== */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/invent-form.component.ts":
  /*!************************************************************!*\
    !*** ./src/app/pages/invent-form/invent-form.component.ts ***!
    \************************************************************/

  /*! exports provided: InventFormComponent */

  /***/
  function srcAppPagesInventFormInventFormComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "InventFormComponent", function () {
      return InventFormComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/fesm2015/router.js");
    /* harmony import */


    var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @angular/common */
    "./node_modules/@angular/common/fesm2015/common.js");
    /* harmony import */


    var _shared_services_data_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../shared/services/data.service */
    "./src/app/shared/services/data.service.ts");
    /* harmony import */


    var _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../../shared/interfaces/dexie.interfaces */
    "./src/app/shared/interfaces/dexie.interfaces.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _shared_inventory_progress_inventory_progress_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ../../shared/inventory-progress/inventory-progress.service */
    "./src/app/shared/inventory-progress/inventory-progress.service.ts");
    /* harmony import */


    var _modals_select_create_artikel_select_create_artikel_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! ./modals/select-create-artikel/select-create-artikel.component */
    "./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.ts");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _modals_scanner_scanner_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
    /*! ./modals/scanner/scanner.component */
    "./src/app/pages/invent-form/modals/scanner/scanner.component.ts");
    /* harmony import */


    var _modals_create_artikel_image_create_artikel_image_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
    /*! ./modals/create-artikel-image/create-artikel-image.component */
    "./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.ts");
    /* harmony import */


    var _modals_show_artikel_image_show_artikel_image_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(
    /*! ./modals/show-artikel-image/show-artikel-image.component */
    "./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.ts");
    /* harmony import */


    var _modals_select_search_artikel_select_search_artikel_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(
    /*! ./modals/select-search-artikel/select-search-artikel.component */
    "./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.ts");
    /* harmony import */


    var _modals_select_create_raum_select_create_raum_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(
    /*! ./modals/select-create-raum/select-create-raum.component */
    "./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.ts");
    /* harmony import */


    var _modals_raum_list_rest_raum_list_rest_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(
    /*! ./modals/raum-list-rest/raum-list-rest.component */
    "./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.ts");
    /* harmony import */


    var _modals_raum_list_done_raum_list_done_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(
    /*! ./modals/raum-list-done/raum-list-done.component */
    "./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.ts");
    /* harmony import */


    var _modals_select_search_raum_select_search_raum_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(
    /*! ./modals/select-search-raum/select-search-raum.component */
    "./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.ts");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(
    /*! ../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _shared_services_inventory_editor_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(
    /*! ../../shared/services/inventory-editor.service */
    "./src/app/shared/services/inventory-editor.service.ts");
    /* harmony import */


    var _data_services_inventar_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(
    /*! ./data-services/inventar.service */
    "./src/app/pages/invent-form/data-services/inventar.service.ts");
    /* harmony import */


    var _data_services_images_service__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(
    /*! ./data-services/images.service */
    "./src/app/pages/invent-form/data-services/images.service.ts");
    /* harmony import */


    var _data_services_barcode_service__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(
    /*! ./data-services/barcode.service */
    "./src/app/pages/invent-form/data-services/barcode.service.ts");
    /* harmony import */


    var _data_services_raum_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(
    /*! ./data-services/raum.service */
    "./src/app/pages/invent-form/data-services/raum.service.ts");
    /* harmony import */


    var _modals_gesamt_list_rest_gesamt_list_rest_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(
    /*! ./modals/gesamt-list-rest/gesamt-list-rest.component */
    "./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.ts");
    /* harmony import */


    var _modals_gesamt_list_done_gesamt_list_done_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(
    /*! ./modals/gesamt-list-done/gesamt-list-done.component */
    "./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.ts");
    /* harmony import */


    var _shared_services_sounds_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(
    /*! ../../shared/services/sounds.service */
    "./src/app/shared/services/sounds.service.ts");
    /* harmony import */


    var ngx_toastr__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(
    /*! ngx-toastr */
    "./node_modules/ngx-toastr/fesm2015/ngx-toastr.js");
    /* harmony import */


    var _modals_edit_raum_edit_raum_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(
    /*! ./modals/edit-raum/edit-raum.component */
    "./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.ts");
    /* harmony import */


    var _shared_services_variables_service__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(
    /*! ../../shared/services/variables.service */
    "./src/app/shared/services/variables.service.ts");
    /* harmony import */


    var _modals_edit_inventar_edit_inventar_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(
    /*! ./modals/edit-inventar/edit-inventar.component */
    "./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.ts");
    /* harmony import */


    var _modals_imagebox_imagebox_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(
    /*! ./modals/imagebox/imagebox.component */
    "./src/app/pages/invent-form/modals/imagebox/imagebox.component.ts");
    /* harmony import */


    var _modals_show_raum_image_show_raum_image_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(
    /*! ./modals/show-raum-image/show-raum-image.component */
    "./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.ts");
    /* harmony import */


    var _modals_create_raum_image_create_raum_image_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(
    /*! ./modals/create-raum-image/create-raum-image.component */
    "./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.ts");
    /* harmony import */


    var _modals_batch_barcodes_batch_barcodes_component__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(
    /*! ./modals/batch-barcodes/batch-barcodes.component */
    "./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.ts"); // Dialogs


    var InventFormComponent = /*#__PURE__*/function () {
      function InventFormComponent(route, location, dataService, modalService, baseData, inventoryProgress, inventoryEditor, inventarDataService, raumService, imageService, bcLookup, sounds, variables, toastr) {
        _classCallCheck(this, InventFormComponent);

        this.route = route;
        this.location = location;
        this.dataService = dataService;
        this.modalService = modalService;
        this.baseData = baseData;
        this.inventoryProgress = inventoryProgress;
        this.inventoryEditor = inventoryEditor;
        this.inventarDataService = inventarDataService;
        this.raumService = raumService;
        this.imageService = imageService;
        this.bcLookup = bcLookup;
        this.sounds = sounds;
        this.variables = variables;
        this.toastr = toastr;
        this.faBarcode = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faBarcode"];
        this.faSearch = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faSearch"];
        this.faEye = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faEye"];
        this.faCamera = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faCamera"];
        this.faEdit = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faEdit"];
        this.faImage = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faImage"];
        this.faPlus = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faPlus"];
        this.faCheck = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faCheck"];
        this.faDoorOpen = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faDoorOpen"];
        this.faDoorClosed = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faDoorClosed"];
        this.faBookReader = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faBookReader"];
        this.faLock = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faLock"];
        this.faUnlockAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faUnlockAlt"];
        this.scanDetectorConfig = {
          minLength: 5,
          maxLength: 30,
          scannerStartsWith: '',
          scannerEndsWith: '',
          scanTimeout: 100,
          replaceNotNumber: false,
          allowNotNumber: true,
          ignoreOverElement: ['.formcontrol-edit-barcode'],
          barcodeType: ''
        };
        this.formInventar = {
          uuid: null,
          mcid: null,
          mcuuid: null,
          gcid: null,
          gcuuid: null,
          ruuid: null,
          Raum: null,
          Raumbezeichnung: null,
          RaumBarcode: null,
          Barcode: '',
          Bezeichnung: '',
          Typ: ''
        };
        this.lastScanDetectClass = '';
        this.lastScanDetectTimer = null;
        this.waitingForNewInventarBarcode = false;
        this.waitingForInventarData = false;
        this.openedCreateRaum = false;
        this.artikelImageExists = false;
        this.allowNewInventarByGivenArticle = false;
        this.jobProgress = {
          total: 0,
          done: 0
        };
        this.numUnsynced = -1;
        this.raumBilder = [];
        this.raumPlaene = [];
        this.jobLockStatus = _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["DBDIJobLockStatus"].Init;
        this.raumProgress = {
          total: 0,
          done: 0
        };
        this.beepSuccessSrc = '';
        this.beepErrorSrc = '';
        this.currentModal = {
          modalRef: null,
          isOpen: false,
          name: ''
        };
        this.currentModals = [];
        this.blobAlertSuccess = 'success';
        this.blobAlertFailure = 'danger';
        this.blobAlertOff = null;
        this.blobAlertTimer = null;
        this.varChangeSubscription = null;
        this.useOverlay = 0;
        this.beepSuccessSrc = this.sounds.getSuccessSrc();
        this.beepErrorSrc = this.sounds.getErrorSrc();
      }

      _createClass(InventFormComponent, [{
        key: "showBlobAlertSuccess",
        value: function showBlobAlertSuccess() {
          this.showBlobAlert('success');
        }
      }, {
        key: "showBlobAlertError",
        value: function showBlobAlertError() {
          this.showBlobAlert('danger');
        }
      }, {
        key: "showBlobAlert",
        value: function showBlobAlert(alertType) {
          var _this30 = this;

          this.useOverlay = this.useOverlay < 2 ? this.useOverlay + 1 : 1;
          this.blobAlert = null;

          if (this.blobAlertTimer) {
            clearTimeout(this.blobAlertTimer);
          }

          this.blobAlert = alertType;
          this.blobAlertTimer = setTimeout(function () {
            _this30.blobAlert = null;
            _this30.useOverlay = 0;
          }, 1200);
        }
      }, {
        key: "ngOnInit",
        value: function ngOnInit() {
          var _this31 = this;

          this.inventoryProgress.getCurrentInventurLockStatus().then(function (status) {
            _this31.jobLockStatus = status;
          });
          this.unsyncedAmountChangeSubscription = this.dataService.clientSyncAmountChanged.subscribe(function (amount) {
            _this31.numUnsynced = amount;
          });
          this.inventurLockStatusChangeSubscription = this.inventoryProgress.inventurLockStatusChanged.subscribe(function (status) {
            _this31.jobLockStatus = status;
          });
          this.raumStatusChangeSubscription = this.raumService.raumStatusChanged.subscribe(function (stat) {
            if (stat.uuid === _this31.roomUuiD) {
              _this31.raumEditStatus = stat.status;
            }
          });
          console.log('this.inventarDataService.changed', this.inventarDataService.changed);
          this.inventarDataChangeSubscription = this.inventarDataService.changed.subscribe(function (change) {
            _this31.refreshRaumProgress();
          });
          this.routingSubscription = this.route.params.subscribe(function (params) {
            _this31.clientID = parseInt(params.clientid, 10);
            _this31.buildingID = parseInt(params.buildingid, 10);
            var roomUUID = params.roomid;

            _this31.dataService.getClient(_this31.clientID).then(function (clnt) {
              _this31.kunde = clnt;

              _this31.baseData.setCurrentMandant(_this31.kunde);
            });

            _this31.dataService.getBuilding(_this31.buildingID, _this31.clientID).then(function (bldg) {
              _this31.gebaeude = bldg;
            });

            if (roomUUID) {
              _this31.loadRaumById(roomUUID);
            } else {
              var lastSelectedRoom = _this31.baseData.getCurrentRaum();

              if (lastSelectedRoom && lastSelectedRoom.gid === _this31.buildingID) {
                _this31.loadRaumByData(lastSelectedRoom);
              }
            }

            console.log({
              params: params,
              kunde: _this31.kunde,
              gebaeude: _this31.gebaeude
            });

            _this31.refreshInventoryProgress();
          });
          this.jobid = this.baseData.getCurrentJobid();
          this.inventur = this.baseData.getCurrentInventur();
          this.variables.get('manualBarcodeInput', false).then(function (status) {
            _this31.manualBCInputEnabled = status;
          });
          this.variables.watch('manualBarcodeInput');
          this.varChangeSubscription = this.variables.varChanged.subscribe(function (setting) {
            if (setting.name === 'manualBarcodeInput') {
              _this31.manualBCInputEnabled = setting.newValue;
            }
          });
        }
      }, {
        key: "loadRaumById",
        value: function loadRaumById(roomUuid) {
          var _this32 = this;

          this.dataService.getRaum(roomUuid).then(function (raum) {
            console.log('InventFormComponente #338 Retrieved Raum by roomUuid', {
              raum: raum,
              roomUuid: roomUuid
            });

            _this32.loadRaumByData(raum);
          });
        }
      }, {
        key: "loadRaumByData",
        value: function loadRaumByData(raum) {
          var url = '/form-inventory/' + this.clientID + '/' + this.buildingID + '/' + raum.uuid;
          console.log('InventFormComponente #345 Change URL ', {
            raum: raum,
            url: url
          });
          this.location.go(url);
          this.roomUuiD = raum.uuid;
          this.raum = raum;
          this.baseData.setCurrentRaum(this.raum);
          this.formInventar.ruuid = raum.uuid;
          this.formInventar.Raum = raum.Raum;
          this.formInventar.Raumbezeichnung = raum.Raumbezeichnung;
          this.formInventar.RaumBarcode = raum.code;
          this.clearFormInventar();
          this.raumEditStatus = this.raum.current_jobstatus;
          this.raumBilder = [];
          this.raumPlaene = [];
          this.loadRaumImages();
          this.refreshRaumProgress();
        }
      }, {
        key: "loadRaumImages",
        value: function loadRaumImages() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee92() {
            var _this33 = this;

            return regeneratorRuntime.wrap(function _callee92$(_context92) {
              while (1) {
                switch (_context92.prev = _context92.next) {
                  case 0:
                    return _context92.abrupt("return", Promise.all([this.raumService.getRaumBilder(this.raum.uuid).then(function (images) {
                      console.log('InventFormComponent.raumService.getRaumBilder #376 images: ', images);
                      _this33.raumBilder = images;
                      return images.length;
                    }), this.raumService.getRaumPlaene(this.raum.uuid).then(function (images) {
                      console.log('InventFormComponent.raumService.getRaumPlaene #376 images: ', images);
                      _this33.raumPlaene = images;
                      return images.length;
                    })]).then(function (results) {
                      return results[0] + results[1];
                    }));

                  case 1:
                  case "end":
                    return _context92.stop();
                }
              }
            }, _callee92, this);
          }));
        }
      }, {
        key: "clearFormInventar",
        value: function clearFormInventar() {
          this.waitingForNewInventarBarcode = false;
          this.waitingForInventarData = false;
          this.inventarData = null;
          this.artikelUuiD = null;
          this.formInventar.uuid = '';
          this.formInventar.mcid = 0;
          this.formInventar.mcuuid = '';
          this.formInventar.gcid = 0;
          this.formInventar.gcuuid = '';
          this.formInventar.Barcode = '';
          this.formInventar.Bezeichnung = '';
          this.formInventar.Typ = '';
          this.artikelImageExists = false;
        }
      }, {
        key: "clearFormRaum",
        value: function clearFormRaum() {
          this.formInventar.ruuid = '';
          this.formInventar.Raum = '';
          this.formInventar.Raumbezeichnung = '';
          this.formInventar.RaumBarcode = '';
        }
      }, {
        key: "assignInventarToRaum",
        value: function assignInventarToRaum(inventarData) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee93() {
            return regeneratorRuntime.wrap(function _callee93$(_context93) {
              while (1) {
                switch (_context93.prev = _context93.next) {
                  case 0:
                    console.log('InventFormComponente #350 assignInventarToRaum(inventarData)', {
                      inventarData: inventarData
                    });
                    this.loadInventarByData(inventarData);
                    this.inventarDataService.assignRaum(inventarData.inventar.uuid, this.roomUuiD).then(function (rslt) {
                      console.log('InventFormComponente #387 Inventar wurde dem Raum zugewiesen!', {
                        rslt: rslt
                      });
                    })["catch"](function (err) {
                      console.error('InventFormComponente #390 Inventar konnte nicht zugewiesen werden!', err);
                    });

                  case 3:
                  case "end":
                    return _context93.stop();
                }
              }
            }, _callee93, this);
          }));
        }
      }, {
        key: "saveNewInventar",
        value: function saveNewInventar() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee94() {
            var _this34 = this;

            var jobid, uid, inventar, inserting;
            return regeneratorRuntime.wrap(function _callee94$(_context94) {
              while (1) {
                switch (_context94.prev = _context94.next) {
                  case 0:
                    jobid = this.baseData.getCurrentJobid();
                    uid = this.baseData.getCurrentUid();
                    inventar = {
                      mcid: this.formInventar.mcid,
                      mcuuid: this.formInventar.mcuuid,
                      ruuid: this.formInventar.ruuid,
                      code: this.formInventar.Barcode,
                      jobid: jobid,
                      created_at: new Date(),
                      created_uid: uid
                    };
                    inserting = this.inventarDataService.insertInventar(inventar, jobid);
                    inserting.then(function (result) {
                      if (result.success) {
                        console.log('InventFormComponente #409 Inventar wurde hinzugefügt', result);

                        _this34.loadInventarByUuid(result.insertUUID);
                      } else {
                        console.error('InventFormComponent #424 Inventar konnte nicht hinzugefügt werden', {
                          result: result
                        });
                      }
                    })["catch"](function (err) {
                      console.error('InventFormComponente #413 Fehler beim Speichern neuer Inventar-Daten', {
                        err: err
                      });
                    });
                    return _context94.abrupt("return", inserting);

                  case 6:
                  case "end":
                    return _context94.stop();
                }
              }
            }, _callee94, this);
          }));
        }
      }, {
        key: "updateInventarArtikelRef",
        value: function updateInventarArtikelRef() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee95() {
            var jobid, uid, uuid, inventar;
            return regeneratorRuntime.wrap(function _callee95$(_context95) {
              while (1) {
                switch (_context95.prev = _context95.next) {
                  case 0:
                    jobid = this.baseData.getCurrentJobid();
                    uid = this.baseData.getCurrentUid();
                    uuid = this.formInventar.uuid;
                    inventar = {
                      mcid: this.formInventar.mcid,
                      mcuuid: this.formInventar.mcuuid,
                      ruuid: this.formInventar.ruuid,
                      code: this.formInventar.Barcode,
                      jobid: jobid,
                      modified_at: new Date(),
                      modified_uid: uid
                    };
                    return _context95.abrupt("return", this.inventarDataService.updateArtikelRef(uuid, inventar, jobid));

                  case 5:
                  case "end":
                    return _context95.stop();
                }
              }
            }, _callee95, this);
          }));
        }
      }, {
        key: "refreshInventoryProgress",
        value: function refreshInventoryProgress() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee96() {
            return regeneratorRuntime.wrap(function _callee96$(_context96) {
              while (1) {
                switch (_context96.prev = _context96.next) {
                  case 0:
                    return _context96.abrupt("return", Promise.all([this.refreshRaumProgress(), this.refreshGebaeudeProgress()]).then(function () {
                      console.log('InventFormComponente #425 Fortschritt für Gebaeude und Raum wurde aktualisiert');
                      return true;
                    })["catch"](function (err) {
                      console.error('InventFormComponente #428Beim Aktualisieren des Fortschritts von Gebaeude und Raum ist ein Fehler aufgetreten');
                      return false;
                    }));

                  case 1:
                  case "end":
                    return _context96.stop();
                }
              }
            }, _callee96, this);
          }));
        }
      }, {
        key: "refreshGebaeudeProgress",
        value: function refreshGebaeudeProgress() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee97() {
            var _this35 = this;

            return regeneratorRuntime.wrap(function _callee97$(_context97) {
              while (1) {
                switch (_context97.prev = _context97.next) {
                  case 0:
                    this.inventoryProgress.getCurrentGebaeudeProgress().then(function (progress) {
                      _this35.jobProgress.done = progress.done;
                      _this35.jobProgress.total = progress.total;
                    });

                  case 1:
                  case "end":
                    return _context97.stop();
                }
              }
            }, _callee97, this);
          }));
        }
      }, {
        key: "refreshRaumProgress",
        value: function refreshRaumProgress() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee98() {
            var _this36 = this;

            return regeneratorRuntime.wrap(function _callee98$(_context98) {
              while (1) {
                switch (_context98.prev = _context98.next) {
                  case 0:
                    this.inventoryProgress.getCurrentRaumProgress(this.roomUuiD).then(function (progress) {
                      _this36.raumProgress.done = progress.done;
                      _this36.raumProgress.total = progress.total;
                    })["catch"](function (err) {
                      console.error('InventFormComponente #449 Fehler bei Raum-Progress-Aktualisierung', err);
                    });

                  case 1:
                  case "end":
                    return _context98.stop();
                }
              }
            }, _callee98, this);
          }));
        }
      }, {
        key: "loadArtikelByUuid",
        value: function loadArtikelByUuid(artikelUuid) {
          var _this37 = this;

          this.dataService.getArtikel(artikelUuid).then(function (item) {
            _this37.loadArtikelByData(item);
          });
        }
      }, {
        key: "loadArtikelByData",
        value: function loadArtikelByData(artikel) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee99() {
            var tmp, insertResult, bConfirmUpdate, updateResult;
            return regeneratorRuntime.wrap(function _callee99$(_context99) {
              while (1) {
                switch (_context99.prev = _context99.next) {
                  case 0:
                    this.artikelUuiD = artikel.uuid;
                    this.formInventar.mcid = artikel.mcid;
                    this.formInventar.mcuuid = artikel.mcuuid;
                    this.formInventar.gcid = artikel.gcid;
                    this.formInventar.gcuuid = artikel.uuid;
                    this.formInventar.Bezeichnung = artikel.Bezeichnung;
                    this.formInventar.Typ = artikel.Typ;
                    console.log('InventFormComponent #475 loadArtikelByData', {
                      artikel: Object.assign({}, artikel),
                      formInventar: Object.assign({}, this.formInventar),
                      waitingForInventarData: this.waitingForInventarData,
                      waitingForNewInventarBarcode: this.waitingForNewInventarBarcode
                    });

                    if (this.allowNewInventarByGivenArticle) {
                      if (!this.waitingForInventarData && this.formInventar.Barcode.length > 1) {
                        this.formInventar.Barcode = '';
                        console.log('InventFormComponent #479 set waitingForNewInventarBarcode = true');
                        this.waitingForNewInventarBarcode = true;
                      }
                    }

                    tmp = Object.assign({}, this.formInventar);
                    this.formInventar = Object.assign({}, tmp);

                    if (!(!this.formInventar.uuid && this.waitingForInventarData)) {
                      _context99.next = 23;
                      break;
                    }

                    console.log('InventFormComponente #480 call this.saveNewInventar() from this.loadArtikelByData(...)');
                    _context99.next = 15;
                    return this.saveNewInventar();

                  case 15:
                    insertResult = _context99.sent;

                    if (!(insertResult && insertResult.success)) {
                      _context99.next = 21;
                      break;
                    }

                    this.waitingForInventarData = false;
                    this.toastr.success('Neues Inventar-Objekt wurde hinzugefügt!', 'Neuaufnahme gespeichert');
                    _context99.next = 23;
                    break;

                  case 21:
                    this.toastr.error('Neues Inventar-Objekt konnte nicht hinzugefügt werden!', 'Fehler bei Neuaufnahme');
                    return _context99.abrupt("return", false);

                  case 23:
                    if (!this.formInventar.uuid) {
                      _context99.next = 35;
                      break;
                    }

                    bConfirmUpdate = confirm('Möchten Sie die Inventardaten wirklich ändern!\n' + 'Dem Objekt wurden bereits Artikeldaten zugewiesen.\n' + 'Drücken Sie [OK] zur Bestätigung\n' + 'oder auf [Abbrechen]!');

                    if (!bConfirmUpdate) {
                      _context99.next = 35;
                      break;
                    }

                    _context99.next = 28;
                    return this.updateInventarArtikelRef();

                  case 28:
                    updateResult = _context99.sent;

                    if (!(updateResult && updateResult.success)) {
                      _context99.next = 33;
                      break;
                    }

                    this.toastr.success('Inventar wurde mit neuen Artikeldaten gespeichert', 'Erfolgreiche Artikelzuweisung');
                    _context99.next = 35;
                    break;

                  case 33:
                    this.toastr.error('Inventar konnte nicht aktualisiert werden!', 'Fehler bei Artikelzuweisung');
                    return _context99.abrupt("return", false);

                  case 35:
                    console.log('InventFormComponente #487 loadArtikelByData', {
                      waitingForNewInventarBarcode: this.waitingForNewInventarBarcode
                    });
                    console.log('InventFormComponente #488Applied argument artikel', artikel, ' to formInventar', this.formInventar);
                    this.reloadImageExistsStatus();
                    return _context99.abrupt("return", true);

                  case 39:
                  case "end":
                    return _context99.stop();
                }
              }
            }, _callee99, this);
          }));
        }
      }, {
        key: "loadInventarByUuid",
        value: function loadInventarByUuid(uuid) {
          var _this38 = this;

          this.dataService.getInventarData(uuid).then(function (result) {
            console.log('InventFormComponente #494 loadInventarById(uuid)', {
              uuid: uuid
            });

            _this38.loadInventarByData(result.inventarData);
          });
        }
      }, {
        key: "loadInventarByData",
        value: function loadInventarByData(inventarData) {
          var inventar = inventarData.inventar;
          var artikelRef = inventarData.artikelRef;
          var artikelData = inventarData.artikelData;
          console.log('InventFormComponente #503 loadInventarByData(inventarData)', {
            inventarData: inventarData
          });
          this.inventarData = inventarData;
          this.artikelUuiD = inventar.mcuuid;
          this.formInventar.mcid = inventar.mcid;
          this.formInventar.gcid = artikelRef ? artikelRef.gcid : 0;
          this.formInventar.mcuuid = artikelRef.uuid;
          this.formInventar.gcuuid = artikelData.uuid;
          this.formInventar.Bezeichnung = artikelData.Bezeichnung;
          this.formInventar.Typ = artikelData.Typ;
          this.formInventar.Barcode = inventar.code;
          this.formInventar.uuid = inventar.uuid;
          this.reloadImageExistsStatus();
        }
      }, {
        key: "reloadImageExistsStatus",
        value: function reloadImageExistsStatus() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee100() {
            var _this39 = this;

            return regeneratorRuntime.wrap(function _callee100$(_context100) {
              while (1) {
                switch (_context100.prev = _context100.next) {
                  case 0:
                    this.artikelImageExists = false;

                    if (this.formInventar.gcuuid) {
                      _context100.next = 3;
                      break;
                    }

                    return _context100.abrupt("return", false);

                  case 3:
                    return _context100.abrupt("return", this.imageService.imageExistsOfGcuuid(this.formInventar.gcuuid).then(function (exists) {
                      _this39.artikelImageExists = exists;
                      return exists;
                    })["catch"](function () {
                      return false;
                    }));

                  case 4:
                  case "end":
                    return _context100.stop();
                }
              }
            }, _callee100, this);
          }));
        }
      }, {
        key: "reloadRaumImageExistsStatus",
        value: function reloadRaumImageExistsStatus() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee101() {
            return regeneratorRuntime.wrap(function _callee101$(_context101) {
              while (1) {
                switch (_context101.prev = _context101.next) {
                  case 0:
                    return _context101.abrupt("return", this.loadRaumImages().then(function (numImgs) {
                      return numImgs > 0;
                    }));

                  case 1:
                  case "end":
                    return _context101.stop();
                }
              }
            }, _callee101, this);
          }));
        }
      }, {
        key: "reloadRaumImages",
        value: function reloadRaumImages() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee102() {
            var _this40 = this;

            return regeneratorRuntime.wrap(function _callee102$(_context102) {
              while (1) {
                switch (_context102.prev = _context102.next) {
                  case 0:
                    return _context102.abrupt("return", this.raumService.getRaumBilder(this.raum.uuid).then(function (images) {
                      console.log('InventFormComponent.raumService.getRaumBilder #376 images: ', images);
                      _this40.raumBilder = images;
                      return images.length;
                    }));

                  case 1:
                  case "end":
                    return _context102.stop();
                }
              }
            }, _callee102, this);
          }));
        }
      }, {
        key: "createKunstwerk",
        value: function createKunstwerk() {
          var _this41 = this;

          // YYYYMMDDHHMMSS
          // Fantasy Barcode: 9{MID}{DEVID}
          this.inventarDataService.getNewKunstBarcode().then(function (kBarcode) {
            _this41.clearFormInventar();

            _this41.formInventar.Barcode = kBarcode;
            _this41.waitingForInventarData = true;

            var modalCreateArtikel = _this41.openSelectCreateArtikel();

            modalCreateArtikel.setFormType(_modals_select_create_artikel_select_create_artikel_component__WEBPACK_IMPORTED_MODULE_8__["ArtikelFormType"].Kunst);
          });
        }
      }, {
        key: "openRaumbild",
        value: function openRaumbild(idx) {
          var _this42 = this;

          if (false) {} else {
            var imgUuids = this.raumBilder.map(function (itm) {
              return itm.uuid;
            });
            var modalRef = this.modalService.open(_modals_imagebox_imagebox_component__WEBPACK_IMPORTED_MODULE_31__["ImageboxComponent"], {
              size: 'xl'
            });
            console.log('openRaumplan', {
              raumBilder: this.raumBilder,
              imgUuids: imgUuids,
              idx: idx
            });
            this.modalWatch(modalRef, 'Imagebox');
            modalRef.componentInstance.setTitel('Raumbilder');
            modalRef.componentInstance.setImagesUuids(imgUuids, idx);
            modalRef.result["finally"](function () {
              _this42.loadRaumImages();
            });
          }
        }
      }, {
        key: "openRaumplan",
        value: function openRaumplan(idx) {
          if (false) {} else {
            var imgUuids = this.raumPlaene.map(function (itm) {
              return itm.uuid;
            });
            var modalRef = this.modalService.open(_modals_imagebox_imagebox_component__WEBPACK_IMPORTED_MODULE_31__["ImageboxComponent"], {
              size: 'xl'
            });
            console.log('openRaumplan', {
              raumPlaene: this.raumPlaene,
              imgUuids: imgUuids,
              idx: idx
            });
            this.modalWatch(modalRef, 'Imagebox');
            modalRef.componentInstance.setTitel('Raumpläne');
            modalRef.componentInstance.setImagesUuids(imgUuids, idx);
          }
        }
      }, {
        key: "openCreateArtikelImage",
        value: function openCreateArtikelImage() {
          var _this43 = this;

          var modalRef = this.modalService.open(_modals_create_artikel_image_create_artikel_image_component__WEBPACK_IMPORTED_MODULE_11__["CreateArtikelImageComponent"], {
            size: 'xl'
          });
          this.modalWatch(modalRef, 'CreateArtikelImage');
          modalRef.componentInstance.name = this.formInventar.Bezeichnung + '/' + this.formInventar.Typ;
          modalRef.componentInstance.gcuuid = this.formInventar.gcuuid;
          modalRef.componentInstance.setMetaData({
            for_jobid: this.jobid,
            mcuuid: this.formInventar.mcuuid,
            gcuuid: this.formInventar.gcuuid,
            name: this.formInventar.Bezeichnung + (this.formInventar.Typ ? '-' + this.formInventar.Typ : ''),
            desc: this.formInventar.Bezeichnung + (this.formInventar.Typ ? ' / ' + this.formInventar.Typ : '')
          });
          modalRef.result.then(function () {
            _this43.reloadImageExistsStatus();
          });
        }
      }, {
        key: "openCreateRaumImage",
        value: function openCreateRaumImage() {
          var _this44 = this;

          var rb = this.formInventar.Raumbezeichnung;
          var rm = this.formInventar.Raum;
          var name = '';

          if (rm) {
            name = rm.split('/').join('.').split(' ').join('_');
          } else {
            name = rb.split('/').join('.').split(' ').join('_');
          }

          var modalRef = this.modalService.open(_modals_create_raum_image_create_raum_image_component__WEBPACK_IMPORTED_MODULE_33__["CreateRaumImageComponent"], {
            size: 'xl'
          });
          this.modalWatch(modalRef, 'CreateRaumImage');
          modalRef.componentInstance.name = this.formInventar.Bezeichnung + '/' + this.formInventar.Typ;
          modalRef.componentInstance.gcuuid = this.formInventar.gcuuid;
          modalRef.componentInstance.setMetaData({
            for_jobid: this.jobid,
            ruuid: this.formInventar.ruuid,
            name: name,
            desc: rb
          });
          modalRef.result["finally"](function () {
            _this44.reloadRaumImageExistsStatus();
          });
        }
      }, {
        key: "openEditArtikelImage",
        value: function openEditArtikelImage() {
          var _this45 = this;

          var modalRef = this.modalService.open(_modals_create_artikel_image_create_artikel_image_component__WEBPACK_IMPORTED_MODULE_11__["CreateArtikelImageComponent"], {
            size: 'xl'
          });
          this.modalWatch(modalRef, 'CreateArtikelImage');
          modalRef.componentInstance.name = this.formInventar.Bezeichnung + '/' + this.formInventar.Typ;
          modalRef.componentInstance.setMetaData({
            mcuuid: this.formInventar.mcuuid,
            gcuuid: this.formInventar.gcuuid,
            for_jobid: this.jobid,
            name: this.formInventar.Bezeichnung,
            desc: this.formInventar.Bezeichnung
          });
          modalRef.result.then(function () {
            _this45.reloadImageExistsStatus();
          });
        }
      }, {
        key: "openShowArtikelImage",
        value: function openShowArtikelImage() {
          var _this46 = this;

          var modalRef = this.modalService.open(_modals_show_artikel_image_show_artikel_image_component__WEBPACK_IMPORTED_MODULE_12__["ShowArtikelImageComponent"], {
            size: 'xl'
          });
          this.modalWatch(modalRef, 'ShowArtikelImage');
          modalRef.componentInstance.name = 'World';
          console.log('openShowArtikelImage #642 setMcuuid: ', this.formInventar.mcuuid);
          modalRef.componentInstance.setMcuuid(this.formInventar.mcuuid, this.formInventar.gcuuid);
          modalRef.result.then(function () {
            _this46.reloadImageExistsStatus();
          });
        }
      }, {
        key: "openScanner",
        value: function openScanner(inputElm) {
          var _this47 = this;

          var modalRef = this.modalService.open(_modals_scanner_scanner_component__WEBPACK_IMPORTED_MODULE_10__["ScannerComponent"], {
            size: 'xl'
          });
          this.modalWatch(modalRef, 'Scanner');
          modalRef.componentInstance.name = 'World';
          var sub = modalRef.componentInstance.onScan.subscribe(function (data) {
            var scan = {
              barcode: data.barcode,
              length: data.length,
              valid: data.valid,
              target: inputElm
            };
            modalRef.close();
            console.log('InventFormComponente #588 call handleScanData', {
              data: data,
              scan: scan
            });

            _this47.handleScanData(scan);
          });
          modalRef.result.then(function () {
            sub.unsubscribe();
          })["catch"](function () {});
        }
      }, {
        key: "openBatchScans",
        value: function openBatchScans(barcodes, inputElm) {
          var _this48 = this;

          console.log('InventFormComponent.openBatchScans(', barcodes, ') #778', {
            barcodes: barcodes,
            inputElm: inputElm
          });
          var modalRef = this.modalService.open(_modals_batch_barcodes_batch_barcodes_component__WEBPACK_IMPORTED_MODULE_34__["BatchBarcodesComponent"], {
            size: 'xl'
          });
          this.modalWatch(modalRef, 'BatchBarcodes');

          if (!modalRef.componentInstance.jobid) {
            modalRef.componentInstance.setJobid(this.jobid);
          }

          modalRef.componentInstance.setRaum(this.raum);
          modalRef.componentInstance.setBarcodes(barcodes);
          var sub = modalRef.componentInstance.onScan.subscribe(function (data) {
            console.log('InventFormComponent.openBatchScans subscribe response #785', {
              data: data
            });
            var scan = {
              barcode: data.barcode,
              length: data.length,
              valid: data.valid,
              target: inputElm
            };
            modalRef.close();
            console.log('InventFormComponente #588 call handleScanData', {
              data: data,
              scan: scan
            });

            _this48.handleScanData(scan);
          });
          var sub2 = modalRef.componentInstance.onLookupResultApply.subscribe(function (data) {
            var modalIsClosed = false;

            if (data.ModalRaumUuid !== _this48.raum.uuid) {
              modalRef.close();
              modalIsClosed = true;
              alert('Fehler: Raumangabe in Hauptfenster und Dialog stimmen nicht mehr überein!\n' + 'ModalRaumUuid: ' + data.ModalRaumUuid + '\n' + 'Main-Raum-UUID: ' + _this48.raum.uuid);
              return;
            }

            if (modalRef.componentInstance.closeOnApplyBarcode) {
              modalRef.close();
              modalIsClosed = true;
            }

            if (data.result.lookupResultTable === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].Inventar) {
              var inventarData = {
                inventar: data.result.inventar,
                artikelRef: data.result.artikelRef,
                artikelData: data.result.artikelData
              };

              _this48.assignInventarToRaum(inventarData).then(function () {
                _this48.playSuccess();

                if (!modalIsClosed && modalRef && modalRef.componentInstance) {
                  modalRef.componentInstance.showBlobAlertSuccess();
                  modalRef.componentInstance.setAssignedInventar(data.barcode);
                }
              })["catch"](function (reason) {
                _this48.playError();

                if (!modalIsClosed && modalRef && modalRef.componentInstance) {
                  modalRef.componentInstance.showBlobAlertError();
                }
              });
            }
          });
          modalRef.result.then(function () {
            sub.unsubscribe();
            sub2.unsubscribe();
          }, function () {});
        }
      }, {
        key: "getModalRefByName",
        value: function getModalRefByName(name) {
          var modal = this.currentModals.find(function (mod) {
            return mod.name === name;
          });
          return modal && modal.modalRef.componentInstance ? modal.modalRef : null;
        }
      }, {
        key: "closeModalIfOpen",
        value: function closeModalIfOpen(name) {
          var modal = this.currentModals.find(function (mod) {
            return mod.name === name;
          });

          if (modal && modal.modalRef.componentInstance) {
            modal.modalRef.close();
            return true;
          }

          return false;
        }
      }, {
        key: "modalWatch",
        value: function modalWatch(modalRef, name) {
          var _this49 = this;

          var mRef = modalRef;
          var mName = name;
          console.log('InventFormComponente #610 Opened Modal: ', name);
          var currModal = {
            modalRef: modalRef,
            name: name,
            isOpen: true
          };
          this.currentModal = currModal;
          this.currentModals = this.currentModals.filter(function (mod) {
            return undefined !== mod.modalRef.componentInstance;
          });
          this.currentModals.push(currModal);
          console.log('InventFormComponente #618 After open Modal: ', this.currentModal, this.currentModals);
          modalRef.result.then(function (result) {
            if (name === 'SelectCreateRaum') {
              _this49.openedCreateRaum = false;
            }

            _this49.currentModals = _this49.currentModals.filter(function (mod) {
              return undefined !== mod.modalRef.componentInstance;
            });

            if (_this49.currentModals.length) {
              _this49.currentModal = _this49.currentModals[_this49.currentModals.length - 1];
            } else {
              _this49.currentModal = {
                modalRef: null,
                name: '',
                isOpen: false
              };
            }
          })["catch"](function (err) {
            if (name === 'SelectCreateRaum') {
              _this49.openedCreateRaum = false;
            }

            _this49.currentModals = _this49.currentModals.filter(function (mod) {
              return undefined !== mod.modalRef.componentInstance;
            });

            if (typeof err !== 'string' || err.indexOf('Cross click') === -1) {
              console.error('InventFormComponente #902 Error on Closing Modal ', {
                mName: mName,
                err: err
              });
            }

            if (_this49.currentModals.length) {
              _this49.currentModal = _this49.currentModals[_this49.currentModals.length - 1];
            } else {
              _this49.currentModal = {
                modalRef: null,
                name: '',
                isOpen: false
              };
            }

            console.log('InventFormComponente #652 After Catch: ', _this49.currentModal, _this49.currentModals);
          });
        }
      }, {
        key: "openSelectCreateArtikel",
        value: function openSelectCreateArtikel() {
          var _this50 = this;

          var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
          var modalRef = this.modalService.open(_modals_select_create_artikel_select_create_artikel_component__WEBPACK_IMPORTED_MODULE_8__["SelectCreateArtikelComponent"], {
            size: 'xl'
          }); // , scrollable: true } );

          this.modalWatch(modalRef, 'SelectCreateArtikel');
          modalRef.componentInstance.name = 'World';
          modalRef.componentInstance.clientId = this.clientID;
          modalRef.componentInstance.artikelCreated.subscribe(function (artikel) {
            _this50.loadArtikelByData(artikel.newItem);
          });
          modalRef.componentInstance.artikelSelected.subscribe(function (item) {
            console.log('InventFormComponente #665 openSelectCreateArtikel Apply selected Article', item);

            _this50.loadArtikelByUuid(item.uuid);
          });
          modalRef.componentInstance.artikelSearching.subscribe(function (raum) {
            _this50.openSelectSearchArtikel();
          });
          return modalRef.componentInstance;
        }
      }, {
        key: "openSelectSearchArtikel",
        value: function openSelectSearchArtikel() {
          var _this51 = this;

          var modalRef = this.modalService.open(_modals_select_search_artikel_select_search_artikel_component__WEBPACK_IMPORTED_MODULE_13__["SelectSearchArtikelComponent"], {
            size: 'xl'
          });
          this.modalWatch(modalRef, 'SelectSearchArtikel');
          modalRef.componentInstance.clientId = this.clientID;
          modalRef.componentInstance.artikelSelected.subscribe(function (item) {
            console.log('InventFormComponente #678 Apply selected Article', item);

            _this51.loadArtikelByUuid(item.uuid);
          });
          modalRef.componentInstance.artikelCreating.subscribe(function (mid) {
            modalRef.close();

            _this51.openSelectCreateArtikel();
          });
        }
      }, {
        key: "openSelectSearchRaum",
        value: function openSelectSearchRaum() {
          var _this52 = this;

          var modalRef = this.modalService.open(_modals_select_search_raum_select_search_raum_component__WEBPACK_IMPORTED_MODULE_17__["SelectSearchRaumComponent"], {
            size: 'xl'
          });
          this.modalWatch(modalRef, 'SelectSearchRaum');
          modalRef.componentInstance.gebaeudeId = this.buildingID;
          modalRef.componentInstance.raumSelected.subscribe(function (raum) {
            _this52.loadRaumByData(raum);
          });
          modalRef.componentInstance.raumCreating.subscribe(function (gid) {
            modalRef.close();

            _this52.openSelectCreateRaum();
          });
        }
      }, {
        key: "openEditRaum",
        value: function openEditRaum() {
          var _this53 = this;

          var modalRef = this.modalService.open(_modals_edit_raum_edit_raum_component__WEBPACK_IMPORTED_MODULE_28__["EditRaumComponent"], {
            size: 'xl'
          });
          this.modalWatch(modalRef, 'EditRaum');
          modalRef.componentInstance.raumUuid = this.roomUuiD;
          modalRef.componentInstance.raumChanged.subscribe(function (raum) {
            _this53.loadRaumByData(raum);
          });
          modalRef.componentInstance.scannerRequest.subscribe(function (target) {
            _this53.openScanner(target);
          });
        }
      }, {
        key: "openEditInventar",
        value: function openEditInventar() {
          var _this54 = this;

          var modalRef = this.modalService.open(_modals_edit_inventar_edit_inventar_component__WEBPACK_IMPORTED_MODULE_30__["EditInventarComponent"], {
            size: 'xl'
          });
          this.modalWatch(modalRef, 'EditInventar');
          console.log('InventFormComponente #715 this.inventarData ' + this.inventarData.inventar.uuid);
          modalRef.componentInstance.inventarUuid = this.inventarData.inventar.uuid;
          modalRef.componentInstance.inventarChanged.subscribe(function (inventar) {
            console.log('InventFormComponente #718 Aktualisierte Inventar-Daten', {
              inventar: inventar
            });

            _this54.toastr.success('Inventardaten wurden aktualisiert!');

            _this54.loadInventarByUuid(inventar.inventar.uuid);
          });
          modalRef.componentInstance.scannerRequest.subscribe(function (target) {
            _this54.openScanner(target);
          });
        }
      }, {
        key: "openSelectCreateRaum",
        value: function openSelectCreateRaum() {
          var _this55 = this;

          var modalRef = this.modalService.open(_modals_select_create_raum_select_create_raum_component__WEBPACK_IMPORTED_MODULE_14__["SelectCreateRaumComponent"], {
            size: 'xl'
          });
          this.modalWatch(modalRef, 'SelectCreateRaum');
          this.openedCreateRaum = true;
          modalRef.componentInstance.gebaeudeId = this.buildingID;
          modalRef.componentInstance.raumCreated.subscribe(function (raum) {
            _this55.loadRaumByData(raum);
          });
          modalRef.componentInstance.raumSearching.subscribe(function () {
            _this55.openSelectSearchRaum();
          });
          modalRef.componentInstance.scannerRequest.subscribe(function (target) {
            _this55.openScanner(target);
          });
        }
      }, {
        key: "openGesamtListDone",
        value: function openGesamtListDone(useGebaeude) {
          var _this56 = this;

          var gebaeude = useGebaeude || this.gebaeude;
          var modalRef = this.modalService.open(_modals_gesamt_list_done_gesamt_list_done_component__WEBPACK_IMPORTED_MODULE_25__["GesamtListDoneComponent"], {
            size: 'xl',
            scrollable: true
          });
          this.modalWatch(modalRef, 'GesamtListDone');
          modalRef.componentInstance.gebaeude = gebaeude;
          modalRef.componentInstance.raumSelected.subscribe(function (ruuid) {
            _this56.loadRaumById(ruuid);
          });
          modalRef.componentInstance.requestGesamtRest.subscribe(function (g) {
            _this56.openGesamtListRest(g);
          });
        }
      }, {
        key: "openGesamtListRest",
        value: function openGesamtListRest(useGebaeude) {
          var _this57 = this;

          var gebaeude = useGebaeude || this.gebaeude;

          if (!gebaeude || !gebaeude.gid) {
            console.error('InventFormComponente #759 No Gebaeude-Data!!!');
          } else {
            console.log('InventFormComponente #761 OpenGesamtListRest', {
              buildingID: this.buildingID,
              gebaeude: this.gebaeude
            });
          }

          var modalRef = this.modalService.open(_modals_gesamt_list_rest_gesamt_list_rest_component__WEBPACK_IMPORTED_MODULE_24__["GesamtListRestComponent"], {
            size: 'xl',
            scrollable: true
          });
          this.modalWatch(modalRef, 'GesamtListRest');
          modalRef.componentInstance.gebaeude = gebaeude;
          modalRef.componentInstance.raumSelected.subscribe(function (ruuid) {
            _this57.loadRaumById(ruuid);
          });
          modalRef.componentInstance.requestGesamtDone.subscribe(function (g) {
            _this57.openGesamtListDone(g);
          });
        }
      }, {
        key: "openRaumListDone",
        value: function openRaumListDone(useRaum) {
          var _this58 = this;

          var raum = useRaum || this.raum;
          var modalRef = this.modalService.open(_modals_raum_list_done_raum_list_done_component__WEBPACK_IMPORTED_MODULE_16__["RaumListDoneComponent"], {
            size: 'xl',
            scrollable: true
          });
          this.modalWatch(modalRef, 'RaumListDone');
          modalRef.componentInstance.raum = raum;
          modalRef.componentInstance.requestRestList.subscribe(function (r) {
            _this58.openRaumListRest(r);
          });
        }
      }, {
        key: "openRaumListRest",
        value: function openRaumListRest(useRaum) {
          var _this59 = this;

          var raum = useRaum || this.raum;
          var modalRef = this.modalService.open(_modals_raum_list_rest_raum_list_rest_component__WEBPACK_IMPORTED_MODULE_15__["RaumListRestComponent"], {
            size: 'xl',
            scrollable: true
          });
          this.modalWatch(modalRef, 'RaumListRest');
          modalRef.componentInstance.raum = raum;
          modalRef.componentInstance.requestDoneList.subscribe(function (r) {
            _this59.openRaumListDone(r);
          });
        }
      }, {
        key: "ngOnDestroy",
        value: function ngOnDestroy() {
          this.routingSubscription.unsubscribe();
          this.raumStatusChangeSubscription.unsubscribe();
          this.inventarDataChangeSubscription.unsubscribe();
          this.inventurLockStatusChangeSubscription.unsubscribe();
        }
      }, {
        key: "toggleRaumEditStatus",
        value: function toggleRaumEditStatus() {
          var jobid = this.baseData.getCurrentJobid();

          if (this.raumEditStatus !== _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["DBDIRaumEditStatus"].Closed) {
            this.raumService.setRaumStatusClosed(this.roomUuiD, jobid);
          } else {
            this.raumService.setRaumStatusStarted(this.roomUuiD, jobid);
          }
        }
      }, {
        key: "setJobLockStatusClosed",
        value: function setJobLockStatusClosed() {
          this.inventoryProgress.setCurrentInventurLockStatusClosed();
        }
      }, {
        key: "setJobLockStatusOpened",
        value: function setJobLockStatusOpened() {
          this.inventoryProgress.setCurrentInventurLockStatusOpened();
        }
      }, {
        key: "setRaumEditStatusClosed",
        value: function setRaumEditStatusClosed() {
          var jobid = this.baseData.getCurrentJobid();
          this.raumService.setRaumStatusClosed(this.roomUuiD, jobid);
        }
      }, {
        key: "setRaumEditStatusStarted",
        value: function setRaumEditStatusStarted() {
          var jobid = this.baseData.getCurrentJobid();
          this.raumService.setRaumStatusStarted(this.roomUuiD, jobid);
        }
      }, {
        key: "setRaumEditStatusUntouched",
        value: function setRaumEditStatusUntouched() {
          var jobid = this.baseData.getCurrentJobid();
          this.raumService.setRaumStatusInit(this.roomUuiD, jobid);
        }
      }, {
        key: "onRaumBarcodeInput",
        value: function onRaumBarcodeInput(event) {
          if (event.target instanceof HTMLInputElement || 'value' in event.target) {
            console.log('InventFormComponente #838 BarCodeInput :', event.target.value);
          }
        }
      }, {
        key: "showGesamtDone",
        value: function showGesamtDone() {
          console.log('InventFormComponente #843 Called show Gesamt Done');
          this.openGesamtListDone();
        }
      }, {
        key: "showGesamtRest",
        value: function showGesamtRest() {
          console.log('InventFormComponente #848 Called show Gesamt Rest');
          this.openGesamtListRest();
        }
      }, {
        key: "showRaumDone",
        value: function showRaumDone() {
          console.log('InventFormComponente #853 Called show Raum Done ...');
          this.openRaumListDone();
        }
      }, {
        key: "showRaumRest",
        value: function showRaumRest() {
          console.log('InventFormComponente #858 Called show Raum Rest');
          this.openRaumListRest();
        }
      }, {
        key: "bcTrimZero",
        value: function bcTrimZero(barcode) {
          barcode = barcode.trim();

          while (barcode.charAt(0) === '0') {
            barcode = barcode.substr(1).trim();
          }

          return barcode;
        }
      }, {
        key: "onBarcodeInput",
        value: function onBarcodeInput() {}
      }, {
        key: "handleScanData",
        value: function handleScanData(event) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee103() {
            var _this60 = this;

            var enableBatchInput, numBatchCodes, batchError, barcodes, bcResult, barcode, RaumCreateModal, RaumEditModal, InventarEditModal, modalComp, _modalComp, _modalComp2, insertResult, geb, gebName;

            return regeneratorRuntime.wrap(function _callee103$(_context103) {
              while (1) {
                switch (_context103.prev = _context103.next) {
                  case 0:
                    enableBatchInput = false;
                    event.barcode = this.bcTrimZero(event.barcode);

                    if (this.kunde.mid === 5 && event.barcode.length > 10) {
                      if (!event.barcode.startsWith('A') && !event.barcode.startsWith('R')) {
                        event.barcode = event.barcode.substr(0, 10);
                      }
                    }

                    if (this.rawInputBarcodes && this.rawInputBarcodes.nativeElement && 'value' in this.rawInputBarcodes.nativeElement) {
                      this.rawInputBarcodes.nativeElement.value = '';

                      if ('rawInput' in event && event.rawInput) {
                        this.rawInputBarcodes.nativeElement.value = event.rawInput;

                        if ('debugData' in event && event.debugData && event.debugData.keyDownEvents) {
                          this.rawInputBarcodes.nativeElement.value += '\n\nkeyDownEvents:\n' + JSON.stringify(event.debugData.keyDownEvents);
                        }
                      }
                    }

                    if (!(event.barcode.indexOf('\n') > -1)) {
                      _context103.next = 16;
                      break;
                    }

                    numBatchCodes = event.barcode.split('\n').length;
                    batchError = '';

                    if (!this.raum) {
                      batchError = 'Wählen Sie erst einen Raum aus!';
                    } else if (this.waitingForNewInventarBarcode) {
                      batchError = 'Aktueller Vorgang erwartet einzelnen neuen Inventar-Barcode!';
                    } else if (this.waitingForInventarData) {
                      batchError = 'Aktueller Vorgang erwartet einzelne Artikelzuweisung!';
                    }

                    if (!batchError) {
                      _context103.next = 11;
                      break;
                    }

                    alert(batchError + '\n' + 'Es wurden ' + numBatchCodes + ' Barcodes im Batchmodus übermittelt!');
                    return _context103.abrupt("return");

                  case 11:
                    barcodes = event.barcode.split('\n').map(function (c) {
                      var bc = _this60.bcTrimZero(c.trim());

                      if (_this60.kunde.mid === 5 && bc.length > 10 && !bc.startsWith('A') && !bc.startsWith('R')) {
                        bc = bc.substr(0, 10);
                      }

                      return bc;
                    });

                    if (!enableBatchInput) {
                      _context103.next = 14;
                      break;
                    }

                    return _context103.abrupt("return", this.openBatchScans(barcodes, event.target));

                  case 14:
                    alert('Auslesen mehrerer Barcodes pro Scan ist deaktiviert.\nBarcodes müssen einzeln gescannt werden!');
                    return _context103.abrupt("return");

                  case 16:
                    console.log('InventFormComponente #865 handleScanData', {
                      waitingForNewInventarBarcode: this.waitingForNewInventarBarcode,
                      event: event
                    });
                    _context103.next = 19;
                    return this.bcLookup.fullLookup(event.barcode, this.jobid);

                  case 19:
                    bcResult = _context103.sent;
                    console.log('InventFormComponente #867 handleScanData', {
                      bcResult: bcResult
                    });
                    barcode = event.barcode;
                    this.displayScannedBarcode(event.barcode);
                    RaumCreateModal = this.getModalRefByName('SelectCreateRaum');
                    RaumEditModal = this.getModalRefByName('EditRaum');
                    InventarEditModal = this.getModalRefByName('EditInventar');

                    if (!(RaumCreateModal && RaumCreateModal.componentInstance)) {
                      _context103.next = 37;
                      break;
                    }

                    if (!(bcResult.lookupResultTable === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].None)) {
                      _context103.next = 34;
                      break;
                    }

                    modalComp = RaumCreateModal.componentInstance; // alert('transfer Code to Input SelectCreateRaumComponentraumDaten.code!');

                    modalComp.raumDaten.code = bcResult.barcode;
                    this.playSuccess();
                    return _context103.abrupt("return", true);

                  case 34:
                    this.playError();
                    this.toastr.error('Gebe einen gülten Barcode ein oder schließe den Dialog "Neuen Raum anlegen"!' + '<br>' + barcode, 'Ungültiger Barcode für Raum-Neu-Erfassung:');
                    return _context103.abrupt("return", false);

                  case 37:
                    if (!(RaumEditModal && RaumEditModal.componentInstance)) {
                      _context103.next = 47;
                      break;
                    }

                    if (!(bcResult.lookupResultTable === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].None)) {
                      _context103.next = 44;
                      break;
                    }

                    _modalComp = RaumEditModal.componentInstance; // alert('transfer Code to Input EditRaumComponent.raumInput.code!');

                    if (confirm('Achtung! Möchtest du wirklich den Raumbarcode bearbeiten?')) {
                      _modalComp.raumInput.code = bcResult.barcode;
                      this.playSuccess();
                    }

                    return _context103.abrupt("return", true);

                  case 44:
                    this.playError();
                    this.toastr.error('Gebe einen gülten Barcode ein oder schließe den Dialog "Raum aktualisieren"!' + '<br>' + barcode + ' [' + _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"][bcResult.lookupResultTable] + ']', 'Ungültiger Barcode für Raum-Aktualisierung');
                    return _context103.abrupt("return", false);

                  case 47:
                    if (!(InventarEditModal && InventarEditModal.componentInstance)) {
                      _context103.next = 58;
                      break;
                    }

                    if (!(bcResult.lookupResultTable === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].None)) {
                      _context103.next = 55;
                      break;
                    }

                    _modalComp2 = InventarEditModal.componentInstance; // alert('transfer Code to Input EditRaumComponent.raumInput.code!');

                    _modalComp2.inventarInput.code = bcResult.barcode;
                    this.playSuccess();
                    return _context103.abrupt("return", true);

                  case 55:
                    this.playError();
                    this.toastr.error('Gebe einen gülten Barcode ein oder schließe den Dialog "Barcode aktualisieren"!' + '<br>' + barcode, 'Ungültiger Barcode für Inventar-Aktualisierung');
                    return _context103.abrupt("return", false);

                  case 58:
                    if (!this.waitingForNewInventarBarcode) {
                      _context103.next = 79;
                      break;
                    }

                    console.log('InventFormComponente #949 handleScanData');

                    if (!(bcResult.lookupResultTable === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].None)) {
                      _context103.next = 72;
                      break;
                    }

                    this.formInventar.Barcode = bcResult.barcode;
                    console.log('InventFormComponente #952 handleScanData');
                    console.log('InventFormComponente #953 call this.saveNewInventar() from this.handleScanData');
                    this.waitingForNewInventarBarcode = false;
                    _context103.next = 67;
                    return this.saveNewInventar();

                  case 67:
                    insertResult = _context103.sent;

                    if (insertResult && insertResult.success) {
                      this.playSuccess();
                    } else {
                      this.playError();
                    }

                    return _context103.abrupt("return", true);

                  case 72:
                    this.playError();
                    console.log('InventFormComponente #960 handleScanData');

                    if (!confirm('Barcode ist bereits vergeben!\n' + 'Drücken Sie [Abbrechen], um die Neuaufnahme abzubrechen!\n' + 'Drücken Sie [OK], wenn Sie einen neuen Barcode vergeben wollen.')) {
                      _context103.next = 78;
                      break;
                    }

                    return _context103.abrupt("return");

                  case 78:
                    this.waitingForNewInventarBarcode = false;

                  case 79:
                    console.log('InventFormComponente #972 handleScanData');

                    if (!this.waitingForInventarData) {
                      _context103.next = 93;
                      break;
                    }

                    if (!(bcResult.lookupResultTable !== _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].ObjektKatalogMandant)) {
                      _context103.next = 91;
                      break;
                    }

                    this.playError();

                    if (!confirm('Fehler: Erwarte Artikel-Barcode!\n' + 'Drücken Sie [Abbrechen], um die Neuaufnahme abzubrechen!\n' + 'Drücken Sie [OK], wenn Sie einen Artikel zuweisen möchten.')) {
                      _context103.next = 87;
                      break;
                    }

                    return _context103.abrupt("return");

                  case 87:
                    this.waitingForInventarData = false;
                    console.log('InventFormComponente #1034 handleScanData', {
                      waitingForNewInventarBarcode: this.waitingForNewInventarBarcode
                    });

                  case 89:
                    _context103.next = 93;
                    break;

                  case 91:
                    console.log('InventFormComponente #986 Found Artikel-Barcode', {
                      bcResult: bcResult
                    });
                    console.log('InventFormComponente #987 Continue ...');

                  case 93:
                    _context103.t0 = bcResult.lookupResultTable;
                    _context103.next = _context103.t0 === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].None ? 96 : _context103.t0 === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].Raeume ? 107 : _context103.t0 === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].Inventar ? 120 : _context103.t0 === _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].ObjektKatalogMandant ? 125 : 130;
                    break;

                  case 96:
                    console.log('InventFormComponente #990 handleScanData LookupResultTable.None');

                    if (bcResult.barcode.match(/^(\d{10}|L\d{9,10})$/)) {
                      _context103.next = 101;
                      break;
                    }

                    console.log('InventFormComponent.handleScanData() #1163', {
                      bcResult: bcResult
                    });

                    if (confirm('Der Barcode besteht nicht wie erwartet aus 10 Zahlen!\n' + 'Möchten Sie ihn dennoch für die Neuaufnahme verwenden?')) {
                      _context103.next = 101;
                      break;
                    }

                    return _context103.abrupt("return");

                  case 101:
                    this.clearFormInventar();
                    this.formInventar.Barcode = bcResult.barcode;
                    this.waitingForInventarData = true;
                    this.playSuccess().then(function () {// this.openSelectSearchArtikel();
                    }); // ToDo: Reaktion auf neuen Barcode ändern in Neufnahme
                    // User soll daraufhin einen Artikel zuweisen können

                    this.toastr.warning('Barcode: ' + barcode + '<br>' + 'Für eine Neuaufnahme weisen sie bitte einen Artikel zu!<br>\n' + '<i>Oder nutzen Sie unter Einstellungen die Funktion reIndexBarcodeLookup, ' + 'falls neu aufgenommene Elemente nicht erkannt werden.</i>', 'Unbekannter Barcode');
                    return _context103.abrupt("break", 132);

                  case 107:
                    console.log('InventFormComponente #1008 handleScanData LookupResultTable.Raeume');

                    if (!(bcResult.raum.gid === this.buildingID)) {
                      _context103.next = 114;
                      break;
                    }

                    this.loadRaumByData(bcResult.raum);
                    this.playSuccess();
                    return _context103.abrupt("return");

                  case 114:
                    geb = bcResult.gebaeude;
                    gebName = geb ? geb.Gebaeude || geb.Adresse : ' Unbekannte Standort-ID ' + bcResult.raum.gid;
                    this.playError();
                    this.toastr.error('Der gescannte Raum-Barcode ist einem anderen Standort zugewiesen: ' + gebName, 'Fehler: Raum kann nicht geladen werden!');

                    if (0) {}

                  case 119:
                    return _context103.abrupt("break", 132);

                  case 120:
                    console.log('InventFormComponente #1031 handleScanData LookupResultTable.Inventar');
                    this.modalService.dismissAll();
                    this.assignInventarToRaum({
                      inventar: bcResult.inventar,
                      artikelRef: bcResult.artikelRef,
                      artikelData: bcResult.artikelData
                    });
                    this.playSuccess();
                    return _context103.abrupt("break", 132);

                  case 125:
                    console.log('InventFormComponente #1095 handleScanData LookupResultTable.Mandant', {
                      bcResult: bcResult
                    });

                    if (!this.formInventar.Barcode) {
                      this.playError();
                      this.toastr.error('Bitte scanne erst einen neuen InventarBarcode für die Artikelzuweisung', 'Fehler bei Barcodezuweisung');
                    }

                    if (!this.waitingForInventarData && this.formInventar.uuid) {
                      this.playError();
                      this.toastr.warning('Sie versuchen gerade bereits zugewiesene Inventar-Daten zu ändern', 'Warnung');
                    }

                    this.loadArtikelByData(Object.assign({}, bcResult.artikelRef, {
                      mcuuid: bcResult.artikelRef.uuid
                    }, bcResult.artikelData)).then(function (success) {
                      if (success) {
                        _this60.playSuccess();
                      } else {
                        _this60.playError();
                      }
                    });
                    return _context103.abrupt("break", 132);

                  case 130:
                    this.playError();
                    this.toastr.error('Ungültiger oder nicht richtig erkannter Barcode!');

                  case 132:
                  case "end":
                    return _context103.stop();
                }
              }
            }, _callee103, this);
          }));
        }
      }, {
        key: "displayScannedBarcode",
        value: function displayScannedBarcode(barcode) {
          var _this61 = this;

          this.input2.nativeElement.value = barcode;
          this.lastScanDetectTime = new Date();
          this.lastScanDetectClass = 'NewFreshScan CountDown-5';
          var countdown = 5;

          if (this.lastScanDetectTimer) {
            clearInterval(this.lastScanDetectTimer);
            this.lastScanDetectTimer = null;
          }

          this.lastScanDetectTimer = setInterval(function () {
            _this61.lastScanDetectClass = 'NewFreshScan CountDown-' + --countdown;

            if (countdown < 1) {
              _this61.lastScanDetectClass = '';
              clearInterval(_this61.lastScanDetectTimer);
              _this61.lastScanDetectTimer = null;
            }
          }, 1000);
        } // dummy

      }, {
        key: "simulateScanner",
        value: function simulateScanner() {
          if (!this.inputSimulateBarcode || !this.inputSimulateBarcode.nativeElement || !this.inputSimulateBarcode.nativeElement.value || !(typeof this.inputSimulateBarcode.nativeElement.value === 'string')) {
            return;
          }

          var input = this.inputSimulateBarcode.nativeElement.value;
          var s = input.replace('\r\n', '\n').replace('\r', '\n');

          var _iterator6 = _createForOfIteratorHelper(s),
              _step6;

          try {
            var _loop3 = function _loop3() {
              var character = _step6.value;
              var key = character;
              var shiftKey = false;

              if (character === '\t') {
                key = 'Tab';
              } else if (character === '\n') {
                key = 'Enter';
              } else if (character !== character.toLowerCase() && character === character.toUpperCase()) {
                shiftKey = true;
                var shiftEvent = new KeyboardEvent('keydown', {
                  bubbles: true,
                  cancelable: true,
                  key: 'Shift',
                  code: 'ShiftLeft',
                  shiftKey: shiftKey
                });
                document.dispatchEvent(shiftEvent);
              }

              var e = new KeyboardEvent('keydown', {
                bubbles: true,
                cancelable: true,
                key: character,
                shiftKey: shiftKey
              });
              setTimeout(function () {
                return document.dispatchEvent(e);
              });
            };

            for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
              _loop3();
            }
          } catch (err) {
            _iterator6.e(err);
          } finally {
            _iterator6.f();
          }

          var xe = new KeyboardEvent('keydown', {
            bubbles: true,
            cancelable: true,
            key: 'Enter',
            shiftKey: false
          });
          setTimeout(function () {
            return document.dispatchEvent(xe);
          });
        }
      }, {
        key: "playSuccess",
        value: function playSuccess() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee104() {
            return regeneratorRuntime.wrap(function _callee104$(_context104) {
              while (1) {
                switch (_context104.prev = _context104.next) {
                  case 0:
                    this.showBlobAlertSuccess();
                    this.sounds.playSuccess();

                  case 2:
                  case "end":
                    return _context104.stop();
                }
              }
            }, _callee104, this);
          }));
        }
      }, {
        key: "playError",
        value: function playError() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee105() {
            return regeneratorRuntime.wrap(function _callee105$(_context105) {
              while (1) {
                switch (_context105.prev = _context105.next) {
                  case 0:
                    this.showBlobAlertError();
                    this.sounds.playError();

                  case 2:
                  case "end":
                    return _context105.stop();
                }
              }
            }, _callee105, this);
          }));
        }
      }, {
        key: "kundeName",
        get: function get() {
          return this.kunde ? this.kunde.Mandant : '';
        }
      }, {
        key: "adresse",
        get: function get() {
          return this.gebaeude ? this.gebaeude.Gebaeude : '';
        }
      }, {
        key: "raumNr",
        get: function get() {
          return this.raum ? this.raum.Raum : '';
        }
      }, {
        key: "gebaeudeId",
        get: function get() {
          return this.buildingID;
        }
      }]);

      return InventFormComponent;
    }();

    InventFormComponent.ctorParameters = function () {
      return [{
        type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"]
      }, {
        type: _angular_common__WEBPACK_IMPORTED_MODULE_3__["Location"]
      }, {
        type: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_4__["DataService"]
      }, {
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_9__["NgbModal"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_18__["BasedataService"]
      }, {
        type: _shared_inventory_progress_inventory_progress_service__WEBPACK_IMPORTED_MODULE_7__["InventoryProgressService"]
      }, {
        type: _shared_services_inventory_editor_service__WEBPACK_IMPORTED_MODULE_19__["InventoryEditorService"]
      }, {
        type: _data_services_inventar_service__WEBPACK_IMPORTED_MODULE_20__["InventarService"]
      }, {
        type: _data_services_raum_service__WEBPACK_IMPORTED_MODULE_23__["RaumService"]
      }, {
        type: _data_services_images_service__WEBPACK_IMPORTED_MODULE_21__["ImagesService"]
      }, {
        type: _data_services_barcode_service__WEBPACK_IMPORTED_MODULE_22__["BarcodeService"]
      }, {
        type: _shared_services_sounds_service__WEBPACK_IMPORTED_MODULE_26__["SoundsService"]
      }, {
        type: _shared_services_variables_service__WEBPACK_IMPORTED_MODULE_29__["VariablesService"]
      }, {
        type: ngx_toastr__WEBPACK_IMPORTED_MODULE_27__["ToastrService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('input2', {
      "static": true
    })], InventFormComponent.prototype, "input2", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('inputSimulateBarcode', {
      "static": true
    })], InventFormComponent.prototype, "inputSimulateBarcode", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('rawInputBarcodes', {
      "static": true
    })], InventFormComponent.prototype, "rawInputBarcodes", void 0);
    InventFormComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-invent-form',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./invent-form.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/invent-form.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./invent-form.component.scss */
      "./src/app/pages/invent-form/invent-form.component.scss"))["default"]]
    })], InventFormComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.scss":
  /*!***************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.scss ***!
    \***************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsBatchBarcodesBatchBarcodesComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "input.bg-danger::-moz-placeholder {\n  color: #ffffff;\n}\n\ninput.bg-danger::placeholder {\n  color: #ffffff;\n}\n\n.with-pulse-effect {\n  -webkit-animation: enter-animation 2s ease;\n          animation: enter-animation 2s ease;\n}\n\n@-webkit-keyframes enter-animation {\n  0% {\n    box-shadow: 0px 0px 0px 0px #2382dc;\n    color: black;\n  }\n  100% {\n    box-shadow: 0px 0px 5px 25px rgba(35, 130, 220, 0);\n    color: blue;\n  }\n}\n\n@keyframes enter-animation {\n  0% {\n    box-shadow: 0px 0px 0px 0px #2382dc;\n    color: black;\n  }\n  100% {\n    box-shadow: 0px 0px 5px 25px rgba(35, 130, 220, 0);\n    color: blue;\n  }\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2JhdGNoLWJhcmNvZGVzL0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxccGFnZXNcXGludmVudC1mb3JtXFxtb2RhbHNcXGJhdGNoLWJhcmNvZGVzXFxiYXRjaC1iYXJjb2Rlcy5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2JhdGNoLWJhcmNvZGVzL2JhdGNoLWJhcmNvZGVzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQ0UsY0FBQTtBQ0FGOztBRERBO0VBQ0UsY0FBQTtBQ0FGOztBREdBO0VBQ0UsMENBQUE7VUFBQSxrQ0FBQTtBQ0FGOztBREdBO0VBQ0U7SUFDRSxtQ0FBQTtJQUNBLFlBQUE7RUNBRjtFREVBO0lBQ0Usa0RBQUE7SUFDQSxXQUFBO0VDQUY7QUFDRjs7QURSQTtFQUNFO0lBQ0UsbUNBQUE7SUFDQSxZQUFBO0VDQUY7RURFQTtJQUNFLGtEQUFBO0lBQ0EsV0FBQTtFQ0FGO0FBQ0YiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvYmF0Y2gtYmFyY29kZXMvYmF0Y2gtYmFyY29kZXMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuaW5wdXQuYmctZGFuZ2VyOjpwbGFjZWhvbGRlciB7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbn1cclxuXHJcbi53aXRoLXB1bHNlLWVmZmVjdCB7XHJcbiAgYW5pbWF0aW9uOiBlbnRlci1hbmltYXRpb24gMnMgZWFzZTtcclxufVxyXG5cclxuQGtleWZyYW1lcyBlbnRlci1hbmltYXRpb24ge1xyXG4gIDAlIHtcclxuICAgIGJveC1zaGFkb3c6IDBweCAwcHggMHB4IDBweCByZ2JhKDM1LCAxMzAsIDIyMCwxKTtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICB9XHJcbiAgMTAwJSB7XHJcbiAgICBib3gtc2hhZG93OiAwcHggMHB4IDVweCAyNXB4IHJnYmEoMzUsIDEzMCwgMjIwLDApO1xyXG4gICAgY29sb3I6IGJsdWU7XHJcbiAgfVxyXG59XHJcbiIsImlucHV0LmJnLWRhbmdlcjo6cGxhY2Vob2xkZXIge1xuICBjb2xvcjogI2ZmZmZmZjtcbn1cblxuLndpdGgtcHVsc2UtZWZmZWN0IHtcbiAgYW5pbWF0aW9uOiBlbnRlci1hbmltYXRpb24gMnMgZWFzZTtcbn1cblxuQGtleWZyYW1lcyBlbnRlci1hbmltYXRpb24ge1xuICAwJSB7XG4gICAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggMHB4ICMyMzgyZGM7XG4gICAgY29sb3I6IGJsYWNrO1xuICB9XG4gIDEwMCUge1xuICAgIGJveC1zaGFkb3c6IDBweCAwcHggNXB4IDI1cHggcmdiYSgzNSwgMTMwLCAyMjAsIDApO1xuICAgIGNvbG9yOiBibHVlO1xuICB9XG59Il19 */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.ts":
  /*!*************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.ts ***!
    \*************************************************************************************/

  /*! exports provided: bcLookupTyp, BatchBarcodesComponent */

  /***/
  function srcAppPagesInventFormModalsBatchBarcodesBatchBarcodesComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "bcLookupTyp", function () {
      return bcLookupTyp;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "BatchBarcodesComponent", function () {
      return BatchBarcodesComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _shared_services_data_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../../../shared/services/data.service */
    "./src/app/shared/services/data.service.ts");
    /* harmony import */


    var _data_services_barcode_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../data-services/barcode.service */
    "./src/app/pages/invent-form/data-services/barcode.service.ts");
    /* harmony import */


    var _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../../../../shared/interfaces/dexie.interfaces */
    "./src/app/shared/interfaces/dexie.interfaces.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _data_services_images_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ../../data-services/images.service */
    "./src/app/pages/invent-form/data-services/images.service.ts");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! ../../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _shared_services_variables_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! ../../../../shared/services/variables.service */
    "./src/app/shared/services/variables.service.ts");
    /* harmony import */


    var _shared_inventory_progress_inventory_progress_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
    /*! ../../../../shared/inventory-progress/inventory-progress.service */
    "./src/app/shared/inventory-progress/inventory-progress.service.ts");
    /* harmony import */


    var _data_services_inventar_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
    /*! ../../data-services/inventar.service */
    "./src/app/pages/invent-form/data-services/inventar.service.ts");

    var bcLookupTyp;

    (function (bcLookupTyp) {
      bcLookupTyp[bcLookupTyp["Neu"] = 0] = "Neu";
      bcLookupTyp[bcLookupTyp["Unbekannt"] = 1] = "Unbekannt";
      bcLookupTyp[bcLookupTyp["Raum"] = 2] = "Raum";
      bcLookupTyp[bcLookupTyp["Artikel"] = 3] = "Artikel";
      bcLookupTyp[bcLookupTyp["Inventar"] = 4] = "Inventar";
    })(bcLookupTyp || (bcLookupTyp = {}));

    var BatchBarcodesComponent = /*#__PURE__*/function () {
      function BatchBarcodesComponent(activeModal, dataService, bcLookup, imageService, baseData, variables, inventoryProgress, inventarDataService) {
        _classCallCheck(this, BatchBarcodesComponent);

        this.activeModal = activeModal;
        this.dataService = dataService;
        this.bcLookup = bcLookup;
        this.imageService = imageService;
        this.baseData = baseData;
        this.variables = variables;
        this.inventoryProgress = inventoryProgress;
        this.inventarDataService = inventarDataService;
        this.faCheck = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faCheck"];
        this.faRemove = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_6__["faTrashAlt"];
        this.typeofLookupInventar = bcLookupTyp[bcLookupTyp.Inventar];
        this.typeofLookupRaum = bcLookupTyp[bcLookupTyp.Raum];
        this.typeofLookupArtikel = bcLookupTyp[bcLookupTyp.Artikel];
        this.typeofLookupNeu = bcLookupTyp[bcLookupTyp.Neu];
        this.onScan = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.onLookupResultApply = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.jobid = 0;
        this.batchBarcodes = [];
        this.uniqBatchBarcodes = [];
        this.scanResultHistory = [];
        this.scanResultAssigned = [];
        this.blobAlertTimer = null;
        this.useOverlay = 0;
        this.loadingTimer = null;
        this.loadingShow = false;
        this.loadingType = 'warning';
        this.loadingAnimated = true;
        this.loadingPercent = 0;
        this.loadingCurrent = 0;
        this.loadingTotal = 0;
        this.closeOnApplyBarcode = false;
        this.raumProgress = {
          total: 0,
          done: 0
        };
      }

      _createClass(BatchBarcodesComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {
          var _this62 = this;

          this.jobid = this.baseData.getCurrentJobid();
          this.raum = this.baseData.getCurrentRaum();
          this.refreshRaumProgress();
          this.subRaumChanged = this.inventoryProgress.raumProgressChanged.subscribe(function (progress) {
            if (_this62.raum && _this62.raum.uuid !== progress.uuid) {
              return;
            }

            _this62.raumProgress.done = progress.done;
            _this62.raumProgress.total = progress.total;
          });
        }
      }, {
        key: "ngOnDestroy",
        value: function ngOnDestroy() {
          this.subRaumChanged.unsubscribe();
        }
      }, {
        key: "showBlobAlertSuccess",
        value: function showBlobAlertSuccess() {
          this.showBlobAlert('success');
        }
      }, {
        key: "showBlobAlertError",
        value: function showBlobAlertError() {
          this.showBlobAlert('danger');
        }
      }, {
        key: "showBlobAlert",
        value: function showBlobAlert(alertType) {
          var _this63 = this;

          this.useOverlay = this.useOverlay < 2 ? this.useOverlay + 1 : 1;
          this.blobAlert = null;

          if (this.blobAlertTimer) {
            clearTimeout(this.blobAlertTimer);
          }

          this.blobAlert = alertType;
          this.blobAlertTimer = setTimeout(function () {
            _this63.blobAlert = null;
            _this63.useOverlay = 0;
          }, 1200);
        }
      }, {
        key: "setAssignedInventar",
        value: function setAssignedInventar(barcode) {
          var result = this.scanResultHistory.find(function (r) {
            return r.barcode === barcode;
          });

          if (result) {
            this.removeResult(result);
            this.scanResultAssigned.unshift(result);
          }
        }
      }, {
        key: "setLoadingIndicator",
        value: function setLoadingIndicator(current, total) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee106() {
            var _this64 = this;

            return regeneratorRuntime.wrap(function _callee106$(_context106) {
              while (1) {
                switch (_context106.prev = _context106.next) {
                  case 0:
                    this.loadingShow = true;

                    if (current === 0 || current > this.loadingCurrent) {
                      this.loadingPercent = current > 0 ? current * 100 / total : 100;
                      this.loadingCurrent = current;
                      this.loadingType = current > 0 ? 'success' : 'warning';
                      this.loadingAnimated = current !== total;

                      if (current === 0 && total > 0 && this.loadingTimer) {
                        clearTimeout(this.loadingTimer);
                        this.loadingTimer = null;
                      }

                      if (current > 0 && current === total) {
                        this.loadingTimer = setTimeout(function () {
                          _this64.loadingShow = false;
                        }, 4000);
                      }
                    }

                    this.loadingTotal = total;

                  case 3:
                  case "end":
                    return _context106.stop();
                }
              }
            }, _callee106, this);
          }));
        }
      }, {
        key: "setRaum",
        value: function setRaum(raum) {
          this.raum = raum;
        }
      }, {
        key: "setJobid",
        value: function setJobid(jobid) {
          this.jobid = jobid;
        }
      }, {
        key: "setBarcodes",
        value: function setBarcodes(barcodes) {
          var _this65 = this;

          // setBarcodes wird aus InventFormComponent aufgerufen, noch bevor ngOnInit ausgefuehrt wurde
          var uniqBarcodes = [];

          for (var i = 0; i < barcodes.length; i++) {
            var bc = barcodes[i].trim();

            if (bc !== '' && uniqBarcodes.indexOf(bc) === -1) {
              uniqBarcodes.push(bc);
            }
          }

          this.batchBarcodes = barcodes;
          this.uniqBatchBarcodes = uniqBarcodes;
          var total = uniqBarcodes.length;
          var current = 0;
          this.setLoadingIndicator(current, total);
          console.log('BatchBarcodesComponent.setBarcodes(', barcodes, ') #106');
          this.clearResult();
          Promise.all(uniqBarcodes.map(function (code) {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this65, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee107() {
              var rslt;
              return regeneratorRuntime.wrap(function _callee107$(_context107) {
                while (1) {
                  switch (_context107.prev = _context107.next) {
                    case 0:
                      _context107.next = 2;
                      return this.bcLookup.fullLookup(code, this.jobid);

                    case 2:
                      rslt = _context107.sent;
                      ++current;
                      this.setLoadingIndicator(current, total);
                      return _context107.abrupt("return", rslt);

                    case 6:
                    case "end":
                      return _context107.stop();
                  }
                }
              }, _callee107, this);
            }));
          })).then(function (lkUpResults) {
            lkUpResults.reverse().forEach(function (rslt) {
              _this65.showResult(rslt);
            });
          })["catch"](function () {
            console.error('BatchBarcodesComponent.setBarcodes #121: Fehler bei Index-Barcode-Anfrage fuer', {
              barcodes: barcodes
            });
            alert('BatchBarcodesComponent.setBarcodes #121\nFehler bei Index-Barcode-Anfrage.');
          });
        }
      }, {
        key: "clearResult",
        value: function clearResult() {
          this.scanResultHistory.length = 0;
        }
      }, {
        key: "showResult",
        value: function showResult(result) {
          var _this66 = this;

          var bezeichnung = '';
          var bcObjectType = bcLookupTyp.Unbekannt;
          var bcObjectInfos = '';

          switch (result.lookupResultTable) {
            case _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].None:
              bezeichnung = 'Neuer Barcode';
              bcObjectType = bcLookupTyp.Neu;
              bcObjectInfos = this.bcInfoToString({
                Gefunden: 'Neuer oder unbekannter Barcode'
              });
              break;

            case _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].Raeume:
              var g = result.gebaeude.Gebaeude || result.gebaeude.Adresse;

              if (g) {
                bezeichnung += "".concat(g, " :: ");
              }

              bezeichnung += result.raum.Raum;

              if (result.raum.Raumbezeichnung) {
                bezeichnung += ' / ' + result.raum.Raumbezeichnung;
              }

              if (result.raum.Etage) {
                bezeichnung += ' :: ' + result.raum.Etage;
              }

              bezeichnung = result.gebaeude.Gebaeude || result.gebaeude.Adresse;
              bcObjectType = bcLookupTyp.Raum;
              bcObjectInfos = bezeichnung;

              if (false) {}

              break;

            case _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].Inventar:
              if (result.artikelData.Typ) {
                bezeichnung = result.artikelData.Typ + ' :: ';
              }

              bezeichnung += result.artikelData.Bezeichnung;

              if (result.artikelData.Farbe) {
                bezeichnung += ' :: ' + result.artikelData.Farbe;
              }

              if (result.artikelData.Groesse) {
                bezeichnung += ' :: ' + result.artikelData.Groesse;
              }

              if (result.artikelData.Kategorie) {
                bezeichnung += ' :: ' + result.artikelData.Kategorie;
              }

              if (result.artikelData.Gruppe) {
                bezeichnung += ' :: ' + result.artikelData.Gruppe;
              }

              bcObjectType = bcLookupTyp.Inventar;
              bcObjectInfos = bezeichnung;

              if (false) {}

              break;

            case _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"].ObjektKatalogMandant:
              bezeichnung = result.artikelData.Bezeichnung;

              if (result.artikelData.Farbe) {
                bezeichnung += ' :: ' + result.artikelData.Farbe;
              }

              if (result.artikelData.Groesse) {
                bezeichnung += ' :: ' + result.artikelData.Groesse;
              }

              if (result.artikelData.Kategorie) {
                bezeichnung += ' :: ' + result.artikelData.Kategorie;
              }

              bcObjectType = bcLookupTyp.Artikel;
              bcObjectInfos = bezeichnung;

              if (false) {}

              break;

            default:
              bezeichnung = 'Unerwartetes Ergebnis';
              bcObjectType = bcLookupTyp.Unbekannt;
              bcObjectInfos = bezeichnung;
              this.bcInfoToString({
                Gefunden: 'Unerwartetes Ergebnis',
                Objekt: _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_5__["LookupResultTable"][result.lookupResultTable]
              });
          }

          var lastResult = {
            typ: bcObjectType,
            typToString: bcLookupTyp[bcObjectType],
            barcode: result.barcode,
            infos: bcObjectInfos,
            image: result.image,
            result: result
          };
          this.addHistoryResult(lastResult);

          if (result.image && result.image.mcuuid) {
            this.loadImageByMcuuid(result.image.mcuuid).then(function (img) {
              var lastResultFound = _this66.scanResultHistory.find(function (r) {
                return r === lastResult;
              });

              if (lastResultFound) {
                lastResultFound.image.data_url = img.data_url;
              }
            });
          }
        }
      }, {
        key: "addHistoryResult",
        value: function addHistoryResult(result) {
          if (result) {
            this.scanResultHistory.unshift(result);

            while (this.scanResultHistory.length > 10) {
              this.scanResultHistory.pop();
            }
          }

          return this.scanResultHistory.length;
        }
      }, {
        key: "removeResult",
        value: function removeResult(result) {
          this.scanResultHistory = this.scanResultHistory.filter(function (r) {
            return r !== result;
          });
          console.log('remove Result', {
            result: result
          }); // alert(JSON.stringify(result));
        }
      }, {
        key: "applyResult",
        value: function applyResult(result) {
          console.log('BatchBarcodesComponent.applyHistoryResult(result: ', result, ') #335');
          var emitScanResult = {
            barcode: result.result.barcode,
            length: result.result.barcode.length,
            valid: true,
            result: result
          };
          console.log('BatchBarcodesComponent.applyHistoryResult(result: \', result, \') #335apply applyHistoryResult', {
            emitScanResult: emitScanResult
          });
          result.ModalRaumUuid = this.raum.uuid;
          result.ModalJobid = this.jobid;
          this.onLookupResultApply.emit(result); // this.onScan.emit( emitScanResult );
        }
      }, {
        key: "clearHistory",
        value: function clearHistory() {
          this.scanResultHistory = [];
        }
      }, {
        key: "bcInfoToString",
        value: function bcInfoToString(json) {
          return JSON.stringify(json).substr(1).split('').slice(0, -1).join('');
          var tbl = '<table>';

          for (var _i9 = 0, _Object$keys6 = Object.keys(json); _i9 < _Object$keys6.length; _i9++) {
            var k = _Object$keys6[_i9];
            tbl += '<tr><th>' + k + '</th><td>' + json[k] + '</td>';
          }

          tbl += '</table>';
          return tbl;
        }
      }, {
        key: "loadImageByMcuuid",
        value: function loadImageByMcuuid(mcuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee108() {
            return regeneratorRuntime.wrap(function _callee108$(_context108) {
              while (1) {
                switch (_context108.prev = _context108.next) {
                  case 0:
                    console.log('called loadImageByGcuuid', mcuuid);

                    if (!mcuuid) {
                      _context108.next = 5;
                      break;
                    }

                    return _context108.abrupt("return", this.imageService.getImageByMcuuid(mcuuid).then(function (image) {
                      return image;
                    })["catch"](function (err) {
                      console.error(err);
                      return null;
                    }));

                  case 5:
                    return _context108.abrupt("return", null);

                  case 6:
                  case "end":
                    return _context108.stop();
                }
              }
            }, _callee108, this);
          }));
        }
      }, {
        key: "refreshRaumProgress",
        value: function refreshRaumProgress() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee109() {
            var _this67 = this;

            return regeneratorRuntime.wrap(function _callee109$(_context109) {
              while (1) {
                switch (_context109.prev = _context109.next) {
                  case 0:
                    this.inventoryProgress.getCurrentRaumProgress(this.raum.uuid).then(function (progress) {
                      _this67.raumProgress.done = progress.done;
                      _this67.raumProgress.total = progress.total;
                    })["catch"](function (err) {
                      console.error('InventFormComponente #449 Fehler bei Raum-Progress-Aktualisierung', err);
                    });

                  case 1:
                  case "end":
                    return _context109.stop();
                }
              }
            }, _callee109, this);
          }));
        }
      }, {
        key: "showRaumDone",
        value: function showRaumDone() {}
      }, {
        key: "showRaumRest",
        value: function showRaumRest() {}
      }]);

      return BatchBarcodesComponent;
    }();

    BatchBarcodesComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_3__["DataService"]
      }, {
        type: _data_services_barcode_service__WEBPACK_IMPORTED_MODULE_4__["BarcodeService"]
      }, {
        type: _data_services_images_service__WEBPACK_IMPORTED_MODULE_7__["ImagesService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_8__["BasedataService"]
      }, {
        type: _shared_services_variables_service__WEBPACK_IMPORTED_MODULE_9__["VariablesService"]
      }, {
        type: _shared_inventory_progress_inventory_progress_service__WEBPACK_IMPORTED_MODULE_10__["InventoryProgressService"]
      }, {
        type: _data_services_inventar_service__WEBPACK_IMPORTED_MODULE_11__["InventarService"]
      }];
    };

    BatchBarcodesComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-batch-barcodes',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./batch-barcodes.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./batch-barcodes.component.scss */
      "./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.scss"))["default"]]
    })], BatchBarcodesComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.scss":
  /*!***************************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.scss ***!
    \***************************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsCreateArtikelImageCreateArtikelImageComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".modal-header.modal-header-with-links {\n  display: flex;\n  flex-direction: row-reverse;\n}\n\n.editor {\n  height: 60%;\n  position: relative;\n}\n\n.canvas {\n  height: 100%;\n}\n\n.canvas {\n  align-items: center;\n  display: flex;\n  justify-content: center;\n}\n\n.toolbar-cropend,\n.toolbar {\n  bottom: 1rem;\n  color: #fff;\n  height: 2rem;\n  left: 50%;\n  margin-left: -8rem;\n  position: absolute;\n  width: 16rem;\n  z-index: 2015;\n}\n\n.toolbar {\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.toolbar button {\n  background: transparent;\n  color: #fff;\n  border: 0;\n}\n\n.toolbar-cropend {\n  top: 1rem;\n  width: 5rem;\n  margin-left: -2.5rem;\n  z-index: 2016;\n  background-color: transparent;\n}\n\n.btn-icon-cirular {\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n}\n\n.btn-icon-cirular + .btn-icon-cirular {\n  margin-left: 1rem;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2NyZWF0ZS1hcnRpa2VsLWltYWdlL0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxccGFnZXNcXGludmVudC1mb3JtXFxtb2RhbHNcXGNyZWF0ZS1hcnRpa2VsLWltYWdlXFxjcmVhdGUtYXJ0aWtlbC1pbWFnZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2NyZWF0ZS1hcnRpa2VsLWltYWdlL2NyZWF0ZS1hcnRpa2VsLWltYWdlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLDJCQUFBO0FDQ0Y7O0FERUE7RUFDRSxXQUFBO0VBQ0Esa0JBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7QUNDRjs7QURFQTtFQUdFLG1CQUFBO0VBR0EsYUFBQTtFQUdBLHVCQUFBO0FDQ0Y7O0FERUE7O0VBRUUsWUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsU0FBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtBQ0NGOztBRENBO0VBQ0Usb0NBQUE7QUNFRjs7QURBQTtFQUNFLHVCQUFBO0VBQ0EsV0FBQTtFQUNBLFNBQUE7QUNHRjs7QURBQTtFQUNFLFNBQUE7RUFDQSxXQUFBO0VBQ0Esb0JBQUE7RUFDQSxhQUFBO0VBQ0EsNkJBQUE7QUNHRjs7QURBQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7QUNHRjs7QUREQTtFQUNFLGlCQUFBO0FDSUYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvY3JlYXRlLWFydGlrZWwtaW1hZ2UvY3JlYXRlLWFydGlrZWwtaW1hZ2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcclxufVxyXG5cclxuLmVkaXRvciB7XHJcbiAgaGVpZ2h0OiA2MCU7XHJcbiAgcG9zaXRpb246cmVsYXRpdmU7XHJcbn1cclxuXHJcbi5jYW52YXMge1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLmNhbnZhcyB7XHJcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcclxuICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XHJcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XHJcbiAgLW1zLWZsZXgtcGFjazogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4udG9vbGJhci1jcm9wZW5kLFxyXG4udG9vbGJhciB7XHJcbiAgYm90dG9tOiAxcmVtO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGhlaWdodDogMnJlbTtcclxuICBsZWZ0OiA1MCU7XHJcbiAgbWFyZ2luLWxlZnQ6IC04cmVtO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogMTZyZW07XHJcbiAgei1pbmRleDogMjAxNTtcclxufVxyXG4udG9vbGJhciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuNCk7XHJcbn1cclxuLnRvb2xiYXIgYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICBjb2xvcjojZmZmO1xyXG4gIGJvcmRlcjowO1xyXG59XHJcblxyXG4udG9vbGJhci1jcm9wZW5kIHtcclxuICB0b3A6IDFyZW07XHJcbiAgd2lkdGg6IDVyZW07XHJcbiAgbWFyZ2luLWxlZnQ6IC0yLjVyZW07XHJcbiAgei1pbmRleDogMjAxNjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxufVxyXG5cclxuLmJ0bi1pY29uLWNpcnVsYXIge1xyXG4gIHdpZHRoOjJyZW07XHJcbiAgaGVpZ2h0OjJyZW07XHJcbiAgYm9yZGVyLXJhZGl1czoxcmVtO1xyXG59XHJcbi5idG4taWNvbi1jaXJ1bGFyICsgLmJ0bi1pY29uLWNpcnVsYXIge1xyXG4gIG1hcmdpbi1sZWZ0OiAxcmVtO1xyXG59XHJcbiIsIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG59XG5cbi5lZGl0b3Ige1xuICBoZWlnaHQ6IDYwJTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uY2FudmFzIHtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uY2FudmFzIHtcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcbiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xuICBkaXNwbGF5OiBmbGV4O1xuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XG4gIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi50b29sYmFyLWNyb3BlbmQsXG4udG9vbGJhciB7XG4gIGJvdHRvbTogMXJlbTtcbiAgY29sb3I6ICNmZmY7XG4gIGhlaWdodDogMnJlbTtcbiAgbGVmdDogNTAlO1xuICBtYXJnaW4tbGVmdDogLThyZW07XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDE2cmVtO1xuICB6LWluZGV4OiAyMDE1O1xufVxuXG4udG9vbGJhciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTtcbn1cblxuLnRvb2xiYXIgYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjZmZmO1xuICBib3JkZXI6IDA7XG59XG5cbi50b29sYmFyLWNyb3BlbmQge1xuICB0b3A6IDFyZW07XG4gIHdpZHRoOiA1cmVtO1xuICBtYXJnaW4tbGVmdDogLTIuNXJlbTtcbiAgei1pbmRleDogMjAxNjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbi5idG4taWNvbi1jaXJ1bGFyIHtcbiAgd2lkdGg6IDJyZW07XG4gIGhlaWdodDogMnJlbTtcbiAgYm9yZGVyLXJhZGl1czogMXJlbTtcbn1cblxuLmJ0bi1pY29uLWNpcnVsYXIgKyAuYnRuLWljb24tY2lydWxhciB7XG4gIG1hcmdpbi1sZWZ0OiAxcmVtO1xufSJdfQ== */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.ts":
  /*!*************************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.ts ***!
    \*************************************************************************************************/

  /*! exports provided: CreateArtikelImageComponent */

  /***/
  function srcAppPagesInventFormModalsCreateArtikelImageCreateArtikelImageComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "CreateArtikelImageComponent", function () {
      return CreateArtikelImageComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _data_services_images_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../data-services/images.service */
    "./src/app/pages/invent-form/data-services/images.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");

    var infoLogWorkaround = function infoLogWorkaround() {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      args.unshift('[INFO]');
      console.log.apply(console, args);
    };

    var infoLog = function infoLog() {
      var cons = console;
      var consInfo = cons.info || infoLogWorkaround;

      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      consInfo(args);
    };

    var CreateArtikelImageComponent = /*#__PURE__*/function () {
      function CreateArtikelImageComponent(activeModal, imageService) {
        _classCallCheck(this, CreateArtikelImageComponent);

        this.activeModal = activeModal;
        this.imageService = imageService; // Editor-Button-Icons

        this.faCamera = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faCamera"];
        this.faCrop = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faCropAlt"];
        this.faMove = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faArrowsAlt"];
        this.faSearchPlus = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSearchPlus"];
        this.faSearchMinus = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSearchMinus"];
        this.faRotateLeft = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faUndo"];
        this.faRotateRight = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faRedo"];
        this.faCheck = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faCheck"];
        this.faBan = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faBan"];
        this.faSave = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSave"];
        this.faUpload = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faUpload"];
        this.faTrash = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faTrashAlt"];
        this.faTrashRestore = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faTrashRestore"];
        this.faTrashRestoreAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faTrashRestoreAlt"];
        this.allowDelete = false;
        this.inputFile = null;
        this.inputImgData = null;
        this.inputImgType = '';
        this.inputImgSize = 0;
        this.inputImgWidth = 0;
        this.inputImgHeight = 0;
        this.inputImgSavedData = null;
        this.previewImgUrl = null;
        this.config = {
          // aspectRatio : 16 / 9,
          autoCrop: false,
          dragMode: 'crop',
          background: true,
          movable: true,
          rotatable: true,
          scalable: true,
          zoomable: true,
          restore: true,
          viewMode: 0,
          checkImageOrigin: true,
          // crop: this.onCrop.bind(this),
          cropmove: this.cropMove.bind(this),
          cropstart: this.cropStart.bind(this),
          cropend: this.cropEnd.bind(this),
          zoom: this.zoomed.bind(this),
          ready: this.onCropperReady.bind(this),
          checkCrossOrigin: true,
          wheelZoomRatio: 0.1,
          toggleDragModeOnDblclick: true
        };
        this.cropStatus = 0;
        this.cropApplied = false;
        this.dragMode = 'move';
        this.canMove = false;
      }

      _createClass(CreateArtikelImageComponent, [{
        key: "setMetaData",
        value: function setMetaData(metaData) {
          this.imgMetaData = metaData;
        }
      }, {
        key: "openInputUploadFile",
        value: function openInputUploadFile() {
          this.inputUploadFile.nativeElement.dispatchEvent(new MouseEvent('click'));
        }
      }, {
        key: "openInputUploadImage",
        value: function openInputUploadImage() {
          this.inputUploadImage.nativeElement.dispatchEvent(new MouseEvent('click'));
        }
      }, {
        key: "cropMove",
        value: function cropMove(data) {
          this.cropStatus = 3;
          this.previewImgUrl = this.angularCropper.cropper.getCroppedCanvas().toDataURL();
        }
      }, {
        key: "cropStart",
        value: function cropStart(e) {
          this.cropStatus = 2;
        }
      }, {
        key: "cropEnd",
        value: function cropEnd(e) {
          if (['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'].indexOf(e.detail.action) !== -1) {
            this.cropStatus = 5;
          } else if (e.detail.action === 'move') {
            var canvasData = this.angularCropper.cropper.getCanvasData();
            var containerData = this.angularCropper.cropper.getContainerData();
            console.log('cropEnd move', {
              e: e,
              canvasData: canvasData,
              containerData: containerData
            });
            var toLeft = canvasData.left > 0 ? 0 : canvasData.left;
            var toTop = canvasData.top > 0 ? 0 : canvasData.top;

            if (canvasData.left > 0 || canvasData.top > 0) {
              this.angularCropper.cropper.moveTo(toLeft, toTop);
            } else {
              var posIsOk = true;

              if (canvasData.top + canvasData.height < containerData.height) {
                toTop = containerData.height - canvasData.height;
                posIsOk = false;
              }

              if (canvasData.left + canvasData.width < containerData.width) {
                toLeft = containerData.width - canvasData.width;
                posIsOk = false;
              }

              if (!posIsOk) {
                this.angularCropper.cropper.moveTo(toLeft, toTop);
              }
            }
          }
        }
      }, {
        key: "onCrop",
        value: function onCrop(e) {// console.log('onCrop Details: ', e.details);
        }
      }, {
        key: "zoomed",
        value: function zoomed(e) {
          console.log('zoomListener Event: ', e, 'this.angularCropper: ', this.angularCropper);
          var canvasData = this.angularCropper.cropper.getCanvasData();
          var containerData = this.angularCropper.cropper.getContainerData();
          var ratio = e.detail.ratio;
          var oldRatio = e.detail.oldRatio;
          var minRatioW = containerData.width / canvasData.naturalWidth;
          var minRatioH = containerData.height / canvasData.naturalHeight;

          if (ratio < oldRatio && (ratio < minRatioW || ratio < minRatioH)) {
            // Zoom-Out
            e.preventDefault(); // Prevent zoom out

            return false;
          }

          this.canMove = Math.abs(minRatioW - ratio) > 0.01;
        }
      }, {
        key: "ngOnInit",
        value: function ngOnInit() {
          console.log('#39 CreateArtikelImageComponent ngOniInit');
          this.dragMode = this.config.dragMode;
        }
      }, {
        key: "onInputImageFile",
        value: function onInputImageFile(event, elm) {
          console.log('onInputImageFile', {
            event: event
          });

          if (elm.files.length) {
            this.inputFile = elm.files[0];
          } else {
            this.inputFile = null;
          }

          this.prepareInputImageFile();
        }
      }, {
        key: "converterDataURItoBlob",
        value: function converterDataURItoBlob(dataURI) {
          var byteString;
          var mimeString;
          var ia;

          if (dataURI.split(',')[0].indexOf('base64') >= 0) {
            byteString = atob(dataURI.split(',')[1]);
          } else {
            byteString = encodeURI(dataURI.split(',')[1]);
          } // separate out the mime component


          mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]; // write the bytes of the string to a typed array

          ia = new Uint8Array(byteString.length);

          for (var i = 0; i < byteString.length; i++) {
            ia[i] = byteString.charCodeAt(i);
          }

          return new Blob([ia], {
            type: mimeString
          });
        }
      }, {
        key: "prepareInputImageFile",
        value: function prepareInputImageFile() {
          var _this68 = this;

          if (!this.inputFile) {
            return;
          }

          this.inputImgSize = this.inputFile.size;
          this.inputImgType = this.inputFile.type;
          console.log('Filesize of ' + this.inputFile.name + ' (' + this.inputFile.type + ') is ' + this.inputFile.size);
          var rd = new FileReader();

          rd.onload = function (ev) {
            console.log(ev);
            _this68.inputImgData = rd.result;
            var img = new Image();

            img.onerror = function (err) {
              console.error('Cannot load file as image', {
                err: err
              });
            };

            img.onload = function (imgLoadEv) {
              console.log('im onlad', {
                imgLoadEv: imgLoadEv
              });
              _this68.inputImgWidth = img.width;
              _this68.inputImgHeight = img.height;
              console.log("Img W: ".concat(_this68.inputImgWidth, ", H: ").concat(_this68.inputImgHeight));
              var KB = 1024;
              console.log('this.prepareImgCanvas', _this68.prepareImgCanvas);

              if (_this68.inputImgHeight > 1000 || _this68.inputImgWidth > 1000) {
                var canv = _this68.prepareImgCanvas.nativeElement;
                var ctx = canv.getContext('2d');
                var iRel = _this68.inputImgWidth / _this68.inputImgHeight;
                canv.width = iRel > 1 ? 1000 : 1000 * iRel;
                canv.height = iRel > 1 ? 1000 / iRel : 1000;
                ctx.drawImage(img, 0, 0, _this68.inputImgWidth, _this68.inputImgHeight, 0, 0, canv.width, canv.height);
                _this68.imageUrl = canv.toDataURL('image/jpeg', 0.6);
              } else if (_this68.inputImgSize > 100 * KB) {
                // 1264270 => 1.235 KB
                var _canv = _this68.prepareImgCanvas.nativeElement;

                var _ctx = _canv.getContext('2d');

                var _iRel = _this68.inputImgWidth / _this68.inputImgHeight;

                _canv.width = _this68.inputImgWidth;
                _canv.height = _this68.inputImgHeight;

                _ctx.drawImage(img, 0, 0);

                _this68.imageUrl = _canv.toDataURL('image/jpeg', 0.7);
              } else {
                _this68.imageUrl = _this68.inputImgData;
              }
            };

            console.log('Assign DataUrl to img. ', _this68.inputImgData);
            img.src = _this68.inputImgData;
          };

          rd.onprogress = function (ev) {
            console.log('read ' + ev.loaded + ' of ' + ev.total);
          };

          rd.readAsDataURL(this.inputFile);
        }
      }, {
        key: "onCropperReady",
        value: function onCropperReady(data) {
          var _this69 = this;

          console.log('called onCropperReady on this: ', this, 'this.angularCropper:', this.angularCropper, ' data: ', data);

          if (!this.angularCropper.isLoading && typeof this.angularCropper.cropper !== 'undefined') {
            this.angularCropper.cropper.setDragMode(this.config.dragMode);
            this.dragMode = this.config.dragMode;
            return;
          }

          this.angularCropper.ready.subscribe(function (data2) {
            console.log('ready subscribe', {
              data2: data2
            });

            _this69.angularCropper.cropper.setDragMode(_this69.config.dragMode);

            _this69.dragMode = _this69.config.dragMode;
          });
        }
      }, {
        key: "crop",
        value: function crop() {
          console.log('crop this.angularCropper:', this.angularCropper);
          this.imageUrl = this.angularCropper.cropper.getCroppedCanvas().toDataURL('image/jpeg');
          this.cropApplied = true;
          this.angularCropper.cropper.clear();
          this.cropStatus = 0;
        }
      }, {
        key: "cropReset",
        value: function cropReset() {
          console.log('reset this.angularCropper:', this.angularCropper);
          this.angularCropper.cropper.clear();
          this.angularCropper.cropper.reset();
          this.cropStatus = 0;
        }
      }, {
        key: "setDragModeToMove",
        value: function setDragModeToMove() {
          this.angularCropper.cropper.setDragMode('move');
          this.dragMode = 'move';

          if (this.cropStatus === 1) {
            this.cropStatus = 0;
          }
        }
      }, {
        key: "setDragModeToCrop",
        value: function setDragModeToCrop() {
          this.angularCropper.cropper.setDragMode('crop');
          this.angularCropper.cropper.crop();
          this.dragMode = 'crop';
          this.cropStatus = 5;
        }
      }, {
        key: "hideCropBox",
        value: function hideCropBox() {
          this.angularCropper.cropper.clear();
        }
      }, {
        key: "rotateLeft",
        value: function rotateLeft() {
          // console.log('rotate left 90 this.angularCropper:', this.angularCropper);
          this.angularCropper.cropper.rotate(-90);
        }
      }, {
        key: "rotateRight",
        value: function rotateRight() {
          // console.log('rotate right 90 this.angularCropper:', this.angularCropper);
          this.angularCropper.cropper.rotate(90);
        }
      }, {
        key: "rotate180",
        value: function rotate180() {
          // console.log('rotate 180 this.angularCropper:', this.angularCropper);
          this.angularCropper.cropper.rotate(180);
        }
      }, {
        key: "zoomIn",
        value: function zoomIn() {
          // console.log('zoom( 0.1) this.angularCropper:', this.angularCropper);
          this.angularCropper.cropper.zoom(.1);
        }
      }, {
        key: "zoomOut",
        value: function zoomOut(useRatio) {
          var ratio = typeof useRatio === 'undefined' || useRatio >= 0 ? -0.1 : useRatio;
          console.log('zoom( -0.1) this.angularCropper:', this.angularCropper);
          var canvasData = this.angularCropper.cropper.getCanvasData();
          var cropBoxData = this.angularCropper.cropper.getCropBoxData();
          var containerData = this.angularCropper.cropper.getContainerData();
          var cad = canvasData;
          var crd = cropBoxData;
          var cod = containerData;
          var caw = cad.width;
          var cah = cad.height;
          var crw = crd.width;
          var crh = crd.height;
          var cow = cod.width;
          var coh = cod.height;
          console.log({
            ratio: ratio,
            caw: caw,
            cah: cah,
            cow: cow,
            coh: coh,
            crw: crw,
            crh: crh,
            canvasData: canvasData,
            cropBoxData: cropBoxData,
            containerData: containerData
          });

          if (caw < cow || cah < coh) {
            console.error('Permission denied to zoom out smaller than canvas');
            return;
          }

          console.log('Permission allowed to zoom out >= canvas');
          this.angularCropper.cropper.zoom(ratio);
        }
      }, {
        key: "escape",
        value: function escape() {
          this.imageUrl = null;
          this.inputImgSavedData = null;
          this.inputImgData = null;
        }
      }, {
        key: "close",
        value: function close() {
          this.escape();
          this.activeModal.close();
        }
      }, {
        key: "save",
        value: function save() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee110() {
            var _this70 = this;

            var cropData;
            return regeneratorRuntime.wrap(function _callee110$(_context110) {
              while (1) {
                switch (_context110.prev = _context110.next) {
                  case 0:
                    console.log('save this.angularCropper:', this.angularCropper);
                    this.angularCropper.cropper.disable();
                    cropData = this.angularCropper.cropper.getImageData();
                    this.inputImgSavedData = this.angularCropper.cropper.getCroppedCanvas().toDataURL('image/jpeg', 0.8);
                    return _context110.abrupt("return", this.imageService.putArtikelImage({
                      name: this.imgMetaData.name,
                      desc: this.imgMetaData.desc,
                      for_jobid: this.imgMetaData.for_jobid,
                      mcuuid: this.imgMetaData.mcuuid,
                      gcuuid: this.imgMetaData.gcuuid,
                      type: 'image/jpeg',
                      size: this.inputImgSavedData.toString().length,
                      width: cropData.width,
                      height: cropData.height,
                      data_url: this.inputImgSavedData
                    }).then(function () {
                      _this70.activeModal.close();

                      return true;
                    })["catch"](function (err) {
                      console.error('Cannot save Image', {
                        err: err
                      });

                      _this70.angularCropper.cropper.enable();

                      return false;
                    }));

                  case 5:
                  case "end":
                    return _context110.stop();
                }
              }
            }, _callee110, this);
          }));
        }
      }, {
        key: "cropSave",
        value: function cropSave() {
          this.crop();
          this.save();
        }
      }]);

      return CreateArtikelImageComponent;
    }();

    CreateArtikelImageComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _data_services_images_service__WEBPACK_IMPORTED_MODULE_3__["ImagesService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('angularCropper', {
      "static": false
    })], CreateArtikelImageComponent.prototype, "angularCropper", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('prepareImgCanvas', {
      "static": true
    })], CreateArtikelImageComponent.prototype, "prepareImgCanvas", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('inputUploadFile', {
      "static": true
    })], CreateArtikelImageComponent.prototype, "inputUploadFile", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('inputUploadImage', {
      "static": true
    })], CreateArtikelImageComponent.prototype, "inputUploadImage", void 0);
    CreateArtikelImageComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-create-artikel-image',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./create-artikel-image.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./create-artikel-image.component.scss */
      "./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.scss"))["default"]]
    })], CreateArtikelImageComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.scss":
  /*!*********************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.scss ***!
    \*********************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsCreateRaumImageCreateRaumImageComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".modal-header.modal-header-with-links {\n  display: flex;\n  flex-direction: row-reverse;\n}\n\n.editor {\n  height: 60%;\n  position: relative;\n}\n\n.canvas {\n  height: 100%;\n}\n\n.canvas {\n  align-items: center;\n  display: flex;\n  justify-content: center;\n}\n\n.toolbar-cropend,\n.toolbar {\n  bottom: 1rem;\n  color: #fff;\n  height: 2rem;\n  left: 50%;\n  margin-left: -8rem;\n  position: absolute;\n  width: 16rem;\n  z-index: 2015;\n}\n\n.toolbar {\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.toolbar button {\n  background: transparent;\n  color: #fff;\n  border: 0;\n}\n\n.toolbar-cropend {\n  top: 1rem;\n  width: 5rem;\n  margin-left: -2.5rem;\n  z-index: 2016;\n  background-color: transparent;\n}\n\n.btn-icon-cirular {\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n}\n\n.btn-icon-cirular + .btn-icon-cirular {\n  margin-left: 1rem;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2NyZWF0ZS1yYXVtLWltYWdlL0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxccGFnZXNcXGludmVudC1mb3JtXFxtb2RhbHNcXGNyZWF0ZS1yYXVtLWltYWdlXFxjcmVhdGUtcmF1bS1pbWFnZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2NyZWF0ZS1yYXVtLWltYWdlL2NyZWF0ZS1yYXVtLWltYWdlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLDJCQUFBO0FDQ0Y7O0FERUE7RUFDRSxXQUFBO0VBQ0Esa0JBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7QUNDRjs7QURFQTtFQUdFLG1CQUFBO0VBR0EsYUFBQTtFQUdBLHVCQUFBO0FDQ0Y7O0FERUE7O0VBRUUsWUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsU0FBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtBQ0NGOztBRENBO0VBQ0Usb0NBQUE7QUNFRjs7QURBQTtFQUNFLHVCQUFBO0VBQ0EsV0FBQTtFQUNBLFNBQUE7QUNHRjs7QURBQTtFQUNFLFNBQUE7RUFDQSxXQUFBO0VBQ0Esb0JBQUE7RUFDQSxhQUFBO0VBQ0EsNkJBQUE7QUNHRjs7QURBQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7QUNHRjs7QUREQTtFQUNFLGlCQUFBO0FDSUYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvY3JlYXRlLXJhdW0taW1hZ2UvY3JlYXRlLXJhdW0taW1hZ2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcclxufVxyXG5cclxuLmVkaXRvciB7XHJcbiAgaGVpZ2h0OiA2MCU7XHJcbiAgcG9zaXRpb246cmVsYXRpdmU7XHJcbn1cclxuXHJcbi5jYW52YXMge1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLmNhbnZhcyB7XHJcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcclxuICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XHJcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XHJcbiAgLW1zLWZsZXgtcGFjazogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4udG9vbGJhci1jcm9wZW5kLFxyXG4udG9vbGJhciB7XHJcbiAgYm90dG9tOiAxcmVtO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGhlaWdodDogMnJlbTtcclxuICBsZWZ0OiA1MCU7XHJcbiAgbWFyZ2luLWxlZnQ6IC04cmVtO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogMTZyZW07XHJcbiAgei1pbmRleDogMjAxNTtcclxufVxyXG4udG9vbGJhciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuNCk7XHJcbn1cclxuLnRvb2xiYXIgYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICBjb2xvcjojZmZmO1xyXG4gIGJvcmRlcjowO1xyXG59XHJcblxyXG4udG9vbGJhci1jcm9wZW5kIHtcclxuICB0b3A6IDFyZW07XHJcbiAgd2lkdGg6IDVyZW07XHJcbiAgbWFyZ2luLWxlZnQ6IC0yLjVyZW07XHJcbiAgei1pbmRleDogMjAxNjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxufVxyXG5cclxuLmJ0bi1pY29uLWNpcnVsYXIge1xyXG4gIHdpZHRoOjJyZW07XHJcbiAgaGVpZ2h0OjJyZW07XHJcbiAgYm9yZGVyLXJhZGl1czoxcmVtO1xyXG59XHJcbi5idG4taWNvbi1jaXJ1bGFyICsgLmJ0bi1pY29uLWNpcnVsYXIge1xyXG4gIG1hcmdpbi1sZWZ0OiAxcmVtO1xyXG59XHJcbiIsIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG59XG5cbi5lZGl0b3Ige1xuICBoZWlnaHQ6IDYwJTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uY2FudmFzIHtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uY2FudmFzIHtcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcbiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xuICBkaXNwbGF5OiBmbGV4O1xuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XG4gIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi50b29sYmFyLWNyb3BlbmQsXG4udG9vbGJhciB7XG4gIGJvdHRvbTogMXJlbTtcbiAgY29sb3I6ICNmZmY7XG4gIGhlaWdodDogMnJlbTtcbiAgbGVmdDogNTAlO1xuICBtYXJnaW4tbGVmdDogLThyZW07XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDE2cmVtO1xuICB6LWluZGV4OiAyMDE1O1xufVxuXG4udG9vbGJhciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTtcbn1cblxuLnRvb2xiYXIgYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjZmZmO1xuICBib3JkZXI6IDA7XG59XG5cbi50b29sYmFyLWNyb3BlbmQge1xuICB0b3A6IDFyZW07XG4gIHdpZHRoOiA1cmVtO1xuICBtYXJnaW4tbGVmdDogLTIuNXJlbTtcbiAgei1pbmRleDogMjAxNjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbi5idG4taWNvbi1jaXJ1bGFyIHtcbiAgd2lkdGg6IDJyZW07XG4gIGhlaWdodDogMnJlbTtcbiAgYm9yZGVyLXJhZGl1czogMXJlbTtcbn1cblxuLmJ0bi1pY29uLWNpcnVsYXIgKyAuYnRuLWljb24tY2lydWxhciB7XG4gIG1hcmdpbi1sZWZ0OiAxcmVtO1xufSJdfQ== */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.ts":
  /*!*******************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.ts ***!
    \*******************************************************************************************/

  /*! exports provided: CreateRaumImageComponent */

  /***/
  function srcAppPagesInventFormModalsCreateRaumImageCreateRaumImageComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "CreateRaumImageComponent", function () {
      return CreateRaumImageComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _data_services_images_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../data-services/images.service */
    "./src/app/pages/invent-form/data-services/images.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");

    var infoLogWorkaround = function infoLogWorkaround() {
      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        args[_key3] = arguments[_key3];
      }

      args.unshift('[INFO]');
      console.log.apply(console, args);
    };

    var infoLog = function infoLog() {
      var cons = console;
      var consInfo = cons.info || infoLogWorkaround;

      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
        args[_key4] = arguments[_key4];
      }

      consInfo(args);
    };

    var CreateRaumImageComponent = /*#__PURE__*/function () {
      function CreateRaumImageComponent(activeModal, imageService) {
        _classCallCheck(this, CreateRaumImageComponent);

        this.activeModal = activeModal;
        this.imageService = imageService; // Editor-Button-Icons

        this.faCamera = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faCamera"];
        this.faCrop = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faCropAlt"];
        this.faMove = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faArrowsAlt"];
        this.faSearchPlus = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSearchPlus"];
        this.faSearchMinus = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSearchMinus"];
        this.faRotateLeft = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faUndo"];
        this.faRotateRight = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faRedo"];
        this.faCheck = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faCheck"];
        this.faBan = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faBan"];
        this.faSave = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSave"];
        this.faUpload = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faUpload"];
        this.faTrash = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faTrashAlt"];
        this.faTrashRestore = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faTrashRestore"];
        this.faTrashRestoreAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faTrashRestoreAlt"];
        this.allowDelete = false;
        this.inputFile = null;
        this.inputImgData = null;
        this.inputImgType = '';
        this.inputImgSize = 0;
        this.inputImgWidth = 0;
        this.inputImgHeight = 0;
        this.inputImgSavedData = null;
        this.previewImgUrl = null;
        this.config = {
          // aspectRatio : 16 / 9,
          autoCrop: false,
          dragMode: 'crop',
          background: true,
          movable: true,
          rotatable: true,
          scalable: true,
          zoomable: true,
          restore: true,
          viewMode: 0,
          checkImageOrigin: true,
          // crop: this.onCrop.bind(this),
          cropmove: this.cropMove.bind(this),
          cropstart: this.cropStart.bind(this),
          cropend: this.cropEnd.bind(this),
          zoom: this.zoomed.bind(this),
          ready: this.onCropperReady.bind(this),
          checkCrossOrigin: true,
          wheelZoomRatio: 0.1,
          toggleDragModeOnDblclick: true
        };
        this.cropStatus = 0;
        this.cropApplied = false;
        this.dragMode = 'move';
        this.canMove = false;
      }

      _createClass(CreateRaumImageComponent, [{
        key: "setMetaData",
        value: function setMetaData(metaData) {
          this.imgMetaData = metaData;
        }
      }, {
        key: "openInputUploadFile",
        value: function openInputUploadFile() {
          this.inputUploadFile.nativeElement.dispatchEvent(new MouseEvent('click'));
        }
      }, {
        key: "openInputUploadImage",
        value: function openInputUploadImage() {
          this.inputUploadImage.nativeElement.dispatchEvent(new MouseEvent('click'));
        }
      }, {
        key: "cropMove",
        value: function cropMove(data) {
          this.cropStatus = 3;
          this.previewImgUrl = this.angularCropper.cropper.getCroppedCanvas().toDataURL();
        }
      }, {
        key: "cropStart",
        value: function cropStart(e) {
          this.cropStatus = 2;
        }
      }, {
        key: "cropEnd",
        value: function cropEnd(e) {
          if (['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'].indexOf(e.detail.action) !== -1) {
            this.cropStatus = 5;
          } else if (e.detail.action === 'move') {
            var canvasData = this.angularCropper.cropper.getCanvasData();
            var containerData = this.angularCropper.cropper.getContainerData();
            console.log('cropEnd move', {
              e: e,
              canvasData: canvasData,
              containerData: containerData
            });
            var toLeft = canvasData.left > 0 ? 0 : canvasData.left;
            var toTop = canvasData.top > 0 ? 0 : canvasData.top;

            if (canvasData.left > 0 || canvasData.top > 0) {
              this.angularCropper.cropper.moveTo(toLeft, toTop);
            } else {
              var posIsOk = true;

              if (canvasData.top + canvasData.height < containerData.height) {
                toTop = containerData.height - canvasData.height;
                posIsOk = false;
              }

              if (canvasData.left + canvasData.width < containerData.width) {
                toLeft = containerData.width - canvasData.width;
                posIsOk = false;
              }

              if (!posIsOk) {
                this.angularCropper.cropper.moveTo(toLeft, toTop);
              }
            }
          }
        }
      }, {
        key: "onCrop",
        value: function onCrop(e) {// console.log('onCrop Details: ', e.details);
        }
      }, {
        key: "zoomed",
        value: function zoomed(e) {
          console.log('zoomListener Event: ', e, 'this.angularCropper: ', this.angularCropper);
          var canvasData = this.angularCropper.cropper.getCanvasData();
          var containerData = this.angularCropper.cropper.getContainerData();
          var ratio = e.detail.ratio;
          var oldRatio = e.detail.oldRatio;
          var minRatioW = containerData.width / canvasData.naturalWidth;
          var minRatioH = containerData.height / canvasData.naturalHeight;

          if (ratio < oldRatio && (ratio < minRatioW || ratio < minRatioH)) {
            // Zoom-Out
            e.preventDefault(); // Prevent zoom out

            return false;
          }

          this.canMove = Math.abs(minRatioW - ratio) > 0.01;
        }
      }, {
        key: "ngOnInit",
        value: function ngOnInit() {
          console.log('#39 CreateArtikelImageComponent ngOniInit');
          this.dragMode = this.config.dragMode;
        }
      }, {
        key: "onInputImageFile",
        value: function onInputImageFile(event, elm) {
          console.log('onInputImageFile', {
            event: event
          });

          if (elm.files.length) {
            this.inputFile = elm.files[0];
          } else {
            this.inputFile = null;
          }

          this.prepareInputImageFile();
        }
      }, {
        key: "converterDataURItoBlob",
        value: function converterDataURItoBlob(dataURI) {
          var byteString;
          var mimeString;
          var ia;

          if (dataURI.split(',')[0].indexOf('base64') >= 0) {
            byteString = atob(dataURI.split(',')[1]);
          } else {
            byteString = encodeURI(dataURI.split(',')[1]);
          } // separate out the mime component


          mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]; // write the bytes of the string to a typed array

          ia = new Uint8Array(byteString.length);

          for (var i = 0; i < byteString.length; i++) {
            ia[i] = byteString.charCodeAt(i);
          }

          return new Blob([ia], {
            type: mimeString
          });
        }
      }, {
        key: "prepareInputImageFile",
        value: function prepareInputImageFile() {
          var _this71 = this;

          if (!this.inputFile) {
            return;
          }

          this.inputImgSize = this.inputFile.size;
          this.inputImgType = this.inputFile.type;
          console.log('Filesize of ' + this.inputFile.name + ' (' + this.inputFile.type + ') is ' + this.inputFile.size);
          var rd = new FileReader();

          rd.onload = function (ev) {
            console.log(ev);
            _this71.inputImgData = rd.result;
            var img = new Image();

            img.onerror = function (err) {
              console.error('Cannot load file as image', {
                err: err
              });
            };

            img.onload = function (imgLoadEv) {
              console.log('im onlad', {
                imgLoadEv: imgLoadEv
              });
              _this71.inputImgWidth = img.width;
              _this71.inputImgHeight = img.height;
              console.log("Img W: ".concat(_this71.inputImgWidth, ", H: ").concat(_this71.inputImgHeight));
              var KB = 1024;
              console.log('this.prepareImgCanvas', _this71.prepareImgCanvas);

              if (_this71.inputImgHeight > 1000 || _this71.inputImgWidth > 1000) {
                var canv = _this71.prepareImgCanvas.nativeElement;
                var ctx = canv.getContext('2d');
                var iRel = _this71.inputImgWidth / _this71.inputImgHeight;
                canv.width = iRel > 1 ? 1000 : 1000 * iRel;
                canv.height = iRel > 1 ? 1000 / iRel : 1000;
                ctx.drawImage(img, 0, 0, _this71.inputImgWidth, _this71.inputImgHeight, 0, 0, canv.width, canv.height);
                _this71.imageUrl = canv.toDataURL('image/jpeg', 0.6);
              } else if (_this71.inputImgSize > 100 * KB) {
                // 1264270 => 1.235 KB
                var _canv2 = _this71.prepareImgCanvas.nativeElement;

                var _ctx2 = _canv2.getContext('2d');

                var _iRel2 = _this71.inputImgWidth / _this71.inputImgHeight;

                _canv2.width = _this71.inputImgWidth;
                _canv2.height = _this71.inputImgHeight;

                _ctx2.drawImage(img, 0, 0);

                _this71.imageUrl = _canv2.toDataURL('image/jpeg', 0.7);
              } else {
                _this71.imageUrl = _this71.inputImgData;
              }
            };

            console.log('Assign DataUrl to img. ', _this71.inputImgData);
            img.src = _this71.inputImgData;
          };

          rd.onprogress = function (ev) {
            console.log('read ' + ev.loaded + ' of ' + ev.total);
          };

          rd.readAsDataURL(this.inputFile);
        }
      }, {
        key: "onCropperReady",
        value: function onCropperReady(data) {
          var _this72 = this;

          console.log('called onCropperReady on this: ', this, 'this.angularCropper:', this.angularCropper, ' data: ', data);

          if (!this.angularCropper.isLoading && typeof this.angularCropper.cropper !== 'undefined') {
            this.angularCropper.cropper.setDragMode(this.config.dragMode);
            this.dragMode = this.config.dragMode;
            return;
          }

          this.angularCropper.ready.subscribe(function (data2) {
            console.log('ready subscribe', {
              data2: data2
            });

            _this72.angularCropper.cropper.setDragMode(_this72.config.dragMode);

            _this72.dragMode = _this72.config.dragMode;
          });
        }
      }, {
        key: "crop",
        value: function crop() {
          console.log('crop this.angularCropper:', this.angularCropper);
          this.imageUrl = this.angularCropper.cropper.getCroppedCanvas().toDataURL('image/jpeg');
          this.cropApplied = true;
          this.angularCropper.cropper.clear();
          this.cropStatus = 0;
        }
      }, {
        key: "cropReset",
        value: function cropReset() {
          console.log('reset this.angularCropper:', this.angularCropper);
          this.angularCropper.cropper.clear();
          this.angularCropper.cropper.reset();
          this.cropStatus = 0;
        }
      }, {
        key: "setDragModeToMove",
        value: function setDragModeToMove() {
          this.angularCropper.cropper.setDragMode('move');
          this.dragMode = 'move';

          if (this.cropStatus === 1) {
            this.cropStatus = 0;
          }
        }
      }, {
        key: "setDragModeToCrop",
        value: function setDragModeToCrop() {
          this.angularCropper.cropper.setDragMode('crop');
          this.angularCropper.cropper.crop();
          this.dragMode = 'crop';
          this.cropStatus = 5;
        }
      }, {
        key: "hideCropBox",
        value: function hideCropBox() {
          this.angularCropper.cropper.clear();
        }
      }, {
        key: "rotateLeft",
        value: function rotateLeft() {
          // console.log('rotate left 90 this.angularCropper:', this.angularCropper);
          this.angularCropper.cropper.rotate(-90);
        }
      }, {
        key: "rotateRight",
        value: function rotateRight() {
          // console.log('rotate right 90 this.angularCropper:', this.angularCropper);
          this.angularCropper.cropper.rotate(90);
        }
      }, {
        key: "rotate180",
        value: function rotate180() {
          // console.log('rotate 180 this.angularCropper:', this.angularCropper);
          this.angularCropper.cropper.rotate(180);
        }
      }, {
        key: "zoomIn",
        value: function zoomIn() {
          // console.log('zoom( 0.1) this.angularCropper:', this.angularCropper);
          this.angularCropper.cropper.zoom(.1);
        }
      }, {
        key: "zoomOut",
        value: function zoomOut(useRatio) {
          var ratio = typeof useRatio === 'undefined' || useRatio >= 0 ? -0.1 : useRatio;
          console.log('zoom( -0.1) this.angularCropper:', this.angularCropper);
          var canvasData = this.angularCropper.cropper.getCanvasData();
          var cropBoxData = this.angularCropper.cropper.getCropBoxData();
          var containerData = this.angularCropper.cropper.getContainerData();
          var cad = canvasData;
          var crd = cropBoxData;
          var cod = containerData;
          var caw = cad.width;
          var cah = cad.height;
          var crw = crd.width;
          var crh = crd.height;
          var cow = cod.width;
          var coh = cod.height;
          console.log({
            ratio: ratio,
            caw: caw,
            cah: cah,
            cow: cow,
            coh: coh,
            crw: crw,
            crh: crh,
            canvasData: canvasData,
            cropBoxData: cropBoxData,
            containerData: containerData
          });

          if (caw < cow || cah < coh) {
            console.error('Permission denied to zoom out smaller than canvas');
            return;
          }

          console.log('Permission allowed to zoom out >= canvas');
          this.angularCropper.cropper.zoom(ratio);
        }
      }, {
        key: "escape",
        value: function escape() {
          this.imageUrl = null;
          this.inputImgSavedData = null;
          this.inputImgData = null;
        }
      }, {
        key: "close",
        value: function close() {
          this.escape();
          this.activeModal.close();
        }
      }, {
        key: "save",
        value: function save() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee111() {
            var _this73 = this;

            var cropData;
            return regeneratorRuntime.wrap(function _callee111$(_context111) {
              while (1) {
                switch (_context111.prev = _context111.next) {
                  case 0:
                    console.log('save this.angularCropper:', this.angularCropper);
                    this.angularCropper.cropper.disable();
                    cropData = this.angularCropper.cropper.getImageData();
                    this.inputImgSavedData = this.angularCropper.cropper.getCroppedCanvas().toDataURL('image/jpeg', 0.8);
                    return _context111.abrupt("return", this.imageService.putRaumImage({
                      name: this.imgMetaData.name,
                      desc: this.imgMetaData.desc,
                      for_jobid: this.imgMetaData.for_jobid,
                      mcuuid: '',
                      gcuuid: '',
                      type: 'image/jpeg',
                      size: this.inputImgSavedData.toString().length,
                      width: cropData.width,
                      height: cropData.height,
                      data_url: this.inputImgSavedData
                    }, this.imgMetaData.ruuid).then(function () {
                      _this73.activeModal.close();

                      return true;
                    })["catch"](function (err) {
                      console.error('Cannot save Image', {
                        err: err
                      });

                      _this73.angularCropper.cropper.enable();

                      return false;
                    }));

                  case 5:
                  case "end":
                    return _context111.stop();
                }
              }
            }, _callee111, this);
          }));
        }
      }, {
        key: "cropSave",
        value: function cropSave() {
          this.crop();
          this.save();
        }
      }]);

      return CreateRaumImageComponent;
    }();

    CreateRaumImageComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _data_services_images_service__WEBPACK_IMPORTED_MODULE_3__["ImagesService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('angularCropper', {
      "static": false
    })], CreateRaumImageComponent.prototype, "angularCropper", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('prepareImgCanvas', {
      "static": true
    })], CreateRaumImageComponent.prototype, "prepareImgCanvas", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('inputUploadFile', {
      "static": true
    })], CreateRaumImageComponent.prototype, "inputUploadFile", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('inputUploadImage', {
      "static": true
    })], CreateRaumImageComponent.prototype, "inputUploadImage", void 0);
    CreateRaumImageComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-create-raum-image',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./create-raum-image.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./create-raum-image.component.scss */
      "./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.scss"))["default"]]
    })], CreateRaumImageComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.scss":
  /*!*************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.scss ***!
    \*************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsEditInventarEditInventarComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL21vZGFscy9lZGl0LWludmVudGFyL2VkaXQtaW52ZW50YXIuY29tcG9uZW50LnNjc3MifQ== */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.ts":
  /*!***********************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.ts ***!
    \***********************************************************************************/

  /*! exports provided: EditInventarComponent */

  /***/
  function srcAppPagesInventFormModalsEditInventarEditInventarComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "EditInventarComponent", function () {
      return EditInventarComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _data_services_inventar_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../data-services/inventar.service */
    "./src/app/pages/invent-form/data-services/inventar.service.ts");
    /* harmony import */


    var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! rxjs */
    "./node_modules/rxjs/_esm2015/index.js");
    /* harmony import */


    var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! rxjs/operators */
    "./node_modules/rxjs/_esm2015/operators/index.js");
    /* harmony import */


    var _data_services_hersteller_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ../../data-services/hersteller.service */
    "./src/app/pages/invent-form/data-services/hersteller.service.ts");
    /* harmony import */


    var _data_services_artikel_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! ../../data-services/artikel.service */
    "./src/app/pages/invent-form/data-services/artikel.service.ts");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! ../../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _shared_services_data_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
    /*! ../../../../shared/services/data.service */
    "./src/app/shared/services/data.service.ts");

    var states = [];
    var stateNames = [];
    var artikelGruppen = [];
    var artikelKategorien = [];
    var artikelTypen = [];
    var artikelGroessen = [];
    var artikelFarben = [];
    var gruppenKategorien = [];

    var EditInventarComponent = /*#__PURE__*/function () {
      function EditInventarComponent(activeModal, inventarService, artikelService, herstellerService, baseData, dataService) {
        var _this74 = this;

        _classCallCheck(this, EditInventarComponent);

        this.activeModal = activeModal;
        this.inventarService = inventarService;
        this.artikelService = artikelService;
        this.herstellerService = herstellerService;
        this.baseData = baseData;
        this.dataService = dataService;
        this.artikelSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.artikelSearching = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.artikelCreated = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.herstellerChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.gruppeChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.inputChanging = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.inputChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.inventarChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.scannerRequest = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.faSignOutAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__["faSignOutAlt"];
        this.faCamera = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__["faCamera"];
        this.numBezeichnungExists = -1;
        this.inventarDaten = null;
        this.inventarInput = {
          code: '',
          uuid: '',
          Bezeichnung: '',
          Gruppe: '',
          Kategorie: '',
          Typ: '',
          Hersteller: '',
          Groesse: '',
          Farbe: '',
          huuid: ''
        };
        this.focus$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.click$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.focusGrp$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.clickGrp$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.focusKtg$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.clickKtg$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.focusTyp$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.clickTyp$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.focusGrs$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.clickGrs$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.focusFa$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.clickFa$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.existsStatus = {
          Hersteller: {
            term: '',
            count: 0
          },
          Bezeichnung: {
            term: '',
            count: 0
          },
          Typ: {
            term: '',
            count: 0
          },
          Groesse: {
            term: '',
            count: 0
          },
          Farbe: {
            term: '',
            count: 0
          }
        };
        this.herstellerExistsStatus = {
          term: '',
          hid: 0,
          uuid: '',
          data: null,
          isQuerying: false
        };
        this.delayedTrigger = {};
        this.listExistingArticleMatches = [];
        this.listExistingArticlePage = [];
        this.pageSize = 8;
        this.collectionSize = 0;
        this.page = 1;
        this.maxSize = 6;
        this.validationErrors = [];
        this.formIsValid = true;
        this.formError = '';
        this.uuid = '';

        this.formatter = function (state) {
          return state;
        };

        this.search = function (text$) {
          console.log('EditInventarComponent #550');
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this74.click$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !_this74.instance.isPopupOpen();
          }));

          var inputFocus$ = _this74.focus$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? stateNames : stateNames.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
        };

        this.searchGruppen = function (text$) {
          console.log('EditInventarComponent #562');
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this74.clickGrp$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !_this74.instanceGrp.isPopupOpen();
          }));

          var inputFocus$ = _this74.focusGrp$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? artikelGruppen : artikelGruppen.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
        };

        this.searchKategorien = function (text$) {
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this74.clickKtg$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !_this74.instanceKtg.isPopupOpen();
          }));

          var inputFocus$ = _this74.focusKtg$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? artikelKategorien : artikelKategorien.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
        };

        this.searchTypen = function (text$) {
          console.log('EditInventarComponent #585');
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this74.clickTyp$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !_this74.instanceTyp.isPopupOpen();
          }));

          var inputFocus$ = _this74.focusTyp$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? artikelTypen : artikelTypen.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
        };

        this.searchGroessen = function (text$) {
          console.log('EditInventarComponent #597');
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this74.clickGrs$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !_this74.instanceGrs.isPopupOpen();
          }));

          var inputFocus$ = _this74.focusGrs$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? artikelGroessen : artikelGroessen.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
        };

        this.searchFarben = function (text$) {
          console.log('EditInventarComponent #609', {
            text$: text$
          });
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this74.clickFa$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !_this74.instanceFa.isPopupOpen();
          }));

          var inputFocus$ = _this74.focusFa$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? artikelFarben : artikelFarben.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
          console.log('EditInventarComponent #618');
        };
      }

      _createClass(EditInventarComponent, [{
        key: "loadHersteller",
        value: function loadHersteller() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee112() {
            return regeneratorRuntime.wrap(function _callee112$(_context112) {
              while (1) {
                switch (_context112.prev = _context112.next) {
                  case 0:
                    console.log('EditInventarComponent #150 loadHersteller');
                    return _context112.abrupt("return", this.herstellerService.getAllHerstellerWithUuids().then(function (list) {
                      while (states.length > 0) {
                        states.pop();
                        stateNames.pop();
                      }

                      list.forEach(function (item) {
                        states.push(item);
                        stateNames.push(item.Hersteller);
                      });
                      console.log('#118 ngOnInit', {
                        states: states,
                        stateNames: stateNames
                      });
                      return states.length;
                    })["catch"](function () {
                      return -1;
                    }));

                  case 2:
                  case "end":
                    return _context112.stop();
                }
              }
            }, _callee112, this);
          }));
        }
      }, {
        key: "loadGruppenKategorien",
        value: function loadGruppenKategorien() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee113() {
            return regeneratorRuntime.wrap(function _callee113$(_context113) {
              while (1) {
                switch (_context113.prev = _context113.next) {
                  case 0:
                    console.log('EditInventarComponent #168');
                    return _context113.abrupt("return", this.artikelService.getGroupedArtikelGruppenKategorien().then(function (list) {
                      gruppenKategorien.length = 0;
                      list.forEach(function (itm) {
                        return gruppenKategorien.push(itm);
                      });
                      return gruppenKategorien.length;
                    })["catch"](function () {
                      return -1;
                    }));

                  case 2:
                  case "end":
                    return _context113.stop();
                }
              }
            }, _callee113, this);
          }));
        }
      }, {
        key: "loadGruppen",
        value: function loadGruppen() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee114() {
            return regeneratorRuntime.wrap(function _callee114$(_context114) {
              while (1) {
                switch (_context114.prev = _context114.next) {
                  case 0:
                    console.log('EditInventarComponent #179');
                    return _context114.abrupt("return", this.artikelService.getGroupedArtikelGruppen().then(function (list) {
                      artikelGruppen.length = 0;
                      list.forEach(function (it) {
                        return artikelGruppen.push(it);
                      });
                      return artikelGruppen.length;
                    })["catch"](function () {
                      return -1;
                    }));

                  case 2:
                  case "end":
                    return _context114.stop();
                }
              }
            }, _callee114, this);
          }));
        }
      }, {
        key: "loadKategorien",
        value: function loadKategorien() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee115() {
            return regeneratorRuntime.wrap(function _callee115$(_context115) {
              while (1) {
                switch (_context115.prev = _context115.next) {
                  case 0:
                    console.log('EditInventarComponent #190');
                    return _context115.abrupt("return", this.artikelService.getGroupedArtikelKategorien().then(function (list) {
                      artikelKategorien.length = 0;
                      list.forEach(function (it) {
                        return artikelKategorien.push(it);
                      });
                      return artikelKategorien.length;
                    })["catch"](function () {
                      return -1;
                    }));

                  case 2:
                  case "end":
                    return _context115.stop();
                }
              }
            }, _callee115, this);
          }));
        }
      }, {
        key: "loadArtikeltypen",
        value: function loadArtikeltypen() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee116() {
            return regeneratorRuntime.wrap(function _callee116$(_context116) {
              while (1) {
                switch (_context116.prev = _context116.next) {
                  case 0:
                    console.log('EditInventarComponent #201');
                    return _context116.abrupt("return", this.artikelService.getGroupedArtikelProperties('Typ').then(function (list) {
                      artikelTypen.length = 0;
                      list.forEach(function (it) {
                        return artikelTypen.push(it);
                      });
                      return artikelTypen.length;
                    })["catch"](function () {
                      return -1;
                    }));

                  case 2:
                  case "end":
                    return _context116.stop();
                }
              }
            }, _callee116, this);
          }));
        }
      }, {
        key: "loadFarben",
        value: function loadFarben() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee117() {
            return regeneratorRuntime.wrap(function _callee117$(_context117) {
              while (1) {
                switch (_context117.prev = _context117.next) {
                  case 0:
                    console.log('EditInventarComponent #212');
                    return _context117.abrupt("return", this.artikelService.getGroupedArtikelFarben().then(function (list) {
                      artikelFarben.length = 0;
                      list.forEach(function (it) {
                        return artikelFarben.push(it);
                      });
                      return artikelFarben.length;
                    })["catch"](function () {
                      return -1;
                    }));

                  case 2:
                  case "end":
                    return _context117.stop();
                }
              }
            }, _callee117, this);
          }));
        }
      }, {
        key: "loadGroessen",
        value: function loadGroessen() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee118() {
            return regeneratorRuntime.wrap(function _callee118$(_context118) {
              while (1) {
                switch (_context118.prev = _context118.next) {
                  case 0:
                    console.log('EditInventarComponent #223');
                    return _context118.abrupt("return", this.artikelService.getGroupedArtikelGroessen().then(function (list) {
                      artikelGroessen.length = 0;
                      list.forEach(function (it) {
                        return artikelGroessen.push(it);
                      });
                      return artikelGroessen.length;
                    })["catch"](function () {
                      return -1;
                    }));

                  case 2:
                  case "end":
                    return _context118.stop();
                }
              }
            }, _callee118, this);
          }));
        }
      }, {
        key: "ngOnInit",
        value: function ngOnInit() {
          var _this75 = this;

          console.log('EditInventarComponent #234 ngOnInit');
          this.mid = this.baseData.getCurrentMid();
          Promise.all([this.loadHersteller(), this.loadGruppenKategorien(), this.loadGruppen(), this.loadKategorien(), this.loadArtikeltypen(), this.loadFarben(), this.loadGroessen()]).then(function (result) {
            console.log('loaded all ArtikelData', {
              result: result,
              states: states,
              stateNames: stateNames,
              artikelTypen: artikelTypen,
              'gruppenKategorien.length': gruppenKategorien.length,
              'artikelGruppen.length': artikelGruppen.length,
              'artikelKategorien.length': artikelKategorien.length,
              'artikelTypen.length': artikelTypen.length,
              'artikelFarben.length': artikelFarben.length,
              'artikelGroessen.length': artikelGroessen.length
            });
          });
          this.herstellerChanged.subscribe(function () {
            _this75.checkHersteller().then(function () {
              _this75.inputChanged.emit(); // this.rebuildTypeaheadGruppen();


              _this75.rebuildTypeaheadFarben(); // this.rebuildTypeaheadKategorien();


              _this75.rebuildTypeaheadTypen();
            });
          });
          this.gruppeChanged.subscribe(function (gruppe) {
            _this75.rebuildTypeaheadKategorien(gruppe);

            _this75.inputChanged.emit();
          });
          this.inputChanging.subscribe(function () {
            _this75.delegateListArticleMatches(3000);
          });
          this.inputChanged.subscribe(function () {
            // this.checkIfArtikelExistsGlobal();
            _this75.checkIfArtikelExistsMandant();

            _this75.delegateListArticleMatches(500);
          });
        }
      }, {
        key: "openScanner",
        value: function openScanner(target) {
          console.log('EditInventarComponent #287 openScanner');
          this.scannerRequest.emit(target);
        }
      }, {
        key: "formValidate",
        value: function formValidate() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee119() {
            return regeneratorRuntime.wrap(function _callee119$(_context119) {
              while (1) {
                switch (_context119.prev = _context119.next) {
                  case 0:
                    return _context119.abrupt("return", true);

                  case 1:
                  case "end":
                    return _context119.stop();
                }
              }
            }, _callee119);
          }));
        }
      }, {
        key: "getWhereInputsOf",
        value: function getWhereInputsOf(artikelProperties) {
          var _this76 = this;

          var daten = Object.assign({}, this.inventarInput);
          console.log('#201 getWhereInputsOf', {
            artikelProperties: artikelProperties,
            daten: daten,
            inventarInput: this.inventarInput
          });
          var where = artikelProperties.filter(function (p) {
            var hasInput = p in daten && daten[p] !== 0 && daten[p] !== '' && !!daten[p];
            console.log('#206 getWhereInputsOf', {
              p: p,
              hasInput: hasInput,
              daten: daten,
              artikelDaten: Object.assign({}, _this76.inventarInput),
              value: _this76.inventarInput[p],
              dvalue: daten[p]
            });
            return hasInput;
          }).reduce(function (o, p) {
            o[p] = _this76.inventarInput[p];
            return o;
          }, {});
          console.log('#210 getWhereInputsOf', {
            artikelProperties: artikelProperties,
            where: where,
            artikelDaten: this.inventarInput
          });
          return where;
        }
      }, {
        key: "delegateListArticleMatches",
        value: function delegateListArticleMatches(delay) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee120() {
            var funcName, delayMS;
            return regeneratorRuntime.wrap(function _callee120$(_context120) {
              while (1) {
                switch (_context120.prev = _context120.next) {
                  case 0:
                    console.log('EditInventarComponent #347');
                    funcName = 'listArticleMatches';
                    delayMS = isNaN(delay) ? 2000 : delay;

                    if (funcName in this.delayedTrigger) {
                      clearTimeout(this.delayedTrigger[funcName]);
                      delete this.delayedTrigger[funcName];
                    }

                    console.log('delegate listArticleMatches');
                    this.delayedTrigger[funcName] = setTimeout(this.listArticleMatches.bind(this), delayMS);

                  case 6:
                  case "end":
                    return _context120.stop();
                }
              }
            }, _callee120, this);
          }));
        }
      }, {
        key: "rebuildTypeaheadKategorien",
        value: function rebuildTypeaheadKategorien(gruppe) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee121() {
            var grpKategorien, buffer;
            return regeneratorRuntime.wrap(function _callee121$(_context121) {
              while (1) {
                switch (_context121.prev = _context121.next) {
                  case 0:
                    console.log('EditInventarComponent #360');
                    grpKategorien = gruppenKategorien.find(function (itm) {
                      return itm.gruppe === gruppe;
                    });

                    if (!(gruppe && grpKategorien && grpKategorien.kategorien.length)) {
                      _context121.next = 6;
                      break;
                    }

                    artikelKategorien.length = 0;
                    grpKategorien.kategorien.forEach(function (ktg) {
                      return artikelKategorien.push(ktg);
                    });
                    return _context121.abrupt("return");

                  case 6:
                    buffer = [];
                    gruppenKategorien.forEach(function (itm) {
                      itm.kategorien.forEach(function (ktg) {
                        if (ktg && artikelKategorien.indexOf(ktg) === -1) {
                          buffer.push(ktg);
                        }
                      });
                    });
                    artikelKategorien.length = 0;
                    buffer.sort(function (a, b) {
                      return a.toLowerCase() < b.toLowerCase() ? -1 : 1;
                    }).forEach(function (ktg) {
                      return artikelKategorien.push(ktg);
                    });
                    return _context121.abrupt("return");

                  case 11:
                  case "end":
                    return _context121.stop();
                }
              }
            }, _callee121);
          }));
        }
      }, {
        key: "rebuildTypeaheadTypen",
        value: function rebuildTypeaheadTypen() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee122() {
            var where;
            return regeneratorRuntime.wrap(function _callee122$(_context122) {
              while (1) {
                switch (_context122.prev = _context122.next) {
                  case 0:
                    console.log('EditInventarComponent #384');
                    where = this.getWhereInputsOf(['hid']);
                    this.artikelService.getGroupedArtikelTypen(where).then(function (list) {
                      artikelTypen.length = 0;
                      list.forEach(function (it) {
                        return artikelTypen.push(it);
                      });
                    });

                  case 3:
                  case "end":
                    return _context122.stop();
                }
              }
            }, _callee122, this);
          }));
        }
      }, {
        key: "rebuildTypeaheadFarben",
        value: function rebuildTypeaheadFarben() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee123() {
            var where;
            return regeneratorRuntime.wrap(function _callee123$(_context123) {
              while (1) {
                switch (_context123.prev = _context123.next) {
                  case 0:
                    console.log('EditInventarComponent #393');
                    where = this.getWhereInputsOf(['hid']);
                    this.artikelService.getGroupedArtikelFarben(where).then(function (list) {
                      artikelFarben.length = 0;
                      list.forEach(function (it) {
                        return artikelFarben.push(it);
                      });
                    });

                  case 3:
                  case "end":
                    return _context123.stop();
                }
              }
            }, _callee123, this);
          }));
        }
      }, {
        key: "checkHersteller",
        value: function checkHersteller() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee124() {
            var _this77 = this;

            var input, term;
            return regeneratorRuntime.wrap(function _callee124$(_context124) {
              while (1) {
                switch (_context124.prev = _context124.next) {
                  case 0:
                    console.log('EditInventarComponent #402');
                    console.log('called checkHersteller');
                    input = this.inventarInput.Hersteller;
                    term = typeof input === 'string' ? input.trim() : '';

                    if (term !== this.herstellerExistsStatus.term) {
                      this.herstellerExistsStatus.term = term;
                      this.herstellerExistsStatus.data = null;
                      this.herstellerExistsStatus.hid = null;
                      this.herstellerExistsStatus.uuid = null;
                    }

                    if (!term.length) {
                      _context124.next = 10;
                      break;
                    }

                    this.herstellerExistsStatus.isQuerying = true;
                    _context124.next = 9;
                    return this.herstellerService.getByName(term).then(function (data) {
                      _this77.herstellerExistsStatus.data = data;
                      _this77.herstellerExistsStatus.isQuerying = false;

                      if (data !== null && data !== undefined) {
                        _this77.herstellerExistsStatus.hid = data.hid;
                        _this77.herstellerExistsStatus.uuid = 'uuid' in data ? data.uuid : null;
                        console.log('#167 Hersteller exists: ', _this77.herstellerExistsStatus);
                        return true;
                      }

                      return false;
                    });

                  case 9:
                    return _context124.abrupt("return", _context124.sent);

                  case 10:
                    console.log('#172 Hersteller not found: ', term);
                    return _context124.abrupt("return", false);

                  case 12:
                  case "end":
                    return _context124.stop();
                }
              }
            }, _callee124, this);
          }));
        }
      }, {
        key: "listArticleMatches",
        value: function listArticleMatches() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee125() {
            var mid, oInputStatus, d, oCheckData, hid, _i10, _arr2, k;

            return regeneratorRuntime.wrap(function _callee125$(_context125) {
              while (1) {
                switch (_context125.prev = _context125.next) {
                  case 0:
                    console.log('#175 called listArticleMatches');
                    mid = this.baseData.getCurrentMid();
                    oInputStatus = this.existsStatus;
                    d = this.inventarInput;
                    oCheckData = {};
                    _context125.next = 7;
                    return this.checkHersteller();

                  case 7:
                    hid = this.herstellerExistsStatus.hid;

                    for (_i10 = 0, _arr2 = ['Bezeichnung', 'Typ', 'Kategorie', 'Gruppe', 'Groesse', 'Farbe']; _i10 < _arr2.length; _i10++) {
                      k = _arr2[_i10];

                      if (d[k]) {
                        oCheckData[k] = d[k];
                      }
                    }

                    _context125.next = 11;
                    return this.artikelService.listArticleByProperties(mid, hid, oCheckData);

                  case 11:
                    this.listExistingArticleMatches = _context125.sent;
                    this.page = 1;
                    this.onPageChange(this.page);
                    console.log('finished listArticleMatches with results.count: ', this.listExistingArticleMatches.length, ' for', {
                      mid: mid,
                      hid: hid,
                      oCheckData: oCheckData
                    });

                  case 15:
                  case "end":
                    return _context125.stop();
                }
              }
            }, _callee125, this);
          }));
        }
      }, {
        key: "checkIfArtikelExistsMandant",
        value: function checkIfArtikelExistsMandant() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee126() {
            var globalArtikelIds;
            return regeneratorRuntime.wrap(function _callee126$(_context126) {
              while (1) {
                switch (_context126.prev = _context126.next) {
                  case 0:
                    console.log('EditInventarComponent #465');
                    console.log('check if bezeichnung exists');
                    this.numBezeichnungExists = -1;
                    globalArtikelIds = [];
                    _context126.next = 6;
                    return this.artikelService.artikelGlobalByBezeichnung(this.inventarInput.Bezeichnung).then(function (items) {
                      globalArtikelIds = items.map(function (item) {
                        return item.uuid;
                      });
                    });

                  case 6:
                    if (!(globalArtikelIds.length === 0)) {
                      _context126.next = 8;
                      break;
                    }

                    return _context126.abrupt("return", false);

                  case 8:
                    _context126.next = 10;
                    return this.artikelService.artikelMcuuidByGcuuids(this.mid, globalArtikelIds).then(function (items) {
                      return items.length;
                    });

                  case 10:
                    _context126.t0 = _context126.sent;
                    return _context126.abrupt("return", 0 < _context126.t0);

                  case 12:
                  case "end":
                    return _context126.stop();
                }
              }
            }, _callee126, this);
          }));
        }
      }, {
        key: "save",
        value: function save() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee127() {
            var uuid, result;
            return regeneratorRuntime.wrap(function _callee127$(_context127) {
              while (1) {
                switch (_context127.prev = _context127.next) {
                  case 0:
                    console.log('EditInventarComponent #481');
                    this.formError = '';
                    console.log('save inventar');
                    _context127.next = 5;
                    return this.formValidate();

                  case 5:
                    if (!_context127.sent) {
                      _context127.next = 25;
                      break;
                    }

                    uuid = this.uuid;
                    _context127.next = 9;
                    return this.inventarService.updateByUuid(uuid, this.inventarInput);

                  case 9:
                    result = _context127.sent;

                    if (!result.success) {
                      _context127.next = 20;
                      break;
                    }

                    this.inventarChanged.emit(result);

                    if (result.hersteller && result.hersteller.hid) {
                      this.inventarInput.hid = result.hersteller.hid;
                    } else {
                      this.inventarInput.hid = null;
                    }

                    this.inventarInput.huuid = result.hersteller.uuid;
                    this.inventarInput.mcid = result.artikelRef.mcid;
                    this.inventarInput.mcuuid = result.artikelRef.uuid;
                    this.inventarInput.gcid = result.artikelData.gcid;
                    this.inventarInput.gcuuid = result.artikelData.uuid;
                    _context127.next = 22;
                    break;

                  case 20:
                    this.formError = 'Daten konnten nicht aktualisiert werden!<br>';
                    return _context127.abrupt("return", false);

                  case 22:
                    return _context127.abrupt("return", true);

                  case 25:
                    this.formError = 'Bitte die Angaben vervollständigen, Raum darf noch nicht vergeben sein';
                    return _context127.abrupt("return", false);

                  case 27:
                  case "end":
                    return _context127.stop();
                }
              }
            }, _callee127, this);
          }));
        }
      }, {
        key: "applyItemAsArtikel",
        value: function applyItemAsArtikel(item) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee128() {
            var artikelRef, result;
            return regeneratorRuntime.wrap(function _callee128$(_context128) {
              while (1) {
                switch (_context128.prev = _context128.next) {
                  case 0:
                    console.log('EditInventarComponent #509');
                    this.applyItemAsInput(item);
                    console.log('#361 applyItemAsArtikel', {
                      item: item
                    });

                    if (item.mcuuid) {
                      _context128.next = 13;
                      break;
                    }

                    _context128.next = 6;
                    return this.dataService.getArtikelRefByGcuuidMid(item.gcuuid, this.mid);

                  case 6:
                    artikelRef = _context128.sent;

                    if (artikelRef) {
                      _context128.next = 11;
                      break;
                    }

                    _context128.next = 10;
                    return this.artikelService.insertArtikelRef(item);

                  case 10:
                    artikelRef = _context128.sent;

                  case 11:
                    item.mcid = artikelRef.mcid;
                    item.mcuuid = artikelRef.uuid;

                  case 13:
                    if (!(this.inventarDaten.inventar.mcuuid !== item.mcuuid)) {
                      _context128.next = 16;
                      break;
                    }

                    _context128.next = 16;
                    return this.inventarService.updateRefs(this.uuid, item.mcuuid, {
                      Zustand: this.inventarInput.Zustand,
                      code: this.inventarInput.code
                    });

                  case 16:
                    _context128.next = 18;
                    return this.inventarService.getInventar(this.uuid);

                  case 18:
                    result = _context128.sent;
                    this.inventarChanged.emit(result);
                    return _context128.abrupt("return");

                  case 21:
                  case "end":
                    return _context128.stop();
                }
              }
            }, _callee128, this);
          }));
        }
      }, {
        key: "applyItemAsInput",
        value: function applyItemAsInput(item) {
          console.log('EditInventarComponent #534');
          console.log('#367 applyItemAsInput', {
            item: item
          });
          this.inventarInput.Hersteller = item.Hersteller;
          this.inventarInput.hid = item.hid;
          this.inventarInput.Bezeichnung = item.Bezeichnung;
          this.inventarInput.Gruppe = item.Gruppe;
          this.inventarInput.Kategorie = item.Kategorie;
          this.inventarInput.Farbe = item.Farbe;
          this.inventarInput.Groesse = item.Groesse;
          this.inventarInput.Typ = item.Typ;
          return;
        }
      }, {
        key: "onInput",
        value: function onInput(event) {
          console.log('EditInventarComponent #621');
          this.inputChanging.emit(event);
        }
      }, {
        key: "onChange",
        value: function onChange(event) {
          this.inputChanged.emit(event);
        }
      }, {
        key: "onSelectHersteller",
        value: function onSelectHersteller(selected) {
          var foundHst = states.find(function (st) {
            return st.Hersteller === selected.item;
          });
          console.log('selected:', selected, 'selected.item: ', selected.item, 'foundHst:', foundHst);
          this.inventarInput.huuid = foundHst ? foundHst.uuid : null;
          console.log('this.artikelDaten.Hersteller: ', this.inventarInput.Hersteller, {
            selected: selected
          });
          this.herstellerChanged.emit(selected.item);
        }
      }, {
        key: "onChangeHersteller",
        value: function onChangeHersteller(event) {
          console.log('Hersteller changed', event);

          if (event.target instanceof HTMLInputElement) {
            this.herstellerChanged.emit(event.target.value);
          }
        }
      }, {
        key: "onSelectGruppe",
        value: function onSelectGruppe(selected) {
          console.log('Gruppe selected', selected);
          this.gruppeChanged.emit(selected.item);
        }
      }, {
        key: "onChangeGruppe",
        value: function onChangeGruppe(event) {
          console.log('Gruppe changed', event);

          if (event.target instanceof HTMLInputElement) {
            this.gruppeChanged.emit(event.target.value);
          }
        }
      }, {
        key: "onSelectKategorie",
        value: function onSelectKategorie(selected) {
          console.log('Kategorien selected', selected);
          this.inputChanged.emit();
        }
      }, {
        key: "onSelectTypen",
        value: function onSelectTypen(selected) {
          console.log('Typen selected', selected);
          this.inputChanged.emit();
        }
      }, {
        key: "onSelectFarben",
        value: function onSelectFarben(selected) {
          console.log('Farben selected', selected);
          this.inputChanged.emit();
        }
      }, {
        key: "onSelectGroessen",
        value: function onSelectGroessen(selected) {
          console.log('Groessen selected', selected);
          this.inputChanged.emit();
        }
      }, {
        key: "onPageChange",
        value: function onPageChange(page) {
          console.log('EditInventarComponent #678');
          this.collectionSize = this.listExistingArticleMatches.length;
          this.pageSize = 8;
          var start = (page - 1) * this.pageSize;
          var end = start + this.pageSize;
          this.listExistingArticlePage = this.listExistingArticleMatches.slice(start, end);
          console.log('#599 pagination goto page', page, '.slice(', start, end, ') of', this.collectionSize);
        }
      }, {
        key: "onSubmit",
        value: function onSubmit(event) {
          console.log('onSubmit', this.inventarInput);
          this.save();
        }
      }, {
        key: "inventarUuid",
        get: function get() {
          console.log('called get raumId() ', this.uuid);
          return this.uuid;
        },
        set: function set(uuid) {
          var _this78 = this;

          console.log('EditInventarComponent #297 set inventarId(id)', {
            id: uuid
          });
          this.uuid = uuid;
          this.inventarService.getInventar(uuid).then(function (result) {
            console.log('EditInventarComponent #300 getInventar', {
              result: result
            });
            _this78.inventarDaten = result;

            if (result && result.success) {
              _this78.inventarInput.uuid = uuid;
              _this78.inventarInput.code = result.inventar.code;
              _this78.inventarInput.Bezeichnung = result.artikelData.Bezeichnung;
              _this78.inventarInput.Gruppe = result.artikelData.Gruppe;
              _this78.inventarInput.Kategorie = result.artikelData.Kategorie;
              _this78.inventarInput.Typ = result.artikelData.Typ;

              if (result.hersteller && result.hersteller.Hersteller) {
                _this78.inventarInput.Hersteller = result.hersteller.Hersteller;
              } else {
                _this78.inventarInput.Hersteller = '';
              }

              _this78.inventarInput.Groesse = result.artikelData.Groesse;
              _this78.inventarInput.Farbe = result.artikelData.Farbe;
              _this78.inventarInput.mcid = result.inventar.mcid;
              _this78.inventarInput.mcuuid = result.inventar.mcuuid;
              _this78.inventarInput.gcid = result.artikelRef.gcid;
              _this78.inventarInput.gcuuid = result.artikelRef.gcuuid;
              _this78.inventarInput.hid = result.artikelData.hid;
              _this78.inventarInput.huuid = result.artikelData.huuid;
              _this78.inventarInput.Zustand = result.inventar.Zustand;
            }
          });
        }
      }]);

      return EditInventarComponent;
    }();

    EditInventarComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _data_services_inventar_service__WEBPACK_IMPORTED_MODULE_4__["InventarService"]
      }, {
        type: _data_services_artikel_service__WEBPACK_IMPORTED_MODULE_8__["ArtikelService"]
      }, {
        type: _data_services_hersteller_service__WEBPACK_IMPORTED_MODULE_7__["HerstellerService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_9__["BasedataService"]
      }, {
        type: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_10__["DataService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditInventarComponent.prototype, "artikelSelected", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditInventarComponent.prototype, "artikelSearching", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditInventarComponent.prototype, "artikelCreated", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditInventarComponent.prototype, "herstellerChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditInventarComponent.prototype, "gruppeChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditInventarComponent.prototype, "inputChanging", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditInventarComponent.prototype, "inputChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditInventarComponent.prototype, "inventarChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditInventarComponent.prototype, "scannerRequest", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instance', {
      "static": true
    })], EditInventarComponent.prototype, "instance", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instanceGrp', {
      "static": true
    })], EditInventarComponent.prototype, "instanceGrp", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instanceKtg', {
      "static": true
    })], EditInventarComponent.prototype, "instanceKtg", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instanceTyp', {
      "static": true
    })], EditInventarComponent.prototype, "instanceTyp", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instanceGrs', {
      "static": true
    })], EditInventarComponent.prototype, "instanceGrs", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instanceFa', {
      "static": true
    })], EditInventarComponent.prototype, "instanceFa", void 0);
    EditInventarComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-edit-inventar',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./edit-inventar.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./edit-inventar.component.scss */
      "./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.scss"))["default"]]
    })], EditInventarComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.scss":
  /*!*****************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.scss ***!
    \*****************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsEditRaumEditRaumComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".input-group-text {\n  min-width: 4rem;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2VkaXQtcmF1bS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxlZGl0LXJhdW1cXGVkaXQtcmF1bS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2VkaXQtcmF1bS9lZGl0LXJhdW0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDRSxlQUFBO0FDQUYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvZWRpdC1yYXVtL2VkaXQtcmF1bS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4uaW5wdXQtZ3JvdXAtdGV4dCB7XHJcbiAgbWluLXdpZHRoOiA0cmVtO1xyXG59XHJcbiIsIi5pbnB1dC1ncm91cC10ZXh0IHtcbiAgbWluLXdpZHRoOiA0cmVtO1xufSJdfQ== */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.ts":
  /*!***************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.ts ***!
    \***************************************************************************/

  /*! exports provided: EditRaumComponent */

  /***/
  function srcAppPagesInventFormModalsEditRaumEditRaumComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "EditRaumComponent", function () {
      return EditRaumComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _data_services_raum_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../data-services/raum.service */
    "./src/app/pages/invent-form/data-services/raum.service.ts");
    /* harmony import */


    var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! rxjs/operators */
    "./node_modules/rxjs/_esm2015/operators/index.js");

    var EditRaumComponent = /*#__PURE__*/function () {
      function EditRaumComponent( // private modalService: NgbModal,
      activeModal, raumService) {
        var _this79 = this;

        _classCallCheck(this, EditRaumComponent);

        this.activeModal = activeModal;
        this.raumService = raumService; // faSearch = faSearch;

        this.faBarcode = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__["faBarcode"];
        this.faCamera = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__["faCamera"]; // faSignOutAlt = faSignOutAlt;

        this.raumExistsStatus = -1;
        this.bezeichnungExistsStatus = -1;
        this.raumDaten = null;
        this.etagen = [];
        this.validationErrors = [];
        this.raumInput = {
          gid: 0,
          Raum: '',
          Raumbezeichnung: '',
          Etage: '',
          code: ''
        };
        this.formIsValid = false;
        this.formError = '';
        this.raumSearching = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.raumChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.scannerRequest = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();

        this.searchEtage = function (text$) {
          return text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["distinctUntilChanged"])(), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["filter"])(function (term) {
            return term.length >= 0;
          }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__["map"])(function (term) {
            // console.log('map and slice artikel by term', term, 'states', states);
            var matches = _this79.etagen.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            }).slice(0, 10); // console.log('search ', { term, matches, etagen: this.etagen });


            return matches;
          }));
        };
      }

      _createClass(EditRaumComponent, [{
        key: "getDismissReason",
        value: function getDismissReason(reason) {
          if (reason === _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["ModalDismissReasons"].ESC) {
            return 'by pressing ESC';
          } else if (reason === _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["ModalDismissReasons"].BACKDROP_CLICK) {
            return 'by clicking on a backdrop';
          } else {
            return "with: ".concat(reason);
          }
        }
      }, {
        key: "ngOnInit",
        value: function ngOnInit() {}
      }, {
        key: "openScanner",
        value: function openScanner(target) {
          this.scannerRequest.emit(target);
        }
      }, {
        key: "formValidate",
        value: function formValidate() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee129() {
            var codeExists;
            return regeneratorRuntime.wrap(function _callee129$(_context129) {
              while (1) {
                switch (_context129.prev = _context129.next) {
                  case 0:
                    console.log('called formValidate');
                    this.validationErrors.length = 0;

                    if (!(typeof this.raumInput.code === 'string' && this.raumInput.code.trim().length > 0 && this.raumInput.code !== this.raumDaten.code)) {
                      _context129.next = 7;
                      break;
                    }

                    _context129.next = 5;
                    return this.raumService.codeExistsInInventur(this.raumDaten.for_jobid, this.raumDaten.uuid, this.raumInput.code);

                  case 5:
                    codeExists = _context129.sent;

                    if (codeExists) {
                      this.validationErrors.push('#96 Raum-Barcode ist bereits für einen anderen Raum vergeben!', JSON.stringify({
                        codeExists: codeExists
                      }));
                    }

                  case 7:
                    if (!(this.raumInput.Raum.trim().length > 0 && this.raumInput.Raum.trim() !== this.raumDaten.Raum)) {
                      _context129.next = 12;
                      break;
                    }

                    _context129.next = 10;
                    return this.raumService.raumExistsInInventur(this.raumDaten.for_jobid, this.raumDaten.uuid, this.raumInput.Raum);

                  case 10:
                    if (!_context129.sent) {
                      _context129.next = 12;
                      break;
                    }

                    this.validationErrors.push('Raum-Name ist bereits für einen anderen Raum vergeben!');

                  case 12:
                    this.formIsValid = this.raumInput.Raum.length > 0 && this.validationErrors.length === 0;
                    console.log('called formValidate return ', this.formIsValid);
                    return _context129.abrupt("return", this.formIsValid);

                  case 15:
                  case "end":
                    return _context129.stop();
                }
              }
            }, _callee129, this);
          }));
        }
      }, {
        key: "checkIfRaumExists",
        value: function checkIfRaumExists() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee130() {
            var _this80 = this;

            var raumExists;
            return regeneratorRuntime.wrap(function _callee130$(_context130) {
              while (1) {
                switch (_context130.prev = _context130.next) {
                  case 0:
                    console.log('check if raum exists');
                    this.raumExistsStatus = -1;
                    raumExists = false;
                    _context130.next = 5;
                    return this.raumService.raumExists(this.gid, this.raumInput.Raum).then(function (exists) {
                      _this80.raumExistsStatus = exists ? 1 : 0;
                      raumExists = exists;
                    });

                  case 5:
                    _context130.next = 7;
                    return this.formValidate();

                  case 7:
                    console.log('check if raum exists: ', raumExists);
                    return _context130.abrupt("return", raumExists);

                  case 9:
                  case "end":
                    return _context130.stop();
                }
              }
            }, _callee130, this);
          }));
        }
      }, {
        key: "checkIfRaumbezeichnungExists",
        value: function checkIfRaumbezeichnungExists() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee131() {
            var _this81 = this;

            var bezeichnungExists;
            return regeneratorRuntime.wrap(function _callee131$(_context131) {
              while (1) {
                switch (_context131.prev = _context131.next) {
                  case 0:
                    console.log('check if bezeichnung exists');
                    this.bezeichnungExistsStatus = -1;
                    bezeichnungExists = false;
                    _context131.next = 5;
                    return this.raumService.raumBezeichnungExists(this.gid, this.raumInput.Raumbezeichnung).then(function (exists) {
                      _this81.bezeichnungExistsStatus = exists ? 1 : 0;
                      bezeichnungExists = exists;
                    });

                  case 5:
                    console.log('check if bezeichnung exists: ', bezeichnungExists);
                    return _context131.abrupt("return", bezeichnungExists);

                  case 7:
                  case "end":
                    return _context131.stop();
                }
              }
            }, _callee131, this);
          }));
        }
      }, {
        key: "save",
        value: function save() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee132() {
            var _i11, _Object$keys7, col, result;

            return regeneratorRuntime.wrap(function _callee132$(_context132) {
              while (1) {
                switch (_context132.prev = _context132.next) {
                  case 0:
                    this.formError = '';
                    console.log('save raum ');
                    _context132.next = 4;
                    return this.formValidate();

                  case 4:
                    if (!_context132.sent) {
                      _context132.next = 21;
                      break;
                    }

                    console.log('save raumdaten ', this.raumInput);

                    for (_i11 = 0, _Object$keys7 = Object.keys(this.raumDaten); _i11 < _Object$keys7.length; _i11++) {
                      col = _Object$keys7[_i11];
                    }

                    _context132.next = 9;
                    return this.raumService.updateByUuid(this.raumDaten.uuid, this.raumInput);

                  case 9:
                    result = _context132.sent;
                    console.log('save raumdaten result ', result);

                    if (result.success) {
                      _context132.next = 16;
                      break;
                    }

                    this.formError = 'Daten konnten nicht aktualisiert werden!<br>' + result.errorMsg;
                    return _context132.abrupt("return", false);

                  case 16:
                    this.raumChanged.emit(result.item);
                    this.activeModal.close();
                    return _context132.abrupt("return", true);

                  case 19:
                    _context132.next = 22;
                    break;

                  case 21:
                    this.formError = 'Bitte die Angaben vervollständigen, Raum darf noch nicht vergeben sein';

                  case 22:
                  case "end":
                    return _context132.stop();
                }
              }
            }, _callee132, this);
          }));
        }
      }, {
        key: "onSubmit",
        value: function onSubmit(event) {
          console.log('onSubmit', this.raumInput);
          this.save();
        }
      }, {
        key: "raumUuid",
        get: function get() {
          console.log('called get raumId() ', this.uuid);
          return this.uuid;
        },
        set: function set(uuid) {
          var _this82 = this;

          console.log('called set raumId', 'param', uuid, 'old-uuid', this.uuid);
          this.raumService.get(uuid).then(function (raum) {
            _this82.raumDaten = raum;

            if (raum) {
              _this82.uuid = raum.uuid;

              for (var _i12 = 0, _Object$keys8 = Object.keys(_this82.raumInput); _i12 < _Object$keys8.length; _i12++) {
                var inputFld = _Object$keys8[_i12];
                _this82.raumInput[inputFld] = raum[inputFld];
              }

              console.log('#128 edit-raum.component.ts set raumId(uuid: ' + uuid + ')', {
                raum: raum,
                raumInput: Object.assign({}, _this82.raumInput)
              });
              _this82.etagen = [];

              _this82.raumService.getEtagenByGidInInventur(_this82.raumDaten.for_jobid, _this82.raumDaten.gid).then(function (etagen) {
                _this82.etagen = etagen;
              });
            } else {
              _this82.uuid = '';
            }
          })["catch"](function () {
            _this82.raumDaten = null;
            _this82.uuid = '';
          });
        }
      }]);

      return EditRaumComponent;
    }();

    EditRaumComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _data_services_raum_service__WEBPACK_IMPORTED_MODULE_4__["RaumService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditRaumComponent.prototype, "raumSearching", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditRaumComponent.prototype, "raumChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], EditRaumComponent.prototype, "scannerRequest", void 0);
    EditRaumComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-edit-raum',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./edit-raum.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./edit-raum.component.scss */
      "./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.scss"))["default"]]
    })], EditRaumComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.scss":
  /*!*******************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.scss ***!
    \*******************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsGesamtListDoneGesamtListDoneComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".modal-header.modal-header-with-links {\n  display: flex;\n  flex-direction: row-reverse;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LWRvbmUvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxwYWdlc1xcaW52ZW50LWZvcm1cXG1vZGFsc1xcZ2VzYW10LWxpc3QtZG9uZVxcZ2VzYW10LWxpc3QtZG9uZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LWRvbmUvZ2VzYW10LWxpc3QtZG9uZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSwyQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LWRvbmUvZ2VzYW10LWxpc3QtZG9uZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xyXG59XHJcbiIsIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG59Il19 */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.ts":
  /*!*****************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.ts ***!
    \*****************************************************************************************/

  /*! exports provided: GesamtListDoneComponent */

  /***/
  function srcAppPagesInventFormModalsGesamtListDoneGesamtListDoneComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "GesamtListDoneComponent", function () {
      return GesamtListDoneComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _data_services_raum_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../data-services/raum.service */
    "./src/app/pages/invent-form/data-services/raum.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");

    var GesamtListDoneComponent = /*#__PURE__*/function () {
      function GesamtListDoneComponent(activeModal, baseData, raumData) {
        _classCallCheck(this, GesamtListDoneComponent);

        this.activeModal = activeModal;
        this.baseData = baseData;
        this.raumData = raumData;
        this.requestGesamtRest = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"](); // FA-Icons

        this.faCheck = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faCheck"];
        this.faInWork = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faSpinner"];
        this.faEmpty = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faBatteryEmpty"];
        this.faQuarter = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faBatteryQuarter"];
        this.faHalf = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faBatteryHalf"];
        this.faThreeQuarter = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faBatteryThreeQuarters"];
        this.faFull = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faBatteryFull"];
        this.faSignOutAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faSignOutAlt"];
        this.faExchangeAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faExchangeAlt"];
        this.raumSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
      }

      _createClass(GesamtListDoneComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {}
      }, {
        key: "onSelectRaum",
        value: function onSelectRaum(uuid) {
          this.raumSelected.emit(uuid);
          this.activeModal.close();
        }
      }, {
        key: "getStatusIconNameByItem",
        value: function getStatusIconNameByItem(item) {
          if (item.done === 0) {
            return 'empty';
          } else if (item.done >= item.total) {
            return 'full';
          } else if (item.progress >= 75) {
            return 'three-quarter';
          } else if (item.progress >= 50) {
            return 'half';
          } else {
            return 'quarter';
          }
        }
      }, {
        key: "loadGebaeudeStat",
        value: function loadGebaeudeStat(useJobid) {
          var _this83 = this;

          var jobid = useJobid || this.baseData.getCurrentJobid();
          this.raumData.getRaeumeStartedByGebaeudeId(this.gebaeudeDaten.gid, jobid).then(function (list) {
            _this83.raeumeListDone = list.map(function (item) {
              item.progress = Math.ceil(item.progress < 99 || item.progress >= 100 ? item.progress : 99);
              return Object.assign({}, item, {
                statusIconName: _this83.getStatusIconNameByItem(item)
              });
            }).sort(function (a, b) {
              if (a.editStatus === b.editStatus && a.progress === b.progress) {
                return a.Raum.toLowerCase() < b.Raum.toLowerCase() ? -1 : 1;
              } else if (a.editStatus !== b.editStatus) {
                return a.editStatus < b.editStatus ? -1 : 1;
              } else {
                return a.progress < b.progress ? -1 : 1;
              }
            });
          });
        }
      }, {
        key: "showGesamtRestForm",
        value: function showGesamtRestForm() {
          console.log('click showGesamtToDoForm');
          this.activeModal.close();
          this.requestGesamtRest.emit(this.gebaeudeDaten);
        }
      }, {
        key: "gebaeude",
        set: function set(gebaeude) {
          this.gebaeudeDaten = gebaeude;
          this.loadGebaeudeStat();
        }
      }]);

      return GesamtListDoneComponent;
    }();

    GesamtListDoneComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_3__["BasedataService"]
      }, {
        type: _data_services_raum_service__WEBPACK_IMPORTED_MODULE_4__["RaumService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], GesamtListDoneComponent.prototype, "raumSelected", void 0);
    GesamtListDoneComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-gesamt-list-done',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./gesamt-list-done.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./gesamt-list-done.component.scss */
      "./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.scss"))["default"]]
    })], GesamtListDoneComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.scss":
  /*!*******************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.scss ***!
    \*******************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsGesamtListRestGesamtListRestComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".modal-header.modal-header-with-links {\n  display: flex;\n  flex-direction: row-reverse;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LXJlc3QvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxwYWdlc1xcaW52ZW50LWZvcm1cXG1vZGFsc1xcZ2VzYW10LWxpc3QtcmVzdFxcZ2VzYW10LWxpc3QtcmVzdC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LXJlc3QvZ2VzYW10LWxpc3QtcmVzdC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSwyQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LXJlc3QvZ2VzYW10LWxpc3QtcmVzdC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xyXG59XHJcbiIsIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG59Il19 */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.ts":
  /*!*****************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.ts ***!
    \*****************************************************************************************/

  /*! exports provided: GesamtListRestComponent */

  /***/
  function srcAppPagesInventFormModalsGesamtListRestGesamtListRestComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "GesamtListRestComponent", function () {
      return GesamtListRestComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _data_services_raum_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../data-services/raum.service */
    "./src/app/pages/invent-form/data-services/raum.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");

    var GesamtListRestComponent = /*#__PURE__*/function () {
      function GesamtListRestComponent(activeModal, baseData, raumData) {
        _classCallCheck(this, GesamtListRestComponent);

        this.activeModal = activeModal;
        this.baseData = baseData;
        this.raumData = raumData;
        this.requestGesamtDone = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.raumSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.faSignOutAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faSignOutAlt"];
        this.faExchangeAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faExchangeAlt"];
      }

      _createClass(GesamtListRestComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {}
      }, {
        key: "onSelectRaum",
        value: function onSelectRaum(ruuid) {
          this.raumSelected.emit(ruuid);
          this.activeModal.close();
        }
      }, {
        key: "loadGebaeudeStat",
        value: function loadGebaeudeStat(useJobid) {
          var _this84 = this;

          var jobid = useJobid || this.baseData.getCurrentJobid();
          this.raumData.getRaeumeToDoByGebaeudeId(this.gebaeudeDaten.gid, jobid).then(function (list) {
            _this84.raeumeListDone = list.sort(function (a, b) {
              return a.Raum.toLowerCase() < b.Raum.toLowerCase() ? -1 : 1;
            });
          });
        }
      }, {
        key: "showGesamtDoneForm",
        value: function showGesamtDoneForm() {
          console.log('click showGesamtToDoForm');
          this.activeModal.close();
          this.requestGesamtDone.emit(this.gebaeudeDaten);
        }
      }, {
        key: "gebaeude",
        set: function set(gebaeude) {
          this.gebaeudeDaten = gebaeude;
          this.loadGebaeudeStat();
        }
      }]);

      return GesamtListRestComponent;
    }();

    GesamtListRestComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_3__["BasedataService"]
      }, {
        type: _data_services_raum_service__WEBPACK_IMPORTED_MODULE_4__["RaumService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], GesamtListRestComponent.prototype, "raumSelected", void 0);
    GesamtListRestComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-gesamt-list-rest',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./gesamt-list-rest.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./gesamt-list-rest.component.scss */
      "./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.scss"))["default"]]
    })], GesamtListRestComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/imagebox/imagebox.component.scss":
  /*!***************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/imagebox/imagebox.component.scss ***!
    \***************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsImageboxImageboxComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL21vZGFscy9pbWFnZWJveC9pbWFnZWJveC5jb21wb25lbnQuc2NzcyJ9 */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/imagebox/imagebox.component.ts":
  /*!*************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/imagebox/imagebox.component.ts ***!
    \*************************************************************************/

  /*! exports provided: ImageboxComponent */

  /***/
  function srcAppPagesInventFormModalsImageboxImageboxComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ImageboxComponent", function () {
      return ImageboxComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../../../shared/services/dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _data_services_images_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../../data-services/images.service */
    "./src/app/pages/invent-form/data-services/images.service.ts");
    /* harmony import */


    var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! @angular/platform-browser */
    "./node_modules/@angular/platform-browser/fesm2015/platform-browser.js");
    /* harmony import */


    var ngx_toastr__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ngx-toastr */
    "./node_modules/ngx-toastr/fesm2015/ngx-toastr.js");

    var HtmlImageLoadingStatus;

    (function (HtmlImageLoadingStatus) {
      HtmlImageLoadingStatus[HtmlImageLoadingStatus["Pending"] = 0] = "Pending";
      HtmlImageLoadingStatus[HtmlImageLoadingStatus["Loading"] = 1] = "Loading";
      HtmlImageLoadingStatus[HtmlImageLoadingStatus["Aborted"] = 2] = "Aborted";
      HtmlImageLoadingStatus[HtmlImageLoadingStatus["Loaded"] = 3] = "Loaded";
      HtmlImageLoadingStatus[HtmlImageLoadingStatus["NotFound"] = 4] = "NotFound";
      HtmlImageLoadingStatus[HtmlImageLoadingStatus["Error"] = 5] = "Error";
    })(HtmlImageLoadingStatus || (HtmlImageLoadingStatus = {}));

    var ImageboxComponent = /*#__PURE__*/function () {
      function ImageboxComponent(dexie, imgService, activeModal, domSanitizer, toastr) {
        _classCallCheck(this, ImageboxComponent);

        this.dexie = dexie;
        this.imgService = imgService;
        this.activeModal = activeModal;
        this.domSanitizer = domSanitizer;
        this.toastr = toastr;
        this.faAngleLeft = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faAngleLeft"];
        this.faAngleRight = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faAngleRight"];
        this.faArrowLeft = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faArrowAltCircleLeft"];
        this.faArrowRight = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faArrowAltCircleRight"];
        this.faDot = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faDotCircle"];
        this.faTrashAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faTrashAlt"];
        this.titel = '';
        this.htmlImageLoadingStatus = HtmlImageLoadingStatus;
        this.images = [];
        this.imageUuidList = [];
        this.numImages = 0;
        this.numImgFound = 0;
        this.numImgFinished = 0;
        this.numImgLoaded = 0;
        this.currImgIdx = 0;
        this.finishedLoading = false;
        this.currImg = null;
        this.prevImg = null;
        this.nextImg = null;
        this.error = '';
      }

      _createClass(ImageboxComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {}
      }, {
        key: "setTitel",
        value: function setTitel(titel) {
          this.titel = titel;
        }
      }, {
        key: "setImagesUuids",
        value: function setImagesUuids(uuids) {
          var currIdx = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee133() {
            return regeneratorRuntime.wrap(function _callee133$(_context133) {
              while (1) {
                switch (_context133.prev = _context133.next) {
                  case 0:
                    console.log('ImageboxComponent.setImagesUuids #65', {
                      uuids: uuids,
                      currIdx: currIdx
                    });
                    this.currImg = null;
                    this.prevImg = null;
                    this.nextImg = null;
                    this.imageUuidList = uuids;
                    this.numImages = this.imageUuidList.length;

                    if (currIdx < 0) {
                      this.currImgIdx = 0;
                    } else if (currIdx > this.numImages - 1) {
                      this.currImgIdx = this.numImages - 1;
                    } else {
                      this.currImgIdx = currIdx;
                    }

                    this.images.length = 0;
                    this.images.length = this.imageUuidList.length;
                    this.images.fill(null);
                    console.log('ImageboxComponent.setImagesUuids #82 loadImage', {
                      currIdx: currIdx
                    });
                    _context133.next = 13;
                    return this.loadImage(currIdx)["catch"](function (reason) {
                      console.error('Could not load Image', {
                        reason: reason
                      });
                    }).then(function (success) {
                      console.log('#86 loadImage(', currIdx, ') successful');
                    });

                  case 13:
                    if (!(this.numImages > 1)) {
                      _context133.next = 17;
                      break;
                    }

                    console.log('ImageboxComponent.setImagesUuids #82 loadImages');
                    _context133.next = 17;
                    return this.loadImages()["catch"](function (reason) {
                      console.error('#92 Could not load all Images', {
                        reason: reason
                      });
                    }).then(function (result) {
                      console.log('#94 loaded all Images in List by loadImages() successful', {
                        result: result
                      });
                    });

                  case 17:
                    this.finishedLoading = true;

                  case 18:
                  case "end":
                    return _context133.stop();
                }
              }
            }, _callee133, this);
          }));
        }
      }, {
        key: "loadImages",
        value: function loadImages() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee134() {
            var _this85 = this;

            var dbImages, thisImages, numUuids, numResults, numFound, numFinished, numLoaded;
            return regeneratorRuntime.wrap(function _callee134$(_context134) {
              while (1) {
                switch (_context134.prev = _context134.next) {
                  case 0:
                    dbImages = this.dexie.images;
                    thisImages = this.images;
                    numUuids = this.imageUuidList.length;
                    numResults = 0;
                    numFound = 0;
                    numFinished = 0;
                    numLoaded = 0;
                    return _context134.abrupt("return", new Promise(function (resolve, reject) {
                      var checkResolve = function checkResolve() {
                        console.log('ImageboxComponent.setImagesUuids #102 loadImages checkResolve', numResults, numUuids, numFinished, numFound, numLoaded);

                        if (numResults === numUuids && numFinished === numFound) {
                          console.log('ImageboxComponent.setImagesUuids #104 loadImages checkResolve');

                          if (numFound === numUuids) {
                            console.log('ImageboxComponent.setImagesUuids #106 loadImages checkResolve resolve');
                            resolve(numLoaded);
                          } else {
                            console.log('ImageboxComponent.setImagesUuids #109 loadImages checkResolve reject');
                            reject(numLoaded);
                          }
                        }
                      };

                      _this85.imageUuidList.map(function (uuid, idx) {
                        console.log('ImageboxComponent #124', {
                          uuid: uuid,
                          idx: idx
                        }, thisImages[idx]);

                        if (thisImages[idx] !== null && typeof thisImages[idx] === 'object' && 'loadingStatus' in thisImages[idx] && thisImages[idx].loadingStatus === HtmlImageLoadingStatus.Loaded) {
                          ++numResults;
                          ++numLoaded;
                          return;
                        }

                        dbImages.get(uuid).then(function (row) {
                          ++numResults;

                          if (!row) {
                            thisImages[idx] = {
                              uuid: uuid,
                              img: null,
                              loadingStatus: HtmlImageLoadingStatus.NotFound,
                              isDeletable: true,
                              isEditable: true
                            };
                            checkResolve();
                            return;
                          }

                          ++numFound;
                          console.log('ImageboxComponent #145', idx, thisImages[idx]);

                          if (thisImages[idx] !== null && typeof thisImages[idx] === 'object' && 'loadingStatus' in thisImages[idx] && thisImages[idx].loadingStatus === HtmlImageLoadingStatus.Loaded) {
                            ++numLoaded;
                            checkResolve();
                            return;
                          }

                          ++_this85.numImgFound;
                          thisImages[idx] = {
                            uuid: uuid,
                            name: row.name,
                            width: row.width,
                            height: row.height,
                            type: row.type,
                            desc: row.desc,
                            loadingStatus: HtmlImageLoadingStatus.Loading,
                            isDeletable: true,
                            isEditable: true,
                            img: new Image()
                          };

                          thisImages[idx].img.onload = function (ev) {
                            ++numFinished;
                            ++numLoaded;
                            ++_this85.numImgLoaded;
                            ++_this85.numImgFinished;
                            thisImages[idx].loadingStatus = HtmlImageLoadingStatus.Loaded;
                            console.log('successfull loaded ' + idx + '=' + thisImages[idx].img.src);
                            checkResolve();
                          };

                          thisImages[idx].img.onerror = function (ev) {
                            ++numFinished;
                            ++_this85.numImgFinished;
                            thisImages[idx].loadingStatus = HtmlImageLoadingStatus.Error;
                            checkResolve();
                          };

                          thisImages[idx].img.onabort = function (ev) {
                            ++numFinished;
                            ++_this85.numImgFinished;
                            thisImages[idx].loadingStatus = HtmlImageLoadingStatus.Aborted;
                            checkResolve();
                          };

                          thisImages[idx].img.src = row.data_url.replace(/(\r\n|\n|\r)/gm, '');
                        })["catch"](function (reason) {
                          ++numResults;
                          ++_this85.numImgFinished;
                          thisImages[idx].loadingStatus = HtmlImageLoadingStatus.NotFound;
                          checkResolve();
                        });
                      });

                      checkResolve();
                    }));

                  case 8:
                  case "end":
                    return _context134.stop();
                }
              }
            }, _callee134, this);
          }));
        }
      }, {
        key: "prev",
        value: function prev() {
          this.loadImage(this.currImgIdx - 1);
        }
      }, {
        key: "next",
        value: function next() {
          this.loadImage(this.currImgIdx + 1);
        }
      }, {
        key: "delete",
        value: function _delete(imgUuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee135() {
            var idx, numDeleted, len, newLen, i;
            return regeneratorRuntime.wrap(function _callee135$(_context135) {
              while (1) {
                switch (_context135.prev = _context135.next) {
                  case 0:
                    // let delUuid = imgUuid;
                    console.log('ImageboxComponent.delete() #236 this.images.length:', this.images.length);
                    idx = this.imageUuidList.indexOf(imgUuid);
                    numDeleted = 0;

                    if (!(idx === -1)) {
                      _context135.next = 7;
                      break;
                    }

                    console.error('ImageboxComponent.delete(' + imgUuid + ') #230 Image not found'); // alert('Bild kann nicht gelöscht werden. Unbekannte Bild-ID: ' + imgUuid);

                    this.toastr.error('Fehler beim Löschen: Unbekannte Bild-ID ' + imgUuid);
                    return _context135.abrupt("return");

                  case 7:
                    if (confirm('Möchten Sie das Bild wirklich löschen?')) {
                      _context135.next = 9;
                      break;
                    }

                    return _context135.abrupt("return", false);

                  case 9:
                    if (!imgUuid) {
                      _context135.next = 14;
                      break;
                    }

                    _context135.next = 12;
                    return this.imgService.deleteByUuid(imgUuid);

                  case 12:
                    numDeleted = _context135.sent;

                    if (numDeleted) {
                      this.toastr.success('Bild wurde gelöscht ' + imgUuid);
                    }

                  case 14:
                    if (numDeleted) {
                      _context135.next = 18;
                      break;
                    }

                    console.error('ImageboxComponent.delete(' + imgUuid + ') #247 wurde nicht gelöscht');
                    this.toastr.error('Bild konnte nicht gelöscht werden. Bild-ID: ' + imgUuid, 'Fehler');
                    return _context135.abrupt("return");

                  case 18:
                    len = this.imageUuidList.length;
                    newLen = len - 1;

                    for (i = idx; i < len; ++i) {
                      if (i < newLen) {
                        this.imageUuidList[i] = this.imageUuidList[i + 1];
                        this.images[i] = this.images[i + 1];
                      }
                    }

                    this.imageUuidList.length = newLen;
                    this.images.length = newLen;
                    this.numImages = newLen;

                    if (idx < this.images.length && this.images[idx]) {
                      this.currImgIdx = idx;
                      this.currImg = this.images[idx];
                    } else if (this.images.length > 0) {
                      this.currImgIdx = this.images.length - 1;
                      this.currImg = this.images[this.currImgIdx];
                    } else {
                      this.currImg = null;
                      this.currImgIdx = 0;
                    }

                  case 25:
                  case "end":
                    return _context135.stop();
                }
              }
            }, _callee135, this);
          }));
        }
      }, {
        key: "loadImage",
        value: function loadImage(imgIdx) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee136() {
            var _this86 = this;

            return regeneratorRuntime.wrap(function _callee136$(_context136) {
              while (1) {
                switch (_context136.prev = _context136.next) {
                  case 0:
                    console.log('ImageboxComponent.setImagesUuids #195 loadImage(', imgIdx, ')');
                    return _context136.abrupt("return", new Promise(function (resolve, reject) {
                      if (imgIdx < 0) {
                        imgIdx = _this86.numImages - 1;
                      } else if (imgIdx > _this86.numImages - 1) {
                        imgIdx = 0;
                      }

                      if (!_this86.imageUuidList[imgIdx]) {
                        // Error
                        _this86.error = 'Mit dem Index ' + imgIdx + ' ist keine Datei hinterlegt!';
                        console.log('ImageboxComponent.setImagesUuids #205 loadImage(', imgIdx, ') reject');
                        reject(false);
                        return null;
                      }

                      console.log('ImageboxComponent #220', imgIdx, _this86.images[imgIdx]);

                      if (_this86.images[imgIdx] !== null && typeof _this86.images[imgIdx] === 'object' && 'img' in _this86.images[imgIdx] && 'loadingStatus' in _this86.images[imgIdx] && _this86.images[imgIdx].loadingStatus === HtmlImageLoadingStatus.Loaded) {
                        _this86.currImgIdx = imgIdx;
                        _this86.currImg = _this86.images[imgIdx];
                        console.log('ImageboxComponent.setImagesUuids #215 loadImage(', imgIdx, ') resolve');
                        resolve(true);
                        return;
                      }

                      var uuid = _this86.imageUuidList[imgIdx];

                      if (_this86.images[imgIdx] === null) {
                        _this86.images[imgIdx] = {
                          uuid: uuid,
                          img: null,
                          loadingStatus: HtmlImageLoadingStatus.Pending,
                          isDeletable: true,
                          isEditable: true
                        };
                      } else {
                        _this86.images[imgIdx].loadingStatus = HtmlImageLoadingStatus.Pending;
                      }

                      _this86.dexie.images.where({
                        uuid: uuid
                      }).first().then(function (row) {
                        if (!row) {
                          _this86.error = 'In der Datenbank wurde kein Bild mit UUID ' + uuid + ' gefunden!';
                          return;
                        }

                        ++_this86.numImgFound;
                        _this86.images[imgIdx] = {
                          uuid: uuid,
                          name: row.name,
                          width: row.width,
                          height: row.height,
                          type: row.type,
                          desc: row.desc,
                          loadingStatus: HtmlImageLoadingStatus.Loading,
                          isDeletable: true,
                          isEditable: true,
                          img: new Image()
                        };

                        _this86.images[imgIdx].img.onload = function (ev) {
                          ++_this86.numImgLoaded;
                          ++_this86.numImgFinished;
                          _this86.currImgIdx = imgIdx;
                          _this86.currImg = _this86.images[imgIdx];
                          _this86.images[imgIdx].loadingStatus = HtmlImageLoadingStatus.Loaded;
                          console.log('ImageboxComponent.setImagesUuids #237 loadImage(', imgIdx, ') resolve');
                          console.log('successfull loaded ' + imgIdx + '=' + _this86.images[imgIdx].img.src);
                          resolve(true);
                        };

                        _this86.images[imgIdx].img.onerror = function (ev) {
                          ++_this86.numImgFinished;
                          _this86.images[imgIdx].loadingStatus = HtmlImageLoadingStatus.Error;
                          _this86.error = 'Bild ' + row.name + ' konnte nicht geladen werden!';
                          console.error('ImageboxComponent.setImagesUuids #243 loadImage(', imgIdx, ') reject');
                          console.error('row.data_url = ', row.data_url);
                          console.error(ev);
                          reject(false);
                        };

                        _this86.images[imgIdx].img.onabort = function (ev) {
                          ++_this86.numImgFinished;
                          _this86.images[imgIdx].loadingStatus = HtmlImageLoadingStatus.Aborted;
                          _this86.error = 'Der Ladeprozess für das Bild ' + row.name + ' wurde abgebrochen!';
                          console.error('ImageboxComponent.setImagesUuids #249 loadImage(', imgIdx, ') reject');
                          console.error(ev);
                          reject(false);
                        };

                        _this86.images[imgIdx].img.src = row.data_url.replace(/(\r\n|\n|\r)/gm, ''); // this.images[imgIdx].loadingStatus = HtmlImageLoadingStatus.Loaded;
                      })["catch"](function (reason) {
                        _this86.error = 'DB(Dexie) Afragefehler ' + JSON.stringify(reason || '');
                        console.error('#288 this.dexie.images.get(', uuid, ')');
                        console.error(reason);
                        reject(false);
                      });
                    }));

                  case 2:
                  case "end":
                    return _context136.stop();
                }
              }
            }, _callee136);
          }));
        }
      }]);

      return ImageboxComponent;
    }();

    ImageboxComponent.ctorParameters = function () {
      return [{
        type: _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_3__["DexieService"]
      }, {
        type: _data_services_images_service__WEBPACK_IMPORTED_MODULE_5__["ImagesService"]
      }, {
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_4__["NgbActiveModal"]
      }, {
        type: _angular_platform_browser__WEBPACK_IMPORTED_MODULE_6__["DomSanitizer"]
      }, {
        type: ngx_toastr__WEBPACK_IMPORTED_MODULE_7__["ToastrService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('currentImage', {
      "static": true
    })], ImageboxComponent.prototype, "currentImage", void 0);
    ImageboxComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-imagebox',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./imagebox.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/imagebox/imagebox.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./imagebox.component.scss */
      "./src/app/pages/invent-form/modals/imagebox/imagebox.component.scss"))["default"]]
    })], ImageboxComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.scss":
  /*!***************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.scss ***!
    \***************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsRaumListDoneRaumListDoneComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".modal-header.modal-header-with-links {\n  flex-direction: row-reverse;\n  display: flex;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3JhdW0tbGlzdC1kb25lL0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxccGFnZXNcXGludmVudC1mb3JtXFxtb2RhbHNcXHJhdW0tbGlzdC1kb25lXFxyYXVtLWxpc3QtZG9uZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3JhdW0tbGlzdC1kb25lL3JhdW0tbGlzdC1kb25lLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsMkJBQUE7RUFDQSxhQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvcmF1bS1saXN0LWRvbmUvcmF1bS1saXN0LWRvbmUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XHJcbiAgZGlzcGxheTogZmxleDtcclxufVxyXG4iLCIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xuICBkaXNwbGF5OiBmbGV4O1xufSJdfQ== */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.ts":
  /*!*************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.ts ***!
    \*************************************************************************************/

  /*! exports provided: RaumListDoneComponent */

  /***/
  function srcAppPagesInventFormModalsRaumListDoneRaumListDoneComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "RaumListDoneComponent", function () {
      return RaumListDoneComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _data_services_inventar_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../data-services/inventar.service */
    "./src/app/pages/invent-form/data-services/inventar.service.ts");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");

    var RaumListDoneComponent = /*#__PURE__*/function () {
      function RaumListDoneComponent(activeModal, inventarService, baseData) {
        _classCallCheck(this, RaumListDoneComponent);

        this.activeModal = activeModal;
        this.inventarService = inventarService;
        this.baseData = baseData;
        this.requestRestList = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.faSignOutAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faSignOutAlt"];
        this.faExchangeAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faExchangeAlt"];
        this.inventarListDone = [];
        this.inventarListGrouped = [];
        this.inventarDetailList = [];
        this.total = 0;
        this.pageNr = 1;
        this.pageSize = 0;
        this.totalPages = 0;
      }

      _createClass(RaumListDoneComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {}
      }, {
        key: "setPage",
        value: function setPage(pageNr, pageSize) {
          this.total = this.inventarListGrouped.length;
          this.pageSize = Math.max(1, Math.min(this.total, pageSize || this.pageSize || this.total));
          this.totalPages = Math.ceil(this.total / this.pageSize);
          this.pageNr = Math.min(this.totalPages, Math.max(1, pageNr));
          this.inventarListDone = this.inventarListGrouped.slice(Math.max(0, this.pageNr - 1) * this.pageSize, this.pageSize);
        }
      }, {
        key: "loadInventarByRuuid",
        value: function loadInventarByRuuid(ruuid, useJobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee137() {
            var _this87 = this;

            var jobid, groupedList;
            return regeneratorRuntime.wrap(function _callee137$(_context137) {
              while (1) {
                switch (_context137.prev = _context137.next) {
                  case 0:
                    jobid = useJobid || this.baseData.getCurrentJobid();
                    groupedList = [];
                    console.log('#54 getHello:', this.inventarService.getHello());
                    return _context137.abrupt("return", this.inventarService.getInventarListDoneByRaumUuid(ruuid, jobid).then(function (list) {
                      _this87.inventarDetailList = list;
                      console.log('loadInventarByRuuid #70 list: ', list);
                      _this87.inventarListGrouped = _this87.inventarDetailList.sort(function (a, b) {
                        return a.inventar.mcuuid > b.inventar.mcuuid ? -1 : a.inventar.mcuuid < b.inventar.mcuuid ? 1 : 0;
                      }).reduce(function (gList, item) {
                        console.log('loadInventarByRuuid #70 reduce list, currentItem ', item);

                        if (!item) {
                          return gList;
                        }

                        var l = gList.length;
                        var i = l - 1;
                        var artikelData = item.artikelData || {
                          Bezeichnung: '?[Fehlende Katalogdaten]',
                          Typ: ''
                        };

                        if (!l || gList[i].mcuuid !== item.inventar.mcuuid) {
                          gList[l] = {
                            mcuuid: item.inventar.mcuuid,
                            Bezeichnung: artikelData.Bezeichnung || '',
                            Typ: item.inventar.Typ || artikelData.Typ || '',
                            Menge: 1
                          };
                        } else {
                          gList[i].Menge++;
                        }

                        return gList;
                      }, groupedList);
                      return true;
                    }));

                  case 4:
                  case "end":
                    return _context137.stop();
                }
              }
            }, _callee137, this);
          }));
        }
      }, {
        key: "showRaumRestForm",
        value: function showRaumRestForm(e) {
          console.log('click showRaumDoneForm');
          this.activeModal.close();
          this.requestRestList.emit(this.raumDaten);
        }
      }, {
        key: "raum",
        set: function set(raum) {
          var _this88 = this;

          this.raumDaten = raum;
          this.loadInventarByRuuid(raum.uuid).then(function () {
            _this88.setPage(1);
          });
        }
      }]);

      return RaumListDoneComponent;
    }();

    RaumListDoneComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__["NgbActiveModal"]
      }, {
        type: _data_services_inventar_service__WEBPACK_IMPORTED_MODULE_2__["InventarService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_4__["BasedataService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], RaumListDoneComponent.prototype, "requestRestList", void 0);
    RaumListDoneComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-raum-list-done',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./raum-list-done.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./raum-list-done.component.scss */
      "./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.scss"))["default"]]
    })], RaumListDoneComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.scss":
  /*!***************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.scss ***!
    \***************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsRaumListRestRaumListRestComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".modal-header.modal-header-fb-align-right {\n  flex-direction: row-reverse;\n  display: flex;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3JhdW0tbGlzdC1yZXN0L0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxccGFnZXNcXGludmVudC1mb3JtXFxtb2RhbHNcXHJhdW0tbGlzdC1yZXN0XFxyYXVtLWxpc3QtcmVzdC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3JhdW0tbGlzdC1yZXN0L3JhdW0tbGlzdC1yZXN0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsMkJBQUE7RUFDQSxhQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvcmF1bS1saXN0LXJlc3QvcmF1bS1saXN0LXJlc3QuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci1mYi1hbGlnbi1yaWdodCB7XHJcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbn1cclxuIiwiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItZmItYWxpZ24tcmlnaHQge1xuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG4gIGRpc3BsYXk6IGZsZXg7XG59Il19 */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.ts":
  /*!*************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.ts ***!
    \*************************************************************************************/

  /*! exports provided: RaumListRestComponent */

  /***/
  function srcAppPagesInventFormModalsRaumListRestRaumListRestComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "RaumListRestComponent", function () {
      return RaumListRestComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _data_services_inventar_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../data-services/inventar.service */
    "./src/app/pages/invent-form/data-services/inventar.service.ts");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");

    var RaumListRestComponent = /*#__PURE__*/function () {
      function RaumListRestComponent(activeModal, inventarService, baseData) {
        _classCallCheck(this, RaumListRestComponent);

        this.activeModal = activeModal;
        this.inventarService = inventarService;
        this.baseData = baseData;
        this.requestDoneList = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.faSignOutAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faSignOutAlt"];
        this.faExchangeAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__["faExchangeAlt"];
        this.inventarListRest = [];
        this.inventarListGrouped = [];
        this.inventarDetailList = [];
        this.total = 0;
        this.pageNr = 1;
        this.pageSize = 0;
        this.totalPages = 0;
      }

      _createClass(RaumListRestComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {
          console.log('typeof this.activeModal.dismiss: ', this.activeModal.dismiss);
        }
      }, {
        key: "setPage",
        value: function setPage(pageNr, pageSize) {
          this.total = this.inventarListGrouped.length;
          this.pageSize = Math.max(1, Math.min(this.total, pageSize || this.pageSize || this.total));
          this.totalPages = Math.ceil(this.total / this.pageSize);
          this.pageNr = Math.min(this.totalPages, Math.max(1, pageNr));
          this.inventarListRest = this.inventarListGrouped.slice(Math.max(0, this.pageNr - 1) * this.pageSize, this.pageSize);
        }
      }, {
        key: "loadInventarByRuuid",
        value: function loadInventarByRuuid(ruuid, useJobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee138() {
            var _this89 = this;

            var jobid, groupedList;
            return regeneratorRuntime.wrap(function _callee138$(_context138) {
              while (1) {
                switch (_context138.prev = _context138.next) {
                  case 0:
                    jobid = useJobid || this.baseData.getCurrentJobid();
                    groupedList = [];
                    console.log('#54 getHello:', this.inventarService.getHello());
                    return _context138.abrupt("return", this.inventarService.getInventarListRestByRaumUuid(ruuid, jobid).then(function (list) {
                      _this89.inventarDetailList = list;
                      _this89.inventarListGrouped = _this89.inventarDetailList.sort(function (a, b) {
                        return a.inventar.mcuuid > b.inventar.mcuuid ? -1 : a.inventar.mcuuid < b.inventar.mcuuid ? 1 : 0;
                      }).reduce(function (gList, item) {
                        var l = gList.length;
                        var i = l - 1;

                        if (!l || gList[i].mcuuid !== item.inventar.mcuuid) {
                          gList[l] = {
                            mcuuid: item.inventar.mcuuid,
                            Bezeichnung: item.inventar.Bezeichnung || item.artikelData.Bezeichnung,
                            Typ: item.inventar.Typ || item.artikelData.Typ,
                            Menge: 1
                          };
                        } else {
                          gList[i].Menge++;
                        }

                        return gList;
                      }, groupedList);
                      return true;
                    }));

                  case 4:
                  case "end":
                    return _context138.stop();
                }
              }
            }, _callee138, this);
          }));
        }
      }, {
        key: "showRaumDoneForm",
        value: function showRaumDoneForm(e) {
          console.log('click showRaumDoneForm');
          this.activeModal.close();
          this.requestDoneList.emit(this.raumDaten);
        }
      }, {
        key: "raum",
        set: function set(raum) {
          var _this90 = this;

          this.raumDaten = raum;

          if (raum === null || raum === undefined || typeof raum === 'object' && !('uuid' in raum)) {
            // Do Nothing
            return;
          }

          this.loadInventarByRuuid(raum.uuid).then(function () {
            _this90.setPage(1);
          });
        }
      }]);

      return RaumListRestComponent;
    }();

    RaumListRestComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__["NgbActiveModal"]
      }, {
        type: _data_services_inventar_service__WEBPACK_IMPORTED_MODULE_2__["InventarService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_4__["BasedataService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], RaumListRestComponent.prototype, "requestDoneList", void 0);
    RaumListRestComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-raum-list-rest',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./raum-list-rest.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./raum-list-rest.component.scss */
      "./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.scss"))["default"]]
    })], RaumListRestComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/scanner/scanner.component.scss":
  /*!*************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/scanner/scanner.component.scss ***!
    \*************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsScannerScannerComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "input.bg-danger::-moz-placeholder {\n  color: #ffffff;\n}\n\ninput.bg-danger::placeholder {\n  color: #ffffff;\n}\n\n.scanner-view-port {\n  position: relative;\n  height: auto;\n  overflow-y: hidden;\n  width: 100%;\n}\n\nzxing-scanner::ng-deep video {\n  height: 5rem;\n  width: 100%;\n}\n\n#ScannerFocusRedLine {\n  position: absolute;\n  left: 5%;\n  width: 90%;\n  top: 50%;\n  border: 0;\n  border-top: 1rem solid rgba(255, 0, 0, 0.5);\n  margin-top: -0.5rem;\n}\n\n#barcodeChangedPart {\n  color: blue;\n}\n\n.with-pulse-effect {\n  -webkit-animation: enter-animation 2s ease;\n          animation: enter-animation 2s ease;\n}\n\n@-webkit-keyframes enter-animation {\n  0% {\n    box-shadow: 0px 0px 0px 0px #2382dc;\n    color: black;\n  }\n  100% {\n    box-shadow: 0px 0px 5px 25px rgba(35, 130, 220, 0);\n    color: blue;\n  }\n}\n\n@keyframes enter-animation {\n  0% {\n    box-shadow: 0px 0px 0px 0px #2382dc;\n    color: black;\n  }\n  100% {\n    box-shadow: 0px 0px 5px 25px rgba(35, 130, 220, 0);\n    color: blue;\n  }\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NjYW5uZXIvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxwYWdlc1xcaW52ZW50LWZvcm1cXG1vZGFsc1xcc2Nhbm5lclxcc2Nhbm5lci5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NjYW5uZXIvc2Nhbm5lci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGNBQUE7QUNBRjs7QUREQTtFQUNFLGNBQUE7QUNBRjs7QURHQTtFQUNFLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsV0FBQTtBQ0FGOztBREdBO0VBQ0UsWUFBQTtFQUNBLFdBQUE7QUNBRjs7QURHQTtFQUNFLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLDJDQUFBO0VBQ0EsbUJBQUE7QUNBRjs7QURHQTtFQUNFLFdBQUE7QUNBRjs7QURHQTtFQUNFLDBDQUFBO1VBQUEsa0NBQUE7QUNBRjs7QURJQTtFQUNFO0lBQ0UsbUNBQUE7SUFDQSxZQUFBO0VDREY7RURHQTtJQUNFLGtEQUFBO0lBQ0EsV0FBQTtFQ0RGO0FBQ0Y7O0FEUEE7RUFDRTtJQUNFLG1DQUFBO0lBQ0EsWUFBQTtFQ0RGO0VER0E7SUFDRSxrREFBQTtJQUNBLFdBQUE7RUNERjtBQUNGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NjYW5uZXIvc2Nhbm5lci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbnB1dC5iZy1kYW5nZXI6OnBsYWNlaG9sZGVyIHtcclxuICBjb2xvcjogI2ZmZmZmZjtcclxufVxyXG5cclxuLnNjYW5uZXItdmlldy1wb3J0IHtcclxuICBwb3NpdGlvbjpyZWxhdGl2ZTtcclxuICBoZWlnaHQ6YXV0bztcclxuICBvdmVyZmxvdy15OmhpZGRlbjtcclxuICB3aWR0aDoxMDAlO1xyXG59XHJcblxyXG56eGluZy1zY2FubmVyOjpuZy1kZWVwIHZpZGVvIHtcclxuICBoZWlnaHQ6NXJlbTtcclxuICB3aWR0aDoxMDAlO1xyXG59XHJcblxyXG4jU2Nhbm5lckZvY3VzUmVkTGluZSB7XHJcbiAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgbGVmdDo1JTtcclxuICB3aWR0aDo5MCU7XHJcbiAgdG9wOjUwJTtcclxuICBib3JkZXI6MDtcclxuICBib3JkZXItdG9wOjFyZW0gc29saWQgcmdiYSgyNTUsMCwwLC41KTtcclxuICBtYXJnaW4tdG9wOi0wLjVyZW1cclxufVxyXG5cclxuI2JhcmNvZGVDaGFuZ2VkUGFydCB7XHJcbiAgY29sb3I6Ymx1ZTtcclxufVxyXG5cclxuLndpdGgtcHVsc2UtZWZmZWN0IHtcclxuICBhbmltYXRpb246IGVudGVyLWFuaW1hdGlvbiAycyBlYXNlO1xyXG59XHJcblxyXG5cclxuQGtleWZyYW1lcyBlbnRlci1hbmltYXRpb24ge1xyXG4gIDAlIHtcclxuICAgIGJveC1zaGFkb3c6IDBweCAwcHggMHB4IDBweCByZ2JhKDM1LCAxMzAsIDIyMCwxKTtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICB9XHJcbiAgMTAwJSB7XHJcbiAgICBib3gtc2hhZG93OiAwcHggMHB4IDVweCAyNXB4IHJnYmEoMzUsIDEzMCwgMjIwLDApO1xyXG4gICAgY29sb3I6IGJsdWU7XHJcbiAgfVxyXG59XHJcbiIsImlucHV0LmJnLWRhbmdlcjo6cGxhY2Vob2xkZXIge1xuICBjb2xvcjogI2ZmZmZmZjtcbn1cblxuLnNjYW5uZXItdmlldy1wb3J0IHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBoZWlnaHQ6IGF1dG87XG4gIG92ZXJmbG93LXk6IGhpZGRlbjtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbnp4aW5nLXNjYW5uZXI6Om5nLWRlZXAgdmlkZW8ge1xuICBoZWlnaHQ6IDVyZW07XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4jU2Nhbm5lckZvY3VzUmVkTGluZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogNSU7XG4gIHdpZHRoOiA5MCU7XG4gIHRvcDogNTAlO1xuICBib3JkZXI6IDA7XG4gIGJvcmRlci10b3A6IDFyZW0gc29saWQgcmdiYSgyNTUsIDAsIDAsIDAuNSk7XG4gIG1hcmdpbi10b3A6IC0wLjVyZW07XG59XG5cbiNiYXJjb2RlQ2hhbmdlZFBhcnQge1xuICBjb2xvcjogYmx1ZTtcbn1cblxuLndpdGgtcHVsc2UtZWZmZWN0IHtcbiAgYW5pbWF0aW9uOiBlbnRlci1hbmltYXRpb24gMnMgZWFzZTtcbn1cblxuQGtleWZyYW1lcyBlbnRlci1hbmltYXRpb24ge1xuICAwJSB7XG4gICAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggMHB4ICMyMzgyZGM7XG4gICAgY29sb3I6IGJsYWNrO1xuICB9XG4gIDEwMCUge1xuICAgIGJveC1zaGFkb3c6IDBweCAwcHggNXB4IDI1cHggcmdiYSgzNSwgMTMwLCAyMjAsIDApO1xuICAgIGNvbG9yOiBibHVlO1xuICB9XG59Il19 */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/scanner/scanner.component.ts":
  /*!***********************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/scanner/scanner.component.ts ***!
    \***********************************************************************/

  /*! exports provided: bcLookupTyp, ScannerComponent */

  /***/
  function srcAppPagesInventFormModalsScannerScannerComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "bcLookupTyp", function () {
      return bcLookupTyp;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ScannerComponent", function () {
      return ScannerComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _zxing_library_esm_core_BarcodeFormat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @zxing/library/esm/core/BarcodeFormat */
    "./node_modules/@zxing/library/esm/core/BarcodeFormat.js");
    /* harmony import */


    var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! rxjs */
    "./node_modules/rxjs/_esm2015/index.js");
    /* harmony import */


    var _shared_services_data_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../../../../shared/services/data.service */
    "./src/app/shared/services/data.service.ts");
    /* harmony import */


    var _data_services_barcode_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! ../../data-services/barcode.service */
    "./src/app/pages/invent-form/data-services/barcode.service.ts");
    /* harmony import */


    var _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ../../../../shared/interfaces/dexie.interfaces */
    "./src/app/shared/interfaces/dexie.interfaces.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _data_services_images_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! ../../data-services/images.service */
    "./src/app/pages/invent-form/data-services/images.service.ts");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
    /*! ../../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _shared_services_variables_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(
    /*! ../../../../shared/services/variables.service */
    "./src/app/shared/services/variables.service.ts");

    var bcLookupTyp;

    (function (bcLookupTyp) {
      bcLookupTyp[bcLookupTyp["Neu"] = 0] = "Neu";
      bcLookupTyp[bcLookupTyp["Unbekannt"] = 1] = "Unbekannt";
      bcLookupTyp[bcLookupTyp["Raum"] = 2] = "Raum";
      bcLookupTyp[bcLookupTyp["Artikel"] = 3] = "Artikel";
      bcLookupTyp[bcLookupTyp["Inventar"] = 4] = "Inventar";
    })(bcLookupTyp || (bcLookupTyp = {}));

    var ScannerComponent = /*#__PURE__*/function () {
      function ScannerComponent( //    private readonly _dialog: MatDialo,
      activeModal, dataService, bcLookup, imageService, baseData, variables) {
        _classCallCheck(this, ScannerComponent);

        this.activeModal = activeModal;
        this.dataService = dataService;
        this.bcLookup = bcLookup;
        this.imageService = imageService;
        this.baseData = baseData;
        this.variables = variables;
        this.ngVersion = _angular_core__WEBPACK_IMPORTED_MODULE_1__["VERSION"].full;
        this.faCheck = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_8__["faCheck"];
        this.faRemove = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_8__["faTrashAlt"];
        this.currentDevice = null;
        this.onScan = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.formatsEnabled = [_zxing_library_esm_core_BarcodeFormat__WEBPACK_IMPORTED_MODULE_3__["default"].CODE_128 // , BarcodeFormat.DATA_MATRIX
        // , BarcodeFormat.EAN_13
        // , BarcodeFormat.QR_CODE
        ];
        this.allowBarcodeInput = false;
        this.scanResultHistory = [];
        this.torchEnabled = false;
        this.torchAvailable$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__["BehaviorSubject"](false);
        this.tryHarder = false;
      }

      _createClass(ScannerComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {
          var _this91 = this;

          this.jobid = this.baseData.getCurrentJobid();
          this.variables.get('manualBarcodeInput', false).then(function (status) {
            _this91.allowBarcodeInput = status;
          });
        }
      }, {
        key: "clearResult",
        value: function clearResult() {
          this.qrResultString = null;
          this.scanResultCurrent = null;
        }
      }, {
        key: "bctest",
        value: function bctest(test) {
          console.log({
            test: test
          });

          if (typeof test === 'string' && test.length) {
            this.onCodeResult(test);
          }
        }
      }, {
        key: "applyResult",
        value: function applyResult() {
          var emitScanResult = {
            barcode: this.scanBCLookupSimpleResult.barcode,
            length: this.scanBCLookupSimpleResult.barcode.length,
            valid: true,
            result: this.scanBCLookupSimpleResult
          };
          console.log('apply applyResult ', {
            emitScanResult: emitScanResult
          });
          this.onScan.emit(emitScanResult);
        }
      }, {
        key: "bcLookupTypToString",
        value: function bcLookupTypToString(typ) {
          return bcLookupTyp[typ];
        }
      }, {
        key: "showResult",
        value: function showResult(result) {
          var _this92 = this;

          this.scanBCLookupSimpleResult = result;
          this.scannedBarcodeInfoImg = result.image;
          var bezeichnung = '';

          switch (result.lookupResultTable) {
            case _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_7__["LookupResultTable"].None:
              bezeichnung = 'Neuer Barcode';
              this.scannedBarcodeRsltTyp = bcLookupTyp.Neu;
              this.scannedBarcodeInfos = this.bcInfoToString({
                Gefunden: 'Neuer oder unbekannter Barcode'
              });
              break;

            case _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_7__["LookupResultTable"].Raeume:
              var g = result.gebaeude.Gebaeude || result.gebaeude.Adresse;

              if (g) {
                bezeichnung += "".concat(g, " :: ");
              }

              bezeichnung += result.raum.Raum;

              if (result.raum.Raumbezeichnung) {
                bezeichnung += ' / ' + result.raum.Raumbezeichnung;
              }

              if (result.raum.Etage) {
                bezeichnung += ' :: ' + result.raum.Etage;
              }

              bezeichnung = result.gebaeude.Gebaeude || result.gebaeude.Adresse;
              this.scannedBarcodeRsltTyp = bcLookupTyp.Raum;
              this.scannedBarcodeInfos = bezeichnung;
              this.bcInfoToString({
                Gefunden: 'Raum',
                Gebaeude: result.gebaeude.Gebaeude || result.gebaeude.Adresse,
                Raum: result.raum.Raum,
                Bezg: result.raum.Raumbezeichnung,
                Etage: result.raum.Etage
              });
              break;

            case _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_7__["LookupResultTable"].Inventar:
              if (result.artikelData.Typ) {
                bezeichnung = result.artikelData.Typ + ' :: ';
              }

              bezeichnung += result.artikelData.Bezeichnung;

              if (result.artikelData.Farbe) {
                bezeichnung += ' :: ' + result.artikelData.Farbe;
              }

              if (result.artikelData.Groesse) {
                bezeichnung += ' :: ' + result.artikelData.Groesse;
              }

              if (result.artikelData.Kategorie) {
                bezeichnung += ' :: ' + result.artikelData.Kategorie;
              }

              this.scannedBarcodeRsltTyp = bcLookupTyp.Inventar;
              this.scannedBarcodeInfos = bezeichnung;
              this.bcInfoToString({
                Gefunden: 'Inventar',
                InventarNr: result.inventar.iv_nr,
                Bezeichnung: result.artikelData.Bezeichnung,
                Typ: result.artikelData.Typ,
                Farbe: result.artikelData.Farbe,
                Groesse: result.artikelData.Groesse,
                Kategorie: result.artikelData.Kategorie
              });
              break;

            case _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_7__["LookupResultTable"].ObjektKatalogMandant:
              bezeichnung = result.artikelData.Bezeichnung;

              if (result.artikelData.Farbe) {
                bezeichnung += ' :: ' + result.artikelData.Farbe;
              }

              if (result.artikelData.Groesse) {
                bezeichnung += ' :: ' + result.artikelData.Groesse;
              }

              if (result.artikelData.Kategorie) {
                bezeichnung += ' :: ' + result.artikelData.Kategorie;
              }

              this.scannedBarcodeRsltTyp = bcLookupTyp.Artikel;
              this.scannedBarcodeInfos = bezeichnung;
              this.bcInfoToString({
                Gefunden: 'Artikel',
                Bezeichnung: result.artikelData.Bezeichnung,
                Typ: result.artikelData.Typ,
                Farbe: result.artikelData.Farbe,
                Groesse: result.artikelData.Groesse,
                Kategorie: result.artikelData.Kategorie
              });
              break;

            default:
              bezeichnung = 'Unerwartetes Ergebnis';
              this.scannedBarcodeRsltTyp = bcLookupTyp.Unbekannt;
              this.scannedBarcodeInfos = bezeichnung;
              this.bcInfoToString({
                Gefunden: 'Unerwartetes Ergebnis',
                Objekt: _shared_interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_7__["LookupResultTable"][result.lookupResultTable]
              });
          }

          var newHistoryItem = this.scanResultCurrent ? Object.assign({}, this.scanResultCurrent) : null;
          this.scanResultCurrent = {
            typ: this.scannedBarcodeRsltTyp,
            typToString: bcLookupTyp[this.scannedBarcodeRsltTyp],
            barcode: this.scannedBarcode,
            infos: this.scannedBarcodeInfos,
            image: this.scannedBarcodeInfoImg,
            result: result
          };
          var lastResult = this.scanResultCurrent;

          if (this.scannedBarcodeInfoImg && this.scannedBarcodeInfoImg.mcuuid) {
            this.loadImageByMcuuid(this.scannedBarcodeInfoImg.mcuuid).then(function (img) {
              if (_this92.scanResultCurrent === lastResult) {
                _this92.scanResultCurrent.image.data_url = img.data_url;
              } else {
                var lastResultFound = _this92.scanResultHistory.find(function (r) {
                  return r === lastResult;
                });

                if (lastResultFound) {
                  lastResultFound.image.data_url = img.data_url;
                }
              }
            });
          }

          this.addHistoryResult(newHistoryItem);
        }
      }, {
        key: "addHistoryResult",
        value: function addHistoryResult(result) {
          if (result) {
            this.scanResultHistory.unshift(result);

            while (this.scanResultHistory.length > 10) {
              this.scanResultHistory.pop();
            }
          }

          return this.scanResultHistory.length;
        }
      }, {
        key: "removeResult",
        value: function removeResult(result) {
          this.scanResultHistory = this.scanResultHistory.filter(function (r) {
            return r !== result;
          });
          console.log('remove Result', {
            result: result
          }); // alert(JSON.stringify(result));
        }
      }, {
        key: "applyHistoryResult",
        value: function applyHistoryResult(result) {
          var emitScanResult = {
            barcode: this.scanBCLookupSimpleResult.barcode,
            length: this.scanBCLookupSimpleResult.barcode.length,
            valid: true,
            result: this.scanBCLookupSimpleResult
          };
          console.log('apply applyHistoryResult', {
            emitScanResult: emitScanResult
          });
          this.onScan.emit(emitScanResult);
        }
      }, {
        key: "clearHistory",
        value: function clearHistory() {
          this.scanResultHistory = [];
        }
      }, {
        key: "onCamerasFound",
        value: function onCamerasFound(devices) {
          this.availableDevices = devices; // this.allowBarcodeInput = false;

          this.hasDevices = Boolean(devices && devices.length);

          if (this.hasDevices) {
            var _iterator7 = _createForOfIteratorHelper(this.availableDevices),
                _step7;

            try {
              for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {
                var dev = _step7.value;
                console.log('found camera mediaDeviceInfo: ', dev);
              }
            } catch (err) {
              _iterator7.e(err);
            } finally {
              _iterator7.f();
            }
          }
        }
      }, {
        key: "bcInfoToString",
        value: function bcInfoToString(json) {
          return JSON.stringify(json).substr(1).split('').slice(0, -1).join('');
          var tbl = '<table>';

          for (var _i13 = 0, _Object$keys9 = Object.keys(json); _i13 < _Object$keys9.length; _i13++) {
            var k = _Object$keys9[_i13];
            tbl += '<tr><th>' + k + '</th><td>' + json[k] + '</td>';
          }

          tbl += '</table>';
          return tbl;
        }
      }, {
        key: "onCodeResult",
        value: function onCodeResult(resultString) {
          var _this93 = this;

          // const resultString = '0000037536';
          // const oldBarcode: string = this.scannedBarcode || '';
          this.scannedBarcode = resultString;
          this.scannedBarcodeInfos = '';
          this.scannedBarcodeInfoImg = null;
          this.bcLookup.fullLookup(resultString, this.jobid).then(function (result) {
            _this93.showResult(result);
          });
        }
      }, {
        key: "loadImageByMcuuid",
        value: function loadImageByMcuuid(mcuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee139() {
            return regeneratorRuntime.wrap(function _callee139$(_context139) {
              while (1) {
                switch (_context139.prev = _context139.next) {
                  case 0:
                    console.log('called loadImageByGcuuid', mcuuid);

                    if (!mcuuid) {
                      _context139.next = 5;
                      break;
                    }

                    return _context139.abrupt("return", this.imageService.getImageByMcuuid(mcuuid).then(function (image) {
                      return image;
                    })["catch"](function (err) {
                      console.error(err);
                      return null;
                    }));

                  case 5:
                    return _context139.abrupt("return", null);

                  case 6:
                  case "end":
                    return _context139.stop();
                }
              }
            }, _callee139, this);
          }));
        }
      }, {
        key: "onDeviceSelectChange",
        value: function onDeviceSelectChange(selected) {
          var device = this.availableDevices.find(function (x) {
            return x.deviceId === selected;
          });
          this.currentDevice = device || null; // this.allowBarcodeInput = !device;
        }
      }, {
        key: "openFormatsDialog",
        value: function openFormatsDialog() {
          var data = {
            formatsEnabled: this.formatsEnabled
          };
        }
      }, {
        key: "onHasPermission",
        value: function onHasPermission(has) {
          this.hasPermission = has;
        }
      }, {
        key: "openInfoDialog",
        value: function openInfoDialog() {
          var data = {
            hasDevices: this.hasDevices,
            hasPermission: this.hasPermission
          };
        }
      }, {
        key: "onTorchCompatible",
        value: function onTorchCompatible(isCompatible) {
          this.torchAvailable$.next(isCompatible || false);
        }
      }, {
        key: "toggleTorch",
        value: function toggleTorch() {
          this.torchEnabled = !this.torchEnabled;
        }
      }, {
        key: "toggleTryHarder",
        value: function toggleTryHarder() {
          this.tryHarder = !this.tryHarder;
        }
      }]);

      return ScannerComponent;
    }();

    ScannerComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_5__["DataService"]
      }, {
        type: _data_services_barcode_service__WEBPACK_IMPORTED_MODULE_6__["BarcodeService"]
      }, {
        type: _data_services_images_service__WEBPACK_IMPORTED_MODULE_9__["ImagesService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_10__["BasedataService"]
      }, {
        type: _shared_services_variables_service__WEBPACK_IMPORTED_MODULE_11__["VariablesService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('scanner', {
      "static": true
    })], ScannerComponent.prototype, "scanner", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('barcodeChangedPart', {
      "static": true
    })], ScannerComponent.prototype, "barcodeChangedPart", void 0);
    ScannerComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-scanner',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./scanner.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/scanner/scanner.component.html"))["default"],
      animations: [],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./scanner.component.scss */
      "./src/app/pages/invent-form/modals/scanner/scanner.component.scss"))["default"]]
    })], ScannerComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.scss":
  /*!*****************************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.scss ***!
    \*****************************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsSelectCreateArtikelSelectCreateArtikelComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".modal-header.modal-header-with-links {\n  display: flex;\n  flex-direction: row-reverse;\n}\n\n.card-body,\n.card-footer {\n  padding: 0.5rem;\n}\n\n.artikel-form .input-group-prepend .input-group-text {\n  min-width: 4rem;\n}\n\n.artikel-form.artikel-form-kunst .input-group-prepend .input-group-text {\n  min-width: 5.5rem;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1jcmVhdGUtYXJ0aWtlbC9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzZWxlY3QtY3JlYXRlLWFydGlrZWxcXHNlbGVjdC1jcmVhdGUtYXJ0aWtlbC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1jcmVhdGUtYXJ0aWtlbC9zZWxlY3QtY3JlYXRlLWFydGlrZWwuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsMkJBQUE7QUNDRjs7QURFQTs7RUFFRSxlQUFBO0FDQ0Y7O0FERUE7RUFDRSxlQUFBO0FDQ0Y7O0FERUE7RUFDRSxpQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1jcmVhdGUtYXJ0aWtlbC9zZWxlY3QtY3JlYXRlLWFydGlrZWwuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcclxufVxyXG5cclxuLmNhcmQtYm9keSxcclxuLmNhcmQtZm9vdGVyIHtcclxuICBwYWRkaW5nOiAwLjVyZW07XHJcbn1cclxuXHJcbi5hcnRpa2VsLWZvcm0gLmlucHV0LWdyb3VwLXByZXBlbmQgLmlucHV0LWdyb3VwLXRleHQge1xyXG4gIG1pbi13aWR0aDo0cmVtO1xyXG59XHJcblxyXG4uYXJ0aWtlbC1mb3JtLmFydGlrZWwtZm9ybS1rdW5zdCAuaW5wdXQtZ3JvdXAtcHJlcGVuZCAuaW5wdXQtZ3JvdXAtdGV4dCB7XHJcbiAgbWluLXdpZHRoOjUuNXJlbTtcclxufVxyXG4iLCIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xufVxuXG4uY2FyZC1ib2R5LFxuLmNhcmQtZm9vdGVyIHtcbiAgcGFkZGluZzogMC41cmVtO1xufVxuXG4uYXJ0aWtlbC1mb3JtIC5pbnB1dC1ncm91cC1wcmVwZW5kIC5pbnB1dC1ncm91cC10ZXh0IHtcbiAgbWluLXdpZHRoOiA0cmVtO1xufVxuXG4uYXJ0aWtlbC1mb3JtLmFydGlrZWwtZm9ybS1rdW5zdCAuaW5wdXQtZ3JvdXAtcHJlcGVuZCAuaW5wdXQtZ3JvdXAtdGV4dCB7XG4gIG1pbi13aWR0aDogNS41cmVtO1xufSJdfQ== */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.ts":
  /*!***************************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.ts ***!
    \***************************************************************************************************/

  /*! exports provided: ArtikelFormType, SelectCreateArtikelComponent */

  /***/
  function srcAppPagesInventFormModalsSelectCreateArtikelSelectCreateArtikelComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ArtikelFormType", function () {
      return ArtikelFormType;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SelectCreateArtikelComponent", function () {
      return SelectCreateArtikelComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _data_services_artikel_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../data-services/artikel.service */
    "./src/app/pages/invent-form/data-services/artikel.service.ts");
    /* harmony import */


    var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! rxjs */
    "./node_modules/rxjs/_esm2015/index.js");
    /* harmony import */


    var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! rxjs/operators */
    "./node_modules/rxjs/_esm2015/operators/index.js");
    /* harmony import */


    var _data_services_hersteller_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ../../data-services/hersteller.service */
    "./src/app/pages/invent-form/data-services/hersteller.service.ts");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! ../../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _shared_services_data_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! ../../../../shared/services/data.service */
    "./src/app/shared/services/data.service.ts");

    var states = [];
    var stateNames = [];
    var artikelGruppen = [];
    var artikelKategorien = [];
    var artikelTypen = [];
    var artikelGroessen = [];
    var artikelFarben = [];
    var gruppenKategorien = [];
    var ArtikelFormType;

    (function (ArtikelFormType) {
      ArtikelFormType[ArtikelFormType["Inventar"] = 0] = "Inventar";
      ArtikelFormType[ArtikelFormType["Kunst"] = 1] = "Kunst";
    })(ArtikelFormType || (ArtikelFormType = {}));

    var SelectCreateArtikelComponent = /*#__PURE__*/function () {
      function SelectCreateArtikelComponent( // private modalService: NgbModal,
      activeModal, artikelService, herstellerService, baseData, dataService) {
        var _this94 = this;

        _classCallCheck(this, SelectCreateArtikelComponent);

        this.activeModal = activeModal;
        this.artikelService = artikelService;
        this.herstellerService = herstellerService;
        this.baseData = baseData;
        this.dataService = dataService;
        this.faSearch = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__["faSearch"];
        this.faSignOutAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__["faSignOutAlt"];
        this.ArtikelExistsStatus = -1;
        this.numBezeichnungExists = -1;
        this.artikelDaten = {
          mid: 0,
          mcid: 0,
          mcuuid: '',
          gcid: 0,
          gcuuid: '',
          Bezeichnung: '',
          Gruppe: '',
          Kategorie: '',
          Typ: '',
          Hersteller: '',
          huuid: '',
          Groesse: '',
          Farbe: ''
        };
        this.focus$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.click$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.focusGrp$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.clickGrp$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.focusKtg$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.clickKtg$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.focusTyp$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.clickTyp$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.focusGrs$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.clickGrs$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.focusFa$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.clickFa$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.formIsValid = false;
        this.formError = '';
        this.existsStatus = {
          Hersteller: {
            term: '',
            count: 0
          },
          Bezeichnung: {
            term: '',
            count: 0
          },
          Typ: {
            term: '',
            count: 0
          },
          Groesse: {
            term: '',
            count: 0
          },
          Farbe: {
            term: '',
            count: 0
          }
        };
        this.herstellerExistsStatus = {
          term: '',
          uuid: '',
          data: null,
          isQuerying: false
        };
        this.delayedTrigger = {};
        this.listExistingArticleMatches = [];
        this.listExistingArticlePage = [];
        this.pageSize = 8;
        this.collectionSize = 0;
        this.page = 1;
        this.maxSize = 6;
        this.artikelSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.artikelSearching = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.artikelCreated = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.herstellerChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.gruppeChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.inputChanging = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.inputChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.formTitle = 'Neuen Artikel anlegen';
        this.formType = ArtikelFormType.Inventar;
        this.formTypeInventar = ArtikelFormType.Inventar;
        this.formTypeKunst = ArtikelFormType.Kunst;
        this.formLabels = {
          Hersteller: {
            isVisible: true,
            label: 'Hersteller',
            labelShort: 'HST',
            placeholder: 'Hersteller'
          },
          Gruppe: {
            isVisible: true,
            label: 'Gruppe',
            labelShort: 'GRP',
            placeholder: 'Gruppe'
          },
          Kategorie: {
            isVisible: true,
            label: 'Kategorie',
            labelShort: 'KTG',
            placeholder: 'Kategorie'
          },
          Bezeichnung: {
            isVisible: true,
            label: 'Bezeichnung',
            labelShort: 'BEZ',
            placeholder: 'Artikel-Bezeichnung'
          },
          Typ: {
            isVisible: true,
            label: 'Typ',
            labelShort: 'TYP',
            placeholder: 'Artikel-Typ'
          },
          Groesse: {
            isVisible: true,
            label: 'Groesse',
            labelShort: 'Größe',
            placeholder: 'Größe / Abmessungen'
          },
          Farbe: {
            isVisible: true,
            label: 'Farbe',
            labelShort: 'Farbe',
            placeholder: 'Artikelfarbe'
          }
        };
        this.formLabelsInventar = this.formLabels;

        this.formatter = function (state) {
          return state;
        };

        this.search = function (text$) {
          var isPopupOpen = typeof _this94.instance === 'object' && _this94.instance instanceof _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbTypeahead"] ? _this94.instance.isPopupOpen() : false;
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this94.click$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !isPopupOpen;
          }));

          var inputFocus$ = _this94.focus$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? stateNames : stateNames.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
        };

        this.searchGruppen = function (text$) {
          var isPopupOpen = typeof _this94.instanceGrp === 'object' && _this94.instanceGrp instanceof _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbTypeahead"] ? _this94.instanceGrp.isPopupOpen() : false;
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this94.clickGrp$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !isPopupOpen;
          }));

          var inputFocus$ = _this94.focusGrp$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? artikelGruppen : artikelGruppen.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
        };

        this.searchKategorien = function (text$) {
          var isPopupOpen = typeof _this94.instanceKtg === 'object' && _this94.instanceKtg instanceof _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbTypeahead"] ? _this94.instanceKtg.isPopupOpen() : false;
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this94.clickKtg$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !isPopupOpen;
          }));

          var inputFocus$ = _this94.focusKtg$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? artikelKategorien : artikelKategorien.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
        };

        this.searchTypen = function (text$) {
          var isPopupOpen = typeof _this94.instanceTyp === 'object' && _this94.instanceTyp instanceof _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbTypeahead"] ? _this94.instanceTyp.isPopupOpen() : false;
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this94.clickTyp$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !isPopupOpen;
          }));

          var inputFocus$ = _this94.focusTyp$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? artikelTypen : artikelTypen.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
        };

        this.searchGroessen = function (text$) {
          var isPopupOpen = typeof _this94.instanceGrs === 'object' && _this94.instanceGrs instanceof _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbTypeahead"] ? _this94.instanceGrs.isPopupOpen() : false;
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this94.clickGrs$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !isPopupOpen;
          }));

          var inputFocus$ = _this94.focusGrs$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? artikelGroessen : artikelGroessen.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
        };

        this.searchFarben = function (text$) {
          var isPopupOpen = typeof _this94.instanceFa === 'object' && _this94.instanceFa instanceof _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbTypeahead"] ? _this94.instanceFa.isPopupOpen() : false;
          var debouncedText$ = text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])());

          var clicksWithClosedPopup$ = _this94.clickFa$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function () {
            return !isPopupOpen;
          }));

          var inputFocus$ = _this94.focusFa$;
          return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["merge"])(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (term) {
            return (term === '' ? artikelFarben : artikelFarben.filter(function (item) {
              return new RegExp(term, 'mi').test(item);
            })).slice(0, 10);
          }));
        };
      }

      _createClass(SelectCreateArtikelComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {
          var _this95 = this;

          this.herstellerService.getAllHerstellerWithUuids().then(function (list) {
            while (states.length > 0) {
              states.pop();
              stateNames.pop();
            }

            list.forEach(function (item) {
              states.push(item);
              stateNames.push(item.Hersteller);
            });
            console.log('#118 ngOnInit', {
              states: states,
              stateNames: stateNames
            });
          });
          this.artikelService.getGroupedArtikelGruppenKategorien().then(function (list) {
            gruppenKategorien.length = 0;
            list.forEach(function (itm) {
              return gruppenKategorien.push(itm);
            });
          });
          this.artikelService.getGroupedArtikelGruppen().then(function (list) {
            list.forEach(function (it) {
              return artikelGruppen.push(it);
            });
          });
          this.artikelService.getGroupedArtikelKategorien().then(function (list) {
            list.forEach(function (it) {
              return artikelKategorien.push(it);
            });
          });
          this.artikelService.getGroupedArtikelProperties('Typ').then(function (list) {
            list.forEach(function (it) {
              return artikelTypen.push(it);
            });
          });
          this.artikelService.getGroupedArtikelFarben().then(function (list) {
            list.forEach(function (it) {
              return artikelFarben.push(it);
            });
          });
          this.artikelService.getGroupedArtikelGroessen().then(function (list) {
            list.forEach(function (it) {
              return artikelGroessen.push(it);
            });
          });
          this.herstellerChanged.subscribe(function () {
            _this95.checkHersteller().then(function () {
              _this95.inputChanged.emit(); // this.rebuildTypeaheadGruppen();


              _this95.rebuildTypeaheadFarben(); // this.rebuildTypeaheadKategorien();


              _this95.rebuildTypeaheadTypen();
            });
          });
          this.gruppeChanged.subscribe(function (gruppe) {
            _this95.rebuildTypeaheadKategorien(gruppe);

            _this95.inputChanged.emit();
          });
          this.inputChanging.subscribe(function () {
            _this95.delegateListArticleMatches(3000);
          });
          this.inputChanged.subscribe(function () {
            // this.checkIfArtikelExistsGlobal();
            // this.checkIfArtikelExistsMandant();
            _this95.delegateListArticleMatches(500);

            if (_this95.artikelDaten.Kategorie === 'Kunst' && _this95.formType !== ArtikelFormType.Kunst) {
              _this95.setKunstFormLabels();
            } else if (_this95.artikelDaten.Kategorie !== 'Kunst' && _this95.formType === ArtikelFormType.Kunst) {
              _this95.setInventarFormLabels();
            }
          });
        }
      }, {
        key: "setFormType",
        value: function setFormType(type) {
          this.formType = type;

          if (type === ArtikelFormType.Inventar) {
            this.formTitle = 'Neuen Artikel anlegen';
            this.setInventarFormLabels();
          } else if (type === ArtikelFormType.Kunst) {
            this.formTitle = 'Neues Kunstobjekt anlegen';
            this.setKunstForm({
              Kategorie: 'Kunst'
            });
          }
        }
      }, {
        key: "setInventarFormLabels",
        value: function setInventarFormLabels() {
          for (var lbl in Object.keys(this.formLabelsInventar)) {
            if (this.formLabelsInventar.hasOwnProperty(lbl)) {
              this.formLabels[lbl].isVisible = this.formLabelsInventar[lbl].isVisible;
              this.formLabels[lbl].label = this.formLabelsInventar[lbl].label;
              this.formLabels[lbl].labelShort = this.formLabelsInventar[lbl].labelShort;
            }
          }
        }
      }, {
        key: "setKunstForm",
        value: function setKunstForm(vals) {
          this.setKunstFormLabels();

          if (vals) {
            this.setFormValues(vals);
          }
        }
      }, {
        key: "setKunstFormLabels",
        value: function setKunstFormLabels() {
          this.formLabels.Bezeichnung.label = 'Titel';
          this.formLabels.Bezeichnung.labelShort = 'Titel';
          this.formLabels.Bezeichnung.placeholder = 'Titel';
          this.formLabels.Typ.label = 'Künstler';
          this.formLabels.Typ.labelShort = 'Künstler';
          this.formLabels.Typ.placeholder = 'Künstler';
          this.artikelDaten.Kategorie = 'Kunst';
        }
      }, {
        key: "setFormValues",
        value: function setFormValues(vals) {
          for (var fld in vals) {
            if (vals.hasOwnProperty(fld) && this.artikelDaten[fld]) {
              this.artikelDaten[fld] = vals[fld];
            }
          }
        }
      }, {
        key: "getWhereInputsOf",
        value: function getWhereInputsOf(artikelProperties) {
          var _this96 = this;

          var daten = Object.assign({}, this.artikelDaten);
          console.log('#201 getWhereInputsOf', {
            artikelProperties: artikelProperties,
            daten: daten,
            artikelDaten: this.artikelDaten
          });
          var where = artikelProperties.filter(function (p) {
            var hasInput = p in daten && daten[p] !== 0 && daten[p] !== '' && !!daten[p];
            console.log('#206 getWhereInputsOf', {
              p: p,
              hasInput: hasInput,
              daten: daten,
              artikelDaten: Object.assign({}, _this96.artikelDaten),
              value: _this96.artikelDaten[p],
              dvalue: daten[p]
            });
            return hasInput;
          }).reduce(function (o, p) {
            o[p] = _this96.artikelDaten[p];
            return o;
          }, {});
          console.log('#210 getWhereInputsOf', {
            artikelProperties: artikelProperties,
            where: where,
            artikelDaten: this.artikelDaten
          });
          return where;
        }
      }, {
        key: "rebuildTypeaheadGruppen",
        value: function rebuildTypeaheadGruppen() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee140() {
            var where;
            return regeneratorRuntime.wrap(function _callee140$(_context140) {
              while (1) {
                switch (_context140.prev = _context140.next) {
                  case 0:
                    where = this.getWhereInputsOf(['huuid']);
                    this.artikelService.getGroupedArtikelGruppen(where).then(function (list) {
                      artikelGruppen.length = 0;
                      list.forEach(function (it) {
                        return artikelGruppen.push(it);
                      });
                    });

                  case 2:
                  case "end":
                    return _context140.stop();
                }
              }
            }, _callee140, this);
          }));
        }
      }, {
        key: "rebuildTypeaheadKategorien",
        value: function rebuildTypeaheadKategorien(gruppe) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee141() {
            var grpKategorien, buffer;
            return regeneratorRuntime.wrap(function _callee141$(_context141) {
              while (1) {
                switch (_context141.prev = _context141.next) {
                  case 0:
                    grpKategorien = gruppenKategorien.find(function (itm) {
                      return itm.gruppe === gruppe;
                    });

                    if (!(gruppe && grpKategorien && grpKategorien.kategorien.length)) {
                      _context141.next = 5;
                      break;
                    }

                    artikelKategorien.length = 0;
                    grpKategorien.kategorien.forEach(function (ktg) {
                      return artikelKategorien.push(ktg);
                    });
                    return _context141.abrupt("return");

                  case 5:
                    buffer = [];
                    gruppenKategorien.forEach(function (itm) {
                      itm.kategorien.forEach(function (ktg) {
                        if (ktg && artikelKategorien.indexOf(ktg) === -1) {
                          buffer.push(ktg);
                        }
                      });
                    });
                    artikelKategorien.length = 0;
                    buffer.sort(function (a, b) {
                      return a.toLowerCase() < b.toLowerCase() ? -1 : 1;
                    }).forEach(function (ktg) {
                      return artikelKategorien.push(ktg);
                    });
                    return _context141.abrupt("return");

                  case 10:
                  case "end":
                    return _context141.stop();
                }
              }
            }, _callee141);
          }));
        }
      }, {
        key: "rebuildTypeaheadTypen",
        value: function rebuildTypeaheadTypen() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee142() {
            var where;
            return regeneratorRuntime.wrap(function _callee142$(_context142) {
              while (1) {
                switch (_context142.prev = _context142.next) {
                  case 0:
                    where = this.getWhereInputsOf(['huuid']);
                    this.artikelService.getGroupedArtikelTypen(where).then(function (list) {
                      artikelTypen.length = 0;
                      list.forEach(function (it) {
                        return artikelTypen.push(it);
                      });
                    });

                  case 2:
                  case "end":
                    return _context142.stop();
                }
              }
            }, _callee142, this);
          }));
        }
      }, {
        key: "rebuildTypeaheadGroessen",
        value: function rebuildTypeaheadGroessen() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee143() {
            var where;
            return regeneratorRuntime.wrap(function _callee143$(_context143) {
              while (1) {
                switch (_context143.prev = _context143.next) {
                  case 0:
                    where = this.getWhereInputsOf(['huuid']);
                    this.artikelService.getGroupedArtikelGroessen(where).then(function (list) {
                      artikelGroessen.length = 0;
                      list.forEach(function (it) {
                        return artikelGroessen.push(it);
                      });
                    });

                  case 2:
                  case "end":
                    return _context143.stop();
                }
              }
            }, _callee143, this);
          }));
        }
      }, {
        key: "rebuildTypeaheadFarben",
        value: function rebuildTypeaheadFarben() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee144() {
            var where;
            return regeneratorRuntime.wrap(function _callee144$(_context144) {
              while (1) {
                switch (_context144.prev = _context144.next) {
                  case 0:
                    where = this.getWhereInputsOf(['huuid']);
                    this.artikelService.getGroupedArtikelFarben(where).then(function (list) {
                      artikelFarben.length = 0;
                      list.forEach(function (it) {
                        return artikelFarben.push(it);
                      });
                    });

                  case 2:
                  case "end":
                    return _context144.stop();
                }
              }
            }, _callee144, this);
          }));
        }
      }, {
        key: "delegateCheckHersteller",
        value: function delegateCheckHersteller() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee145() {
            var funcName, delayMS;
            return regeneratorRuntime.wrap(function _callee145$(_context145) {
              while (1) {
                switch (_context145.prev = _context145.next) {
                  case 0:
                    funcName = 'checkHersteller';
                    delayMS = 1000;

                    if (funcName in this.delayedTrigger) {
                      clearTimeout(this.delayedTrigger[funcName]);
                      delete this.delayedTrigger[funcName];
                    }

                    console.log('delegate checkHersteller');
                    this.delayedTrigger[funcName] = setTimeout(this.checkHersteller.bind(this), delayMS);

                  case 5:
                  case "end":
                    return _context145.stop();
                }
              }
            }, _callee145, this);
          }));
        }
      }, {
        key: "delegateListArticleMatches",
        value: function delegateListArticleMatches(delay) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee146() {
            var funcName, delayMS;
            return regeneratorRuntime.wrap(function _callee146$(_context146) {
              while (1) {
                switch (_context146.prev = _context146.next) {
                  case 0:
                    funcName = 'listArticleMatches';
                    delayMS = isNaN(delay) ? 2000 : delay;

                    if (funcName in this.delayedTrigger) {
                      clearTimeout(this.delayedTrigger[funcName]);
                      delete this.delayedTrigger[funcName];
                    }

                    console.log('delegate listArticleMatches');
                    this.delayedTrigger[funcName] = setTimeout(this.listArticleMatches.bind(this), delayMS);

                  case 5:
                  case "end":
                    return _context146.stop();
                }
              }
            }, _callee146, this);
          }));
        }
      }, {
        key: "checkHersteller",
        value: function checkHersteller() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee147() {
            var _this97 = this;

            var input, term;
            return regeneratorRuntime.wrap(function _callee147$(_context147) {
              while (1) {
                switch (_context147.prev = _context147.next) {
                  case 0:
                    console.log('called checkHersteller');
                    input = this.artikelDaten.Hersteller;
                    term = typeof input === 'string' ? input.trim() : '';

                    if (term !== this.herstellerExistsStatus.term) {
                      this.herstellerExistsStatus.term = term;
                      this.herstellerExistsStatus.data = null;
                      this.herstellerExistsStatus.uuid = null;
                    }

                    if (!term.length) {
                      _context147.next = 9;
                      break;
                    }

                    this.herstellerExistsStatus.isQuerying = true;
                    _context147.next = 8;
                    return this.herstellerService.getByName(term).then(function (data) {
                      _this97.herstellerExistsStatus.data = data;
                      _this97.herstellerExistsStatus.isQuerying = false;

                      if (data !== null && data !== undefined) {
                        _this97.herstellerExistsStatus.uuid = 'uuid' in data ? data.uuid : null;
                        console.log('#167 Hersteller exists: ', _this97.herstellerExistsStatus);
                        return true;
                      }

                      return false;
                    });

                  case 8:
                    return _context147.abrupt("return", _context147.sent);

                  case 9:
                    console.log('#172 Hersteller not found: ', term);
                    return _context147.abrupt("return", false);

                  case 11:
                  case "end":
                    return _context147.stop();
                }
              }
            }, _callee147, this);
          }));
        }
      }, {
        key: "listArticleMatches",
        value: function listArticleMatches() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee148() {
            var mid, oInputStatus, d, oCheckData, huuid, _i14, _arr3, k;

            return regeneratorRuntime.wrap(function _callee148$(_context148) {
              while (1) {
                switch (_context148.prev = _context148.next) {
                  case 0:
                    console.log('#175 called listArticleMatches');
                    mid = this.baseData.getCurrentMid();
                    oInputStatus = this.existsStatus;
                    d = this.artikelDaten;
                    oCheckData = {};
                    _context148.next = 7;
                    return this.checkHersteller();

                  case 7:
                    huuid = this.herstellerExistsStatus.uuid;

                    for (_i14 = 0, _arr3 = ['Bezeichnung', 'Typ', 'Kategorie', 'Gruppe', 'Groesse', 'Farbe']; _i14 < _arr3.length; _i14++) {
                      k = _arr3[_i14];

                      if (d[k]) {
                        oCheckData[k] = d[k];
                      }
                    }

                    _context148.next = 11;
                    return this.artikelService.listArticleByProperties(mid, huuid, oCheckData);

                  case 11:
                    this.listExistingArticleMatches = _context148.sent;
                    this.page = 1;
                    this.onPageChange(this.page);
                    console.log('finished listArticleMatches with results.count: ', this.listExistingArticleMatches.length, ' for', {
                      mid: mid,
                      huuid: huuid,
                      oCheckData: oCheckData
                    });

                  case 15:
                  case "end":
                    return _context148.stop();
                }
              }
            }, _callee148, this);
          }));
        }
      }, {
        key: "applyItemAsArtikel",
        value: function applyItemAsArtikel(item) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee149() {
            var artikelRef;
            return regeneratorRuntime.wrap(function _callee149$(_context149) {
              while (1) {
                switch (_context149.prev = _context149.next) {
                  case 0:
                    console.log('#361 applyItemAsArtikel', {
                      item: item
                    });

                    if (item.mcuuid) {
                      _context149.next = 11;
                      break;
                    }

                    _context149.next = 4;
                    return this.dataService.getArtikelRefByGcuuidMid(item.gcuuid, this.clientId);

                  case 4:
                    artikelRef = _context149.sent;

                    if (artikelRef) {
                      _context149.next = 9;
                      break;
                    }

                    _context149.next = 8;
                    return this.artikelService.insertArtikelRef(item);

                  case 8:
                    artikelRef = _context149.sent;

                  case 9:
                    item.mcid = artikelRef.mcid;
                    item.mcuuid = artikelRef.uuid;

                  case 11:
                    this.artikelSelected.emit({
                      uuid: item.mcuuid,
                      mcuuid: item.mcuuid,
                      name: item.Bezeichnung
                    });
                    return _context149.abrupt("return");

                  case 13:
                  case "end":
                    return _context149.stop();
                }
              }
            }, _callee149, this);
          }));
        }
      }, {
        key: "applyItemAsInput",
        value: function applyItemAsInput(item) {
          console.log('#367 applyItemAsInput', {
            item: item
          });
          this.artikelDaten.Hersteller = item.Hersteller;
          this.artikelDaten.huuid = item.huuid;
          this.artikelDaten.Bezeichnung = item.Bezeichnung;
          this.artikelDaten.Gruppe = item.Gruppe;
          this.artikelDaten.Kategorie = item.Kategorie;
          this.artikelDaten.Farbe = item.Farbe;
          this.artikelDaten.Groesse = item.Groesse;
          this.artikelDaten.Typ = item.Typ;
          return;
        }
      }, {
        key: "onInput",
        value: function onInput(event) {
          this.inputChanging.emit(event);
        }
      }, {
        key: "onChange",
        value: function onChange(event) {
          this.inputChanged.emit(event);
        }
      }, {
        key: "onSelectHersteller",
        value: function onSelectHersteller(selected) {
          var foundHst = states.find(function (st) {
            return st.Hersteller === selected.item;
          });
          this.artikelDaten.huuid = foundHst ? foundHst.uuid : null;
          console.log('SelectCreateArtikel onSelectHersteller this.artikelDaten.Hersteller: ', this.artikelDaten.Hersteller, {
            selected: selected,
            foundHst: foundHst
          });
          this.herstellerChanged.emit(selected.item);
        }
      }, {
        key: "onChangeHersteller",
        value: function onChangeHersteller(event) {
          console.log('Hersteller changed', event);

          if (event.target instanceof HTMLInputElement) {
            this.herstellerChanged.emit(event.target.value);
          }
        }
      }, {
        key: "onSelectGruppe",
        value: function onSelectGruppe(selected) {
          console.log('Gruppe selected', selected);
          this.gruppeChanged.emit(selected.item);
        }
      }, {
        key: "onChangeGruppe",
        value: function onChangeGruppe(event) {
          console.log('Gruppe changed', event);

          if (event.target instanceof HTMLInputElement) {
            this.gruppeChanged.emit(event.target.value);
          }
        }
      }, {
        key: "onSelectKategorie",
        value: function onSelectKategorie(selected) {
          console.log('Kategorien selected', selected);
          this.inputChanged.emit();
        }
      }, {
        key: "onChangeKategorie",
        value: function onChangeKategorie(event) {
          console.log('Kategorien changed', event);
          this.inputChanged.emit(event);
        }
      }, {
        key: "onSelectTypen",
        value: function onSelectTypen(selected) {
          console.log('Typen selected', selected);
          this.inputChanged.emit();
        }
      }, {
        key: "onChangeTyp",
        value: function onChangeTyp(event) {
          console.log('Typ changed', event);
          this.inputChanged.emit(event);
        }
      }, {
        key: "onSelectFarben",
        value: function onSelectFarben(selected) {
          console.log('Farben selected', selected);
          this.inputChanged.emit();
        }
      }, {
        key: "onSelectGroessen",
        value: function onSelectGroessen(selected) {
          console.log('Groessen selected', selected);
          this.inputChanged.emit();
        }
      }, {
        key: "getDismissReason",
        value: function getDismissReason(reason) {
          if (reason === _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["ModalDismissReasons"].ESC) {
            return 'by pressing ESC';
          } else if (reason === _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["ModalDismissReasons"].BACKDROP_CLICK) {
            return 'by clicking on a backdrop';
          } else {
            return "with: ".concat(reason);
          }
        }
      }, {
        key: "formValidate",
        value: function formValidate() {
          this.formIsValid = this.artikelDaten.Bezeichnung.length > 0 && this.numBezeichnungExists === 0;
          console.log('called formValidate return ', this.formIsValid);
          return this.formIsValid;
        }
      }, {
        key: "showSearchForm",
        value: function showSearchForm(event) {
          this.artikelSearching.emit(1);
          this.activeModal.close();
        }
      }, {
        key: "checkIfABezeichnungExistsGlobal",
        value: function checkIfABezeichnungExistsGlobal() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee150() {
            var jobid, numExists;
            return regeneratorRuntime.wrap(function _callee150$(_context150) {
              while (1) {
                switch (_context150.prev = _context150.next) {
                  case 0:
                    this.delegateListArticleMatches();
                    this.numBezeichnungExists = -1;
                    jobid = this.baseData.getCurrentJobid();
                    _context150.next = 5;
                    return this.artikelService.artikelBezeichnungExistsGlobal(this.artikelDaten.Bezeichnung, jobid);

                  case 5:
                    numExists = _context150.sent;
                    this.numBezeichnungExists = numExists;
                    this.formValidate();
                    console.log('check if Artikel exists: ', numExists, 'this.numBezeichnungExists', this.numBezeichnungExists);
                    this.listArticleMatches();
                    return _context150.abrupt("return", numExists);

                  case 11:
                  case "end":
                    return _context150.stop();
                }
              }
            }, _callee150, this);
          }));
        }
      }, {
        key: "checkIfArtikelExistsMandant",
        value: function checkIfArtikelExistsMandant() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee151() {
            var globalArtikelUuids, numExistsByMandant;
            return regeneratorRuntime.wrap(function _callee151$(_context151) {
              while (1) {
                switch (_context151.prev = _context151.next) {
                  case 0:
                    this.numBezeichnungExists = -1;
                    globalArtikelUuids = [];
                    _context151.next = 4;
                    return this.artikelService.artikelGlobalByBezeichnung(this.artikelDaten.Bezeichnung).then(function (items) {
                      globalArtikelUuids = items.map(function (item) {
                        return item.uuid;
                      });
                    });

                  case 4:
                    if (!(globalArtikelUuids.length === 0)) {
                      _context151.next = 7;
                      break;
                    }

                    this.numBezeichnungExists = 0;
                    return _context151.abrupt("return", false);

                  case 7:
                    _context151.next = 9;
                    return this.artikelService.artikelMcuuidByGcuuids(this.mid, globalArtikelUuids).then(function (items) {
                      return items.length;
                    });

                  case 9:
                    numExistsByMandant = _context151.sent;
                    this.numBezeichnungExists = numExistsByMandant;
                    return _context151.abrupt("return", numExistsByMandant > 0);

                  case 12:
                  case "end":
                    return _context151.stop();
                }
              }
            }, _callee151, this);
          }));
        }
      }, {
        key: "save",
        value: function save() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee152() {
            var result;
            return regeneratorRuntime.wrap(function _callee152$(_context152) {
              while (1) {
                switch (_context152.prev = _context152.next) {
                  case 0:
                    this.formError = '';

                    if (!this.formValidate()) {
                      _context152.next = 17;
                      break;
                    }

                    this.artikelDaten.mid = this.mid;
                    _context152.next = 5;
                    return this.artikelService.insert(this.artikelDaten);

                  case 5:
                    result = _context152.sent;

                    if (result.success) {
                      _context152.next = 12;
                      break;
                    }

                    this.formError = 'Daten konnten nicht gespeichert werden!<br>' + result.errorMsg;
                    console.error('save Artikeldaten result ', {
                      artikelDaten: this.artikelDaten,
                      result: result
                    });
                    return _context152.abrupt("return", false);

                  case 12:
                    this.artikelCreated.emit(result);
                    this.activeModal.close();
                    return _context152.abrupt("return", true);

                  case 15:
                    _context152.next = 18;
                    break;

                  case 17:
                    this.formError = 'Bitte die Angaben vervollständigen, Artikel-Bezeichnung darf noch nicht vergeben sein';

                  case 18:
                  case "end":
                    return _context152.stop();
                }
              }
            }, _callee152, this);
          }));
        }
      }, {
        key: "onPageChange",
        value: function onPageChange(page) {
          this.collectionSize = this.listExistingArticleMatches.length;
          this.pageSize = 8;
          var start = (page - 1) * this.pageSize;
          var end = start + this.pageSize;
          this.listExistingArticlePage = this.listExistingArticleMatches.slice(start, end);
          console.log('#599 pagination goto page', page, '.slice(', start, end, ') of', this.collectionSize);
        }
      }, {
        key: "onSubmit",
        value: function onSubmit(event) {
          console.log('onSubmit', this.artikelDaten);
          this.save();
        }
      }, {
        key: "gebaeudeId",
        get: function get() {
          return this.gid;
        },
        set: function set(gid) {
          this.gid = gid;
        }
      }, {
        key: "clientId",
        get: function get() {
          return this.mid;
        },
        set: function set(mid) {
          this.mid = mid;
        }
      }]);

      return SelectCreateArtikelComponent;
    }();

    SelectCreateArtikelComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _data_services_artikel_service__WEBPACK_IMPORTED_MODULE_4__["ArtikelService"]
      }, {
        type: _data_services_hersteller_service__WEBPACK_IMPORTED_MODULE_7__["HerstellerService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_8__["BasedataService"]
      }, {
        type: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_9__["DataService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instance', {
      "static": true
    })], SelectCreateArtikelComponent.prototype, "instance", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instanceGrp', {
      "static": true
    })], SelectCreateArtikelComponent.prototype, "instanceGrp", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instanceKtg', {
      "static": true
    })], SelectCreateArtikelComponent.prototype, "instanceKtg", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instanceTyp', {
      "static": true
    })], SelectCreateArtikelComponent.prototype, "instanceTyp", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instanceGrs', {
      "static": true
    })], SelectCreateArtikelComponent.prototype, "instanceGrs", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('instanceFa', {
      "static": true
    })], SelectCreateArtikelComponent.prototype, "instanceFa", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectCreateArtikelComponent.prototype, "artikelSelected", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectCreateArtikelComponent.prototype, "artikelSearching", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectCreateArtikelComponent.prototype, "artikelCreated", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectCreateArtikelComponent.prototype, "herstellerChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectCreateArtikelComponent.prototype, "gruppeChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectCreateArtikelComponent.prototype, "inputChanging", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectCreateArtikelComponent.prototype, "inputChanged", void 0);
    SelectCreateArtikelComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-select-create-artikel',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./select-create-artikel.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./select-create-artikel.component.scss */
      "./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.scss"))["default"]]
    })], SelectCreateArtikelComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.scss":
  /*!***********************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.scss ***!
    \***********************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsSelectCreateRaumSelectCreateRaumComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".modal-header.modal-header-with-links {\n  display: flex;\n  flex-direction: row-reverse;\n}\n\n.input-group-text {\n  min-width: 4rem;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1jcmVhdGUtcmF1bS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzZWxlY3QtY3JlYXRlLXJhdW1cXHNlbGVjdC1jcmVhdGUtcmF1bS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1jcmVhdGUtcmF1bS9zZWxlY3QtY3JlYXRlLXJhdW0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsMkJBQUE7QUNDRjs7QURFQTtFQUNFLGVBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL21vZGFscy9zZWxlY3QtY3JlYXRlLXJhdW0vc2VsZWN0LWNyZWF0ZS1yYXVtLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XHJcbn1cclxuXHJcbi5pbnB1dC1ncm91cC10ZXh0IHtcclxuICBtaW4td2lkdGg6IDRyZW07XHJcbn1cclxuIiwiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcbn1cblxuLmlucHV0LWdyb3VwLXRleHQge1xuICBtaW4td2lkdGg6IDRyZW07XG59Il19 */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.ts":
  /*!*********************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.ts ***!
    \*********************************************************************************************/

  /*! exports provided: SelectCreateRaumComponent */

  /***/
  function srcAppPagesInventFormModalsSelectCreateRaumSelectCreateRaumComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SelectCreateRaumComponent", function () {
      return SelectCreateRaumComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _data_services_raum_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../data-services/raum.service */
    "./src/app/pages/invent-form/data-services/raum.service.ts");

    var SelectCreateRaumComponent = /*#__PURE__*/function () {
      function SelectCreateRaumComponent( // private modalService: NgbModal,
      activeModal, raumService) {
        _classCallCheck(this, SelectCreateRaumComponent);

        this.activeModal = activeModal;
        this.raumService = raumService;
        this.faSearch = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__["faSearch"];
        this.faCamera = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__["faCamera"];
        this.faSignOutAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_3__["faSignOutAlt"];
        this.raumExistsStatus = -1;
        this.bezeichnungExistsStatus = -1;
        this.raumDaten = {
          Raum: '',
          Raumbezeichnung: '',
          Etage: '',
          code: ''
        };
        this.formIsValid = false;
        this.formError = '';
        this.raumSearching = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.raumCreated = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.scannerRequest = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
      }

      _createClass(SelectCreateRaumComponent, [{
        key: "getDismissReason",
        value: function getDismissReason(reason) {
          if (reason === _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["ModalDismissReasons"].ESC) {
            return 'by pressing ESC';
          } else if (reason === _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["ModalDismissReasons"].BACKDROP_CLICK) {
            return 'by clicking on a backdrop';
          } else {
            return "with: ".concat(reason);
          }
        }
      }, {
        key: "ngOnInit",
        value: function ngOnInit() {}
      }, {
        key: "openScanner",
        value: function openScanner(target) {
          this.scannerRequest.emit(target);
        }
      }, {
        key: "formValidate",
        value: function formValidate() {
          console.log('called formValidate');
          this.formIsValid = this.raumDaten.Raum.length > 0 && this.raumExistsStatus === 0;
          console.log('called formValidate return ', this.formIsValid);
          return this.formIsValid;
        }
      }, {
        key: "showSearchForm",
        value: function showSearchForm(event) {
          console.log('called showSearchForm');
          this.raumSearching.emit();
          this.activeModal.close();
        }
      }, {
        key: "checkIfRaumExists",
        value: function checkIfRaumExists() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee153() {
            var _this98 = this;

            var raumExists;
            return regeneratorRuntime.wrap(function _callee153$(_context153) {
              while (1) {
                switch (_context153.prev = _context153.next) {
                  case 0:
                    console.log('check if raum exists');
                    this.raumExistsStatus = -1;
                    raumExists = false;
                    _context153.next = 5;
                    return this.raumService.raumExists(this.gid, this.raumDaten.Raum).then(function (exists) {
                      _this98.raumExistsStatus = exists ? 1 : 0;
                      raumExists = exists;
                    });

                  case 5:
                    this.formValidate();
                    console.log('check if raum exists: ', raumExists);
                    return _context153.abrupt("return", raumExists);

                  case 8:
                  case "end":
                    return _context153.stop();
                }
              }
            }, _callee153, this);
          }));
        }
      }, {
        key: "checkIfRaumbezeichnungExists",
        value: function checkIfRaumbezeichnungExists() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee154() {
            var _this99 = this;

            var bezeichnungExists;
            return regeneratorRuntime.wrap(function _callee154$(_context154) {
              while (1) {
                switch (_context154.prev = _context154.next) {
                  case 0:
                    console.log('check if bezeichnung exists');
                    this.bezeichnungExistsStatus = -1;
                    bezeichnungExists = false;
                    _context154.next = 5;
                    return this.raumService.raumBezeichnungExists(this.gid, this.raumDaten.Raumbezeichnung).then(function (exists) {
                      _this99.bezeichnungExistsStatus = exists ? 1 : 0;
                      bezeichnungExists = exists;
                    });

                  case 5:
                    console.log('check if bezeichnung exists: ', bezeichnungExists);
                    return _context154.abrupt("return", bezeichnungExists);

                  case 7:
                  case "end":
                    return _context154.stop();
                }
              }
            }, _callee154, this);
          }));
        }
      }, {
        key: "save",
        value: function save() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee155() {
            var result;
            return regeneratorRuntime.wrap(function _callee155$(_context155) {
              while (1) {
                switch (_context155.prev = _context155.next) {
                  case 0:
                    this.formError = '';
                    console.log('save raum ');

                    if (!this.formValidate()) {
                      _context155.next = 19;
                      break;
                    }

                    this.raumDaten.gid = this.gid;
                    console.log('save raumdaten ', this.raumDaten);
                    _context155.next = 7;
                    return this.raumService.insert(this.raumDaten);

                  case 7:
                    result = _context155.sent;
                    console.log('save raumdaten result ', result);

                    if (result.success) {
                      _context155.next = 14;
                      break;
                    }

                    this.formError = 'Daten konnten nicht gespeichert werden!<br>' + result.errorMsg;
                    return _context155.abrupt("return", false);

                  case 14:
                    this.raumCreated.emit(result.newItem);
                    this.activeModal.close();
                    return _context155.abrupt("return", true);

                  case 17:
                    _context155.next = 20;
                    break;

                  case 19:
                    this.formError = 'Bitte die Angaben vervollständigen, Raum darf noch nicht vergeben sein';

                  case 20:
                  case "end":
                    return _context155.stop();
                }
              }
            }, _callee155, this);
          }));
        }
      }, {
        key: "onSubmit",
        value: function onSubmit(event) {
          console.log('onSubmit', this.raumDaten);
          this.save();
        }
      }, {
        key: "gebaeudeId",
        get: function get() {
          console.log('called get gebaeudeId() ', this.gid);
          return this.gid;
        },
        set: function set(gid) {
          console.log('called set gebaeudeId', 'param', gid, 'old-gid', this.gid);
          this.gid = gid;
        }
      }]);

      return SelectCreateRaumComponent;
    }();

    SelectCreateRaumComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _data_services_raum_service__WEBPACK_IMPORTED_MODULE_4__["RaumService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectCreateRaumComponent.prototype, "raumSearching", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectCreateRaumComponent.prototype, "raumCreated", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectCreateRaumComponent.prototype, "scannerRequest", void 0);
    SelectCreateRaumComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-select-create-raum',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./select-create-raum.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./select-create-raum.component.scss */
      "./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.scss"))["default"]]
    })], SelectCreateRaumComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.scss":
  /*!*****************************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.scss ***!
    \*****************************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsSelectSearchArtikelSelectSearchArtikelComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".modal-header.modal-header-with-links {\n  display: flex;\n  flex-direction: row-reverse;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1zZWFyY2gtYXJ0aWtlbC9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzZWxlY3Qtc2VhcmNoLWFydGlrZWxcXHNlbGVjdC1zZWFyY2gtYXJ0aWtlbC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1zZWFyY2gtYXJ0aWtlbC9zZWxlY3Qtc2VhcmNoLWFydGlrZWwuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsMkJBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL21vZGFscy9zZWxlY3Qtc2VhcmNoLWFydGlrZWwvc2VsZWN0LXNlYXJjaC1hcnRpa2VsLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XHJcbn1cclxuIiwiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcbn0iXX0= */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.ts":
  /*!***************************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.ts ***!
    \***************************************************************************************************/

  /*! exports provided: SelectSearchArtikelComponent */

  /***/
  function srcAppPagesInventFormModalsSelectSearchArtikelSelectSearchArtikelComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SelectSearchArtikelComponent", function () {
      return SelectSearchArtikelComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! rxjs/operators */
    "./node_modules/rxjs/_esm2015/operators/index.js");
    /* harmony import */


    var _shared_services_data_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../../../shared/services/data.service */
    "./src/app/shared/services/data.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");

    var states = [];

    var SelectSearchArtikelComponent = /*#__PURE__*/function () {
      function SelectSearchArtikelComponent(dataService, activeModal) {
        _classCallCheck(this, SelectSearchArtikelComponent);

        this.dataService = dataService;
        this.activeModal = activeModal;
        this.faPlus = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faPlus"];
        this.faSignOutAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSignOutAlt"];
        this.faSearch = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSearch"];
        this.artikelSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.artikelCreating = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();

        this.formatter = function (state) {
          return state.name;
        };

        this.search = function (text$) {
          return text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["distinctUntilChanged"])(), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["filter"])(function (term) {
            console.log('filter by term', term);
            return term.length >= 2;
          }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (term) {
            console.log('map and slice artikels by term', term, 'states', states);
            return states.filter(function (item) {
              return new RegExp(term, 'mi').test(item.name);
            }).slice(0, 10);
          }));
        };
      }

      _createClass(SelectSearchArtikelComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {}
      }, {
        key: "ngAfterViewInit",
        value: function ngAfterViewInit() {
          this.setSearchFocus();
        }
      }, {
        key: "setSearchFocus",
        value: function setSearchFocus() {
          if (this.searchArtikelInput && this.searchArtikelInput.nativeElement && this.searchArtikelInput.nativeElement.focus) {
            this.searchArtikelInput.nativeElement.focus();
          } else {
            console.error('NOT FOUND this.searchArtikelInput.nativeElement');
          }
        }
      }, {
        key: "showCreateForm",
        value: function showCreateForm(event) {
          console.log('showCreateForm');
          this.artikelCreating.emit(this.mid);
          this.activeModal.close();
        }
      }, {
        key: "onSelectItem",
        value: function onSelectItem(selected) {
          console.log(selected, selected.item);
          this.artikelSelected.emit(selected.item);
          this.activeModal.close();
        }
      }, {
        key: "loadArtikels",
        value: function loadArtikels() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee156() {
            return regeneratorRuntime.wrap(function _callee156$(_context156) {
              while (1) {
                switch (_context156.prev = _context156.next) {
                  case 0:
                    console.log('called loadArtikels');
                    states.length = 1;
                    _context156.next = 4;
                    return this.dataService.getArtikelListByClientId(this.mid).then(function (items) {
                      console.log('process fetched artikels', items.length);
                      return items.map(function (artikel) {
                        var nameParts = [];

                        if (artikel.Typ) {
                          nameParts.push(artikel.Typ);
                        }

                        if (artikel.Bezeichnung) {
                          nameParts.push(artikel.Bezeichnung);
                        }

                        if (artikel.Kategorie) {
                          nameParts.push(artikel.Kategorie);
                        }

                        if (artikel.Gruppe) {
                          nameParts.push(artikel.Gruppe);
                        }

                        if (artikel.Farbe) {
                          nameParts.push(artikel.Farbe);
                        }

                        if (artikel.Groesse) {
                          nameParts.push(artikel.Groesse);
                        }

                        if (artikel.Hersteller) {
                          nameParts.push(artikel.Hersteller);
                        }

                        var option = {
                          uuid: artikel.mcuuid,
                          mcuuid: artikel.mcuuid,
                          name: nameParts.join(' :: ')
                        };
                        states.push(option);
                        return Object.assign({}, artikel, option);
                      });
                    }).then()["catch"](function (err) {
                      console.error(err);
                    });

                  case 4:
                    if (1) {
                      this.search = function (text$) {
                        return text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["distinctUntilChanged"])(), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["filter"])(function (term) {
                          return term.length >= 2;
                        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (term) {
                          return states.filter(function (item) {
                            return new RegExp(term, 'mi').test(item.name);
                          }).slice(0, 10);
                        }));
                      };
                    }

                  case 5:
                  case "end":
                    return _context156.stop();
                }
              }
            }, _callee156, this);
          }));
        }
      }, {
        key: "clientId",
        get: function get() {
          return this.mid;
        },
        set: function set(mid) {
          var _this100 = this;

          console.log('SET gebaeudeId', 'param', mid, 'old-mid', this.mid);

          if (this.mid !== mid) {
            this.mid = mid;
            console.log('Reload Search-List');
            this.loadArtikels().then(function () {
              _this100.setSearchFocus();
            });
          }
        }
      }]);

      return SelectSearchArtikelComponent;
    }();

    SelectSearchArtikelComponent.ctorParameters = function () {
      return [{
        type: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_3__["DataService"]
      }, {
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__["NgbActiveModal"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectSearchArtikelComponent.prototype, "artikelSelected", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectSearchArtikelComponent.prototype, "artikelCreating", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('searchArtikelInput', {
      "static": false
    })], SelectSearchArtikelComponent.prototype, "searchArtikelInput", void 0);
    SelectSearchArtikelComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-select-search-artikel',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./select-search-artikel.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./select-search-artikel.component.scss */
      "./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.scss"))["default"]]
    })], SelectSearchArtikelComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.scss":
  /*!***********************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.scss ***!
    \***********************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsSelectSearchRaumSelectSearchRaumComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".modal-header.modal-header-with-links {\n  display: flex;\n  flex-direction: row-reverse;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1zZWFyY2gtcmF1bS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzZWxlY3Qtc2VhcmNoLXJhdW1cXHNlbGVjdC1zZWFyY2gtcmF1bS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1zZWFyY2gtcmF1bS9zZWxlY3Qtc2VhcmNoLXJhdW0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsMkJBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL21vZGFscy9zZWxlY3Qtc2VhcmNoLXJhdW0vc2VsZWN0LXNlYXJjaC1yYXVtLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XHJcbn1cclxuIiwiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcbn0iXX0= */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.ts":
  /*!*********************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.ts ***!
    \*********************************************************************************************/

  /*! exports provided: SelectSearchRaumComponent */

  /***/
  function srcAppPagesInventFormModalsSelectSearchRaumSelectSearchRaumComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SelectSearchRaumComponent", function () {
      return SelectSearchRaumComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! rxjs/operators */
    "./node_modules/rxjs/_esm2015/operators/index.js");
    /* harmony import */


    var _shared_services_data_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../../../shared/services/data.service */
    "./src/app/shared/services/data.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! ../../../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");

    var raeume = [];
    var states = [];

    var SelectSearchRaumComponent = /*#__PURE__*/function () {
      function SelectSearchRaumComponent(dataService, activeModal, baseData) {
        _classCallCheck(this, SelectSearchRaumComponent);

        this.dataService = dataService;
        this.activeModal = activeModal;
        this.baseData = baseData;
        this.faPlus = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faPlus"];
        this.faSearch = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSearch"];
        this.faSearchLocation = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSearchLocation"];
        this.faSignOutAlt = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSignOutAlt"];
        this.raumSelected = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.raumCreating = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();

        this.formatter = function (state) {
          return state.name;
        };

        this.search = function (text$) {
          return text$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["debounceTime"])(200), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["distinctUntilChanged"])(), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["filter"])(function (term) {
            return term.length >= 1;
          }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["map"])(function (term) {
            // console.log('map and slice artikel by term', term, 'states', states);
            var matches = states.filter(function (item) {
              return new RegExp(term, 'mi').test(item.name);
            }).sort().slice(0, 10);
            console.log('search ', {
              term: term,
              matches: Object.assign({}, matches),
              states: states
            });
            return matches;
          }));
        };
      }

      _createClass(SelectSearchRaumComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {}
      }, {
        key: "ngAfterViewInit",
        value: function ngAfterViewInit() {
          this.setSearchFocus();
        }
      }, {
        key: "setSearchFocus",
        value: function setSearchFocus() {
          if (this.searchInput && this.searchInput.nativeElement && this.searchInput.nativeElement.focus) {
            this.searchInput.nativeElement.focus();
          } else {
            console.error('NOT FOUND this.searchInput.nativeElement');
          }
        }
      }, {
        key: "showCreateForm",
        value: function showCreateForm(event) {
          console.log('showCreateForm');
          this.raumCreating.emit(this.gid);
          this.activeModal.close();
        }
      }, {
        key: "onSelectItem",
        value: function onSelectItem(selected) {
          console.log(selected, selected.item);
          this.raumSelected.emit(selected.item);
          this.activeModal.close();
        }
      }, {
        key: "loadRaeume",
        value: function loadRaeume() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee157() {
            return regeneratorRuntime.wrap(function _callee157$(_context157) {
              while (1) {
                switch (_context157.prev = _context157.next) {
                  case 0:
                    console.log('called loadRaeume');
                    states.length = 0;
                    this.dataService.getRaeumeByGebaeudeId(this.gid, this.jobid).then(function (raeume2) {
                      console.log('loadRaeume: ', {
                        raeume2: Object.assign({}, raeume2)
                      });
                      var raeume3 = raeume2.map(function (raum) {
                        var nameParts = [];

                        if (raum.Raum) {
                          nameParts.push(raum.Raum);
                        }

                        if (raum.Raumbezeichnung) {
                          nameParts.push(raum.Raumbezeichnung);
                        }

                        if (raum.Etage) {
                          nameParts.push(raum.Etage);
                        }

                        var itm = {
                          uuid: raum.uuid,
                          name: nameParts.join(' :: ')
                        };
                        var rOpt = Object.assign({}, itm, raum);

                        if (!states.find(function (st) {
                          return st.uuid === rOpt.uuid;
                        })) {
                          states.push(rOpt);
                        }

                        return rOpt;
                      });
                      console.log('loadRaeume: ', {
                        states: Object.assign({}, states)
                      });
                      return raeume3;
                    })["catch"](function (err) {
                      console.error(err);
                    });

                  case 3:
                  case "end":
                    return _context157.stop();
                }
              }
            }, _callee157, this);
          }));
        }
      }, {
        key: "gebaeudeId",
        get: function get() {
          return this.gid;
        },
        set: function set(gid) {
          var _this101 = this;

          console.log('SET gebaeudeId', 'param', gid, 'old-gid', this.gid);

          if (this.gid !== gid) {
            this.gid = gid;
            this.jobid = this.baseData.getCurrentJobid();
            console.log('Reload Search-List');
            this.loadRaeume().then(function () {
              _this101.setSearchFocus();
            });
            this.setSearchFocus();
          }
        }
      }]);

      return SelectSearchRaumComponent;
    }();

    SelectSearchRaumComponent.ctorParameters = function () {
      return [{
        type: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_3__["DataService"]
      }, {
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__["NgbActiveModal"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_6__["BasedataService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectSearchRaumComponent.prototype, "raumSelected", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SelectSearchRaumComponent.prototype, "raumCreating", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('searchInput', {
      "static": true
    })], SelectSearchRaumComponent.prototype, "searchInput", void 0);
    SelectSearchRaumComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-select-search-raum',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./select-search-raum.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./select-search-raum.component.scss */
      "./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.scss"))["default"]]
    })], SelectSearchRaumComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.scss":
  /*!***********************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.scss ***!
    \***********************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsShowArtikelImageShowArtikelImageComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "#inputPreview {\n  max-width: 100%;\n  max-height: calc(100vh - 200px);\n}\n\n.editor {\n  height: 60%;\n  position: relative;\n}\n\n.canvas {\n  height: 100%;\n}\n\n.canvas {\n  align-items: center;\n  display: flex;\n  justify-content: center;\n}\n\n.toolbar {\n  background-color: rgba(0, 0, 0, 0.4);\n  bottom: 1rem;\n  color: #fff;\n  height: 2rem;\n  left: 50%;\n  margin-left: -7rem;\n  position: absolute;\n  width: 16rem;\n  z-index: 2015;\n}\n\n.toolbar button {\n  background: transparent;\n  color: #fff;\n  border: 0;\n}\n\n.toolbar-close {\n  position: absolute;\n  top: 0.2rem;\n  right: 0.2rem;\n  z-index: 2016;\n  background-color: transparent;\n}\n\n.btn-icon-cirular {\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctYXJ0aWtlbC1pbWFnZS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzaG93LWFydGlrZWwtaW1hZ2VcXHNob3ctYXJ0aWtlbC1pbWFnZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctYXJ0aWtlbC1pbWFnZS9zaG93LWFydGlrZWwtaW1hZ2UuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFBO0VBQ0EsK0JBQUE7QUNDRjs7QURDQTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtBQ0VGOztBRENBO0VBQ0UsWUFBQTtBQ0VGOztBRENBO0VBR0UsbUJBQUE7RUFHQSxhQUFBO0VBR0EsdUJBQUE7QUNFRjs7QURDQTtFQUNFLG9DQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsU0FBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtBQ0VGOztBRENBO0VBQ0UsdUJBQUE7RUFDQSxXQUFBO0VBQ0EsU0FBQTtBQ0VGOztBRENBO0VBQ0Usa0JBQUE7RUFDQSxXQUFBO0VBQ0EsYUFBQTtFQUNBLGFBQUE7RUFDQSw2QkFBQTtBQ0VGOztBRENBO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtBQ0VGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctYXJ0aWtlbC1pbWFnZS9zaG93LWFydGlrZWwtaW1hZ2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjaW5wdXRQcmV2aWV3IHtcclxuICBtYXgtd2lkdGg6MTAwJTtcclxuICBtYXgtaGVpZ2h0OmNhbGMoMTAwdmggLSAyMDBweCk7XHJcbn1cclxuLmVkaXRvciB7XHJcbiAgaGVpZ2h0OiA2MCU7XHJcbiAgcG9zaXRpb246cmVsYXRpdmU7XHJcbn1cclxuXHJcbi5jYW52YXMge1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLmNhbnZhcyB7XHJcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcclxuICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XHJcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XHJcbiAgLW1zLWZsZXgtcGFjazogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4udG9vbGJhciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuNCk7XHJcbiAgYm90dG9tOiAxcmVtO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGhlaWdodDogMnJlbTtcclxuICBsZWZ0OiA1MCU7XHJcbiAgbWFyZ2luLWxlZnQ6IC03cmVtO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogMTZyZW07XHJcbiAgei1pbmRleDogMjAxNTtcclxufVxyXG5cclxuLnRvb2xiYXIgYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICBjb2xvcjojZmZmO1xyXG4gIGJvcmRlcjowO1xyXG59XHJcblxyXG4udG9vbGJhci1jbG9zZSB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogLjJyZW07XHJcbiAgcmlnaHQ6IDAuMnJlbTtcclxuICB6LWluZGV4OiAyMDE2O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG59XHJcblxyXG4uYnRuLWljb24tY2lydWxhciB7XHJcbiAgd2lkdGg6MnJlbTtcclxuICBoZWlnaHQ6MnJlbTtcclxuICBib3JkZXItcmFkaXVzOjFyZW07XHJcbn1cclxuXHJcbiIsIiNpbnB1dFByZXZpZXcge1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIG1heC1oZWlnaHQ6IGNhbGMoMTAwdmggLSAyMDBweCk7XG59XG5cbi5lZGl0b3Ige1xuICBoZWlnaHQ6IDYwJTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uY2FudmFzIHtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uY2FudmFzIHtcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcbiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xuICBkaXNwbGF5OiBmbGV4O1xuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XG4gIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi50b29sYmFyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpO1xuICBib3R0b206IDFyZW07XG4gIGNvbG9yOiAjZmZmO1xuICBoZWlnaHQ6IDJyZW07XG4gIGxlZnQ6IDUwJTtcbiAgbWFyZ2luLWxlZnQ6IC03cmVtO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAxNnJlbTtcbiAgei1pbmRleDogMjAxNTtcbn1cblxuLnRvb2xiYXIgYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjZmZmO1xuICBib3JkZXI6IDA7XG59XG5cbi50b29sYmFyLWNsb3NlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDAuMnJlbTtcbiAgcmlnaHQ6IDAuMnJlbTtcbiAgei1pbmRleDogMjAxNjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbi5idG4taWNvbi1jaXJ1bGFyIHtcbiAgd2lkdGg6IDJyZW07XG4gIGhlaWdodDogMnJlbTtcbiAgYm9yZGVyLXJhZGl1czogMXJlbTtcbn0iXX0= */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.ts":
  /*!*********************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.ts ***!
    \*********************************************************************************************/

  /*! exports provided: ShowArtikelImageComponent */

  /***/
  function srcAppPagesInventFormModalsShowArtikelImageShowArtikelImageComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ShowArtikelImageComponent", function () {
      return ShowArtikelImageComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _data_services_images_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../data-services/images.service */
    "./src/app/pages/invent-form/data-services/images.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");

    var ShowArtikelImageComponent = /*#__PURE__*/function () {
      function ShowArtikelImageComponent(activeModal, imageService) {
        _classCallCheck(this, ShowArtikelImageComponent);

        this.activeModal = activeModal;
        this.imageService = imageService; // Editor-Button-Icons

        this.faCrop = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faCropAlt"];
        this.faMove = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faArrowsAlt"];
        this.faSearchPlus = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSearchPlus"];
        this.faSearchMinus = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSearchMinus"];
        this.faRotateLeft = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faUndo"];
        this.faRotateRight = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faRedo"];
        this.faCheck = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faCheck"];
        this.faBan = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faBan"];
        this.faClose = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faTimes"];
        this.mcuuid = null;
        this.gcuuid = null;
        this.inputFile = null;
        this.previewEnable = false;
        this.imageUrl = null;
        this.maxWidth = 600;
        this.maxHeight = 600;
        this.error = '';
        this.config = {
          // aspectRatio : 16 / 9,
          autoCrop: false,
          dragMode: 'move',
          background: true,
          movable: true,
          rotatable: true,
          scalable: true,
          zoomable: true,
          restore: true,
          viewMode: 0,
          checkImageOrigin: true,
          cropend: this.cropEnd.bind(this),
          zoom: this.zoomed.bind(this),
          // ready: this.onCropperReady.bind(this),
          checkCrossOrigin: true,
          wheelZoomRatio: 0.1,
          toggleDragModeOnDblclick: true
        };
        this.cropStatus = 0;
      }

      _createClass(ShowArtikelImageComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {
          console.log('called ShowArtikelImageComponent.ngOnInit');
        }
      }, {
        key: "setMcuuid",
        value: function setMcuuid(mcuuid) {
          var _this102 = this;

          var gcuuid = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
          this.mcuuid = mcuuid;
          this.gcuuid = gcuuid;
          console.log('called setMcuuid', this.mcuuid);
          this.loadImageByMcuuid(this.mcuuid).then(function (mSuccess) {
            if (!mSuccess && gcuuid) {
              _this102.loadImageByGcuuid(_this102.gcuuid).then(function (gSuccess) {
                if (!gSuccess) {
                  alert('Bild konnte leider nicht geladen werden!');
                }
              });
            }
          }, function (err) {
            if (gcuuid) {
              _this102.loadImageByGcuuid(_this102.gcuuid).then(function (gSuccess) {
                if (!gSuccess) {
                  alert('Bild konnte leider nicht geladen werden!');
                }
              });
            } else {
              alert('Bild konnte leider nicht geladen werden!');
            }
          });
        }
      }, {
        key: "loadImageByMcuuid",
        value: function loadImageByMcuuid(mcuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee158() {
            var _this103 = this;

            return regeneratorRuntime.wrap(function _callee158$(_context158) {
              while (1) {
                switch (_context158.prev = _context158.next) {
                  case 0:
                    console.log('called loadImageByGcuuid', mcuuid);

                    if (!mcuuid) {
                      _context158.next = 3;
                      break;
                    }

                    return _context158.abrupt("return", this.imageService.getImageByMcuuid(mcuuid).then(function (image) {
                      if (image) {
                        _this103.imageUrl = image.data_url;
                        return true;
                      }

                      return false;
                    })["catch"](function (err) {
                      console.error(err);
                      return false;
                    }));

                  case 3:
                    return _context158.abrupt("return", false);

                  case 4:
                  case "end":
                    return _context158.stop();
                }
              }
            }, _callee158, this);
          }));
        }
      }, {
        key: "loadImageByGcuuid",
        value: function loadImageByGcuuid(gcuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee159() {
            var _this104 = this;

            return regeneratorRuntime.wrap(function _callee159$(_context159) {
              while (1) {
                switch (_context159.prev = _context159.next) {
                  case 0:
                    console.log('called loadImageByGcuuid', gcuuid);

                    if (!gcuuid) {
                      _context159.next = 3;
                      break;
                    }

                    return _context159.abrupt("return", this.imageService.getImageByGcuuid(gcuuid).then(function (image) {
                      if (image) {
                        _this104.imageUrl = image.data_url;
                        return true;
                      }

                      return false;
                    })["catch"](function (err) {
                      console.error(err);
                      return false;
                    }));

                  case 3:
                    return _context159.abrupt("return", false);

                  case 4:
                  case "end":
                    return _context159.stop();
                }
              }
            }, _callee159, this);
          }));
        }
      }, {
        key: "zoomed",
        value: function zoomed(e) {
          console.log('zoomListener Event: ', e, 'this.angularCropper: ', this.angularCropper);
          var canvasData = this.angularCropper.cropper.getCanvasData();
          var containerData = this.angularCropper.cropper.getContainerData();
          var ratio = e.detail.ratio;
          var oldRatio = e.detail.oldRatio;
          var minRatioW = containerData.width / canvasData.naturalWidth;
          var minRatioH = containerData.height / canvasData.naturalHeight;

          if (ratio < oldRatio && (ratio < minRatioW || ratio < minRatioH)) {
            // Zoom-Out
            e.preventDefault(); // Prevent zoom out

            return false;
          }
        }
      }, {
        key: "cropEnd",
        value: function cropEnd(e) {
          if (['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'].indexOf(e.detail.action) !== -1) {
            this.cropStatus = 5;
          } else if (e.detail.action === 'move') {
            var canvasData = this.angularCropper.cropper.getCanvasData();
            var containerData = this.angularCropper.cropper.getContainerData();
            console.log('cropEnd move', {
              e: e,
              canvasData: canvasData,
              containerData: containerData
            });
            var toLeft = canvasData.left > 0 ? 0 : canvasData.left;
            var toTop = canvasData.top > 0 ? 0 : canvasData.top;

            if (canvasData.left > 0 || canvasData.top > 0) {
              this.angularCropper.cropper.moveTo(toLeft, toTop);
            }
          }
        }
      }, {
        key: "rotateLeft",
        value: function rotateLeft() {
          this.angularCropper.cropper.rotate(-90);
        }
      }, {
        key: "rotateRight",
        value: function rotateRight() {
          this.angularCropper.cropper.rotate(90);
        }
      }, {
        key: "rotate180",
        value: function rotate180() {
          this.angularCropper.cropper.rotate(180);
        }
      }, {
        key: "zoomIn",
        value: function zoomIn() {
          var canvasData = this.angularCropper.cropper.getCanvasData();
          console.log('zoomIn ', {
            canvasData: canvasData
          });
          this.angularCropper.cropper.zoom(.1);
        }
      }, {
        key: "zoomOut",
        value: function zoomOut(useRatio) {
          var ratio = typeof useRatio === 'undefined' || useRatio >= 0 ? -0.1 : useRatio;
          console.log('zoom( -0.1) this.angularCropper:', this.angularCropper);
          var canvasData = this.angularCropper.cropper.getCanvasData();
          var cropBoxData = this.angularCropper.cropper.getCropBoxData();
          var containerData = this.angularCropper.cropper.getContainerData();
          var cad = canvasData;
          var crd = cropBoxData;
          var cod = containerData;
          var caw = cad.width;
          var cah = cad.height;
          var crw = crd.width;
          var crh = crd.height;
          var cow = cod.width;
          var coh = cod.height;
          console.log({
            ratio: ratio,
            caw: caw,
            cah: cah,
            cow: cow,
            coh: coh,
            crw: crw,
            crh: crh,
            canvasData: canvasData,
            cropBoxData: cropBoxData,
            containerData: containerData
          });

          if (caw < cow || cah < coh) {
            console.error('Permission denied to zoom out smaller than canvas');
            return;
          }

          console.log('Permission allowed to zoom out >= canvas');
          this.angularCropper.cropper.zoom(ratio);
        }
      }, {
        key: "escape",
        value: function escape() {
          this.imageUrl = null;
        }
      }, {
        key: "close",
        value: function close() {
          this.escape();
          this.activeModal.close();
        }
      }]);

      return ShowArtikelImageComponent;
    }();

    ShowArtikelImageComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _data_services_images_service__WEBPACK_IMPORTED_MODULE_3__["ImagesService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('angularCropper', {
      "static": false
    })], ShowArtikelImageComponent.prototype, "angularCropper", void 0);
    ShowArtikelImageComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-show-artikel-image',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./show-artikel-image.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./show-artikel-image.component.scss */
      "./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.scss"))["default"]]
    })], ShowArtikelImageComponent);
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.scss":
  /*!*****************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.scss ***!
    \*****************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesInventFormModalsShowRaumImageShowRaumImageComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "#inputPreview {\n  max-width: 100%;\n  max-height: calc(100vh - 200px);\n}\n\n.editor {\n  height: 60%;\n  position: relative;\n}\n\n.canvas {\n  height: 100%;\n}\n\n.canvas {\n  align-items: center;\n  display: flex;\n  justify-content: center;\n}\n\n.toolbar {\n  background-color: rgba(0, 0, 0, 0.4);\n  bottom: 1rem;\n  color: #fff;\n  height: 2rem;\n  left: 50%;\n  margin-left: -7rem;\n  position: absolute;\n  width: 16rem;\n  z-index: 2015;\n}\n\n.toolbar button {\n  background: transparent;\n  color: #fff;\n  border: 0;\n}\n\n.toolbar-close {\n  position: absolute;\n  top: 0.2rem;\n  right: 0.2rem;\n  z-index: 2016;\n  background-color: transparent;\n}\n\n.btn-icon-cirular {\n  width: 2rem;\n  height: 2rem;\n  border-radius: 1rem;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctcmF1bS1pbWFnZS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzaG93LXJhdW0taW1hZ2VcXHNob3ctcmF1bS1pbWFnZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctcmF1bS1pbWFnZS9zaG93LXJhdW0taW1hZ2UuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFBO0VBQ0EsK0JBQUE7QUNDRjs7QURDQTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtBQ0VGOztBRENBO0VBQ0UsWUFBQTtBQ0VGOztBRENBO0VBR0UsbUJBQUE7RUFHQSxhQUFBO0VBR0EsdUJBQUE7QUNFRjs7QURDQTtFQUNFLG9DQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsU0FBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtBQ0VGOztBRENBO0VBQ0UsdUJBQUE7RUFDQSxXQUFBO0VBQ0EsU0FBQTtBQ0VGOztBRENBO0VBQ0Usa0JBQUE7RUFDQSxXQUFBO0VBQ0EsYUFBQTtFQUNBLGFBQUE7RUFDQSw2QkFBQTtBQ0VGOztBRENBO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtBQ0VGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctcmF1bS1pbWFnZS9zaG93LXJhdW0taW1hZ2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjaW5wdXRQcmV2aWV3IHtcclxuICBtYXgtd2lkdGg6MTAwJTtcclxuICBtYXgtaGVpZ2h0OmNhbGMoMTAwdmggLSAyMDBweCk7XHJcbn1cclxuLmVkaXRvciB7XHJcbiAgaGVpZ2h0OiA2MCU7XHJcbiAgcG9zaXRpb246cmVsYXRpdmU7XHJcbn1cclxuXHJcbi5jYW52YXMge1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLmNhbnZhcyB7XHJcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcclxuICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XHJcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XHJcbiAgLW1zLWZsZXgtcGFjazogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4udG9vbGJhciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuNCk7XHJcbiAgYm90dG9tOiAxcmVtO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGhlaWdodDogMnJlbTtcclxuICBsZWZ0OiA1MCU7XHJcbiAgbWFyZ2luLWxlZnQ6IC03cmVtO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogMTZyZW07XHJcbiAgei1pbmRleDogMjAxNTtcclxufVxyXG5cclxuLnRvb2xiYXIgYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICBjb2xvcjojZmZmO1xyXG4gIGJvcmRlcjowO1xyXG59XHJcblxyXG4udG9vbGJhci1jbG9zZSB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogLjJyZW07XHJcbiAgcmlnaHQ6IDAuMnJlbTtcclxuICB6LWluZGV4OiAyMDE2O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG59XHJcblxyXG4uYnRuLWljb24tY2lydWxhciB7XHJcbiAgd2lkdGg6MnJlbTtcclxuICBoZWlnaHQ6MnJlbTtcclxuICBib3JkZXItcmFkaXVzOjFyZW07XHJcbn1cclxuXHJcbiIsIiNpbnB1dFByZXZpZXcge1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIG1heC1oZWlnaHQ6IGNhbGMoMTAwdmggLSAyMDBweCk7XG59XG5cbi5lZGl0b3Ige1xuICBoZWlnaHQ6IDYwJTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uY2FudmFzIHtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uY2FudmFzIHtcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcbiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xuICBkaXNwbGF5OiBmbGV4O1xuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XG4gIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi50b29sYmFyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpO1xuICBib3R0b206IDFyZW07XG4gIGNvbG9yOiAjZmZmO1xuICBoZWlnaHQ6IDJyZW07XG4gIGxlZnQ6IDUwJTtcbiAgbWFyZ2luLWxlZnQ6IC03cmVtO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAxNnJlbTtcbiAgei1pbmRleDogMjAxNTtcbn1cblxuLnRvb2xiYXIgYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjZmZmO1xuICBib3JkZXI6IDA7XG59XG5cbi50b29sYmFyLWNsb3NlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDAuMnJlbTtcbiAgcmlnaHQ6IDAuMnJlbTtcbiAgei1pbmRleDogMjAxNjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbi5idG4taWNvbi1jaXJ1bGFyIHtcbiAgd2lkdGg6IDJyZW07XG4gIGhlaWdodDogMnJlbTtcbiAgYm9yZGVyLXJhZGl1czogMXJlbTtcbn0iXX0= */";
    /***/
  },

  /***/
  "./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.ts":
  /*!***************************************************************************************!*\
    !*** ./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.ts ***!
    \***************************************************************************************/

  /*! exports provided: ShowRaumImageComponent */

  /***/
  function srcAppPagesInventFormModalsShowRaumImageShowRaumImageComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ShowRaumImageComponent", function () {
      return ShowRaumImageComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @ng-bootstrap/ng-bootstrap */
    "./node_modules/@ng-bootstrap/ng-bootstrap/fesm2015/ng-bootstrap.js");
    /* harmony import */


    var _data_services_images_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../data-services/images.service */
    "./src/app/pages/invent-form/data-services/images.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");

    var ShowRaumImageComponent = /*#__PURE__*/function () {
      function ShowRaumImageComponent(activeModal, imageService) {
        _classCallCheck(this, ShowRaumImageComponent);

        this.activeModal = activeModal;
        this.imageService = imageService; // Editor-Button-Icons

        this.faCrop = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faCropAlt"];
        this.faMove = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faArrowsAlt"];
        this.faSearchPlus = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSearchPlus"];
        this.faSearchMinus = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faSearchMinus"];
        this.faRotateLeft = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faUndo"];
        this.faRotateRight = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faRedo"];
        this.faCheck = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faCheck"];
        this.faBan = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faBan"];
        this.faClose = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_4__["faTimes"];
        this.titel = '';
        this.uuid = null;
        this.imageUrl = null;
        this.error = '';
        this.config = {
          // aspectRatio : 16 / 9,
          autoCrop: false,
          dragMode: 'move',
          background: true,
          movable: true,
          rotatable: true,
          scalable: true,
          zoomable: true,
          restore: true,
          viewMode: 0,
          checkImageOrigin: true,
          cropend: this.cropEnd.bind(this),
          zoom: this.zoomed.bind(this),
          // ready: this.onCropperReady.bind(this),
          checkCrossOrigin: true,
          wheelZoomRatio: 0.1,
          toggleDragModeOnDblclick: true
        };
        this.cropStatus = 0;
      }

      _createClass(ShowRaumImageComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {
          console.log('called ShowArtikelImageComponent.ngOnInit');
        }
      }, {
        key: "setImageUuid",
        value: function setImageUuid(uuid) {
          this.uuid = uuid;
          console.log('called setMcuuid', this.uuid);
          this.loadImageByUuid(this.uuid).then(function (mSuccess) {
            if (!mSuccess) {
              alert('Bild konnte leider nicht geladen werden!');
            }
          });
        }
      }, {
        key: "setTitel",
        value: function setTitel(titel) {
          this.titel = titel;
        }
      }, {
        key: "loadImageByUuid",
        value: function loadImageByUuid(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee160() {
            var _this105 = this;

            return regeneratorRuntime.wrap(function _callee160$(_context160) {
              while (1) {
                switch (_context160.prev = _context160.next) {
                  case 0:
                    console.log('called loadImageByGcuuid', uuid);

                    if (!uuid) {
                      _context160.next = 3;
                      break;
                    }

                    return _context160.abrupt("return", this.imageService.getImageByUuid(uuid).then(function (image) {
                      if (image) {
                        _this105.imageUrl = image.data_url.replace(/(\r\n|\n|\r)/gm, '');
                        return true;
                      }

                      return false;
                    })["catch"](function (err) {
                      console.error(err);
                      return false;
                    }));

                  case 3:
                    return _context160.abrupt("return", false);

                  case 4:
                  case "end":
                    return _context160.stop();
                }
              }
            }, _callee160, this);
          }));
        }
      }, {
        key: "zoomed",
        value: function zoomed(e) {
          console.log('zoomListener Event: ', e, 'this.angularCropper: ', this.angularCropper);
          var canvasData = this.angularCropper.cropper.getCanvasData();
          var containerData = this.angularCropper.cropper.getContainerData();
          var ratio = e.detail.ratio;
          var oldRatio = e.detail.oldRatio;
          var minRatioW = containerData.width / canvasData.naturalWidth;
          var minRatioH = containerData.height / canvasData.naturalHeight;

          if (ratio < oldRatio && (ratio < minRatioW || ratio < minRatioH)) {
            // Zoom-Out
            e.preventDefault(); // Prevent zoom out

            return false;
          }
        }
      }, {
        key: "cropEnd",
        value: function cropEnd(e) {
          if (['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'].indexOf(e.detail.action) !== -1) {
            this.cropStatus = 5;
          } else if (e.detail.action === 'move') {
            var canvasData = this.angularCropper.cropper.getCanvasData();
            var containerData = this.angularCropper.cropper.getContainerData();
            console.log('cropEnd move', {
              e: e,
              canvasData: canvasData,
              containerData: containerData
            });
            var toLeft = canvasData.left > 0 ? 0 : canvasData.left;
            var toTop = canvasData.top > 0 ? 0 : canvasData.top;

            if (canvasData.left > 0 || canvasData.top > 0) {
              this.angularCropper.cropper.moveTo(toLeft, toTop);
            }
          }
        }
      }, {
        key: "rotateLeft",
        value: function rotateLeft() {
          this.angularCropper.cropper.rotate(-90);
        }
      }, {
        key: "rotateRight",
        value: function rotateRight() {
          this.angularCropper.cropper.rotate(90);
        }
      }, {
        key: "rotate180",
        value: function rotate180() {
          this.angularCropper.cropper.rotate(180);
        }
      }, {
        key: "zoomIn",
        value: function zoomIn() {
          var canvasData = this.angularCropper.cropper.getCanvasData();
          console.log('zoomIn ', {
            canvasData: canvasData
          });
          this.angularCropper.cropper.zoom(.1);
        }
      }, {
        key: "zoomOut",
        value: function zoomOut(useRatio) {
          var ratio = typeof useRatio === 'undefined' || useRatio >= 0 ? -0.1 : useRatio;
          console.log('zoom( -0.1) this.angularCropper:', this.angularCropper);
          var canvasData = this.angularCropper.cropper.getCanvasData();
          var cropBoxData = this.angularCropper.cropper.getCropBoxData();
          var containerData = this.angularCropper.cropper.getContainerData();
          var cad = canvasData;
          var crd = cropBoxData;
          var cod = containerData;
          var caw = cad.width;
          var cah = cad.height;
          var crw = crd.width;
          var crh = crd.height;
          var cow = cod.width;
          var coh = cod.height;
          console.log({
            ratio: ratio,
            caw: caw,
            cah: cah,
            cow: cow,
            coh: coh,
            crw: crw,
            crh: crh,
            canvasData: canvasData,
            cropBoxData: cropBoxData,
            containerData: containerData
          });

          if (caw < cow || cah < coh) {
            console.error('Permission denied to zoom out smaller than canvas');
            return;
          }

          console.log('Permission allowed to zoom out >= canvas');
          this.angularCropper.cropper.zoom(ratio);
        }
      }, {
        key: "escape",
        value: function escape() {
          this.imageUrl = null;
        }
      }, {
        key: "close",
        value: function close() {
          this.escape();
          this.activeModal.close();
        }
      }]);

      return ShowRaumImageComponent;
    }();

    ShowRaumImageComponent.ctorParameters = function () {
      return [{
        type: _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbActiveModal"]
      }, {
        type: _data_services_images_service__WEBPACK_IMPORTED_MODULE_3__["ImagesService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('angularCropper', {
      "static": false
    })], ShowRaumImageComponent.prototype, "angularCropper", void 0);
    ShowRaumImageComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-show-raum-image',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./show-raum-image.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./show-raum-image.component.scss */
      "./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.scss"))["default"]]
    })], ShowRaumImageComponent);
    /***/
  },

  /***/
  "./src/app/pages/select-inventory/select-inventory.component.scss":
  /*!************************************************************************!*\
    !*** ./src/app/pages/select-inventory/select-inventory.component.scss ***!
    \************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesSelectInventorySelectInventoryComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".progress.progress-elemente {\n  height: calc(1.5em + 0.75rem + 2px);\n}\n\n.select-inventory .input-group-text {\n  min-width: 5.5em;\n}\n\n.dropdown.myDropdown {\n  width: 100%;\n}\n\n.dropdown.myDropdown [aria-haspopup=true] {\n  text-align: left;\n  position: relative;\n  text-indent: 1em;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n.dropdown.myDropdown [aria-haspopup=true][aria-expanded=true] {\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n.dropdown.myDropdown [aria-haspopup=true]::after {\n  position: absolute;\n  right: 0;\n  top: 0;\n  margin-top: 1em;\n  margin-right: 1em;\n}\n\n.dropdown.myDropdown .dropdown-menu {\n  width: 100%;\n  border-top-right-radius: 0px;\n  border-top-left-radius: 0px;\n  margin-top: 1px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2VsZWN0LWludmVudG9yeS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxzZWxlY3QtaW52ZW50b3J5XFxzZWxlY3QtaW52ZW50b3J5LmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9wYWdlcy9zZWxlY3QtaW52ZW50b3J5L3NlbGVjdC1pbnZlbnRvcnkuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtQ0FBQTtBQ0NGOztBREVBO0VBQ0UsZ0JBQUE7QUNDRjs7QURDQTtFQUNFLFdBQUE7QUNFRjs7QURBQTtFQUNFLGdCQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLHlCQUFBO0VBQ0EsNEJBQUE7QUNHRjs7QUREQTtFQUNFLDZCQUFBO0VBQ0EsNEJBQUE7QUNJRjs7QURGQTtFQUNFLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLE1BQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7QUNLRjs7QURGQTtFQUNFLFdBQUE7RUFDQSw0QkFBQTtFQUNBLDJCQUFBO0VBQ0EsZUFBQTtBQ0tGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvc2VsZWN0LWludmVudG9yeS9zZWxlY3QtaW52ZW50b3J5LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnByb2dyZXNzLnByb2dyZXNzLWVsZW1lbnRlIHtcclxuICBoZWlnaHQ6Y2FsYygxLjVlbSArIDAuNzVyZW0gKyAycHgpO1xyXG59XHJcblxyXG4uc2VsZWN0LWludmVudG9yeSAuaW5wdXQtZ3JvdXAtdGV4dCB7XHJcbiAgbWluLXdpZHRoOiA1LjVlbTtcclxufVxyXG4uZHJvcGRvd24ubXlEcm9wZG93biB7XHJcbiAgd2lkdGg6MTAwJTtcclxufVxyXG4uZHJvcGRvd24ubXlEcm9wZG93biBbYXJpYS1oYXNwb3B1cD10cnVlXSB7XHJcbiAgdGV4dC1hbGlnbjogbGVmdDtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgdGV4dC1pbmRlbnQ6IDFlbTtcclxuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwO1xyXG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDA7XHJcbn1cclxuLmRyb3Bkb3duLm15RHJvcGRvd24gW2FyaWEtaGFzcG9wdXA9dHJ1ZV1bYXJpYS1leHBhbmRlZD10cnVlXSB7XHJcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XHJcbiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDtcclxufVxyXG4uZHJvcGRvd24ubXlEcm9wZG93biBbYXJpYS1oYXNwb3B1cD10cnVlXTo6YWZ0ZXIge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICByaWdodDogMDtcclxuICB0b3A6IDA7XHJcbiAgbWFyZ2luLXRvcDogMWVtO1xyXG4gIG1hcmdpbi1yaWdodDogMWVtO1xyXG59XHJcblxyXG4uZHJvcGRvd24ubXlEcm9wZG93biAuZHJvcGRvd24tbWVudSB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDBweDtcclxuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwcHg7XHJcbiAgbWFyZ2luLXRvcDogMXB4O1xyXG59XHJcbiIsIi5wcm9ncmVzcy5wcm9ncmVzcy1lbGVtZW50ZSB7XG4gIGhlaWdodDogY2FsYygxLjVlbSArIDAuNzVyZW0gKyAycHgpO1xufVxuXG4uc2VsZWN0LWludmVudG9yeSAuaW5wdXQtZ3JvdXAtdGV4dCB7XG4gIG1pbi13aWR0aDogNS41ZW07XG59XG5cbi5kcm9wZG93bi5teURyb3Bkb3duIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5kcm9wZG93bi5teURyb3Bkb3duIFthcmlhLWhhc3BvcHVwPXRydWVdIHtcbiAgdGV4dC1hbGlnbjogbGVmdDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0ZXh0LWluZGVudDogMWVtO1xuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwO1xuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwO1xufVxuXG4uZHJvcGRvd24ubXlEcm9wZG93biBbYXJpYS1oYXNwb3B1cD10cnVlXVthcmlhLWV4cGFuZGVkPXRydWVdIHtcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDA7XG59XG5cbi5kcm9wZG93bi5teURyb3Bkb3duIFthcmlhLWhhc3BvcHVwPXRydWVdOjphZnRlciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogMDtcbiAgbWFyZ2luLXRvcDogMWVtO1xuICBtYXJnaW4tcmlnaHQ6IDFlbTtcbn1cblxuLmRyb3Bkb3duLm15RHJvcGRvd24gLmRyb3Bkb3duLW1lbnUge1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDBweDtcbiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMHB4O1xuICBtYXJnaW4tdG9wOiAxcHg7XG59Il19 */";
    /***/
  },

  /***/
  "./src/app/pages/select-inventory/select-inventory.component.ts":
  /*!**********************************************************************!*\
    !*** ./src/app/pages/select-inventory/select-inventory.component.ts ***!
    \**********************************************************************/

  /*! exports provided: SelectInventoryComponent */

  /***/
  function srcAppPagesSelectInventorySelectInventoryComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SelectInventoryComponent", function () {
      return SelectInventoryComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _shared_services_data_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../shared/services/data.service */
    "./src/app/shared/services/data.service.ts");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/fesm2015/router.js");
    /* harmony import */


    var _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../auth/auth.service */
    "./src/app/pages/auth/auth.service.ts");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _shared_inventory_progress_inventory_progress_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! ../../shared/inventory-progress/inventory-progress.service */
    "./src/app/shared/inventory-progress/inventory-progress.service.ts");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _shared_services_connection_service_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! ../../shared/services/connection-service.service */
    "./src/app/shared/services/connection-service.service.ts");
    /* harmony import */


    var _shared_services_dbsync_log_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! ../../shared/services/dbsync-log.service */
    "./src/app/shared/services/dbsync-log.service.ts");
    /* harmony import */


    var _invent_form_data_services_barcode_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
    /*! ../invent-form/data-services/barcode.service */
    "./src/app/pages/invent-form/data-services/barcode.service.ts");

    var StatusLoadingInventories;

    (function (StatusLoadingInventories) {
      StatusLoadingInventories[StatusLoadingInventories["None"] = 0] = "None";
      StatusLoadingInventories[StatusLoadingInventories["WaitingForNetwork"] = 1] = "WaitingForNetwork";
      StatusLoadingInventories[StatusLoadingInventories["WaitingForServerAccess"] = 2] = "WaitingForServerAccess";
      StatusLoadingInventories[StatusLoadingInventories["Pending"] = 3] = "Pending";
      StatusLoadingInventories[StatusLoadingInventories["Loading"] = 4] = "Loading";
      StatusLoadingInventories[StatusLoadingInventories["FinishedSuccessful"] = 5] = "FinishedSuccessful";
      StatusLoadingInventories[StatusLoadingInventories["Failure"] = 6] = "Failure";
    })(StatusLoadingInventories || (StatusLoadingInventories = {}));

    var SelectInventoryComponent = /*#__PURE__*/function () {
      function SelectInventoryComponent(dataService, route, router, auth, baseData, progressService, connection, dbsyncLogService, bcLookupService) {
        _classCallCheck(this, SelectInventoryComponent);

        this.dataService = dataService;
        this.route = route;
        this.router = router;
        this.auth = auth;
        this.baseData = baseData;
        this.progressService = progressService;
        this.connection = connection;
        this.dbsyncLogService = dbsyncLogService;
        this.bcLookupService = bcLookupService;
        this.faSyncIcon = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_7__["faSyncAlt"];
        this.hasConnection = false;
        this.hasServerConnection = false;
        this.status = '';
        this.statusLoadingUserInventories = StatusLoadingInventories.None;
        this.loadedUserInventories = false;
        this.totalElements = 0;
        this.doneElements = 0;
        this.loading = false;
        this.listMetaData = [];
        this.listMetaMsg = [];
        this.lastMetaErr = '';
        this.lastMetaMsg = '';
        this.showListmetaMsg = false;
        this.tablesLoadingStatus = [];
        this.tablesLoadingStarted = false;
        this.tablesLoadingDetailsIsExpanded = false;
      }

      _createClass(SelectInventoryComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {
          var _this106 = this;

          this.loading = false;
          this.lastInventory = this.baseData.getCurrentInventur();
          this.lastBuilding = this.baseData.getCurrentGebaeude();
          this.lastRaum = this.baseData.getCurrentRaum();
          this.tablesLoadingStarted = Object.keys(this.tablesLoadingStatus).length > 0;
          this.routingSubscription = this.route.params.subscribe(function (params) {
            console.log({
              params: params
            });
          });
          this.hasConnection = this.connection.hasServerAccess;
          this.hasServerConnection = this.connection.hasServerAccess;
          this.subscriptionLoadingStatus = this.dataService.loadingDataChanged.subscribe(function (stat) {
            _this106.tablesLoadingStarted = true;

            var _loop4 = function _loop4(tbl) {
              if (!stat.hasOwnProperty(tbl)) {
                return "continue";
              }

              if (!_this106.tablesLoadingStatus.find(function (tblStat) {
                return tblStat.table === tbl;
              })) {
                _this106.tablesLoadingStatus.push(stat[tbl]);

                return "continue";
              }

              var tblIdx = _this106.tablesLoadingStatus.findIndex(function (tblStat) {
                return tblStat.table === tbl;
              });

              for (var statKey in stat[tbl]) {
                if (stat[tbl].hasOwnProperty(statKey) && stat[tbl][statKey] !== _this106.tablesLoadingStatus[tblIdx][statKey]) {
                  _this106.tablesLoadingStatus[tblIdx][statKey] = stat[tbl][statKey];
                }
              }
            };

            for (var tbl in stat) {
              var _ret = _loop4(tbl);

              if (_ret === "continue") continue;
            }
          });
          this.connectionSubscription = this.connection.monitor().subscribe(function (conn) {
            _this106.hasConnection = conn.hasNetworkConnection;
            _this106.hasServerConnection = conn.hasServerAccess;

            if (_this106.statusLoadingUserInventories < StatusLoadingInventories.FinishedSuccessful) {
              _this106.checkLoadUserInventories();
            }
          });
          this.subscriptionMetaData = this.dbsyncLogService.loadingMetaData.subscribe(function (data) {
            if (data.table) {
              var existing = _this106.listMetaData.find(function (item) {
                return item.table === data.table;
              });

              if (existing) {
                existing.message = data.message;

                if (data.executed) {
                  existing.executed = data.executed;
                }

                if (data.total) {
                  existing.total = data.total;
                }
              }
            }
          });
          this.subscriptionMetaMsg = this.dbsyncLogService.loadingMetaMessage.subscribe(function (data) {
            _this106.lastMetaMsg = data.message;

            _this106.listMetaMsg.push({
              type: 'success',
              message: data.message
            });
          });
          this.subscriptionMetaErr = this.dbsyncLogService.loadingMetaError.subscribe(function (data) {
            _this106.lastMetaErr = data.message;

            _this106.listMetaMsg.push({
              type: 'danger',
              message: data.message
            });
          });

          if (!this.connection.hasNetworkConnection) {
            this.loadUserInventories().then(function (success) {
              _this106.statusLoadingUserInventories = success ? StatusLoadingInventories.FinishedSuccessful : StatusLoadingInventories.Failure;
            })["catch"](function (err) {
              _this106.statusLoadingUserInventories = StatusLoadingInventories.Failure;
              _this106.status = JSON.stringify(err);
            });
          }
        }
      }, {
        key: "closeMsg",
        value: function closeMsg(msg) {
          this.listMetaMsg.splice(this.listMetaMsg.indexOf(msg), 1);
        }
      }, {
        key: "loadLastInventoryDetails",
        value: function loadLastInventoryDetails() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee161() {
            var inv, geb, mandant, rm;
            return regeneratorRuntime.wrap(function _callee161$(_context161) {
              while (1) {
                switch (_context161.prev = _context161.next) {
                  case 0:
                    this.lastInventoryDetails = null;
                    inv = this.baseData.getCurrentInventur();
                    geb = this.baseData.getCurrentGebaeude();
                    _context161.next = 5;
                    return this.dataService.getClient(inv.mid);

                  case 5:
                    mandant = _context161.sent;
                    rm = this.baseData.getCurrentRaum();

                    if (inv && geb && mandant) {
                      this.lastInventoryDetails = {
                        jobid: inv.jobid,
                        mid: inv.mid,
                        gid: geb.gid,
                        Titel: inv.Titel,
                        Mandant: mandant.Mandant,
                        Gebaeude: geb.Gebaeude,
                        routeParams: [inv.mid, geb.gid],
                        Etage: null,
                        Raum: null,
                        Raumbezeichnung: null
                      };

                      if (rm) {
                        this.lastInventoryDetails.ruuid = rm.uuid;
                        this.lastInventoryDetails.Etage = rm.Etage;
                        this.lastInventoryDetails.Raum = rm.Raum;
                        this.lastInventoryDetails.Raumbezeichnung = rm.Raumbezeichnung;
                        this.lastInventoryDetails.routeParams.push(rm.uuid);
                      }
                    }

                  case 8:
                  case "end":
                    return _context161.stop();
                }
              }
            }, _callee161, this);
          }));
        }
      }, {
        key: "gotoLastInventory",
        value: function gotoLastInventory() {
          if (this.lastInventoryDetails && this.lastInventoryDetails.routeParams.length > 1) {
            this.gotoFormInventory.apply(this, this.lastInventoryDetails.routeParams);
          }
        }
      }, {
        key: "gotoFormInventory",
        value: function gotoFormInventory(mid, gid, ruuid) {
          var routeData = ['/form-inventory', mid, gid];

          if (ruuid && ruuid.length > 0) {
            routeData.push(ruuid);
          }

          this.router.navigate(routeData);
        }
      }, {
        key: "checkLoadUserInventories",
        value: function checkLoadUserInventories() {
          var _this107 = this;

          var onlineOnly = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
          var stat = this.statusLoadingUserInventories;

          if (stat < StatusLoadingInventories.FinishedSuccessful) {
            if (stat < StatusLoadingInventories.Pending) {
              if (!this.hasConnection) {
                this.statusLoadingUserInventories = StatusLoadingInventories.WaitingForNetwork;
                return;
              }

              if (!this.hasServerConnection) {
                this.statusLoadingUserInventories = StatusLoadingInventories.WaitingForServerAccess;
                return;
              }

              this.statusLoadingUserInventories = StatusLoadingInventories.Pending;
              this.loadUserInventories().then(function (success) {
                _this107.statusLoadingUserInventories = success ? StatusLoadingInventories.FinishedSuccessful : StatusLoadingInventories.Failure;
              })["catch"](function (err) {
                _this107.statusLoadingUserInventories = StatusLoadingInventories.Failure;
                _this107.status = JSON.stringify(err);
              });
            }
          }
        }
      }, {
        key: "getStatusLoadingInventoryText",
        value: function getStatusLoadingInventoryText(status) {
          return StatusLoadingInventories[status];
        }
      }, {
        key: "loadUserInventories",
        value: function loadUserInventories() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee162() {
            var _this108 = this;

            var uid, lastMid, lastGid, lastJobid, lastRuuid;
            return regeneratorRuntime.wrap(function _callee162$(_context162) {
              while (1) {
                switch (_context162.prev = _context162.next) {
                  case 0:
                    console.log('ngOnInit select-iventory.components.ts');
                    uid = this.auth.getUser().id;
                    lastMid = this.baseData.getCurrentMid() || 0;
                    lastGid = this.baseData.getCurrentGid() || 0;
                    lastJobid = this.baseData.getCurrentJobid();
                    lastRuuid = this.baseData.getCurrentRuuid();
                    _context162.next = 8;
                    return this.dataService.getUserAssignedInventories(uid).then(function (result) {
                      console.log({
                        called: 'this.dataService.getUserAssignedInventories',
                        result: result
                      });
                      _this108.inventories = result;
                      _this108.inventoriesSelectable = _this108.inventories;
                      _this108.lastInventory = _this108.inventories.find(function (inv) {
                        return inv.jobid === lastJobid;
                      });
                      var defaultMid = 0;
                      var defaultGid = 0;
                      var defaultJobid = 0;
                      _this108.statusLoadingUserInventories = StatusLoadingInventories.Loading;

                      if (_this108.lastInventory) {
                        _this108.loadLastInventoryDetails();

                        defaultMid = _this108.lastInventory.mid;
                        defaultGid = _this108.lastInventory.gid;
                        defaultJobid = _this108.lastInventory.jobid;
                      }

                      var aMids = _this108.inventories.map(function (itm) {
                        return itm.mid;
                      });

                      console.log('ngOnInit', {
                        uid: uid,
                        aMids: aMids
                      });
                      return _this108.dataService.getClientList().then(function (mandanten) {
                        _this108.clients = mandanten.filter(function (itm) {
                          return aMids.indexOf(itm.mid) !== -1;
                        });
                        return _this108.clients;
                      }).then(function (clientList) {
                        _this108.setDefaultSelection({
                          mid: defaultMid,
                          gid: defaultGid,
                          jobid: defaultJobid
                        });

                        return true;
                      })["catch"](function (err) {
                        _this108.status = JSON.stringify(err);
                        return false;
                      });
                    })["catch"](function (err) {
                      _this108.status = JSON.stringify(err);
                      return false;
                    });

                  case 8:
                    return _context162.abrupt("return", _context162.sent);

                  case 9:
                  case "end":
                    return _context162.stop();
                }
              }
            }, _callee162, this);
          }));
        }
      }, {
        key: "setDefaultSelection",
        value: function setDefaultSelection(ids) {
          var _this109 = this;

          var clientListIdx = this.getClientListIdxByMid(ids.mid);

          if (-1 !== clientListIdx) {
            var clientChanged = this.clientChanged(clientListIdx);

            if (ids.gid || ids.jobid) {
              clientChanged.then(function (success) {
                if (!success) {
                  return false;
                }

                if (ids.gid) {
                  var buildingsListIdx = _this109.getBuildingListIdxByGid(ids.gid);

                  _this109.buildingChanged(buildingsListIdx);
                }

                if (ids.jobid) {
                  _this109.inventoriesSelectable = _this109.inventories.filter(function (inv) {
                    return inv.mid === ids.mid;
                  });

                  var checkInv = _this109.inventoriesSelectable.find(function (inv) {
                    return inv.jobid === ids.jobid;
                  });

                  if (checkInv) {
                    _this109.inventory = checkInv;

                    if (_this109.lastBuilding) {
                      _this109.inventorySelectionChanged(checkInv.jobid).then(function () {
                        var checkGeb = _this109.buildings.find(function (b) {
                          return b.gid === _this109.lastBuilding.gid;
                        });

                        if (checkGeb) {
                          _this109.building = checkGeb;
                        }
                      });
                    }
                  }
                }
              });
            }
          }
        }
      }, {
        key: "getClientListIdxByMid",
        value: function getClientListIdxByMid(mid) {
          if (!mid) {
            return -1;
          }

          for (var i = 0; i < this.clients.length; i++) {
            if (this.clients[i].mid === mid) {
              return i;
            }
          }

          return -1;
        }
      }, {
        key: "getBuildingListIdxByGid",
        value: function getBuildingListIdxByGid(gid) {
          if (!gid) {
            return -1;
          }

          for (var i = 0; i < this.buildings.length; i++) {
            if (this.buildings[i].mid === gid) {
              return i;
            }
          }

          return -1;
        }
      }, {
        key: "ngOnDestroy",
        value: function ngOnDestroy() {
          this.routingSubscription.unsubscribe();
          this.connectionSubscription.unsubscribe();
          this.subscriptionMetaMsg.unsubscribe();
          this.subscriptionMetaErr.unsubscribe();
          this.subscriptionMetaData.unsubscribe();
        }
      }, {
        key: "clientChanged",
        value: function clientChanged(clientIdx) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee163() {
            var _this110 = this;

            return regeneratorRuntime.wrap(function _callee163$(_context163) {
              while (1) {
                switch (_context163.prev = _context163.next) {
                  case 0:
                    this.client = this.clients[clientIdx];
                    console.log('client changed to ', {
                      clientIdx: clientIdx,
                      this_clients: this.clients,
                      this_client: this.client
                    });
                    _context163.next = 4;
                    return this.dataService.getBuildingList(this.client.mid);

                  case 4:
                    this.buildings = _context163.sent;
                    this.inventoriesSelectable = this.inventories.filter(function (inv) {
                      return inv.mid === _this110.client.mid;
                    });
                    console.log('assign selection buildings: ', this.buildings);

                    if (this.inventory && this.inventory.mid !== this.client.mid) {
                      this.inventory = null;
                      this.building = null;
                    }

                    return _context163.abrupt("return", true);

                  case 9:
                  case "end":
                    return _context163.stop();
                }
              }
            }, _callee163, this);
          }));
        }
      }, {
        key: "onSubmit",
        value: function onSubmit() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee164() {
            return regeneratorRuntime.wrap(function _callee164$(_context164) {
              while (1) {
                switch (_context164.prev = _context164.next) {
                  case 0:
                    this.loading = true;
                    console.log(this.selectForm);

                    if (!(!this.client || !this.inventory || !this.building)) {
                      _context164.next = 5;
                      break;
                    }

                    this.status = 'Bitte vervollständige die Auswahl!';
                    return _context164.abrupt("return");

                  case 5:
                    this.jobid = this.inventory.jobid;
                    this.baseData.setCurrentMandant(this.client);
                    this.baseData.setCurrentInventur(this.inventory);
                    this.baseData.setCurrentGebaeude(this.building);
                    _context164.t1 = this.lastInventory && this.lastInventory.jobid === this.jobid && this.lastBuilding && this.lastBuilding.gid === this.building.gid;

                    if (!_context164.t1) {
                      _context164.next = 14;
                      break;
                    }

                    _context164.next = 13;
                    return this.dataService.hasValidInventurRevId(this.inventory.jobid);

                  case 13:
                    _context164.t1 = _context164.sent;

                  case 14:
                    _context164.t0 = _context164.t1;

                    if (!_context164.t0) {
                      _context164.next = 19;
                      break;
                    }

                    _context164.next = 18;
                    return this.dataService.hasAllInventurData(this.inventory.jobid);

                  case 18:
                    _context164.t0 = _context164.sent;

                  case 19:
                    if (!_context164.t0) {
                      _context164.next = 26;
                      break;
                    }

                    console.log('SelectInventoryComponent #410 onSubmit gotoLastInventory');
                    _context164.next = 23;
                    return this.bcLookupService.rebuildOnRunningSystemByJobid(this.jobid);

                  case 23:
                    this.gotoLastInventory();
                    _context164.next = 32;
                    break;

                  case 26:
                    console.log('SelectInventoryComponent #414 onSubmit dataService.loadInventurDataByInventurId', this.inventory.jobid);
                    this.status = 'Bitte warten .... Inventarisierungsdaten werden vom Server geladen.';
                    _context164.next = 30;
                    return this.dataService.loadInventurDataByInventurId(this.inventory.jobid);

                  case 30:
                    this.status = 'Daten wurden geladen'; // More Control for navigate

                    this.router.navigate(['/form-inventory', this.client.mid, this.building.gid]);

                  case 32:
                  case "end":
                    return _context164.stop();
                }
              }
            }, _callee164, this);
          }));
        }
      }, {
        key: "buildingChanged",
        value: function buildingChanged(buildingListIdx) {
          var _this111 = this;

          this.building = this.buildings[buildingListIdx];
          this.progressService.getCurrentGebaeudeProgress().then(function (progress) {
            _this111.totalElements = progress.total;
            _this111.doneElements = progress.done;
          });
        }
      }, {
        key: "inventorySelectionChanged",
        value: function inventorySelectionChanged(jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee165() {
            return regeneratorRuntime.wrap(function _callee165$(_context165) {
              while (1) {
                switch (_context165.prev = _context165.next) {
                  case 0:
                    this.inventory = this.inventories.find(function (ivy) {
                      return ivy.jobid === jobid;
                    });
                    _context165.next = 3;
                    return this.dataService.getBuildingListByJobid(this.inventory.jobid, this.inventory.mid);

                  case 3:
                    this.buildings = _context165.sent;

                  case 4:
                  case "end":
                    return _context165.stop();
                }
              }
            }, _callee165, this);
          }));
        }
      }, {
        key: "progressAmount",
        get: function get() {
          if (typeof this.doneElements !== 'number' || this.doneElements <= 0) {
            return 0;
          }

          if (typeof this.totalElements !== 'number') {
            return 0;
          }

          var done = this.doneElements;
          var total = this.totalElements;
          return total > 0 ? Math.round(done * 1000 / total) / 10 : 0;
        }
      }]);

      return SelectInventoryComponent;
    }();

    SelectInventoryComponent.ctorParameters = function () {
      return [{
        type: _shared_services_data_service__WEBPACK_IMPORTED_MODULE_2__["DataService"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"]
      }, {
        type: _auth_auth_service__WEBPACK_IMPORTED_MODULE_4__["AuthService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_5__["BasedataService"]
      }, {
        type: _shared_inventory_progress_inventory_progress_service__WEBPACK_IMPORTED_MODULE_6__["InventoryProgressService"]
      }, {
        type: _shared_services_connection_service_service__WEBPACK_IMPORTED_MODULE_8__["ConnectionService"]
      }, {
        type: _shared_services_dbsync_log_service__WEBPACK_IMPORTED_MODULE_9__["DbsyncLogService"]
      }, {
        type: _invent_form_data_services_barcode_service__WEBPACK_IMPORTED_MODULE_10__["BarcodeService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"])('f', {
      "static": false
    })], SelectInventoryComponent.prototype, "selectForm", void 0);
    SelectInventoryComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-select-inventory',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./select-inventory.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/select-inventory/select-inventory.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./select-inventory.component.scss */
      "./src/app/pages/select-inventory/select-inventory.component.scss"))["default"]]
    })], SelectInventoryComponent);
    /***/
  },

  /***/
  "./src/app/pages/settings/settings.component.scss":
  /*!********************************************************!*\
    !*** ./src/app/pages/settings/settings.component.scss ***!
    \********************************************************/

  /*! exports provided: default */

  /***/
  function srcAppPagesSettingsSettingsComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".variables-list .row + .row {\n  border-top: 1px solid rgba(86, 61, 124, 0.2);\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2V0dGluZ3MvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxwYWdlc1xcc2V0dGluZ3NcXHNldHRpbmdzLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9wYWdlcy9zZXR0aW5ncy9zZXR0aW5ncy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDRDQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvc2V0dGluZ3Mvc2V0dGluZ3MuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudmFyaWFibGVzLWxpc3QgLnJvdyArIC5yb3cge1xyXG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDg2LCA2MSwgMTI0LCAuMik7XHJcbiAgcGFkZGluZy10b3A6IDRweDtcclxuICBwYWRkaW5nLWJvdHRvbTogNHB4O1xyXG59XHJcbiIsIi52YXJpYWJsZXMtbGlzdCAucm93ICsgLnJvdyB7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDg2LCA2MSwgMTI0LCAwLjIpO1xuICBwYWRkaW5nLXRvcDogNHB4O1xuICBwYWRkaW5nLWJvdHRvbTogNHB4O1xufSJdfQ== */";
    /***/
  },

  /***/
  "./src/app/pages/settings/settings.component.ts":
  /*!******************************************************!*\
    !*** ./src/app/pages/settings/settings.component.ts ***!
    \******************************************************/

  /*! exports provided: SettingsComponent */

  /***/
  function srcAppPagesSettingsSettingsComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SettingsComponent", function () {
      return SettingsComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _shared_services_variables_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../shared/services/variables.service */
    "./src/app/shared/services/variables.service.ts");
    /* harmony import */


    var _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../shared/services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _invent_form_data_services_barcode_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../invent-form/data-services/barcode.service */
    "./src/app/pages/invent-form/data-services/barcode.service.ts");
    /* harmony import */


    var _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../../shared/services/dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var _shared_services_sounds_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! ../../shared/services/sounds.service */
    "./src/app/shared/services/sounds.service.ts");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/fesm2015/router.js");

    var SettingsComponent = /*#__PURE__*/function () {
      function SettingsComponent(dexieService, variables, baseData, barcodeLookup, sounds, router) {
        _classCallCheck(this, SettingsComponent);

        this.dexieService = dexieService;
        this.variables = variables;
        this.baseData = baseData;
        this.barcodeLookup = barcodeLookup;
        this.sounds = sounds;
        this.router = router;
        this.variableList = [];
        this.buildBcLookup = false;
        this.useOverlay = 0;
        this.blobAlertTimer = null;
        this.changedManualBCInput = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.dbName = this.dexieService.name;
        this.dbVersion = this.dexieService.verno;
      }

      _createClass(SettingsComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {
          var _this112 = this;

          this.reloadVariableList();
          this.variables.get('manualBarcodeInput', false).then(function (val) {
            _this112.enableManualBCInput = !!val;
          });
        }
      }, {
        key: "reloadVariableList",
        value: function reloadVariableList() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee166() {
            return regeneratorRuntime.wrap(function _callee166$(_context166) {
              while (1) {
                switch (_context166.prev = _context166.next) {
                  case 0:
                    _context166.next = 2;
                    return this.variables.getAll();

                  case 2:
                    this.variableList = _context166.sent;

                  case 3:
                  case "end":
                    return _context166.stop();
                }
              }
            }, _callee166, this);
          }));
        }
      }, {
        key: "changeManualBCInput",
        value: function changeManualBCInput(event) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee167() {
            return regeneratorRuntime.wrap(function _callee167$(_context167) {
              while (1) {
                switch (_context167.prev = _context167.next) {
                  case 0:
                    console.log('changeManualBCInput', {
                      event: event
                    });
                    this.variables.set('manualBarcodeInput', this.enableManualBCInput);
                    this.changedManualBCInput.emit(this.enableManualBCInput);

                  case 3:
                  case "end":
                    return _context167.stop();
                }
              }
            }, _callee167, this);
          }));
        }
      }, {
        key: "dbClear",
        value: function dbClear() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee168() {
            return regeneratorRuntime.wrap(function _callee168$(_context168) {
              while (1) {
                switch (_context168.prev = _context168.next) {
                  case 0:
                    this.baseData.setCurrentInventur(null);
                    this.baseData.setCurrentRaum(null);
                    this.baseData.setCurrentGebaeude(null);
                    this.baseData.setCurrentRaum(null);
                    _context168.next = 6;
                    return this.dexieService.clearDB();

                  case 6:
                    this.router.navigate(['/select-inventory']);

                  case 7:
                  case "end":
                    return _context168.stop();
                }
              }
            }, _callee168, this);
          }));
        }
      }, {
        key: "dbDelete",
        value: function dbDelete() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee169() {
            return regeneratorRuntime.wrap(function _callee169$(_context169) {
              while (1) {
                switch (_context169.prev = _context169.next) {
                  case 0:
                    this.baseData.setCurrentInventur(null);
                    this.baseData.setCurrentRaum(null);
                    this.baseData.setCurrentGebaeude(null);
                    this.baseData.setCurrentRaum(null);
                    _context169.next = 6;
                    return this.dexieService.deleteDB();

                  case 6:
                    this.router.navigate(['/select-inventory']);

                  case 7:
                  case "end":
                    return _context169.stop();
                }
              }
            }, _callee169, this);
          }));
        }
      }, {
        key: "reIndexBarcodeLookup",
        value: function reIndexBarcodeLookup() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee170() {
            var _this113 = this;

            return regeneratorRuntime.wrap(function _callee170$(_context170) {
              while (1) {
                switch (_context170.prev = _context170.next) {
                  case 0:
                    this.buildBcLookup = true;
                    console.log('Start rebuildOnRunningSystem');
                    this.barcodeLookup.rebuildOnRunningSystem().then(function (result) {
                      console.log('Finished BC-Lookup-Rebuild', {
                        result: result
                      });
                    })["catch"](function (err) {
                      console.error(err);
                    })["finally"](function () {
                      _this113.buildBcLookup = false;
                    });
                    this.reloadVariableList();

                  case 4:
                  case "end":
                    return _context170.stop();
                }
              }
            }, _callee170, this);
          }));
        }
      }, {
        key: "playSuccess",
        value: function playSuccess() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee171() {
            return regeneratorRuntime.wrap(function _callee171$(_context171) {
              while (1) {
                switch (_context171.prev = _context171.next) {
                  case 0:
                    this.showBlobAlertSuccess();
                    this.sounds.playSuccess();

                  case 2:
                  case "end":
                    return _context171.stop();
                }
              }
            }, _callee171, this);
          }));
        }
      }, {
        key: "playError",
        value: function playError() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee172() {
            return regeneratorRuntime.wrap(function _callee172$(_context172) {
              while (1) {
                switch (_context172.prev = _context172.next) {
                  case 0:
                    this.showBlobAlertError();
                    this.sounds.playError();

                  case 2:
                  case "end":
                    return _context172.stop();
                }
              }
            }, _callee172, this);
          }));
        }
      }, {
        key: "showBlobAlertSuccess",
        value: function showBlobAlertSuccess() {
          this.showBlobAlert('success');
        }
      }, {
        key: "showBlobAlertError",
        value: function showBlobAlertError() {
          this.showBlobAlert('danger');
        }
      }, {
        key: "showBlobAlert",
        value: function showBlobAlert(alertType) {
          var _this114 = this;

          this.useOverlay = this.useOverlay < 2 ? this.useOverlay + 1 : 1;
          this.blobAlert = null;

          if (this.blobAlertTimer) {
            clearTimeout(this.blobAlertTimer);
          }

          this.blobAlert = alertType;
          this.blobAlertTimer = setTimeout(function () {
            _this114.blobAlert = null;
            _this114.useOverlay = 0;
          }, 1200);
        }
      }]);

      return SettingsComponent;
    }();

    SettingsComponent.ctorParameters = function () {
      return [{
        type: _shared_services_dexie_service__WEBPACK_IMPORTED_MODULE_5__["DexieService"]
      }, {
        type: _shared_services_variables_service__WEBPACK_IMPORTED_MODULE_2__["VariablesService"]
      }, {
        type: _shared_services_basedata_service__WEBPACK_IMPORTED_MODULE_3__["BasedataService"]
      }, {
        type: _invent_form_data_services_barcode_service__WEBPACK_IMPORTED_MODULE_4__["BarcodeService"]
      }, {
        type: _shared_services_sounds_service__WEBPACK_IMPORTED_MODULE_6__["SoundsService"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_7__["Router"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], SettingsComponent.prototype, "changedManualBCInput", void 0);
    SettingsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-settings',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./settings.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/pages/settings/settings.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./settings.component.scss */
      "./src/app/pages/settings/settings.component.scss"))["default"]]
    })], SettingsComponent);
    /***/
  },

  /***/
  "./src/app/shared/components/ngbheader/ngbheader.component.scss":
  /*!**********************************************************************!*\
    !*** ./src/app/shared/components/ngbheader/ngbheader.component.scss ***!
    \**********************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppSharedComponentsNgbheaderNgbheaderComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".app-navbar,\nnav.navbar {\n  background-color: #f2f2f2;\n}\n\nnav.navbar .navbar-brand img.logo {\n  width: 40vw;\n  max-width: 221px;\n}\n\n.rowed-inline {\n  justify-content: space-between;\n  flex-direction: row;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvbmdiaGVhZGVyL0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxcc2hhcmVkXFxjb21wb25lbnRzXFxuZ2JoZWFkZXJcXG5nYmhlYWRlci5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvbmdiaGVhZGVyL25nYmhlYWRlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7RUFFRSx5QkFBQTtBQ0NGOztBRENBO0VBQ0UsV0FBQTtFQUNBLGdCQUFBO0FDRUY7O0FEQ0E7RUFDRSw4QkFBQTtFQUNBLG1CQUFBO0FDRUYiLCJmaWxlIjoic3JjL2FwcC9zaGFyZWQvY29tcG9uZW50cy9uZ2JoZWFkZXIvbmdiaGVhZGVyLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmFwcC1uYXZiYXIsXHJcbm5hdi5uYXZiYXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7XHJcbn1cclxubmF2Lm5hdmJhciAubmF2YmFyLWJyYW5kIGltZy5sb2dvIHtcclxuICB3aWR0aDogNDB2dztcclxuICBtYXgtd2lkdGg6MjIxcHg7XHJcbn1cclxuXHJcbi5yb3dlZC1pbmxpbmUge1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG59XHJcbiIsIi5hcHAtbmF2YmFyLFxubmF2Lm5hdmJhciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7XG59XG5cbm5hdi5uYXZiYXIgLm5hdmJhci1icmFuZCBpbWcubG9nbyB7XG4gIHdpZHRoOiA0MHZ3O1xuICBtYXgtd2lkdGg6IDIyMXB4O1xufVxuXG4ucm93ZWQtaW5saW5lIHtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xufSJdfQ== */";
    /***/
  },

  /***/
  "./src/app/shared/components/ngbheader/ngbheader.component.ts":
  /*!********************************************************************!*\
    !*** ./src/app/shared/components/ngbheader/ngbheader.component.ts ***!
    \********************************************************************/

  /*! exports provided: NgbheaderComponent */

  /***/
  function srcAppSharedComponentsNgbheaderNgbheaderComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "NgbheaderComponent", function () {
      return NgbheaderComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @fortawesome/free-solid-svg-icons */
    "./node_modules/@fortawesome/free-solid-svg-icons/index.es.js");
    /* harmony import */


    var _services_basedata_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! @angular/router */
    "./node_modules/@angular/router/fesm2015/router.js");

    var NgbheaderComponent = /*#__PURE__*/function () {
      function NgbheaderComponent(baseData, router) {
        _classCallCheck(this, NgbheaderComponent);

        this.baseData = baseData;
        this.router = router;
        this.collapsed = true;
        this.faCog = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faCog"];
        this.faHome = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faHome"];
        this.faPlayCircle = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faPlayCircle"];
        this.faPowerOff = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faPowerOff"];
        this.faSync = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faSync"];
        this.faUser = _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__["faUser"];
        this.isLoginPage = false;
      }

      _createClass(NgbheaderComponent, [{
        key: "continueLastInventory",
        value: function continueLastInventory() {
          //  routerLink="/form-inventory"
          // { path: 'form-inventory/:clientid/:buildingid/:roomid', component: InventFormComponent },
          var jobid = this.baseData.getCurrentJobid();
          var mid = this.baseData.getCurrentMid();
          var gid = this.baseData.getCurrentGid();
          var room = this.baseData.getCurrentRaum();
          console.log('NgbheaderComponent #25 continuelastInventory', {
            jobid: jobid,
            mid: mid,
            gid: gid,
            room: room
          });

          if (jobid && mid && gid && room && room.gid === gid) {
            console.log('NgbheaderComponent #28 continuelastInventory goto form-inventory with room');
            return this.router.navigate(['/form-inventory', mid, gid, room.uuid]);
          }

          if (jobid && mid && gid) {
            console.log('NgbheaderComponent #35 continuelastInventory goto form-inventory without room');
            return this.router.navigate(['/form-inventory', mid, gid]);
          }

          console.log('NgbheaderComponent #28 continuelastInventory goto select-inventory');
          return this.router.navigate(['/select-inventory']);
        }
      }]);

      return NgbheaderComponent;
    }();

    NgbheaderComponent.ctorParameters = function () {
      return [{
        type: _services_basedata_service__WEBPACK_IMPORTED_MODULE_3__["BasedataService"]
      }, {
        type: _angular_router__WEBPACK_IMPORTED_MODULE_4__["Router"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], NgbheaderComponent.prototype, "isLoginPage", void 0);
    NgbheaderComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-ngbheader',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./ngbheader.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/ngbheader/ngbheader.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./ngbheader.component.scss */
      "./src/app/shared/components/ngbheader/ngbheader.component.scss"))["default"]]
    })], NgbheaderComponent);
    /***/
  },

  /***/
  "./src/app/shared/components/progressbar/progressbar.component.scss":
  /*!**************************************************************************!*\
    !*** ./src/app/shared/components/progressbar/progressbar.component.scss ***!
    \**************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppSharedComponentsProgressbarProgressbarComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = ".progress.progress-elemente {\n  height: calc(1.5em + 0.75rem + 2px);\n  position: relative;\n}\n\n.progress-text {\n  position: absolute;\n  top: 0;\n  left: calc(50% - 1rem);\n  color: #fff;\n  line-height: calc(1.5em + 0.75rem + 2px);\n}\n\nbutton.btn.btn-sx {\n  font-size: 0.7rem;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvcHJvZ3Jlc3NiYXIvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxzaGFyZWRcXGNvbXBvbmVudHNcXHByb2dyZXNzYmFyXFxwcm9ncmVzc2Jhci5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtQ0FBQTtFQUNBLGtCQUFBO0FDQ0Y7O0FERUE7RUFDRSxrQkFBQTtFQUNBLE1BQUE7RUFDQSxzQkFBQTtFQUNBLFdBQUE7RUFDQSx3Q0FBQTtBQ0NGOztBREVBO0VBQ0UsaUJBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9jb21wb25lbnRzL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnByb2dyZXNzLnByb2dyZXNzLWVsZW1lbnRlIHtcclxuICBoZWlnaHQ6Y2FsYygxLjVlbSArIDAuNzVyZW0gKyAycHgpO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuLnByb2dyZXNzLXRleHR7XHJcbiAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgdG9wOjA7XHJcbiAgbGVmdDogY2FsYyg1MCUgLSAxcmVtKTtcclxuICBjb2xvcjojZmZmO1xyXG4gIGxpbmUtaGVpZ2h0OiBjYWxjKDEuNWVtICsgMC43NXJlbSArIDJweCk7XHJcbn1cclxuXHJcbmJ1dHRvbi5idG4uYnRuLXN4IHtcclxuICBmb250LXNpemU6IDAuN3JlbTtcclxufVxyXG4iLCIucHJvZ3Jlc3MucHJvZ3Jlc3MtZWxlbWVudGUge1xuICBoZWlnaHQ6IGNhbGMoMS41ZW0gKyAwLjc1cmVtICsgMnB4KTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4ucHJvZ3Jlc3MtdGV4dCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiBjYWxjKDUwJSAtIDFyZW0pO1xuICBjb2xvcjogI2ZmZjtcbiAgbGluZS1oZWlnaHQ6IGNhbGMoMS41ZW0gKyAwLjc1cmVtICsgMnB4KTtcbn1cblxuYnV0dG9uLmJ0bi5idG4tc3gge1xuICBmb250LXNpemU6IDAuN3JlbTtcbn0iXX0= */";
    /***/
  },

  /***/
  "./src/app/shared/components/progressbar/progressbar.component.ts":
  /*!************************************************************************!*\
    !*** ./src/app/shared/components/progressbar/progressbar.component.ts ***!
    \************************************************************************/

  /*! exports provided: ProgressbarComponent */

  /***/
  function srcAppSharedComponentsProgressbarProgressbarComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ProgressbarComponent", function () {
      return ProgressbarComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");

    var ProgressbarComponent = /*#__PURE__*/function () {
      function ProgressbarComponent() {
        _classCallCheck(this, ProgressbarComponent);

        this.title = 'Fortschrittsanzeige';
        this.shortTitle = '';
        this.type = 'success';
        this.restType = 'danger';
        this.value = 0;
        this.total = 0;
        this.sendDoneClick = false;
        this.sendRestClick = false;
        this.clickedDone = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.clickedRest = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
      }

      _createClass(ProgressbarComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {}
      }, {
        key: "onClickDone",
        value: function onClickDone(e) {
          console.log('onClickDone', {
            e: e
          });
          this.clickedDone.emit(e);
        }
      }, {
        key: "onClickBarDone",
        value: function onClickBarDone(e) {
          e.stopPropagation();
          this.onClickDone(e);
        }
      }, {
        key: "onClickRest",
        value: function onClickRest(e) {
          console.log('onClickRest', {
            e: e
          });
          this.clickedRest.emit(e);
        }
      }, {
        key: "short",
        get: function get() {
          return this.shortTitle ? this.shortTitle : this.title;
        }
      }, {
        key: "progressAmount",
        get: function get() {
          return !this.value ? 0 : !this.total ? 50 : Math.round(this.value * 1000 / this.total) / 10;
        }
      }, {
        key: "progressRest",
        get: function get() {
          return 100 - this.progressAmount;
        }
      }, {
        key: "rest",
        get: function get() {
          return Math.min(0, this.total - this.value);
        }
      }, {
        key: "doneText",
        get: function get() {
          return this.doneAmountText + this.donePercentText;
        }
      }, {
        key: "doneAmountText",
        get: function get() {
          return this.value + ' St';
        }
      }, {
        key: "donePercentText",
        get: function get() {
          return !this.total || this.total === 100 ? '' : '' + this.progressAmount + ' %';
        }
      }, {
        key: "totalText",
        get: function get() {
          return (this.total ? this.total.toString() : '??') + ' St';
        }
      }, {
        key: "restText",
        get: function get() {
          return !this.total ? '??' : this.total - this.value + ' St' + (!this.total || this.total === 100 ? '' : ' (' + this.progressRest + ' %)');
        }
      }, {
        key: "restAmountText",
        get: function get() {
          return this.total ? '' + Math.max(0, this.total - this.value) + ' St' : '';
        }
      }, {
        key: "restPercentText",
        get: function get() {
          return this.total ? '' + this.progressRest + ' %' : '';
        }
      }]);

      return ProgressbarComponent;
    }();

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], ProgressbarComponent.prototype, "title", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], ProgressbarComponent.prototype, "shortTitle", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], ProgressbarComponent.prototype, "type", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], ProgressbarComponent.prototype, "restType", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], ProgressbarComponent.prototype, "value", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], ProgressbarComponent.prototype, "total", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], ProgressbarComponent.prototype, "sendDoneClick", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], ProgressbarComponent.prototype, "sendRestClick", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], ProgressbarComponent.prototype, "clickedDone", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], ProgressbarComponent.prototype, "clickedRest", void 0);
    ProgressbarComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-progressbar',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./progressbar.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/progressbar/progressbar.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./progressbar.component.scss */
      "./src/app/shared/components/progressbar/progressbar.component.scss"))["default"]]
    })], ProgressbarComponent);
    /***/
  },

  /***/
  "./src/app/shared/components/scannerdetection/scannerdetection.component.scss":
  /*!************************************************************************************!*\
    !*** ./src/app/shared/components/scannerdetection/scannerdetection.component.scss ***!
    \************************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppSharedComponentsScannerdetectionScannerdetectionComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9jb21wb25lbnRzL3NjYW5uZXJkZXRlY3Rpb24vc2Nhbm5lcmRldGVjdGlvbi5jb21wb25lbnQuc2NzcyJ9 */";
    /***/
  },

  /***/
  "./src/app/shared/components/scannerdetection/scannerdetection.component.ts":
  /*!**********************************************************************************!*\
    !*** ./src/app/shared/components/scannerdetection/scannerdetection.component.ts ***!
    \**********************************************************************************/

  /*! exports provided: ScannerdetectionComponent */

  /***/
  function srcAppSharedComponentsScannerdetectionScannerdetectionComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ScannerdetectionComponent", function () {
      return ScannerdetectionComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");

    var ScannerdetectionComponent = /*#__PURE__*/function () {
      function ScannerdetectionComponent() {
        _classCallCheck(this, ScannerdetectionComponent);

        this.input = '';
        this.rawInput = '';
        this.keyDownEvents = [];
        this.lastKeyEventTime = 0;
        this.lastTimer = null;
        this.lastTimerTime = null;
        this.isInDebugMode = false;
        this.detectorConfig = {
          minLength: 5,
          maxLength: 32,
          scannerStartsWith: '',
          scannerEndsWith: '',
          scanTimeout: 100,
          ignoreChars: '',
          ignoreEndsWith: true,
          ignoreOverElements: ['.scanner-detect-ignore'],
          barcodeType: 'code128'
        };
        this.scanned = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
      }

      _createClass(ScannerdetectionComponent, [{
        key: "onKeyDown",
        value: function onKeyDown(event, useTarget) {
          var _this115 = this;

          if (this.isInDebugMode) {
            console.log('#55 scannerDetection Key-Down-Event', {
              event: event,
              useTarget: useTarget
            });
          }

          var target = useTarget;
          var targetTagName = target.tagName;
          var targetElementId = target.id;
          var targetClassName = target.className;
          var ignoreElements = this.detectorConfig.ignoreOverElements;
          var emitScanData = true;
          var ignoreTagNames = ignoreElements.filter(function (name) {
            return !name.startsWith('.') && !name.startsWith('#');
          }).map(function (name) {
            return name.toUpperCase();
          });
          var ignoreElementIds = ignoreElements.filter(function (name) {
            return name.startsWith('#');
          }).map(function (name) {
            return name.substr(1);
          });
          var ignoreClassNames = ignoreElements.filter(function (name) {
            return name.startsWith('.');
          }).map(function (name) {
            return name.substr(1);
          });
          var isEditableTextInput = target instanceof HTMLInputElement && target.tagName === 'input' && target.type.match(/text|number|/) && !target.readOnly && !target.disabled;

          if (ignoreElementIds.indexOf(targetElementId) !== -1) {
            emitScanData = false;
          }

          if (ignoreClassNames.indexOf(targetClassName) !== -1) {
            emitScanData = false;
          }

          if (ignoreTagNames.indexOf(targetTagName) !== -1) {
            emitScanData = false;
          }

          if (isEditableTextInput) {
            emitScanData = false;
          }

          if (!emitScanData && this.isInDebugMode) {
            console.log('#89 scannerDetection target is not our target: ', {
              useTarget: useTarget,
              isEditableTextInput: isEditableTextInput,
              ignoreTagNames: ignoreTagNames,
              ignoreElementIds: ignoreElementIds,
              ignoreClassNames: ignoreClassNames
            });
            return;
          }

          var now = Date.now();
          var diff = now - this.lastKeyEventTime;
          var isScanInput = diff > this.detectorConfig.scanTimeout;
          var key = 'key' in event ? event.key : '';
          var isShiftKey = event.shiftKey;

          if (!isScanInput) {
            this.input = key;
            this.rawInput = key;

            if (this.isInDebugMode) {
              console.log('#101 scannerDetection Start, input', this.input);
            }
          } else {
            this.rawInput += '|' + key;

            if (this.isInDebugMode) {
              console.log('#109 scannerDetection isScanInput', {
                target: target,
                key: key,
                'this.input': this.input,
                'event.type': event.type,
                event: event
              });
            }

            if (key.length === 1) {
              this.input += !isShiftKey ? key : key.toUpperCase();
              var barcode = this.input;

              if (this.isInDebugMode) {
                console.log('#106 scannerDetection add Char to Barcode', {
                  key: key,
                  barcode: barcode
                });
              }
            } else if (key === 'Tab') {
              this.input += '\t';
            } else if (key === 'Enter') {
              this.input += '\n';
            }
          }

          this.lastTimerTime = now;

          if (this.lastTimer) {
            clearTimeout(this.lastTimer);
          }

          this.lastTimer = setTimeout(function () {
            var input = _this115.input;

            if (input.indexOf('ß') !== -1) {
              input = input.split('ß').join('-');
            }

            var barcode = input;
            var rawInput = _this115.rawInput;
            var keyDownEvents = _this115.keyDownEvents;

            if (_this115.isInDebugMode) {
              console.log('#138 scannerDetection Emit After Timeout', {
                key: key,
                barcode: barcode
              });
            }

            _this115.input = '';

            if (barcode.length >= 5) {
              _this115.scanned.emit({
                barcode: barcode,
                rawInput: rawInput,
                length: barcode.length,
                valid: true,
                debugData: {
                  keyDownEvents: keyDownEvents
                }
              });
            }
          }, this.detectorConfig.scanTimeout);
        }
      }, {
        key: "ngOnInit",
        value: function ngOnInit() {}
      }, {
        key: "config",
        set: function set(input) {
          this.detectorConfig = Object.assign(this.detectorConfig, input);
        }
      }]);

      return ScannerdetectionComponent;
    }();

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()], ScannerdetectionComponent.prototype, "config", null);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], ScannerdetectionComponent.prototype, "scanned", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"])('window:keydown', ['$event', '$event.target'])], ScannerdetectionComponent.prototype, "onKeyDown", null);
    ScannerdetectionComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-scannerdetection',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./scannerdetection.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/scannerdetection/scannerdetection.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./scannerdetection.component.scss */
      "./src/app/shared/components/scannerdetection/scannerdetection.component.scss"))["default"]]
    })], ScannerdetectionComponent);
    /***/
  },

  /***/
  "./src/app/shared/components/status-check/status-check.component.scss":
  /*!****************************************************************************!*\
    !*** ./src/app/shared/components/status-check/status-check.component.scss ***!
    \****************************************************************************/

  /*! exports provided: default */

  /***/
  function srcAppSharedComponentsStatusCheckStatusCheckComponentScss(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony default export */


    __webpack_exports__["default"] = "\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9jb21wb25lbnRzL3N0YXR1cy1jaGVjay9zdGF0dXMtY2hlY2suY29tcG9uZW50LnNjc3MifQ== */";
    /***/
  },

  /***/
  "./src/app/shared/components/status-check/status-check.component.ts":
  /*!**************************************************************************!*\
    !*** ./src/app/shared/components/status-check/status-check.component.ts ***!
    \**************************************************************************/

  /*! exports provided: StatusCheckComponent */

  /***/
  function srcAppSharedComponentsStatusCheckStatusCheckComponentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "StatusCheckComponent", function () {
      return StatusCheckComponent;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _services_connection_service_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../../services/connection-service.service */
    "./src/app/shared/services/connection-service.service.ts");
    /* harmony import */


    var _services_data_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../../services/data.service */
    "./src/app/shared/services/data.service.ts");
    /* harmony import */


    var _services_dbsync_client_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../../services/dbsync-client.service */
    "./src/app/shared/services/dbsync-client.service.ts");
    /* harmony import */


    var _environments_environment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ../../../../environments/environment */
    "./src/environments/environment.ts");

    var StatusCheckComponent = /*#__PURE__*/function () {
      function StatusCheckComponent(connectionService, dataService, syncService) {
        _classCallCheck(this, StatusCheckComponent);

        this.connectionService = connectionService;
        this.dataService = dataService;
        this.syncService = syncService;
        this.currentApplicationVersion = _environments_environment__WEBPACK_IMPORTED_MODULE_5__["environment"].appVersion;
        this.numUnsynced = -1;
      }

      _createClass(StatusCheckComponent, [{
        key: "ngOnInit",
        value: function ngOnInit() {
          var _this116 = this;

          this.syncService.numUnsyncedChangeLogs().then(function (amount) {
            _this116.numUnsynced = amount;
          });
          this.connectionSubscription = this.connectionService.monitor().subscribe(function (currentState) {
            console.log(currentState);
            _this116.currentState = currentState;
          });
          this.unsyncedAmountChangeSubscription = this.dataService.clientSyncAmountChanged.subscribe(function (amount) {
            _this116.numUnsynced = amount;
          });
        }
      }, {
        key: "ngOnDestroy",
        value: function ngOnDestroy() {
          this.connectionSubscription.unsubscribe();
          this.unsyncedAmountChangeSubscription.unsubscribe();
        }
      }]);

      return StatusCheckComponent;
    }();

    StatusCheckComponent.ctorParameters = function () {
      return [{
        type: _services_connection_service_service__WEBPACK_IMPORTED_MODULE_2__["ConnectionService"]
      }, {
        type: _services_data_service__WEBPACK_IMPORTED_MODULE_3__["DataService"]
      }, {
        type: _services_dbsync_client_service__WEBPACK_IMPORTED_MODULE_4__["DBSyncClientService"]
      }];
    };

    StatusCheckComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
      selector: 'app-status-check',
      template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! raw-loader!./status-check.component.html */
      "./node_modules/raw-loader/dist/cjs.js!./src/app/shared/components/status-check/status-check.component.html"))["default"],
      styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(
      /*! ./status-check.component.scss */
      "./src/app/shared/components/status-check/status-check.component.scss"))["default"]]
    })], StatusCheckComponent);
    /***/
  },

  /***/
  "./src/app/shared/directives/scannerinput.directive.ts":
  /*!*************************************************************!*\
    !*** ./src/app/shared/directives/scannerinput.directive.ts ***!
    \*************************************************************/

  /*! exports provided: ScannerinputDirective */

  /***/
  function srcAppSharedDirectivesScannerinputDirectiveTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ScannerinputDirective", function () {
      return ScannerinputDirective;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");

    var ScannerinputDirective = /*#__PURE__*/function () {
      function ScannerinputDirective() {
        _classCallCheck(this, ScannerinputDirective);

        this.numberOfClicks = 0;
      }

      _createClass(ScannerinputDirective, [{
        key: "onClick",
        value: function onClick(btn) {
          console.log('button', btn, 'number of clicks:', this.numberOfClicks++);
        }
      }]);

      return ScannerinputDirective;
    }();

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"])('click', ['$event.target'])], ScannerinputDirective.prototype, "onClick", null);
    ScannerinputDirective = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Directive"])({
      selector: 'button[appScannerinput]'
    })], ScannerinputDirective);
    /***/
  },

  /***/
  "./src/app/shared/interfaces/dexie.interfaces.ts":
  /*!*******************************************************!*\
    !*** ./src/app/shared/interfaces/dexie.interfaces.ts ***!
    \*******************************************************/

  /*! exports provided: DBDIRaumEditStatus, DBDIJobLockStatus, LookupResultTable, LookupResultType */

  /***/
  function srcAppSharedInterfacesDexieInterfacesTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "DBDIRaumEditStatus", function () {
      return DBDIRaumEditStatus;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "DBDIJobLockStatus", function () {
      return DBDIJobLockStatus;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "LookupResultTable", function () {
      return LookupResultTable;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "LookupResultType", function () {
      return LookupResultType;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");

    var DBDIRaumEditStatus;

    (function (DBDIRaumEditStatus) {
      DBDIRaumEditStatus[DBDIRaumEditStatus["Init"] = 0] = "Init";
      DBDIRaumEditStatus[DBDIRaumEditStatus["Started"] = 1] = "Started";
      DBDIRaumEditStatus[DBDIRaumEditStatus["Closed"] = 2] = "Closed";
    })(DBDIRaumEditStatus || (DBDIRaumEditStatus = {}));

    var DBDIJobLockStatus;

    (function (DBDIJobLockStatus) {
      DBDIJobLockStatus[DBDIJobLockStatus["Init"] = 0] = "Init";
      DBDIJobLockStatus[DBDIJobLockStatus["Unlocked"] = 1] = "Unlocked";
      DBDIJobLockStatus[DBDIJobLockStatus["Locked"] = 2] = "Locked";
    })(DBDIJobLockStatus || (DBDIJobLockStatus = {}));

    var LookupResultTable;

    (function (LookupResultTable) {
      LookupResultTable[LookupResultTable["None"] = 0] = "None";
      LookupResultTable[LookupResultTable["Any"] = 1] = "Any";
      LookupResultTable[LookupResultTable["Inventar"] = 2] = "Inventar";
      LookupResultTable[LookupResultTable["Raeume"] = 3] = "Raeume";
      LookupResultTable[LookupResultTable["ObjektKatalogGlobal"] = 4] = "ObjektKatalogGlobal";
      LookupResultTable[LookupResultTable["ObjektKatalogMandant"] = 5] = "ObjektKatalogMandant";
      LookupResultTable[LookupResultTable["Objektbuch"] = 6] = "Objektbuch";
    })(LookupResultTable || (LookupResultTable = {}));

    var LookupResultType;

    (function (LookupResultType) {
      LookupResultType[LookupResultType["NoMatch"] = 0] = "NoMatch";
      LookupResultType[LookupResultType["Inventar"] = 1] = "Inventar";
      LookupResultType[LookupResultType["Raum"] = 2] = "Raum";
      LookupResultType[LookupResultType["ObjektBuchArtikel"] = 3] = "ObjektBuchArtikel";
      LookupResultType[LookupResultType["ObjektBuchRaum"] = 4] = "ObjektBuchRaum";
    })(LookupResultType || (LookupResultType = {}));
    /***/

  },

  /***/
  "./src/app/shared/inventory-progress/inventory-progress.directive.ts":
  /*!***************************************************************************!*\
    !*** ./src/app/shared/inventory-progress/inventory-progress.directive.ts ***!
    \***************************************************************************/

  /*! exports provided: InventoryProgressDirective */

  /***/
  function srcAppSharedInventoryProgressInventoryProgressDirectiveTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "InventoryProgressDirective", function () {
      return InventoryProgressDirective;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");

    var InventoryProgressDirective = function InventoryProgressDirective() {
      _classCallCheck(this, InventoryProgressDirective);
    };

    InventoryProgressDirective = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Directive"])({
      selector: '[appInventoryProgress]'
    })], InventoryProgressDirective);
    /***/
  },

  /***/
  "./src/app/shared/inventory-progress/inventory-progress.service.ts":
  /*!*************************************************************************!*\
    !*** ./src/app/shared/inventory-progress/inventory-progress.service.ts ***!
    \*************************************************************************/

  /*! exports provided: InventoryProgressService */

  /***/
  function srcAppSharedInventoryProgressInventoryProgressServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "InventoryProgressService", function () {
      return InventoryProgressService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ../interfaces/dexie.interfaces */
    "./src/app/shared/interfaces/dexie.interfaces.ts");
    /* harmony import */


    var _services_dexie_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../services/dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var _services_basedata_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ../services/basedata.service */
    "./src/app/shared/services/basedata.service.ts");

    var InventoryProgressService = /*#__PURE__*/function () {
      function InventoryProgressService(dexieService, baseData) {
        _classCallCheck(this, InventoryProgressService);

        this.dexieService = dexieService;
        this.baseData = baseData;
        this.inventurLockStatusChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.raumProgressChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
      }

      _createClass(InventoryProgressService, [{
        key: "getCurrentInventurLockStatus",
        value: function getCurrentInventurLockStatus() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee173() {
            var jobid, uid, deviceId;
            return regeneratorRuntime.wrap(function _callee173$(_context173) {
              while (1) {
                switch (_context173.prev = _context173.next) {
                  case 0:
                    jobid = this.baseData.getCurrentJobid();
                    uid = this.baseData.getCurrentUid();
                    deviceId = this.baseData.getCurrentDeviceId();
                    return _context173.abrupt("return", this.dexieService.inventurenUserStatus.get([jobid, uid, deviceId]).then(function (item) {
                      if (item) {
                        return item.status;
                      }
                    })["catch"](function () {
                      return _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__["DBDIJobLockStatus"].Init;
                    }));

                  case 4:
                  case "end":
                    return _context173.stop();
                }
              }
            }, _callee173, this);
          }));
        }
      }, {
        key: "setCurrentInventurLockStatusClosed",
        value: function setCurrentInventurLockStatusClosed() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee174() {
            var _this117 = this;

            var jobid, uid, deviceId, status, exists, insertKey, insertDaten;
            return regeneratorRuntime.wrap(function _callee174$(_context174) {
              while (1) {
                switch (_context174.prev = _context174.next) {
                  case 0:
                    jobid = this.baseData.getCurrentJobid();
                    uid = this.baseData.getCurrentUid();
                    deviceId = this.baseData.getCurrentDeviceId();
                    status = _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__["DBDIJobLockStatus"].Locked;
                    console.log('InventoryProgressService #40 setCurrentInventurLockStatusClosed', {
                      jobid: jobid,
                      uid: uid,
                      deviceId: deviceId,
                      status: status
                    });
                    _context174.next = 7;
                    return this.dexieService.inventurenUserStatus.where({
                      jobid: jobid,
                      uid: uid,
                      device_id: deviceId
                    }).count();

                  case 7:
                    exists = _context174.sent;
                    console.log('InventoryProgressService #46 setCurrentInventurLockStatusClosed', {
                      exists: exists
                    });

                    if (!exists) {
                      _context174.next = 13;
                      break;
                    }

                    return _context174.abrupt("return", this.dexieService.inventurenUserStatus.update([jobid, uid, deviceId], {
                      status: status,
                      geschlossen_am: new Date(),
                      modified_at: new Date()
                    }).then(function () {
                      console.log('InventoryProgressService #55 setCurrentInventurLockStatusClosed update emit Status Locked');

                      _this117.inventurLockStatusChanged.emit(status);

                      return true;
                    })["catch"](function () {
                      return false;
                    }));

                  case 13:
                    console.log('InventoryProgressService #63 setCurrentInventurLockStatusClosed insert Status Locked');
                    insertKey = [jobid, uid, deviceId];
                    insertDaten = {
                      jobid: jobid,
                      uid: uid,
                      device_id: deviceId,
                      token: '',
                      status: _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__["DBDIJobLockStatus"].Locked,
                      geladen_am: new Date(),
                      geschlossen_am: new Date(),
                      created_at: new Date(),
                      modified_at: new Date()
                    };
                    return _context174.abrupt("return", this.dexieService.inventurenUserStatus.add(insertDaten).then(function () {
                      console.log('InventoryProgressService #77 setCurrentInventurLockStatusClosed inserted emit Status Locked');

                      _this117.inventurLockStatusChanged.emit(status);

                      return true;
                    })["catch"](function (reason) {
                      console.error('InventoryProgressService #83 Status Locked konnte nicht gesetzt werden', {
                        reason: reason,
                        insertDaten: insertDaten
                      });
                      return false;
                    }));

                  case 17:
                  case "end":
                    return _context174.stop();
                }
              }
            }, _callee174, this);
          }));
        }
      }, {
        key: "setCurrentInventurLockStatusOpened",
        value: function setCurrentInventurLockStatusOpened() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee175() {
            var _this118 = this;

            var jobid, uid, deviceId, status, exists, insertKey, insertDaten;
            return regeneratorRuntime.wrap(function _callee175$(_context175) {
              while (1) {
                switch (_context175.prev = _context175.next) {
                  case 0:
                    jobid = this.baseData.getCurrentJobid();
                    uid = this.baseData.getCurrentUid();
                    deviceId = this.baseData.getCurrentDeviceId();
                    status = _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_2__["DBDIJobLockStatus"].Unlocked;
                    console.log('InventoryProgressService #88 setCurrentInventurLockStatusOpened', {
                      jobid: jobid,
                      uid: uid,
                      deviceId: deviceId,
                      status: status
                    });
                    _context175.next = 7;
                    return this.dexieService.inventurenUserStatus.where({
                      jobid: jobid,
                      uid: uid,
                      device_id: deviceId
                    }).count();

                  case 7:
                    exists = _context175.sent;

                    if (!exists) {
                      _context175.next = 12;
                      break;
                    }

                    return _context175.abrupt("return", this.dexieService.inventurenUserStatus.update([jobid, uid, deviceId], {
                      status: status,
                      geschlossen_am: new Date(),
                      modified_at: new Date()
                    }).then(function () {
                      _this118.inventurLockStatusChanged.emit(status);

                      return true;
                    })["catch"](function () {
                      return false;
                    }));

                  case 12:
                    insertKey = [jobid, uid, deviceId];
                    insertDaten = {
                      jobid: jobid,
                      uid: uid,
                      device_id: deviceId,
                      token: '',
                      status: status,
                      geladen_am: new Date(),
                      geschlossen_am: null,
                      created_at: new Date(),
                      modified_at: new Date()
                    };
                    return _context175.abrupt("return", this.dexieService.inventurenUserStatus.put(insertDaten, insertKey).then(function () {
                      _this118.inventurLockStatusChanged.emit(status);

                      return true;
                    })["catch"](function (reason) {
                      console.error('InventoryProgressService #137 Status Opened konnte nicht gesetzt werden', {
                        reason: reason,
                        insertKey: insertKey,
                        insertDaten: insertDaten
                      });
                      return false;
                    }));

                  case 15:
                  case "end":
                    return _context175.stop();
                }
              }
            }, _callee175, this);
          }));
        }
      }, {
        key: "getCurrentGebaeudeProgress",
        value: function getCurrentGebaeudeProgress(useGid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee176() {
            var gid, jobid;
            return regeneratorRuntime.wrap(function _callee176$(_context176) {
              while (1) {
                switch (_context176.prev = _context176.next) {
                  case 0:
                    gid = useGid || this.baseData.getCurrentGid();
                    jobid = this.baseData.getCurrentJobid();
                    return _context176.abrupt("return", this.getGebaeudeProgressByGidAndJobid(gid, jobid));

                  case 3:
                  case "end":
                    return _context176.stop();
                }
              }
            }, _callee176, this);
          }));
        }
      }, {
        key: "getGebaeudeProgressByGidAndJobid",
        value: function getGebaeudeProgressByGidAndJobid(gid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee178() {
            var _this119 = this;

            var db, raeume, inventar, progress, ruuidListTmp, ruuidList, chunkSize, chunks, i;
            return regeneratorRuntime.wrap(function _callee178$(_context178) {
              while (1) {
                switch (_context178.prev = _context178.next) {
                  case 0:
                    db = this.dexieService;
                    raeume = db.raeume;
                    inventar = db.inventar;
                    progress = {
                      total: 0,
                      done: 0
                    };
                    _context178.next = 6;
                    return raeume.where({
                      gid: gid
                    }).toArray();

                  case 6:
                    ruuidListTmp = _context178.sent;
                    ruuidList = ruuidListTmp.filter(function (rg) {
                      return rg.gid === gid && rg.for_jobid === jobid;
                    }).map(function (rg) {
                      return rg.uuid;
                    });
                    chunkSize = Math.ceil(ruuidList.length / 8);
                    chunks = [];

                    for (i = 0; i < ruuidList.length; i += chunkSize) {
                      chunks.push(ruuidList.slice(i, i + chunkSize));
                    }

                    _context178.next = 13;
                    return Promise.all([inventar.where({
                      jobid: jobid
                    }).count(), Promise.all(chunks.map(function (ruuidChunkList) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this119, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee177() {
                        return regeneratorRuntime.wrap(function _callee177$(_context177) {
                          while (1) {
                            switch (_context177.prev = _context177.next) {
                              case 0:
                                return _context177.abrupt("return", inventar.where('ruuid').anyOf(ruuidChunkList).and(function (inv) {
                                  return inv.for_jobid === jobid;
                                }).count());

                              case 1:
                              case "end":
                                return _context177.stop();
                            }
                          }
                        }, _callee177);
                      }));
                    }))]).then(function (chunksTotalAndProgress) {
                      console.log({
                        chunksTotalAndProgress: chunksTotalAndProgress
                      });
                      progress.done = chunksTotalAndProgress[0];
                      progress.total = chunksTotalAndProgress[1].reduce(function (sum, chnk) {
                        return sum + chnk;
                      }, 0);
                      return progress;
                    });

                  case 13:
                    return _context178.abrupt("return", _context178.sent);

                  case 14:
                  case "end":
                    return _context178.stop();
                }
              }
            }, _callee178, this);
          }));
        }
      }, {
        key: "getCurrentRaumProgress",
        value: function getCurrentRaumProgress(useRuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee179() {
            var _this120 = this;

            var uuid, jobid;
            return regeneratorRuntime.wrap(function _callee179$(_context179) {
              while (1) {
                switch (_context179.prev = _context179.next) {
                  case 0:
                    uuid = useRuuid || this.baseData.getCurrentRuuid();
                    jobid = this.baseData.getCurrentJobid();
                    console.log('getCurrentRaumProgress calls getRaumProgressByRidAndJobid', {
                      uuid: uuid,
                      jobid: jobid
                    });
                    return _context179.abrupt("return", this.getRaumProgressByUuidAndJobid(uuid, jobid).then(function (progress) {
                      _this120.raumProgressChanged.emit(Object.assign({
                        uuid: uuid
                      }, progress));

                      return progress;
                    }));

                  case 4:
                  case "end":
                    return _context179.stop();
                }
              }
            }, _callee179, this);
          }));
        }
      }, {
        key: "getRaumProgressByUuidAndJobid",
        value: function getRaumProgressByUuidAndJobid(uuid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee180() {
            var progress;
            return regeneratorRuntime.wrap(function _callee180$(_context180) {
              while (1) {
                switch (_context180.prev = _context180.next) {
                  case 0:
                    progress = {
                      total: 0,
                      done: 0
                    };
                    _context180.next = 3;
                    return Promise.all([this.dexieService.inventar.where({
                      ruuid: uuid
                    }).count(), this.dexieService.inventar.where({
                      ruuid: uuid
                    }).and(function (itm) {
                      return itm.jobid === jobid;
                    }).count()]).then(function (totalAndProgress) {
                      progress.total = totalAndProgress[0];
                      progress.done = totalAndProgress[1];
                    });

                  case 3:
                    console.log('called getRaumProgressByUuidAndJobid', {
                      uuid: uuid,
                      jobid: jobid,
                      progress: progress
                    });
                    return _context180.abrupt("return", progress);

                  case 5:
                  case "end":
                    return _context180.stop();
                }
              }
            }, _callee180, this);
          }));
        }
      }, {
        key: "getCurrentRaumInventarFound",
        value: function getCurrentRaumInventarFound(useRuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee181() {
            var ruuid, jobid;
            return regeneratorRuntime.wrap(function _callee181$(_context181) {
              while (1) {
                switch (_context181.prev = _context181.next) {
                  case 0:
                    ruuid = useRuuid || this.baseData.getCurrentRuuid();
                    jobid = this.baseData.getCurrentJobid();
                    return _context181.abrupt("return", this.getRaumInventarFoundByRuuidAndJobid(ruuid, jobid));

                  case 3:
                  case "end":
                    return _context181.stop();
                }
              }
            }, _callee181, this);
          }));
        }
      }, {
        key: "getRaumInventarFoundByRuuidAndJobid",
        value: function getRaumInventarFoundByRuuidAndJobid(ruuid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee182() {
            return regeneratorRuntime.wrap(function _callee182$(_context182) {
              while (1) {
                switch (_context182.prev = _context182.next) {
                  case 0:
                    return _context182.abrupt("return", this.dexieService.inventar.where({
                      ruuid: ruuid,
                      jobid: jobid
                    }).toArray());

                  case 1:
                  case "end":
                    return _context182.stop();
                }
              }
            }, _callee182, this);
          }));
        }
      }, {
        key: "getCurrentRaumInventarNotFound",
        value: function getCurrentRaumInventarNotFound(useRuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee183() {
            var ruuid, jobid;
            return regeneratorRuntime.wrap(function _callee183$(_context183) {
              while (1) {
                switch (_context183.prev = _context183.next) {
                  case 0:
                    ruuid = useRuuid || this.baseData.getCurrentRuuid();
                    jobid = this.baseData.getCurrentJobid();
                    return _context183.abrupt("return", this.getRaumInventarNotFoundByRuuidAndJobid(ruuid, jobid));

                  case 3:
                  case "end":
                    return _context183.stop();
                }
              }
            }, _callee183, this);
          }));
        }
      }, {
        key: "getRaumInventarNotFoundByRuuidAndJobid",
        value: function getRaumInventarNotFoundByRuuidAndJobid(ruuid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee184() {
            return regeneratorRuntime.wrap(function _callee184$(_context184) {
              while (1) {
                switch (_context184.prev = _context184.next) {
                  case 0:
                    return _context184.abrupt("return", this.dexieService.inventar.where({
                      ruuid: ruuid
                    }).and(function (item) {
                      return item.jobid !== jobid;
                    }).toArray());

                  case 1:
                  case "end":
                    return _context184.stop();
                }
              }
            }, _callee184, this);
          }));
        }
      }, {
        key: "getCurrentGebaeudeRaeumeFinished",
        value: function getCurrentGebaeudeRaeumeFinished(useGid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee185() {
            var gid, jobid;
            return regeneratorRuntime.wrap(function _callee185$(_context185) {
              while (1) {
                switch (_context185.prev = _context185.next) {
                  case 0:
                    gid = useGid || this.baseData.getCurrentGid();
                    jobid = this.baseData.getCurrentJobid();
                    return _context185.abrupt("return", this.getGebaeudeRaeumeFinishedByGidAndJobid(gid, jobid));

                  case 3:
                  case "end":
                    return _context185.stop();
                }
              }
            }, _callee185, this);
          }));
        }
      }, {
        key: "getGebaeudeRaeumeFinishedByGidAndJobid",
        value: function getGebaeudeRaeumeFinishedByGidAndJobid(gid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee186() {
            return regeneratorRuntime.wrap(function _callee186$(_context186) {
              while (1) {
                switch (_context186.prev = _context186.next) {
                  case 0:
                    return _context186.abrupt("return", this.dexieService.raeume.where({
                      gid: gid
                    }).and(function (itm) {
                      return itm.current_jobid === jobid && itm.current_jobstatus === 2;
                    }).toArray());

                  case 1:
                  case "end":
                    return _context186.stop();
                }
              }
            }, _callee186, this);
          }));
        }
      }, {
        key: "getCurrentGebaeudeRaeumeNotFinished",
        value: function getCurrentGebaeudeRaeumeNotFinished(useGid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee187() {
            var gid, jobid;
            return regeneratorRuntime.wrap(function _callee187$(_context187) {
              while (1) {
                switch (_context187.prev = _context187.next) {
                  case 0:
                    gid = useGid || this.baseData.getCurrentGid();
                    jobid = this.baseData.getCurrentJobid();
                    return _context187.abrupt("return", this.getGebaeudeRaeumeNotFinishedByGidAndJobid(gid, jobid));

                  case 3:
                  case "end":
                    return _context187.stop();
                }
              }
            }, _callee187, this);
          }));
        }
      }, {
        key: "getGebaeudeRaeumeNotFinishedByGidAndJobid",
        value: function getGebaeudeRaeumeNotFinishedByGidAndJobid(gid, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee188() {
            return regeneratorRuntime.wrap(function _callee188$(_context188) {
              while (1) {
                switch (_context188.prev = _context188.next) {
                  case 0:
                    return _context188.abrupt("return", this.dexieService.raeume.where({
                      gid: gid
                    }).and(function (itm) {
                      return itm.current_jobid !== jobid || itm.current_jobstatus !== 2;
                    }).toArray());

                  case 1:
                  case "end":
                    return _context188.stop();
                }
              }
            }, _callee188, this);
          }));
        }
      }]);

      return InventoryProgressService;
    }();

    InventoryProgressService.ctorParameters = function () {
      return [{
        type: _services_dexie_service__WEBPACK_IMPORTED_MODULE_3__["DexieService"]
      }, {
        type: _services_basedata_service__WEBPACK_IMPORTED_MODULE_4__["BasedataService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], InventoryProgressService.prototype, "inventurLockStatusChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], InventoryProgressService.prototype, "raumProgressChanged", void 0);
    InventoryProgressService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], InventoryProgressService);
    /***/
  },

  /***/
  "./src/app/shared/services/api.service.ts":
  /*!************************************************!*\
    !*** ./src/app/shared/services/api.service.ts ***!
    \************************************************/

  /*! exports provided: ApiService */

  /***/
  function srcAppSharedServicesApiServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ApiService", function () {
      return ApiService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/common/http */
    "./node_modules/@angular/common/fesm2015/http.js");
    /* harmony import */


    var _basedata_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ./basedata.service */
    "./src/app/shared/services/basedata.service.ts");

    var ApiService = /*#__PURE__*/function () {
      function ApiService(http, baseData) {
        _classCallCheck(this, ApiService);

        this.http = http;
        this.baseData = baseData;
        this.apiBaseUrl = '';
        this.apiBaseUrl = this.baseData.getCurrentApiBaseUrlOrSetDefault(this.getDefaultApiUrl);
      }

      _createClass(ApiService, [{
        key: "getDefaultApiUrl",
        value: function getDefaultApiUrl() {
          var hostName = window.location.hostname;
          var defaultUrl = '';
          var rgx = /(demo-)(.*?)(-app)(.mertens.services)/;

          if (rgx.test(hostName)) {
            defaultUrl = 'https://' + hostName.replace(rgx, '$1$2-admin$4') + '/';
            console.log('ApiService #24 getDefaultApiUrl()', {
              hostName: hostName,
              defaultUrl: defaultUrl
            });
            return defaultUrl;
          }

          switch (hostName) {
            case 'inventory.local':
            case '127.0.0.1':
            case 'localhost':
              defaultUrl = 'https://' + hostName + ':8040/';
              break;

            case 'mertens-inventory-client.bluebirdapp.de':
              defaultUrl = 'https://mertens-inventory.bluebirdapp.de/';
              break;

            case 'rheinenergie-app.mertens.services':
            case 'demo-rheinenergie-app.mertens.services':
            case 'demo-apo-app.mertens.services':
            case 'demo-pc-app.mertens.services':
              defaultUrl = 'https://' + hostName.replace('-app.mertens.services', '-admin.mertens.services') + '/';
              break;

            case 'mertens-inventory-rc.web.app':
            case 'mertens-inventory-rc.firebaseapp.com':
            case 'mertens-inventory-dev.web.app':
            case 'mertens-inventory-dev.firebaseapp.com':
            case 'dev-inventory-app.mertens.services':
              defaultUrl = 'https://dev-inventory.mertens.services/';
              break;

            case 'mertens-inventory.firebaseapp.com':
            case 'mertens-inventory.web.app':
            default:
              defaultUrl = 'https://inventory.mertens.services/';
          }

          console.log('ApiService #50 getDefaultApiUrl()', {
            hostName: hostName,
            defaultUrl: defaultUrl
          });
          return defaultUrl;
        }
      }, {
        key: "getBaseUrl",
        value: function getBaseUrl() {
          return this.apiBaseUrl;
        }
      }, {
        key: "setBaseUrl",
        value: function setBaseUrl(apiBaseUrl) {
          this.apiBaseUrl = apiBaseUrl;
          return this;
        }
      }, {
        key: "getUrlByPath",
        value: function getUrlByPath(path) {
          while (path.startsWith('/')) {
            path = path.substr(1);
          }

          return this.apiBaseUrl + path;
        }
      }, {
        key: "getHealthPingUrl",
        value: function getHealthPingUrl() {
          return this.getUrlByPath('assets/ping.json');
        }
      }, {
        key: "getConnectedPingUrl",
        value: function getConnectedPingUrl() {
          return this.getUrlByPath('auth/connected');
        }
      }, {
        key: "getUrl",
        value: function getUrl(url) {
          if (url.substr(0, 10).match(/^[a-zA-Z]:\/\//)) {
            return url;
          }

          return this.getUrlByPath(url);
        }
      }, {
        key: "get",
        value: function get(path, options) {
          return this.http.get(this.getUrl(path), options);
        }
      }, {
        key: "post",
        value: function post(path, body, options) {
          return this.http.post(this.getUrl(path), body, options);
        }
      }, {
        key: "put",
        value: function put(path, body, options) {
          return this.http.put(this.getUrl(path), body, options);
        }
      }]);

      return ApiService;
    }();

    ApiService.ctorParameters = function () {
      return [{
        type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"]
      }, {
        type: _basedata_service__WEBPACK_IMPORTED_MODULE_3__["BasedataService"]
      }];
    };

    ApiService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], ApiService);
    /***/
  },

  /***/
  "./src/app/shared/services/basedata.service.ts":
  /*!*****************************************************!*\
    !*** ./src/app/shared/services/basedata.service.ts ***!
    \*****************************************************/

  /*! exports provided: BasedataService */

  /***/
  function srcAppSharedServicesBasedataServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "BasedataService", function () {
      return BasedataService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");

    var BasedataService = /*#__PURE__*/function () {
      function BasedataService() {
        _classCallCheck(this, BasedataService);

        this.userChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.mandantChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.inventurChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.gebaeudeChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.raumChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.deviceChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.inventurStatusChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.apiBaseUrlChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.init();
      }

      _createClass(BasedataService, [{
        key: "init",
        value: function init() {
          this.currentMandant = JSON.parse(localStorage.getItem('currentMandant'));
          this.currentInventur = JSON.parse(localStorage.getItem('currentInventur'));
          this.currentUser = JSON.parse(localStorage.getItem('currentUser'));
          this.previousUser = JSON.parse(localStorage.getItem('previousUser'));
          this.currentGebaeude = JSON.parse(localStorage.getItem('currentGebaeude'));
          this.currentRaum = JSON.parse(localStorage.getItem('currentRaum'));
          this.currentDevice = JSON.parse(localStorage.getItem('currentDevice'));
          this.currentInventurStatus = JSON.parse(localStorage.getItem('currentInventurStatus'));
          this.currentApiBaseUrl = JSON.parse(localStorage.getItem('currentApiBaseUrl'));
        }
      }, {
        key: "setCurrentMandant",
        value: function setCurrentMandant(mandant) {
          this.currentMandant = mandant;
          localStorage.setItem('currentMandant', JSON.stringify(mandant));
          this.mandantChanged.emit(this.currentMandant);
        }
      }, {
        key: "setCurrentInventur",
        value: function setCurrentInventur(inventur) {
          this.currentInventur = inventur;
          localStorage.setItem('currentInventur', JSON.stringify(inventur));
          this.inventurChanged.emit(this.currentInventur);
        }
      }, {
        key: "setCurrentInventurStatus",
        value: function setCurrentInventurStatus(inventurStatus) {
          this.currentInventurStatus = inventurStatus;
          localStorage.setItem('currentInventurStatus', JSON.stringify(inventurStatus));
          this.inventurStatusChanged.emit(this.currentInventurStatus);
        }
      }, {
        key: "setCurrentGebaeude",
        value: function setCurrentGebaeude(gebaeude) {
          this.currentGebaeude = gebaeude;
          localStorage.setItem('currentGebaeude', JSON.stringify(gebaeude));
          this.gebaeudeChanged.emit(this.currentGebaeude);
        }
      }, {
        key: "setCurrentRaum",
        value: function setCurrentRaum(raum) {
          this.currentRaum = raum;
          localStorage.setItem('currentRaum', JSON.stringify(raum));
          this.raumChanged.emit(this.currentRaum);
        }
      }, {
        key: "setCurrentDevice",
        value: function setCurrentDevice(deviceid) {
          this.currentDevice = deviceid;
          localStorage.setItem('currentDevice', JSON.stringify(deviceid));
          this.deviceChanged.emit(this.currentDevice);
        }
      }, {
        key: "setCurrentUser",
        value: function setCurrentUser(user) {
          this.currentUser = user;
          localStorage.setItem('currentUser', JSON.stringify(user));
          this.userChanged.emit(this.currentUser);
        }
      }, {
        key: "setPreviousUser",
        value: function setPreviousUser(user) {
          this.previousUser = user;
          localStorage.setItem('previousUser', JSON.stringify(user));
        }
      }, {
        key: "setCurrentApiBaseUrl",
        value: function setCurrentApiBaseUrl(apiBaseUrl) {
          this.currentApiBaseUrl = apiBaseUrl;
          localStorage.setItem('currentApiBaseUrl', JSON.stringify(apiBaseUrl));
          this.apiBaseUrlChanged.emit(this.currentApiBaseUrl);
        }
      }, {
        key: "getCurrentDevice",
        value: function getCurrentDevice() {
          return this.currentDevice;
        }
      }, {
        key: "getCurrentDeviceId",
        value: function getCurrentDeviceId() {
          try {
            return this.currentDevice;
          } catch (e) {
            return 0;
          }
        }
      }, {
        key: "getCurrentUser",
        value: function getCurrentUser() {
          return this.currentUser;
        }
      }, {
        key: "getPreviousUser",
        value: function getPreviousUser() {
          return this.previousUser;
        }
      }, {
        key: "getPreviousUid",
        value: function getPreviousUid() {
          try {
            return this.previousUser.id;
          } catch (e) {
            return 0;
          }
        }
      }, {
        key: "getCurrentUid",
        value: function getCurrentUid() {
          try {
            return this.currentUser.id;
          } catch (e) {
            return 0;
          }
        }
      }, {
        key: "getCurrentMandant",
        value: function getCurrentMandant() {
          return this.currentMandant;
        }
      }, {
        key: "getCurrentInventur",
        value: function getCurrentInventur() {
          return this.currentInventur;
        }
      }, {
        key: "getCurrentInventurStatus",
        value: function getCurrentInventurStatus() {
          return this.currentInventurStatus;
        }
      }, {
        key: "getCurrentJobid",
        value: function getCurrentJobid() {
          try {
            return this.currentInventur.jobid;
          } catch (e) {
            return 0;
          }
        }
      }, {
        key: "getCurrentMid",
        value: function getCurrentMid() {
          try {
            return this.currentInventur.mid;
          } catch (e) {
            return 0;
          }
        }
      }, {
        key: "getCurrentGebaeude",
        value: function getCurrentGebaeude() {
          return this.currentGebaeude;
        }
      }, {
        key: "getCurrentGid",
        value: function getCurrentGid() {
          try {
            return this.currentGebaeude.gid;
          } catch (e) {
            return 0;
          }
        }
      }, {
        key: "getCurrentRaum",
        value: function getCurrentRaum() {
          return this.currentRaum;
        }
      }, {
        key: "getCurrentRuuid",
        value: function getCurrentRuuid() {
          try {
            return this.currentRaum.uuid;
          } catch (e) {
            return '';
          }
        }
      }, {
        key: "getCurrentApiBaseUrl",
        value: function getCurrentApiBaseUrl() {
          return this.currentApiBaseUrl;
        }
      }, {
        key: "getCurrentApiBaseUrlOrSetDefault",
        value: function getCurrentApiBaseUrlOrSetDefault(setter) {
          if (!this.currentApiBaseUrl) {
            this.setCurrentApiBaseUrl(setter());
          }

          return this.currentApiBaseUrl;
        }
      }]);

      return BasedataService;
    }();

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], BasedataService.prototype, "userChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], BasedataService.prototype, "mandantChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], BasedataService.prototype, "inventurChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], BasedataService.prototype, "gebaeudeChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], BasedataService.prototype, "raumChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], BasedataService.prototype, "deviceChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], BasedataService.prototype, "inventurStatusChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], BasedataService.prototype, "apiBaseUrlChanged", void 0);
    BasedataService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], BasedataService);
    /***/
  },

  /***/
  "./src/app/shared/services/client-config-load.service.ts":
  /*!***************************************************************!*\
    !*** ./src/app/shared/services/client-config-load.service.ts ***!
    \***************************************************************/

  /*! exports provided: ClientConfigLoadService */

  /***/
  function srcAppSharedServicesClientConfigLoadServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ClientConfigLoadService", function () {
      return ClientConfigLoadService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/common/http */
    "./node_modules/@angular/common/fesm2015/http.js");
    /* harmony import */


    var _basedata_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ./basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _api_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ./api.service */
    "./src/app/shared/services/api.service.ts");

    var ClientConfigLoadService = /*#__PURE__*/function () {
      function ClientConfigLoadService(http, baseData, apiService) {
        _classCallCheck(this, ClientConfigLoadService);

        this.http = http;
        this.baseData = baseData;
        this.apiService = apiService;
      }

      _createClass(ClientConfigLoadService, [{
        key: "localClientConfig",
        value: function localClientConfig() {
          var _this121 = this;

          return this.http.get('assets/client-config.local.json').toPromise().then(function (config) {
            if (typeof config !== 'object') {
              return false;
            }

            for (var key in config) {
              if (config.hasOwnProperty(key)) {
                localStorage.setItem(key, JSON.stringify(config[key]));
              }
            }

            if ('ApiUrl' in config && 'string' === typeof config.ApiUrl && config.ApiUrl) {
              localStorage.setItem('currentApiBaseUrl', JSON.stringify(config.ApiUrl));

              _this121.apiService.setBaseUrl(config.ApiUrl);
            }

            _this121.baseData.init();

            return true;
          })["catch"](function (err) {
            console.error(err);
            return false;
          });
        }
      }]);

      return ClientConfigLoadService;
    }();

    ClientConfigLoadService.initializeClientConfig = function (appConfig) {
      return function () {
        return appConfig.localClientConfig();
      };
    };

    ClientConfigLoadService.ctorParameters = function () {
      return [{
        type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"]
      }, {
        type: _basedata_service__WEBPACK_IMPORTED_MODULE_3__["BasedataService"]
      }, {
        type: _api_service__WEBPACK_IMPORTED_MODULE_4__["ApiService"]
      }];
    };

    ClientConfigLoadService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], ClientConfigLoadService);
    /***/
  },

  /***/
  "./src/app/shared/services/connection-service.service.ts":
  /*!***************************************************************!*\
    !*** ./src/app/shared/services/connection-service.service.ts ***!
    \***************************************************************/

  /*! exports provided: ConnectionServiceOptionsToken, ConnectionService */

  /***/
  function srcAppSharedServicesConnectionServiceServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ConnectionServiceOptionsToken", function () {
      return ConnectionServiceOptionsToken;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "ConnectionService", function () {
      return ConnectionService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! rxjs */
    "./node_modules/rxjs/_esm2015/index.js");
    /* harmony import */


    var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! rxjs/operators */
    "./node_modules/rxjs/_esm2015/operators/index.js");
    /* harmony import */


    var lodash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! lodash */
    "./node_modules/lodash/lodash.js");
    /* harmony import */


    var lodash__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);
    /* harmony import */


    var _angular_common_http__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! @angular/common/http */
    "./node_modules/@angular/common/fesm2015/http.js");
    /* harmony import */


    var _api_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! ./api.service */
    "./src/app/shared/services/api.service.ts");

    var ConnectionService_1;
    /**
     * InjectionToken for specifing ConnectionService options.
     */

    var ConnectionServiceOptionsToken = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["InjectionToken"]('ConnectionServiceOptionsToken');

    var ConnectionService = ConnectionService_1 = /*#__PURE__*/function () {
      function ConnectionService(http, options, apiService) {
        _classCallCheck(this, ConnectionService);

        this.http = http;
        this.apiService = apiService;
        this.stateChangeEventEmitter = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.currentState = {
          hasServerAccess: false,
          hasValidSession: false,
          hasNetworkConnection: window.navigator.onLine
        };
        this.serviceOptions = lodash__WEBPACK_IMPORTED_MODULE_4__["defaults"]({}, options, ConnectionService_1.DEFAULT_OPTIONS);
        this.checkNetworkState();
        this.checkInternetState(); // this.checkAuthenticationState();
      }
      /**
       * Current ConnectionService options. Notice that changing values of the returned object has not effect on service execution.
       * You should use "updateOptions" function.
       */


      _createClass(ConnectionService, [{
        key: "setAuthState",
        value: function setAuthState(isLoggedIn) {
          this.currentState.hasValidSession = isLoggedIn;
          this.emitEvent();
        }
      }, {
        key: "refresh",
        value: function refresh() {
          this.checkInternetState();
        }
      }, {
        key: "checkInternetState",
        value: function checkInternetState() {
          var _this122 = this;

          if (!lodash__WEBPACK_IMPORTED_MODULE_4__["isNil"](this.httpSubscription)) {
            this.httpSubscription.unsubscribe();
          }

          var method = this.serviceOptions.requestMethod;
          var heartBeatPath = this.serviceOptions.heartbeatUrl;

          if (this.serviceOptions.enableHeartbeat) {
            this.httpSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["timer"])(0, this.serviceOptions.heartbeatInterval).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["switchMap"])(function () {
              return _this122.apiService[method](heartBeatPath, {
                responseType: 'text'
              });
            }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["retryWhen"])(function (errors) {
              return errors.pipe( // log error message
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["tap"])(function (val) {
                console.error('Http error:', val);
                var lastAccess = _this122.currentState.hasServerAccess;
                _this122.currentState.hasServerAccess = false;

                if (lastAccess !== false) {
                  _this122.emitEvent();
                }
              }), // restart after 5 seconds
              Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["delay"])(_this122.serviceOptions.heartbeatRetryInterval));
            })).subscribe(function (result) {
              var lastAccess = _this122.currentState.hasServerAccess;
              var lastSession = _this122.currentState.hasValidSession;
              _this122.currentState.hasServerAccess = true;

              if (result && typeof result === 'string' && result.match(/"connected"\s*:\s*true/)) {
                _this122.currentState.hasValidSession = true;
              }

              if (lastAccess !== _this122.currentState.hasServerAccess || lastSession !== _this122.currentState.hasValidSession) {
                _this122.emitEvent();
              }
            });
          } else {
            var lastAccess = this.currentState.hasServerAccess;
            this.currentState.hasServerAccess = false;

            if (lastAccess !== false) {
              this.emitEvent();
            }
          }
        }
      }, {
        key: "checkNetworkState",
        value: function checkNetworkState() {
          var _this123 = this;

          if (!lodash__WEBPACK_IMPORTED_MODULE_4__["isNil"](this.onlineSubscription)) {
            this.onlineSubscription.unsubscribe();
          }

          this.onlineSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["fromEvent"])(window, 'online').subscribe(function () {
            _this123.currentState.hasNetworkConnection = true;

            _this123.checkInternetState();

            _this123.emitEvent();
          });

          if (!lodash__WEBPACK_IMPORTED_MODULE_4__["isNil"](this.offlineSubscription)) {
            this.offlineSubscription.unsubscribe();
          }

          this.offlineSubscription = Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["fromEvent"])(window, 'offline').subscribe(function () {
            _this123.currentState.hasNetworkConnection = false;
            _this123.currentState.hasServerAccess = false;

            _this123.emitEvent();
          });
        }
      }, {
        key: "emitEvent",
        value: function emitEvent() {
          this.stateChangeEventEmitter.emit(this.currentState);
        }
      }, {
        key: "ngOnDestroy",
        value: function ngOnDestroy() {
          try {
            this.offlineSubscription.unsubscribe();
            this.onlineSubscription.unsubscribe();
            this.httpSubscription.unsubscribe();
          } catch (e) {}
        }
        /**
         * Monitor Network & Internet connection status by subscribing to this observer. If you set "reportCurrentState" to "false" then
         * function will not report current status of the connections when initially subscribed.
         * @param reportCurrentState Report current state when initial subscription. Default is "true"
         */

      }, {
        key: "monitor",
        value: function monitor() {
          var reportCurrentState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
          return reportCurrentState ? this.stateChangeEventEmitter.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["debounceTime"])(300), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["startWith"])(this.currentState)) : this.stateChangeEventEmitter.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["debounceTime"])(300));
        }
        /**
         * Update options of the service. You could specify partial options object. Values that are not specified will use default / previous
         * option values.
         * @param options Partial option values.
         */

      }, {
        key: "updateOptions",
        value: function updateOptions(options) {
          this.serviceOptions = lodash__WEBPACK_IMPORTED_MODULE_4__["defaults"]({}, options, this.serviceOptions);
          this.checkInternetState();
        }
      }, {
        key: "getCurrentState",
        value: function getCurrentState() {
          return this.currentState;
        }
      }, {
        key: "options",
        get: function get() {
          return lodash__WEBPACK_IMPORTED_MODULE_4__["clone"](this.serviceOptions);
        }
      }, {
        key: "hasServerAccess",
        get: function get() {
          return this.currentState.hasServerAccess;
        }
      }, {
        key: "hasNetworkConnection",
        get: function get() {
          return this.currentState.hasNetworkConnection;
        }
      }]);

      return ConnectionService;
    }();

    ConnectionService.DEFAULT_OPTIONS = {
      enableHeartbeat: true,
      heartbeatUrl: '/auth/heartbeat',
      heartbeatInterval: 120000,
      heartbeatRetryInterval: 60000,
      requestMethod: 'get',
      responseType: 'text'
    };

    ConnectionService.ctorParameters = function () {
      return [{
        type: _angular_common_http__WEBPACK_IMPORTED_MODULE_5__["HttpClient"]
      }, {
        type: undefined,
        decorators: [{
          type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Inject"],
          args: [ConnectionServiceOptionsToken]
        }, {
          type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Optional"]
        }]
      }, {
        type: _api_service__WEBPACK_IMPORTED_MODULE_6__["ApiService"]
      }];
    };

    ConnectionService = ConnectionService_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    }), tslib__WEBPACK_IMPORTED_MODULE_0__["__param"](1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Inject"])(ConnectionServiceOptionsToken)), tslib__WEBPACK_IMPORTED_MODULE_0__["__param"](1, Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Optional"])())], ConnectionService);
    /***/
  },

  /***/
  "./src/app/shared/services/data.service.ts":
  /*!*************************************************!*\
    !*** ./src/app/shared/services/data.service.ts ***!
    \*************************************************/

  /*! exports provided: InventarDataResultError, JoinResultType, DataService */

  /***/
  function srcAppSharedServicesDataServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "InventarDataResultError", function () {
      return InventarDataResultError;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "JoinResultType", function () {
      return JoinResultType;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "DataService", function () {
      return DataService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _api_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ./api.service */
    "./src/app/shared/services/api.service.ts");
    /* harmony import */


    var _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ../interfaces/dexie.interfaces */
    "./src/app/shared/interfaces/dexie.interfaces.ts");
    /* harmony import */


    var _dexie_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ./dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var _connection_service_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ./connection-service.service */
    "./src/app/shared/services/connection-service.service.ts");
    /* harmony import */


    var _variables_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! ./variables.service */
    "./src/app/shared/services/variables.service.ts");
    /* harmony import */


    var dexie__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! dexie */
    "./node_modules/dexie/dist/dexie.es.js");
    /* harmony import */


    var _dbsync_client_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! ./dbsync-client.service */
    "./src/app/shared/services/dbsync-client.service.ts");
    /* harmony import */


    var _pages_invent_form_data_services_barcode_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! ../../pages/invent-form/data-services/barcode.service */
    "./src/app/pages/invent-form/data-services/barcode.service.ts");
    /* harmony import */


    var _dbsync_log_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(
    /*! ./dbsync-log.service */
    "./src/app/shared/services/dbsync-log.service.ts");

    var InventarDataResultError;

    (function (InventarDataResultError) {
      InventarDataResultError[InventarDataResultError["InventarNotFound"] = 1] = "InventarNotFound";
      InventarDataResultError[InventarDataResultError["ArtikelRefNotFound"] = 2] = "ArtikelRefNotFound";
      InventarDataResultError[InventarDataResultError["ArtikelDataNotFound"] = 3] = "ArtikelDataNotFound";
    })(InventarDataResultError || (InventarDataResultError = {}));

    var JoinResultType;

    (function (JoinResultType) {
      JoinResultType[JoinResultType["List"] = 0] = "List";
      JoinResultType[JoinResultType["First"] = 1] = "First";
      JoinResultType[JoinResultType["Count"] = 2] = "Count";
    })(JoinResultType || (JoinResultType = {}));

    var log = {
      info: function info(line) {
        var l = console.log.bind(console, '[INFO] data.service.ts #' + line);

        for (var _len5 = arguments.length, vars = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {
          vars[_key5 - 1] = arguments[_key5];
        }

        l.apply(console, vars);
      },
      err: function err(line) {
        var l = console.error.bind(console, '[ERROR] data.service.ts #' + line);

        for (var _len6 = arguments.length, vars = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {
          vars[_key6 - 1] = arguments[_key6];
        }

        l.apply(console, vars);
      },
      dbg: function dbg(line) {
        var l = console.log.bind(console, '[Debug] data.service.ts #' + line);

        for (var _len7 = arguments.length, vars = new Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {
          vars[_key7 - 1] = arguments[_key7];
        }

        l.apply(console, vars);
      },
      warn: function warn(line) {
        var l = console.log.bind(console, '[Warning] data.service.ts #' + line);

        for (var _len8 = arguments.length, vars = new Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {
          vars[_key8 - 1] = arguments[_key8];
        }

        l.apply(console, vars);
      }
    };

    var DataService = /*#__PURE__*/function () {
      function DataService(api, dexie, barcodeLookup, connectionService, settingsService, DbSyncService, dbSyncLogService) {
        var _this124 = this;

        _classCallCheck(this, DataService);

        this.api = api;
        this.dexie = dexie;
        this.barcodeLookup = barcodeLookup;
        this.connectionService = connectionService;
        this.settingsService = settingsService;
        this.DbSyncService = DbSyncService;
        this.dbSyncLogService = dbSyncLogService;
        this.lastLoadFailed = false;
        this.loadingDataChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.clientSyncAmountChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.currentState = connectionService.getCurrentState();
        this.connectionService.monitor().subscribe(function (currentState) {
          log.info(43, 'network status has changed', {
            currentState: currentState
          });
          _this124.currentState = currentState;
          _this124.subscriptionClientLogsChanged = _this124.dexie.clientSyncAmountChanged.subscribe(function (amount) {
            console.log('DataService #245 clientSyncAmountChanged: ', {
              amount: amount
            });

            _this124.clientSyncAmountChanged.emit(amount);
          });
        });
      }

      _createClass(DataService, [{
        key: "ngOnDestroy",
        value: function ngOnDestroy() {
          this.subscriptionClientLogsChanged.unsubscribe();
        }
      }, {
        key: "getSelectedRoom",
        value: function getSelectedRoom() {}
      }, {
        key: "getUserAssignedInventories",
        value: function getUserAssignedInventories(uid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee189() {
            var userInventuren;
            return regeneratorRuntime.wrap(function _callee189$(_context189) {
              while (1) {
                switch (_context189.prev = _context189.next) {
                  case 0:
                    log.info(173, 'getUserAssignedInventories');
                    userInventuren = [];

                    if (!this.currentState.hasServerAccess) {
                      _context189.next = 8;
                      break;
                    }

                    log.dbg(177, 'getUserAssignedInventories, call loadUserAssignedInventories');
                    _context189.next = 6;
                    return this.loadUserAssignedInventories();

                  case 6:
                    _context189.next = 9;
                    break;

                  case 8:
                    log.err(180, 'getUserAssignedInventories no InternetAccess. Cannot call loadUserAssignedInventories', {
                      'this.currentState': this.currentState,
                      'this.currentState.hasInternetAccess': this.currentState.hasServerAccess
                    });

                  case 9:
                    _context189.next = 11;
                    return Promise.all([this.dexie.inventuren.toArray(), this.dexie.inventurenUser.where('uid').equals(uid).toArray()]).then(function (results) {
                      var inv = results[0];
                      var jobids = results[1].map(function (itm) {
                        return itm.jobid;
                      });
                      userInventuren = inv.filter(function (itm) {
                        return jobids.indexOf(itm.jobid) !== -1;
                      });
                      console.log('#72 getUserAssignedInventories', {
                        inv: inv,
                        jobids: jobids,
                        userInventuren: userInventuren
                      });
                    });

                  case 11:
                    return _context189.abrupt("return", userInventuren);

                  case 12:
                  case "end":
                    return _context189.stop();
                }
              }
            }, _callee189, this);
          }));
        }
      }, {
        key: "loadInventurSelection",
        value: function loadInventurSelection() {}
      }, {
        key: "loadUserAssignedInventories",
        value: function loadUserAssignedInventories() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee191() {
            var _this125 = this;

            var db, api;
            return regeneratorRuntime.wrap(function _callee191$(_context191) {
              while (1) {
                switch (_context191.prev = _context191.next) {
                  case 0:
                    log.dbg(205, 'loadUserAssignedInventories');
                    db = this.dexie;
                    api = this.api;
                    this.dbSyncLogService.metaMessage({
                      message: 'Lade Inventuren Meta-Daten ...'
                    }); // jobidsByAuthUser

                    _context191.next = 6;
                    return Promise.all([api.get('auth/me').toPromise(), api.get('api/inventur/jobidsByAuthUser').toPromise(), api.get('api/inventur/clientsByAuthUser').toPromise().then(function (list) {
                      _this125.dbSyncLogService.metaMessage({
                        message: 'Lade Mandanten ... ' + list.length
                      });

                      return Promise.all(list.map(function (item) {
                        return db.mandanten.put(item);
                      }));
                    }), api.get('api/inventur/gebaeudeByAuthUser').toPromise().then(function (list) {
                      _this125.dbSyncLogService.metaMessage({
                        message: 'Lade Mandanten ... ' + list.length
                      });

                      return Promise.all(list.map(function (item) {
                        return db.gebaeude.put(item);
                      }));
                    }), api.get('api/inventur/listByAuthUser').toPromise().then(function (list) {
                      _this125.dbSyncLogService.metaMessage({
                        message: 'Lade Gebäude ... ' + list.length
                      });

                      return Promise.all(list.map(function (item) {
                        return db.inventuren.put(item);
                      }));
                    }), api.get('api/inventur/inventurenGebaeudeByAuthUser').toPromise() // ,api.get<DBDIInventurenUserStatus[]>( 'api/inventur/inventurenStatusByAuthUser').toPromise()
                    ]).then(function (results) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this125, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee190() {
                        var authUser, invUser, mandantenRslt, gebaeudeRslt, inventurenRslt, invGebaeude, del, delG;
                        return regeneratorRuntime.wrap(function _callee190$(_context190) {
                          while (1) {
                            switch (_context190.prev = _context190.next) {
                              case 0:
                                this.dbSyncLogService.metaMessage({
                                  message: 'Inventuren Meta-Daten wurden heruntergeladen'
                                });
                                authUser = results[0];
                                invUser = results[1];
                                mandantenRslt = results[2];
                                gebaeudeRslt = results[3];
                                inventurenRslt = results[4];
                                invGebaeude = results[5];
                                this.dbSyncLogService.metaMessage({
                                  message: 'Bereinige Inventur-Auswahl'
                                });
                                _context190.next = 10;
                                return db.inventurenUser.where('uid').equals(authUser.id)["delete"]();

                              case 10:
                                del = _context190.sent;
                                _context190.next = 13;
                                return invUser.map(function (item) {
                                  return db.inventurenUser.add(item).then(function (id) {
                                    return id;
                                  })["catch"](function (reason) {
                                    console.error(reason, 'DataService.loadUserAssignedInventories() #293', {
                                      item: item
                                    });
                                    return [0, 0];
                                  });
                                });

                              case 13:
                                this.dbSyncLogService.metaMessage({
                                  message: 'Bereinige Gebäude-Auswahl'
                                });
                                _context190.next = 16;
                                return db.inventurenGebaeude.where('uid').equals(authUser.id)["delete"]()["catch"](function (reason) {
                                  return console.error('Cannot delete GRef', reason);
                                });

                              case 16:
                                delG = _context190.sent;
                                _context190.next = 19;
                                return invGebaeude.map(function (item) {
                                  return db.inventurenGebaeude.add(item)["catch"](function (reason) {
                                    console.error(reason, 'DataService..loadUserAssignedInventories() #304 inventurenGebaeude.add', {
                                      item: item
                                    });
                                  });
                                });

                              case 19:
                                this.dbSyncLogService.metaMessage({
                                  message: 'Inventuren Meta-Daten wurden importiert'
                                });
                                console.log('Finished loading user-inventories');
                                return _context190.abrupt("return", true);

                              case 22:
                              case "end":
                                return _context190.stop();
                            }
                          }
                        }, _callee190, this);
                      }));
                    })["finally"](function () {});

                  case 6:
                    return _context191.abrupt("return", _context191.sent);

                  case 7:
                  case "end":
                    return _context191.stop();
                }
              }
            }, _callee191, this);
          }));
        }
      }, {
        key: "loadClientList",
        value: function loadClientList() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee192() {
            var _this126 = this;

            return regeneratorRuntime.wrap(function _callee192$(_context192) {
              while (1) {
                switch (_context192.prev = _context192.next) {
                  case 0:
                    console.log('#244  data.service loadClientList');
                    return _context192.abrupt("return", this.api.get('api/mandant').subscribe(function (list) {
                      console.log('SelectInventoryComponent', 'loadClientList', {
                        list: list
                      });
                      var asyncJobs = [];
                      asyncJobs.push(_this126.dexie.mandanten.clear());
                      list.forEach(function (item) {
                        console.log({
                          called: 'loadClientList',
                          item: item
                        });
                        asyncJobs.push(_this126.dexie.mandanten.put(item));
                      });
                      Promise.all(asyncJobs)["finally"](function () {});
                    }));

                  case 2:
                  case "end":
                    return _context192.stop();
                }
              }
            }, _callee192, this);
          }));
        }
      }, {
        key: "loadGebaeudeListByClientId",
        value: function loadGebaeudeListByClientId(mid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee193() {
            var _this127 = this;

            return regeneratorRuntime.wrap(function _callee193$(_context193) {
              while (1) {
                switch (_context193.prev = _context193.next) {
                  case 0:
                    console.log('#261  data.service loadGebaeudeListByClientd');
                    _context193.next = 3;
                    return this.api.get('api/mandant/' + mid + '/gebaeude').subscribe(function (list) {
                      console.log('SelectInventoryComponent', 'loadClientList', {
                        list: list
                      });

                      _this127.dexie.gebaeude.where('mid').equals(mid)["delete"]().then(function () {
                        return list.map(function (item) {
                          console.log({
                            called: 'loadGebaeudeList',
                            item: item
                          });
                          return _this127.dexie.gebaeude.put(item);
                        });
                      })["finally"](function () {});
                    });

                  case 3:
                    return _context193.abrupt("return", true);

                  case 4:
                  case "end":
                    return _context193.stop();
                }
              }
            }, _callee193, this);
          }));
        }
      }, {
        key: "loadRaeumeListByGebaeudeId",
        value: function loadRaeumeListByGebaeudeId(gid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee195() {
            var _this128 = this;

            return regeneratorRuntime.wrap(function _callee195$(_context195) {
              while (1) {
                switch (_context195.prev = _context195.next) {
                  case 0:
                    console.log('#283  data.service');
                    this.api.get('api/gebaeude/' + gid + '/raeume').subscribe(function (list) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this128, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee194() {
                        var _this129 = this;

                        return regeneratorRuntime.wrap(function _callee194$(_context194) {
                          while (1) {
                            switch (_context194.prev = _context194.next) {
                              case 0:
                                console.log('SelectInventoryComponent', 'loadClientList', {
                                  list: list
                                });
                                this.dexie.stopChangeLogForImport(true);
                                _context194.next = 4;
                                return this.dexie.raeume.where('gid').equals(gid)["delete"]().then(function (nr) {
                                  return list.map(function (item) {
                                    console.log({
                                      called: 'loadClientList',
                                      item: item
                                    });
                                    return _this129.dexie.raeume.put(Object.assign({}, item, {
                                      log: false
                                    }));
                                  });
                                })["finally"](function () {
                                  _this129.dexie.stopChangeLogForImport(false);
                                });

                              case 4:
                              case "end":
                                return _context194.stop();
                            }
                          }
                        }, _callee194, this);
                      }));
                    });

                  case 2:
                  case "end":
                    return _context195.stop();
                }
              }
            }, _callee195, this);
          }));
        }
      }, {
        key: "loadInventar",
        value: function loadInventar(gid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee197() {
            var _this130 = this;

            return regeneratorRuntime.wrap(function _callee197$(_context197) {
              while (1) {
                switch (_context197.prev = _context197.next) {
                  case 0:
                    console.log('#303  data.service');
                    this.api.get('api/gebaeude/' + gid + '/raeume').subscribe(function (list) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this130, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee196() {
                        var _this131 = this;

                        return regeneratorRuntime.wrap(function _callee196$(_context196) {
                          while (1) {
                            switch (_context196.prev = _context196.next) {
                              case 0:
                                console.log('SelectInventoryComponent', 'loadClientList', {
                                  list: list
                                });
                                this.dexie.stopChangeLogForImport(true);
                                console.log('#303 data-service delete raeume');
                                return _context196.abrupt("return", this.dexie.raeume.where('gid').equals(gid)["delete"]().then(function (nr) {
                                  return list.map(function (item) {
                                    console.log({
                                      called: 'loadClientList',
                                      item: item
                                    });
                                    return _this131.dexie.raeume.put(Object.assign({}, item, {
                                      log: false
                                    }));
                                  });
                                })["finally"](function () {
                                  _this131.dexie.stopChangeLogForImport(false);
                                }));

                              case 4:
                              case "end":
                                return _context196.stop();
                            }
                          }
                        }, _callee196, this);
                      }));
                    });

                  case 2:
                  case "end":
                    return _context197.stop();
                }
              }
            }, _callee197, this);
          }));
        }
      }, {
        key: "hasAllInventurData",
        value: function hasAllInventurData(jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee198() {
            var for_jobid;
            return regeneratorRuntime.wrap(function _callee198$(_context198) {
              while (1) {
                switch (_context198.prev = _context198.next) {
                  case 0:
                    // tslint:disable-next-line:variable-name
                    for_jobid = jobid;
                    _context198.next = 3;
                    return this.dexie.inventar.where({
                      for_jobid: for_jobid
                    }).first();

                  case 3:
                    _context198.t3 = !!_context198.sent;

                    if (!_context198.t3) {
                      _context198.next = 8;
                      break;
                    }

                    _context198.next = 7;
                    return this.dexie.raeume.where({
                      for_jobid: for_jobid
                    }).first();

                  case 7:
                    _context198.t3 = !!_context198.sent;

                  case 8:
                    _context198.t2 = _context198.t3;

                    if (!_context198.t2) {
                      _context198.next = 13;
                      break;
                    }

                    _context198.next = 12;
                    return this.dexie.objektKatalogMandant.where({
                      for_jobid: for_jobid
                    }).first();

                  case 12:
                    _context198.t2 = !!_context198.sent;

                  case 13:
                    _context198.t1 = _context198.t2;

                    if (!_context198.t1) {
                      _context198.next = 18;
                      break;
                    }

                    _context198.next = 17;
                    return this.dexie.objektbuchBarcodesLookup.where({
                      for_jobid: for_jobid
                    }).first();

                  case 17:
                    _context198.t1 = !!_context198.sent;

                  case 18:
                    _context198.t0 = _context198.t1;

                    if (!_context198.t0) {
                      _context198.next = 23;
                      break;
                    }

                    _context198.next = 22;
                    return this.dexie.barcodeLookup.where({
                      for_jobid: for_jobid
                    }).first();

                  case 22:
                    _context198.t0 = !!_context198.sent;

                  case 23:
                    return _context198.abrupt("return", _context198.t0);

                  case 24:
                  case "end":
                    return _context198.stop();
                }
              }
            }, _callee198, this);
          }));
        }
      }, {
        key: "hasValidInventurRevId",
        value: function hasValidInventurRevId(jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee199() {
            var varName, lastRevId;
            return regeneratorRuntime.wrap(function _callee199$(_context199) {
              while (1) {
                switch (_context199.prev = _context199.next) {
                  case 0:
                    varName = 'jobid-' + jobid + '-revision-id';
                    _context199.next = 3;
                    return this.settingsService.get(varName, 0);

                  case 3:
                    lastRevId = +_context199.sent;
                    return _context199.abrupt("return", !isNaN(lastRevId) && lastRevId > 0);

                  case 5:
                  case "end":
                    return _context199.stop();
                }
              }
            }, _callee199, this);
          }));
        }
      }, {
        key: "loadInventurDataByInventurId",
        value: function loadInventurDataByInventurId(jobid) {
          var reset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee201() {
            var _this132 = this,
                _arguments2 = arguments;

            var syncLogMsg, syncLogErr, tables, tablesLoadingStatus, t, tblStatus, inventurAlreadyStartedRevId, hasAllInventurData, numUnsyncedClientChanges, syncJobResult, numRaeume, resetCmt, loadingResult;
            return regeneratorRuntime.wrap(function _callee201$(_context201) {
              while (1) {
                switch (_context201.prev = _context201.next) {
                  case 0:
                    console.log('#324 called loadInventurDataByInventurId(', jobid, reset, ')');
                    this.setLoadingStarted(jobid);
                    syncLogMsg = this.dbSyncLogService.message.bind(this.dbSyncLogService, [jobid]);
                    syncLogErr = this.dbSyncLogService.error.bind(this.dbSyncLogService, [jobid]);
                    tables = {
                      gebaeude: 'pending',
                      raeume: 'pending',
                      hersteller: 'pending',
                      images: 'pending',
                      inventar: 'pending',
                      objektKatalogGlobal: 'pending',
                      objektKatalogMandant: 'pending',
                      objektKatalogImages: 'pending',
                      objektbuchBarcodesLookup: 'pending'
                    };
                    tablesLoadingStatus = {};
                    _context201.t0 = regeneratorRuntime.keys(tables);

                  case 7:
                    if ((_context201.t1 = _context201.t0()).done) {
                      _context201.next = 14;
                      break;
                    }

                    t = _context201.t1.value;

                    if (tables.hasOwnProperty(t)) {
                      _context201.next = 11;
                      break;
                    }

                    return _context201.abrupt("continue", 7);

                  case 11:
                    tablesLoadingStatus[t] = {
                      table: t,
                      status: 'pending',
                      total: -1,
                      current: -1,
                      progress: 0,
                      startDate: null,
                      finished: null
                    };
                    _context201.next = 7;
                    break;

                  case 14:
                    tblStatus = function tblStatus(table, statKey, value) {
                      console.log('#441 tblStatus', {
                        table: table,
                        statKey: statKey,
                        value: value,
                        tables: tables,
                        tablesLoadingStatus: tablesLoadingStatus
                      });

                      if (typeof statKey === 'string' && typeof value !== 'undefined') {
                        tablesLoadingStatus[table][statKey] = value;
                        tables[table] = statKey + ' ' + value;
                      } else if (typeof statKey === 'string') {
                        tablesLoadingStatus[table].status = statKey;
                        tables[table] = statKey;
                      } else if (typeof statKey === 'object') {
                        for (var k in statKey) {
                          if (statKey.hasOwnProperty(k)) {
                            tablesLoadingStatus[table][k] = statKey[k];
                            tables[table] = k + ' ' + statKey[k];
                          }
                        }
                      }

                      _this132.loadingDataChanged.emit(tablesLoadingStatus);

                      console.log(tables);
                    };

                    _context201.next = 17;
                    return this.settingsService.get('jobid-' + jobid + '-revision-id', 0);

                  case 17:
                    inventurAlreadyStartedRevId = +_context201.sent;
                    console.log('#388 loadInventurDataByInventurId, inventurAlreadyStartedRevId: ', inventurAlreadyStartedRevId);
                    _context201.next = 21;
                    return this.hasAllInventurData(jobid);

                  case 21:
                    hasAllInventurData = _context201.sent;

                    if (!(!reset && !isNaN(inventurAlreadyStartedRevId) && inventurAlreadyStartedRevId > 0 && hasAllInventurData)) {
                      _context201.next = 44;
                      break;
                    }

                    console.log('#338 loadInventurDataByInventurId');
                    _context201.next = 26;
                    return this.DbSyncService.numUnsyncedChangeLogsByJobId(jobid);

                  case 26:
                    numUnsyncedClientChanges = _context201.sent;
                    console.log('#340 loadInventurDataByInventurId', {
                      numUnsyncedClientChanges: numUnsyncedClientChanges
                    });

                    if (!numUnsyncedClientChanges) {
                      _context201.next = 37;
                      break;
                    }

                    console.log('#342 loadInventurDataByInventurId START SYNC', {
                      numUnsyncedClientChanges: numUnsyncedClientChanges
                    });
                    this.setLoadingFinished();
                    _context201.next = 33;
                    return this.DbSyncService.syncJob(jobid);

                  case 33:
                    syncJobResult = _context201.sent;
                    return _context201.abrupt("return", [{
                      success: true,
                      switchedToSync: true,
                      syncJobResult: syncJobResult
                    }]);

                  case 37:
                    console.log('#346 loadInventurDataByInventurId NOTHING TO SYNC');
                    this.setLoadingFinished();
                    _context201.next = 41;
                    return this.settingsService.get('jobid-' + jobid + '-revision-id');

                  case 41:
                    _context201.t2 = _context201.sent;
                    _context201.t3 = {
                      success: true,
                      errorMsg: '',
                      total: 0,
                      inserts: 0,
                      revisionId: _context201.t2,
                      debug: null
                    };
                    return _context201.abrupt("return", [_context201.t3]);

                  case 44:
                    // await this.DbSyncService
                    this.dbSyncLogService.start(jobid, inventurAlreadyStartedRevId);
                    this.dexie.stopChangeLogForImport(true);

                    if (!reset) {
                      _context201.next = 62;
                      break;
                    }

                    syncLogMsg('Reset: Daten werden für kompletten Neu-Import zurückgesetzt!');
                    console.log('DataService.loadInventurDataByInventurId(', jobid, reset, ')  #473');
                    _context201.next = 51;
                    return this.dexie.raeume.where({
                      for_jobid: jobid
                    }).count()["catch"](function (reason) {
                      console.error('#354 ', {
                        reason: reason
                      });
                    });

                  case 51:
                    numRaeume = _context201.sent;
                    console.log('#357 Before cleanup');
                    _context201.next = 55;
                    return Promise.all([this.dexie.raeume.where({
                      for_jobid: jobid
                    })["delete"]()["finally"](function () {
                      syncLogMsg('Finished Reset Räume');
                      console.log('#359finished cleanup raeume');
                    }), this.dexie.inventar.where({
                      for_jobid: jobid
                    })["delete"]()["finally"](function () {
                      syncLogMsg('Finished Reset Inventar');
                      console.log('#361 finished cleanup inventar');
                    }), this.dexie.hersteller.where({
                      for_jobid: jobid
                    })["delete"]()["finally"](function () {
                      syncLogMsg('Finished Reset Hersteller');
                      console.log('#363 finished cleanup hersteller');
                    }), this.dexie.images.filter(function (img) {
                      return img.for_jobid === jobid;
                    })["delete"]()["finally"](function () {
                      syncLogMsg('Finished Reset Images');
                      console.log('#365 finished cleanup images');
                    }), this.dexie.objektKatalogMandant.where({
                      for_jobid: jobid
                    })["delete"]()["finally"](function () {
                      syncLogMsg('Finished Reset Katalogdaten (Mandant)');
                      console.log('#367 finished cleanup okg');

                      _this132.dexie.objektKatalogGlobal.where({
                        created_jobid: jobid
                      }).each(function (itm) {
                        _this132.dexie.objektKatalogMandant.where({
                          gcuuid: itm.uuid
                        }).count().then(function (num) {
                          if (num === 0) {
                            _this132.dexie.objektKatalogGlobal["delete"](itm.uuid);
                          }
                        });
                      })["finally"](function () {
                        syncLogMsg('Finished Reset Mandanten-Spezifische Katalogdaten (Global)');
                        console.log('#463 finished cleanup okm');
                      });
                    }), this.dexie.objektKatalogImages.where({
                      created_jobid: jobid
                    })["delete"]()["finally"](function () {
                      syncLogMsg('Finished Reset Katalog/Raum-Images');
                      console.log('#459 finished cleanup okm');
                    }), this.dexie.clientChangeLog.where({
                      jobid: jobid
                    })["delete"]()["finally"](function () {
                      syncLogMsg('Finished Reset Client-Change-Log');
                      console.log('#464 finished cleanup clientchangelog');
                    })]);

                  case 55:
                    syncLogMsg('Reset: Daten wurden zurückgesetzt!');
                    console.log('#373 After cleanup');
                    resetCmt = 'data.service.tx loadInventurDataByInventurId() reset';
                    _context201.next = 60;
                    return Promise.all([this.settingsService.set('jobid-' + jobid + '-revision-id', 0, resetCmt), this.settingsService.set('inventar-' + jobid + '-revision-id', 0, resetCmt), this.settingsService.set('raeume-' + jobid + '-revision-id', 0, resetCmt), this.settingsService.set('images-' + jobid + '-revision-id', 0, resetCmt), this.settingsService.set('hersteller-' + jobid + '-revision-id', 0, resetCmt), this.settingsService.set('objektKatalogGlobal-' + jobid + '-revision-id', 0, resetCmt), this.settingsService.set('objektKatalogMandant-' + jobid + '-revision-id', 0, resetCmt), this.settingsService.set('objektKatalogImages-' + jobid + '-revision-id', 0, resetCmt)]);

                  case 60:
                    syncLogMsg('Reset: Revision-Ids wurden zurückgesetzt!');
                    console.log('#362 loadInventurDataByInventurId');

                  case 62:
                    syncLogMsg('Import: Starte Server-Download!');
                    console.log('#477 loadInventurDataByInventurId, start parallel data-imports.');
                    _context201.next = 66;
                    return Promise.all([this.loadTableDataByUrl('gebaeude', "api/inventur/".concat(jobid, "/gebaeude"), tblStatus, {
                      jobid: jobid,
                      reset: reset
                    }), this.loadTableDataByUrl('raeume', "api/inventur/".concat(jobid, "/raeume"), tblStatus, {
                      jobid: jobid,
                      reset: reset
                    }), this.loadTableDataByUrl('hersteller', "api/inventur/".concat(jobid, "/hersteller"), tblStatus, {
                      jobid: jobid,
                      reset: reset
                    }), this.loadTableDataByUrl('images', "api/inventur/".concat(jobid, "/images"), tblStatus, {
                      jobid: jobid,
                      reset: reset
                    }), this.loadTableDataByUrl('inventar', "api/inventur/".concat(jobid, "/inventar"), tblStatus, {
                      jobid: jobid,
                      reset: reset
                    }), this.loadTableDataByUrl('objektKatalogGlobal', "api/inventur/".concat(jobid, "/katalog"), tblStatus, {
                      jobid: jobid,
                      reset: reset
                    }), this.loadTableDataByUrl('objektKatalogMandant', "api/inventur/".concat(jobid, "/artikelids"), tblStatus, {
                      jobid: jobid,
                      reset: reset
                    }), this.loadTableDataByUrl('objektbuchBarcodesLookup', "api/inventur/".concat(jobid, "/objektbuchLookup"), tblStatus, {
                      jobid: jobid,
                      reset: reset
                    }), this.loadTableDataByUrl('objektKatalogImages', "api/inventur/".concat(jobid, "/katalogImages"), tblStatus, {
                      jobid: jobid,
                      reset: reset
                    })]).then(function (results) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this132, _arguments2, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee200() {
                        var maxRevId,
                            _args200 = arguments;
                        return regeneratorRuntime.wrap(function _callee200$(_context200) {
                          while (1) {
                            switch (_context200.prev = _context200.next) {
                              case 0:
                                maxRevId = results.reduce(function (carry, item) {
                                  if (isNaN(item.revisionId)) {
                                    console.log('#501 data.service item.revisionId not found', {
                                      carry: carry,
                                      item: item
                                    });
                                    return carry;
                                  }

                                  var max = Math.max(carry, item.revisionId || 0);
                                  console.log('#414 data.service reduce to maxRevId', {
                                    carry: carry,
                                    item: item,
                                    max: max
                                  });
                                  return Math.max(carry, item.revisionId);
                                }, 0);
                                this.settingsService.setRevId('jobid-' + jobid + '-revision-id', maxRevId, 'data.service.ts loadInventurDataByInventurId()');
                                console.log('#511 data.service.ts loadInventurDataByInventurId() Start rebuild of barcodeLookup Table');
                                _context200.next = 5;
                                return this.barcodeLookup.rebuildByJobid(jobid);

                              case 5:
                                console.log('#513 data.service.ts loadInventurDataByInventurId() finished', 'arguments', _args200);
                                return _context200.abrupt("return", results);

                              case 7:
                              case "end":
                                return _context200.stop();
                            }
                          }
                        }, _callee200, this);
                      }));
                    })["finally"](function () {
                      _this132.dexie.stopChangeLogForImport(false);
                    });

                  case 66:
                    loadingResult = _context201.sent;
                    this.setLoadingFinished();
                    return _context201.abrupt("return", loadingResult);

                  case 69:
                  case "end":
                    return _context201.stop();
                }
              }
            }, _callee201, this);
          }));
        }
      }, {
        key: "setLoadingStarted",
        value: function setLoadingStarted(jobid) {
          this.DbSyncService.setFullImportJobId(jobid);
        }
      }, {
        key: "setLoadingFinished",
        value: function setLoadingFinished() {
          this.DbSyncService.setFullImportJobId(0);
        }
      }, {
        key: "getLoadingJobId",
        value: function getLoadingJobId() {
          return this.DbSyncService.getFullImportJobId();
        }
      }, {
        key: "loadTableDataByUrl",
        value: function loadTableDataByUrl(table, dataUrl, cbTblStatus, options) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee204() {
            var _this133 = this;

            var syncLogMsg, syncLogErr, syncLogData, jobid, reset, varLastRevisionId, varLastLoadAttempt, varLastLoadSuccess, varLastLoadEntries, lastRevisionId, lastLoadSuccessDate, lastLoadAttemptDate, nextUrl, inserts, total, revisionId, numChunks, logData, _loop5;

            return regeneratorRuntime.wrap(function _callee204$(_context205) {
              while (1) {
                switch (_context205.prev = _context205.next) {
                  case 0:
                    syncLogMsg = this.dbSyncLogService.message.bind(this.dbSyncLogService, [options.jobid]);
                    syncLogErr = this.dbSyncLogService.error.bind(this.dbSyncLogService, [options.jobid]);
                    syncLogData = this.dbSyncLogService.log.bind(this.dbSyncLogService);
                    console.log('#425  data.service loadTableDataByUrl ', table);
                    jobid = options.jobid;
                    reset = options.reset || false;
                    varLastRevisionId = "".concat(table, "-").concat(jobid, "-revision-id");
                    varLastLoadAttempt = "".concat(table, "-").concat(jobid, "-download-attempt");
                    varLastLoadSuccess = "".concat(table, "-").concat(jobid, "-download-success");
                    varLastLoadEntries = "".concat(table, "-").concat(jobid, "-download-entries");
                    _context205.next = 12;
                    return this.settingsService.get(varLastRevisionId);

                  case 12:
                    lastRevisionId = _context205.sent;
                    _context205.next = 15;
                    return this.settingsService.get(varLastLoadSuccess);

                  case 15:
                    lastLoadSuccessDate = _context205.sent;
                    lastLoadAttemptDate = new Date();
                    nextUrl = dataUrl;
                    this.settingsService.set(varLastLoadAttempt, lastLoadAttemptDate);

                    if (!reset && lastLoadSuccessDate) {
                      nextUrl += '?lastLoad=' + Date.parse(lastLoadSuccessDate) + '&lastRevId=' + lastRevisionId;
                    }

                    inserts = 0;
                    total = 0;
                    revisionId = 0;
                    numChunks = 0;
                    syncLogMsg('Starte Download und Import: ' + table + ' from ' + nextUrl);

                    if (!nextUrl) {
                      console.error('#551  this.loadTableDataByUrl nextUrl is Empty', {
                        table: table,
                        dataUrl: dataUrl,
                        nextUrl: nextUrl,
                        reset: reset
                      });
                    }

                    logData = function logData(puts) {
                      return {
                        jobid: jobid,
                        table: table,
                        revisionId: revisionId,
                        total: total,
                        puts: puts,
                        modified: 0,
                        deleted: 0
                      };
                    };

                    _loop5 = /*#__PURE__*/regeneratorRuntime.mark(function _loop5() {
                      var url;
                      return regeneratorRuntime.wrap(function _loop5$(_context204) {
                        while (1) {
                          switch (_context204.prev = _context204.next) {
                            case 0:
                              url = nextUrl;

                              if (cbTblStatus) {
                                cbTblStatus(table, {
                                  status: 'downloading Part ' + (numChunks + 1),
                                  startDate: new Date()
                                });
                              }

                              console.log({
                                "function": 'loadTableDataByUrl',
                                table: table,
                                url: url,
                                cbTblStatus: cbTblStatus,
                                options: options
                              });
                              _context204.next = 5;
                              return _this133.api.get(url).toPromise().then(function (data) {
                                return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this133, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee203() {
                                  var _this134 = this;

                                  var numRows, stepSize;
                                  return regeneratorRuntime.wrap(function _callee203$(_context203) {
                                    while (1) {
                                      switch (_context203.prev = _context203.next) {
                                        case 0:
                                          nextUrl = 'nextUrl' in data ? data.nextUrl : '';
                                          console.log('#452 data.service: Retrieved Data ', table, ' for processing!');
                                          numChunks++;
                                          numRows = data.rows.length;

                                          if ('total' in data) {
                                            total = data.total;
                                          } else {
                                            total = numRows;
                                          }

                                          if (cbTblStatus) {
                                            cbTblStatus(table, {
                                              status: 'process import',
                                              total: total
                                            });
                                          }

                                          revisionId = data.revisionId || 0;
                                          this.settingsService.set(varLastLoadSuccess, lastLoadAttemptDate);
                                          this.settingsService.set(varLastLoadEntries, inserts + numRows);
                                          stepSize = parseInt((data.rows.length / 10).toString(), 10);

                                          if (!data.rows) {
                                            console.error('#468 data.service loadTableDataByUrl Invalid Data-Structure from ', {
                                              url: url,
                                              data: data
                                            });
                                          }

                                          _context203.next = 13;
                                          return Promise.all(data.rows.map(function (item, i) {
                                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this134, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee202() {
                                              return regeneratorRuntime.wrap(function _callee202$(_context202) {
                                                while (1) {
                                                  switch (_context202.prev = _context202.next) {
                                                    case 0:
                                                      return _context202.abrupt("return", this.dexie.table(table).put(Object.assign({}, item, {
                                                        log: false
                                                      })).then(function () {
                                                        if (((i + 1) % stepSize === 0 || i + 1 === total) && cbTblStatus) {
                                                          cbTblStatus(table, {
                                                            current: inserts + 1,
                                                            progress: ((inserts + 1) * 100 / total).toFixed(1)
                                                          });
                                                        }

                                                        inserts += 1;

                                                        if (inserts % 100 === 0) {
                                                          syncLogData(logData(inserts));
                                                        }

                                                        return true;
                                                      }));

                                                    case 1:
                                                    case "end":
                                                      return _context202.stop();
                                                  }
                                                }
                                              }, _callee202, this);
                                            }));
                                          }));

                                        case 13:
                                          return _context203.abrupt("return", _context203.sent);

                                        case 14:
                                        case "end":
                                          return _context203.stop();
                                      }
                                    }
                                  }, _callee203, this);
                                }));
                              });

                            case 5:
                            case "end":
                              return _context204.stop();
                          }
                        }
                      }, _loop5);
                    });

                  case 28:
                    if (!nextUrl) {
                      _context205.next = 32;
                      break;
                    }

                    return _context205.delegateYield(_loop5(), "t0", 30);

                  case 30:
                    _context205.next = 28;
                    break;

                  case 32:
                    if (revisionId) {
                      this.settingsService.set(varLastRevisionId, revisionId);
                    }

                    syncLogData(logData(inserts));
                    syncLogMsg('Finished Table ' + table);

                    if (cbTblStatus) {
                      cbTblStatus(table, {
                        status: 'finished',
                        finished: new Date()
                      });
                    }

                    console.log('#543 data.service loadTableDataByUrl Finished Importprocess Data ', table, ' inserts', inserts);
                    return _context205.abrupt("return", {
                      success: true,
                      errorMsg: '',
                      total: total,
                      inserts: inserts,
                      numChunks: numChunks,
                      revisionId: revisionId
                    });

                  case 38:
                  case "end":
                    return _context205.stop();
                }
              }
            }, _callee204, this);
          }));
        }
      }, {
        key: "getClient",
        value: function getClient(clientID) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee205() {
            var clients, fclients;
            return regeneratorRuntime.wrap(function _callee205$(_context206) {
              while (1) {
                switch (_context206.prev = _context206.next) {
                  case 0:
                    _context206.next = 2;
                    return this.getClientList();

                  case 2:
                    clients = _context206.sent;
                    fclients = clients.filter(function (client) {
                      return client.mid === clientID;
                    });
                    console.log({
                      clientID: clientID,
                      clients: clients,
                      fclients: fclients
                    });
                    return _context206.abrupt("return", fclients.length ? fclients[0] : null);

                  case 6:
                  case "end":
                    return _context206.stop();
                }
              }
            }, _callee205, this);
          }));
        }
      }, {
        key: "getBuilding",
        value: function getBuilding(bldgID, clientID) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee206() {
            var bldgs, fbldgs;
            return regeneratorRuntime.wrap(function _callee206$(_context207) {
              while (1) {
                switch (_context207.prev = _context207.next) {
                  case 0:
                    _context207.next = 2;
                    return this.getBuildingList(clientID);

                  case 2:
                    bldgs = _context207.sent;
                    fbldgs = bldgs.filter(function (bldg) {
                      return bldg.gid === bldgID;
                    });
                    console.log({
                      bldgID: bldgID,
                      clientID: clientID,
                      bldgs: bldgs,
                      fbldgs: fbldgs
                    });
                    return _context207.abrupt("return", fbldgs.length ? fbldgs[0] : null);

                  case 6:
                  case "end":
                    return _context207.stop();
                }
              }
            }, _callee206, this);
          }));
        }
      }, {
        key: "getClientList",
        value: function getClientList() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee207() {
            return regeneratorRuntime.wrap(function _callee207$(_context208) {
              while (1) {
                switch (_context208.prev = _context208.next) {
                  case 0:
                    _context208.next = 2;
                    return this.dexie.mandanten.toArray();

                  case 2:
                    return _context208.abrupt("return", _context208.sent);

                  case 3:
                  case "end":
                    return _context208.stop();
                }
              }
            }, _callee207, this);
          }));
        }
      }, {
        key: "getFullArtikelData",
        value: function getFullArtikelData(link, globalData) {
          return Object.assign({}, globalData, link, {
            mcuuid: link.uuid
          });
        }
      }, {
        key: "getFullRaumData",
        value: function getFullRaumData(raum, gebaeude) {
          var raumGebaeudeData = Object.assign({}, raum, gebaeude);
          return raumGebaeudeData;
        }
      }, {
        key: "getArtikelRefByGcuuidMid",
        value: function getArtikelRefByGcuuidMid(gcuuid, mid) {
          return this.dexie.objektKatalogMandant.where({
            gcuuid: gcuuid,
            mid: mid
          }).first();
        }
      }, {
        key: "getArtikelRef",
        value: function getArtikelRef(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee208() {
            return regeneratorRuntime.wrap(function _callee208$(_context209) {
              while (1) {
                switch (_context209.prev = _context209.next) {
                  case 0:
                    return _context209.abrupt("return", this.dexie.objektKatalogMandant.get(uuid));

                  case 1:
                  case "end":
                    return _context209.stop();
                }
              }
            }, _callee208, this);
          }));
        }
      }, {
        key: "getArtikelData",
        value: function getArtikelData(gcuuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee209() {
            return regeneratorRuntime.wrap(function _callee209$(_context210) {
              while (1) {
                switch (_context210.prev = _context210.next) {
                  case 0:
                    return _context210.abrupt("return", this.dexie.objektKatalogGlobal.get(gcuuid));

                  case 1:
                  case "end":
                    return _context210.stop();
                }
              }
            }, _callee209, this);
          }));
        }
      }, {
        key: "getArtikel",
        value: function getArtikel(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee210() {
            var artikelLink, artikelData;
            return regeneratorRuntime.wrap(function _callee210$(_context211) {
              while (1) {
                switch (_context211.prev = _context211.next) {
                  case 0:
                    _context211.next = 2;
                    return this.dexie.objektKatalogMandant.get({
                      uuid: uuid
                    });

                  case 2:
                    artikelLink = _context211.sent;
                    _context211.next = 5;
                    return this.dexie.objektKatalogGlobal.get({
                      uuid: artikelLink.gcuuid
                    });

                  case 5:
                    artikelData = _context211.sent;
                    return _context211.abrupt("return", this.getFullArtikelData(artikelLink, artikelData));

                  case 7:
                  case "end":
                    return _context211.stop();
                }
              }
            }, _callee210, this);
          }));
        }
      }, {
        key: "getArtikelRefAndData",
        value: function getArtikelRefAndData(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee211() {
            var artikelRef, artikelData;
            return regeneratorRuntime.wrap(function _callee211$(_context212) {
              while (1) {
                switch (_context212.prev = _context212.next) {
                  case 0:
                    _context212.next = 2;
                    return this.dexie.objektKatalogMandant.get({
                      uuid: uuid
                    });

                  case 2:
                    artikelRef = _context212.sent;
                    _context212.next = 5;
                    return this.dexie.objektKatalogGlobal.get({
                      uuid: artikelRef.gcuuid
                    });

                  case 5:
                    artikelData = _context212.sent;
                    return _context212.abrupt("return", {
                      artikelRef: artikelRef,
                      artikelData: artikelData
                    });

                  case 7:
                  case "end":
                    return _context212.stop();
                }
              }
            }, _callee211, this);
          }));
        }
      }, {
        key: "getInventarRef",
        value: function getInventarRef(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee212() {
            return regeneratorRuntime.wrap(function _callee212$(_context213) {
              while (1) {
                switch (_context213.prev = _context213.next) {
                  case 0:
                    return _context213.abrupt("return", this.dexie.inventar.get(uuid));

                  case 1:
                  case "end":
                    return _context213.stop();
                }
              }
            }, _callee212, this);
          }));
        }
      }, {
        key: "getInventarData",
        value: function getInventarData(uuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee213() {
            var inventarRef, artikelRef, artikelData;
            return regeneratorRuntime.wrap(function _callee213$(_context214) {
              while (1) {
                switch (_context214.prev = _context214.next) {
                  case 0:
                    _context214.next = 2;
                    return this.dexie.inventar.get(uuid);

                  case 2:
                    inventarRef = _context214.sent;

                    if (inventarRef) {
                      _context214.next = 5;
                      break;
                    }

                    return _context214.abrupt("return", {
                      success: false,
                      errorCode: InventarDataResultError.InventarNotFound
                    });

                  case 5:
                    _context214.next = 7;
                    return this.dexie.objektKatalogMandant.get(inventarRef.mcuuid);

                  case 7:
                    artikelRef = _context214.sent;

                    if (artikelRef) {
                      _context214.next = 10;
                      break;
                    }

                    return _context214.abrupt("return", {
                      success: false,
                      errorCode: InventarDataResultError.ArtikelRefNotFound
                    });

                  case 10:
                    _context214.next = 12;
                    return this.dexie.objektKatalogGlobal.get(artikelRef.gcuuid);

                  case 12:
                    artikelData = _context214.sent;

                    if (artikelData) {
                      _context214.next = 15;
                      break;
                    }

                    return _context214.abrupt("return", {
                      success: false,
                      errorCode: InventarDataResultError.ArtikelDataNotFound
                    });

                  case 15:
                    return _context214.abrupt("return", {
                      success: true,
                      inventarData: {
                        inventar: inventarRef,
                        artikelRef: artikelRef,
                        artikelData: artikelData
                      }
                    });

                  case 16:
                  case "end":
                    return _context214.stop();
                }
              }
            }, _callee213, this);
          }));
        }
      }, {
        key: "getRaumAndGebaeude",
        value: function getRaumAndGebaeude(ruuid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee214() {
            var raum, gebaeude;
            return regeneratorRuntime.wrap(function _callee214$(_context215) {
              while (1) {
                switch (_context215.prev = _context215.next) {
                  case 0:
                    _context215.next = 2;
                    return this.dexie.raeume.get(ruuid);

                  case 2:
                    raum = _context215.sent;

                    if (!raum) {
                      _context215.next = 8;
                      break;
                    }

                    _context215.next = 6;
                    return this.dexie.gebaeude.get(raum.gid);

                  case 6:
                    gebaeude = _context215.sent;
                    return _context215.abrupt("return", {
                      raum: raum,
                      gebaeude: gebaeude
                    });

                  case 8:
                    return _context215.abrupt("return", null);

                  case 9:
                  case "end":
                    return _context215.stop();
                }
              }
            }, _callee214, this);
          }));
        }
      }, {
        key: "getRaum",
        value: function getRaum(uuid) {
          var _this135 = this;

          var raum;
          return this.dexie.raeume.get({
            uuid: uuid
          }).then(function (data) {
            raum = data;
            var gid = raum.gid;
            return _this135.dexie.gebaeude.get({
              gid: gid
            });
          }).then(function (gebaeude) {
            return _this135.getFullRaumData(raum, gebaeude);
          });
        }
      }, {
        key: "getRaeumeByGebaeudeId",
        value: function getRaeumeByGebaeudeId(gid, jobid) {
          return this.dexie.raeume.where({
            gid: gid,
            for_jobid: jobid
          }).toArray();
        }
      }, {
        key: "getArtikelListByClientId",
        value: function getArtikelListByClientId(mid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee217() {
            var _this136 = this;

            var artikelRefs, artikelData, artikelHst;
            return regeneratorRuntime.wrap(function _callee217$(_context218) {
              while (1) {
                switch (_context218.prev = _context218.next) {
                  case 0:
                    _context218.next = 2;
                    return this.dexie.objektKatalogMandant.where({
                      mid: mid
                    }).toArray();

                  case 2:
                    artikelRefs = _context218.sent;
                    _context218.next = 5;
                    return Promise.all(artikelRefs.map(function (ref) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this136, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee215() {
                        return regeneratorRuntime.wrap(function _callee215$(_context216) {
                          while (1) {
                            switch (_context216.prev = _context216.next) {
                              case 0:
                                _context216.next = 2;
                                return this.dexie.objektKatalogGlobal.get(ref.gcuuid);

                              case 2:
                                return _context216.abrupt("return", _context216.sent);

                              case 3:
                              case "end":
                                return _context216.stop();
                            }
                          }
                        }, _callee215, this);
                      }));
                    }));

                  case 5:
                    artikelData = _context218.sent;
                    _context218.next = 8;
                    return Promise.all(artikelData.map(function (ref) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this136, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee216() {
                        var hst;
                        return regeneratorRuntime.wrap(function _callee216$(_context217) {
                          while (1) {
                            switch (_context217.prev = _context217.next) {
                              case 0:
                                if (!(typeof ref === 'undefined' || !ref || !ref.huuid)) {
                                  _context217.next = 2;
                                  break;
                                }

                                return _context217.abrupt("return", '');

                              case 2:
                                _context217.next = 4;
                                return this.dexie.hersteller.get(ref.huuid);

                              case 4:
                                hst = _context217.sent;

                                if (!hst) {
                                  _context217.next = 7;
                                  break;
                                }

                                return _context217.abrupt("return", hst.Hersteller);

                              case 7:
                                return _context217.abrupt("return", '');

                              case 8:
                              case "end":
                                return _context217.stop();
                            }
                          }
                        }, _callee216, this);
                      }));
                    }));

                  case 8:
                    artikelHst = _context218.sent;
                    return _context218.abrupt("return", artikelRefs.map(function (ref, i) {
                      return Object.assign({}, artikelData[i], ref, {
                        mcuuid: ref.uuid
                      }, {
                        Hersteller: artikelHst[i]
                      } // artikelHst[i].Hersteller
                      );
                    }));

                  case 10:
                  case "end":
                    return _context218.stop();
                }
              }
            }, _callee217, this);
          }));
        }
      }, {
        key: "getInventarByBarcode",
        value: function getInventarByBarcode(barcode, useMid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee218() {
            var db, inventarMatches, _iterator8, _step8, inventar, artikelRef, _artikelData;

            return regeneratorRuntime.wrap(function _callee218$(_context219) {
              while (1) {
                switch (_context219.prev = _context219.next) {
                  case 0:
                    db = this.dexie;
                    _context219.next = 3;
                    return db.inventar.where({
                      code: barcode
                    }).toArray();

                  case 3:
                    inventarMatches = _context219.sent;
                    _iterator8 = _createForOfIteratorHelper(inventarMatches);
                    _context219.prev = 5;

                    _iterator8.s();

                  case 7:
                    if ((_step8 = _iterator8.n()).done) {
                      _context219.next = 19;
                      break;
                    }

                    inventar = _step8.value;
                    _context219.next = 11;
                    return db.objektKatalogMandant.get(inventar.mcuuid);

                  case 11:
                    artikelRef = _context219.sent;

                    if (!(!useMid || artikelRef.mid === useMid)) {
                      _context219.next = 17;
                      break;
                    }

                    _context219.next = 15;
                    return db.objektKatalogGlobal.get(artikelRef.gcuuid);

                  case 15:
                    _artikelData = _context219.sent;
                    return _context219.abrupt("return", {
                      type: _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultType"].Inventar,
                      inventar: inventar,
                      artikelRef: artikelRef,
                      artikelData: _artikelData
                    });

                  case 17:
                    _context219.next = 7;
                    break;

                  case 19:
                    _context219.next = 24;
                    break;

                  case 21:
                    _context219.prev = 21;
                    _context219.t0 = _context219["catch"](5);

                    _iterator8.e(_context219.t0);

                  case 24:
                    _context219.prev = 24;

                    _iterator8.f();

                    return _context219.finish(24);

                  case 27:
                    return _context219.abrupt("return", {
                      type: _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultType"].NoMatch
                    });

                  case 28:
                  case "end":
                    return _context219.stop();
                }
              }
            }, _callee218, this, [[5, 21, 24, 27]]);
          }));
        }
      }, {
        key: "getRaumByBarcode",
        value: function getRaumByBarcode(barcode, useMid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee219() {
            var db, raumMatch, gebaeude;
            return regeneratorRuntime.wrap(function _callee219$(_context220) {
              while (1) {
                switch (_context220.prev = _context220.next) {
                  case 0:
                    db = this.dexie;
                    _context220.next = 3;
                    return db.raeume.where({
                      code: barcode
                    }).first();

                  case 3:
                    raumMatch = _context220.sent;

                    if (!raumMatch) {
                      _context220.next = 9;
                      break;
                    }

                    _context220.next = 7;
                    return db.gebaeude.get(raumMatch.gid);

                  case 7:
                    gebaeude = _context220.sent;
                    return _context220.abrupt("return", {
                      type: _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultType"].Raum,
                      raum: raumMatch,
                      gebaeude: gebaeude
                    });

                  case 9:
                    return _context220.abrupt("return", {
                      type: _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultType"].NoMatch
                    });

                  case 10:
                  case "end":
                    return _context220.stop();
                }
              }
            }, _callee219, this);
          }));
        }
      }, {
        key: "getArtikelByBarcode",
        value: function getArtikelByBarcode(barcode, useMid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee220() {
            var db, listArtikelData;
            return regeneratorRuntime.wrap(function _callee220$(_context221) {
              while (1) {
                switch (_context221.prev = _context221.next) {
                  case 0:
                    db = this.dexie;
                    _context221.next = 3;
                    return db.objektKatalogGlobal.where({
                      code: barcode
                    }).toArray();

                  case 3:
                    listArtikelData = _context221.sent;

                    if (!(listArtikelData.length === 0)) {
                      _context221.next = 6;
                      break;
                    }

                    return _context221.abrupt("return", {
                      type: _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultType"].NoMatch
                    });

                  case 6:
                    return _context221.abrupt("return", db.objektKatalogMandant.where('gcid').anyOf(listArtikelData.map(function (d) {
                      return d.gcid;
                    })).filter(function (d) {
                      return !useMid || d.mid === useMid;
                    }).toArray().then(function (refs) {
                      if (refs.length === 0) {
                        console.log('#531 barcodeLookup im Mandanten-Objektbuch NOT FOUND', {
                          barcode: barcode,
                          useMid: useMid
                        });
                        return {
                          type: _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultType"].NoMatch
                        };
                      }

                      if (refs.length === 1) {
                        return {
                          type: _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultType"].ObjektBuchArtikel,
                          artikelRef: refs[0],
                          artikelData: listArtikelData.find(function (itm) {
                            return itm.gcid === refs[0].gcid;
                          })
                        };
                      }

                      return refs.map(function (artikelRef) {
                        return {
                          type: _interfaces_dexie_interfaces__WEBPACK_IMPORTED_MODULE_3__["LookupResultType"].ObjektBuchArtikel,
                          artikelRef: artikelRef,
                          artikelData: listArtikelData.find(function (itm) {
                            return itm.gcid === artikelRef.gcid;
                          })
                        };
                      });
                    }));

                  case 7:
                  case "end":
                    return _context221.stop();
                }
              }
            }, _callee220, this);
          }));
        }
      }, {
        key: "getBuildingList",
        value: function getBuildingList(clientID) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee221() {
            var list;
            return regeneratorRuntime.wrap(function _callee221$(_context222) {
              while (1) {
                switch (_context222.prev = _context222.next) {
                  case 0:
                    _context222.next = 2;
                    return this.dexie.gebaeude.where({
                      mid: clientID
                    }).toArray();

                  case 2:
                    list = _context222.sent;
                    return _context222.abrupt("return", list);

                  case 4:
                  case "end":
                    return _context222.stop();
                }
              }
            }, _callee221, this);
          }));
        }
      }, {
        key: "getBuildingListByJobid",
        value: function getBuildingListByJobid(jobid, clientID) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee222() {
            var listGebaeudeRef, listGid, list;
            return regeneratorRuntime.wrap(function _callee222$(_context223) {
              while (1) {
                switch (_context223.prev = _context223.next) {
                  case 0:
                    _context223.next = 2;
                    return this.dexie.inventurenGebaeude.where({
                      jobid: jobid
                    }).toArray();

                  case 2:
                    listGebaeudeRef = _context223.sent;
                    listGid = listGebaeudeRef.map(function (jg) {
                      return jg.gid;
                    });
                    _context223.next = 6;
                    return this.dexie.gebaeude.where('gid').anyOf(listGid).filter(function (g) {
                      return g.mid === clientID;
                    }).toArray();

                  case 6:
                    list = _context223.sent;
                    return _context223.abrupt("return", list);

                  case 8:
                  case "end":
                    return _context223.stop();
                }
              }
            }, _callee222, this);
          }));
        }
      }, {
        key: "joinsToStrictFormat",
        value: function joinsToStrictFormat(joins, parent) {
          var _this137 = this;

          var db = this.dexie;
          var f = Object.assign({}, joins);

          if (typeof f.table === 'string') {
            f.table = db.table(f.table);
          }

          if (!f.alias) {
            f.alias = f.table.name;
          }

          if (parent) {
            var pTable = parent.table;
            var fKey = f.table.schema.primKey.keyPath;
            var pKey = pTable.schema.primKey.keyPath;
            var fIndexes = f.table.schema.indexes;
            var pIndexes = pTable.schema.indexes;

            if (!f.key && !f.parentKey) {
              if (pIndexes.find(function (idx) {
                return JSON.stringify(idx.keyPath) === JSON.stringify(fKey);
              })) {
                f.key = fKey;
                f.parentKey = fKey;
              } else if (fIndexes.find(function (idx) {
                return JSON.stringify(idx.keyPath) === JSON.stringify(pKey);
              })) {
                f.key = pKey;
                f.parentKey = pKey;
              }
            } else if (!f.key) {
              if (fIndexes.find(function (idx) {
                return JSON.stringify(idx.keyPath) === JSON.stringify(f.parentKey);
              })) {
                f.key = f.parentKey;
              }
            } else if (!f.parentKey) {
              if (pIndexes.find(function (idx) {
                return JSON.stringify(idx.keyPath) === JSON.stringify(f.key);
              })) {
                f.parentKey = f.key;
              }
            }
          }

          if (f.joins && Array.isArray(f.joins)) {
            f.joins = f.joins.map(function (jn) {
              return _this137.joinsToStrictFormat(jn, f);
            });
          }

          return f;
        }
      }, {
        key: "joinieTables",
        value: function joinieTables(join) {
          var _this138 = this;

          var tables = [join.table];

          if (join.joins) {
            join.joins.forEach(function (jn) {
              return tables = tables.concat(_this138.joinieTables(jn));
            });
          }

          return tables;
        }
      }, {
        key: "joinie",
        value: function joinie(flexJoins) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee225() {
            var _arguments3 = arguments,
                _this139 = this;

            var joins, db, Promise, tables, debugConsole, debugJoinie, logDebug, fullRslt;
            return regeneratorRuntime.wrap(function _callee225$(_context227) {
              while (1) {
                switch (_context227.prev = _context227.next) {
                  case 0:
                    joins = this.joinsToStrictFormat(flexJoins);
                    db = this.dexie;
                    Promise = dexie__WEBPACK_IMPORTED_MODULE_7__["default"].Promise;
                    tables = this.joinieTables(joins);
                    debugConsole = console;
                    debugJoinie = false;

                    logDebug = function logDebug() {
                      if (debugJoinie) {
                        if ('debug' in debugConsole) {
                          debugConsole.debug.apply(debugConsole, _arguments3);
                        } else if ('log' in debugConsole) {
                          debugConsole.log.apply(debugConsole, _arguments3);
                        }
                      }
                    };

                    logDebug('found Tables in recursive join', tables);
                    fullRslt = [];
                    return _context227.abrupt("return", db.transaction('r', tables, function () {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this139, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee224() {
                        var _this140 = this;

                        var coll, recursiveRelationshipMapper;
                        return regeneratorRuntime.wrap(function _callee224$(_context226) {
                          while (1) {
                            switch (_context226.prev = _context226.next) {
                              case 0:
                                if (joins.where) {
                                  logDebug('Create collection with where Query:', joins.where);
                                  coll = joins.table.where(joins.where);
                                } else {
                                  logDebug('Create collection from table:', joins.table.name);
                                  coll = joins.table.toCollection();
                                }

                                logDebug('#706');

                                if (!(!joins.joins || !joins.joins.length)) {
                                  _context226.next = 5;
                                  break;
                                }

                                logDebug('#709');
                                return _context226.abrupt("return", coll);

                              case 5:
                                recursiveRelationshipMapper = function recursiveRelationshipMapper(parent, subJoins, deep) {
                                  return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this140, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee223() {
                                    var _iterator9, _step9, _loop6, _ret2;

                                    return regeneratorRuntime.wrap(function _callee223$(_context225) {
                                      while (1) {
                                        switch (_context225.prev = _context225.next) {
                                          case 0:
                                            if (!(!subJoins || subJoins.length === 0)) {
                                              _context225.next = 3;
                                              break;
                                            }

                                            logDebug('#714');
                                            return _context225.abrupt("return", true);

                                          case 3:
                                            _iterator9 = _createForOfIteratorHelper(subJoins);
                                            _context225.prev = 4;
                                            _loop6 = /*#__PURE__*/regeneratorRuntime.mark(function _loop6() {
                                              var join, references, resultType, filterKeysBeforeJoin, filter, hasNullKeys;
                                              return regeneratorRuntime.wrap(function _loop6$(_context224) {
                                                while (1) {
                                                  switch (_context224.prev = _context224.next) {
                                                    case 0:
                                                      join = _step9.value;
                                                      references = {};
                                                      resultType = !('resultType' in join) ? JoinResultType.List : join.resultType;
                                                      filterKeysBeforeJoin = !join.where ? [] : Object.keys(join.where);
                                                      filter = !filterKeysBeforeJoin.length ? null : function (obj) {
                                                        var _iterator10 = _createForOfIteratorHelper(filterKeysBeforeJoin),
                                                            _step10;

                                                        try {
                                                          for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {
                                                            var k = _step10.value;

                                                            if (obj[k] !== join.where[k]) {
                                                              return false;
                                                            }
                                                          }
                                                        } catch (err) {
                                                          _iterator10.e(err);
                                                        } finally {
                                                          _iterator10.f();
                                                        }

                                                        return true;
                                                      };

                                                      if (!Array.isArray(join.key) && !Array.isArray(join.parentKey)) {
                                                        references[join.key] = parent[join.parentKey];
                                                      } else if (Array.isArray(join.key) && Array.isArray(join.key) && join.key.length === join.parentKey.length) {
                                                        join.key.forEach(function (k, i) {
                                                          references[k] = parent[join.parentKey[i]];
                                                        });
                                                      }

                                                      logDebug('#738');
                                                      hasNullKeys = Object.values(references).length !== Object.values(references).filter(function (k) {
                                                        var isValid = !(k === 0 || k === '' || k === null || k === undefined || typeof k === 'undefined');
                                                        logDebug('#741', {
                                                          k: k,
                                                          isValid: isValid
                                                        });
                                                        return isValid;
                                                      }).length;

                                                      if (!hasNullKeys) {
                                                        _context224.next = 11;
                                                        break;
                                                      }

                                                      logDebug('#745 Abort Join-Query with Null-Keys on Leading Table: ', {
                                                        where: references,
                                                        obj: parent,
                                                        joinTable: join.table
                                                      });
                                                      return _context224.abrupt("return", {
                                                        v: false
                                                      });

                                                    case 11:
                                                      logDebug('#738 query join with references', {
                                                        hasNullKeys: hasNullKeys,
                                                        references: references
                                                      });

                                                      if (!(resultType === JoinResultType.Count)) {
                                                        _context224.next = 19;
                                                        break;
                                                      }

                                                      _context224.next = 15;
                                                      return join.table.where(references).count();

                                                    case 15:
                                                      parent[join.alias] = _context224.sent;
                                                      return _context224.abrupt("return", {
                                                        v: true
                                                      });

                                                    case 19:
                                                      if (!(resultType === JoinResultType.First)) {
                                                        _context224.next = 24;
                                                        break;
                                                      }

                                                      _context224.next = 22;
                                                      return join.table.where(references).first();

                                                    case 22:
                                                      parent[join.alias] = _context224.sent;
                                                      return _context224.abrupt("return", {
                                                        v: true
                                                      });

                                                    case 24:
                                                      _context224.next = 26;
                                                      return join.table.where(references).each(function (subItm) {
                                                        logDebug('#750'); // Possibility to remove Item before executing Join-Queries

                                                        if (filter && !filter(subItm)) {
                                                          logDebug('#753 removed item');
                                                          return;
                                                        }

                                                        recursiveRelationshipMapper(subItm, join.joins || [], deep + 1).then(function (b) {
                                                          logDebug('#758');

                                                          if (join.alias in parent && parent[join.alias] && (join.multi === false || !isNaN(join.limit) && (isNaN(join.offset) || join.offset === 0) && !join.sort && Array.isArray(parent[join.alias]) && join.limit <= parent[join.alias].length)) {
                                                            logDebug('#768');
                                                            return;
                                                          }

                                                          if (join.filter && !join.filter(subItm)) {
                                                            logDebug('#772');
                                                            return; // Nothing
                                                          }

                                                          if (join.map) {
                                                            logDebug('#777');
                                                            join.map(subItm);
                                                          }

                                                          if (!parent[join.alias]) {
                                                            logDebug('#782');
                                                            parent[join.alias] = 'multi' in join && join.multi === true ? [subItm] : subItm;
                                                          } else if (!Array.isArray(parent[join.alias])) {
                                                            logDebug('#785');
                                                            parent[join.alias] = [parent[join.alias], subItm];
                                                          } else {
                                                            logDebug('#788');
                                                            parent[join.alias].push(subItm);
                                                          }

                                                          return;
                                                        });
                                                      }).then(function () {
                                                        logDebug('#794');

                                                        if (join.alias in parent && Array.isArray(parent[join.alias])) {
                                                          logDebug('#796');

                                                          if ('sort' in join && join.sort) {
                                                            console.log('#798');
                                                            parent[join.alias] = parent[join.alias].sort(join.sort);
                                                          }

                                                          logDebug('#801');
                                                          var offset = 'offset' in join && !!isNaN(join.offset) ? join.offset : 0;
                                                          logDebug('#803');
                                                          var useLimit = 'limit' in join && !!isNaN(join.limit);
                                                          logDebug('#805');
                                                          var maxLimit = parent[join.alias].length;

                                                          if (offset > 0 || useLimit) {
                                                            console.log('#808');
                                                            parent[join.alias] = parent[join.alias].slice(offset, useLimit ? join.limit : maxLimit);
                                                          }
                                                        }
                                                      });

                                                    case 26:
                                                    case "end":
                                                      return _context224.stop();
                                                  }
                                                }
                                              }, _loop6);
                                            });

                                            _iterator9.s();

                                          case 7:
                                            if ((_step9 = _iterator9.n()).done) {
                                              _context225.next = 14;
                                              break;
                                            }

                                            return _context225.delegateYield(_loop6(), "t0", 9);

                                          case 9:
                                            _ret2 = _context225.t0;

                                            if (!(typeof _ret2 === "object")) {
                                              _context225.next = 12;
                                              break;
                                            }

                                            return _context225.abrupt("return", _ret2.v);

                                          case 12:
                                            _context225.next = 7;
                                            break;

                                          case 14:
                                            _context225.next = 19;
                                            break;

                                          case 16:
                                            _context225.prev = 16;
                                            _context225.t1 = _context225["catch"](4);

                                            _iterator9.e(_context225.t1);

                                          case 19:
                                            _context225.prev = 19;

                                            _iterator9.f();

                                            return _context225.finish(19);

                                          case 22:
                                          case "end":
                                            return _context225.stop();
                                        }
                                      }
                                    }, _callee223, null, [[4, 16, 19, 22]]);
                                  }));
                                };

                                _context226.next = 8;
                                return coll.each(function (itm) {
                                  recursiveRelationshipMapper(itm, joins.joins || [], 0).then(function (b) {
                                    logDebug('#809 recursiveRelationMapper.then', {
                                      b: b
                                    });

                                    if (joins.filter && !joins.filter(itm)) {
                                      logDebug('#811 filter returns false for', {
                                        itm: itm
                                      });
                                      return;
                                    }

                                    logDebug('#814 add item', {
                                      itm: itm
                                    });
                                    fullRslt.push(itm);
                                  });
                                });

                              case 8:
                              case "end":
                                return _context226.stop();
                            }
                          }
                        }, _callee224);
                      }));
                    }).then(function () {
                      logDebug('#827');

                      if ('map' in joins && joins.map && 'sort' in joins && joins.sort) {
                        logDebug('#829 return fullRslt map and sort');
                        return fullRslt.map(joins.map).sort(joins.sort);
                      }

                      logDebug('#832');

                      if ('map' in joins && joins.map) {
                        logDebug('#834 return fullRslt.map');
                        return fullRslt.map(joins.map);
                      }

                      if ('sort' in joins && joins.sort) {
                        logDebug('#838 return fullRlst.sort');
                        return fullRslt.sort(joins.sort);
                      }

                      logDebug('#841 return fullRslt');
                      return fullRslt;
                    }));

                  case 10:
                  case "end":
                    return _context227.stop();
                }
              }
            }, _callee225, this);
          }));
        }
      }]);

      return DataService;
    }();

    DataService.ctorParameters = function () {
      return [{
        type: _api_service__WEBPACK_IMPORTED_MODULE_2__["ApiService"]
      }, {
        type: _dexie_service__WEBPACK_IMPORTED_MODULE_4__["DexieService"]
      }, {
        type: _pages_invent_form_data_services_barcode_service__WEBPACK_IMPORTED_MODULE_9__["BarcodeService"]
      }, {
        type: _connection_service_service__WEBPACK_IMPORTED_MODULE_5__["ConnectionService"]
      }, {
        type: _variables_service__WEBPACK_IMPORTED_MODULE_6__["VariablesService"]
      }, {
        type: _dbsync_client_service__WEBPACK_IMPORTED_MODULE_8__["DBSyncClientService"]
      }, {
        type: _dbsync_log_service__WEBPACK_IMPORTED_MODULE_10__["DbsyncLogService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], DataService.prototype, "loadingDataChanged", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], DataService.prototype, "clientSyncAmountChanged", void 0);
    DataService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], DataService);
    /***/
  },

  /***/
  "./src/app/shared/services/dbsync-client.service.ts":
  /*!**********************************************************!*\
    !*** ./src/app/shared/services/dbsync-client.service.ts ***!
    \**********************************************************/

  /*! exports provided: SyncJobStatus, SyncJobResult, DBSyncClientService */

  /***/
  function srcAppSharedServicesDbsyncClientServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SyncJobStatus", function () {
      return SyncJobStatus;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SyncJobResult", function () {
      return SyncJobResult;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "DBSyncClientService", function () {
      return DBSyncClientService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _api_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ./api.service */
    "./src/app/shared/services/api.service.ts");
    /* harmony import */


    var _basedata_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ./basedata.service */
    "./src/app/shared/services/basedata.service.ts");
    /* harmony import */


    var _dexie_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ./dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var _connection_service_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ./connection-service.service */
    "./src/app/shared/services/connection-service.service.ts");
    /* harmony import */


    var _variables_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! ./variables.service */
    "./src/app/shared/services/variables.service.ts");
    /* harmony import */


    var _dbsync_log_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(
    /*! ./dbsync-log.service */
    "./src/app/shared/services/dbsync-log.service.ts");
    /* harmony import */


    var _pages_invent_form_data_services_barcode_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(
    /*! ../../pages/invent-form/data-services/barcode.service */
    "./src/app/pages/invent-form/data-services/barcode.service.ts");
    /* harmony import */


    var _environments_environment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(
    /*! ../../../environments/environment */
    "./src/environments/environment.ts");

    var DBSyncClientService_1;
    var SyncJobStatus;

    (function (SyncJobStatus) {
      SyncJobStatus[SyncJobStatus["Init"] = 0] = "Init";
      SyncJobStatus[SyncJobStatus["Pending"] = 1] = "Pending";
      SyncJobStatus[SyncJobStatus["AlreadyStarted"] = 2] = "AlreadyStarted";
      SyncJobStatus[SyncJobStatus["Offline"] = 3] = "Offline";
      SyncJobStatus[SyncJobStatus["Aborted"] = 4] = "Aborted";
      SyncJobStatus[SyncJobStatus["QueryChangeLogs"] = 5] = "QueryChangeLogs";
      SyncJobStatus[SyncJobStatus["AbortedEmptyChangeLogs"] = 6] = "AbortedEmptyChangeLogs";
      SyncJobStatus[SyncJobStatus["Uploading"] = 7] = "Uploading";
      SyncJobStatus[SyncJobStatus["ServerAnswered"] = 8] = "ServerAnswered";
      SyncJobStatus[SyncJobStatus["ServerAnsweredWithErrors"] = 9] = "ServerAnsweredWithErrors";
      SyncJobStatus[SyncJobStatus["WriteServerSyncedIds"] = 10] = "WriteServerSyncedIds";
      SyncJobStatus[SyncJobStatus["WriteServerReChanges"] = 11] = "WriteServerReChanges";
      SyncJobStatus[SyncJobStatus["WriteServerChanges"] = 12] = "WriteServerChanges";
      SyncJobStatus[SyncJobStatus["RefreshLogs"] = 13] = "RefreshLogs";
      SyncJobStatus[SyncJobStatus["FinishedWithErrors"] = 14] = "FinishedWithErrors";
      SyncJobStatus[SyncJobStatus["Finished"] = 15] = "Finished";
    })(SyncJobStatus || (SyncJobStatus = {}));

    var SyncJobResult = /*#__PURE__*/function () {
      function SyncJobResult(jobid) {
        _classCallCheck(this, SyncJobResult);

        this.jobid = jobid;
        this.status = SyncJobStatus.Init;
        this.committed = 0;
        this.confirmed = 0;
        this.committedIds = [];
        this.confirmedIds = [];
        this.refreshed = null;
        this.serverChanges = {};
        this.unsynced = -1;
        this.errorMsg = '';
        this.starttime = Date.now();
        this.stoptime = 0;
        this.alreadyStartedProcess = null;
        this.statusChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.finished = false;
      }

      _createClass(SyncJobResult, [{
        key: "onStatusChange",
        value: function onStatusChange(cb) {
          this.statusChangeCallback = cb;
        }
      }, {
        key: "setStatus",
        value: function setStatus(status) {
          if (status !== this.status) {
            this.status = status;
            this.statusChanged.emit(status);

            if (this.statusChangeCallback) {
              this.statusChangeCallback(this.status);
            }
          }

          return this;
        }
      }, {
        key: "getStatus",
        value: function getStatus() {
          return this.status;
        }
      }, {
        key: "getStatusName",
        value: function getStatusName() {
          return SyncJobStatus[this.status].toString();
        }
      }, {
        key: "finish",
        value: function finish(status, errorMsg) {
          this.stoptime = Date.now();
          this.finished = true;
          this.setStatus(status);

          if (typeof errorMsg !== 'undefined') {
            this.errorMsg = errorMsg;
          }

          return this;
        }
      }, {
        key: "duration",
        get: function get() {
          return (this.stoptime || Date.now()) - this.starttime;
        }
      }, {
        key: "durationFormatted",
        get: function get() {
          var dur = (this.stoptime || Date.now()) - this.starttime;
          var ms = dur % 1000;
          var s = Math.floor(dur / 1000) % 60;
          var m = Math.floor(dur / 60000) % 60;
          var h = Math.floor(dur / (60 * 60 * 1000));
          return (h > 0 ? "".concat(h, "h ") : '') + (m > 0 ? "".concat(m, "m ") : '') + (s > 0 ? "".concat(s, "s ") : '') + (ms > 0 ? "".concat(ms, "ms ") : '');
        }
      }]);

      return SyncJobResult;
    }();

    var DBSyncClientService = DBSyncClientService_1 = /*#__PURE__*/function () {
      function DBSyncClientService(dexieService, apiService, baseData, networkService, settings, dbSyncLogService, bcLookupService) {
        var _this141 = this;

        _classCallCheck(this, DBSyncClientService);

        this.dexieService = dexieService;
        this.apiService = apiService;
        this.baseData = baseData;
        this.networkService = networkService;
        this.settings = settings;
        this.dbSyncLogService = dbSyncLogService;
        this.bcLookupService = bcLookupService;
        this.processes = [];
        this.processingJobids = [];
        this.processStarted = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.processFinished = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.syncIntervalTimer = null;
        this.syncIntervalTime = 1 * 60 * 1000;
        this.fullImportJobid = 0;
        this.dbgLog = false;
        this.aLastServerChangesByJobid = [];
        this.serverChangesCacheLifetime = 60 * 1000;
        this.isInDebugMode = false;
        this.appVersion = _environments_environment__WEBPACK_IMPORTED_MODULE_9__["environment"].appVersion;
        this.autoSyncChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.updateStatusChanges = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.currentJobChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.syncErrorChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.subscriptionClientLogsChanged = this.dexieService.clientSyncAmountChanged.subscribe(function (amount) {
          if (_this141.isInDebugMode) {
            console.log('DBSyncClientService.constructor() subscribedEvent #271 clientSyncAmountChanged: ', {
              amount: amount
            });
          }
        });
        this.subscriptionNetworkChanged = this.networkService.monitor().subscribe(function (state) {
          if (_this141.isInDebugMode) {
            console.log('DBSyncClientService.constructor() connectionChanged #275', {
              state: state
            });
          }

          if (state.hasServerAccess) {
            _this141.autoSyncStart(true);
          } else {
            _this141.autoSyncStop();
          }
        });

        if (this.networkService.getCurrentState().hasServerAccess) {
          this.autoSyncStart();
        }
      }

      _createClass(DBSyncClientService, [{
        key: "ngOnDestroy",
        value: function ngOnDestroy() {
          this.subscriptionClientLogsChanged.unsubscribe();
        }
      }, {
        key: "initCurrentJobSyncStatus",
        value: function initCurrentJobSyncStatus() {
          this.currentJobSyncStatus = {
            jobid: 0,
            unsyncedClientLogs: 0,
            serverRevisionId: 0,
            clientRevisionId: 0,
            isUploading: false,
            isRunning: false,
            jobStatus: SyncJobStatus.Init
          };
        }
      }, {
        key: "autoSyncIsRunning",
        value: function autoSyncIsRunning() {
          return this.syncIntervalTimer !== null;
        }
      }, {
        key: "setFullImportJobId",
        value: function setFullImportJobId(jobid) {
          this.fullImportJobid = jobid;
        }
      }, {
        key: "getFullImportJobId",
        value: function getFullImportJobId() {
          return this.fullImportJobid;
        }
      }, {
        key: "autoSyncStart",
        value: function autoSyncStart() {
          var startNow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
          var logTi = 'DbsyncClientService.autoSyncStart(' + (startNow ? 'true' : 'false') + ')';

          if (this.syncIntervalTimer) {
            this.autoSyncStop();
          } // Sync im 1-Minuten-Takt


          console.log(logTi + new Date().toTimeString() + ' setInterval this.sync, ' + this.syncIntervalTime + 'ms');
          var syncFunction = this.sync.bind(this);
          this.syncIntervalTimer = setInterval(function () {
            console.log(logTi + new Date().toTimeString() + ' interval execute this.sync.bind');
            syncFunction();
          }, this.syncIntervalTime);
          this.autoSyncChange.emit(true);

          if (startNow) {
            console.log(logTi + new Date().toTimeString() + ' startNow before interval starts in ' + this.syncIntervalTime + 'ms');
            this.sync();
          }
        }
      }, {
        key: "autoSyncStop",
        value: function autoSyncStop() {
          if (this.syncIntervalTimer) {
            try {
              clearInterval(this.syncIntervalTimer);
              this.syncIntervalTimer = null;
              this.autoSyncChange.emit(false);
            } catch (e) {}
          }
        }
      }, {
        key: "sync",
        value: function sync() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee226() {
            var logTi, currJobId, isDBSyncService, incompleteInventurLogs, currJobIdx, currJob, _iterator11, _step11, logs;

            return regeneratorRuntime.wrap(function _callee226$(_context228) {
              while (1) {
                switch (_context228.prev = _context228.next) {
                  case 0:
                    logTi = 'DbsyncClientService.sync()';
                    currJobId = this.baseData.getCurrentJobid();
                    console.log('DBSyncClientService.sync() #377 STARTED currJobId(', currJobId, ') at ' + new Date().toLocaleString());

                    if (this.networkService.getCurrentState().hasServerAccess) {
                      _context228.next = 6;
                      break;
                    }

                    console.error(logTi + ' #379 ABORT No-Internet-Access');
                    return _context228.abrupt("return");

                  case 6:
                    isDBSyncService = this instanceof DBSyncClientService_1;

                    if (this.isInDebugMode) {
                      console.log(logTi + ' #384 this is DBSyncClientService', {
                        isDBSyncService: isDBSyncService
                      });
                    }

                    if (isDBSyncService) {
                      _context228.next = 11;
                      break;
                    }

                    console.error(logTi + ' #387 this is not correct binded to Instance of DBSyncClientService');
                    return _context228.abrupt("return");

                  case 11:
                    if (this.isInDebugMode) {
                      console.log(logTi + ' #392 call getIncompleteInventuren()');
                    }

                    _context228.next = 14;
                    return this.getIncompleteInventuren();

                  case 14:
                    incompleteInventurLogs = _context228.sent;
                    console.log(logTi + ' #389 no changes of currJobId(' + currJobId + ')', {
                      incompleteInventurLogs: incompleteInventurLogs
                    });
                    currJobIdx = incompleteInventurLogs.map(function (itm) {
                      return itm.jobid;
                    }).indexOf(currJobId);

                    if (this.isInDebugMode) {
                      console.log(logTi + ' #398 currJobIdx: ', currJobIdx);
                    }

                    if (!(currJobIdx !== -1)) {
                      _context228.next = 27;
                      break;
                    }

                    if (this.isInDebugMode) {
                      console.log(logTi + ' #403');
                    }

                    currJob = incompleteInventurLogs[currJobIdx];
                    incompleteInventurLogs = incompleteInventurLogs.slice(currJobIdx, 1);
                    console.log(logTi + ' #407 call sendByJobId(', currJob.jobid, currJob.changes, ')');
                    _context228.next = 25;
                    return this.sendByJobId(currJob.jobid, currJob.changes);

                  case 25:
                    _context228.next = 28;
                    break;

                  case 27:
                    console.log(logTi + ' #410 no changes of currJobId(' + currJobId + ')');

                  case 28:
                    _iterator11 = _createForOfIteratorHelper(incompleteInventurLogs);
                    _context228.prev = 29;

                    _iterator11.s();

                  case 31:
                    if ((_step11 = _iterator11.n()).done) {
                      _context228.next = 40;
                      break;
                    }

                    logs = _step11.value;

                    if (!(logs.jobid === currJobId)) {
                      _context228.next = 35;
                      break;
                    }

                    return _context228.abrupt("continue", 38);

                  case 35:
                    if (this.isInDebugMode) {
                      console.log(logTi + ' #418 call sendByJobId(', logs.jobid, logs.changes, ')');
                    }

                    _context228.next = 38;
                    return this.sendByJobId(logs.jobid, logs.changes);

                  case 38:
                    _context228.next = 31;
                    break;

                  case 40:
                    _context228.next = 45;
                    break;

                  case 42:
                    _context228.prev = 42;
                    _context228.t0 = _context228["catch"](29);

                    _iterator11.e(_context228.t0);

                  case 45:
                    _context228.prev = 45;

                    _iterator11.f();

                    return _context228.finish(45);

                  case 48:
                    console.log(logTi + ' #423 END');

                  case 49:
                  case "end":
                    return _context228.stop();
                }
              }
            }, _callee226, this, [[29, 42, 45, 48]]);
          }));
        }
      }, {
        key: "getCurrentClientRevId",
        value: function getCurrentClientRevId() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee227() {
            var jobid;
            return regeneratorRuntime.wrap(function _callee227$(_context229) {
              while (1) {
                switch (_context229.prev = _context229.next) {
                  case 0:
                    jobid = this.baseData.getCurrentJobid();
                    return _context229.abrupt("return", this.getClientRevIdByJobid(jobid));

                  case 2:
                  case "end":
                    return _context229.stop();
                }
              }
            }, _callee227, this);
          }));
        }
      }, {
        key: "getClientRevIdByJobid",
        value: function getClientRevIdByJobid(jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee228() {
            var lastRevIdVar;
            return regeneratorRuntime.wrap(function _callee228$(_context230) {
              while (1) {
                switch (_context230.prev = _context230.next) {
                  case 0:
                    lastRevIdVar = "jobid-".concat(jobid, "-revision-id");
                    _context230.next = 3;
                    return this.settings.get(lastRevIdVar);

                  case 3:
                    _context230.t0 = _context230.sent;

                    if (_context230.t0) {
                      _context230.next = 6;
                      break;
                    }

                    _context230.t0 = 0;

                  case 6:
                    return _context230.abrupt("return", _context230.t0);

                  case 7:
                  case "end":
                    return _context230.stop();
                }
              }
            }, _callee228, this);
          }));
        }
      }, {
        key: "setCurrentClientRevId",
        value: function setCurrentClientRevId(newRevId) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee229() {
            var jobid, lastRevIdVar;
            return regeneratorRuntime.wrap(function _callee229$(_context231) {
              while (1) {
                switch (_context231.prev = _context231.next) {
                  case 0:
                    console.log("DBSyncClientService.setCurrentClientRevId(newRevId: ".concat(newRevId, ") #410"));
                    jobid = this.baseData.getCurrentJobid();
                    lastRevIdVar = "jobid-".concat(jobid, "-revision-id");
                    _context231.next = 5;
                    return this.settings.setRevId(lastRevIdVar, newRevId, 'dbsync-client.service.ts setCurrentClientRevId');

                  case 5:
                    return _context231.abrupt("return", _context231.sent);

                  case 6:
                  case "end":
                    return _context231.stop();
                }
              }
            }, _callee229, this);
          }));
        }
      }, {
        key: "askServerForChanges",
        value: function askServerForChanges() {
          var jobid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee231() {
            var _this142 = this;

            var devid, lastRevId;
            return regeneratorRuntime.wrap(function _callee231$(_context233) {
              while (1) {
                switch (_context233.prev = _context233.next) {
                  case 0:
                    if (!jobid) {
                      jobid = this.baseData.getCurrentJobid();
                    }

                    devid = this.baseData.getCurrentDeviceId() || 0;
                    _context233.next = 4;
                    return this.getClientRevIdByJobid(jobid);

                  case 4:
                    lastRevId = _context233.sent;

                    if (this.networkService.hasServerAccess) {
                      _context233.next = 8;
                      break;
                    }

                    console.error('Abort Change-Request: No Internet!');
                    return _context233.abrupt("return", {
                      success: false,
                      errorMsg: 'Abort Change-Request: No Internet!',
                      MaxRevisionId: -1,
                      NumChanges: -1
                    });

                  case 8:
                    return _context233.abrupt("return", this.apiService.get("api/sync/havingChanges/".concat(jobid, "/").concat(lastRevId, "/").concat(devid), {}).toPromise().then(function (data) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this142, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee230() {
                        return regeneratorRuntime.wrap(function _callee230$(_context232) {
                          while (1) {
                            switch (_context232.prev = _context232.next) {
                              case 0:
                                if (!('errorMsg' in data && data.errorMsg)) {
                                  _context232.next = 3;
                                  break;
                                }

                                console.error(data.errorMsg);
                                return _context232.abrupt("return", {
                                  success: false
                                });

                              case 3:
                                return _context232.abrupt("return", Object.assign({
                                  success: true
                                }, data));

                              case 4:
                              case "end":
                                return _context232.stop();
                            }
                          }
                        }, _callee230);
                      }));
                    }));

                  case 9:
                  case "end":
                    return _context233.stop();
                }
              }
            }, _callee231, this);
          }));
        }
      }, {
        key: "refreshServerChangeCache",
        value: function refreshServerChangeCache(jobid, timestamp, data) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee232() {
            var sc;
            return regeneratorRuntime.wrap(function _callee232$(_context234) {
              while (1) {
                switch (_context234.prev = _context234.next) {
                  case 0:
                    sc = this.aLastServerChangesByJobid.find(function (ch) {
                      return ch.jobid === jobid;
                    });

                    if (sc) {
                      sc.timestamp = Date.now();
                      sc.data = data;
                    } else {
                      this.aLastServerChangesByJobid.unshift({
                        jobid: jobid,
                        timestamp: Date.now(),
                        data: data
                      });
                    }

                  case 2:
                  case "end":
                    return _context234.stop();
                }
              }
            }, _callee232, this);
          }));
        }
      }, {
        key: "getLastServerChanges",
        value: function getLastServerChanges() {
          var jobid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
          var maxAge = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 60 * 10 * 1000;
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee233() {
            var sc;
            return regeneratorRuntime.wrap(function _callee233$(_context235) {
              while (1) {
                switch (_context235.prev = _context235.next) {
                  case 0:
                    sc = this.aLastServerChangesByJobid.find(function (ch) {
                      return ch.jobid === jobid;
                    });

                    if (!(!sc || Date.now() - sc.timestamp > maxAge)) {
                      _context235.next = 3;
                      break;
                    }

                    return _context235.abrupt("return", this.askServerForChanges(jobid));

                  case 3:
                    return _context235.abrupt("return", sc.data);

                  case 4:
                  case "end":
                    return _context235.stop();
                }
              }
            }, _callee233, this);
          }));
        }
      }, {
        key: "syncJob",
        value: function syncJob(jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee234() {
            var currJobProc, newJob, numChanges;
            return regeneratorRuntime.wrap(function _callee234$(_context236) {
              while (1) {
                switch (_context236.prev = _context236.next) {
                  case 0:
                    console.log('DBSyncClientService.syncJob(jobid:', jobid, ') #404');
                    this.clearFinishedProcesses();
                    currJobProc = this.processes.find(function (proc) {
                      return proc.jobid === jobid;
                    });
                    newJob = new SyncJobResult(jobid);

                    if (!(currJobProc && !currJobProc.finished)) {
                      _context236.next = 8;
                      break;
                    }

                    console.log('DBSyncClientService.syncJob() #411. Sync für Job ', jobid, ' läuft bereits!');
                    newJob.alreadyStartedProcess = currJobProc;
                    return _context236.abrupt("return", newJob.finish(SyncJobStatus.AlreadyStarted, 'Sync-Process is already running. Duration: ' + currJobProc.durationFormatted));

                  case 8:
                    _context236.next = 10;
                    return this.numUnsyncedChangeLogsByJobId(jobid);

                  case 10:
                    numChanges = _context236.sent;

                    if (!numChanges && this.isInDebugMode) {
                      console.log('DBSyncClientService.syncJob() #420. numClientChanges: ' + numChanges); // return newJob.finish(SyncJobStatus.AbortedEmptyChangeLogs);
                    }

                    if (this.isInDebugMode) {
                      console.log('DBSyncClientService.syncJob() #424. call this.sendByJobId(' + jobid + ', [], newJob)');
                    }

                    this.sendByJobId(jobid, [], newJob);
                    return _context236.abrupt("return", newJob);

                  case 15:
                  case "end":
                    return _context236.stop();
                }
              }
            }, _callee234, this);
          }));
        }
      }, {
        key: "finishProcess",
        value: function finishProcess(proc, status, errorMsg) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee235() {
            return regeneratorRuntime.wrap(function _callee235$(_context237) {
              while (1) {
                switch (_context237.prev = _context237.next) {
                  case 0:
                    if (!proc.finished) {
                      proc.finish(status, errorMsg || null);
                    }

                    this.clearFinishedProcesses();
                    this.processFinished.emit(proc);
                    return _context237.abrupt("return", proc);

                  case 4:
                  case "end":
                    return _context237.stop();
                }
              }
            }, _callee235, this);
          }));
        }
      }, {
        key: "sendByJobId",
        value: function sendByJobId(useJobid, useLogs, useJobResult) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee238() {
            var _this143 = this;

            var logTi, jobid, syncJobResult, jobInProcess, ServerInfo, devid, lastRevIdVar, lastRevId, logs, syncLogMsg, syncLogErr, syncLogData, total, executed, chunks, lastSyncDate, tableLogs, syncJobLoop, _err;

            return regeneratorRuntime.wrap(function _callee238$(_context240) {
              while (1) {
                switch (_context240.prev = _context240.next) {
                  case 0:
                    logTi = 'DbsyncClientService.sendByJobId(' + useJobid + ', logs[' + (Array.isArray(useLogs) ? useLogs.length : 0) + '], ' + typeof useJobResult + ')';
                    console.log(logTi + ' #448 at ', new Date().toLocaleTimeString());
                    this.clearFinishedProcesses();
                    jobid = useJobid;
                    syncJobResult = useJobResult || new SyncJobResult(jobid);
                    jobInProcess = this.processes.find(function (proc) {
                      return proc.jobid === jobid;
                    });

                    if (!(jobInProcess && !jobInProcess.finished)) {
                      _context240.next = 10;
                      break;
                    }

                    if (this.isInDebugMode) {
                      console.log("DBSyncClientService.sendByJobId(".concat(jobid, ") #537. Abbruch. Sync l\xE4uft bereits"));
                    }

                    syncJobResult.alreadyStartedProcess = jobInProcess;
                    return _context240.abrupt("return", syncJobResult.finish(SyncJobStatus.AlreadyStarted));

                  case 10:
                    this.processingJobids.push(jobid);
                    this.processes.push(syncJobResult);

                    if (!(this.getFullImportJobId() === useJobid)) {
                      _context240.next = 14;
                      break;
                    }

                    return _context240.abrupt("return", this.finishProcess(syncJobResult, SyncJobStatus.AlreadyStarted, 'Synchronisation wurde abgebrochen, da Import noch läuft!'));

                  case 14:
                    if (this.networkService.hasServerAccess) {
                      _context240.next = 16;
                      break;
                    }

                    return _context240.abrupt("return", this.finishProcess(syncJobResult, SyncJobStatus.Offline, 'Synchronisatioon wurde abgebrochen wegen fehlender Serververbindung!'));

                  case 16:
                    if (this.isInDebugMode) {
                      console.log("DbsyncClientServer.sendByJobId(".concat(jobid, ") #525 call askServerForChanges"), new Date().toString());
                    }

                    _context240.next = 19;
                    return this.askServerForChanges();

                  case 19:
                    ServerInfo = _context240.sent;
                    devid = this.baseData.getCurrentDeviceId() || 0;
                    lastRevIdVar = "jobid-".concat(jobid, "-revision-id");
                    _context240.next = 24;
                    return this.settings.get(lastRevIdVar);

                  case 24:
                    _context240.t0 = _context240.sent;

                    if (_context240.t0) {
                      _context240.next = 27;
                      break;
                    }

                    _context240.t0 = 0;

                  case 27:
                    lastRevId = _context240.t0;
                    syncJobResult.setStatus(SyncJobStatus.Pending);
                    this.processStarted.emit(syncJobResult);

                    if (!(!useLogs || !useLogs.length)) {
                      _context240.next = 36;
                      break;
                    }

                    if (this.isInDebugMode) {
                      console.log("DBSyncClientService.sendByJobId(".concat(jobid, ") #548. Keine Client-\xC4nderungen!"));
                    }

                    syncJobResult.setStatus(SyncJobStatus.QueryChangeLogs);
                    _context240.next = 35;
                    return this.getUnsyncedChangeLogsByJobId(useJobid);

                  case 35:
                    useLogs = _context240.sent;

                  case 36:
                    if (!(!useLogs && !ServerInfo.NumChanges)) {
                      _context240.next = 39;
                      break;
                    }

                    if (this.isInDebugMode) {
                      console.log("DBSyncClientService.sendByJobId(".concat(jobid, ") #556; Abbruch. Keine \xC4nderungen!"));
                    }

                    return _context240.abrupt("return", this.finishProcess(syncJobResult, SyncJobStatus.AbortedEmptyChangeLogs));

                  case 39:
                    logs = useLogs;
                    syncJobResult.sendClientDeviceId = devid;
                    syncJobResult.committedIds = logs.map(function (itm) {
                      return itm.id;
                    }); // ASK for Server-Changes

                    this.dbSyncLogService.start(jobid, lastRevId);
                    syncLogMsg = this.dbSyncLogService.message.bind(this.dbSyncLogService, [jobid]);
                    syncLogErr = this.dbSyncLogService.error.bind(this.dbSyncLogService, [jobid]);
                    syncLogData = this.dbSyncLogService.log.bind(this.dbSyncLogService);
                    syncLogMsg('Starte Synchronisation');
                    total = 0;
                    executed = 0;
                    chunks = 0;
                    tableLogs = {};
                    syncJobLoop = 0;

                  case 52:
                    if (!(!syncJobResult.finished && syncJobLoop < 20)) {
                      _context240.next = 77;
                      break;
                    }

                    syncJobLoop++;

                    if (!(syncJobLoop > 1)) {
                      _context240.next = 64;
                      break;
                    }

                    _context240.next = 57;
                    return this.settings.get(lastRevIdVar);

                  case 57:
                    _context240.t1 = _context240.sent;

                    if (_context240.t1) {
                      _context240.next = 60;
                      break;
                    }

                    _context240.t1 = 0;

                  case 60:
                    lastRevId = _context240.t1;
                    _context240.next = 63;
                    return this.getUnsyncedChangeLogsByJobId(useJobid);

                  case 63:
                    logs = _context240.sent;

                  case 64:
                    if (!(lastRevIdVar === 'jobid-2-revision-id' && lastRevId === 0)) {
                      _context240.next = 69;
                      break;
                    }

                    _err = 'Fehlerhafter Wert für ' + name + ': ' + lastRevId;
                    console.error(_err);
                    alert(_err);
                    return _context240.abrupt("return");

                  case 69:
                    if (this.isInDebugMode) {
                      console.log(logTi + " #599. Synchronisations-Loop!", {
                        syncJobLoop: syncJobLoop,
                        lastRevId: lastRevId,
                        'logs.length': logs.length
                      });
                    }

                    syncLogMsg('Download Daten ...');
                    syncJobResult.committed = logs.length;
                    lastSyncDate = new Date();
                    _context240.next = 75;
                    return this.apiService.post("api/sync/syncWithRevisionId/".concat(jobid), {
                      jobid: jobid,
                      devid: devid,
                      lastRevId: lastRevId,
                      appVersion: this.appVersion,
                      changes: logs
                    }).toPromise().then(function (data) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this143, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee237() {
                        var _this144 = this;

                        var _iterator12, _step12, chckFailure, chgLen, ci, chg, currRevId, _err2, objInsertData, newItem, objUpdateData, hasCodeMod, updItem, replaceSuccess, _i15, _Object$values, logData, _i16, _Object$values2, _logData;

                        return regeneratorRuntime.wrap(function _callee237$(_context239) {
                          while (1) {
                            switch (_context239.prev = _context239.next) {
                              case 0:
                                chunks++;

                                if (!('errorMsg' in data && data.errorMsg)) {
                                  _context239.next = 6;
                                  break;
                                }

                                syncJobResult.errorMsg = data.errorMsg;
                                console.error(logTi + ' #552 ', data.errorMsg);
                                syncLogErr('Download Fehler: ' + data.errorMsg);
                                return _context239.abrupt("return", this.finishProcess(syncJobResult, SyncJobStatus.ServerAnsweredWithErrors));

                              case 6:
                                this.saveLastSyncErrorEvent({
                                  jobid: jobid,
                                  startDate: lastSyncDate,
                                  errors: data.aSyncErrors || []
                                });

                                if (total === 0) {
                                  total = data.serverChanges.total;
                                  this.dbSyncLogService.jobSetTotal(jobid, total);
                                }

                                this.dbSyncLogService.jobSetChunks(jobid, chunks);
                                syncLogMsg('Verarbeite Server-Antwort ...');
                                console.log(logTi + ' #570 Changes wurden gesendet, verarbeite Response', {
                                  aSyncedChangeIds: data.aSyncedChangeIds ? data.aSyncedChangeIds.length : 0,
                                  aFailedChangeIds: data.aFailedChangeIds ? data.aFailedChangeIds.length : 0,
                                  serverRechanges: data.serverRechanges ? data.serverRechanges.length : 0,
                                  serverChanges: data.serverChanges.rows ? data.serverChanges.rows.length : 0
                                });
                                console.log(logTi + ' #577 Process sync_done');

                                if (!(data.aSyncedChangeIds && data.aSyncedChangeIds.length > 0)) {
                                  _context239.next = 19;
                                  break;
                                }

                                syncLogMsg('Entferne vom Server bestätige Client-Logs ...');
                                syncJobResult.setStatus(SyncJobStatus.WriteServerSyncedIds);
                                _context239.next = 17;
                                return this.dexieService.clientChangeLog.where('id').anyOf(data.aSyncedChangeIds).modify({
                                  sync_done: 1
                                });

                              case 17:
                                _context239.next = 19;
                                return this.dexieService.clientChangeLog.where({
                                  sync_done: 1
                                })["delete"]();

                              case 19:
                                if (!(data.aFailedChangeIds && data.aFailedChangeIds.length > 0)) {
                                  _context239.next = 42;
                                  break;
                                }

                                syncJobResult.errorMsg += 'Num Failed Server-Syncs: ' + data.aFailedChangeIds.length + '.\n';
                                _iterator12 = _createForOfIteratorHelper(data.aFailedChangeIds);
                                _context239.prev = 22;

                                _iterator12.s();

                              case 24:
                                if ((_step12 = _iterator12.n()).done) {
                                  _context239.next = 34;
                                  break;
                                }

                                chckFailure = _step12.value;
                                _context239.t0 = chckFailure.reason;
                                _context239.next = _context239.t0 === 'INSERT_ALREADY_EXISTS' ? 29 : _context239.t0 === 'NEWER_VERSION_ON_SERVER' ? 29 : 32;
                                break;

                              case 29:
                                _context239.next = 31;
                                return this.dexieService.clientChangeLog["delete"](chckFailure.id);

                              case 31:
                                return _context239.abrupt("break", 32);

                              case 32:
                                _context239.next = 24;
                                break;

                              case 34:
                                _context239.next = 39;
                                break;

                              case 36:
                                _context239.prev = 36;
                                _context239.t1 = _context239["catch"](22);

                                _iterator12.e(_context239.t1);

                              case 39:
                                _context239.prev = 39;

                                _iterator12.f();

                                return _context239.finish(39);

                              case 42:
                                console.log(logTi + ' #603 Process serverRechanges');

                                if (!(data.serverRechanges && data.serverRechanges.length > 0)) {
                                  _context239.next = 48;
                                  break;
                                }

                                syncLogMsg('Korrigiere Client-Ids nach Server-Antwort ...');
                                syncJobResult.setStatus(SyncJobStatus.WriteServerReChanges);
                                _context239.next = 48;
                                return Promise.all(data.serverRechanges.map(function (chg) {
                                  return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this144, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee236() {
                                    return regeneratorRuntime.wrap(function _callee236$(_context238) {
                                      while (1) {
                                        switch (_context238.prev = _context238.next) {
                                          case 0:
                                            chg.table = chg.table[0].toLowerCase() + chg.table.substr(1);
                                            chg.mods.log = false;
                                            return _context238.abrupt("return", this.dexieService.table(chg.table).where({
                                              uuid: chg.uuid
                                            }).modify(chg.mods));

                                          case 3:
                                          case "end":
                                            return _context238.stop();
                                        }
                                      }
                                    }, _callee236, this);
                                  }));
                                }));

                              case 48:
                                if (this.isInDebugMode) {
                                  console.log(logTi + ' #614 Process serverChanges');
                                }

                                if (!(data.serverChanges.rows && data.serverChanges.rows.length > 0)) {
                                  _context239.next = 104;
                                  break;
                                }

                                syncLogMsg('Import Server-Changes ...');
                                syncJobResult.setStatus(SyncJobStatus.WriteServerChanges);
                                chgLen = data.serverChanges.rows.length;
                                ci = 0;

                              case 54:
                                if (!(ci < chgLen)) {
                                  _context239.next = 104;
                                  break;
                                }

                                chg = data.serverChanges.rows[ci];
                                currRevId = chg.revision_id;

                                if (!(currRevId < lastRevId)) {
                                  _context239.next = 61;
                                  break;
                                }

                                _err2 = "#701 SYNC-FEHLER: LastRevId ist gr\xF6\xDFer als CurrRevID: ".concat(lastRevId, " > ").concat(currRevId);
                                console.error(_err2);
                                return _context239.abrupt("return", this.finishProcess(syncJobResult, SyncJobStatus.Aborted, 'Server-Aenderungen sind nicht streng nach RevId sortiert!'));

                              case 61:
                                chg.table = chg.table[0].toLowerCase() + chg.table.substr(1);

                                if (!(chg.table in tableLogs)) {
                                  tableLogs[chg.table] = {
                                    jobid: jobid,
                                    table: chg.table,
                                    revisionId: chg.revision_id,
                                    executed: 0,
                                    puts: 0,
                                    modified: 0,
                                    deleted: 0,
                                    total: 0,
                                    lastEmittedrevisionId: 0
                                  };
                                }

                                _context239.t2 = chg.type;
                                _context239.next = _context239.t2 === 1 ? 66 : _context239.t2 === 2 ? 73 : _context239.t2 === 3 ? 90 : 94;
                                break;

                              case 66:
                                // Insert
                                tableLogs[chg.table].puts++;
                                objInsertData = Object.assign({}, JSON.parse(chg.obj), {
                                  log: false
                                });

                                if (this.isInDebugMode) {
                                  console.log(logTi + ' #651 ' + ci + '/' + chgLen + ' insert into ' + chg.table + ' ', objInsertData);
                                }

                                _context239.next = 71;
                                return this.dexieService.table(chg.table).put(objInsertData);

                              case 71:
                                if (['inventar', 'raeume', 'objektKatalogMandant'].indexOf(chg.table) > -1) {
                                  newItem = objInsertData;
                                  this.bcLookupService.addBarcode({
                                    code: newItem.code,
                                    table: chg.table,
                                    key: 'uuid',
                                    for_jobid: newItem.for_jobid,
                                    uuid: newItem.uuid
                                  });
                                }

                                return _context239.abrupt("break", 94);

                              case 73:
                                // Update
                                tableLogs[chg.table].modified++;
                                objUpdateData = Object.assign({}, JSON.parse(chg.mods), {
                                  log: false
                                });
                                hasCodeMod = 'code' in objUpdateData;

                                if (this.isInDebugMode) {
                                  console.log(logTi + ' #671 ' + ci + '/' + chgLen + ' hasCodeMod: ', hasCodeMod, objUpdateData);
                                }

                                _context239.next = 79;
                                return this.dexieService.table(chg.table).where({
                                  uuid: chg.uuid
                                }).modify(objUpdateData);

                              case 79:
                                if (!(['inventar', 'raeume', 'objektKatalogMandant'].indexOf(chg.table) > -1 && 'code' in objUpdateData)) {
                                  _context239.next = 88;
                                  break;
                                }

                                updItem = objUpdateData;

                                if (this.isInDebugMode) {
                                  console.log(logTi + ' #682 Run Barcode-Update ', hasCodeMod, objUpdateData);
                                }

                                _context239.next = 84;
                                return this.bcLookupService.replaceBarcodeByUuid(chg.uuid, {
                                  code: updItem.code,
                                  for_jobid: jobid,
                                  key: 'uuid',
                                  table: chg.table,
                                  uuid: chg.uuid
                                });

                              case 84:
                                replaceSuccess = _context239.sent;

                                if (this.isInDebugMode) {
                                  console.log(logTi + ' #690', {
                                    replaceSuccess: replaceSuccess
                                  });
                                }

                                _context239.next = 89;
                                break;

                              case 88:
                                if (this.isInDebugMode) {
                                  console.log(logTi + ' #692 No-Barcode-Update ', hasCodeMod, {
                                    chg: chg,
                                    objUpdateData: objUpdateData
                                  });
                                }

                              case 89:
                                return _context239.abrupt("break", 94);

                              case 90:
                                // Delete
                                tableLogs[chg.table].deleted++;

                                if (this.isInDebugMode) {
                                  console.log(logTi + ' #700 ' + ci + '/' + chgLen + ' dbsync-client delete ' + chg.table + ' by uuid ' + chg.uuid);
                                }

                                _context239.next = 94;
                                return this.dexieService.table(chg.table).where({
                                  uuid: chg.uuid
                                })["delete"]();

                              case 94:
                                executed++;
                                tableLogs[chg.table].executed++;
                                lastRevId = currRevId;

                                if (this.isInDebugMode) {
                                  console.log(logTi + ' #710 ' + ci + '/' + chgLen + ' this.settings.set(', lastRevIdVar, chg.revision_id, ')');
                                }

                                _context239.next = 100;
                                return this.settings.setRevId(lastRevIdVar, chg.revision_id, 'LogRow ' + ci + '/' + chgLen + '; RevId ' + currRevId);

                              case 100:
                                if (executed === total || executed % 100 === 0) {
                                  for (_i15 = 0, _Object$values = Object.values(tableLogs); _i15 < _Object$values.length; _i15++) {
                                    logData = _Object$values[_i15];

                                    if (logData.revisionId > logData.lastEmittedrevisionId) {
                                      syncLogData(logData);
                                      logData.lastEmittedrevisionId = logData.revisionId;
                                    }
                                  }
                                }

                              case 101:
                                ci++;
                                _context239.next = 54;
                                break;

                              case 104:
                                console.log(logTi + ' #725 Process SyncResponse finished');
                                _context239.next = 107;
                                return this.settings.get(lastRevIdVar);

                              case 107:
                                syncJobResult.revisionId = _context239.sent;
                                syncJobResult.committed = logs ? logs.length : 0;
                                syncJobResult.synced = data.aSyncedChangeIds ? data.aSyncedChangeIds.length : 0;
                                syncJobResult.conflicts = data.aFailedChangeIds ? data.aFailedChangeIds.length : 0;
                                syncJobResult.numServerRechanges = data.serverRechanges ? data.serverRechanges.length : 0;
                                syncJobResult.numServerChanges = data.serverChanges ? data.serverChanges.rows.length : 0;
                                console.log(logTi + ' #733 data.serverChanges.total:', data.serverChanges.total);

                                for (_i16 = 0, _Object$values2 = Object.values(tableLogs); _i16 < _Object$values2.length; _i16++) {
                                  _logData = _Object$values2[_i16];
                                  syncLogData(_logData);
                                  _logData.lastEmittedrevisionId = _logData.revisionId;
                                }

                                if (!(data.serverChanges.rows.length < data.serverChanges.total)) {
                                  _context239.next = 118;
                                  break;
                                }

                                console.log(logTi + ' #741 keep SyncProcess(jobid: ' + syncJobResult.jobid + ') open');
                                return _context239.abrupt("return", syncJobResult);

                              case 118:
                                console.log(logTi + ' #744 finish SyncProcess(jobid: ' + syncJobResult.jobid + ')');
                                syncLogMsg('Aktuelle Synchronisation wurde abgeschlossen');
                                return _context239.abrupt("return", this.finishProcess(syncJobResult, SyncJobStatus.Finished));

                              case 121:
                              case "end":
                                return _context239.stop();
                            }
                          }
                        }, _callee237, this, [[22, 36, 39, 42]]);
                      }));
                    });

                  case 75:
                    _context240.next = 52;
                    break;

                  case 77:
                  case "end":
                    return _context240.stop();
                }
              }
            }, _callee238, this);
          }));
        }
      }, {
        key: "addBarcodeToLookupTable",
        value: function addBarcodeToLookupTable(code, table, uuid, forJobid, id) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee239() {
            var tblBarcodeLookup, updateHelper, key;
            return regeneratorRuntime.wrap(function _callee239$(_context241) {
              while (1) {
                switch (_context241.prev = _context241.next) {
                  case 0:
                    tblBarcodeLookup = this.dexieService.barcodeLookup;
                    updateHelper = 1;
                    key = this.dexieService.table(table).schema.primKey.keyPath;
                    tblBarcodeLookup.put(Object.assign({
                      code: code,
                      table: table,
                      key: key,
                      id: id,
                      for_jobid: forJobid,
                      uuid: uuid,
                      updateHelper: updateHelper
                    }, {
                      log: false
                    }));
                    return _context241.abrupt("return", true);

                  case 5:
                  case "end":
                    return _context241.stop();
                }
              }
            }, _callee239, this);
          }));
        }
      }, {
        key: "clearFinishedProcesses",
        value: function clearFinishedProcesses() {
          console.log('DBSyncClientService #668 processList before clearFinishedProcesses', Object.assign({}, this.processes.map(function (p) {
            return p;
          })));
          this.processes = this.processes.filter(function (proc) {
            return !proc.finished;
          });
          this.processingJobids = this.processes.map(function (proc) {
            return proc.jobid;
          });
          console.log('DBSyncClientService #677 processList after clearFinishedProcesses', Object.assign({}, this.processes.map(function (p) {
            return p;
          })));
        }
      }, {
        key: "getRunningProcesses",
        value: function getRunningProcesses() {
          this.clearFinishedProcesses();
          return this.processes;
        }
      }, {
        key: "getProcessByJobId",
        value: function getProcessByJobId(jobid) {
          return this.processes.find(function (proc) {
            return proc.jobid === jobid;
          });
        }
      }, {
        key: "updateCommitCounter",
        value: function updateCommitCounter(committedIds, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee240() {
            return regeneratorRuntime.wrap(function _callee240$(_context242) {
              while (1) {
                switch (_context242.prev = _context242.next) {
                  case 0:
                    _context242.next = 2;
                    return this.dexieService.clientChangeLog.where('id').anyOf(committedIds).and(function (log) {
                      return !jobid || log.jobid === jobid;
                    }).modify(function (log) {
                      log.sync_attempts++;
                      log.sync_lastattempt = new Date();
                      return log;
                    });

                  case 2:
                    return _context242.abrupt("return", _context242.sent);

                  case 3:
                  case "end":
                    return _context242.stop();
                }
              }
            }, _callee240, this);
          }));
        }
      }, {
        key: "processResponseByJobId",
        value: function processResponseByJobId(syncedLogIds, jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee241() {
            var syncTime;
            return regeneratorRuntime.wrap(function _callee241$(_context243) {
              while (1) {
                switch (_context243.prev = _context243.next) {
                  case 0:
                    // Return Anzahl betroffener Datensätze
                    syncTime = Date.now();
                    _context243.next = 3;
                    return this.dexieService.clientChangeLog.where('id').anyOf(syncedLogIds).and(function (log) {
                      return !jobid || log.jobid === jobid;
                    }).modify({
                      sync_done: 1,
                      sync_time: syncTime
                    });

                  case 3:
                    return _context243.abrupt("return", _context243.sent);

                  case 4:
                  case "end":
                    return _context243.stop();
                }
              }
            }, _callee241, this);
          }));
        }
      }, {
        key: "getUnsyncedChangeLogsByJobId",
        value: function getUnsyncedChangeLogsByJobId(jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee242() {
            var _this145 = this;

            var tablePrio, db;
            return regeneratorRuntime.wrap(function _callee242$(_context244) {
              while (1) {
                switch (_context244.prev = _context244.next) {
                  case 0:
                    tablePrio = ['inventar', 'objektKatalogMandant', 'objektKatalogGlobal', 'hersteller'];
                    db = this.dexieService;
                    return _context244.abrupt("return", db.clientChangeLog.where({
                      jobid: jobid
                    }).filter(function (itm) {
                      return !('sync_done' in itm) || itm.sync_done === 0;
                    }).toArray().then(function (list) {
                      return _this145.sortAndFixChangeLogs(list);
                    }));

                  case 3:
                  case "end":
                    return _context244.stop();
                }
              }
            }, _callee242, this);
          }));
        }
      }, {
        key: "sortAndFixChangeLogs",
        value: function sortAndFixChangeLogs(list) {
          var _this146 = this;

          console.log('DbSyncClientService #866 sortAndFixChangeLogs', Object.assign({}, list));
          var tablePrio = ['inventar', 'objektKatalogMandant', 'objektKatalogGlobal', 'hersteller'];
          var db = this.dexieService;
          list.sort(function (a, b) {
            if (a.timestamp !== b.timestamp) {
              return a.timestamp < b.timestamp ? -1 : 1;
            } else {
              return tablePrio.indexOf(a.table) > tablePrio.indexOf(b.table) ? -1 : 1;
            }
          });
          return Promise.all(list.map(function (itm) {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this146, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee244() {
              var _this147 = this;

              var _artikelData2, isEmptyMod, artikelRef, raum;

              return regeneratorRuntime.wrap(function _callee244$(_context246) {
                while (1) {
                  switch (_context246.prev = _context246.next) {
                    case 0:
                      if (!(itm.type === 2
                      /* Update */
                      )) {
                        _context246.next = 5;
                        break;
                      }

                      if (!(Object.keys(itm.mods).length === 0 || Object.keys(itm.mods).length === 1 && 'modified_at' in itm.mods)) {
                        _context246.next = 5;
                        break;
                      }

                      console.log('DbSyncClientService #881 Removing empty Entry from Change-Log', {
                        itm: itm
                      });
                      db.clientChangeLog["delete"](itm.id);
                      return _context246.abrupt("return", null);

                    case 5:
                      if (!(itm.table === 'objektKatalogMandant')) {
                        _context246.next = 11;
                        break;
                      }

                      if (!(itm.type === 1
                      /* Create */
                      && !itm.obj.gcuuid)) {
                        _context246.next = 11;
                        break;
                      }

                      _context246.next = 9;
                      return db.objektKatalogGlobal.where({
                        gcid: itm.obj.gcid
                      }).first();

                    case 9:
                      _artikelData2 = _context246.sent;

                      if (_artikelData2) {
                        itm.obj.gcuuid = _artikelData2.uuid;
                      }

                    case 11:
                      if (!(itm.table === 'inventar')) {
                        _context246.next = 47;
                        break;
                      }

                      if (!(itm.type === 2
                      /* Update */
                      )) {
                        _context246.next = 26;
                        break;
                      }

                      isEmptyMod = false;

                      if (!(itm.mods.mcid && !itm.mods.mcuuid)) {
                        _context246.next = 21;
                        break;
                      }

                      console.error('DBSyncClient Found Inventar-Update #872 without mcuuid-Field', Object.assign({}, itm));
                      _context246.next = 18;
                      return db.objektKatalogMandant.where({
                        mcid: itm.mods.mcid
                      }).first();

                    case 18:
                      artikelRef = _context246.sent;

                      if (artikelRef) {
                        itm.mods.mcuuid = artikelRef.uuid;
                        console.log('DBSyncClient Found Inventar-Update #875 added mcuuid-Field', Object.assign({}, itm));
                      } else {
                        console.error('DBSyncClient Found Inventar-Update #875 but don t found ArtikelRef.mcuuid-Field', Object.assign({}, itm));
                      }

                      delete itm.mods.mcid;

                    case 21:
                      if (Object.keys(itm.mods).length === 1 && 'modified_at' in itm.mods) {
                        isEmptyMod = true;
                      }

                      if (Object.keys(itm.mods).length === 0) {
                        isEmptyMod = true;
                      }

                      if (isEmptyMod) {
                        console.log('DbSyncClientService #908 Removing empty Entry from Change-Log', {
                          itm: itm
                        });
                        db.clientChangeLog["delete"](itm.id);
                        itm = null;
                      }

                      _context246.next = 47;
                      break;

                    case 26:
                      if (!(itm.type === 1
                      /* Create */
                      )) {
                        _context246.next = 47;
                        break;
                      }

                      // Test und Korrektur falls GCUUID stat MCUUID in Inventar hinterlegt wurde
                      console.log('DBSyncClient #849 Test if inventar has gcuuid instead of mcuuid, itm.obj.mcuuid: ' + itm.obj.mcuuid);
                      _context246.next = 30;
                      return db.objektKatalogGlobal.where({
                        uuid: itm.obj.mcuuid
                      }).first().then(function (rslt) {
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this147, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee243() {
                          var okgItm;
                          return regeneratorRuntime.wrap(function _callee243$(_context245) {
                            while (1) {
                              switch (_context245.prev = _context245.next) {
                                case 0:
                                  console.log('DbSyncClientService #851 result of okm-Query by mcuuid', {
                                    rslt: rslt
                                  });

                                  if (!rslt) {
                                    _context245.next = 5;
                                    break;
                                  }

                                  okgItm = rslt;
                                  _context245.next = 5;
                                  return db.objektKatalogMandant.where({
                                    gcuuid: okgItm.uuid
                                  }).first().then(function (okm) {
                                    itm.obj.mcuuid = okm.uuid;
                                    db.inventar.update(itm.obj.uuid, {
                                      mcuuid: okm.uuid
                                    });
                                    db.clientChangeLog.update(itm.id, {
                                      obj: Object.assign({}, itm.obj, {
                                        mcuuid: okm.uuid
                                      })
                                    });
                                  });

                                case 5:
                                  return _context245.abrupt("return", rslt);

                                case 6:
                                case "end":
                                  return _context245.stop();
                              }
                            }
                          }, _callee243);
                        }));
                      })["catch"](function (reason) {
                        console.error('DBSyncClient #865 Error on Querying for OKG by ' + itm.obj.mcuuid, {
                          reason: reason
                        });
                      });

                    case 30:
                      if (itm.obj.mcid && itm.obj.mcuuid) {
                        console.log('DBSyncClient Found Inventar-Update #872 with mcuuid-Field', Object.assign({}, itm));
                        delete itm.obj.mcid;
                      }

                      if (!(itm.obj.rid && !itm.obj.ruuid)) {
                        _context246.next = 37;
                        break;
                      }

                      console.error('DBSyncClient Found Inventar-Update #872 without ruuid-Field', Object.assign({}, itm));
                      _context246.next = 35;
                      return db.raeume.where({
                        rid: itm.obj.rid
                      }).first();

                    case 35:
                      raum = _context246.sent;

                      if (raum) {
                        itm.obj.ruuid = raum.uuid;
                        console.log('Fixed Missing ruuid-Field', Object.assign({}, itm));
                      }

                    case 37:
                      if (!(!itm.obj.ruuid || !itm.obj.mcuuid)) {
                        _context246.next = 47;
                        break;
                      }

                      console.error('DbSyncClientService #938 Removing incomplete Inventar + Entry from Change-Log', {
                        itm: itm
                      });
                      _context246.next = 41;
                      return db.clientChangeLog["delete"](itm.id);

                    case 41:
                      _context246.next = 43;
                      return db.inventar["delete"](itm.uuid);

                    case 43:
                      if (!(itm.obj.code && itm.obj.for_jobid && itm.uuid)) {
                        _context246.next = 46;
                        break;
                      }

                      _context246.next = 46;
                      return db.barcodeLookup.where({
                        code: itm.obj.code,
                        for_jobid: itm.obj.for_jobid
                      }).filter(function (lkup) {
                        return lkup.uuid === itm.uuid;
                      })["delete"]();

                    case 46:
                      itm = null;

                    case 47:
                      return _context246.abrupt("return", itm);

                    case 48:
                    case "end":
                      return _context246.stop();
                  }
                }
              }, _callee244);
            }));
          }).filter(function (itm) {
            return !!itm;
          }));
        }
      }, {
        key: "numUnsyncedChangeLogsByJobId",
        value: function numUnsyncedChangeLogsByJobId(jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee245() {
            var rslt;
            return regeneratorRuntime.wrap(function _callee245$(_context247) {
              while (1) {
                switch (_context247.prev = _context247.next) {
                  case 0:
                    rslt = this.dexieService.clientChangeLog.where('jobid').equals(jobid) // .filter(itm => !('sync_done' in itm) || itm.sync_done === 0)
                    .count();
                    rslt.then(function (num) {
                      console.log('then numUnsyncedChangeLogsByJobId: ', {
                        jobid: jobid,
                        num: num
                      });
                      return num;
                    })["catch"](function (err) {
                      console.error('then numUnsyncedChangeLogsByJobId: ', {
                        jobid: jobid,
                        err: err
                      });
                    });
                    return _context247.abrupt("return", rslt);

                  case 3:
                  case "end":
                    return _context247.stop();
                }
              }
            }, _callee245, this);
          }));
        }
      }, {
        key: "getCurrentSyncStatus",
        value: function getCurrentSyncStatus() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee246() {
            return regeneratorRuntime.wrap(function _callee246$(_context248) {
              while (1) {
                switch (_context248.prev = _context248.next) {
                  case 0:
                    return _context248.abrupt("return", Promise.all([this.numUnsyncedChangeLogs(), this.getRunningProcesses()]));

                  case 1:
                  case "end":
                    return _context248.stop();
                }
              }
            }, _callee246, this);
          }));
        }
      }, {
        key: "numUnsyncedChangeLogs",
        value: function numUnsyncedChangeLogs() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee247() {
            return regeneratorRuntime.wrap(function _callee247$(_context249) {
              while (1) {
                switch (_context249.prev = _context249.next) {
                  case 0:
                    return _context249.abrupt("return", this.dexieService.clientChangeLog.where({
                      sync_done: 0
                    }).count()["catch"](function (reason) {
                      console.error(reason, 'DbsyncClientService.numUnsyncedChangeLogs() #1055');
                      throw reason;
                    }));

                  case 1:
                  case "end":
                    return _context249.stop();
                }
              }
            }, _callee247, this);
          }));
        }
      }, {
        key: "getIncompleteInventuren",
        value: function getIncompleteInventuren() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee249() {
            var _this148 = this;

            var currJobId, numPending, uniqJobIds;
            return regeneratorRuntime.wrap(function _callee249$(_context251) {
              while (1) {
                switch (_context251.prev = _context251.next) {
                  case 0:
                    currJobId = this.baseData.getCurrentJobid();
                    _context251.next = 3;
                    return this.dexieService.clientChangeLog.where({
                      sync_done: 0
                    }).count();

                  case 3:
                    numPending = _context251.sent;

                    if (numPending) {
                      _context251.next = 6;
                      break;
                    }

                    return _context251.abrupt("return", []);

                  case 6:
                    uniqJobIds = [];
                    _context251.next = 9;
                    return this.dexieService.clientChangeLog.where({
                      sync_done: 0
                    }).each(function (log) {
                      if (-1 === uniqJobIds.indexOf(log.jobid)) {
                        if (log.jobid === currJobId) {
                          uniqJobIds.unshift(log.jobid);
                        } else {
                          uniqJobIds.push(log.jobid);
                        }
                      }
                    });

                  case 9:
                    return _context251.abrupt("return", Promise.all(uniqJobIds.map(function (jobid) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this148, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee248() {
                        var changes;
                        return regeneratorRuntime.wrap(function _callee248$(_context250) {
                          while (1) {
                            switch (_context250.prev = _context250.next) {
                              case 0:
                                _context250.next = 2;
                                return this.dexieService.clientChangeLog.where({
                                  jobid: jobid,
                                  sync_done: 0
                                }).sortBy('id');

                              case 2:
                                changes = _context250.sent;
                                return _context250.abrupt("return", {
                                  jobid: jobid,
                                  changes: changes
                                });

                              case 4:
                              case "end":
                                return _context250.stop();
                            }
                          }
                        }, _callee248, this);
                      }));
                    })));

                  case 10:
                  case "end":
                    return _context251.stop();
                }
              }
            }, _callee249, this);
          }));
        }
      }, {
        key: "saveLastSyncErrorEvent",
        value: function saveLastSyncErrorEvent(event) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee250() {
            var _this149 = this;

            var jobid, insertData, delAction;
            return regeneratorRuntime.wrap(function _callee250$(_context252) {
              while (1) {
                switch (_context252.prev = _context252.next) {
                  case 0:
                    jobid = event.jobid;
                    insertData = event.errors.map(function (itm) {
                      return {
                        jobid: jobid,
                        clientChangeLogId: itm.clientChangeLogId || null,
                        table: itm.table,
                        type: itm.type || null,
                        uuid: itm.uuid,
                        error_code: itm.ERROR_CODE,
                        error_msg: itm.ERROR_MSG || '',
                        error_data: itm.ERROR_DATA || null,
                        error_ref_table: itm.ERROR_REF_TABLE || null,
                        error_ref_by: itm.ERROR_REF_BY || null,
                        error_ref_uuid: itm.ERROR_REF_UUID || null,
                        timestamp: new Date()
                      };
                    });
                    delAction = this.dexieService.serverSyncErrors.where({
                      jobid: jobid
                    })["delete"]();
                    delAction["finally"](function () {
                      return _this149.dexieService.serverSyncErrors.bulkAdd(insertData);
                    }).then(function (n) {
                      if (n > 0) {
                        _this149.resyncServerErrors(jobid);
                      }
                    })["finally"](function () {
                      _this149.syncErrorChange.emit({
                        jobid: jobid,
                        count: event.errors.length
                      });
                    });

                  case 4:
                  case "end":
                    return _context252.stop();
                }
              }
            }, _callee250, this);
          }));
        }
      }, {
        key: "resyncServerErrors",
        value: function resyncServerErrors(jobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee252() {
            var _this150 = this;

            var db, aErrors;
            return regeneratorRuntime.wrap(function _callee252$(_context254) {
              while (1) {
                switch (_context254.prev = _context254.next) {
                  case 0:
                    db = this.dexieService;
                    console.log('DBSyncClientService resyncServerErrors #980');
                    _context254.next = 4;
                    return db.serverSyncErrors.where({
                      jobid: jobid
                    }).toArray();

                  case 4:
                    aErrors = _context254.sent;
                    aErrors.map(function (err) {
                      return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this150, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee251() {
                        var table, uuid, chId, logItem, data, chgLogData;
                        return regeneratorRuntime.wrap(function _callee251$(_context253) {
                          while (1) {
                            switch (_context253.prev = _context253.next) {
                              case 0:
                                console.log('DBSyncClientService resyncServerErrors #983', {
                                  err: err
                                });

                                if (!(!('clientChangeLogId' in err) || !err.clientChangeLogId)) {
                                  _context253.next = 4;
                                  break;
                                }

                                console.error('DBSyncClientService resyncServerErrors #985 NO clientChangeLogId in err', {
                                  err: err
                                });
                                return _context253.abrupt("return", false);

                              case 4:
                                table = err.table;
                                uuid = err.uuid;
                                chId = err.clientChangeLogId;
                                console.log('DBSyncClientService resyncServerErrors #992 ', {
                                  id: chId,
                                  table: table,
                                  uuid: uuid
                                });
                                _context253.next = 10;
                                return db.clientChangeLog.get(chId);

                              case 10:
                                logItem = _context253.sent;

                                if (!logItem || logItem.table !== table || logItem.uuid !== uuid) {
                                  console.error('logItem by id ', chId, ' not found', {
                                    table: table,
                                    uuid: uuid
                                  });
                                }

                                console.log('DBSyncClientService resyncServerErrors #998 ', {
                                  logItem: logItem,
                                  id: chId,
                                  table: table,
                                  uuid: uuid
                                });
                                console.log('DBSyncClientService resyncServerErrors #1003', {
                                  logItem: logItem
                                });
                                _context253.next = 16;
                                return db.table(table).get(uuid);

                              case 16:
                                data = _context253.sent;
                                console.log('DBSyncClientService resyncServerErrors #1005', {
                                  err_code: err.error_code,
                                  data: data
                                });
                                _context253.t0 = err.error_code;
                                _context253.next = _context253.t0 === 'ITEM_NOT_FOUND' ? 21 : _context253.t0 === 'NEWER_VERSION_ON_SERVER' ? 26 : 30;
                                break;

                              case 21:
                                console.log('DBSyncClientService resyncServerErrors #1009 clientChangeLog.delete ', {
                                  chId: chId
                                });
                                _context253.next = 24;
                                return db.clientChangeLog["delete"](chId);

                              case 24:
                                if (data) {
                                  chgLogData = {
                                    jobid: logItem.jobid,
                                    key: 0,
                                    mid: logItem.mid,
                                    obj: data,
                                    sync_attempts: 0,
                                    sync_done: 0,
                                    table: logItem.table,
                                    timestamp: new Date(),
                                    type: 1,
                                    uid: logItem.uid,
                                    uuid: logItem.uuid
                                  };
                                  console.log('DBSyncClientService resyncServerErrors #1025 clientChangeLog.add ', {
                                    chgLogData: chgLogData
                                  });
                                  db.clientChangeLog.add(chgLogData)["catch"](function (reason) {
                                    console.error(reason, 'DbsyncClientService.resyncServerErrors() #1108 clientChangeLog.add', {
                                      chgLogData: chgLogData
                                    });
                                  });
                                }

                                return _context253.abrupt("break", 30);

                              case 26:
                                console.log('DBSyncClientService resyncServerErrors #1031 clientChangeLog.delete ', {
                                  chId: chId
                                });
                                _context253.next = 29;
                                return db.clientChangeLog["delete"](chId);

                              case 29:
                                return _context253.abrupt("break", 30);

                              case 30:
                              case "end":
                                return _context253.stop();
                            }
                          }
                        }, _callee251);
                      }));
                    });

                  case 6:
                  case "end":
                    return _context254.stop();
                }
              }
            }, _callee252, this);
          }));
        }
      }]);

      return DBSyncClientService;
    }();

    DBSyncClientService.ctorParameters = function () {
      return [{
        type: _dexie_service__WEBPACK_IMPORTED_MODULE_4__["DexieService"]
      }, {
        type: _api_service__WEBPACK_IMPORTED_MODULE_2__["ApiService"]
      }, {
        type: _basedata_service__WEBPACK_IMPORTED_MODULE_3__["BasedataService"]
      }, {
        type: _connection_service_service__WEBPACK_IMPORTED_MODULE_5__["ConnectionService"]
      }, {
        type: _variables_service__WEBPACK_IMPORTED_MODULE_6__["VariablesService"]
      }, {
        type: _dbsync_log_service__WEBPACK_IMPORTED_MODULE_7__["DbsyncLogService"]
      }, {
        type: _pages_invent_form_data_services_barcode_service__WEBPACK_IMPORTED_MODULE_8__["BarcodeService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], DBSyncClientService.prototype, "autoSyncChange", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], DBSyncClientService.prototype, "updateStatusChanges", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], DBSyncClientService.prototype, "currentJobChange", void 0);
    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], DBSyncClientService.prototype, "syncErrorChange", void 0);
    DBSyncClientService = DBSyncClientService_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], DBSyncClientService);
    /***/
  },

  /***/
  "./src/app/shared/services/dbsync-log.service.ts":
  /*!*******************************************************!*\
    !*** ./src/app/shared/services/dbsync-log.service.ts ***!
    \*******************************************************/

  /*! exports provided: DbsyncLogService */

  /***/
  function srcAppSharedServicesDbsyncLogServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "DbsyncLogService", function () {
      return DbsyncLogService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");

    var DbsyncLogService = /*#__PURE__*/function () {
      function DbsyncLogService() {
        _classCallCheck(this, DbsyncLogService);

        this.tableSyncProgress = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.totalSyncProgress = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.syncMessage = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.syncError = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.loadingMetaData = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.loadingMetaError = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.loadingMetaMessage = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.jobList = [];
      }

      _createClass(DbsyncLogService, [{
        key: "start",
        value: function start(jobid, revisionId) {
          var job = this.jobList.find(function (s) {
            return s.jobid !== jobid;
          });

          if (job) {
            this.finish(jobid);
          }

          var newJob = {
            jobid: jobid,
            revisionId: revisionId,
            executed: 0,
            total: 0,
            chunks: 0,
            puts: 0,
            modified: 0,
            deleted: 0,
            tables: [],
            tableSyncDetails: {},
            start: new Date()
          };
          this.jobList.push(newJob);
          this.totalSyncProgress.emit(newJob);
        }
      }, {
        key: "finish",
        value: function finish(jobid) {
          this.jobList = this.jobList.filter(function (s) {
            return s.jobid !== jobid;
          });
        }
      }, {
        key: "jobSetTotal",
        value: function jobSetTotal(jobid, total) {
          var job = this.jobList.find(function (s) {
            return s.jobid !== jobid;
          });

          if (job) {
            job.total = total;
          }
        }
      }, {
        key: "jobSetRevisionId",
        value: function jobSetRevisionId(jobid, revisionId) {
          var job = this.jobList.find(function (s) {
            return s.jobid !== jobid;
          });

          if (job) {
            job.revisionId = revisionId;
          }
        }
      }, {
        key: "jobSetChunks",
        value: function jobSetChunks(jobid, chunks) {
          var job = this.jobList.find(function (s) {
            return s.jobid !== jobid;
          });

          if (job) {
            job.chunks = chunks;
          }
        }
      }, {
        key: "log",
        value: function log(data) {
          var job = this.jobList.find(function (s) {
            return s.jobid === data.jobid;
          });
          this.tableSyncProgress.emit(data);

          if (job) {
            job.revisionId = Math.max(job.revisionId, data.revisionId);
            job.executed += data.executed;
            job.puts += data.puts;
            job.modified += data.modified;
            job.deleted += data.deleted;
            job.tableSyncDetails[data.table] = data;
            var tbl = job.tables.find(function (t) {
              return t.table === data.table;
            });

            if (!tbl) {
              job.tables.push({
                table: data.table,
                executed: data.executed,
                total: data.total
              });
              job.total += data.total;
            }

            this.totalSyncProgress.emit(job);
          }
        }
      }, {
        key: "message",
        value: function message(jobid, _message) {
          this.syncMessage.emit({
            jobid: jobid,
            message: _message
          });
        }
      }, {
        key: "error",
        value: function error(jobid, message) {
          this.syncError.emit({
            jobid: jobid,
            message: message
          });
        }
      }, {
        key: "metaData",
        value: function metaData(data) {
          this.loadingMetaData.emit(data);
        }
      }, {
        key: "metaMessage",
        value: function metaMessage(message) {
          this.loadingMetaMessage.emit(message);
        }
      }, {
        key: "metaError",
        value: function metaError(error) {
          this.loadingMetaError.emit(error);
        }
      }]);

      return DbsyncLogService;
    }();

    DbsyncLogService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], DbsyncLogService);
    /***/
  },

  /***/
  "./src/app/shared/services/dexie-sync-client.service.ts":
  /*!**************************************************************!*\
    !*** ./src/app/shared/services/dexie-sync-client.service.ts ***!
    \**************************************************************/

  /*! exports provided: DexieSyncClientService */

  /***/
  function srcAppSharedServicesDexieSyncClientServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "DexieSyncClientService", function () {
      return DexieSyncClientService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _api_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ./api.service */
    "./src/app/shared/services/api.service.ts");

    var DexieSyncClientService = /*#__PURE__*/function () {
      function DexieSyncClientService(apiService) {
        _classCallCheck(this, DexieSyncClientService);

        this.apiService = apiService;
      }

      _createClass(DexieSyncClientService, [{
        key: "sync",
        value: function sync(context, url, options, baseRevision, syncedRevision, changes, partial, applyRemoteChanges, onChangesAccepted, onSuccess, onError) {
          var POLL_INTERVAL = 10000; // Poll every 10th second
          // In this example, the server expects the following JSON format of the request:
          //  {
          //      [clientIdentity: unique value representing the client identity. If omitted, server will return a new client
          //                       identity in its response that we should apply in next sync call.]
          //      baseRevision: baseRevision,
          //      partial: partial,
          //      changes: changes,
          //      syncedRevision: syncedRevision
          //  }
          //  To keep the sample simple, we assume the server has the exact same specification of how changes are structured.
          //  In real world, you would have to pre-process the changes array to fit the server specification.
          //  However, this example shows how to deal with ajax to fulfil the API.

          var request = {
            clientIdentity: context.clientIdentity || null,
            baseRevision: baseRevision,
            partial: partial,
            changes: changes,
            syncedRevision: syncedRevision
          };
          /**
           *
           * $.ajax(url, {
           * type: 'post',
           * contentType: 'application/json', // Make sure we set the correct content-type header as some servers expect this
           * dataType: 'json',
           * data: JSON.stringify(request)
           * });
           */

          this.apiService.post('/api/sync/dexie', request).toPromise()["catch"](function (err) {
            // onError(textStatus, POLL_INTERVAL);
            onError(err, POLL_INTERVAL);
          }).then(function (data) {
            // In this example, the server response has the following format:
            // {
            //    success: true / false,
            //    errorMessage: "",
            //    changes: changes,
            //    currentRevision: revisionOfLastChange,
            //    needsResync: false,    // Flag telling that server doesn't have given syncedRevision or of other reason
            //                           // wants client to resync. ATTENTION: this flag is currently
            //                           // ignored by Dexie.Syncable
            //    partial: true / false, // The server sent only a part of the changes it has for us.
            //                           // On next resync it will send more based on the clientIdentity
            //    [clientIdentity: unique value representing the client identity.
            //    Only provided if we did not supply a valid clientIdentity in the request.]
            // }
            if (!data.success) {
              onError(data.errorMessage, Infinity); // Infinity = Don't try again. We would continue getting this error.
            } else {
              if ('clientIdentity' in data) {
                context.clientIdentity = data.clientIdentity; // Make sure we save the clientIdentity sent by the server before we try to resync.
                // If saving fails we wouldn't be able to do a partial synchronization

                context.save().then(function () {
                  // Since we got success, we also know that server accepted our changes:
                  onChangesAccepted(); // Convert the response format to the Dexie.Syncable.Remote.SyncProtocolAPI specification:

                  applyRemoteChanges(data.changes, data.currentRevision, data.partial, data.needsResync);
                  onSuccess({
                    again: POLL_INTERVAL
                  });
                })["catch"](function (e) {
                  // We didn't manage to save the clientIdentity stop synchronization
                  onError(e, Infinity);
                });
              } else {
                // Since we got success, we also know that server accepted our changes:
                onChangesAccepted(); // Convert the response format to the Dexie.Syncable.Remote.SyncProtocolAPI specification:

                applyRemoteChanges(data.changes, data.currentRevision, data.partial, data.needsResync);
                onSuccess({
                  again: POLL_INTERVAL
                });
              }
            }
          });
        }
      }]);

      return DexieSyncClientService;
    }();

    DexieSyncClientService.ctorParameters = function () {
      return [{
        type: _api_service__WEBPACK_IMPORTED_MODULE_2__["ApiService"]
      }];
    };

    DexieSyncClientService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], DexieSyncClientService);
    /***/
  },

  /***/
  "./src/app/shared/services/dexie.service.ts":
  /*!**************************************************!*\
    !*** ./src/app/shared/services/dexie.service.ts ***!
    \**************************************************/

  /*! exports provided: DexieService */

  /***/
  function srcAppSharedServicesDexieServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "DexieService", function () {
      return DexieService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var dexie__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! dexie */
    "./node_modules/dexie/dist/dexie.es.js");
    /* harmony import */


    var dexie_observable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! dexie-observable */
    "./node_modules/dexie-observable/dist/dexie-observable.es.js");
    /* harmony import */


    var dexie_syncable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! dexie-syncable */
    "./node_modules/dexie-syncable/dist/dexie-syncable.es.js");
    /* harmony import */


    var _dexie_sync_client_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(
    /*! ./dexie-sync-client.service */
    "./src/app/shared/services/dexie-sync-client.service.ts");
    /* harmony import */


    var _basedata_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(
    /*! ./basedata.service */
    "./src/app/shared/services/basedata.service.ts");

    var database = 'merTensIventory.1';

    var DexieService = /*#__PURE__*/function (_dexie__WEBPACK_IMPOR) {
      _inherits(DexieService, _dexie__WEBPACK_IMPOR);

      var _super = _createSuper(DexieService);

      function DexieService(syncClient, baseData) {
        var _this151;

        _classCallCheck(this, DexieService);

        _this151 = _super.call(this, database);
        _this151.syncClient = syncClient;
        _this151.baseData = baseData;
        _this151.clientSyncAmountChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        _this151.dbVersion = 12;
        _this151.nextDbVersion = 0;
        _this151.stopClientLogForServerLoad = false;
        _this151.nextDbVersion = _this151.dbVersion + 1;

        _this151.on('versionchange', function (event) {
          console.log('DexieService #62 event versionchange ', {
            event: event
          });
        });

        _this151.on('message', function (event) {
          console.log('DexieService #65 event message', {
            event: event
          });
        });

        _this151.init();

        return _this151;
      }

      _createClass(DexieService, [{
        key: "clearDB",
        value: function clearDB() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee253() {
            return regeneratorRuntime.wrap(function _callee253$(_context255) {
              while (1) {
                switch (_context255.prev = _context255.next) {
                  case 0:
                    console.log('clear db');
                    return _context255.abrupt("return", Promise.all(this.tables.map(function (t) {
                      return t.clear();
                    })).then(function () {
                      console.log('Datenbank wurde geleert!');
                      return true;
                    })["catch"](function (r) {
                      console.error(r);
                      return false;
                    }));

                  case 2:
                  case "end":
                    return _context255.stop();
                }
              }
            }, _callee253, this);
          }));
        }
      }, {
        key: "deleteDB",
        value: function deleteDB() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee254() {
            var dbName;
            return regeneratorRuntime.wrap(function _callee254$(_context256) {
              while (1) {
                switch (_context256.prev = _context256.next) {
                  case 0:
                    dbName = this.name;
                    console.log('delete db ' + dbName);
                    return _context256.abrupt("return", dexie__WEBPACK_IMPORTED_MODULE_2__["default"]["delete"](dbName).then(function () {
                      alert('Browser-Datenbank ' + dbName + ' wurde gelöscht!\n' + 'Die Seite wird für den Neu-Aufbau neu geladen\n' + ' und muss nötigenfalls auch händisch wiederholt neu geladen werden!');
                      document.location.href = '/';
                      return true;
                    })["catch"](function (reason) {
                      alert('Beim Löschen sind Fehler aufgetreten\n' + 'Die Seite wird neu geladen\n' + ' und muss nötigenfalls auch händisch wiederholt neu geladen werden!');
                      document.location.href = '/';
                      return false;
                    }));

                  case 3:
                  case "end":
                    return _context256.stop();
                }
              }
            }, _callee254, this);
          }));
        }
      }, {
        key: "init",
        value: function init() {
          var _this152 = this;

          dexie__WEBPACK_IMPORTED_MODULE_2__["default"].Syncable.registerSyncProtocol('inventorySync', this.syncClient);
          this.nextDbVersion = this.dbVersion + 1;
          this.version(12).stores({
            barcodeLookup: '&[code+for_jobid],table,for_jobid,[table+for_jobid],updateHelper,[table+updateHelper]',
            clientChangeLog: '++id,table,type,key,uuid,jobid,sync_done',
            devices: '++id,name,user_agent',
            gebaeude: '++gid,mid,Gebaeude',
            hersteller: '$$uuid,hid,Hersteller,for_jobid,created_jobid',
            images: '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid,created_jobid,modified_jobid',
            inventar: '$$uuid,ivid,mcid,for_jobid,mcuuid,code,[rid+jobid],rid,rid_init,rid_neu,ruuid,jobid,invid,iv_nr',
            inventuren: '++jobid,mid,gid,Titel,Start,aktiviert,AbgeschlossenAm',
            inventurenGebaeude: '[jobid+gid+uid],jobid,gid,uid',
            inventurenUser: '&[jobid+uid],jobid,uid',
            inventurenUserStatus: '&[jobid+uid+device_id],jobid,uid,device_id,status,token',
            lieferant: '++hid,Lieferant',
            mandanten: '++mid,Mandant',
            objektbuchBarcodesLookup: '&code,for_jobid',
            objektKatalogGlobal: '$$uuid,gcid,code,hid,Bezeichnung,Typ,Gruppe,Kategorie,Farbe,Groesse,created_jobid',
            objektKatalogMandant: '$$uuid,mcid,gcid,gcuuid,code,mid,for_jobid,created_jobid',
            objektKatalogImages: '$$uuid,id,for_jobid,RefTable,RefUuid,ImgUuid,Kategorie',
            raeume: '$$uuid,rid,gid,[rid+gid],for_jobid,code,raumid,Raum,Raumbezeichnung,Etage,current_jobid,current_jobstatus',
            serverSyncErrors: '++id,jobid,clientChangeLogId,table,type,uuid,error_code,error_msg',
            uploads: '++id,uuid,mid,standort,importkey,filename,filesize,checksum,stat,errors',
            users: '++id,name,email,password',
            variables: '&name,value'
          });

          var sleep = function sleep(ms) {
            return new Promise(function (resolve) {
              return setTimeout(resolve, ms);
            });
          };

          if (1) {
            var v2 = this.nextDbVersion;
            this.version(v2).stores({
              images: '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid,created_jobid,modified_jobid'
            }).upgrade(function (trans) {
              console.log('Starte Upgrade for DB-Version ' + v2);

              _this152.images.toCollection().each(function (img) {
                _this152.objektKatalogMandant.where({
                  mcid: img.mcid
                }).first().then(function (okm) {
                  _this152.images.where({
                    uuid: img.uuid
                  }).modify({
                    mcuuid: okm.uuid
                  });
                });
              });
            });
            this.nextDbVersion += 1;
          }

          if (1) {
            var v3 = this.nextDbVersion;
            this.version(v3).stores({
              images: '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid,created_jobid,modified_jobid'
            }).upgrade(function (trans) {
              console.log('Starte Upgrade for DB-Version ' + v3);

              _this152.images.toCollection().each(function (img) {
                _this152.objektKatalogMandant.where({
                  mcid: img.mcid
                }).first().then(function (okm) {
                  _this152.images.where({
                    uuid: img.uuid
                  }).modify({
                    mcuuid: okm.uuid
                  });
                });
              });
            });
            this.nextDbVersion += 1;
          }

          if (1) {
            var v4 = this.nextDbVersion;
            this.version(v4).stores({
              images: '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid,created_jobid,modified_jobid'
            }).upgrade(function (trans) {
              console.log('Starte Upgrade for DB-Version ' + v4);
              return trans;
            });
            this.nextDbVersion += 1;
          }

          if (1) {
            var v5 = this.nextDbVersion;
            this.version(v5).stores({
              objektKatalogGlobal: '$$uuid,gcid,code,huuid,Bezeichnung,Typ,Gruppe,Kategorie,Farbe,Groesse,created_jobid'
            }).upgrade(function (trans) {
              console.log('Starte Upgrade for DB-Version ' + v5);
              return trans;
            });
            this.nextDbVersion += 1;
          }

          if (1) {
            var v6 = this.nextDbVersion;
            this.version(v6).stores({
              objektKatalogGlobal: '$$uuid,gcid,code,huuid,Bezeichnung,[Bezeichnung+huuid],Typ,Gruppe,Kategorie,Farbe,Groesse,created_jobid'
            }).upgrade(function (trans) {
              console.log('Starte Upgrade for DB-Version ' + v6);
              return trans;
            });
            this.nextDbVersion += 1;
          }

          if (1) {
            var v7 = this.nextDbVersion;
            this.version(v7).stores({
              objektKatalogGlobal: '$$uuid,uuid,gcid,code,huuid,Bezeichnung,[Bezeichnung+huuid],Typ,Gruppe,Kategorie,Farbe,Groesse,created_jobid'
            }).upgrade(function (trans) {
              console.log('Starte Upgrade for DB-Version ' + v7);
              return trans;
            });
            this.nextDbVersion += 1;
          }

          if (1) {
            var v8 = this.nextDbVersion;
            this.version(v8).stores({
              images: '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid,created_jobid,modified_jobid'
            }).upgrade(function (trans) {
              console.log('Starte Upgrade for DB-Version ' + v8);
              return trans;
            });
            this.nextDbVersion += 1;
          }

          if (1) {
            var v9 = this.nextDbVersion;
            this.version(v9).stores({
              images: '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid'
            });
            this.nextDbVersion += 1;
          }

          if (true) {
            var v10 = this.nextDbVersion;
            this.version(v10).stores({
              barcodeLookup: '&[code+for_jobid],table,for_jobid,[table+for_jobid],[table+for_jobid+updateHelper],updateHelper,[table+updateHelper]'
            });
            this.nextDbVersion += 1;
          }

          if (true) {
            var v11 = this.nextDbVersion;
            this.version(v11).stores({
              objektKatalogImages: '$$uuid,id,for_jobid,RefTable,RefUuid,ImgUuid,Kategorie,[RefTable+RefUuid+Kategorie]'
            });
            this.nextDbVersion += 1;
          }

          if (true) {
            var v12 = this.nextDbVersion;
            this.version(v12).stores({
              objektKatalogImages: '$$uuid,id,for_jobid,RefTable,RefUuid,ImgUuid,Kategorie,[RefTable+RefUuid+Kategorie],[RefTable+RefUuid]'
            });
            this.nextDbVersion += 1;
          }

          var validLogTables = ['hersteller', 'inventar', 'inventurenUserStatus', 'images', 'objektKatalogGlobal', 'objektKatalogMandant', 'objektKatalogImages', 'raeume'];
          var lastClientChangeLogTimestamp = 0;
          var lastClientChangeLogDelay = 2000;
          var lastClientChangeLogTimer = null;

          var lastClientChangeLogTrigger = function lastClientChangeLogTrigger() {
            _this152.clientChangeLog.count().then(function (num) {
              _this152.clientSyncAmountChanged.emit(num);
            });
          };

          var checkEmitClientChange = function checkEmitClientChange() {
            var now = Date.now();

            if (lastClientChangeLogTimer) {
              if (now - lastClientChangeLogTimestamp < lastClientChangeLogDelay) {
                return;
              }

              clearTimeout(lastClientChangeLogTimer);
              lastClientChangeLogTimer = null;
            }

            lastClientChangeLogTimestamp = Date.now();
            lastClientChangeLogTimer = setTimeout(lastClientChangeLogTrigger, lastClientChangeLogDelay);
          };

          this.on('changes', function (changes, partial) {
            // console.log('#145 dexie.service on changes: changes.length', changes.length, partial, { changes});
            changes.forEach(function (change) {
              if (change.table === 'clientChangeLog') {
                if (change.type === 2
                /* Update */
                && !('sync_done' in change.mods)) {
                  return;
                }

                checkEmitClientChange();
              }
            });

            if (_this152.stopClientLogForServerLoad) {
              // console.log('#145 dexie.service on changes: is disabled for Server-Load');
              return;
            }

            changes.forEach(function (change) {
              if (validLogTables.indexOf(change.table) === -1 || change.table === _this152.clientChangeLog.name) {
                // console.log('#151 dexie.service on changes: ChangeLog disabled for table ', change.table);
                return;
              }

              _this152.addChangeLog(change);
            });
          });
        }
      }, {
        key: "addChangeLog",
        value: function addChangeLog(change) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee255() {
            var logFlag, logPrefix, uuid, chlog, insertChange, updateChange, colNames, iNumContentCols, deleteChange;
            return regeneratorRuntime.wrap(function _callee255$(_context257) {
              while (1) {
                switch (_context257.prev = _context257.next) {
                  case 0:
                    logFlag = this.getChangeLogFlag(change); // if (log === undefined || !log) {
                    //   console.log('#152 addChangeLog Skip DB-Change-Logging - No Log-Flag', { change });
                    //   return;
                    // }

                    logPrefix = 'DexieService.addChangeLog(change[' + change.table + ',' + change.type + ',' + change.key + '] ';
                    console.log(logPrefix + '#322');

                    if (!(logFlag !== undefined && logFlag !== null && logFlag === false)) {
                      _context257.next = 9;
                      break;
                    }

                    console.log(logPrefix + '#324 ABORT log:', logFlag, {
                      change: change
                    });

                    if (!(change.type !== 3)) {
                      _context257.next = 8;
                      break;
                    }

                    _context257.next = 8;
                    return this.table(change.table).update(change.key, {
                      log: undefined
                    });

                  case 8:
                    return _context257.abrupt("return");

                  case 9:
                    uuid = this.getChangeLogUuid(change);

                    if (!(change.type !== 3 && 'obj' in change && 'log' in change.obj && change.obj.log !== undefined)) {
                      _context257.next = 13;
                      break;
                    }

                    _context257.next = 13;
                    return this.table(change.table).update(change.key, {
                      log: undefined
                    });

                  case 13:
                    chlog = {
                      timestamp: new Date(),
                      table: change.table,
                      type: change.type,
                      key: change.key,
                      uuid: uuid,
                      mid: this.baseData.getCurrentMid(),
                      uid: this.baseData.getCurrentUid(),
                      jobid: this.baseData.getCurrentJobid(),
                      sync_attempts: 0,
                      sync_done: 0
                    };
                    _context257.t0 = change.type;
                    _context257.next = _context257.t0 === 1
                    /* Create */
                    ? 17 : _context257.t0 === 2
                    /* Update */
                    ? 31 : _context257.t0 === 3
                    /* Delete */
                    ? 42 : 44;
                    break;

                  case 17:
                    insertChange = change;

                    if ('log' in change.obj) {
                      delete change.obj.log;
                    }

                    chlog.obj = change.obj;
                    _context257.t1 = change.table;
                    _context257.next = _context257.t1 === 'objektKatalogGlobal' ? 23 : _context257.t1 === 'objektKatalogMandant' ? 25 : _context257.t1 === 'inventar' ? 27 : 30;
                    break;

                  case 23:
                    if (!('huuid' in chlog.obj)) {
                      chlog.obj.huuid = this.getChangeLogProp(change, 'huuid');
                    }

                    return _context257.abrupt("break", 30);

                  case 25:
                    if (!('gcuuid' in chlog.obj)) {
                      chlog.obj.gcuuid = this.getChangeLogProp(change, 'gcuuid');
                    }

                    return _context257.abrupt("break", 30);

                  case 27:
                    if (!('mcuuid' in chlog.obj)) {
                      chlog.obj.mcuuid = this.getChangeLogProp(change, 'mcuuid');
                    }

                    if (!('ruuid' in chlog.obj)) {
                      chlog.obj.ruuid = this.getChangeLogProp(change, 'ruuid');
                    }

                    return _context257.abrupt("break", 30);

                  case 30:
                    return _context257.abrupt("break", 44);

                  case 31:
                    updateChange = change;
                    chlog.mods = updateChange.mods;

                    if ('log' in chlog.mods) {
                      delete chlog.mods.log;
                    }

                    colNames = Object.keys(chlog.mods);

                    if (!(colNames.length === 0 || colNames.length === 1 && colNames[0].startsWith('modified_'))) {
                      _context257.next = 37;
                      break;
                    }

                    return _context257.abrupt("return");

                  case 37:
                    iNumContentCols = colNames.filter(function (col) {
                      if (['mcuuid', 'ruuid', 'gcuuid', 'huuid'].indexOf(col) !== -1 && undefined === change.mods[col]) {
                        return false;
                      }

                      return col !== 'log' && !col.startsWith('modified');
                    });

                    if (iNumContentCols) {
                      _context257.next = 40;
                      break;
                    }

                    return _context257.abrupt("return");

                  case 40:
                    console.log(logPrefix + '#384 update', change.mods, {
                      chlog: chlog
                    });
                    return _context257.abrupt("break", 44);

                  case 42:
                    deleteChange = change;
                    return _context257.abrupt("break", 44);

                  case 44:
                    this.clientChangeLog.add(chlog).then(function (n) {
                      console.log(logPrefix + '#439 added number:', n);
                    })["catch"](function (reason) {
                      console.error(reason, logPrefix + ' #443 clientChangeLog.add', {
                        chlog: chlog
                      });
                    });

                  case 45:
                  case "end":
                    return _context257.stop();
                }
              }
            }, _callee255, this);
          }));
        }
      }, {
        key: "getChangeLogUuid",
        value: function getChangeLogUuid(change) {
          var ch = change;

          if (typeof change.key === 'string' && change.key.match(/([a-z0-9]+-){2,}[a-z0-9]/)) {
            return change.key;
          }

          if ('obj' in ch && 'uuid' in ch.obj) {
            return ch.obj.uuid;
          }

          if ('mods' in ch && 'uuid' in ch.mods) {
            return ch.mods.uuid;
          }

          if ('oldObj' in ch && 'uuid' in ch.oldObj) {
            return ch.oldObj.uuid;
          }

          return undefined;
        }
      }, {
        key: "getChangeLogProp",
        value: function getChangeLogProp(change, propName) {
          var ch = change;

          if (propName in ch && propName in ch.obj) {
            return ch.obj.uuid;
          }

          if (propName in ch && propName in ch.mods) {
            return ch.mods.uuid;
          }

          if (propName in ch && propName in ch.oldObj) {
            return ch.oldObj.uuid;
          }

          return undefined;
        }
      }, {
        key: "getChangeLogFlag",
        value: function getChangeLogFlag(change) {
          var ch = change;
          var showFlagLog = false;

          if (typeof ch !== 'object') {
            if (showFlagLog) {
              console.error('DexieService.getChangeLogFlag(change) #192 change is not a object: ', change);
            }

            return false;
          }

          var logPrefix = 'DexieService.getChangeLogFlag(change[' + ch.table + ',' + ch.type + ',' + ch.key + ']) ';
          console.log(logPrefix + '#482 change', Object.assign({}, change));

          if (typeof ch.obj === 'object' && 'log' in ch.obj) {
            if (showFlagLog) {
              console.log(logPrefix + '#485 return ch.obj.log ', ch.obj.log);
            }

            return ch.obj.log; // return !!ch.obj.log;
          }

          if (typeof ch.mods === 'object' && 'log' in ch.mods) {
            if (showFlagLog) {
              console.log(logPrefix + '#491 return ch.mods.log ', ch.mods.log);
            }

            return ch.mods.log; // return !!ch.mods.log;
          }

          if (typeof ch.oldObj === 'object' && 'log' in ch.oldObj) {
            if (showFlagLog) {
              console.log(logPrefix + '#497 return ch.oldObj.log ', ch.oldObj.log);
            }

            return ch.oldObj.log; // return !!ch.oldObj.log;
          }

          return undefined;
        }
      }, {
        key: "stopChangeLogForImport",
        value: function stopChangeLogForImport(stop) {
          var showFlagLog = false;

          if (showFlagLog) {
            console.log('#199 stopClientLogForServerLoad => ', stop);
          }

          this.stopClientLogForServerLoad = stop;
        }
      }]);

      return DexieService;
    }(dexie__WEBPACK_IMPORTED_MODULE_2__["default"]);

    DexieService.ctorParameters = function () {
      return [{
        type: _dexie_sync_client_service__WEBPACK_IMPORTED_MODULE_5__["DexieSyncClientService"]
      }, {
        type: _basedata_service__WEBPACK_IMPORTED_MODULE_6__["BasedataService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], DexieService.prototype, "clientSyncAmountChanged", void 0);
    DexieService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], DexieService);
    /***/
  },

  /***/
  "./src/app/shared/services/inventory-editor.service.ts":
  /*!*************************************************************!*\
    !*** ./src/app/shared/services/inventory-editor.service.ts ***!
    \*************************************************************/

  /*! exports provided: InventoryEditorErrorCode, InventoryEditorService */

  /***/
  function srcAppSharedServicesInventoryEditorServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "InventoryEditorErrorCode", function () {
      return InventoryEditorErrorCode;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "InventoryEditorService", function () {
      return InventoryEditorService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _dexie_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ./dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var _basedata_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ./basedata.service */
    "./src/app/shared/services/basedata.service.ts");

    var InventoryEditorErrorCode;

    (function (InventoryEditorErrorCode) {
      InventoryEditorErrorCode[InventoryEditorErrorCode["NoError"] = 0] = "NoError";
      InventoryEditorErrorCode[InventoryEditorErrorCode["RaumNotFound"] = 1] = "RaumNotFound";
      InventoryEditorErrorCode[InventoryEditorErrorCode["InventarNotFound"] = 2] = "InventarNotFound";
      InventoryEditorErrorCode[InventoryEditorErrorCode["ArtikelNotFound"] = 3] = "ArtikelNotFound";
      InventoryEditorErrorCode[InventoryEditorErrorCode["ArtikelMandantNotFound"] = 4] = "ArtikelMandantNotFound";
      InventoryEditorErrorCode[InventoryEditorErrorCode["ArtikelGlobalNotFound"] = 5] = "ArtikelGlobalNotFound";
    })(InventoryEditorErrorCode || (InventoryEditorErrorCode = {}));

    var InventoryEditorService = /*#__PURE__*/function () {
      function InventoryEditorService(dexieService, baseData) {
        _classCallCheck(this, InventoryEditorService);

        this.dexieService = dexieService;
        this.baseData = baseData;
      }

      _createClass(InventoryEditorService, [{
        key: "returnResultSuccess",
        value: function returnResultSuccess(data) {
          data = data || {};
          return {
            success: true,
            message: data.message || '',
            errorMsg: data.errorMsg || '',
            errorCode: data.errorCode || null
          };
        }
      }, {
        key: "returnResultError",
        value: function returnResultError(data) {
          data = data || {};
          return {
            success: false,
            message: data.message || '',
            errorMsg: data.errorMsg || '',
            errorCode: data.errorCode || null
          };
        }
      }, {
        key: "updateInventar",
        value: function updateInventar(invid, data) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee256() {
            return regeneratorRuntime.wrap(function _callee256$(_context258) {
              while (1) {
                switch (_context258.prev = _context258.next) {
                  case 0:
                  case "end":
                    return _context258.stop();
                }
              }
            }, _callee256);
          }));
        }
      }, {
        key: "updateArtikelImage",
        value: function updateArtikelImage(invid, data) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee257() {
            return regeneratorRuntime.wrap(function _callee257$(_context259) {
              while (1) {
                switch (_context259.prev = _context259.next) {
                  case 0:
                  case "end":
                    return _context259.stop();
                }
              }
            }, _callee257);
          }));
        }
      }, {
        key: "assignInventarToRaum",
        value: function assignInventarToRaum(invUuid, ruuid, useJobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee258() {
            var _this153 = this;

            var jobid, uid, devid;
            return regeneratorRuntime.wrap(function _callee258$(_context260) {
              while (1) {
                switch (_context260.prev = _context260.next) {
                  case 0:
                    jobid = useJobid || this.baseData.getCurrentJobid();
                    uid = this.baseData.getCurrentUid();
                    devid = this.baseData.getCurrentDeviceId();
                    console.log('InventoryEditorService.assignInventarToRaum', {
                      invUuid: invUuid,
                      ruuid: ruuid,
                      jobid: jobid,
                      uid: uid,
                      devid: devid
                    });
                    return _context260.abrupt("return", Promise.all([this.dexieService.inventar.get(invUuid), this.dexieService.raeume.get(ruuid)]).then(function (result) {
                      var inv = result[0];
                      var raum = result[1];
                      console.log('InventoryEditorService.assignInventarToRaum', {
                        inv: inv,
                        raum: raum
                      });

                      if (!inv) {
                        return _this153.returnResultError({
                          errorCode: InventoryEditorErrorCode.InventarNotFound
                        });
                      }

                      if (!raum) {
                        return _this153.returnResultError({
                          errorCode: InventoryEditorErrorCode.RaumNotFound
                        });
                      }

                      return _this153.dexieService.inventar.update(inv.uuid, {
                        ruuid: raum.uuid,
                        jobid: jobid,
                        modified_uid: uid,
                        modified_jobid: jobid,
                        modified_device_id: devid
                      }).then(function () {
                        return _this153.returnResultSuccess();
                      });
                    }));

                  case 5:
                  case "end":
                    return _context260.stop();
                }
              }
            }, _callee258, this);
          }));
        }
      }, {
        key: "undoAssignedInventarToRaum",
        value: function undoAssignedInventarToRaum(invUuid, ruuid, useJobid) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee259() {
            var _this154 = this;

            var jobid;
            return regeneratorRuntime.wrap(function _callee259$(_context261) {
              while (1) {
                switch (_context261.prev = _context261.next) {
                  case 0:
                    jobid = useJobid || this.baseData.getCurrentJobid();
                    return _context261.abrupt("return", this.dexieService.clientChangeLog.where({
                      table: 'raeume',
                      uuid: invUuid,
                      jobid: jobid
                    }).filter(function (item) {
                      return item.obj && 'uuid' in item.obj && item.obj.uuid === ruuid;
                    }).last().then(function (item) {
                      if (item.type === 1
                      /* Create */
                      ) {
                          return _this154.dexieService.inventar["delete"](item.uuid).then(function () {
                            return _this154.dexieService.clientChangeLog["delete"](item.id);
                          }).then(function () {
                            return _this154.returnResultSuccess();
                          });
                        } else if (item.type === 2
                      /* Update */
                      ) {
                          return _this154.dexieService.inventar.update(invUuid, item.oldObj).then(function (num) {
                            if (num > 0) {
                              return _this154.dexieService.clientChangeLog["delete"](item.id);
                            } else {
                              throw new Error('Cannot undo Raum-Inventar-Zuweisung!');
                            }
                          }).then(function () {
                            return _this154.returnResultSuccess();
                          })["catch"](function (err) {
                            return _this154.returnResultError({
                              errorMsg: err
                            });
                          });
                        } else {
                        return _this154.returnResultError();
                      }
                    }));

                  case 2:
                  case "end":
                    return _context261.stop();
                }
              }
            }, _callee259, this);
          }));
        }
      }]);

      return InventoryEditorService;
    }();

    InventoryEditorService.ctorParameters = function () {
      return [{
        type: _dexie_service__WEBPACK_IMPORTED_MODULE_2__["DexieService"]
      }, {
        type: _basedata_service__WEBPACK_IMPORTED_MODULE_3__["BasedataService"]
      }];
    };

    InventoryEditorService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], InventoryEditorService);
    /***/
  },

  /***/
  "./src/app/shared/services/sounds.service.ts":
  /*!***************************************************!*\
    !*** ./src/app/shared/services/sounds.service.ts ***!
    \***************************************************/

  /*! exports provided: SoundsService */

  /***/
  function srcAppSharedServicesSoundsServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SoundsService", function () {
      return SoundsService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");

    var tempo = {
      n1: 1000,
      n2: 500,
      n3: 750,
      n4: 250,
      n8: 125,
      n16: 62.5,
      n32: 31.75
    };
    var tones = [{
      taste: 1,
      en: 'A0',
      de: 'A2',
      freq: 27.5
    }, {
      taste: 2,
      en: 'A#0/Bb0',
      de: 'Ais2/B2',
      freq: 29.1352
    }, {
      taste: 3,
      en: 'B0',
      de: 'H2',
      freq: 30.8677
    }, {
      taste: 4,
      en: 'C1',
      de: 'C1',
      freq: 32.7032
    }, {
      taste: 5,
      en: 'C#1/Db1',
      de: 'Cis1/Des1',
      freq: 34.6478
    }, {
      taste: 6,
      en: 'D1',
      de: 'D1',
      freq: 36.7081
    }, {
      taste: 7,
      en: 'D#1/Eb1',
      de: 'Dis1/Es1',
      freq: 38.8909
    }, {
      taste: 8,
      en: 'E1',
      de: 'E1',
      freq: 41.2034
    }, {
      taste: 9,
      en: 'F1',
      de: 'F1',
      freq: 43.6535
    }, {
      taste: 10,
      en: 'F#1/Gb1',
      de: 'Fis1/Ges1',
      freq: 46.2493
    }, {
      taste: 11,
      en: 'G1',
      de: 'G1',
      freq: 48.9994
    }, {
      taste: 12,
      en: 'G#1/Ab1',
      de: 'Gis1/As1',
      freq: 51.9131
    }, {
      taste: 13,
      en: 'A1',
      de: 'A1',
      freq: 55
    }, {
      taste: 14,
      en: 'A#1/Bb1',
      de: 'Ais1/B1',
      freq: 58.2705
    }, {
      taste: 15,
      en: 'B1',
      de: 'H1',
      freq: 61.7354
    }, {
      taste: 16,
      en: 'C2',
      de: 'C',
      freq: 65.4064
    }, {
      taste: 17,
      en: 'C#2/Db2',
      de: 'Cis/Des',
      freq: 69.2957
    }, {
      taste: 18,
      en: 'D2',
      de: 'D',
      freq: 73.4162
    }, {
      taste: 19,
      en: 'D#2/Eb2',
      de: 'Dis/Es',
      freq: 77.7817
    }, {
      taste: 20,
      en: 'E2',
      de: 'E',
      freq: 82.4069
    }, {
      taste: 21,
      en: 'F2',
      de: 'F',
      freq: 87.3071
    }, {
      taste: 22,
      en: 'F#2/Gb2',
      de: 'Fis/Ges',
      freq: 92.4986
    }, {
      taste: 23,
      en: 'G2',
      de: 'G',
      freq: 97.9989
    }, {
      taste: 24,
      en: 'G#2/Ab2',
      de: 'Gis/As',
      freq: 103.826
    }, {
      taste: 25,
      en: 'A2',
      de: 'A',
      freq: 110
    }, {
      taste: 26,
      en: 'A#2/Bb2',
      de: 'Ais/B',
      freq: 116.541
    }, {
      taste: 27,
      en: 'B2',
      de: 'H',
      freq: 123.471
    }, {
      taste: 28,
      en: 'C3',
      de: 'c',
      freq: 130.813
    }, {
      taste: 29,
      en: 'C#3/Db3',
      de: 'cis/des',
      freq: 138.591
    }, {
      taste: 30,
      en: 'D3',
      de: 'd',
      freq: 146.832
    }, {
      taste: 31,
      en: 'D#3/Eb3',
      de: 'dis/es',
      freq: 155.563
    }, {
      taste: 32,
      en: 'E3',
      de: 'e',
      freq: 164.814
    }, {
      taste: 33,
      en: 'F3',
      de: 'f',
      freq: 174.614
    }, {
      taste: 34,
      en: 'F#3/Gb3',
      de: 'fis/ges',
      freq: 184.997
    }, {
      taste: 35,
      en: 'G3',
      de: 'g',
      freq: 195.998
    }, {
      taste: 36,
      en: 'G#3/Ab3',
      de: 'gis/as',
      freq: 207.652
    }, {
      taste: 37,
      en: 'A3',
      de: 'a',
      freq: 220
    }, {
      taste: 38,
      en: 'A#3/Bb3',
      de: 'ais/b',
      freq: 233.082
    }, {
      taste: 39,
      en: 'B3',
      de: 'h',
      freq: 246.942
    }, {
      taste: 40,
      en: 'C4[3]',
      de: 'c1',
      freq: 261.626
    }, {
      taste: 41,
      en: 'C#4/Db4',
      de: 'cis1/des1',
      freq: 277.183
    }, {
      taste: 42,
      en: 'D4',
      de: 'd1',
      freq: 293.665
    }, {
      taste: 43,
      en: 'D#4/Eb4',
      de: 'dis1/es1',
      freq: 311.127
    }, {
      taste: 44,
      en: 'E4',
      de: 'e1',
      freq: 329.628
    }, {
      taste: 45,
      en: 'F4',
      de: 'f1',
      freq: 349.228
    }, {
      taste: 46,
      en: 'F#4/Gb4',
      de: 'fis1/ges1',
      freq: 369.994
    }, {
      taste: 47,
      en: 'G4',
      de: 'g1',
      freq: 391.995
    }, {
      taste: 48,
      en: 'G#4/Ab4',
      de: 'gis1/as1',
      freq: 415.305
    }, {
      taste: 49,
      en: 'A4[2]',
      de: 'a1 Kammerton',
      freq: 440
    }, {
      taste: 50,
      en: 'A#4/Bb4',
      de: 'ais1/b1',
      freq: 466.164
    }, {
      taste: 51,
      en: 'B4',
      de: 'h1',
      freq: 493.883
    }, {
      taste: 52,
      en: 'C5',
      de: 'c2',
      freq: 523.251
    }, {
      taste: 53,
      en: 'C#5/Db5',
      de: 'cis2/des2',
      freq: 554.365
    }, {
      taste: 54,
      en: 'D5',
      de: 'd2',
      freq: 587.33
    }, {
      taste: 55,
      en: 'D#5/Eb5',
      de: 'dis2/es2',
      freq: 622.254
    }, {
      taste: 56,
      en: 'E5',
      de: 'e2',
      freq: 659.255
    }, {
      taste: 57,
      en: 'F5',
      de: 'f2',
      freq: 698.456
    }, {
      taste: 58,
      en: 'F#5/Gb5',
      de: 'fis2/ges2',
      freq: 739.989
    }, {
      taste: 59,
      en: 'G5',
      de: 'g2',
      freq: 783.991
    }, {
      taste: 60,
      en: 'G#5/Ab5',
      de: 'gis2/as2',
      freq: 830.609
    }, {
      taste: 61,
      en: 'A5',
      de: 'a2',
      freq: 880
    }, {
      taste: 62,
      en: 'A#5/Bb5',
      de: 'ais2/b2',
      freq: 932.328
    }, {
      taste: 63,
      en: 'B5',
      de: 'h2',
      freq: 987.767
    }, {
      taste: 64,
      en: 'C6',
      de: 'c3',
      freq: 1046.5
    }, {
      taste: 65,
      en: 'C#6/Db6',
      de: 'cis3/des3',
      freq: 1108.73
    }, {
      taste: 66,
      en: 'D6',
      de: 'd3',
      freq: 1174.66
    }, {
      taste: 67,
      en: 'D#6/Eb6',
      de: 'dis3/es3',
      freq: 1244.51
    }, {
      taste: 68,
      en: 'E6',
      de: 'e3',
      freq: 1318.51
    }, {
      taste: 69,
      en: 'F6',
      de: 'f3',
      freq: 1396.91
    }, {
      taste: 70,
      en: 'F#6/Gb6',
      de: 'fis3/ges3',
      freq: 1479.98
    }, {
      taste: 71,
      en: 'G6',
      de: 'g3',
      freq: 1567.98
    }, {
      taste: 72,
      en: 'G#6/Ab6',
      de: 'gis3/as3',
      freq: 1661.22
    }, {
      taste: 73,
      en: 'A6',
      de: 'a3',
      freq: 1760
    }, {
      taste: 74,
      en: 'A#6/Bb6',
      de: 'ais3/b3',
      freq: 1864.66
    }, {
      taste: 75,
      en: 'B6',
      de: 'h3',
      freq: 1975.53
    }, {
      taste: 76,
      en: 'C7',
      de: 'c4',
      freq: 2093
    }, {
      taste: 77,
      en: 'C#7/Db7',
      de: 'cis4/des4',
      freq: 2217.46
    }, {
      taste: 78,
      en: 'D7',
      de: 'd4',
      freq: 2349.32
    }, {
      taste: 79,
      en: 'D#7/Eb7',
      de: 'dis4/es4',
      freq: 2489.02
    }, {
      taste: 80,
      en: 'E7',
      de: 'e4',
      freq: 2637.02
    }, {
      taste: 81,
      en: 'F7',
      de: 'f4',
      freq: 2793.83
    }, {
      taste: 82,
      en: 'F#7/Gb7',
      de: 'fis4/ges4',
      freq: 2959.96
    }, {
      taste: 83,
      en: 'G7',
      de: 'g4',
      freq: 3135.96
    }, {
      taste: 84,
      en: 'G#7/Ab7',
      de: 'gis4/as4',
      freq: 3322.44
    }, {
      taste: 85,
      en: 'A7',
      de: 'a4',
      freq: 3520
    }, {
      taste: 86,
      en: 'A#7/Bb7',
      de: 'ais4/b4',
      freq: 3729.31
    }, {
      taste: 87,
      en: 'B7',
      de: 'h4',
      freq: 3951.07
    }, {
      taste: 88,
      en: 'C8',
      de: 'c5',
      freq: 4186.01
    }];

    var SoundsService = /*#__PURE__*/function () {
      function SoundsService() {
        _classCallCheck(this, SoundsService);

        this.success = new Audio();
        this.success.muted = true;
        this.success.autoplay = true;
        this.success.src = '../assets/googlesounds/notification_simple-01.mp3';
        this.success.load();
        this.error = new Audio();
        this.error.muted = true;
        this.error.autoplay = true;
        this.error.src = '../assets/googlesounds/alert_error-01.mp3';
        this.error.load();
      }

      _createClass(SoundsService, [{
        key: "getSuccessSrc",
        value: function getSuccessSrc() {
          return this.success.src;
        }
      }, {
        key: "getErrorSrc",
        value: function getErrorSrc() {
          return this.error.src;
        }
      }, {
        key: "playSuccess",
        value: function playSuccess() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee260() {
            return regeneratorRuntime.wrap(function _callee260$(_context262) {
              while (1) {
                switch (_context262.prev = _context262.next) {
                  case 0:
                    this.success.muted = false;
                    this.success.play();

                  case 2:
                  case "end":
                    return _context262.stop();
                }
              }
            }, _callee260, this);
          }));
        }
      }, {
        key: "playError",
        value: function playError() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee261() {
            return regeneratorRuntime.wrap(function _callee261$(_context263) {
              while (1) {
                switch (_context263.prev = _context263.next) {
                  case 0:
                    this.error.muted = false;
                    this.error.play();

                  case 2:
                  case "end":
                    return _context263.stop();
                }
              }
            }, _callee261, this);
          }));
        }
      }]);

      return SoundsService;
    }();

    SoundsService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], SoundsService);
    /***/
  },

  /***/
  "./src/app/shared/services/user.service.ts":
  /*!*************************************************!*\
    !*** ./src/app/shared/services/user.service.ts ***!
    \*************************************************/

  /*! exports provided: UserService */

  /***/
  function srcAppSharedServicesUserServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "UserService", function () {
      return UserService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _dexie_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ./dexie.service */
    "./src/app/shared/services/dexie.service.ts");

    var UserService = /*#__PURE__*/function () {
      function UserService(dexie) {
        _classCallCheck(this, UserService);

        this.dexie = dexie;
      }

      _createClass(UserService, [{
        key: "getByUid",
        value: function getByUid(id) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee262() {
            var user;
            return regeneratorRuntime.wrap(function _callee262$(_context264) {
              while (1) {
                switch (_context264.prev = _context264.next) {
                  case 0:
                    _context264.next = 2;
                    return this.dexie.users.get(id);

                  case 2:
                    user = _context264.sent;
                    this.fitDateAttr(user);
                    return _context264.abrupt("return", user);

                  case 5:
                  case "end":
                    return _context264.stop();
                }
              }
            }, _callee262, this);
          }));
        }
      }, {
        key: "put",
        value: function put(user) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee263() {
            return regeneratorRuntime.wrap(function _callee263$(_context265) {
              while (1) {
                switch (_context265.prev = _context265.next) {
                  case 0:
                    return _context265.abrupt("return", this.dexie.users.put(user));

                  case 1:
                  case "end":
                    return _context265.stop();
                }
              }
            }, _callee263, this);
          }));
        }
      }, {
        key: "update",
        value: function update(id, data) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee264() {
            return regeneratorRuntime.wrap(function _callee264$(_context266) {
              while (1) {
                switch (_context266.prev = _context266.next) {
                  case 0:
                    return _context266.abrupt("return", this.dexie.users.update(id, data));

                  case 1:
                  case "end":
                    return _context266.stop();
                }
              }
            }, _callee264, this);
          }));
        }
      }, {
        key: "getByEmail",
        value: function getByEmail(email) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee265() {
            var user;
            return regeneratorRuntime.wrap(function _callee265$(_context267) {
              while (1) {
                switch (_context267.prev = _context267.next) {
                  case 0:
                    _context267.next = 2;
                    return this.dexie.users.where('email').equalsIgnoreCase(email).first();

                  case 2:
                    user = _context267.sent;
                    this.fitDateAttr(user);
                    return _context267.abrupt("return", user);

                  case 5:
                  case "end":
                    return _context267.stop();
                }
              }
            }, _callee265, this);
          }));
        }
      }, {
        key: "getByAuth",
        value: function getByAuth(email, password) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee266() {
            var user;
            return regeneratorRuntime.wrap(function _callee266$(_context268) {
              while (1) {
                switch (_context268.prev = _context268.next) {
                  case 0:
                    _context268.next = 2;
                    return this.dexie.users.where({
                      email: email,
                      password: password
                    }).first();

                  case 2:
                    user = _context268.sent;
                    this.fitDateAttr(user);
                    return _context268.abrupt("return", user);

                  case 5:
                  case "end":
                    return _context268.stop();
                }
              }
            }, _callee266, this);
          }));
        }
      }, {
        key: "fitDateAttr",
        value: function fitDateAttr(user) {
          if (user) {
            if (user.created_at && typeof user.created_at === 'string') {
              user.created_at = new Date(user.created_at);
            }

            if (user.updated_at && typeof user.updated_at === 'string') {
              user.updated_at = new Date(user.updated_at);
            }
          }

          return user;
        }
      }]);

      return UserService;
    }();

    UserService.ctorParameters = function () {
      return [{
        type: _dexie_service__WEBPACK_IMPORTED_MODULE_2__["DexieService"]
      }];
    };

    UserService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], UserService);
    /***/
  },

  /***/
  "./src/app/shared/services/variables.service.ts":
  /*!******************************************************!*\
    !*** ./src/app/shared/services/variables.service.ts ***!
    \******************************************************/

  /*! exports provided: SettingsChangeAction, VariablesService */

  /***/
  function srcAppSharedServicesVariablesServiceTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "SettingsChangeAction", function () {
      return SettingsChangeAction;
    });
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "VariablesService", function () {
      return VariablesService;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _dexie_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! ./dexie.service */
    "./src/app/shared/services/dexie.service.ts");
    /* harmony import */


    var _basedata_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ./basedata.service */
    "./src/app/shared/services/basedata.service.ts");

    var SettingsChangeAction;

    (function (SettingsChangeAction) {
      SettingsChangeAction[SettingsChangeAction["Insert"] = 0] = "Insert";
      SettingsChangeAction[SettingsChangeAction["Update"] = 1] = "Update";
      SettingsChangeAction[SettingsChangeAction["Delete"] = 2] = "Delete";
      SettingsChangeAction[SettingsChangeAction["SetProperty"] = 3] = "SetProperty";
      SettingsChangeAction[SettingsChangeAction["AddListItem"] = 4] = "AddListItem";
      SettingsChangeAction[SettingsChangeAction["AppendString"] = 5] = "AppendString";
    })(SettingsChangeAction || (SettingsChangeAction = {}));

    var VariablesService = /*#__PURE__*/function () {
      function VariablesService(db, baseData) {
        var _this155 = this;

        _classCallCheck(this, VariablesService);

        this.db = db;
        this.baseData = baseData;
        this.watchVariables = [];
        this.varChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.variables = this.db.variables;
        this.get('Settings.watchVariables', []).then(function (watchVars) {
          _this155.watchVariables = watchVars;
        });
      }

      _createClass(VariablesService, [{
        key: "watch",
        value: function watch() {
          var _this156 = this;

          for (var _len9 = arguments.length, watchNames = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
            watchNames[_key9] = arguments[_key9];
          }

          watchNames.forEach(function (name) {
            if (!_this156.watchVariables.find(function (alreadyWatched) {
              return alreadyWatched === name;
            })) {
              _this156.watchVariables.push(name);
            }
          });
          this.set('Settings.watchVariables', this.watchVariables);
        }
      }, {
        key: "unwatch",
        value: function unwatch() {
          for (var _len10 = arguments.length, unwatchNames = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
            unwatchNames[_key10] = arguments[_key10];
          }

          this.watchVariables = this.watchVariables.filter(function (alreadyWatched) {
            return unwatchNames.indexOf(alreadyWatched) === -1;
          });
          this.set('Settings.watchVariables', this.watchVariables);
        }
      }, {
        key: "checkWatchVar",
        value: function checkWatchVar(name, action, newValue, oldValue) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee267() {
            var checkVal, varType;
            return regeneratorRuntime.wrap(function _callee267$(_context269) {
              while (1) {
                switch (_context269.prev = _context269.next) {
                  case 0:
                    if (this.watchVariables.find(function (watchVar) {
                      return watchVar === name;
                    })) {
                      _context269.next = 2;
                      break;
                    }

                    return _context269.abrupt("return");

                  case 2:
                    checkVal = action !== SettingsChangeAction.Delete ? newValue : oldValue;
                    varType = 'any';

                    if (checkVal === undefined) {
                      varType = 'undefined';
                    } else if (typeof checkVal === null) {
                      varType = 'null';
                    } else {
                      varType = checkVal.constructor.name;
                    }

                    this.varChanged.emit({
                      name: name,
                      action: action,
                      varType: varType,
                      newValue: newValue,
                      oldValue: action !== SettingsChangeAction.AddListItem && action !== SettingsChangeAction.AppendString ? oldValue : null,
                      oldSize: action === SettingsChangeAction.AddListItem || action === SettingsChangeAction.AppendString ? oldValue : null
                    });

                  case 6:
                  case "end":
                    return _context269.stop();
                }
              }
            }, _callee267, this);
          }));
        }
      }, {
        key: "getAll",
        value: function getAll() {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee268() {
            return regeneratorRuntime.wrap(function _callee268$(_context270) {
              while (1) {
                switch (_context270.prev = _context270.next) {
                  case 0:
                    return _context270.abrupt("return", this.variables.toArray());

                  case 1:
                  case "end":
                    return _context270.stop();
                }
              }
            }, _callee268, this);
          }));
        }
      }, {
        key: "set",
        value: function set(name, value) {
          var logComment = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee269() {
            var _this157 = this;

            var oldVal, action, success;
            return regeneratorRuntime.wrap(function _callee269$(_context271) {
              while (1) {
                switch (_context271.prev = _context271.next) {
                  case 0:
                    action = SettingsChangeAction.Insert;
                    _context271.next = 3;
                    return this.has(name);

                  case 3:
                    if (!_context271.sent) {
                      _context271.next = 8;
                      break;
                    }

                    _context271.next = 6;
                    return this.get(name);

                  case 6:
                    oldVal = _context271.sent;
                    action = SettingsChangeAction.Update;

                  case 8:
                    _context271.next = 10;
                    return this.variables.put({
                      name: name,
                      value: value
                    }).then(function () {
                      _this157.checkWatchVar(name, action, value, oldVal);

                      return true;
                    })["catch"](function (err) {
                      return false;
                    });

                  case 10:
                    success = _context271.sent;
                    return _context271.abrupt("return", success);

                  case 12:
                  case "end":
                    return _context271.stop();
                }
              }
            }, _callee269, this);
          }));
        }
      }, {
        key: "setRevId",
        value: function setRevId(name, value) {
          var logComment = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee270() {
            var _this158 = this;

            var oldVal, action, _err3, success;

            return regeneratorRuntime.wrap(function _callee270$(_context272) {
              while (1) {
                switch (_context272.prev = _context272.next) {
                  case 0:
                    action = SettingsChangeAction.Insert;
                    _context272.next = 3;
                    return this.has(name);

                  case 3:
                    if (!_context272.sent) {
                      _context272.next = 8;
                      break;
                    }

                    _context272.next = 6;
                    return this.get(name);

                  case 6:
                    oldVal = _context272.sent;
                    action = SettingsChangeAction.Update;

                  case 8:
                    if (!(value === 0 || oldVal > value)) {
                      _context272.next = 12;
                      break;
                    }

                    _err3 = 'Kritischer Zugriff: Wert von ' + name + ' wurde versucht herunterzusetzen von ' + oldVal + ' auf ' + value;
                    console.error(_err3, {
                      name: name,
                      value: value,
                      logComment: logComment,
                      oldVal: oldVal,
                      action: action
                    });
                    return _context272.abrupt("return", false);

                  case 12:
                    _context272.next = 14;
                    return this.variables.put({
                      name: name,
                      value: value
                    }).then(function () {
                      _this158.checkWatchVar(name, action, value, oldVal);

                      return true;
                    })["catch"](function (err) {
                      return false;
                    });

                  case 14:
                    success = _context272.sent;
                    return _context272.abrupt("return", success);

                  case 16:
                  case "end":
                    return _context272.stop();
                }
              }
            }, _callee270, this);
          }));
        }
      }, {
        key: "get",
        value: function get(name) {
          var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee271() {
            return regeneratorRuntime.wrap(function _callee271$(_context273) {
              while (1) {
                switch (_context273.prev = _context273.next) {
                  case 0:
                    return _context273.abrupt("return", this.variables.get(name).then(function (item) {
                      return item.value;
                    })["catch"](function (err) {
                      return defaultValue;
                    }));

                  case 1:
                  case "end":
                    return _context273.stop();
                }
              }
            }, _callee271, this);
          }));
        }
      }, {
        key: "has",
        value: function has(name) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee272() {
            return regeneratorRuntime.wrap(function _callee272$(_context274) {
              while (1) {
                switch (_context274.prev = _context274.next) {
                  case 0:
                    _context274.next = 2;
                    return this.variables.where({
                      name: name
                    }).count();

                  case 2:
                    _context274.t0 = _context274.sent;
                    return _context274.abrupt("return", 0 < _context274.t0);

                  case 4:
                  case "end":
                    return _context274.stop();
                }
              }
            }, _callee272, this);
          }));
        }
      }, {
        key: "delete",
        value: function _delete(name) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee273() {
            var oldVal;
            return regeneratorRuntime.wrap(function _callee273$(_context275) {
              while (1) {
                switch (_context275.prev = _context275.next) {
                  case 0:
                    _context275.next = 2;
                    return this.has(name);

                  case 2:
                    if (_context275.sent) {
                      _context275.next = 4;
                      break;
                    }

                    return _context275.abrupt("return", true);

                  case 4:
                    _context275.next = 6;
                    return this.get(name);

                  case 6:
                    oldVal = _context275.sent;
                    _context275.next = 9;
                    return this.variables.where({
                      name: name
                    })["delete"]();

                  case 9:
                    _context275.t0 = _context275.sent;

                    if (!(0 < _context275.t0)) {
                      _context275.next = 13;
                      break;
                    }

                    this.checkWatchVar(name, SettingsChangeAction.Delete, null, oldVal);
                    return _context275.abrupt("return", true);

                  case 13:
                    return _context275.abrupt("return", false);

                  case 14:
                  case "end":
                    return _context275.stop();
                }
              }
            }, _callee273, this);
          }));
        }
      }, {
        key: "toKeyValueObject",
        value: function toKeyValueObject(key, value) {
          var obj = {};
          obj[key] = value;
          return obj;
        }
      }, {
        key: "setObjectPropery",
        value: function setObjectPropery(name, propertyName, propertyValue) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee274() {
            var obj, oldVal, newVal;
            return regeneratorRuntime.wrap(function _callee274$(_context276) {
              while (1) {
                switch (_context276.prev = _context276.next) {
                  case 0:
                    _context276.next = 2;
                    return this.get(name, {});

                  case 2:
                    obj = _context276.sent;
                    oldVal = this.toKeyValueObject(propertyName, propertyName in obj ? obj[propertyName] : undefined);
                    newVal = this.toKeyValueObject(propertyName, propertyValue);
                    obj[propertyName] = propertyValue;
                    _context276.next = 8;
                    return this.set(name, obj);

                  case 8:
                    this.checkWatchVar(name, SettingsChangeAction.SetProperty, newVal, oldVal);
                    return _context276.abrupt("return", true);

                  case 10:
                  case "end":
                    return _context276.stop();
                }
              }
            }, _callee274, this);
          }));
        }
      }, {
        key: "appendListItem",
        value: function appendListItem(name, item) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee275() {
            var list;
            return regeneratorRuntime.wrap(function _callee275$(_context277) {
              while (1) {
                switch (_context277.prev = _context277.next) {
                  case 0:
                    _context277.next = 2;
                    return this.get(name, []);

                  case 2:
                    list = _context277.sent;
                    list.push(item);
                    _context277.next = 6;
                    return this.set(name, list);

                  case 6:
                    this.checkWatchVar(name, SettingsChangeAction.AddListItem, item, list.length - 1);
                    return _context277.abrupt("return", list.length);

                  case 8:
                  case "end":
                    return _context277.stop();
                }
              }
            }, _callee275, this);
          }));
        }
      }, {
        key: "appendString",
        value: function appendString(name, append) {
          var sep = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee276() {
            var oldStr;
            return regeneratorRuntime.wrap(function _callee276$(_context278) {
              while (1) {
                switch (_context278.prev = _context278.next) {
                  case 0:
                    _context278.next = 2;
                    return this.get(name, '');

                  case 2:
                    oldStr = _context278.sent;

                    if (!oldStr) {
                      _context278.next = 8;
                      break;
                    }

                    _context278.next = 6;
                    return this.set(name, oldStr + sep + append);

                  case 6:
                    _context278.next = 10;
                    break;

                  case 8:
                    _context278.next = 10;
                    return this.set(name, append);

                  case 10:
                    this.checkWatchVar(name, SettingsChangeAction.AppendString, append, oldStr.length);
                    return _context278.abrupt("return", true);

                  case 12:
                  case "end":
                    return _context278.stop();
                }
              }
            }, _callee276, this);
          }));
        }
      }, {
        key: "isEqual",
        value: function isEqual(name, compare) {
          return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, /*#__PURE__*/regeneratorRuntime.mark(function _callee277() {
            return regeneratorRuntime.wrap(function _callee277$(_context279) {
              while (1) {
                switch (_context279.prev = _context279.next) {
                  case 0:
                    _context279.t0 = compare;
                    _context279.next = 3;
                    return this.get(name);

                  case 3:
                    _context279.t1 = _context279.sent;
                    return _context279.abrupt("return", _context279.t0 === _context279.t1);

                  case 5:
                  case "end":
                    return _context279.stop();
                }
              }
            }, _callee277, this);
          }));
        }
      }]);

      return VariablesService;
    }();

    VariablesService.ctorParameters = function () {
      return [{
        type: _dexie_service__WEBPACK_IMPORTED_MODULE_2__["DexieService"]
      }, {
        type: _basedata_service__WEBPACK_IMPORTED_MODULE_3__["BasedataService"]
      }];
    };

    tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"])()], VariablesService.prototype, "varChanged", void 0);
    VariablesService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
      providedIn: 'root'
    })], VariablesService);
    /***/
  },

  /***/
  "./src/environments/environment.ts":
  /*!*****************************************!*\
    !*** ./src/environments/environment.ts ***!
    \*****************************************/

  /*! exports provided: environment */

  /***/
  function srcEnvironmentsEnvironmentTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony export (binding) */


    __webpack_require__.d(__webpack_exports__, "environment", function () {
      return environment;
    });
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js"); // This file can be replaced during build by using the `fileReplacements` array.
    // `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.
    // The list of file replacements can be found in `angular.json`.


    var environment = {
      appVersion: __webpack_require__(
      /*! ../../package.json */
      "./package.json").version + '-dev',
      production: false
    };
    /*
     * For easier debugging in development mode, you can import the following file
     * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.
     *
     * This import should be commented out in production mode because it will have a negative impact
     * on performance if an error is thrown.
     */
    // import 'zone.js/dist/zone-error';  // Included with Angular CLI.

    /***/
  },

  /***/
  "./src/main.ts":
  /*!*********************!*\
    !*** ./src/main.ts ***!
    \*********************/

  /*! no exports provided */

  /***/
  function srcMainTs(module, __webpack_exports__, __webpack_require__) {
    "use strict";

    __webpack_require__.r(__webpack_exports__);
    /* harmony import */


    var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(
    /*! tslib */
    "./node_modules/tslib/tslib.es6.js");
    /* harmony import */


    var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(
    /*! @angular/core */
    "./node_modules/@angular/core/fesm2015/core.js");
    /* harmony import */


    var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(
    /*! @angular/platform-browser-dynamic */
    "./node_modules/@angular/platform-browser-dynamic/fesm2015/platform-browser-dynamic.js");
    /* harmony import */


    var _app_app_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(
    /*! ./app/app.module */
    "./src/app/app.module.ts");
    /* harmony import */


    var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(
    /*! ./environments/environment */
    "./src/environments/environment.ts");

    if (_environments_environment__WEBPACK_IMPORTED_MODULE_4__["environment"].production) {
      Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["enableProdMode"])();
    }

    Object(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__["platformBrowserDynamic"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_3__["AppModule"])["catch"](function (err) {
      return console.error(err);
    });
    /***/
  },

  /***/
  0:
  /*!***************************!*\
    !*** multi ./src/main.ts ***!
    \***************************/

  /*! no static exports found */

  /***/
  function _(module, exports, __webpack_require__) {
    module.exports = __webpack_require__(
    /*! C:\Users\f.barthold\workspace\ErwinInventarisierung\apps\frontendRetructure\src\main.ts */
    "./src/main.ts");
    /***/
  }
}, [[0, "runtime", "vendor"]]]);
//# sourceMappingURL=main-es5.js.map