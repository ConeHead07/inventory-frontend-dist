{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.html","./src/app/pages/auth/auth.component.html","./src/app/pages/dbsync/dbsync.component.html","./src/app/pages/invent-form/invent-form.component.html","./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.html","./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.html","./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.html","./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.html","./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.html","./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.html","./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.html","./src/app/pages/invent-form/modals/imagebox/imagebox.component.html","./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.html","./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.html","./src/app/pages/invent-form/modals/scanner/scanner.component.html","./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.html","./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.html","./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.html","./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.html","./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.html","./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.html","./src/app/pages/select-inventory/select-inventory.component.html","./src/app/pages/settings/settings.component.html","./src/app/shared/components/ngbheader/ngbheader.component.html","./src/app/shared/components/progressbar/progressbar.component.html","./src/app/shared/components/scannerdetection/scannerdetection.component.html","./src/app/shared/components/status-check/status-check.component.html","./node_modules/tslib/tslib.es6.js","./src/app/app.component.scss","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/pages/auth/auth-guard.service.ts","./src/app/pages/auth/auth-interceptor.service.ts","./src/app/pages/auth/auth.component.scss","./src/app/pages/auth/auth.component.ts","./src/app/pages/auth/auth.service.ts","./src/app/pages/auth/user.model.ts","./src/app/pages/dbsync/dbsync.component.scss","./src/app/pages/dbsync/dbsync.component.ts","./src/app/pages/invent-form/data-services/artikel.service.ts","./src/app/pages/invent-form/data-services/barcode.service.ts","./src/app/pages/invent-form/data-services/hersteller.service.ts","./src/app/pages/invent-form/data-services/images.service.ts","./src/app/pages/invent-form/data-services/inventar.service.ts","./src/app/pages/invent-form/data-services/raum.service.ts","./src/app/pages/invent-form/invent-form.component.scss","./src/app/pages/invent-form/invent-form.component.ts","./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.scss","./src/app/pages/invent-form/modals/batch-barcodes/batch-barcodes.component.ts","./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.scss","./src/app/pages/invent-form/modals/create-artikel-image/create-artikel-image.component.ts","./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.scss","./src/app/pages/invent-form/modals/create-raum-image/create-raum-image.component.ts","./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.scss","./src/app/pages/invent-form/modals/edit-inventar/edit-inventar.component.ts","./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.scss","./src/app/pages/invent-form/modals/edit-raum/edit-raum.component.ts","./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.scss","./src/app/pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component.ts","./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.scss","./src/app/pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component.ts","./src/app/pages/invent-form/modals/imagebox/imagebox.component.scss","./src/app/pages/invent-form/modals/imagebox/imagebox.component.ts","./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.scss","./src/app/pages/invent-form/modals/raum-list-done/raum-list-done.component.ts","./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.scss","./src/app/pages/invent-form/modals/raum-list-rest/raum-list-rest.component.ts","./src/app/pages/invent-form/modals/scanner/scanner.component.scss","./src/app/pages/invent-form/modals/scanner/scanner.component.ts","./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.scss","./src/app/pages/invent-form/modals/select-create-artikel/select-create-artikel.component.ts","./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.scss","./src/app/pages/invent-form/modals/select-create-raum/select-create-raum.component.ts","./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.scss","./src/app/pages/invent-form/modals/select-search-artikel/select-search-artikel.component.ts","./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.scss","./src/app/pages/invent-form/modals/select-search-raum/select-search-raum.component.ts","./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.scss","./src/app/pages/invent-form/modals/show-artikel-image/show-artikel-image.component.ts","./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.scss","./src/app/pages/invent-form/modals/show-raum-image/show-raum-image.component.ts","./src/app/pages/select-inventory/select-inventory.component.scss","./src/app/pages/select-inventory/select-inventory.component.ts","./src/app/pages/settings/settings.component.scss","./src/app/pages/settings/settings.component.ts","./src/app/shared/components/ngbheader/ngbheader.component.scss","./src/app/shared/components/ngbheader/ngbheader.component.ts","./src/app/shared/components/progressbar/progressbar.component.scss","./src/app/shared/components/progressbar/progressbar.component.ts","./src/app/shared/components/scannerdetection/scannerdetection.component.scss","./src/app/shared/components/scannerdetection/scannerdetection.component.ts","./src/app/shared/components/status-check/status-check.component.scss","./src/app/shared/components/status-check/status-check.component.ts","./src/app/shared/directives/scannerinput.directive.ts","./src/app/shared/interfaces/dexie.interfaces.ts","./src/app/shared/inventory-progress/inventory-progress.directive.ts","./src/app/shared/inventory-progress/inventory-progress.service.ts","./src/app/shared/services/api.service.ts","./src/app/shared/services/basedata.service.ts","./src/app/shared/services/connection-service.service.ts","./src/app/shared/services/data.service.ts","./src/app/shared/services/dbsync-client.service.ts","./src/app/shared/services/dbsync-log.service.ts","./src/app/shared/services/dexie-sync-client.service.ts","./src/app/shared/services/dexie.service.ts","./src/app/shared/services/inventory-editor.service.ts","./src/app/shared/services/sounds.service.ts","./src/app/shared/services/user.service.ts","./src/app/shared/services/variables.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","export default \"<app-ngbheader [isLoginPage]=\\\"isLoginPage\\\"></app-ngbheader>\\r\\n<div class=\\\"container app-content\\\">\\r\\n  <div class=\\\"row no-gutters mt-2 app-content-inner-box\\\">\\r\\n    <div class=\\\"col-md-12\\\">\\r\\n      <router-outlet></router-outlet>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<footer *ngIf=\\\"!isLoginPage\\\" class=\\\"card small mt-2 app-footer\\\">\\r\\n  <div class=\\\"card-footer text-center\\\">\\r\\n    <app-status-check></app-status-check>\\r\\n    <button *ngIf=\\\"false && !heartBeatState\\\" (click)=\\\"setHeartBeatState(true)\\\">Enable HeartBeat Check</button>\\r\\n    <button *ngIf=\\\"false && heartBeatState\\\" (click)=\\\"setHeartBeatState(false)\\\">Disable HeartBeat Check</button>\\r\\n    <button *ngIf=\\\"deferredInstallPrompt\\\" (click)=\\\"installApp()\\\">Install app</button>\\r\\n  </div>\\r\\n</footer>\\r\\n<div #addScripts></div>\\r\\n\\r\\n\"","export default \"<div class=\\\"bg\\\"></div>\\r\\n<div class=\\\"container h-100\\\">\\r\\n    <div class=\\\"d-flex justify-content-center h-100\\\">\\r\\n      <div class=\\\"w-100 justify-content-center align-self-center\\\">\\r\\n        <div class=\\\"brand-circle-container\\\">\\r\\n          <div class=\\\"brand-circle-grey\\\"></div>\\r\\n        </div>\\r\\n        <h1><span class=\\\"lato-black\\\">Inventory</span><span class=\\\"lato-light\\\">App</span></h1>\\r\\n        <div class=\\\"user_card user_card_loginbox_bg\\\">\\r\\n\\r\\n            <div class=\\\"d-flex justify-content-center lato-light mb-2\\\">\\r\\n              <h2>Anmeldung</h2>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"d-flex justify-content-center form_container\\\">\\r\\n                <form #loginForm=ngForm (ngSubmit)=\\\"onLoginSubmit()\\\">\\r\\n\\r\\n                    <div class=\\\"input-group mb-4\\\">\\r\\n                        <div class=\\\"input-group-append\\\">\\r\\n                            <span class=\\\"input-group-text\\\">\\r\\n                                <fa-icon [icon]=\\\"['fa', 'user']\\\"></fa-icon>\\r\\n                            </span>\\r\\n                        </div>\\r\\n                        <input type=\\\"text\\\" class=\\\"form-control input_user lato-light\\\" name=\\\"user\\\" placeholder=\\\"Benutzername\\\"\\r\\n                            [(ngModel)]=\\\"form.email\\\"\\r\\n                            minlength=\\\"3\\\"\\r\\n                            pattern=\\\"[a-zA-Z0-9.@-]{3,}\\\"\\r\\n                            required\\r\\n                        >\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"input-group mb-5\\\">\\r\\n                        <div class=\\\"input-group-append\\\">\\r\\n                            <span class=\\\"input-group-text\\\">\\r\\n                                <fa-icon [icon]=\\\"['fa', 'key']\\\"></fa-icon>\\r\\n                            </span>\\r\\n                        </div>\\r\\n                        <input required type=\\\"password\\\" class=\\\"form-control input_pass lato-light\\\" name=\\\"password\\\" placeholder=\\\"Passwort\\\"\\r\\n                        [(ngModel)]=\\\"form.password\\\"\\r\\n                        required>\\r\\n                    </div>\\r\\n                    <div class=\\\"d-flex justify-content-center login_container\\\">\\r\\n                     <button type=\\\"button\\\" name=\\\"button\\\" class=\\\"btn login_btn lato-light\\\"\\r\\n                     (click)=\\\"onLoginSubmit()\\\"\\r\\n                     [disabled]=\\\"loginForm.invalid\\\">LOGIN</button>\\r\\n                   </div>\\r\\n                </form>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"error\\\" class=\\\"alert alert-danger\\\" style=\\\"max-width:90vw\\\">{{ error }}</div>\\r\\n      </div>\\r\\n    </div>\\r\\n</div>\\r\\n\"","export default \"<div *ngIf=\\\"currInventur\\\">\\r\\n  <div class=\\\"card mt-1\\\">\\r\\n    <div class=\\\"card-header\\\">Aktuelle Inventur: {{ currInventur.Titel }}</div>\\r\\n    <div class=\\\"card-body\\\">\\r\\n      <h5 class=\\\"card-title\\\"></h5>\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-3\\\">Titel</div>\\r\\n        <div class=\\\"col\\\">{{ currInventur.Titel }}</div>\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-3\\\">Inventur-ID (Jobid)</div>\\r\\n        <div class=\\\"col\\\">{{ currInventur.jobid }}</div>\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-3\\\">Mandant-ID</div>\\r\\n        <div class=\\\"col\\\">{{ currInventur.mid }}</div>\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-3\\\">Created</div>\\r\\n        <div class=\\\"col\\\">{{ currInventur.created_at }}</div>\\r\\n      </div>\\r\\n\\r\\n      <div *ngIf=\\\"currUser\\\" class=\\\"row\\\">\\r\\n        <div class=\\\"col\\\">User</div>\\r\\n        <div class=\\\"col\\\">{{ currUser.email }}</div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n    <div class=\\\"card-footer\\\">\\r\\n      <button [disabled]=\\\"syncInProcess\\\" class=\\\"btn btn-danger\\\" (click)=\\\"resetCurrJob()\\\">Inventurdaten komplett neu laden</button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card mt-2\\\">\\r\\n  <div class=\\\"card-header\\\">Synchronisierung</div>\\r\\n  <div class=\\\"card-body\\\">\\r\\n    <h4 class=\\\"card-title\\\">Aktueller Status</h4>\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-3\\\">Client-Revision-ID</div>\\r\\n      <div class=\\\"col\\\">{{ clientRevisionId }}</div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-3\\\">Unsynced Changes</div>\\r\\n      <div class=\\\"col\\\">{{ numUnsyncedChanges }}</div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-3\\\">Server-Revision-ID</div>\\r\\n      <div class=\\\"col\\\">{{ serverRevisionId }}</div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-3\\\">Server-Changes</div>\\r\\n      <div class=\\\"col\\\">{{ numServerChanges }}</div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-3\\\">Status</div>\\r\\n      <div class=\\\"col\\\">{{syncStatusName}} ({{syncStatus}})</div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-3\\\">Finished</div>\\r\\n      <div class=\\\"col\\\">{{syncFinished | json }}</div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-3\\\">Auto-Run</div>\\r\\n      <div class=\\\"col\\\">{{ syncAutoRun | json }}</div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"card-footer\\\">\\r\\n    <button *ngIf=\\\"syncAutoRun\\\" class=\\\"btn btn-danger\\\" (click)=\\\"syncAutoStop()\\\"> Autmatische Synchronisierung stoppen</button>\\r\\n    <button *ngIf=\\\"!syncAutoRun\\\" class=\\\"btn btn-success\\\" (click)=\\\"syncAutoStart()\\\"> Autmatische Synchronisierung starten</button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card mt-2\\\" *ngIf=\\\"currProcess\\\">\\r\\n  <div class=\\\"card-header\\\">Laufender Prozess</div>\\r\\n  <div class=\\\"card-body\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col\\\">Status</div>\\r\\n      <div class=\\\"col\\\">{{ syncStatusName }}</div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col\\\">Start</div>\\r\\n      <div class=\\\"col\\\">{{ currProcess.starttime | date }}</div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card mt-2\\\" *ngIf=\\\"lastServerSyncErrors.length > 0\\\">\\r\\n  <div class=\\\"card-header\\\">Synchronisations-Fehler</div>\\r\\n  <h4 class=\\\"card-title\\\">Fehler bei letzter Synchroniserung\\r\\n    (InventurId: {{ lastServerSyncJobid}}) um {{ lastServerSyncDate | date }}</h4>\\r\\n  Anzahl: {{ lastServerSyncErrors.length }}<br>\\r\\n\\r\\n    <table class=\\\"table table-striped\\\">\\r\\n      <thead>\\r\\n      <tr>\\r\\n        <th scope=\\\"col\\\">#</th>\\r\\n        <th scope=\\\"col\\\">Table</th>\\r\\n        <th scope=\\\"col\\\">Log-Id</th>\\r\\n        <th scope=\\\"col\\\">Aktion</th>\\r\\n        <th scope=\\\"col\\\">Fehlercode</th>\\r\\n        <th scope=\\\"col\\\">Fehlermeldung</th>\\r\\n      </tr>\\r\\n      </thead>\\r\\n      <tbody>\\r\\n      <tr *ngFor=\\\"let item of lastServerSyncErrors; index as i\\\">\\r\\n        <th scope=\\\"row\\\">{{ i + 1 }}</th>\\r\\n        <td>{{ item.table }}</td>\\r\\n        <td>{{ item.clientChangeLogId | number }}</td>\\r\\n        <td>{{ item.type | number }}</td>\\r\\n        <td>{{ item.error_code }}</td>\\r\\n        <td>{{ item.error_msg }}</td>\\r\\n      </tr>\\r\\n      </tbody>\\r\\n    </table>\\r\\n    * type: 1=Insert, 2=Update, 3=Delete\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card mt-2\\\" id=\\\"totalProgress\\\" *ngIf=\\\"syncTotal && syncTotal.total\\\">\\r\\n  <p><ngb-progressbar [striped]=\\\"true\\\" [animated]=\\\"true\\\" [value]=\\\"syncTotal.percent\\\"></ngb-progressbar></p>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col\\\">{{ syncTotal.executed }}</div>\\r\\n    <div class=\\\"col\\\">von {{ syncTotal.total }}</div>\\r\\n    <div class=\\\"col pull-right\\\">{{ syncTotal.percent }} %</div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card mt-2\\\" id=\\\"tableProgress\\\" *ngIf=\\\"syncTables && syncTables.length > 0\\\">\\r\\n  <div class=\\\"row\\\" *ngFor=\\\"let st of syncTables; let stIdx = index\\\">\\r\\n    <div class=\\\"col\\\">{{ st.total }}</div>\\r\\n    <div class=\\\"col\\\">{{ st.puts }}</div>\\r\\n    <div class=\\\"col\\\">{{ st.modified }}</div>\\r\\n    <div class=\\\"col\\\">{{ st.deleted }}</div>\\r\\n    <div class=\\\"col\\\">{{ st.executed }}</div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n\"","export default \"<div class=\\\"blobs-overlay\\\" *ngIf=\\\"blobAlert && useOverlay === 1\\\">\\r\\n  <div class=\\\"blobs-container\\\">\\r\\n    <ng-container [ngSwitch]=\\\"blobAlert\\\">\\r\\n      <div class=\\\"blob red animate\\\" *ngSwitchCase=\\\"'danger'\\\"></div>\\r\\n      <div class=\\\"blob green animate\\\" *ngSwitchCase=\\\"'success'\\\"></div>\\r\\n    </ng-container>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"blobs-overlay\\\" *ngIf=\\\"blobAlert && useOverlay === 2\\\">\\r\\n  <div class=\\\"blobs-container\\\">\\r\\n    <ng-container [ngSwitch]=\\\"blobAlert\\\">\\r\\n      <div class=\\\"blob red animate\\\" *ngSwitchCase=\\\"'danger'\\\"></div>\\r\\n      <div class=\\\"blob green animate\\\" *ngSwitchCase=\\\"'success'\\\"></div>\\r\\n    </ng-container>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row no-gutters mb-1\\\">\\r\\n  <div class=\\\"form-group col-4\\\">\\r\\n    <label for=\\\"kunde\\\" class=\\\"mb-0\\\">Mandant</label>\\r\\n    <input id=\\\"kunde\\\" class=\\\"form-control\\\" [readOnly]=\\\"true\\\" [attr.value]=\\\"kundeName\\\">\\r\\n  </div>\\r\\n  <div class=\\\"form-group col-4 px-1\\\">\\r\\n    <label for=\\\"adresse\\\" class=\\\"mb-0\\\">Adresse</label>\\r\\n    <input id=\\\"adresse\\\" class=\\\"form-control\\\" [readOnly]=\\\"true\\\" [attr.value]=\\\"adresse\\\">\\r\\n  </div>\\r\\n  <div class=\\\"form-group col-4\\\">\\r\\n    <label for=\\\"raum\\\" class=\\\"mb-0\\\">Raum</label>\\r\\n    <input id=\\\"raum\\\" [ngClass]=\\\"{ 'bg-danger': !raum }\\\" class=\\\"form-control\\\" [readOnly]=\\\"true\\\" [attr.value]=\\\"raumNr\\\">\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row mb-4\\\">\\r\\n  <div class=\\\"col-6\\\">\\r\\n    <app-progressbar [shortTitle]=\\\"'Gesamt'\\\" [title]=\\\"'Fortschrittsanzeige gesamt'\\\"\\r\\n                     [sendDoneClick]=\\\"true\\\"\\r\\n                     (clickedDone)=\\\"showGesamtDone()\\\"\\r\\n                     [sendRestClick]=\\\"true\\\"\\r\\n                     (clickedRest)=\\\"showGesamtRest()\\\"\\r\\n                     [value]=\\\"jobProgress.done\\\" [total]=\\\"jobProgress.total\\\"></app-progressbar>\\r\\n  </div>\\r\\n  <div class=\\\"col-6\\\">\\r\\n    <app-progressbar [shortTitle]=\\\"'Raum'\\\"  [title]=\\\"'Fortschrittsanzeige Raum'\\\"\\r\\n                     [sendDoneClick]=\\\"true\\\"\\r\\n                     (clickedDone)=\\\"showRaumDone()\\\"\\r\\n                     [sendRestClick]=\\\"true\\\"\\r\\n                     (clickedRest)=\\\"showRaumRest()\\\"\\r\\n                     [value]=\\\"raumProgress.done\\\" [total]=\\\"raumProgress.total\\\"></app-progressbar>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row mt-4\\\">\\r\\n  <label for=\\\"raumCode\\\" class=\\\"col-4\\\"><strong>Raumdaten</strong></label>\\r\\n\\r\\n  <div class=\\\"col-8 text-right\\\">\\r\\n    <div #invDrop=\\\"ngbDropdown\\\" ngbDropdown style=\\\"display: inline-block\\\">\\r\\n      <button [ngClass]=\\\"{\\r\\n        'btn-outline-success': jobLockStatus === 2,\\r\\n        'btn-outline-info': jobLockStatus === 1,\\r\\n        'btn-outline-secondary': jobLockStatus === 0\\r\\n        }\\\"\\r\\n              ngbDropdownToggle\\r\\n              id=\\\"dropdownLockStatus\\\"\\r\\n              class=\\\"btn btn-sm dropdown-toggle\\\"\\r\\n              type=\\\"button\\\" data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\"\\r\\n              aria-expanded=\\\"false\\\"> Inventur ({{ jobLockStatus }})\\r\\n        <ng-container [ngSwitch]=\\\"jobLockStatus\\\">\\r\\n          <fa-icon *ngSwitchCase=\\\"2\\\" [icon]=\\\"faLock\\\"></fa-icon>\\r\\n          <fa-icon *ngSwitchCase=\\\"1\\\" [icon]=\\\"faUnlockAlt\\\"></fa-icon>\\r\\n          <fa-icon *ngSwitchDefault [icon]=\\\"faLock\\\"></fa-icon>\\r\\n        </ng-container>\\r\\n      </button>\\r\\n      <div class=\\\"dropdown-menu dropdown-menu-right\\\" [style.right]=\\\"0\\\" ngbDropdownMenu aria-labelledby=\\\"dropdownLockStatus\\\">\\r\\n        <button ngbDropdownItem class=\\\"dropdown-item\\\"\\r\\n                (click)=\\\"setJobLockStatusClosed()\\\"><fa-icon [attr.class]=\\\"'text-danger'\\\" [icon]=\\\"faLock\\\"></fa-icon>\\r\\n          Inventur schlieen\\r\\n        </button>\\r\\n        <button ngbDropdownItem class=\\\"dropdown-item\\\"\\r\\n                (click)=\\\"setJobLockStatusOpened()\\\"><fa-icon [attr.class]=\\\"'text-success'\\\" [icon]=\\\"faUnlockAlt\\\"></fa-icon>\\r\\n          Inventur in Arbeit\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div #myDrop=\\\"ngbDropdown\\\" ngbDropdown style=\\\"display: inline-block\\\">\\r\\n      <button [ngClass]=\\\"{\\r\\n        'btn-outline-success': raumEditStatus === 2,\\r\\n        'btn-outline-info': raumEditStatus === 1,\\r\\n        'btn-outline-secondary': raumEditStatus === 0\\r\\n        }\\\"\\r\\n              ngbDropdownToggle\\r\\n              id=\\\"dropdownRaumStatus\\\"\\r\\n              class=\\\"btn btn-sm dropdown-toggle\\\"\\r\\n              type=\\\"button\\\" data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\"\\r\\n              aria-expanded=\\\"false\\\"> Raum\\r\\n        <ng-container [ngSwitch]=\\\"raumEditStatus\\\">\\r\\n          <fa-icon *ngSwitchCase=\\\"2\\\" [icon]=\\\"faCheck\\\"></fa-icon>\\r\\n          <fa-icon *ngSwitchCase=\\\"1\\\" [icon]=\\\"faDoorOpen\\\"></fa-icon>\\r\\n          <fa-icon *ngSwitchDefault [icon]=\\\"faDoorClosed\\\"></fa-icon>\\r\\n        </ng-container>\\r\\n      </button>\\r\\n      <div class=\\\"dropdown-menu dropdown-menu-right\\\" [style.width]=\\\"'200px'\\\" ngbDropdownMenu aria-labelledby=\\\"dropdownRaumStatus\\\">\\r\\n        <button ngbDropdownItem class=\\\"dropdown-item\\\"\\r\\n                (click)=\\\"setRaumEditStatusClosed()\\\"><fa-icon [attr.class]=\\\"'text-success'\\\" [icon]=\\\"faCheck\\\"></fa-icon>\\r\\n          Fertig\\r\\n        </button>\\r\\n        <button ngbDropdownItem class=\\\"dropdown-item\\\"\\r\\n                (click)=\\\"setRaumEditStatusStarted()\\\"><fa-icon [attr.class]=\\\"'text-info'\\\" [icon]=\\\"faDoorOpen\\\"></fa-icon>\\r\\n          In Arbeit\\r\\n        </button>\\r\\n        <button *ngIf=\\\"raumProgress.done === 0\\\" ngbDropdownItem class=\\\"dropdown-item\\\"\\r\\n                (click)=\\\"setRaumEditStatusUntouched()\\\"><fa-icon [attr.class]=\\\"'text-secondary'\\\" [icon]=\\\"faDoorClosed\\\"></fa-icon>\\r\\n          Noch nicht begonnen\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"form-group row\\\">\\r\\n  <div class=\\\"col input-group mb-1\\\">\\r\\n    <div class=\\\"input-group-prepend\\\">\\r\\n      <span class=\\\"input-group-text\\\">BCode</span>\\r\\n    </div>\\r\\n    <input id=\\\"raumCode\\\" readonly #raumBarcode type=\\\"text\\\"\\r\\n           class=\\\"form-control\\\" [value]=\\\"formInventar.RaumBarcode\\\" (input)=\\\"onRaumBarcodeInput( $event )\\\" placeholder=\\\"Raum-Barcode\\\" aria-label=\\\"Raumcode\\\">\\r\\n    <div class=\\\"input-group-append\\\">\\r\\n      <button class=\\\"btn btn-outline-success\\\" type=\\\"button\\\" (click)=\\\"openScanner(raumBarcode)\\\"><fa-icon [icon]=\\\"faBarcode\\\"></fa-icon></button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"form-group row\\\">\\r\\n  <div class=\\\"col input-group mb-1\\\">\\r\\n    <div class=\\\"input-group-prepend\\\">\\r\\n      <span class=\\\"input-group-text\\\">Nr</span>\\r\\n    </div>\\r\\n    <input id=\\\"raumNr\\\" readonly type=\\\"text\\\" [value]=\\\"formInventar.Raum\\\" class=\\\"form-control\\\" placeholder=\\\"Raumnr\\\" aria-label=\\\"Raumnummer\\\">\\r\\n    <div class=\\\"input-group-append\\\">\\r\\n      <button class=\\\"btn btn-outline-success\\\" type=\\\"button\\\" (click)=\\\"openSelectSearchRaum()\\\">\\r\\n        <fa-icon [icon]=\\\"faBookReader\\\"></fa-icon>\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"form-group row\\\">\\r\\n  <div class=\\\"col input-group mb-1\\\">\\r\\n    <div class=\\\"input-group-prepend\\\">\\r\\n      <span class=\\\"input-group-text\\\">Bez.</span>\\r\\n    </div>\\r\\n    <input  id=\\\"raumBez\\\" readonly type=\\\"text\\\" [value]=\\\"formInventar.Raumbezeichnung\\\"\\r\\n            placeholder=\\\"Raumbezeichnung\\\" class=\\\"form-control\\\">\\r\\n    <div class=\\\"input-group-append\\\">\\r\\n      <button class=\\\"btn btn-outline-success\\\" [disabled]=\\\"!formInventar.ruuid\\\" type=\\\"button\\\" (click)=\\\"openEditRaum()\\\">\\r\\n        <fa-icon [icon]=\\\"faEdit\\\"></fa-icon>\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"form-group row\\\">\\r\\n  <div class=\\\"col input-group mb-1\\\">\\r\\n    <div class=\\\"btn-group input-group\\\" role=\\\"group\\\" aria-label=\\\"First group\\\">\\r\\n      <div class=\\\"input-group-prepend\\\">\\r\\n        <span class=\\\"input-group-text\\\">Bild</span>\\r\\n      </div>\\r\\n      <div class=\\\"input-group-append\\\">\\r\\n        <button type=\\\"button\\\" class=\\\"btn btn-success\\\" (click)=\\\"openCreateRaumImage()\\\"><fa-icon [icon]=\\\"faCamera\\\"></fa-icon>\\r\\n          <span class=\\\"d-none d-md-inline\\\"> anlegen </span>\\r\\n        </button>\\r\\n        <div *ngIf=\\\"raumBilder.length > 0\\\" #raumBilderDrop=\\\"ngbDropdown\\\" class=\\\"btn btn-light\\\" ngbDropdown style=\\\"display: inline-block\\\">\\r\\n          <button\\r\\n            ngbDropdownToggle\\r\\n            id=\\\"dropdownRaumbilder\\\"\\r\\n            class=\\\"btn btn-sm dropdown-toggle\\\"\\r\\n            type=\\\"button\\\" data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\"\\r\\n            aria-expanded=\\\"false\\\"> {{ raumBilder.length }} Fotos\\r\\n          </button>\\r\\n          <div class=\\\"dropdown-menu dropdown-menu-right\\\" [style.width]=\\\"'200px'\\\" ngbDropdownMenu aria-labelledby=\\\"dropdownRaumbilder\\\">\\r\\n            <button *ngFor=\\\"let img of raumBilder; let idx = index\\\"\\r\\n                    (click)=\\\"openRaumbild(idx)\\\"\\r\\n                    class=\\\"dropdown-item\\\" ngbDropdownItem>{{ img.name }}</button>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div *ngIf=\\\"raumPlaene.length > 0\\\" #raumPlaeneDrop=\\\"ngbDropdown\\\" class=\\\"btn btn-light\\\"\\r\\n             ngbDropdown\\r\\n             style=\\\"display: inline-block\\\">\\r\\n          <button\\r\\n            ngbDropdownToggle\\r\\n            id=\\\"dropdownRaumplaene\\\"\\r\\n            class=\\\"btn btn-sm dropdown-toggle\\\"\\r\\n            type=\\\"button\\\" data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\"\\r\\n            aria-expanded=\\\"false\\\"> {{ raumPlaene.length }} Plne\\r\\n          </button>\\r\\n          <div class=\\\"dropdown-menu dropdown-menu-right\\\" ngbDropdownMenu aria-labelledby=\\\"dropdownRaumplaene\\\">\\r\\n            <button *ngFor=\\\"let img of raumPlaene; let idx = index\\\"\\r\\n                    (click)=\\\"openRaumplan(idx)\\\"\\r\\n                    class=\\\"dropdown-item\\\" ngbDropdownItem>{{ img.name }}</button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"row mt-4\\\">\\r\\n  <label for=\\\"raumCode\\\" class=\\\"col\\\"><strong>Inventar-Daten</strong></label>\\r\\n</div>\\r\\n<ng-container *ngIf=\\\"raum; else MissingRaum\\\">\\r\\n  <div class=\\\"form-group row\\\">\\r\\n      <div class=\\\"col input-group mb-1\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">BCode</span>\\r\\n        </div>\\r\\n        <input id=\\\"elmBarcode\\\" class=\\\"form-control\\\" type=\\\"text\\\" aria-label=\\\"Barcode\\\"\\r\\n               required #invBarcode readonly\\r\\n               [ngClass]=\\\"{'bg-danger': waitingForNewInventarBarcode || waitingForInventarData }\\\"\\r\\n               [attr.value]=\\\"formInventar.Barcode\\\"\\r\\n               [placeholder]=\\\"!waitingForNewInventarBarcode ? 'Inventar-Barcode ...' : 'Warte auf Inventar-Barcode ...'\\\">\\r\\n        <div class=\\\"input-group-append\\\">\\r\\n          <button class=\\\"btn btn-outline-success\\\" type=\\\"button\\\" (click)=\\\"openScanner(invBarcode)\\\">\\r\\n            <fa-icon [icon]=\\\"faBarcode\\\"></fa-icon>\\r\\n          </button>\\r\\n        </div>\\r\\n      </div>\\r\\n  </div>\\r\\n  <ngb-alert *ngIf=\\\"waitingForInventarData\\\" type=\\\"danger\\\" (close)=\\\"clearFormInventar()\\\">\\r\\n    Warte auf Artikelzuweisung fr neuen Inventar-Barcode: <b>{{ formInventar.Barcode }}</b><br>\\r\\n    <i>Sollte der Barcode bekannt sein, knnen Sie die Funktion reIndexBarcodeLookup in den Einstellungen nutzen!</i>\\r\\n  </ngb-alert>\\r\\n  <ngb-alert *ngIf=\\\"waitingForNewInventarBarcode\\\" type=\\\"danger\\\">\\r\\n    Warte auf neuen Inventar-Barcode fr {{ formInventar.Bezeichnung }}\\r\\n  </ngb-alert>\\r\\n\\r\\n  <div class=\\\"form-group row\\\">\\r\\n      <div class=\\\"col input-group mb-1\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">Bez.</span>\\r\\n        </div>\\r\\n        <input id=\\\"elmArtBez\\\" readonly type=\\\"text\\\" [attr.value]=\\\"formInventar.Bezeichnung\\\" class=\\\"form-control\\\" placeholder=\\\"Artikelbezeichnung\\\" aria-label=\\\"Artikelbezeichnung\\\">\\r\\n        <div class=\\\"input-group-append\\\">\\r\\n          <button class=\\\"btn btn-outline-success\\\" type=\\\"button\\\" (click)=\\\"openSelectCreateArtikel()\\\">\\r\\n            <fa-icon [icon]=\\\"faBookReader\\\"></fa-icon>\\r\\n          </button>\\r\\n        </div>\\r\\n      </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"form-group row\\\">\\r\\n    <div class=\\\"col input-group mb-1\\\">\\r\\n      <div class=\\\"input-group-prepend\\\">\\r\\n        <span class=\\\"input-group-text\\\">Typ</span>\\r\\n      </div>\\r\\n      <input  id=\\\"elmArtTyp\\\" type=\\\"text\\\" [attr.value]=\\\"formInventar.Typ\\\" class=\\\"form-control\\\">\\r\\n      <div class=\\\"input-group-append\\\">\\r\\n        <button class=\\\"btn btn-outline-success\\\" [disabled]=\\\"!formInventar.uuid\\\" type=\\\"button\\\" (click)=\\\"openEditInventar()\\\">\\r\\n          <fa-icon [icon]=\\\"faEdit\\\"></fa-icon>\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"form-group row\\\">\\r\\n    <!-- label for=\\\"elmArtTyp\\\" class=\\\"col-2 col-sm-2 col-md-2 col-lg-2 d-none\\\">Bild</label -->\\r\\n    <div class=\\\"col mb-1\\\">\\r\\n\\r\\n      <div class=\\\"btn-toolbar justify-content-between w-100\\\" role=\\\"toolbar\\\" aria-label=\\\"Toolbar with button groups\\\">\\r\\n        <div class=\\\"btn-group input-group\\\" role=\\\"group\\\" aria-label=\\\"First group\\\">\\r\\n          <div class=\\\"input-group-prepend\\\">\\r\\n            <span class=\\\"input-group-text\\\">Bild</span>\\r\\n          </div>\\r\\n          <div class=\\\"input-group-append\\\">\\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-info\\\"\\r\\n                    *ngIf=\\\"artikelImageExists\\\"\\r\\n                    (click)=\\\"openShowArtikelImage()\\\"><fa-icon [icon]=\\\"faImage\\\"></fa-icon>\\r\\n              <span class=\\\"d-none d-md-inline\\\"> anzeigen </span>\\r\\n            </button>\\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-success\\\"\\r\\n                    *ngIf=\\\"artikelImageExists\\\"\\r\\n                    [disabled]=\\\"!formInventar.gcuuid\\\"\\r\\n                    (click)=\\\"openEditArtikelImage()\\\"><fa-icon [icon]=\\\"faEdit\\\"></fa-icon>\\r\\n              <span class=\\\"d-none d-md-inline\\\"> bearbeiten </span>\\r\\n            </button>\\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-success\\\"\\r\\n                    *ngIf=\\\"!artikelImageExists\\\"\\r\\n                    [disabled]=\\\"!formInventar.gcuuid\\\"\\r\\n                    (click)=\\\"openCreateArtikelImage()\\\"><fa-icon [icon]=\\\"faCamera\\\"></fa-icon>\\r\\n              <span class=\\\"d-none d-md-inline\\\"> anlegen </span>\\r\\n            </button>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"btn-group input-group\\\">\\r\\n          <div class=\\\"input-group-prepend\\\">\\r\\n            <div class=\\\"input-group-text\\\" id=\\\"btnGroupAddon2\\\">Kunst</div>\\r\\n          </div>\\r\\n          <div class=\\\"input-group-append\\\">\\r\\n            <button type=\\\"button\\\" class=\\\"btn btn-dark\\\" (click)=\\\"createKunstwerk()\\\"><fa-icon [icon]=\\\"faPlus\\\"></fa-icon>\\r\\n              <span class=\\\"d-none d-md-inline\\\"> anlegen </span></button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</ng-container>\\r\\n<ng-template #MissingRaum>\\r\\n  <ngb-alert [type]=\\\"'danger'\\\" [dismissible]=\\\"false\\\">\\r\\n    Bitte whlen Sie einen Raum aus!\\r\\n  </ngb-alert>\\r\\n</ng-template>\\r\\n\\r\\n<div id=\\\"formBottomDivider\\\" class=\\\"row no-gutters mb-0 border-bottom\\\">\\r\\n  <div id=\\\"inventurTitel\\\" class=\\\"col\\\">\\r\\n    {{ inventur.Titel }}\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div [hidden]=\\\"!manualBCInputEnabled\\\">\\r\\n  <h5>Barcode-Scanning Test</h5>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col\\\">\\r\\n      <h6>Scanner Simulator</h6>\\r\\n      <textarea class=\\\"scanner-detect-ignore\\\" #inputSimulateBarcode></textarea><br>\\r\\n      <button (click)=\\\"simulateScanner()\\\">Barcode senden</button><br>\\r\\n    </div>\\r\\n    <div class=\\\"col\\\">\\r\\n      <app-scannerdetection (scanned)=\\\"handleScanData($event)\\\" [config]=\\\"scanDetectorConfig\\\">\\r\\n        <h6>Scan-Detector Barcode</h6>\\r\\n        <textarea #input2 [ngClass]=\\\"lastScanDetectClass\\\"></textarea><br>\\r\\n        (Zeit: {{ lastScanDetectTime | date:'hh:mm:ss' }})\\r\\n      </app-scannerdetection>\\r\\n    </div>\\r\\n    <div class=\\\"d-none\\\">{{ formInventar | json }}</div>\\r\\n  </div>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-12\\\">\\r\\n      <textarea style=\\\"height:90vh;width:90vw\\\" class=\\\"bcRawInput\\\" #rawInputBarcodes></textarea><br>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<audio *ngIf=\\\"beepSuccessSrc\\\" id=\\\"beepSuccess\\\" [src]=\\\"beepSuccessSrc\\\" autoPlay=\\\"autoplay\\\" [muted]=\\\"'muted'\\\"></audio>\\r\\n<audio *ngIf=\\\"beepErrorSrc\\\" id=\\\"beepError\\\" [src]=\\\"beepErrorSrc\\\" autoPlay=\\\"autoplay\\\" [muted]=\\\"'muted'\\\"></audio>\\r\\n\"","export default \"<div class=\\\"blobs-overlay\\\" *ngIf=\\\"blobAlert && useOverlay === 1\\\">\\r\\n  <div class=\\\"blobs-container\\\">\\r\\n    <ng-container [ngSwitch]=\\\"blobAlert\\\">\\r\\n      <div class=\\\"blob red animate\\\" *ngSwitchCase=\\\"'danger'\\\"></div>\\r\\n      <div class=\\\"blob green animate\\\" *ngSwitchCase=\\\"'success'\\\"></div>\\r\\n    </ng-container>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"blobs-overlay\\\" *ngIf=\\\"blobAlert && useOverlay === 2\\\">\\r\\n  <div class=\\\"blobs-container\\\">\\r\\n    <ng-container [ngSwitch]=\\\"blobAlert\\\">\\r\\n      <div class=\\\"blob red animate\\\" *ngSwitchCase=\\\"'danger'\\\"></div>\\r\\n      <div class=\\\"blob green animate\\\" *ngSwitchCase=\\\"'success'\\\"></div>\\r\\n    </ng-container>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"modal-header\\\">\\r\\n  <h6 class=\\\"modal-title\\\">Barcodes-Batchverarbeitung</h6>\\r\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <ng-container *ngIf=\\\"loadingShow\\\">\\r\\n    <strong>Lade {{ loadingTotal }} Barcodes</strong>\\r\\n    <p *ngIf=\\\"loadingTotal\\\">\\r\\n      <ngb-progressbar\\r\\n        [type]=\\\"loadingType\\\"\\r\\n        [value]=\\\"loadingPercent\\\"\\r\\n        [striped]=\\\"loadingAnimated\\\"\\r\\n        [animated]=\\\"true\\\"><i>\\r\\n      {{ loadingCurrent }} von {{ loadingTotal }}\\r\\n    </i></ngb-progressbar></p>\\r\\n  </ng-container>\\r\\n\\r\\n  <div class=\\\"card\\\">\\r\\n    <div class=\\\"card-body\\\">\\r\\n      <h5 class=\\\"card-title\\\">Raum {{ raum.Raum}} {{ raum.Raumbezeichnung }}</h5>\\r\\n      <p class=\\\"card-text\\\" *ngIf=\\\"raum\\\">\\r\\n        <app-progressbar [shortTitle]=\\\"'Raum'\\\"  [title]=\\\"'Fortschrittsanzeige Raum'\\\"\\r\\n                         [value]=\\\"raumProgress.done\\\"\\r\\n                         [total]=\\\"raumProgress.total\\\">\\r\\n        </app-progressbar>\\r\\n      </p>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"scanResultHistory.length > 0\\\">\\r\\n    <hr class=\\\"mt-3\\\">\\r\\n    <div *ngIf=\\\"false\\\" class=\\\"w-100 text-right\\\">\\r\\n      <button class=\\\"btn btn-secondary btn-sm\\\" (click)=\\\"clearHistory()\\\">clear history</button>\\r\\n    </div>\\r\\n\\r\\n    <h5>Inventar: {{ scanResultHistory.length }} </h5>\\r\\n    <div *ngFor=\\\"let item of scanResultHistory\\\">\\r\\n      <div class=\\\"card mt-2\\\">\\r\\n        <div class=\\\"card-body\\\" style=\\\"padding:.5rem\\\">\\r\\n          <h5 class=\\\"card-title\\\">{{ item.result.barcode }}</h5>\\r\\n\\r\\n          <div *ngIf=\\\"item.image && item.image.data_url\\\" class=\\\"float-right\\\">\\r\\n            <img [src]=\\\"item.image.data_url\\\" style=\\\"max-width:100%;max-height:50px\\\">\\r\\n          </div>\\r\\n\\r\\n          <p class=\\\"card-text\\\">\\r\\n            <span class=\\\"font-weight-bold\\\">{{ item.typToString }}:</span>{{ item.infos }}\\r\\n          </p>\\r\\n          <p *ngIf=\\\"false\\\">\\r\\n            {{ item | json }}\\r\\n          </p>\\r\\n\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"btn-group w-100\\\" *ngIf=\\\"item.typ === typeofLookupInventar;else elseNoInv\\\">\\r\\n          <button class=\\\"btn btn-success btn-sm col-6\\\" (click)=\\\"applyResult(item)\\\"><fa-icon [icon]=\\\"faCheck\\\"></fa-icon></button>\\r\\n          <button class=\\\"btn btn-danger btn-sm col-6\\\" (click)=\\\"removeResult(item)\\\"><fa-icon [icon]=\\\"faRemove\\\"></fa-icon></button>\\r\\n        </div>\\r\\n        <div class=\\\"btn-group w-100\\\" #elseNoInv>\\r\\n          <ngb-alert type=\\\"error\\\">\\r\\n          Fehler: Dies ist kein existierender Inventar-Barcode!\\r\\n          </ngb-alert>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <div *ngIf=\\\"scanResultAssigned.length > 0\\\">\\r\\n    <hr class=\\\"mt-3\\\">\\r\\n    <h5>Zugewiesenes Inventar: {{ scanResultAssigned.length }} </h5>\\r\\n\\r\\n    <div *ngFor=\\\"let item of scanResultAssigned\\\">\\r\\n      <div class=\\\"card mt-2\\\">\\r\\n        <div class=\\\"card-body\\\" style=\\\"padding:.5rem\\\">\\r\\n          <h5 class=\\\"card-title\\\">{{ item.result.barcode }}</h5>\\r\\n\\r\\n          <div *ngIf=\\\"item.image && item.image.data_url\\\" class=\\\"float-right\\\">\\r\\n            <img [src]=\\\"item.image.data_url\\\" style=\\\"max-width:100%;max-height:50px\\\">\\r\\n          </div>\\r\\n\\r\\n          <p class=\\\"card-text\\\">\\r\\n            <span class=\\\"font-weight-bold\\\">{{ item.typToString }}:</span>{{ item.infos }}\\r\\n          </p>\\r\\n          <p *ngIf=\\\"false\\\">\\r\\n            {{ item | json }}\\r\\n          </p>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"activeModal.close('Close click')\\\">Close</button>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\">Artikelfoto erstellen</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <!-- You can now use angular-cropper component in app.component.html -->\\r\\n  <input style=\\\"display:none\\\" type=\\\"file\\\" accept=\\\"image/*\\\" #inputUploadFile (change)=\\\"onInputImageFile($event, inputUploadFile)\\\" />\\r\\n  <input style=\\\"display:none\\\" type=\\\"file\\\"accept=\\\"image/*\\\" #inputUploadImage capture=\\\"camera\\\" (change)=\\\"onInputImageFile($event, inputUploadImage)\\\" />\\r\\n  <canvas id=\\\"prepareImgCanvas\\\" #prepareImgCanvas style=\\\"display:none;\\\"></canvas>\\r\\n\\r\\n  <div class=\\\"editor\\\" *ngIf=\\\"imageUrl\\\">\\r\\n    <div class=\\\"canvas\\\">\\r\\n      <angular-cropper\\r\\n          #angularCropper\\r\\n          *ngIf=\\\"imageUrl\\\"\\r\\n          [cropperOptions]=\\\"config\\\"\\r\\n          [imageUrl]=\\\"imageUrl\\\">\\r\\n      </angular-cropper>\\r\\n      <!--\\r\\n      (cropstart)=\\\"cropStart($event)\\\"\\r\\n      (crop)=\\\"onCrop($event)\\\"\\r\\n      (cropmove)=\\\"cropMove($event)\\\"\\r\\n      (cropend)=\\\"cropEnd($event)\\\"\\r\\n      (ready)=\\\"onCropperReady($event)\\\"\\r\\n      -->\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <div class=\\\"toolbar-cropend\\\" *ngIf=\\\"cropStatus === 5\\\">\\r\\n      <button class=\\\"btn btn-sm btn-success btn-icon-cirular\\\" (click)=\\\"crop()\\\"><fa-icon [icon]=\\\"faCheck\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-danger btn-icon-cirular\\\" (click)=\\\"cropReset()\\\"><fa-icon [icon]=\\\"faBan\\\"></fa-icon></button>\\r\\n    </div>\\r\\n    <div class=\\\"toolbar btn-group btn-group-sm rounded\\\">\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"setDragModeToMove()\\\"><fa-icon [icon]=\\\"faMove\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"setDragModeToCrop()\\\"><fa-icon [icon]=\\\"faCrop\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"zoomIn()\\\"><fa-icon [icon]=\\\"faSearchPlus\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"zoomOut()\\\"><fa-icon [icon]=\\\"faSearchMinus\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"rotateLeft()\\\"><fa-icon [icon]=\\\"faRotateLeft\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"rotateRight()\\\"><fa-icon [icon]=\\\"faRotateRight\\\"></fa-icon></button>\\r\\n    </div>\\r\\n  </div>\\r\\n  <img *ngIf=\\\"previewImgUrl\\\" [src]=\\\"previewImgUrl\\\" class=\\\"mt-1\\\" style=\\\"max-width:100%; max-height:150px;\\\"/>\\r\\n  <p class=\\\"d-none\\\">create-artikel-image works!</p>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <div class=\\\"btn-toolbar\\\">\\r\\n    <div class=\\\"btn-group mr-5\\\">\\r\\n      <button class=\\\"btn btn-info\\\" (click)=\\\"openInputUploadFile()\\\">\\r\\n        <fa-icon [icon]=\\\"faUpload\\\"></fa-icon>\\r\\n        <span class=\\\"d-none d-md-inline\\\">Upload</span>\\r\\n      </button>\\r\\n      <button class=\\\"btn btn-info\\\" (click)=\\\"openInputUploadImage()\\\">\\r\\n        <fa-icon [icon]=\\\"faCamera\\\"></fa-icon>\\r\\n        <span class=\\\"d-none d-md-inline\\\">Photo</span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"btn-group\\\">\\r\\n\\r\\n      <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" (click)=\\\"close()\\\">\\r\\n        <fa-icon [icon]=\\\"faBan\\\"></fa-icon>\\r\\n        Abbr<span class=\\\"d-none d-md-inline\\\">echen</span><span class=\\\"d-inline d-md-none\\\">.</span>\\r\\n      </button>\\r\\n      <button type=\\\"button\\\" class=\\\"btn btn-success\\\" (click)=\\\"save()\\\" *ngIf=\\\"imageUrl\\\">\\r\\n        <fa-icon [icon]=\\\"faSave\\\"></fa-icon>\\r\\n        <span class=\\\"d-none d-md-inline\\\">Fertig</span>\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\">Raumfoto erstellen</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <!-- You can now use angular-cropper component in app.component.html -->\\r\\n  <input style=\\\"display:none\\\" type=\\\"file\\\" accept=\\\"image/*\\\" #inputUploadFile (change)=\\\"onInputImageFile($event, inputUploadFile)\\\" />\\r\\n  <input style=\\\"display:none\\\" type=\\\"file\\\"accept=\\\"image/*\\\" #inputUploadImage capture=\\\"camera\\\" (change)=\\\"onInputImageFile($event, inputUploadImage)\\\" />\\r\\n  <canvas id=\\\"prepareImgCanvas\\\" #prepareImgCanvas style=\\\"display:none;\\\"></canvas>\\r\\n\\r\\n  <div class=\\\"editor\\\" *ngIf=\\\"imageUrl\\\">\\r\\n    <div class=\\\"canvas\\\">\\r\\n      <angular-cropper\\r\\n        #angularCropper\\r\\n        *ngIf=\\\"imageUrl\\\"\\r\\n        [cropperOptions]=\\\"config\\\"\\r\\n        [imageUrl]=\\\"imageUrl\\\">\\r\\n      </angular-cropper>\\r\\n      <!--\\r\\n      (cropstart)=\\\"cropStart($event)\\\"\\r\\n      (crop)=\\\"onCrop($event)\\\"\\r\\n      (cropmove)=\\\"cropMove($event)\\\"\\r\\n      (cropend)=\\\"cropEnd($event)\\\"\\r\\n      (ready)=\\\"onCropperReady($event)\\\"\\r\\n      -->\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <div class=\\\"toolbar-cropend\\\" *ngIf=\\\"cropStatus === 5\\\">\\r\\n      <button class=\\\"btn btn-sm btn-success btn-icon-cirular\\\" (click)=\\\"crop()\\\"><fa-icon [icon]=\\\"faCheck\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-danger btn-icon-cirular\\\" (click)=\\\"cropReset()\\\"><fa-icon [icon]=\\\"faBan\\\"></fa-icon></button>\\r\\n    </div>\\r\\n    <div class=\\\"toolbar btn-group btn-group-sm rounded\\\">\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"setDragModeToMove()\\\"><fa-icon [icon]=\\\"faMove\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"setDragModeToCrop()\\\"><fa-icon [icon]=\\\"faCrop\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"zoomIn()\\\"><fa-icon [icon]=\\\"faSearchPlus\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"zoomOut()\\\"><fa-icon [icon]=\\\"faSearchMinus\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"rotateLeft()\\\"><fa-icon [icon]=\\\"faRotateLeft\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"rotateRight()\\\"><fa-icon [icon]=\\\"faRotateRight\\\"></fa-icon></button>\\r\\n    </div>\\r\\n  </div>\\r\\n  <img *ngIf=\\\"previewImgUrl\\\" [src]=\\\"previewImgUrl\\\" class=\\\"mt-1\\\" style=\\\"max-width:100%; max-height:150px;\\\"/>\\r\\n  <p class=\\\"d-none\\\">create-raum-image works!</p>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <div class=\\\"btn-toolbar\\\">\\r\\n    <div class=\\\"btn-group mr-5\\\">\\r\\n      <button class=\\\"btn btn-info\\\" (click)=\\\"openInputUploadFile()\\\">\\r\\n        <fa-icon [icon]=\\\"faUpload\\\"></fa-icon>\\r\\n        <span class=\\\"d-none d-md-inline\\\"> Upload </span>\\r\\n      </button>\\r\\n      <button class=\\\"btn btn-info\\\" (click)=\\\"openInputUploadImage()\\\">\\r\\n        <fa-icon [icon]=\\\"faCamera\\\"></fa-icon>\\r\\n        <span class=\\\"d-none d-md-inline\\\"> Photo </span>\\r\\n      </button>\\r\\n    </div>\\r\\n    <div class=\\\"btn-group\\\">\\r\\n\\r\\n      <button type=\\\"button\\\" class=\\\"btn btn-secondary\\\" (click)=\\\"close()\\\">\\r\\n        <fa-icon [icon]=\\\"faBan\\\"></fa-icon>\\r\\n        Abbr<span class=\\\"d-none d-md-inline\\\">echen</span></button>\\r\\n      <button type=\\\"button\\\" class=\\\"btn btn-success\\\" (click)=\\\"save()\\\" *ngIf=\\\"imageUrl\\\">\\r\\n        <fa-icon [icon]=\\\"faSave\\\"></fa-icon>\\r\\n        <span class=\\\"d-none d-md-inline\\\">Fertig</span></button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-header p-0\\\" style=\\\"padding:0.1rem\\\">\\r\\n  <div class=\\\"btn-group row no-gutters w-100\\\">\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-danger col-2\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\" id=\\\"modal-basic-title\\\">Inventar bearbeiten</h4>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <form #inventarForm=\\\"ngForm\\\">\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"editInventarBarcode\\\" class=\\\"d-none\\\">Barcode: </label>\\r\\n      <div class=\\\"input-group mb-1\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">BCode</span>\\r\\n        </div>\\r\\n        <input readonly id=\\\"editInventarBarcode\\\" #editInventarBarcode (change)=\\\"formValidate()\\\" class=\\\"form-control formcontrol-edit-barcode\\\" (paste)=\\\"$event.preventDefault()\\\" placeholder=\\\"Barcode\\\"\\r\\n               name=\\\"code\\\"\\r\\n               [(ngModel)]=\\\"inventarInput.code\\\"\\r\\n               #code=\\\"ngModel\\\"\\r\\n        >\\r\\n        <div class=\\\"input-group-append\\\">\\r\\n          <button class=\\\"btn btn-outline-success\\\" type=\\\"button\\\" (click)=\\\"openScanner(editInventarBarcode)\\\"><fa-icon [icon]=\\\"faCamera\\\"></fa-icon></button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\" [ngClass]=\\\"{\\r\\n        'has-warning': false,\\r\\n        'has-info': false\\r\\n        }\\\">\\r\\n      <label for=\\\"Bezeichnung\\\" class=\\\"d-none\\\">Bez.: </label>\\r\\n      <div class=\\\"input-group mb-1\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">Bezg</span>\\r\\n        </div>\\r\\n        <input id=\\\"Bezeichnung\\\" class=\\\"form-control\\\" placeholder=\\\"Bezeichnung\\\"\\r\\n               name=\\\"Bezeichnung\\\"\\r\\n               [(ngModel)]=\\\"inventarInput.Bezeichnung\\\"\\r\\n               #bezeichnung=\\\"ngModel\\\"\\r\\n        >\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"Hersteller\\\" class=\\\"d-none\\\">Hersteller:</label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">HST</span>\\r\\n        </div>\\r\\n        <input\\r\\n          id=\\\"Hersteller\\\"\\r\\n          name=\\\"Hersteller\\\"\\r\\n          placeholder=\\\"Hersteller\\\"\\r\\n          type=\\\"text\\\"\\r\\n          class=\\\"form-control\\\"\\r\\n          [(ngModel)]=\\\"inventarInput.Hersteller\\\"\\r\\n          [ngbTypeahead]=\\\"search\\\"\\r\\n        >\\r\\n        <!--\\r\\n          (selectItem)=\\\"onSelectHersteller($event)\\\"\\r\\n          [inputFormatter]=\\\"formatter\\\"\\r\\n          [resultFormatter]=\\\"formatter\\\"\\r\\n          (change)=\\\"onChangeHersteller($event)\\\"\\r\\n          (focus)=\\\"focus$.next($any($event).target.value)\\\"\\r\\n          (click)=\\\"click$.next($any($event).target.value)\\\"\\r\\n          #instance=\\\"ngbTypeahead\\\"\\r\\n        / -->\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"Gruppe\\\" class=\\\"d-none\\\">Gruppe: </label>\\r\\n\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">GRP</span>\\r\\n        </div>\\r\\n        <input id=\\\"Gruppe\\\" class=\\\"form-control\\\" placeholder=\\\"Gruppe\\\"\\r\\n               name=\\\"Gruppe\\\"\\r\\n               [(ngModel)]=\\\"inventarInput.Gruppe\\\"\\r\\n               [ngbTypeahead]=\\\"searchGruppen\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n        >\\r\\n        <!--\\r\\n               (change)=\\\"onChangeGruppe($event)\\\"\\r\\n               (selectItem)=\\\"onSelectGruppe($event)\\\"\\r\\n               [inputFormatter]=\\\"formatter\\\"\\r\\n               [resultFormatter]=\\\"formatter\\\"\\r\\n               (focus)=\\\"focusGrp$.next($any($event).target.value)\\\"\\r\\n               (click)=\\\"clickGrp$.next($any($event).target.value)\\\"\\r\\n               #instanceGrp=\\\"ngbTypeahead\\\"\\r\\n        -->\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"Kategorie\\\" class=\\\"d-none\\\">Kategorie: </label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">KTG</span>\\r\\n        </div>\\r\\n        <input id=\\\"Kategorie\\\" class=\\\"form-control\\\" placeholder=\\\"Kategorie\\\"\\r\\n               name=\\\"Kategorie\\\"\\r\\n               [(ngModel)]=\\\"inventarInput.Kategorie\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n        >\\r\\n        <!--\\r\\n               (change)=\\\"onChange($event)\\\"\\r\\n               (selectItem)=\\\"onSelectKategorie($event)\\\"\\r\\n               [ngbTypeahead]=\\\"searchKategorien\\\"\\r\\n               [inputFormatter]=\\\"formatter\\\"\\r\\n               [resultFormatter]=\\\"formatter\\\"\\r\\n               (focus)=\\\"focusKtg$.next($any($event).target.value)\\\"\\r\\n               (click)=\\\"clickKtg$.next($any($event).target.value)\\\"\\r\\n               #instanceKtg=\\\"ngbTypeahead\\\"\\r\\n        -->\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"typ\\\" class=\\\"d-none\\\">Artikel-Typ: </label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">TYP</span>\\r\\n        </div>\\r\\n        <input id=\\\"typ\\\" class=\\\"form-control\\\" placeholder=\\\"Artikel-Typ\\\"\\r\\n               name=\\\"typ\\\"\\r\\n               [(ngModel)]=\\\"inventarInput.Typ\\\"\\r\\n               [ngbTypeahead]=\\\"searchTypen\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n        >\\r\\n        <!--\\r\\n               (change)=\\\"onChange($event)\\\"\\r\\n               (selectItem)=\\\"onSelectTypen($event)\\\"\\r\\n               [inputFormatter]=\\\"formatter\\\"\\r\\n               [resultFormatter]=\\\"formatter\\\"\\r\\n               (focus)=\\\"focusTyp$.next($any($event).target.value)\\\"\\r\\n               (click)=\\\"clickTyp$.next($any($event).target.value)\\\"\\r\\n               #instanceTyp=\\\"ngbTypeahead\\\"\\r\\n        -->\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"Groesse\\\" class=\\\"d-none\\\">Abmessungen: </label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">Gre</span>\\r\\n        </div>\\r\\n        <input id=\\\"Groesse\\\" class=\\\"form-control\\\" placeholder=\\\"Groesse\\\"\\r\\n               name=\\\"Groesse\\\"\\r\\n               [(ngModel)]=\\\"inventarInput.Groesse\\\"\\r\\n               [ngbTypeahead]=\\\"searchGroessen\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n        >\\r\\n        <!--\\r\\n               (change)=\\\"onChange($event)\\\"\\r\\n               (selectItem)=\\\"onSelectGroessen($event)\\\"\\r\\n               [inputFormatter]=\\\"formatter\\\"\\r\\n               [resultFormatter]=\\\"formatter\\\"\\r\\n               (focus)=\\\"focusGrs$.next($any($event).target.value)\\\"\\r\\n               (click)=\\\"clickGrs$.next($any($event).target.value)\\\"\\r\\n               #instanceGrs=\\\"ngbTypeahead\\\"\\r\\n        -->\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"Farbe\\\" class=\\\"d-none\\\">Farbe: </label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">Farbe</span>\\r\\n        </div>\\r\\n        <input id=\\\"Farbe\\\" class=\\\"form-control\\\" placeholder=\\\"Farbe\\\"\\r\\n               name=\\\"Farbe\\\"\\r\\n               [(ngModel)]=\\\"inventarInput.Farbe\\\"\\r\\n               [ngbTypeahead]=\\\"searchFarben\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n               >\\r\\n        <!--\\r\\n               (change)=\\\"onChange($event)\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n               (selectItem)=\\\"onSelectFarben($event)\\\"\\r\\n               [inputFormatter]=\\\"formatter\\\"\\r\\n               [resultFormatter]=\\\"formatter\\\"\\r\\n               (focus)=\\\"focusFa$.next($any($event).target.value)\\\"\\r\\n               (click)=\\\"clickFa$.next($any($event).target.value)\\\"\\r\\n               #instanceFa=\\\"ngbTypeahead\\\"\\r\\n        -->\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"Farbe\\\" class=\\\"d-none\\\">Zustand: </label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">Zustand</span>\\r\\n        </div>\\r\\n        <input id=\\\"Zustand\\\" class=\\\"form-control\\\" placeholder=\\\"Zustand\\\"\\r\\n               name=\\\"Zustand\\\"\\r\\n               [(ngModel)]=\\\"inventarInput.Zustand\\\">\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </form>\\r\\n</div>\\r\\n<ngb-alert [type]=\\\"'danger'\\\" [dismissible]=\\\"false\\\" *ngFor=\\\"let vError of validationErrors\\\">\\r\\n  {{ vError }}\\r\\n</ngb-alert>\\r\\n\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"onSubmit($event)\\\">Inventar aktualisieren</button>\\r\\n  <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"activeModal.close('Close click')\\\">Close</button>\\r\\n  <div *ngIf=\\\"formError\\\" class=\\\"alert-danger\\\"> {{formError}} </div>\\r\\n  <div>\\r\\n    <ngb-pagination [collectionSize]=\\\"collectionSize\\\" [(page)]=\\\"page\\\" [maxSize]=\\\"maxSize\\\" [pageSize]=\\\"pageSize\\\" (pageChange)=\\\"onPageChange(page)\\\"></ngb-pagination>\\r\\n  </div>\\r\\n  <div class=\\\"row no-gutters\\\">\\r\\n    <div class=\\\"card col-sm-6\\\" *ngFor=\\\"let item of listExistingArticlePage\\\">\\r\\n      <img *ngIf=\\\"item.img_id\\\" class=\\\"card-img-top\\\" src=\\\"...\\\" alt=\\\"\\\">\\r\\n      <div class=\\\"card-body \\\">\\r\\n        <h6 class=\\\"card-title\\\">{{ item.Bezeichnung }}</h6>\\r\\n        <div *ngIf=\\\"item.Hersteller\\\"><small>Hst: {{ item.Hersteller }}</small></div>\\r\\n        <div *ngIf=\\\"item.Gruppe\\\"><small>Grp: {{ item.Gruppe }}</small></div>\\r\\n        <div *ngIf=\\\"item.Typ\\\"><small>Typ: {{ item.Typ }}</small></div>\\r\\n        <div *ngIf=\\\"item.Kategorie\\\"><small>Ktg: {{ item.Kategorie }}</small></div>\\r\\n        <div *ngIf=\\\"item.Farbe || item.Groesse\\\"><small>{{ item.Farbe }} {{ item.Groesse }}</small></div>\\r\\n        <div *ngIf=\\\"item.inventar_count\\\"><small>{{ item.inventar_count }}</small></div>\\r\\n      </div>\\r\\n      <div class=\\\"card-footer text-center\\\">\\r\\n        <button (click)=\\\"applyItemAsInput(item)\\\" class=\\\"btn btn-sm btn-info\\\">Als Vorlage bernehmen</button>\\r\\n        <button (click)=\\\"applyItemAsArtikel(item)\\\" class=\\\"btn btn-sm btn-primary\\\">Artikel bernehmen</button>\\r\\n      </div>\\r\\n    </div><!-- Close: div.card -->\\r\\n  </div><!-- Close: div.row -->\\r\\n</div>\\r\\n\\r\\n<!-- button class=\\\"btn btn-lg btn-outline-primary\\\" (click)=\\\"open(content)\\\">Raum zuordnen</button -->\\r\\n\\r\\n<hr>\\r\\n\\r\\n<pre>{{closeResult}}</pre>\\r\\n\"","export default \"<div class=\\\"modal-header p-0\\\" style=\\\"padding:0.1rem\\\">\\r\\n  <div class=\\\"btn-group row no-gutters w-100\\\">\\r\\n    <div class=\\\"col-10\\\"></div>\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-danger col-2\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\" id=\\\"modal-basic-title\\\">Raum bearbeiten</h4>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <form #raumForm=\\\"ngForm\\\">\\r\\n\\r\\n    <div class=\\\"form-group\\\" [ngClass]=\\\"{\\r\\n        'has-error': raum.dirty && (raum.invalid || raumExistsStatus === 1),\\r\\n        'has-info': raum.dirty && raumExistsStatus === -1\\r\\n        }\\\">\\r\\n      <label for=\\\"dateOfBirth\\\" class=\\\"d-none\\\">Raum-Nr.: </label>\\r\\n      <div class=\\\"input-group mb-1\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">RNr</span>\\r\\n        </div>\\r\\n        <input id=\\\"Raum\\\" class=\\\"form-control\\\" placeholder=\\\"Raumnr\\\"\\r\\n               name=\\\"Raum\\\"\\r\\n               [(ngModel)]=\\\"raumInput.Raum\\\"\\r\\n               #raum=\\\"ngModel\\\"\\r\\n               (change)=\\\"checkIfRaumExists()\\\"\\r\\n               required\\r\\n        >\\r\\n      </div>\\r\\n      <div *ngIf=\\\"raum.valid\\\">\\r\\n        <div *ngIf=\\\"raumExistsStatus===-1\\\" class=\\\"help-block\\\">Raumangabe wird geprft</div>\\r\\n        <div *ngIf=\\\"raumExistsStatus===1\\\" class=\\\"help-block\\\">Raum existiert bereits</div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\" [ngClass]=\\\"{\\r\\n        'has-warning': bezeichnung.dirty && (bezeichnung.invalid || bezeichnungExistsStatus === 1),\\r\\n        'has-info': bezeichnung.dirty && bezeichnungExistsStatus === -1\\r\\n        }\\\">\\r\\n      <label for=\\\"Bezeichnung\\\" class=\\\"d-none\\\">Raum-Bez.: </label>\\r\\n      <div class=\\\"input-group mb-1\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">Bezg</span>\\r\\n        </div>\\r\\n        <input id=\\\"Bezeichnung\\\" class=\\\"form-control\\\" placeholder=\\\"Raumbezeichnung\\\"\\r\\n               name=\\\"Bezeichnung\\\"\\r\\n               [(ngModel)]=\\\"raumInput.Raumbezeichnung\\\"\\r\\n               #bezeichnung=\\\"ngModel\\\"\\r\\n               (change)=\\\"checkIfRaumbezeichnungExists()\\\"\\r\\n        >\\r\\n      </div>\\r\\n      <div *ngIf=\\\"bezeichnung.valid\\\">\\r\\n        <div *ngIf=\\\"bezeichnungExistsStatus===-1\\\" class=\\\"help-block\\\">Bezeichnung wird geprft</div>\\r\\n        <div *ngIf=\\\"bezeichnungExistsStatus===1\\\" class=\\\"help-block\\\">Es existiert bereits ein Raum mit dieser Bezeichnung</div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"Etage\\\" class=\\\"d-none\\\">Etage: </label>\\r\\n      <div class=\\\"input-group mb-1\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">Etage</span>\\r\\n        </div>\\r\\n        <input id=\\\"Etage\\\" class=\\\"form-control\\\" placeholder=\\\"Etage\\\"\\r\\n               name=\\\"Etage\\\"\\r\\n               [(ngModel)]=\\\"raumInput.Etage\\\"\\r\\n               [ngbTypeahead]=\\\"searchEtage\\\"\\r\\n               #etage=\\\"ngModel\\\"\\r\\n               required\\r\\n        >\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\">\\r\\n      <label for=\\\"editRaumBarcode\\\" class=\\\"d-none\\\">Barcode: </label>\\r\\n      <div class=\\\"input-group mb-1\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">BCode</span>\\r\\n        </div>\\r\\n        <input readonly id=\\\"editRaumBarcode\\\" #editRaumBarcode (change)=\\\"formValidate()\\\" class=\\\"form-control formcontrol-xedit-barcode\\\" (paste)=\\\"$event.preventDefault()\\\" placeholder=\\\"Barcode\\\"\\r\\n               name=\\\"code\\\"\\r\\n               [(ngModel)]=\\\"raumInput.code\\\"\\r\\n               #code=\\\"ngModel\\\"\\r\\n        >\\r\\n        <div class=\\\"input-group-append\\\">\\r\\n          <button class=\\\"btn btn-outline-success\\\" type=\\\"button\\\" (click)=\\\"openScanner(editRaumBarcode)\\\"><fa-icon [icon]=\\\"faBarcode\\\"></fa-icon></button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"form-group\\\" *ngIf=\\\"false\\\">\\r\\n      <label for=\\\"dateOfBirth\\\">Datum (Dummy)</label>\\r\\n      <div class=\\\"input-group\\\">\\r\\n        <input id=\\\"dateOfBirth\\\" class=\\\"form-control\\\" placeholder=\\\"yyyy-mm-dd\\\" name=\\\"dp\\\" ngbDatepicker #dp=\\\"ngbDatepicker\\\">\\r\\n        <div class=\\\"input-group-append\\\">\\r\\n          <button class=\\\"btn btn-outline-secondary calendar\\\" (click)=\\\"dp.toggle()\\\" type=\\\"button\\\"></button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n<ngb-alert [type]=\\\"'danger'\\\" [dismissible]=\\\"false\\\" *ngFor=\\\"let vError of validationErrors\\\">\\r\\n  {{ vError }}\\r\\n</ngb-alert>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"onSubmit($event)\\\">Raum aktualisieren</button>\\r\\n  <div *ngIf=\\\"formError\\\" class=\\\"alert-danger\\\"> {{formError}} </div>\\r\\n  formIsValid: {{formIsValid | json }} <br>\\r\\n  raumForm.form.valid: {{ raumForm.form.valid | json }}\\r\\n</div>\\r\\n\\r\\n<!-- button class=\\\"btn btn-lg btn-outline-primary\\\" (click)=\\\"open(content)\\\">Raum zuordnen</button -->\\r\\n\\r\\n<hr>\\r\\n\\r\\n<pre>{{closeResult}}</pre>\\r\\n\"","export default \"<div class=\\\"modal-header p-0\\\" style=\\\"padding:0.1rem\\\">\\r\\n  <div class=\\\"btn-group row no-gutters w-100\\\">\\r\\n    <button class=\\\"btn btn-primary col-10 text-left pl-3\\\" (click)=\\\"showGesamtRestForm()\\\">\\r\\n      <fa-icon [icon]=\\\"faSignOutAlt\\\" class=\\\"mr-3\\\"></fa-icon> Zeige fehlende Rume\\r\\n    </button>\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-danger col-2\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\">Bereits inventarisierte Rume</h4>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n\\r\\n  <table class=\\\"table table-striped\\\">\\r\\n    <thead>\\r\\n    <tr>\\r\\n      <th scope=\\\"col\\\">#</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Bezeichnung\\\">Etage</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Typ\\\">Raum</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Typ\\\">Fertig</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Typ\\\">Prgoress</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Menge\\\">Vorher</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Menge\\\">Nacher</th>\\r\\n    </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n    <tr *ngFor=\\\"let item of raeumeListDone; let rowNr = index\\\">\\r\\n      <th scope=\\\"row\\\">{{ rowNr }}</th>\\r\\n      <th>{{ item.Etage }}</th>\\r\\n      <td><span class=\\\"btn btn-link\\\" (click)=\\\"onSelectRaum(item.uuid)\\\">{{ item.Raum }}</span></td>\\r\\n      <td>\\r\\n        <fa-icon *ngIf=\\\"item.editStatus === 2; else elseInProgress\\\"  [attr.class]=\\\"'text-success'\\\" [icon]=\\\"faCheck\\\"></fa-icon>\\r\\n        <ng-template #elseInProgress><fa-icon [attr.class]=\\\"'text-info'\\\" [icon]=\\\"faInWork\\\"></fa-icon></ng-template>\\r\\n      </td>\\r\\n      <td>\\r\\n        <ng-container [ngSwitch]=\\\"item.statusIconName\\\">\\r\\n          <fa-icon [attr.class]=\\\"'text-danger'\\\" *ngSwitchCase=\\\"'empty'\\\" [icon]=\\\"faEmpty\\\"></fa-icon>\\r\\n          <fa-icon [attr.class]=\\\"'text-warning'\\\" *ngSwitchCase=\\\"'quarter'\\\" [icon]=\\\"faQuarter\\\"></fa-icon>\\r\\n          <fa-icon [attr.class]=\\\"'text-info'\\\" *ngSwitchCase=\\\"'half'\\\" [icon]=\\\"faHalf\\\"></fa-icon>\\r\\n          <fa-icon [attr.class]=\\\"'text-success'\\\" *ngSwitchCase=\\\"'three-quarter'\\\" [icon]=\\\"faThreeQuarter\\\"></fa-icon>\\r\\n          <fa-icon [attr.class]=\\\"'text-success'\\\" *ngSwitchCase=\\\"'full'\\\" [icon]=\\\"faFull\\\"></fa-icon>\\r\\n        </ng-container> {{ item.progress }}%\\r\\n      </td>\\r\\n      <td>{{ item.total }}</td>\\r\\n      <td>{{ item.done }}</td>\\r\\n    </tr>\\r\\n    </tbody>\\r\\n  </table>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-header p-0\\\" style=\\\"padding:0.1rem\\\">\\r\\n  <div class=\\\"btn-group row no-gutters w-100\\\">\\r\\n    <button class=\\\"btn btn-primary col-10 text-left pl-3\\\" (click)=\\\"showGesamtDoneForm()\\\">\\r\\n      <fa-icon [icon]=\\\"faSignOutAlt\\\" class=\\\"mr-3\\\"></fa-icon> Zeige bereits aufgenommene Rume\\r\\n    </button>\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-danger col-2\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\">Noch nicht inventarisierte Rume</h4>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n\\r\\n  <table class=\\\"table table-striped\\\">\\r\\n    <thead>\\r\\n    <tr>\\r\\n      <th scope=\\\"col\\\">#</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Bezeichnung\\\">Etage</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Typ\\\">Raum</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Typ\\\">Gestarted</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Menge\\\">Vorher</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Menge\\\">Nacher</th>\\r\\n    </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n    <tr *ngFor=\\\"let item of raeumeListDone; let rowNr = index\\\">\\r\\n      <th scope=\\\"row\\\">{{ rowNr + 1 }}</th>\\r\\n      <th>{{ item.Etage }}</th>\\r\\n      <td><span class=\\\"btn btn-link\\\" (click)=\\\"onSelectRaum(item.uuid)\\\">{{ item.Raum }}</span></td>\\r\\n      <td>{{ item.editStatus === 0 ? 'Nein' : 'Ja' }}</td>\\r\\n      <td>{{ item.total }}</td>\\r\\n      <td>{{ item.done }}</td>\\r\\n    </tr>\\r\\n    </tbody>\\r\\n  </table>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\">{{ titel }}</h4>\\r\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <div *ngIf=\\\"false\\\">\\r\\n  numImages: {{ numImages }}\\r\\n  numImgFound: {{ numImgFound }}\\r\\n  numImgLoaded: {{ numImgLoaded }}\\r\\n  numImgFinished: {{ numImgFinished }}\\r\\n  finishedLoading: {{ finishedLoading | json }}\\r\\n  error: {{ error }}\\r\\n  </div>\\r\\n  <ng-template *ngIf=\\\"(!currImg || currImg === null || currImg.loadingStatus !== htmlImageLoadingStatus.Loaded); else ImageBox\\\">\\r\\n    <div *ngIf=\\\"error\\\">{{ error }}</div>\\r\\n    <div *ngIf=\\\"currImg\\\">\\r\\n      <div *ngIf=\\\"currImg.loadingStatus === htmlImageLoadingStatus.Pending\\\">Bild wird vorbereitet!</div>\\r\\n      <div *ngIf=\\\"currImg.loadingStatus === htmlImageLoadingStatus.Loading\\\">Bild wird geladen!</div>\\r\\n      <div *ngIf=\\\"currImg.loadingStatus === htmlImageLoadingStatus.Aborted\\\">Ladevorgang wurde abgebrochen!</div>\\r\\n      <div *ngIf=\\\"currImg.error\\\">{{ currImg.error }}</div>\\r\\n    </div>\\r\\n  </ng-template>\\r\\n  <ng-template #ImageBox>\\r\\n    <h3>{{currImgIdx + 1 }}/{{numImages}} {{ currImg.name }}</h3>\\r\\n    <p *ngIf=\\\"currImg.desc\\\">{{ currImg.desc }}</p>\\r\\n    <div style=\\\"position:relative;text-align:center\\\">\\r\\n      <button class=\\\"btn btn-mini btn-light\\\"\\r\\n              style=\\\"position:absolute;left:10px;top:calc(50% - 1rem);\\\"\\r\\n              (click)=\\\"prev()\\\" *ngIf=\\\"currImgIdx > 0\\\">\\r\\n        <fa-icon [icon]=\\\"faAngleLeft\\\"></fa-icon>\\r\\n      </button>\\r\\n      <button class=\\\"btn btn-mini btn-light\\\"\\r\\n              style=\\\"position:absolute;right:10px;top:calc(50% - 1rem);\\\"\\r\\n              (click)=\\\"next()\\\" *ngIf=\\\"currImgIdx < (numImages - 1)\\\">\\r\\n        <fa-icon [icon]=\\\"faAngleRight\\\"></fa-icon>\\r\\n      </button>\\r\\n      <button  class=\\\"btn btn-mini btn-danger\\\"\\r\\n               style=\\\"position:absolute;left:calc(50% - .5rem);bottom:.5rem;\\\"\\r\\n               (click)=\\\"delete(currImg.uuid)\\\">\\r\\n        <fa-icon [icon]=\\\"faTrashAlt\\\"></fa-icon>\\r\\n      </button>\\r\\n      <img [src]=\\\"currImg.img.src\\\" style=\\\"max-width:99%;max-height:99%;margin-left:auto;margin-right:auto\\\">\\r\\n      <div class=\\\"carousel-caption\\\" style=\\\"position:absolute;bottom:2rem;text-align:center\\\">\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <ngb-carousel *ngIf=\\\"false && finishedLoading && numImgLoaded > 0\\\">\\r\\n      <ng-template *ngFor=\\\"let item of images; let i = index\\\" ngbSlide>\\r\\n        <ng-container *ngIf=\\\"item !== null && item.img && item.loadingStatus===htmlImageLoadingStatus.Loaded\\\">\\r\\n          <div class=\\\"picsum-img-wrapper\\\">\\r\\n            <img [src]=\\\"item.img.src\\\" class=\\\"slide-img-by-dataurl\\\" alt=\\\"{{ item.titel }}\\\">\\r\\n          </div>\\r\\n          <div class=\\\"carousel-caption\\\">\\r\\n            <h3>{{ item.name }}</h3>\\r\\n            <p *ngIf=\\\"item.desc\\\">{{ item.desc }}}</p>\\r\\n          </div>\\r\\n        </ng-container>\\r\\n      </ng-template>\\r\\n    </ngb-carousel>\\r\\n  </ng-template>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-header p-0\\\" style=\\\"padding:0.1rem\\\">\\r\\n  <div class=\\\"btn-group row no-gutters w-100\\\">\\r\\n    <button class=\\\"btn btn-primary col-10 text-left pl-3\\\" (click)=\\\"showRaumRestForm($event)\\\">\\r\\n      <fa-icon [icon]=\\\"faSignOutAlt\\\" class=\\\"mr-3\\\"></fa-icon> Zeige fehlendes Inventar\\r\\n    </button>\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-danger col-2\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\">Bereits inventarisiert</h4>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n\\r\\n  <table class=\\\"table table-striped\\\">\\r\\n    <thead>\\r\\n    <tr>\\r\\n      <th scope=\\\"col\\\">#</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Bezeichnung\\\">Bezeichnung</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Typ\\\">Typ</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Menge\\\">Menge</th>\\r\\n    </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n    <tr *ngFor=\\\"let item of inventarListDone; let rowNr = index\\\">\\r\\n      <th scope=\\\"row\\\">{{ rowNr + 1 }}</th>\\r\\n      <td>{{ item.Bezeichnung }}</td>\\r\\n      <td>{{ item.Typ }}</td>\\r\\n      <td>{{ item.Menge }}</td>\\r\\n    </tr>\\r\\n    </tbody>\\r\\n  </table>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-header p-0\\\" style=\\\"padding:0.1rem\\\">\\r\\n  <div class=\\\"btn-group row no-gutters w-100\\\">\\r\\n    <button class=\\\"btn btn-primary col-10 text-left pl-3\\\" (click)=\\\"showRaumDoneForm($event)\\\">\\r\\n      <fa-icon [icon]=\\\"faSignOutAlt\\\" class=\\\"mr-3\\\"></fa-icon> Zeige zugewiesenes Inventar\\r\\n    </button>\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-danger col-2\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\">Dieses Inventar fehlt noch</h4>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n\\r\\n  <table class=\\\"table table-striped\\\">\\r\\n    <thead>\\r\\n    <tr>\\r\\n      <th scope=\\\"col\\\">#</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Bezeichnung\\\">Bezeichnung</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Typ\\\">Typ</th>\\r\\n      <th scope=\\\"col\\\" sortable=\\\"Menge\\\">Menge</th>\\r\\n    </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n    <tr *ngFor=\\\"let item of inventarListRest; let rowNr = index\\\">\\r\\n      <th scope=\\\"row\\\">{{ rowNr + 1 }}</th>\\r\\n      <td>{{ item.Bezeichnung }}</td>\\r\\n      <td>{{ item.Typ }}</td>\\r\\n      <td>{{ item.Menge }}</td>\\r\\n    </tr>\\r\\n    </tbody>\\r\\n  </table>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-header\\\">\\r\\n  <h6 class=\\\"modal-title\\\">Barcode scannen!</h6>\\r\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <select (change)=\\\"onDeviceSelectChange($event.target.value)\\\">\\r\\n    <option value=\\\"\\\" [selected]=\\\"!currentDevice\\\">No Device Selected</option>\\r\\n    <option *ngFor=\\\"let device of availableDevices\\\" [value]=\\\"device.deviceId\\\"\\r\\n            [selected]=\\\"currentDevice && device.deviceId === currentDevice.deviceId\\\">{{device.label}}</option>\\r\\n  </select>\\r\\n  <div class=\\\"scanner-view-port\\\">\\r\\n    <zxing-scanner\\r\\n      #scanner\\r\\n      [style.height]=\\\"'5rem'\\\"\\r\\n\\r\\n      [torch]=\\\"torchEnabled\\\"\\r\\n      [(device)]=\\\"currentDevice\\\"\\r\\n      (scanSuccess)=\\\"onCodeResult($event)\\\"\\r\\n      [formats]=\\\"formatsEnabled\\\"\\r\\n      [tryHarder]=\\\"tryHarder\\\"\\r\\n      (permissionResponse)=\\\"onHasPermission($event)\\\"\\r\\n      (camerasFound)=\\\"onCamerasFound($event)\\\"\\r\\n      (torchCompatible)=\\\"onTorchCompatible($event)\\\">\\r\\n    </zxing-scanner>\\r\\n    <div *ngIf=\\\"currentDevice\\\" id=\\\"ScannerFocusRedLine\\\"></div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"input-group mb-3\\\" *ngIf=\\\"allowBarcodeInput\\\">\\r\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" #bcInputTest\\r\\n           placeholder=\\\"Barcode\\\" aria-label=\\\"Barcode\\\" aria-describedby=\\\"button-addon2\\\">\\r\\n    <div class=\\\"input-group-append\\\">\\r\\n      <button class=\\\"btn btn-outline-primary\\\" type=\\\"button\\\" id=\\\"button-addon2\\\"\\r\\n              (click)=\\\"bctest(bcInputTest.value)\\\"><fa-icon [icon]=\\\"faCheck\\\"></fa-icon></button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"card\\\" *ngIf=\\\"scanResultCurrent\\\">\\r\\n    <div class=\\\"card-body\\\">\\r\\n      <h5 class=\\\"card-title\\\">{{ scanResultCurrent.barcode }}</h5>\\r\\n\\r\\n      <div *ngIf=\\\"scanResultCurrent.image && scanResultCurrent.image.data_url\\\" class=\\\"float-right\\\">\\r\\n        <img [src]=\\\"scanResultCurrent.image.data_url\\\" style=\\\"max-width:200%;max-height:150px\\\">\\r\\n      </div>\\r\\n\\r\\n      <p class=\\\"card-text\\\">\\r\\n        <span class=\\\"font-weight-bold\\\">{{ scanResultCurrent.typToString }}:</span> {{ scanResultCurrent.infos }}\\r\\n      </p>\\r\\n\\r\\n    </div>\\r\\n    <div class=\\\"btn-group w-100\\\">\\r\\n      <button class=\\\"btn btn-success btn-sm col-6\\\" (click)=\\\"applyResult()\\\"><fa-icon [icon]=\\\"faCheck\\\"></fa-icon></button>\\r\\n      <button class=\\\"col-6 btn btn-danger\\\" ngbButton (click)=\\\"clearResult()\\\"><fa-icon [icon]=\\\"faRemove\\\"></fa-icon></button>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"scanResultHistory.length > 0\\\">\\r\\n    <hr class=\\\"mt-3\\\">\\r\\n    <div class=\\\"w-100 text-right\\\">\\r\\n      <button class=\\\"btn btn-secondary btn-sm\\\" (click)=\\\"clearHistory()\\\">clear history</button>\\r\\n    </div>\\r\\n\\r\\n    <div *ngFor=\\\"let item of scanResultHistory\\\">\\r\\n      <div class=\\\"card mt-2\\\">\\r\\n        <div class=\\\"card-body\\\" style=\\\"padding:.5rem\\\">\\r\\n          <h5 class=\\\"card-title\\\">{{ item.barcode }}</h5>\\r\\n\\r\\n          <div *ngIf=\\\"item.image && item.image.data_url\\\" class=\\\"float-right\\\">\\r\\n            <img [src]=\\\"item.image.data_url\\\" style=\\\"max-width:100%;max-height:50px\\\">\\r\\n          </div>\\r\\n\\r\\n          <p class=\\\"card-text\\\">\\r\\n            <span class=\\\"font-weight-bold\\\">{{ item.typToString }}:</span> {{ item.infos }}\\r\\n          </p>\\r\\n\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"btn-group w-100\\\">\\r\\n          <button class=\\\"btn btn-success btn-sm col-6\\\" (click)=\\\"applyHistoryResult(item)\\\"><fa-icon [icon]=\\\"faCheck\\\"></fa-icon></button>\\r\\n          <button class=\\\"btn btn-danger btn-sm col-6\\\" (click)=\\\"removeResult(item)\\\"><fa-icon [icon]=\\\"faRemove\\\"></fa-icon></button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"activeModal.close('Close click')\\\">Close</button>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-header p-0\\\" style=\\\"padding:0.1rem\\\">\\r\\n  <div class=\\\"btn-group row no-gutters w-100\\\">\\r\\n    <button class=\\\"btn btn-primary col-10 text-left pl-3\\\" (click)=\\\"showSearchForm($event)\\\">\\r\\n      <fa-icon [icon]=\\\"faSignOutAlt\\\" class=\\\"mr-3\\\"></fa-icon> <fa-icon [icon]=\\\"faSearch\\\"></fa-icon> Artikel suchen\\r\\n    </button>\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-danger col-2\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\" id=\\\"modal-basic-title\\\">{{ formTitle }}</h4>\\r\\n</div>\\r\\n<div class=\\\"modal-body artikel-form\\\" [ngClass]=\\\"{ 'artikel-form-kunst': formType === formTypeKunst }\\\">\\r\\n  <form #myForm=\\\"ngForm\\\">\\r\\n    <div *ngIf=\\\"formLabels.Hersteller.isVisible\\\" class=\\\"form-group\\\">\\r\\n      <label for=\\\"Hersteller\\\" class=\\\"d-none\\\">{{ formLabels.Hersteller.label }}:</label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">{{ formLabels.Hersteller.labelShort }}</span>\\r\\n        </div>\\r\\n      <input\\r\\n        id=\\\"Hersteller\\\"\\r\\n        name=\\\"Hersteller\\\"\\r\\n        [placeholder]=\\\"formLabels.Hersteller.placeholder\\\"\\r\\n        type=\\\"text\\\"\\r\\n        class=\\\"form-control\\\"\\r\\n        [(ngModel)]=\\\"artikelDaten.Hersteller\\\"\\r\\n        (selectItem)=\\\"onSelectHersteller($event)\\\"\\r\\n        [ngbTypeahead]=\\\"search\\\"\\r\\n        [inputFormatter]=\\\"formatter\\\"\\r\\n        [resultFormatter]=\\\"formatter\\\"\\r\\n        (change)=\\\"onChangeHersteller($event)\\\"\\r\\n        (focus)=\\\"focus$.next($any($event).target.value)\\\"\\r\\n        (click)=\\\"click$.next($any($event).target.value)\\\"\\r\\n        #instance=\\\"ngbTypeahead\\\"\\r\\n      />\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div *ngIf=\\\"formLabels.Gruppe.isVisible\\\" class=\\\"form-group\\\">\\r\\n      <label for=\\\"typ\\\" class=\\\"d-none\\\">{{ formLabels.Gruppe.label }}: </label>\\r\\n\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">{{ formLabels.Gruppe.labelShort }}</span>\\r\\n        </div>\\r\\n        <input id=\\\"Gruppe\\\" class=\\\"form-control\\\"\\r\\n               [placeholder]=\\\"formLabels.Gruppe.placeholder\\\"\\r\\n               name=\\\"Gruppe\\\"\\r\\n               [(ngModel)]=\\\"artikelDaten.Gruppe\\\"\\r\\n               (change)=\\\"onChangeGruppe($event)\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n               (selectItem)=\\\"onSelectGruppe($event)\\\"\\r\\n               [ngbTypeahead]=\\\"searchGruppen\\\"\\r\\n               [inputFormatter]=\\\"formatter\\\"\\r\\n               [resultFormatter]=\\\"formatter\\\"\\r\\n               (focus)=\\\"focusGrp$.next($any($event).target.value)\\\"\\r\\n               (click)=\\\"clickGrp$.next($any($event).target.value)\\\"\\r\\n               #instanceGrp=\\\"ngbTypeahead\\\"\\r\\n        >\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div *ngIf=\\\"formLabels.Kategorie.isVisible\\\" class=\\\"form-group\\\">\\r\\n      <label for=\\\"typ\\\" class=\\\"d-none\\\">{{ formLabels.Kategorie.label }}: </label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">{{ formLabels.Kategorie.labelShort }}</span>\\r\\n        </div>\\r\\n        <input id=\\\"Kategorie\\\" class=\\\"form-control\\\"\\r\\n               [placeholder]=\\\"formLabels.Kategorie.placeholder\\\"\\r\\n               name=\\\"Kategorie\\\"\\r\\n               [(ngModel)]=\\\"artikelDaten.Kategorie\\\"\\r\\n               (change)=\\\"onChange($event)\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n               (selectItem)=\\\"onSelectKategorie($event)\\\"\\r\\n               [ngbTypeahead]=\\\"searchKategorien\\\"\\r\\n               [inputFormatter]=\\\"formatter\\\"\\r\\n               [resultFormatter]=\\\"formatter\\\"\\r\\n               (focus)=\\\"focusKtg$.next($any($event).target.value)\\\"\\r\\n               (click)=\\\"clickKtg$.next($any($event).target.value)\\\"\\r\\n               #instanceKtg=\\\"ngbTypeahead\\\"\\r\\n        >\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div *ngIf=\\\"formLabels.Bezeichnung.isVisible\\\" class=\\\"form-group\\\" [ngClass]=\\\"{\\r\\n        'has-error': bezeichnung.dirty && (bezeichnung.invalid || numBezeichnungExists === 1),\\r\\n        'has-info': bezeichnung.dirty && numBezeichnungExists === -1\\r\\n        }\\\">\\r\\n      <label for=\\\"Bezeichnung\\\" class=\\\"d-none\\\">{{ formLabels.Bezeichnung.label }}: </label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">{{ formLabels.Bezeichnung.labelShort }}</span>\\r\\n        </div>\\r\\n        <input id=\\\"Bezeichnung\\\" class=\\\"form-control\\\"\\r\\n               [placeholder]=\\\"formLabels.Bezeichnung.placeholder\\\"\\r\\n               name=\\\"Bezeichnung\\\"\\r\\n               [(ngModel)]=\\\"artikelDaten.Bezeichnung\\\"\\r\\n               #bezeichnung=\\\"ngModel\\\"\\r\\n               (change)=\\\"checkIfABezeichnungExistsGlobal()\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n               required\\r\\n        >\\r\\n      </div>\\r\\n      <div *ngIf=\\\"bezeichnung.valid\\\">\\r\\n        <div *ngIf=\\\"numBezeichnungExists === -1\\\" class=\\\"help-block\\\">Artikelangabe wird geprft {{ numBezeichnungExists }}</div>\\r\\n        <div *ngIf=\\\"numBezeichnungExists > 0\\\" class=\\\"help-block\\\">Artikel existiert bereits {{ numBezeichnungExists }}</div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div *ngIf=\\\"formLabels.Typ.isVisible\\\" class=\\\"form-group\\\">\\r\\n      <label for=\\\"typ\\\" class=\\\"d-none\\\">{{ formLabels.Typ.label }}: </label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">{{ formLabels.Typ.labelShort }}</span>\\r\\n        </div>\\r\\n        <input id=\\\"typ\\\" class=\\\"form-control\\\"\\r\\n               [placeholder]=\\\"formLabels.Typ.placeholder\\\"\\r\\n               name=\\\"typ\\\"\\r\\n               [(ngModel)]=\\\"artikelDaten.Typ\\\"\\r\\n               (change)=\\\"onChange($event)\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n               (selectItem)=\\\"onSelectTypen($event)\\\"\\r\\n               [ngbTypeahead]=\\\"searchTypen\\\"\\r\\n               [inputFormatter]=\\\"formatter\\\"\\r\\n               [resultFormatter]=\\\"formatter\\\"\\r\\n               (focus)=\\\"focusTyp$.next($any($event).target.value)\\\"\\r\\n               (click)=\\\"clickTyp$.next($any($event).target.value)\\\"\\r\\n               #instanceTyp=\\\"ngbTypeahead\\\"\\r\\n        >\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div *ngIf=\\\"formLabels.Groesse.isVisible\\\" class=\\\"form-group\\\">\\r\\n      <label for=\\\"Groesse\\\" class=\\\"d-none\\\">{{ formLabels.Groesse.label }}: </label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">{{ formLabels.Groesse.labelShort }}</span>\\r\\n        </div>\\r\\n        <input id=\\\"Groesse\\\" class=\\\"form-control\\\"\\r\\n               [placeholder]=\\\"formLabels.Groesse.placeholder\\\"\\r\\n               name=\\\"Groesse\\\"\\r\\n               [(ngModel)]=\\\"artikelDaten.Groesse\\\"\\r\\n               (change)=\\\"onChange($event)\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n               (selectItem)=\\\"onSelectGroessen($event)\\\"\\r\\n               [ngbTypeahead]=\\\"searchGroessen\\\"\\r\\n               [inputFormatter]=\\\"formatter\\\"\\r\\n               [resultFormatter]=\\\"formatter\\\"\\r\\n               (focus)=\\\"focusGrs$.next($any($event).target.value)\\\"\\r\\n               (click)=\\\"clickGrs$.next($any($event).target.value)\\\"\\r\\n               #instanceGrs=\\\"ngbTypeahead\\\"\\r\\n        >\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div *ngIf=\\\"formLabels.Farbe.isVisible\\\" class=\\\"form-group\\\">\\r\\n      <label for=\\\"Farbe\\\" class=\\\"d-none\\\">{{ formLabels.Farbe.label }}: </label>\\r\\n      <div class=\\\"input-group mb-3\\\">\\r\\n        <div class=\\\"input-group-prepend\\\">\\r\\n          <span class=\\\"input-group-text\\\">{{ formLabels.Farbe.labelShort }}</span>\\r\\n        </div>\\r\\n        <input id=\\\"Farbe\\\" class=\\\"form-control\\\"\\r\\n               [placeholder]=\\\"formLabels.Farbe.placeholder\\\"\\r\\n               name=\\\"Farbe\\\"\\r\\n               [(ngModel)]=\\\"artikelDaten.Farbe\\\"\\r\\n               (change)=\\\"onChange($event)\\\"\\r\\n               (input)=\\\"onInput($event)\\\"\\r\\n               (selectItem)=\\\"onSelectFarben($event)\\\"\\r\\n               [ngbTypeahead]=\\\"searchFarben\\\"\\r\\n               [inputFormatter]=\\\"formatter\\\"\\r\\n               [resultFormatter]=\\\"formatter\\\"\\r\\n               (focus)=\\\"focusFa$.next($any($event).target.value)\\\"\\r\\n               (click)=\\\"clickFa$.next($any($event).target.value)\\\"\\r\\n               #instanceFa=\\\"ngbTypeahead\\\"\\r\\n        >\\r\\n      </div>\\r\\n    </div>\\r\\n  </form>\\r\\n  <pre>{{closeResult}}</pre>\\r\\n  <p class=\\\"d-none\\\">select-create-artikel works!</p>\\r\\n</div>\\r\\n<div class=\\\"modal-footer\\\">\\r\\n  <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"activeModal.close('Close click')\\\">Close</button>\\r\\n  <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"onSubmit($event)\\\" [disabled]=\\\"!formIsValid || !myForm.form.valid\\\">Artikel anlegen</button>\\r\\n  <div *ngIf=\\\"formError\\\" class=\\\"alert-danger\\\"> {{formError}} </div>\\r\\n  <div>\\r\\n    <ngb-pagination [collectionSize]=\\\"collectionSize\\\" [(page)]=\\\"page\\\" [maxSize]=\\\"maxSize\\\" [pageSize]=\\\"pageSize\\\" (pageChange)=\\\"onPageChange(page)\\\"></ngb-pagination>\\r\\n  </div>\\r\\n  <div class=\\\"row no-gutters\\\">\\r\\n    <div class=\\\"card col-sm-6\\\" *ngFor=\\\"let item of listExistingArticlePage\\\">\\r\\n      <img *ngIf=\\\"item.img_id\\\" class=\\\"card-img-top\\\" src=\\\"...\\\" alt=\\\"\\\">\\r\\n      <div class=\\\"card-body \\\">\\r\\n        <h6 class=\\\"card-title\\\">{{ item.Bezeichnung }}</h6>\\r\\n        <div *ngIf=\\\"item.Hersteller\\\"><small>Hst: {{ item.Hersteller }}</small></div>\\r\\n        <div *ngIf=\\\"item.Gruppe\\\"><small>Grp: {{ item.Gruppe }}</small></div>\\r\\n        <div *ngIf=\\\"item.Typ\\\"><small>Typ: {{ item.Typ }}</small></div>\\r\\n        <div *ngIf=\\\"item.Kategorie\\\"><small>Ktg: {{ item.Kategorie }}</small></div>\\r\\n        <div *ngIf=\\\"item.Farbe || item.Groesse\\\"><small>{{ item.Farbe }} {{ item.Groesse }}</small></div>\\r\\n        <div *ngIf=\\\"item.inventar_count\\\"><small>{{ item.inventar_count }}</small></div>\\r\\n      </div>\\r\\n      <div class=\\\"card-footer text-center\\\">\\r\\n        <button (click)=\\\"applyItemAsInput(item)\\\" class=\\\"btn btn-sm btn-info\\\">Als Vorlage bernehmen</button>\\r\\n        <button (click)=\\\"applyItemAsArtikel(item)\\\" class=\\\"btn btn-sm btn-primary\\\">Artikel bernehmen</button>\\r\\n      </div>\\r\\n    </div><!-- Close: div.card -->\\r\\n  </div><!-- Close: div.row -->\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-header p-0\\\" style=\\\"padding:0.1rem\\\">\\r\\n  <div class=\\\"btn-group row no-gutters w-100\\\">\\r\\n    <button class=\\\"btn btn-primary col-10 text-left pl-3\\\" (click)=\\\"showSearchForm($event)\\\">\\r\\n      <fa-icon [icon]=\\\"faSignOutAlt\\\" class=\\\"mr-3\\\"></fa-icon> <fa-icon [icon]=\\\"faSearch\\\"></fa-icon> Raum suchen\\r\\n    </button>\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-danger col-2\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n <div class=\\\"modal-header\\\">\\r\\n    <h4 class=\\\"modal-title\\\" id=\\\"modal-basic-title\\\">Raum anlegen</h4>\\r\\n  </div>\\r\\n  <div class=\\\"modal-body\\\">\\r\\n    <form #raumForm=\\\"ngForm\\\">\\r\\n\\r\\n      <div class=\\\"form-group\\\" [ngClass]=\\\"{\\r\\n        'has-error': raum.dirty && (raum.invalid || raumExistsStatus === 1),\\r\\n        'has-info': raum.dirty && raumExistsStatus === -1\\r\\n        }\\\">\\r\\n        <label for=\\\"dateOfBirth\\\" class=\\\"d-none\\\">Raum-Nr.: </label>\\r\\n        <div class=\\\"input-group mb-1\\\">\\r\\n          <div class=\\\"input-group-prepend\\\">\\r\\n            <span class=\\\"input-group-text\\\">RNr</span>\\r\\n          </div>\\r\\n          <input id=\\\"Raum\\\" class=\\\"form-control\\\" placeholder=\\\"Raumnr\\\"\\r\\n                 name=\\\"Raum\\\"\\r\\n                 [(ngModel)]=\\\"raumDaten.Raum\\\"\\r\\n                 #raum=\\\"ngModel\\\"\\r\\n                 (change)=\\\"checkIfRaumExists()\\\"\\r\\n                 required\\r\\n          >\\r\\n        </div>\\r\\n        <div *ngIf=\\\"raum.valid\\\">\\r\\n          <div *ngIf=\\\"raumExistsStatus===-1\\\" class=\\\"help-block\\\">Raumangabe wird geprft</div>\\r\\n          <div *ngIf=\\\"raumExistsStatus===1\\\" class=\\\"help-block\\\">Raum existiert bereits</div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"form-group\\\" [ngClass]=\\\"{\\r\\n        'has-warning': bezeichnung.dirty && (bezeichnung.invalid || bezeichnungExistsStatus === 1),\\r\\n        'has-info': bezeichnung.dirty && bezeichnungExistsStatus === -1\\r\\n        }\\\">\\r\\n        <label for=\\\"Bezeichnung\\\" class=\\\"d-none\\\">Raum-Bez.: </label>\\r\\n        <div class=\\\"input-group mb-1\\\">\\r\\n          <div class=\\\"input-group-prepend\\\">\\r\\n            <span class=\\\"input-group-text\\\">Bezg</span>\\r\\n          </div>\\r\\n          <input id=\\\"Bezeichnung\\\" class=\\\"form-control\\\" placeholder=\\\"Raumbezeichnung\\\"\\r\\n                 name=\\\"Bezeichnung\\\"\\r\\n                 [(ngModel)]=\\\"raumDaten.Raumbezeichnung\\\"\\r\\n                 #bezeichnung=\\\"ngModel\\\"\\r\\n                 (change)=\\\"checkIfRaumbezeichnungExists()\\\"\\r\\n          >\\r\\n        </div>\\r\\n        <div *ngIf=\\\"bezeichnung.valid\\\">\\r\\n          <div *ngIf=\\\"bezeichnungExistsStatus===-1\\\" class=\\\"help-block\\\">Bezeichnung wird geprft</div>\\r\\n          <div *ngIf=\\\"bezeichnungExistsStatus===1\\\" class=\\\"help-block\\\">Es existiert bereits ein Raum mit dieser Bezeichnung</div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"form-group\\\">\\r\\n        <label for=\\\"Etage\\\" class=\\\"d-none\\\">Etage: </label>\\r\\n        <div class=\\\"input-group mb-1\\\">\\r\\n          <div class=\\\"input-group-prepend\\\">\\r\\n            <span class=\\\"input-group-text\\\">Etage</span>\\r\\n          </div>\\r\\n          <input id=\\\"Etage\\\" class=\\\"form-control\\\" placeholder=\\\"Etage\\\"\\r\\n                 name=\\\"Etage\\\"\\r\\n                 [(ngModel)]=\\\"raumDaten.Etage\\\"\\r\\n                 #etage=\\\"ngModel\\\"\\r\\n                 required\\r\\n          >\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"form-group\\\">\\r\\n        <label for=\\\"newRaumBarcode\\\" class=\\\"d-none\\\">Barcode: </label>\\r\\n        <div class=\\\"input-group mb-1\\\">\\r\\n          <div class=\\\"input-group-prepend\\\">\\r\\n            <span class=\\\"input-group-text\\\">BCode</span>\\r\\n          </div>\\r\\n          <input readonly id=\\\"newRaumBarcode\\\" #newRaumBarcode class=\\\"form-control formcontrol-edit-barcode\\\" (paste)=\\\"$event.preventDefault()\\\" placeholder=\\\"Barcode\\\"\\r\\n                 name=\\\"code\\\"\\r\\n                 [(ngModel)]=\\\"raumDaten.code\\\"\\r\\n                 #code=\\\"ngModel\\\"\\r\\n          >\\r\\n          <div class=\\\"input-group-append\\\">\\r\\n            <button class=\\\"btn btn-outline-success\\\" type=\\\"button\\\" (click)=\\\"openScanner(newRaumBarcode)\\\"><fa-icon [icon]=\\\"faCamera\\\"></fa-icon></button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"form-group\\\" *ngIf=\\\"false\\\">\\r\\n        <label for=\\\"dateOfBirth\\\">Datum (Dummy)</label>\\r\\n        <div class=\\\"input-group\\\">\\r\\n          <input id=\\\"dateOfBirth\\\" class=\\\"form-control\\\" placeholder=\\\"yyyy-mm-dd\\\" name=\\\"dp\\\" ngbDatepicker #dp=\\\"ngbDatepicker\\\">\\r\\n          <div class=\\\"input-group-append\\\">\\r\\n            <button class=\\\"btn btn-outline-secondary calendar\\\" (click)=\\\"dp.toggle()\\\" type=\\\"button\\\"></button>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </form>\\r\\n  </div>\\r\\n  <div class=\\\"modal-footer\\\">\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-outline-dark\\\" (click)=\\\"onSubmit($event)\\\" [disabled]=\\\"!formIsValid || !raumForm.form.valid\\\">Raum anlegen</button>\\r\\n    <div *ngIf=\\\"formError\\\" class=\\\"alert-danger\\\"> {{formError}} </div>\\r\\n  </div>\\r\\n\\r\\n<!-- button class=\\\"btn btn-lg btn-outline-primary\\\" (click)=\\\"open(content)\\\">Raum zuordnen</button -->\\r\\n\\r\\n<hr>\\r\\n\\r\\n<pre>{{closeResult}}</pre>\\r\\n\"","export default \"<div class=\\\"modal-header p-0\\\" style=\\\"padding:0.1rem\\\">\\r\\n  <div class=\\\"btn-group row no-gutters w-100\\\">\\r\\n  <button class=\\\"btn btn-primary col-10 text-left pl-3\\\" (click)=\\\"showCreateForm($event)\\\">\\r\\n    <fa-icon [icon]=\\\"faSignOutAlt\\\" class=\\\"mr-3\\\"></fa-icon> <fa-icon [icon]=\\\"faPlus\\\"></fa-icon> Neuen Artikel anlegen\\r\\n  </button>\\r\\n  <button type=\\\"button\\\" class=\\\"btn btn-danger col-2\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n  </button>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\">Artikelauswahl</h4>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <label for=\\\"typeahead-prevent-manual-entry\\\">Artikel suchen:</label>\\r\\n  <div class=\\\"input-group\\\">\\r\\n    <div class=\\\"input-group-prepend\\\">\\r\\n      <span class=\\\"input-group-text\\\"><fa-icon [icon]=\\\"faSearch\\\"></fa-icon></span>\\r\\n    </div>\\r\\n    <input id=\\\"typeahead-prevent-manual-entry\\\" #searchArtikelInput type=\\\"text\\\" class=\\\"form-control\\\"\\r\\n           (selectItem)=\\\"onSelectItem($event)\\\"\\r\\n           [(ngModel)]=\\\"model\\\"\\r\\n           [ngbTypeahead]=\\\"search\\\"\\r\\n           [inputFormatter]=\\\"formatter\\\"\\r\\n           [resultFormatter]=\\\"formatter\\\"\\r\\n           [editable]='false' />\\r\\n  </div>\\r\\n  <hr>\\r\\n  <pre class=\\\"d-none\\\">Model: {{ model | json }}</pre>\\r\\n\\r\\n  <p class=\\\"d-none\\\">select-search-artikel works! {{ clientId }}</p>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-header p-0\\\" style=\\\"padding:0.1rem\\\">\\r\\n  <div class=\\\"btn-group row no-gutters w-100\\\">\\r\\n    <button class=\\\"btn btn-primary col-10 text-left pl-3\\\" (click)=\\\"showCreateForm($event)\\\">\\r\\n      <fa-icon [icon]=\\\"faSignOutAlt\\\" class=\\\"mr-3\\\"></fa-icon> <fa-icon [icon]=\\\"faPlus\\\"></fa-icon> Neuen Raum anlegen\\r\\n    </button>\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-danger col-2\\\" (click)=\\\"activeModal.dismiss('Cross click')\\\">\\r\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"modal-header\\\">\\r\\n  <h4 class=\\\"modal-title\\\">Raumauswahl</h4>\\r\\n</div>\\r\\n<div class=\\\"modal-body\\\">\\r\\n  <label for=\\\"typeahead-prevent-manual-entry\\\" class=\\\"mb-0\\\">Raum suchen:</label>\\r\\n  <div class=\\\"input-group mb-1\\\">\\r\\n    <div class=\\\"input-group-prepend\\\">\\r\\n      <span class=\\\"input-group-text\\\"><fa-icon [icon]=\\\"faSearch\\\"></fa-icon></span>\\r\\n    </div>\\r\\n  <input id=\\\"typeahead-prevent-manual-entry\\\" #searchInput type=\\\"text\\\" class=\\\"form-control\\\"\\r\\n         (selectItem)=\\\"onSelectItem($event)\\\"\\r\\n         [(ngModel)]=\\\"model\\\"\\r\\n         [ngbTypeahead]=\\\"search\\\"\\r\\n         [inputFormatter]=\\\"formatter\\\"\\r\\n         [resultFormatter]=\\\"formatter\\\"\\r\\n         [editable]='false' />\\r\\n  </div>\\r\\n  <hr>\\r\\n\\r\\n  <p class=\\\"d-none\\\">select-search-raum works! {{ gebaeudeId }}</p>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-body\\\">\\r\\n  <ngb-alert [type]=\\\"'danger'\\\" *ngIf=\\\"error\\\" (close)=\\\"error = ''\\\"></ngb-alert>\\r\\n\\r\\n  <div class=\\\"editor\\\" *ngIf=\\\"imageUrl\\\">\\r\\n    <div class=\\\"canvas\\\">\\r\\n      <angular-cropper\\r\\n          #angularCropper\\r\\n          *ngIf=\\\"imageUrl\\\"\\r\\n          [cropperOptions]=\\\"config\\\"\\r\\n          [imageUrl]=\\\"imageUrl\\\">\\r\\n      </angular-cropper>\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <div class=\\\"toolbar-close\\\">\\r\\n      <button class=\\\"btn btn-sm btn-danger btn-icon-cirular\\\" (click)=\\\"close()\\\"><fa-icon [icon]=\\\"faClose\\\"></fa-icon></button>\\r\\n    </div>\\r\\n    <div class=\\\"toolbar btn-group btn-group-sm rounded\\\">\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"zoomIn()\\\"><fa-icon [icon]=\\\"faSearchPlus\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"zoomOut()\\\"><fa-icon [icon]=\\\"faSearchMinus\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"rotateLeft()\\\"><fa-icon [icon]=\\\"faRotateLeft\\\"></fa-icon></button>\\r\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"rotateRight()\\\"><fa-icon [icon]=\\\"faRotateRight\\\"></fa-icon></button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"modal-body\\\">\\n  {{ titel }}\\n  <ngb-alert [type]=\\\"'danger'\\\" *ngIf=\\\"error\\\" (close)=\\\"error = ''\\\"></ngb-alert>\\n\\n  <div class=\\\"editor\\\" *ngIf=\\\"imageUrl\\\">\\n    <div class=\\\"canvas\\\">\\n      <angular-cropper\\n        #angularCropper\\n        *ngIf=\\\"imageUrl\\\"\\n        [cropperOptions]=\\\"config\\\"\\n        [imageUrl]=\\\"imageUrl\\\">\\n      </angular-cropper>\\n    </div>\\n\\n\\n    <div class=\\\"toolbar-close\\\">\\n      <button class=\\\"btn btn-sm btn-danger btn-icon-cirular\\\" (click)=\\\"close()\\\"><fa-icon [icon]=\\\"faClose\\\"></fa-icon></button>\\n    </div>\\n    <div class=\\\"toolbar btn-group btn-group-sm rounded\\\">\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"zoomIn()\\\"><fa-icon [icon]=\\\"faSearchPlus\\\"></fa-icon></button>\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"zoomOut()\\\"><fa-icon [icon]=\\\"faSearchMinus\\\"></fa-icon></button>\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"rotateLeft()\\\"><fa-icon [icon]=\\\"faRotateLeft\\\"></fa-icon></button>\\n      <button class=\\\"btn btn-sm btn-light\\\" (click)=\\\"rotateRight()\\\"><fa-icon [icon]=\\\"faRotateRight\\\"></fa-icon></button>\\n    </div>\\n  </div>\\n</div>\\n\"","export default \"\\r\\n<div *ngIf=\\\"false && lastInventoryDetails as inv\\\">\\r\\n  Mchten Sie die vorherige Inventur fortsetzen?<br>\\r\\n  <div *ngIf=\\\"1\\\" class=\\\"row\\\">\\r\\n    <div class=\\\"col-3\\\">Titel</div>\\r\\n    <div class=\\\"col-8\\\">{{ inv.Titel }}</div>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"1\\\" class=\\\"row\\\">\\r\\n    <div class=\\\"col-3\\\">Mandant</div>\\r\\n    <div class=\\\"col-8\\\">{{ inv.Mandant }}</div>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"1\\\" class=\\\"row\\\">\\r\\n    <div class=\\\"col-3\\\">Gebaeude</div>\\r\\n    <div class=\\\"col-8\\\">{{ inv.Gebaeude }}</div>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"inv.Raum\\\" class=\\\"row\\\">\\r\\n    <div class=\\\"col-3\\\">Raum</div>\\r\\n    <div class=\\\"col-8\\\">{{ inv.Raum }}</div>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"inv.Raumbezeichnung\\\" class=\\\"row\\\">\\r\\n    <div class=\\\"col-3\\\">R-Bezeichnung</div>\\r\\n    <div class=\\\"col-8\\\">{{ inv.Raumbezeichnung }}</div>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"inv.Etage\\\" class=\\\"row\\\">\\r\\n    <div class=\\\"col-3\\\">Etage</div>\\r\\n    <div class=\\\"col-8\\\">{{ inv.Etage }}</div>\\r\\n  </div>\\r\\n  <button class=\\\"btn btn-primary\\\" (click)=\\\"gotoLastInventory()\\\">Fortsetzen</button>\\r\\n</div>\\r\\n\\r\\n<h5>Inventarisierung auswhlen</h5>\\r\\n<form (ngSubmit)=\\\"onSubmit()\\\" #f=\\\"ngForm\\\" class=\\\"select-inventory\\\">\\r\\n\\r\\n  <div class=\\\"form-group\\\">\\r\\n    <div class=\\\"row no-gutters input-group mb-1\\\">\\r\\n      <div class=\\\"col-auto input-group-prepend\\\">\\r\\n        <span class=\\\"input-group-text border-secondary\\\">Kunde</span>\\r\\n      </div>\\r\\n      <div ngbDropdown #myDropKunde=\\\"ngbDropdown\\\" class=\\\"col myDropdown\\\">\\r\\n        <button (click)=\\\"$event.preventDefault(); $event.stopPropagation(); myDropKunde.isOpen() ? myDropKunde.close() : myDropKunde.open();\\\"\\r\\n                class=\\\"col btn btn-outline-secondary\\\" id=\\\"dropKunde\\\" ngbDropdownAnchor>\\r\\n          <ng-container *ngIf=\\\"client\\\"><span>{{ client.Mandant }}</span></ng-container>\\r\\n          <ng-container *ngIf=\\\"!client && statusLoadingUserInventories < 5\\\"><span>Kunden werden geladen</span></ng-container>\\r\\n          <ng-container *ngIf=\\\"!client && statusLoadingUserInventories >= 5 && clients && clients.length > 0\\\"><span>Bitte Kunde auswhlen</span></ng-container>\\r\\n          <ng-container *ngIf=\\\"!client && statusLoadingUserInventories >= 5 && (!clients || clients.length === 0)\\\"><span>Keine Auswahl vorhanden</span></ng-container>\\r\\n        </button>\\r\\n\\r\\n        <div ngbDropdownMenu aria-labelledby=\\\"dropKunde\\\" class=\\\"border-secondary rounded-bottom\\\">\\r\\n          <button ngbDropdownItem *ngFor=\\\"let _client of clients; let i = index\\\"\\r\\n                  (click)=\\\"$event.preventDefault(); $event.stopPropagation(); clientChanged(i)\\\"\\r\\n                  [attr.data-index]=\\\"i\\\"\\r\\n                  [value]=\\\"i\\\">{{_client.Mandant}}</button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"form-group\\\">\\r\\n    <div class=\\\"row no-gutters input-group mb-1\\\">\\r\\n      <div class=\\\"col-auto input-group-prepend\\\">\\r\\n        <span class=\\\"input-group-text border-secondary\\\">Inventur</span>\\r\\n      </div>\\r\\n      <div ngbDropdown #myInventoryDrop=\\\"ngbDropdown\\\" class=\\\"col myDropdown\\\">\\r\\n        <button (click)=\\\"$event.preventDefault(); $event.stopPropagation(); myInventoryDrop.isOpen() ? myInventoryDrop.close() : myInventoryDrop.open();\\\"\\r\\n                class=\\\"col btn btn-outline-secondary\\\" id=\\\"dropInventory\\\" ngbDropdownAnchor>\\r\\n          <ng-container *ngIf=\\\"inventory && lastInventory && inventory.jobid === lastInventory.jobid\\\"><span>{{ inventory.Titel }} (Zuletzt in Arbeit)</span></ng-container>\\r\\n          <ng-container *ngIf=\\\"inventory && (!lastInventory || inventory.jobid !== lastInventory.jobid)\\\"><span>{{ inventory.Titel }}</span></ng-container>\\r\\n          <ng-container *ngIf=\\\"!inventory && statusLoadingUserInventories < 5\\\"><span>Inventarisierungen werden geladen</span></ng-container>\\r\\n          <ng-container *ngIf=\\\"!inventory && statusLoadingUserInventories >= 5 && inventoriesSelectable && inventoriesSelectable.length > 0\\\"><span>Bitte Inventur auswhlen</span></ng-container>\\r\\n          <ng-container *ngIf=\\\"!inventory && statusLoadingUserInventories >= 5 && (!inventoriesSelectable || inventoriesSelectable.length === 0)\\\"><span>Keine Auswahl vorhanden</span></ng-container>\\r\\n        </button>\\r\\n\\r\\n        <div ngbDropdownMenu aria-labelledby=\\\"dropInventory\\\" class=\\\"border-secondary rounded-bottom\\\">\\r\\n          <button ngbDropdownItem *ngFor=\\\"let _inventory of inventoriesSelectable; let i = index\\\"\\r\\n                  (click)=\\\"$event.preventDefault(); $event.stopPropagation(); inventorySelectionChanged(_inventory.jobid)\\\"\\r\\n                  [attr.data-index]=\\\"_inventory.jobid\\\"\\r\\n                  [value]=\\\"_inventory.jobid\\\">{{_inventory.Titel}}\\r\\n            <ng-container *ngIf=\\\"lastInventory && _inventory.jobid === lastInventory.jobid\\\">\\r\\n            (Zuletzt in Arbeit)\\r\\n          </ng-container></button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"true\\\" class=\\\"form-group\\\">\\r\\n    <div class=\\\"row no-gutters input-group mb-1\\\">\\r\\n      <div class=\\\"col-auto input-group-prepend\\\">\\r\\n        <span class=\\\"input-group-text border-secondary\\\">Standort</span>\\r\\n      </div>\\r\\n      <div ngbDropdown #myGebaeudeDrop2=\\\"ngbDropdown\\\" class=\\\"col myDropdown\\\">\\r\\n        <button (click)=\\\"$event.preventDefault(); $event.stopPropagation(); myGebaeudeDrop2.isOpen() ? myGebaeudeDrop2.close() : myGebaeudeDrop2.open();\\\"\\r\\n                [disabled]=\\\"!inventory\\\"\\r\\n                class=\\\"col btn btn-outline-secondary\\\" id=\\\"dropGebaeude2\\\" ngbDropdownAnchor>\\r\\n          <ng-container *ngIf=\\\"building\\\"><span>{{ building.Gebaeude }}</span> <span *ngIf=\\\"lastBuilding && building.gid === lastBuilding.gid\\\">(Zuletzt in Arbeit)</span></ng-container>\\r\\n          <ng-container *ngIf=\\\"!building && statusLoadingUserInventories < 5\\\"><span>Standorte werden geladen</span></ng-container>\\r\\n          <ng-container *ngIf=\\\"!building && statusLoadingUserInventories >= 5 && buildings && buildings.length > 0\\\"><span>Bitte Standort auswhlen</span></ng-container>\\r\\n          <ng-container *ngIf=\\\"!building && statusLoadingUserInventories >= 5 && (!buildings || buildings.length === 0)\\\"><span>Keine Auswahl vorhanden</span></ng-container>\\r\\n        </button>\\r\\n\\r\\n        <div ngbDropdownMenu aria-labelledby=\\\"dropGebaeude2\\\" class=\\\"border-secondary rounded-bottom\\\" style=\\\"max-height:50vh;overflow-y:scroll\\\">\\r\\n          <button ngbDropdownItem *ngFor=\\\"let _bldg of buildings; let i = index\\\"\\r\\n                  (click)=\\\"$event.preventDefault(); $event.stopPropagation(); buildingChanged(i)\\\"\\r\\n                  [attr.data-index]=\\\"i\\\"\\r\\n                  [value]=\\\"i\\\">{{_bldg.Gebaeude}}\\r\\n            <ng-container *ngIf=\\\"lastBuilding && _bldg.gid === lastBuilding.gid\\\">\\r\\n              (Zuletzt in Arbeit)\\r\\n            </ng-container></button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"form-group\\\">\\r\\n    <app-progressbar [title]=\\\"'Anzahl Elemente'\\\" [value]=\\\"doneElements\\\" [total]=\\\"totalElements\\\"></app-progressbar>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"form-group\\\">\\r\\n    <div class=\\\"row no-gutters\\\">\\r\\n      <div class=\\\"col col-sm-6 offset-sm-6\\\">\\r\\n        <button [disabled]=\\\"!building || loading\\\" class=\\\"btn btn-primary w-100\\\">Starten</button>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"mt-2\\\">\\r\\n    <ng-container [ngSwitch]=\\\"statusLoadingUserInventories\\\">\\r\\n      <span *ngSwitchCase=\\\"0\\\"></span>\\r\\n      <ngb-alert *ngSwitchCase=\\\"1\\\" [type]=\\\"'danger'\\\" [dismissible]=\\\"false\\\">[{{statusLoadingUserInventories}}] Warte auf Internet-Verbindung</ngb-alert>\\r\\n      <ngb-alert *ngSwitchCase=\\\"2\\\" [type]=\\\"'danger'\\\" [dismissible]=\\\"false\\\">[{{statusLoadingUserInventories}}] Warte auf Server-Verbindung</ngb-alert>\\r\\n      <ngb-alert *ngSwitchCase=\\\"3\\\" [type]=\\\"'warning'\\\" [dismissible]=\\\"false\\\">[{{statusLoadingUserInventories}}] Verbindung wird aufgebaut</ngb-alert>\\r\\n      <ngb-alert *ngSwitchCase=\\\"4\\\" [type]=\\\"'info'\\\" [dismissible]=\\\"false\\\">[{{statusLoadingUserInventories}}] Daten werden abgerufen</ngb-alert>\\r\\n      <ngb-alert *ngSwitchCase=\\\"5\\\" [type]=\\\"'success'\\\" [dismissible]=\\\"false\\\">[{{statusLoadingUserInventories}}] Auswahldaten wurden geladen</ngb-alert>\\r\\n      <ngb-alert *ngSwitchCase=\\\"6\\\" [type]=\\\"'danger'\\\" [dismissible]=\\\"false\\\">[{{statusLoadingUserInventories}}] Leider ist etwas schiefgelaufen</ngb-alert>\\r\\n    </ng-container>\\r\\n    <ngb-alert [type]=\\\"'info'\\\" *ngIf=\\\"status\\\" class=\\\"alert-info\\\">{{status}}</ngb-alert>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"form-group\\\" *ngIf=\\\"tablesLoadingStarted\\\">\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-outline-primary\\\" (click)=\\\"tablesLoadingDetailsIsExpanded=!tablesLoadingDetailsIsExpanded\\\"\\r\\n            [attr.aria-expanded]=\\\"!tablesLoadingDetailsIsExpanded\\\"\\r\\n            aria-controls=\\\"collapseExample\\\">\\r\\n      Details {{ tablesLoadingDetailsIsExpanded ? \\\"ausblenden\\\" : \\\"einblenden\\\"}}\\r\\n    </button>\\r\\n    <div class=\\\"card\\\" *ngIf=\\\"tablesLoadingDetailsIsExpanded\\\">\\r\\n      <div class=\\\"card-body\\\">\\r\\n        <div *ngFor=\\\"let item of tablesLoadingStatus; let t = index\\\">\\r\\n          {{ item.table }} {{ item.status }}\\r\\n          <p><ngb-progressbar type=\\\"success\\\"\\r\\n                            [value]=\\\"item.progress\\\"\\r\\n                            [striped]=\\\"!item.finished\\\"\\r\\n                            [animated]=\\\"!item.finished\\\">{{item.current}} von {{item.total}}</ngb-progressbar></p>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"lastMetaMsg !== '' && !tablesLoadingStarted\\\">\\r\\n    <ngb-alert [type]=\\\"'success'\\\" (close)=\\\"lastMetaMsg = ''\\\">{{ lastMetaMsg }}</ngb-alert>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"lastMetaErr !== '' && !tablesLoadingStarted\\\">\\r\\n    <ngb-alert [type]=\\\"'danger'\\\" (close)=\\\"lastMetaErr = ''\\\">{{ lastMetaErr }}</ngb-alert>\\r\\n  </div>\\r\\n\\r\\n  <div *ngIf=\\\"showListmetaMsg\\\">\\r\\n    <p *ngFor=\\\"let msg of listMetaMsg\\\">\\r\\n      <ngb-alert [type]=\\\"msg.type\\\" (close)=\\\"closeMsg(msg)\\\">{{ msg.message }}</ngb-alert>\\r\\n    </p>\\r\\n  </div>\\r\\n\\r\\n</form>\\r\\n\"","export default \"<div class=\\\"blobs-overlay\\\" *ngIf=\\\"blobAlert && useOverlay === 1\\\">\\r\\n  <div class=\\\"blobs-container\\\">\\r\\n    <ng-container [ngSwitch]=\\\"blobAlert\\\">\\r\\n      <div class=\\\"blob red animate\\\" *ngSwitchCase=\\\"'danger'\\\"></div>\\r\\n      <div class=\\\"blob green animate\\\" *ngSwitchCase=\\\"'success'\\\"></div>\\r\\n    </ng-container>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"blobs-overlay\\\" *ngIf=\\\"blobAlert && useOverlay === 2\\\">\\r\\n  <div class=\\\"blobs-container\\\">\\r\\n    <ng-container [ngSwitch]=\\\"blobAlert\\\">\\r\\n      <div class=\\\"blob red animate\\\" *ngSwitchCase=\\\"'danger'\\\"></div>\\r\\n      <div class=\\\"blob green animate\\\" *ngSwitchCase=\\\"'success'\\\"></div>\\r\\n    </ng-container>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card mt-1\\\">\\r\\n  <div class=\\\"card-body\\\">\\r\\n    <h5 class=\\\"card-title\\\">Barcode-Index neu aufbauen</h5>\\r\\n    <p class=\\\"card-text\\\">\\r\\n      Der Barcode-Index dient der schnelleren Auswertung von Barcode-Eingaben.\\r\\n      Sollten Barcodes nicht gefunden werden, obwohl sie vorhanden sein sollten,\\r\\n      nutzen sie diese Funktion, um den Index basierend auf Objektkatalog-, Inventar- und Raumdaten\\r\\n      neu aufzubauen\\r\\n    </p>\\r\\n    <button class=\\\"btn btn-primary\\\" [disabled]=\\\"buildBcLookup\\\" (click)=\\\"reIndexBarcodeLookup()\\\">reIndexBarcodeLookup</button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card mt-1\\\">\\r\\n  <div class=\\\"card-body\\\">\\r\\n    <h5 class=\\\"card-title\\\">Sound und visuelles Feedback testen</h5>\\r\\n    <div class=\\\"card-text\\\">\\r\\n      Barcode-Scans werden mit akkustischen und visuellen Feedback quittiert.\\r\\n      <h6>Erfolgreiche Scans:</h6>\\r\\n      Grne Welle und einer Piep-Ton\\r\\n\\r\\n      <h6>Fehlerhafte Scan:</h6>\\r\\n      Rote Welle und lnger anhaltender Piep-Ton\\r\\n    </div>\\r\\n    <button class=\\\"btn btn-success\\\" (click)=\\\"playSuccess()\\\">Sound Success</button>\\r\\n    <button class=\\\"btn btn-danger\\\" (click)=\\\"playError()\\\">Sound Error</button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card mt-1\\\">\\r\\n  <div class=\\\"card-body\\\">\\r\\n    <h5 class=\\\"card-title\\\">Manuelle Barcode-Simulation</h5>\\r\\n    <div class=\\\"card-text\\\">\\r\\n      Die Barcode-Eingabe kann zu Testzwecken manuelle simuliert werden.\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"btn-group btn-group-toggle\\\" ngbRadioGroup (change)=\\\"changeManualBCInput($event)\\\" name=\\\"radioBasic\\\" [(ngModel)]=\\\"enableManualBCInput\\\">\\r\\n\\r\\n      <label ngbButtonLabel class=\\\"btn-primary\\\">\\r\\n        <input ngbButton type=\\\"radio\\\" [value]=\\\"true\\\"> On\\r\\n      </label>\\r\\n      <label ngbButtonLabel class=\\\"btn-primary\\\">\\r\\n        <input ngbButton type=\\\"radio\\\" [value]=\\\"false\\\"> Off\\r\\n      </label>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card\\\">\\r\\n  <div class=\\\"card-body\\\">\\r\\n    <h5 class=\\\"card-title\\\">Browser(Handy)-Datenbank leeren</h5>\\r\\n    <p class=\\\"card-text\\\">\\r\\n      Mit dieser Funktion werden 'alle' Datenbank-Inhalte des Browsers/Handy gelscht.<br>\\r\\n      Unsynchronisierte nderungen gehen hierbei verloren!<br>\\r\\n      Benutzen Sie diese Funktion nur wenn alle Daten bereits synchronisiert sind!<br>\\r\\n      Datenbank: {{ dbName }} Version {{ dbVersion }}\\r\\n    </p>\\r\\n    <button class=\\\"btn btn-danger\\\" [disabled]=\\\"buildBcLookup\\\" (click)=\\\"dbClear()\\\">Datenbank leeren</button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"card\\\">\\r\\n  <div class=\\\"card-body\\\">\\r\\n    <h5 class=\\\"card-title\\\">Browser(Handy)-Datenbank lschen</h5>\\r\\n    <p class=\\\"card-text\\\">\\r\\n      Mit dieser Funktion wird die Browser/Handy-Datenbank gelscht.<br>\\r\\n      Unsynchronisierte nderungen gehen hierbei verloren!<br>\\r\\n      Die Datenbank-Struktur wird nach einem Seiten-Reload neu aufgebaut.<br>\\r\\n      Benutzen Sie diese Funktion nur wenn alle Daten bereits synchronisiert sind\\r\\n      oder schwerwiegende Fehler aufgetreten sind.<br>\\r\\n      Datenbank: {{ dbName }} Version {{ dbVersion }}\\r\\n    </p>\\r\\n    <button class=\\\"btn btn-danger\\\" [disabled]=\\\"buildBcLookup\\\" (click)=\\\"dbDelete()\\\">Datenbank lschen</button>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<nav class=\\\"navbar navbar-expand-md navbar-light xxx-bg-light app-navbar\\\">\\r\\n  <span class=\\\"navbar-brand\\\">\\r\\n    <img class=\\\"logo\\\" src=\\\"/assets/mertens-logo-221x45.png\\\">\\r\\n  </span>\\r\\n  <button class=\\\"navbar-toggler\\\" type=\\\"button\\\"\\r\\n          aria-controls=\\\"navbarContent\\\" [attr.aria-expanded]=\\\"!collapsed\\\"\\r\\n          aria-label=\\\"Toggle navigation\\\" (click)=\\\"collapsed = !collapsed\\\">\\r\\n    <span class=\\\"navbar-toggler-icon\\\"></span>\\r\\n  </button>\\r\\n\\r\\n  <div class=\\\"navbar-collapse\\\" [class.collapse]=\\\"collapsed\\\" id=\\\"navbarContent\\\">\\r\\n    <ul *ngIf=\\\"!isLoginPage\\\" class=\\\"navbar-nav ml-auto\\\">\\r\\n\\r\\n      <li *ngIf=\\\"false\\\" routerLinkActive=\\\"active\\\" class=\\\"nav-item\\\">\\r\\n        <a class=\\\"nav-link\\\" routerLink=\\\"/auth\\\">Login</a>\\r\\n      </li>\\r\\n\\r\\n      <li routerLinkActive=\\\"active\\\" class=\\\"nav-item\\\">\\r\\n        <a class=\\\"nav-link\\\" routerLink=\\\"/select-inventory\\\">Select</a>\\r\\n      </li>\\r\\n\\r\\n      <li routerLinkActive=\\\"active\\\" class=\\\"nav-item\\\">\\r\\n        <a class=\\\"nav-link\\\" (click)=\\\"continueLastInventory()\\\">Inventarisieren</a>\\r\\n      </li>\\r\\n\\r\\n      <li routerLinkActive=\\\"active\\\" class=\\\"nav-item\\\">\\r\\n        <a class=\\\"nav-link\\\" routerLink=\\\"/sync\\\">Sync</a>\\r\\n      </li>\\r\\n\\r\\n      <li routerLinkActive=\\\"active\\\" class=\\\"nav-item\\\">\\r\\n        <a class=\\\"nav-link\\\" routerLink=\\\"/settings\\\"><fa-icon [icon]=\\\"faCog\\\"></fa-icon></a>\\r\\n      </li>\\r\\n\\r\\n\\r\\n      <li routerLinkActive=\\\"active\\\" class=\\\"nav-item\\\">\\r\\n        <a class=\\\"nav-link\\\" routerLink=\\\"/auth/logout\\\">Logout</a>\\r\\n      </li>\\r\\n    </ul>\\r\\n  </div>\\r\\n</nav>\\r\\n\"","export default \"<label class=\\\"mb-0\\\">\\r\\n  <span class=\\\"d-none d-md-inline\\\">{{title}}: </span>\\r\\n  <span class=\\\"d-inline d-md-none\\\">{{short}}: </span>\\r\\n  {{totalText}}\\r\\n</label>\\r\\n<div>\\r\\n\\r\\n  <div class=\\\"progress progress-elemente\\\" (click)=\\\"onClickRest($event)\\\"  [ngClass]=\\\"{'bg-danger' : total > 0}\\\">\\r\\n    <div class=\\\"progress-bar bg-success\\\" (click)=\\\"onClickBarDone($event)\\\"  [ngClass]=\\\"type\\\" role=\\\"progressbar\\\" [style.width]=\\\"progressAmount + '%'\\\">\\r\\n    </div>\\r\\n    <span class=\\\"progress-text\\\">{{donePercentText}}</span>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-6 text-success\\\">\\r\\n\\r\\n      <button type=\\\"button\\\" (click)=\\\"onClickDone($event)\\\" class=\\\"btn btn-sm btn-light btn-sx text-success\\\">\\r\\n        <span class=\\\"d-none d-md-inline\\\">\\r\\n        Erledigt </span>{{doneAmountText}}\\r\\n      </button>\\r\\n\\r\\n    </div>\\r\\n    <div class=\\\"col-6 text-danger text-right\\\">\\r\\n\\r\\n      <button type=\\\"button\\\" (click)=\\\"onClickRest($event)\\\" class=\\\"btn btn-sm btn-light btn-sx text-danger\\\">\\r\\n        <span class=\\\"d-none d-md-inline\\\">\\r\\n        Rest </span>{{restAmountText}}\\r\\n      </button>\\r\\n\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\\r\\n\"","export default \"<ng-content></ng-content>\\r\\n\"","export default \"\\r\\n  <span class=\\\"badge mr-2\\\" [ngClass]=\\\"{\\r\\n        'badge-success':currentState?.hasNetworkConnection,\\r\\n        'badge-danger':!currentState?.hasNetworkConnection\\r\\n        }\\\">\\r\\n      {{ currentState?.hasNetworkConnection ? 'Online' : 'Offline' }}\\r\\n  </span>\\r\\n  <span class=\\\"badge mr-2\\\" [ngClass]=\\\"{\\r\\n        'badge-success': currentState?.hasServerAccess,\\r\\n        'badge-danger': !currentState?.hasServerAccess\\r\\n        }\\\">\\r\\n      Backend: {{ currentState?.hasServerAccess ? 'ON' : 'OFF' }}\\r\\n  </span>\\r\\n  <span class=\\\"badge mr-2\\\" [ngClass]=\\\"{\\r\\n        'badge-success': currentState?.hasValidSession,\\r\\n        'badge-danger': !currentState?.hasValidSession\\r\\n        }\\\">\\r\\n      {{ currentState?.hasValidSession ? 'Eingeloggt' : 'Login abgelaufen' }}\\r\\n  </span>\\r\\n  <ng-container *ngIf=\\\"numUnsynced > -1\\\">\\r\\n    <span class=\\\"badge mr-2\\\" [ngClass]=\\\"{\\r\\n        'badge-success':numUnsynced===0,\\r\\n        'badge-danger':numUnsynced!==0\\r\\n        }\\\">\\r\\n      Unsynced:  {{ numUnsynced }}\\r\\n    </span>\\r\\n  </ng-container>\\r\\n    <span class=\\\"badge badge-info\\\">\\r\\n      v{{currentApplicationVersion}}\\r\\n    </span>\\r\\n\"","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export default \"h1 {\\n  color: #fff;\\n}\\n\\ndiv.c1 div.c1-1 {\\n  color: green;\\n}\\n\\ndiv.c1-1 {\\n  color: red;\\n}\\n\\n.body-bg-login {\\n  background: linear-gradient(to right bottom, #1cc7d0, #013ca6, #013ca6, #1cc7d0);\\n}\\n\\n.app-content .app-content-inner-box {\\n  min-height: calc(100% - 72px);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxhcHAuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNJLFdBQUE7QUNBSjs7QURJSTtFQUNJLFlBQUE7QUNEUjs7QURLQTtFQUNJLFVBQUE7QUNGSjs7QURLQTtFQUNFLGdGQUFBO0FDRkY7O0FES0E7RUFDRSw2QkFBQTtBQ0ZGIiwiZmlsZSI6InNyYy9hcHAvYXBwLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmgxIHtcclxuICAgIGNvbG9yOiAjZmZmO1xyXG59XHJcblxyXG5kaXYuYzEge1xyXG4gICAgZGl2LmMxLTEge1xyXG4gICAgICAgIGNvbG9yOiBncmVlbjtcclxuICAgIH1cclxufVxyXG5cclxuZGl2LmMxLTEge1xyXG4gICAgY29sb3I6IHJlZDtcclxufVxyXG5cclxuLmJvZHktYmctbG9naW4ge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCBib3R0b20sICMxY2M3ZDAgLCMwMTNjYTYsICMwMTNjYTYsIzFjYzdkMCk7XHJcbn1cclxuXHJcbi5hcHAtY29udGVudCAuYXBwLWNvbnRlbnQtaW5uZXItYm94IHtcclxuICBtaW4taGVpZ2h0OiBjYWxjKDEwMCUgLSA3MnB4KTtcclxufVxyXG4iLCJoMSB7XG4gIGNvbG9yOiAjZmZmO1xufVxuXG5kaXYuYzEgZGl2LmMxLTEge1xuICBjb2xvcjogZ3JlZW47XG59XG5cbmRpdi5jMS0xIHtcbiAgY29sb3I6IHJlZDtcbn1cblxuLmJvZHktYmctbG9naW4ge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQgYm90dG9tLCAjMWNjN2QwLCAjMDEzY2E2LCAjMDEzY2E2LCAjMWNjN2QwKTtcbn1cblxuLmFwcC1jb250ZW50IC5hcHAtY29udGVudC1pbm5lci1ib3gge1xuICBtaW4taGVpZ2h0OiBjYWxjKDEwMCUgLSA3MnB4KTtcbn0iXX0= */\"","import {AfterViewInit, Component, ElementRef, HostListener, OnInit, ViewChild} from '@angular/core';\r\n\r\nimport { ConnectionService } from './shared/services/connection-service.service';\r\nimport {SwPush, SwUpdate} from '@angular/service-worker';\r\nimport {ToastrService} from 'ngx-toastr';\r\nimport {environment} from '../environments/environment';\r\nimport {NavigationEnd, Router} from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'frontend';\r\n  url = '';\r\n  isLoginPage = false;\r\n  currentApplicationVersion = environment.appVersion;\r\n  readonly VAPID_PUBLIC_KEY = 'BG2ymYfILNZzi183knEsp5PkW8jaGhsMR0u1iAriOfRUjKrLuAQLE6oZf_TguLnBPDksMDE900zi_qnoqmjOE3Y';\r\n\r\n  heartBeatState;\r\n  deferredInstallPrompt: any;\r\n\r\n  constructor(private connectionService: ConnectionService,\r\n              private toastr: ToastrService,\r\n              private router: Router,\r\n              private swUpdate: SwUpdate,\r\n              private swPush: SwPush) {\r\n    this.heartBeatState = this.connectionService.options.enableHeartbeat;\r\n\r\n    if (this.swUpdate.isEnabled) {\r\n      this.setupUpdates();\r\n    }\r\n\r\n    this.router.events.subscribe( event => {\r\n      if (event instanceof NavigationEnd) {\r\n        console.log('router.event (NavigationEnd)', this.router.url, { event });\r\n        this.url = (event as NavigationEnd).url;\r\n        const rgxAuth = new RegExp('\\/auth\\\\b');\r\n        this.isLoginPage = rgxAuth.test(this.url);\r\n      }\r\n    });\r\n  }\r\n\r\n  @HostListener('window:beforeinstallprompt', ['$event'])\r\n  onPrompt(event: Event) {\r\n    this.deferredInstallPrompt = event;\r\n    return false;\r\n  }\r\n\r\n  setHeartBeatState(state: boolean) {\r\n    this.heartBeatState = state;\r\n    this.connectionService.updateOptions({enableHeartbeat: state});\r\n  }\r\n/*\r\n\r\n        updates.available.subscribe(event => {\r\n          console.log('current version is', event.current);\r\n          console.log('available version is', event.available);\r\n        });\r\n        updates.activated.subscribe(event => {\r\n          console.log('old version was', event.previous);\r\n          console.log('new version is', event.current);\r\n        });\r\n\r\n        updates.available.subscribe(event => {\r\n            updates.activateUpdate().then(() => this.updateApp());\r\n        });\r\n */\r\n  setupUpdates() {\r\n    return;\r\n    this.swUpdate.available.subscribe(event => {\r\n      // Update wurde entdeckt\r\n      console.log('current version is', event.current);\r\n      console.log('available version is', event.available);\r\n\r\n      const message = 'Aktuelle Version: ' + event.current + '<br>Aktuelle Version' + event.available;\r\n      const action = 'New Version is available!';\r\n\r\n      // Benutzer auf Update hinweisen und Seite neu laden\r\n      this.toastr.info(message, action).onAction.subscribe(\r\n        () => location.reload()\r\n      );\r\n    });\r\n\r\n    // Update herunterladen\r\n    this.swUpdate.activateUpdate().then(e => {\r\n      // Update wurde heruntergeladen\r\n\r\n      const message = 'Anwendung wurde aktualisert und wird neu geladen';\r\n      const action = 'Reload!';\r\n\r\n      // Benutzer auf Update hinweisen und Seite neu laden\r\n      this.toastr.info(message, action).onAction.subscribe(\r\n        () => location.reload()\r\n      );\r\n    });\r\n\r\n    // Auf Updates prfen\r\n    this.swUpdate.checkForUpdate();\r\n  }\r\n\r\n  async setupPush() {\r\n\r\n    const pushSubscription = await this.swPush.requestSubscription({\r\n      serverPublicKey: this.VAPID_PUBLIC_KEY\r\n    })\r\n      .then( (sub: PushSubscription) => {\r\n          console.log('Push Subscription', sub );\r\n        },\r\n        (err: any) => {\r\n          console.error('error registering for push', err);\r\n        });\r\n    console.log({pushSubscription});\r\n  }\r\n\r\n  installApp() {\r\n    this.deferredInstallPrompt.prompt();\r\n  }\r\n}\r\n","\r\nimport { NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { FormsModule } from '@angular/forms';\r\nimport {HTTP_INTERCEPTORS, HttpClientModule} from '@angular/common/http';\r\n\r\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\r\nimport { library } from '@fortawesome/fontawesome-svg-core';\r\nimport { faSquare, faCheckSquare, faBarcode, faUser, faKey } from '@fortawesome/free-solid-svg-icons';\r\nimport { faSquare as farSquare, faCheckSquare as farCheckSquare } from '@fortawesome/free-regular-svg-icons';\r\nimport { faStackOverflow, faGithub, faMedium } from '@fortawesome/free-brands-svg-icons';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { AuthComponent } from './pages/auth/auth.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { SelectInventoryComponent } from './pages/select-inventory/select-inventory.component';\r\nimport { NgbheaderComponent } from './shared/components/ngbheader/ngbheader.component';\r\nimport { InventFormComponent } from './pages/invent-form/invent-form.component';\r\nimport { InventoryProgressDirective } from './shared/inventory-progress/inventory-progress.directive';\r\nimport { ProgressbarComponent } from './shared/components/progressbar/progressbar.component';\r\nimport { AuthInterceptorService } from './pages/auth/auth-interceptor.service';\r\nimport { SelectCreateRaumComponent } from './pages/invent-form/modals/select-create-raum/select-create-raum.component';\r\nimport { SelectCreateArtikelComponent } from './pages/invent-form/modals/select-create-artikel/select-create-artikel.component';\r\nimport { CreateArtikelImageComponent } from './pages/invent-form/modals/create-artikel-image/create-artikel-image.component';\r\nimport { ShowArtikelImageComponent } from './pages/invent-form/modals/show-artikel-image/show-artikel-image.component';\r\nimport { SelectSearchRaumComponent } from './pages/invent-form/modals/select-search-raum/select-search-raum.component';\r\nimport { SelectSearchArtikelComponent } from './pages/invent-form/modals/select-search-artikel/select-search-artikel.component';\r\nimport { ApiService } from './shared/services/api.service';\r\nimport { StatusCheckComponent } from './shared/components/status-check/status-check.component';\r\nimport { WebcamModule } from 'ngx-webcam';\r\nimport { AngularCropperjsModule } from 'angular-cropperjs';\r\n// import imageCompression from 'browser-image-compression';\r\n\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { ToastrModule } from 'ngx-toastr';\r\n\r\n// the scanner\r\nimport { ZXingScannerModule } from '@zxing/ngx-scanner';\r\nimport { ScannerComponent } from './pages/invent-form/modals/scanner/scanner.component';\r\nimport { ScannerinputDirective } from './shared/directives/scannerinput.directive';\r\nimport { ScannerdetectionComponent } from './shared/components/scannerdetection/scannerdetection.component';\r\nimport { RaumListDoneComponent } from './pages/invent-form/modals/raum-list-done/raum-list-done.component';\r\nimport { RaumListRestComponent } from './pages/invent-form/modals/raum-list-rest/raum-list-rest.component';\r\nimport { GesamtListRestComponent } from './pages/invent-form/modals/gesamt-list-rest/gesamt-list-rest.component';\r\nimport { GesamtListDoneComponent } from './pages/invent-form/modals/gesamt-list-done/gesamt-list-done.component';\r\nimport { DbsyncComponent } from './pages/dbsync/dbsync.component';\r\nimport { SettingsComponent } from './pages/settings/settings.component';\r\nimport { environment } from '../environments/environment';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { EditRaumComponent } from './pages/invent-form/modals/edit-raum/edit-raum.component';\r\nimport { EditInventarComponent } from './pages/invent-form/modals/edit-inventar/edit-inventar.component';\r\n\r\nimport { AuthGuardService as AuthGuard } from './pages/auth/auth-guard.service';\r\nimport { ImageboxComponent } from './pages/invent-form/modals/imagebox/imagebox.component';\r\nimport { ShowRaumImageComponent } from './pages/invent-form/modals/show-raum-image/show-raum-image.component';\r\nimport { CreateRaumImageComponent } from './pages/invent-form/modals/create-raum-image/create-raum-image.component';\r\nimport { BatchBarcodesComponent } from './pages/invent-form/modals/batch-barcodes/batch-barcodes.component';\r\n\r\nconst appRoutes: Routes = [\r\n  { path: '', component: AuthComponent },\r\n  { path: 'auth', component: AuthComponent },\r\n  { path: 'auth/logout', component: AuthComponent },\r\n  { path: 'select-inventory', component: SelectInventoryComponent, canActivate: [AuthGuard]},\r\n  { path: 'form-inventory/:clientid/:buildingid/:roomid', component: InventFormComponent, canActivate: [AuthGuard] },\r\n  { path: 'form-inventory/:clientid/:buildingid', component: InventFormComponent, canActivate: [AuthGuard] },\r\n  { path: 'form-inventory', component: InventFormComponent, canActivate: [AuthGuard] },\r\n  { path: 'sync', component: DbsyncComponent, canActivate: [AuthGuard] },\r\n  { path: 'settings', component: SettingsComponent, canActivate: [AuthGuard] }\r\n];\r\n\r\nasync function persist() {\r\n  return navigator.storage && navigator.storage.persist && await navigator.storage.persist();\r\n}\r\nif ('localStorage' in window && localStorage.getItem('ClientDeviceId') === null) {\r\n  localStorage.setItem('ClientDeviceId', JSON.stringify(0) );\r\n}\r\npersist();\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    AuthComponent,\r\n    SelectInventoryComponent,\r\n    NgbheaderComponent,\r\n    InventFormComponent,\r\n    InventoryProgressDirective,\r\n    ProgressbarComponent,\r\n    SelectCreateRaumComponent,\r\n    SelectCreateArtikelComponent,\r\n    CreateArtikelImageComponent,\r\n    ShowArtikelImageComponent,\r\n    ScannerComponent,\r\n    ScannerinputDirective,\r\n    ScannerdetectionComponent,\r\n    SelectSearchRaumComponent,\r\n    SelectSearchArtikelComponent,\r\n    StatusCheckComponent,\r\n    RaumListDoneComponent,\r\n    RaumListRestComponent,\r\n    GesamtListRestComponent,\r\n    GesamtListDoneComponent,\r\n    DbsyncComponent,\r\n    SettingsComponent,\r\n    EditRaumComponent\r\n    , EditInventarComponent, ImageboxComponent, ShowRaumImageComponent, CreateRaumImageComponent, BatchBarcodesComponent\r\n],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    NgbModule,\r\n    HttpClientModule,\r\n    RouterModule.forRoot( appRoutes ),\r\n    FontAwesomeModule,\r\n    ZXingScannerModule,\r\n    WebcamModule,\r\n    AngularCropperjsModule,\r\n    BrowserAnimationsModule, // required animations module\r\n    ToastrModule.forRoot({\r\n      enableHtml: true,\r\n      closeButton: true,\r\n      progressBar: true,\r\n      maxOpened: 6,\r\n      autoDismiss: true,\r\n      preventDuplicates: true,\r\n      resetTimeoutOnDuplicate: true\r\n    }),\r\n    ServiceWorkerModule.register('ngsw-worker.js', {\r\n      enabled: environment.production,\r\n      registrationStrategy: 'registerImmediately'\r\n    })\r\n  ],\r\n  entryComponents: [\r\n    CreateArtikelImageComponent,\r\n    ShowArtikelImageComponent,\r\n    ScannerComponent,\r\n    SelectCreateArtikelComponent,\r\n    SelectCreateRaumComponent,\r\n    SelectSearchRaumComponent,\r\n    SelectSearchArtikelComponent,\r\n    RaumListDoneComponent,\r\n    RaumListRestComponent,\r\n    GesamtListRestComponent,\r\n    GesamtListDoneComponent,\r\n    EditRaumComponent\r\n    , EditInventarComponent\r\n    , ImageboxComponent\r\n    , ShowRaumImageComponent\r\n    , CreateRaumImageComponent\r\n    , BatchBarcodesComponent\r\n  ],\r\n  providers: [\r\n    {\r\n      provide: HTTP_INTERCEPTORS,\r\n      useClass: AuthInterceptorService,\r\n      multi: true\r\n    },\r\n    ApiService\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {\r\n\r\n  constructor() {\r\n    library.add( faSquare, faCheckSquare, faBarcode, faUser, faKey,\r\n      farSquare, farCheckSquare,\r\n      faStackOverflow, faGithub, faMedium);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router, CanActivate } from '@angular/router';\r\nimport { AuthService } from './auth.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthGuardService implements CanActivate {\r\n  constructor(\r\n    public auth: AuthService,\r\n    public router: Router\r\n  ) {}\r\n  canActivate(): boolean {\r\n    const isLoggedIn = this.auth.isLoggedIn();\r\n    if (!this.auth.isLoggedIn()) {\r\n       console.log('#16 AuthGuardService navigate to auth', { isLoggedIn });\r\n       this.router.navigate(['auth']);\r\n       return false;\r\n    }\r\n    return true;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {environment} from '../../../environments/environment';\r\n\r\nimport {\r\n  HttpInterceptor,\r\n  HttpRequest,\r\n  HttpHandler,\r\n  HttpParams,\r\n  HttpEvent\r\n} from '@angular/common/http';\r\n\r\nimport {Observable, throwError} from 'rxjs';\r\nimport {take, exhaustMap, catchError} from 'rxjs/operators';\r\n\r\nimport { AuthService } from './auth.service';\r\nimport {Router} from '@angular/router';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthInterceptorService implements HttpInterceptor {\r\n\r\n  private applicationVersion = environment.appVersion;\r\n\r\n  constructor(private authService: AuthService, private router: Router) { }\r\n\r\n  private addAuthHeader(request: HttpRequest<any>): HttpRequest<any> {\r\n    const user = this.authService.getUser();\r\n    if (!user) {\r\n      return request;\r\n    }\r\n\r\n    return request.clone({\r\n      setHeaders: {\r\n        Authorization: `Bearer ${user.token}`,\r\n        'Client-Device-Id': `${this.authService.getClientDeviceId()}`,\r\n        'Client-App-Version': this.applicationVersion\r\n      }\r\n    });\r\n  }\r\n\r\n  private handleResponseError(error, request?, next?): Observable<never> {\r\n    // Business error\r\n    if (error.status === 400) {\r\n      // Show message\r\n    } else if (error.status === 401 || error.status === 403) {\r\n      if (this.router.url.indexOf('/auth') === -1) {\r\n        console.error('Login ist abgelaufen. Bitte neu einloggen! navigate to /auth');\r\n        this.router.navigateByUrl('/auth');\r\n      }\r\n    }\r\n\r\n    return throwError(error);\r\n  }\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\r\n    // Handle Request\r\n    const request = this.addAuthHeader(req);\r\n\r\n    // Handle Response\r\n    return next.handle(request).pipe(\r\n      catchError((error, caught) => {\r\n        return this.handleResponseError(error, request, next);\r\n    }));\r\n  }\r\n}\r\n","export default \"/* Coded with love by Mutiullah Samim */\\nbody,\\nhtml {\\n  margin: 0;\\n  padding: 0;\\n  height: 100%;\\n}\\nh1, .h1 {\\n  z-index: 1;\\n  font-size: 2rem;\\n  font-weight: 100;\\n  color: #2d2d2d !important;\\n  position: relative;\\n  text-align: center;\\n  width: 100%;\\n  margin-bottom: 2rem;\\n}\\nh2, .h2 {\\n  font-size: 3rem;\\n  color: #2d2d2d;\\n  margin-bottom: 1.5rem;\\n}\\n.user_card.user_card_loginbox_bg {\\n  background-color: #eeeeee;\\n  box-sizing: border-box;\\n  width: 100%;\\n  max-width: 520px;\\n  padding-top: 1.5rem;\\n  padding-bottom: 1.5rem;\\n  padding-left: 5%;\\n  padding-right: 5%;\\n  margin-bottom: 1.5rem;\\n  margin-top: auto;\\n  margin-left: auto;\\n  margin-right: auto;\\n  position: relative;\\n  display: flex;\\n  justify-content: center;\\n  flex-direction: column;\\n}\\n.form_container {\\n  width: 100%;\\n}\\n.form_container form {\\n  width: 100%;\\n}\\n.login_btn {\\n  width: 75%;\\n  max-width: 230px;\\n  min-width: 160px;\\n  background: #2d2d2d !important;\\n  color: #ffffff !important;\\n  font-size: 1.2rem;\\n  border-radius: 0 !important;\\n}\\n.login_btn:focus {\\n  box-shadow: none !important;\\n  outline: 0px !important;\\n}\\n.login_container {\\n  margin-top: 2rem;\\n  padding: 0;\\n}\\n.input-group-text {\\n  background: #c6c6c6 !important;\\n  color: white !important;\\n  border: 0 !important;\\n  font-size: 1.2rem;\\n}\\n.input_user,\\n.input_pass:focus {\\n  box-shadow: none !important;\\n  outline: 0px !important;\\n}\\n.custom-checkbox .custom-control-input:checked ~ .custom-control-label::before {\\n  background-color: #c0392b !important;\\n}\\n.form_containter .form-control,\\n.form-control {\\n  background-color: #ffffff !important;\\n  font-size: 1.2rem;\\n  color: #2d2d2d;\\n}\\n/* Change Autocomplete styles in Chrome*/\\ninput:-webkit-autofill,\\ninput:-webkit-autofill:hover,\\ninput:-webkit-autofill:focus,\\ntextarea:-webkit-autofill,\\ntextarea:-webkit-autofill:hover,\\ntextarea:-webkit-autofill:focus,\\nselect:-webkit-autofill,\\nselect:-webkit-autofill:hover,\\nselect:-webkit-autofill:focus {\\n  border: none;\\n  color: #2d2d2d !important;\\n  -webkit-text-fill-color: #2d2d2d;\\n  -webkit-box-shadow: none;\\n  transition: background-color 5000s ease-in-out 0s;\\n  transition: background-color 5000s ease-in-out 0s;\\n  transition: background-color 5000s ease-in-out 0s;\\n  font-family: \\\"Lato\\\" !important;\\n  font-weight: 300 !important;\\n  font-style: normal !important;\\n  font-size: 1.3rem !important;\\n}\\ninput:-webkit-autofill::first-line {\\n  font-family: \\\"Lato\\\";\\n  font-weight: 300;\\n  font-style: normal;\\n  font-size: 1.3rem;\\n  color: #2d2d2d !important;\\n}\\n.form-control.ng-invalid {\\n  border-right: 0.4rem solid #f7a9a9;\\n}\\n.form-control.ng-valid {\\n  border-right: 0.4rem solid #adfaad;\\n}\\n.brand-circle-container {\\n  width: 100%;\\n  text-align: center;\\n  margin-top: 10px;\\n  margin-bottom: 5px;\\n}\\n.brand-circle-grey {\\n  margin-left: auto;\\n  margin-right: auto;\\n  width: 18vh;\\n  height: 18vh;\\n  min-width: 100px;\\n  min-height: 100px;\\n  max-width: 180px;\\n  max-height: 180px;\\n  border-radius: 50%;\\n  background-color: #eee;\\n  margin-bottom: 1.6vh;\\n  margin-top: 2vh;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvYXV0aC9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxhdXRoXFxhdXRoLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9wYWdlcy9hdXRoL2F1dGguY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUMsdUNBQUE7QUFDRDs7RUFFSSxTQUFBO0VBQ0EsVUFBQTtFQUNBLFlBQUE7QUNDSjtBRElFO0VBQ0UsVUFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxtQkFBQTtBQ0RKO0FER0U7RUFDRSxlQUFBO0VBQ0EsY0FBQTtFQUNBLHFCQUFBO0FDQUo7QURFRTtFQUNFLHlCQUFBO0VBQ0Esc0JBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7RUFFQSxtQkFBQTtFQUNBLHNCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUVBLHFCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBRUEsa0JBQUE7RUFDQSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxzQkFBQTtBQ0ZKO0FEVUE7RUFDRSxXQUFBO0FDUEY7QURTQTtFQUNFLFdBQUE7QUNORjtBRFFBO0VBQ0UsVUFBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSw4QkFBQTtFQUNBLHlCQUFBO0VBQ0EsaUJBQUE7RUFDQSwyQkFBQTtBQ0xGO0FEUUE7RUFDSSwyQkFBQTtFQUNBLHVCQUFBO0FDTEo7QURPQTtFQUNFLGdCQUFBO0VBQ0UsVUFBQTtBQ0pKO0FETUE7RUFDRSw4QkFBQTtFQUNBLHVCQUFBO0VBQ0Esb0JBQUE7RUFDQSxpQkFBQTtBQ0hGO0FETUE7O0VBRUksMkJBQUE7RUFDQSx1QkFBQTtBQ0hKO0FES0E7RUFDSSxvQ0FBQTtBQ0ZKO0FES0E7O0VBRUUsb0NBQUE7RUFDQSxpQkFBQTtFQUNBLGNBQUE7QUNGRjtBRElBLHdDQUFBO0FBQ0U7Ozs7Ozs7OztFQVNFLFlBQUE7RUFDQSx5QkFBQTtFQUNBLGdDQUFBO0VBQ0Esd0JBQUE7RUFDQSxpREFBQTtFQUNBLGlEQUFBO0VBQ0EsaURBQUE7RUFDQSw4QkFBQTtFQUNBLDJCQUFBO0VBQ0EsNkJBQUE7RUFDQSw0QkFBQTtBQ0RKO0FESUU7RUFDRSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtFQUNBLHlCQUFBO0FDREo7QURJQTtFQUNFLGtDQUFBO0FDREY7QURLQTtFQUNFLGtDQUFBO0FDRkY7QURLQTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0Esa0JBQUE7QUNGRjtBREtBO0VBQ0UsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLHNCQUFBO0VBQ0Esb0JBQUE7RUFDQSxlQUFBO0FDRkYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9hdXRoL2F1dGguY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcdC8qIENvZGVkIHdpdGggbG92ZSBieSBNdXRpdWxsYWggU2FtaW0gKi9cclxuYm9keSxcclxuaHRtbCB7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcblxyXG4uYmcge1xyXG59XHJcbiAgaDEsIC5oMSB7XHJcbiAgICB6LWluZGV4OiAxO1xyXG4gICAgZm9udC1zaXplOiAycmVtO1xyXG4gICAgZm9udC13ZWlnaHQ6IDEwMDtcclxuICAgIGNvbG9yOiAjMmQyZDJkICFpbXBvcnRhbnQ7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIG1hcmdpbi1ib3R0b206IDJyZW07XHJcbiAgfVxyXG4gIGgyLCAuaDIge1xyXG4gICAgZm9udC1zaXplOiAzcmVtO1xyXG4gICAgY29sb3I6ICMyZDJkMmQ7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxLjVyZW07XHJcbiAgfVxyXG4gIC51c2VyX2NhcmQudXNlcl9jYXJkX2xvZ2luYm94X2JnIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7XHJcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBtYXgtd2lkdGg6IDUyMHB4O1xyXG5cclxuICAgIHBhZGRpbmctdG9wOiAxLjVyZW07XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogMS41cmVtO1xyXG4gICAgcGFkZGluZy1sZWZ0OiA1JTtcclxuICAgIHBhZGRpbmctcmlnaHQ6IDUlO1xyXG5cclxuICAgIG1hcmdpbi1ib3R0b206IDEuNXJlbTtcclxuICAgIG1hcmdpbi10b3A6IGF1dG87XHJcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgIG1hcmdpbi1yaWdodDogYXV0bztcclxuXHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgLy9ib3gtc2hhZG93OiAwIDRweCA4cHggMCByZ2JhKDAsIDAsIDAsIDAuMiksIDAgNnB4IDIwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTkpO1xyXG4gICAgLy8td2Via2l0LWJveC1zaGFkb3c6IDAgNHB4IDhweCAwIHJnYmEoMCwgMCwgMCwgMC4yKSwgMCA2cHggMjBweCAwIHJnYmEoMCwgMCwgMCwgMC4xOSk7XHJcbiAgICAvLy1tb3otYm94LXNoYWRvdzogMCA0cHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpLCAwIDZweCAyMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjE5KTtcclxuICAgIC8vIGJvcmRlci1yYWRpdXM6IDVweDtcclxuXHJcbn1cclxuXHJcbi5mb3JtX2NvbnRhaW5lciB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuLmZvcm1fY29udGFpbmVyIGZvcm0ge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcbi5sb2dpbl9idG4ge1xyXG4gIHdpZHRoOiA3NSU7XHJcbiAgbWF4LXdpZHRoOiAyMzBweDtcclxuICBtaW4td2lkdGg6IDE2MHB4O1xyXG4gIGJhY2tncm91bmQ6ICMyZDJkMmQgIWltcG9ydGFudDtcclxuICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50O1xyXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xyXG4gIGJvcmRlci1yYWRpdXM6IDAgIWltcG9ydGFudDtcclxufVxyXG5cclxuLmxvZ2luX2J0bjpmb2N1cyB7XHJcbiAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7XHJcbiAgICBvdXRsaW5lOiAwcHggIWltcG9ydGFudDtcclxufVxyXG4ubG9naW5fY29udGFpbmVyIHtcclxuICBtYXJnaW4tdG9wOiAycmVtO1xyXG4gICAgcGFkZGluZzogMDtcclxufVxyXG4uaW5wdXQtZ3JvdXAtdGV4dCB7XHJcbiAgYmFja2dyb3VuZDogI2M2YzZjNiAhaW1wb3J0YW50O1xyXG4gIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xyXG4gIGJvcmRlcjogMCAhaW1wb3J0YW50O1xyXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xyXG4gIC8vIGJvcmRlci1yYWRpdXM6IDAuMjVyZW0gMCAwIDAuMjVyZW0gIWltcG9ydGFudDtcclxufVxyXG4uaW5wdXRfdXNlcixcclxuLmlucHV0X3Bhc3M6Zm9jdXMge1xyXG4gICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50O1xyXG4gICAgb3V0bGluZTogMHB4ICFpbXBvcnRhbnQ7XHJcbn1cclxuLmN1c3RvbS1jaGVja2JveCAuY3VzdG9tLWNvbnRyb2wtaW5wdXQ6Y2hlY2tlZH4uY3VzdG9tLWNvbnRyb2wtbGFiZWw6OmJlZm9yZSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzAzOTJiICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi5mb3JtX2NvbnRhaW50ZXIgLmZvcm0tY29udHJvbCxcclxuLmZvcm0tY29udHJvbCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50O1xyXG4gIGZvbnQtc2l6ZTogMS4ycmVtO1xyXG4gIGNvbG9yOiAjMmQyZDJkO1xyXG59XHJcbi8qIENoYW5nZSBBdXRvY29tcGxldGUgc3R5bGVzIGluIENocm9tZSovXHJcbiAgaW5wdXQ6LXdlYmtpdC1hdXRvZmlsbCxcclxuICBpbnB1dDotd2Via2l0LWF1dG9maWxsOmhvdmVyLFxyXG4gIGlucHV0Oi13ZWJraXQtYXV0b2ZpbGw6Zm9jdXMsXHJcbiAgdGV4dGFyZWE6LXdlYmtpdC1hdXRvZmlsbCxcclxuICB0ZXh0YXJlYTotd2Via2l0LWF1dG9maWxsOmhvdmVyLFxyXG4gIHRleHRhcmVhOi13ZWJraXQtYXV0b2ZpbGw6Zm9jdXMsXHJcbiAgc2VsZWN0Oi13ZWJraXQtYXV0b2ZpbGwsXHJcbiAgc2VsZWN0Oi13ZWJraXQtYXV0b2ZpbGw6aG92ZXIsXHJcbiAgc2VsZWN0Oi13ZWJraXQtYXV0b2ZpbGw6Zm9jdXMge1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgY29sb3I6ICMyZDJkMmQgIWltcG9ydGFudDtcclxuICAgIC13ZWJraXQtdGV4dC1maWxsLWNvbG9yOiAjMmQyZDJkO1xyXG4gICAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lO1xyXG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciA1MDAwcyBlYXNlLWluLW91dCAwcztcclxuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgNTAwMHMgZWFzZS1pbi1vdXQgMHM7XHJcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDUwMDBzIGVhc2UtaW4tb3V0IDBzO1xyXG4gICAgZm9udC1mYW1pbHk6ICdMYXRvJyAhaW1wb3J0YW50O1xyXG4gICAgZm9udC13ZWlnaHQ6IDMwMCAhaW1wb3J0YW50O1xyXG4gICAgZm9udC1zdHlsZTogbm9ybWFsICFpbXBvcnRhbnQ7XHJcbiAgICBmb250LXNpemU6IDEuM3JlbSAhaW1wb3J0YW50O1xyXG4gIH1cclxuXHJcbiAgaW5wdXQ6LXdlYmtpdC1hdXRvZmlsbDo6Zmlyc3QtbGluZSB7XHJcbiAgICBmb250LWZhbWlseTogJ0xhdG8nO1xyXG4gICAgZm9udC13ZWlnaHQ6IDMwMDtcclxuICAgIGZvbnQtc3R5bGU6IG5vcm1hbDtcclxuICAgIGZvbnQtc2l6ZTogMS4zcmVtO1xyXG4gICAgY29sb3I6ICMyZDJkMmQgIWltcG9ydGFudDtcclxuICB9XHJcblxyXG4uZm9ybS1jb250cm9sLm5nLWludmFsaWQge1xyXG4gIGJvcmRlci1yaWdodDogMC40cmVtIHNvbGlkIHJnYigyNDcsIDE2OSwgMTY5KTtcclxufVxyXG5cclxuXHJcbi5mb3JtLWNvbnRyb2wubmctdmFsaWQge1xyXG4gIGJvcmRlci1yaWdodDogMC40cmVtIHNvbGlkIHJnYigxNzMsIDI1MCwgMTczKTtcclxufVxyXG5cclxuLmJyYW5kLWNpcmNsZS1jb250YWluZXJ7XHJcbiAgd2lkdGg6MTAwJTtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgbWFyZ2luLXRvcDoxMHB4O1xyXG4gIG1hcmdpbi1ib3R0b206NXB4O1xyXG59XHJcblxyXG4uYnJhbmQtY2lyY2xlLWdyZXkge1xyXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gIG1hcmdpbi1yaWdodDogYXV0bztcclxuICB3aWR0aDogMTh2aDtcclxuICBoZWlnaHQ6IDE4dmg7XHJcbiAgbWluLXdpZHRoOiAxMDBweDtcclxuICBtaW4taGVpZ2h0OiAxMDBweDtcclxuICBtYXgtd2lkdGg6IDE4MHB4O1xyXG4gIG1heC1oZWlnaHQ6IDE4MHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xyXG4gIG1hcmdpbi1ib3R0b206IDEuNnZoO1xyXG4gIG1hcmdpbi10b3A6IDJ2aFxyXG59XHJcblxyXG5cclxuIiwiLyogQ29kZWQgd2l0aCBsb3ZlIGJ5IE11dGl1bGxhaCBTYW1pbSAqL1xuYm9keSxcbmh0bWwge1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuaDEsIC5oMSB7XG4gIHotaW5kZXg6IDE7XG4gIGZvbnQtc2l6ZTogMnJlbTtcbiAgZm9udC13ZWlnaHQ6IDEwMDtcbiAgY29sb3I6ICMyZDJkMmQgIWltcG9ydGFudDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXJnaW4tYm90dG9tOiAycmVtO1xufVxuXG5oMiwgLmgyIHtcbiAgZm9udC1zaXplOiAzcmVtO1xuICBjb2xvcjogIzJkMmQyZDtcbiAgbWFyZ2luLWJvdHRvbTogMS41cmVtO1xufVxuXG4udXNlcl9jYXJkLnVzZXJfY2FyZF9sb2dpbmJveF9iZyB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXgtd2lkdGg6IDUyMHB4O1xuICBwYWRkaW5nLXRvcDogMS41cmVtO1xuICBwYWRkaW5nLWJvdHRvbTogMS41cmVtO1xuICBwYWRkaW5nLWxlZnQ6IDUlO1xuICBwYWRkaW5nLXJpZ2h0OiA1JTtcbiAgbWFyZ2luLWJvdHRvbTogMS41cmVtO1xuICBtYXJnaW4tdG9wOiBhdXRvO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxuXG4uZm9ybV9jb250YWluZXIge1xuICB3aWR0aDogMTAwJTtcbn1cblxuLmZvcm1fY29udGFpbmVyIGZvcm0ge1xuICB3aWR0aDogMTAwJTtcbn1cblxuLmxvZ2luX2J0biB7XG4gIHdpZHRoOiA3NSU7XG4gIG1heC13aWR0aDogMjMwcHg7XG4gIG1pbi13aWR0aDogMTYwcHg7XG4gIGJhY2tncm91bmQ6ICMyZDJkMmQgIWltcG9ydGFudDtcbiAgY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxLjJyZW07XG4gIGJvcmRlci1yYWRpdXM6IDAgIWltcG9ydGFudDtcbn1cblxuLmxvZ2luX2J0bjpmb2N1cyB7XG4gIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbiAgb3V0bGluZTogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5sb2dpbl9jb250YWluZXIge1xuICBtYXJnaW4tdG9wOiAycmVtO1xuICBwYWRkaW5nOiAwO1xufVxuXG4uaW5wdXQtZ3JvdXAtdGV4dCB7XG4gIGJhY2tncm91bmQ6ICNjNmM2YzYgIWltcG9ydGFudDtcbiAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gIGJvcmRlcjogMCAhaW1wb3J0YW50O1xuICBmb250LXNpemU6IDEuMnJlbTtcbn1cblxuLmlucHV0X3VzZXIsXG4uaW5wdXRfcGFzczpmb2N1cyB7XG4gIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbiAgb3V0bGluZTogMHB4ICFpbXBvcnRhbnQ7XG59XG5cbi5jdXN0b20tY2hlY2tib3ggLmN1c3RvbS1jb250cm9sLWlucHV0OmNoZWNrZWQgfiAuY3VzdG9tLWNvbnRyb2wtbGFiZWw6OmJlZm9yZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNjMDM5MmIgIWltcG9ydGFudDtcbn1cblxuLmZvcm1fY29udGFpbnRlciAuZm9ybS1jb250cm9sLFxuLmZvcm0tY29udHJvbCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxLjJyZW07XG4gIGNvbG9yOiAjMmQyZDJkO1xufVxuXG4vKiBDaGFuZ2UgQXV0b2NvbXBsZXRlIHN0eWxlcyBpbiBDaHJvbWUqL1xuaW5wdXQ6LXdlYmtpdC1hdXRvZmlsbCxcbmlucHV0Oi13ZWJraXQtYXV0b2ZpbGw6aG92ZXIsXG5pbnB1dDotd2Via2l0LWF1dG9maWxsOmZvY3VzLFxudGV4dGFyZWE6LXdlYmtpdC1hdXRvZmlsbCxcbnRleHRhcmVhOi13ZWJraXQtYXV0b2ZpbGw6aG92ZXIsXG50ZXh0YXJlYTotd2Via2l0LWF1dG9maWxsOmZvY3VzLFxuc2VsZWN0Oi13ZWJraXQtYXV0b2ZpbGwsXG5zZWxlY3Q6LXdlYmtpdC1hdXRvZmlsbDpob3ZlcixcbnNlbGVjdDotd2Via2l0LWF1dG9maWxsOmZvY3VzIHtcbiAgYm9yZGVyOiBub25lO1xuICBjb2xvcjogIzJkMmQyZCAhaW1wb3J0YW50O1xuICAtd2Via2l0LXRleHQtZmlsbC1jb2xvcjogIzJkMmQyZDtcbiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lO1xuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDUwMDBzIGVhc2UtaW4tb3V0IDBzO1xuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDUwMDBzIGVhc2UtaW4tb3V0IDBzO1xuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDUwMDBzIGVhc2UtaW4tb3V0IDBzO1xuICBmb250LWZhbWlseTogXCJMYXRvXCIgIWltcG9ydGFudDtcbiAgZm9udC13ZWlnaHQ6IDMwMCAhaW1wb3J0YW50O1xuICBmb250LXN0eWxlOiBub3JtYWwgIWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxLjNyZW0gIWltcG9ydGFudDtcbn1cblxuaW5wdXQ6LXdlYmtpdC1hdXRvZmlsbDo6Zmlyc3QtbGluZSB7XG4gIGZvbnQtZmFtaWx5OiBcIkxhdG9cIjtcbiAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgZm9udC1zdHlsZTogbm9ybWFsO1xuICBmb250LXNpemU6IDEuM3JlbTtcbiAgY29sb3I6ICMyZDJkMmQgIWltcG9ydGFudDtcbn1cblxuLmZvcm0tY29udHJvbC5uZy1pbnZhbGlkIHtcbiAgYm9yZGVyLXJpZ2h0OiAwLjRyZW0gc29saWQgI2Y3YTlhOTtcbn1cblxuLmZvcm0tY29udHJvbC5uZy12YWxpZCB7XG4gIGJvcmRlci1yaWdodDogMC40cmVtIHNvbGlkICNhZGZhYWQ7XG59XG5cbi5icmFuZC1jaXJjbGUtY29udGFpbmVyIHtcbiAgd2lkdGg6IDEwMCU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLXRvcDogMTBweDtcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xufVxuXG4uYnJhbmQtY2lyY2xlLWdyZXkge1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICB3aWR0aDogMTh2aDtcbiAgaGVpZ2h0OiAxOHZoO1xuICBtaW4td2lkdGg6IDEwMHB4O1xuICBtaW4taGVpZ2h0OiAxMDBweDtcbiAgbWF4LXdpZHRoOiAxODBweDtcbiAgbWF4LWhlaWdodDogMTgwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcbiAgbWFyZ2luLWJvdHRvbTogMS42dmg7XG4gIG1hcmdpbi10b3A6IDJ2aDtcbn0iXX0= */\"","import {Component, OnInit, Input, OnDestroy} from '@angular/core';\r\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport {AuthResponseData, AuthService} from './auth.service';\r\nimport {Observable, Subscription} from 'rxjs';\r\nimport {Router} from '@angular/router';\r\nimport {BasedataService} from '../../shared/services/basedata.service';\r\nimport {ConnectionService, ConnectionState} from '../../shared/services/connection-service.service';\r\n\r\n@Component({\r\n  selector: 'app-auth',\r\n  templateUrl: './auth.component.html',\r\n  styleUrls: ['./auth.component.scss']\r\n})\r\nexport class AuthComponent implements OnInit, OnDestroy {\r\n  isLoginMode = true;\r\n  isLoading = false;\r\n  error: string = null;\r\n\r\n  @Input() username: string;\r\n  @Input() password: string;\r\n\r\n  @Input() onlineStatusMessage: string;\r\n  @Input() onlineStatus: string;\r\n\r\n  hasConnection = false;\r\n  hasServerConnection = false;\r\n\r\n  connectionSubscription: Subscription;\r\n\r\n  public form = {\r\n    email: null,\r\n    password: null,\r\n  };\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private connection: ConnectionService,\r\n    private baseData: BasedataService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.authService.logout();\r\n    this.hasConnection = this.connection.hasServerAccess;\r\n    this.hasServerConnection = this.connection.hasServerAccess;\r\n\r\n    this.connectionSubscription = this.connection.monitor().subscribe( (conn: ConnectionState) => {\r\n      this.hasConnection = conn.hasNetworkConnection;\r\n      this.hasServerConnection = conn.hasServerAccess;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.connectionSubscription.unsubscribe();\r\n  }\r\n\r\n  onLoginSubmit() {\r\n    let auth: Promise<any>;\r\n\r\n    const email = this.form.email;\r\n    const password = this.form.password;\r\n\r\n    this.isLoading = true;\r\n    auth = this.authService.login(email, password);\r\n    auth.then( (resData) => {\r\n      console.log(resData);\r\n      this.isLoading = false;\r\n      this.router.navigate(['/select-inventory']);\r\n      this.form.email = '';\r\n      this.form.password = '';\r\n    });\r\n    auth.catch( (errorMessage) => {\r\n      console.error('AuthComponent.onLoginSubmit() #73', errorMessage );\r\n      this.error = errorMessage;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {HttpClient, HttpErrorResponse} from '@angular/common/http';\r\nimport {Router} from '@angular/router';\r\nimport {catchError, tap } from 'rxjs/operators';\r\nimport {Observable, throwError} from 'rxjs';\r\nimport * as CryptoJS from 'crypto-js';\r\n\r\nimport { User } from './user.model';\r\nimport {BasedataService} from '../../shared/services/basedata.service';\r\nimport {ConnectionService} from '../../shared/services/connection-service.service';\r\nimport {ApiService} from '../../shared/services/api.service';\r\nimport {UserService} from '../../shared/services/user.service';\r\n// import { JwtHelperService } from '@auth0/angular-jwt';\r\n\r\nexport interface AuthResponseData {\r\n  kind: string;\r\n  auth_identifier: number;\r\n  access_token: string;\r\n  expires_in: number;\r\n  email: string;\r\n  refreshToken: string;\r\n  clientDeviceId: number;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n\r\n  user = null;\r\n\r\n  private authPath = '/auth/login';\r\n  private pwSalt = 'Inventory';\r\n\r\n  constructor(\r\n    // public jwtHelper: JwtHelperService,\r\n    private http: HttpClient,\r\n    private router: Router,\r\n    private connection: ConnectionService,\r\n    private baseData: BasedataService,\r\n    private userService: UserService,\r\n    private apiService: ApiService) {\r\n  }\r\n\r\n  logout() {\r\n    this.baseData.setCurrentUser( null );\r\n    if (this.user) {\r\n      this.user.isLoggedIn = false;\r\n    }\r\n    this.setUserData(this.user);\r\n  }\r\n\r\n  async login(email: string, password: string): Promise<any> {\r\n    const loginUrl = this.apiService.getUrlByPath(this.authPath);\r\n    const pwHash = this.getEncryptedPassword(password);\r\n    const hasNetwork = this.connection.hasNetworkConnection;\r\n    if (!this.connection.hasNetworkConnection) {\r\n      const authenticatedUser = await this.getUserByAuth(email, pwHash, true);\r\n\r\n      let err = 'Es besteht aktuell keine Serververbindung! ';\r\n\r\n      if (!authenticatedUser) {\r\n        console.error('AuthService.login offline: failed #65', { email, pwHash, hasNetwork });\r\n        err += 'Email und Passwort stimmen nicht mit der letzten Live-Anmeldung berein!' + '<br>';\r\n      } else {\r\n        console.log('AuthService.login offline: successful #66', authenticatedUser.email);\r\n        let expiresIn = 1000 * 60 * 60;\r\n        if (authenticatedUser.expirationDate && authenticatedUser.expirationDate.getTime() > (Date.now() + expiresIn) ) {\r\n          expiresIn = authenticatedUser.expirationDate.getTime() - Date.now();\r\n        }\r\n        this.handleAuthentication(\r\n          email,\r\n          authenticatedUser.id,\r\n          authenticatedUser.token,\r\n          expiresIn,\r\n          +this.getClientDeviceId(),\r\n          pwHash\r\n        );\r\n        return new Observable( (observer) => {\r\n          observer.next(true);\r\n          observer.complete();\r\n        });\r\n      }\r\n      throw err;\r\n    }\r\n    return this.http.post<AuthResponseData>(\r\n      loginUrl,\r\n      {\r\n        email,\r\n        password,\r\n        returnSecureToken: true,\r\n        clientDeviceId: this.getClientDeviceId()\r\n      }\r\n    )\r\n      .pipe(\r\n        catchError(this.handleError),\r\n        tap(resData => {\r\n          console.log('AuthService.login', {resData});\r\n          this.userService.put({\r\n            id: resData.auth_identifier,\r\n            name: email,\r\n            email,\r\n            password: pwHash,\r\n            remember_token: resData.access_token,\r\n            created_at: new Date()\r\n          });\r\n          this.apiService.get<any>( 'auth/me').toPromise().then( (me) => {\r\n            if ('password' in me) {\r\n              delete me.password;\r\n            }\r\n            this.userService.update(me.id, me);\r\n          });\r\n          this.handleAuthentication(\r\n            email,\r\n            resData.auth_identifier,\r\n            resData.access_token,\r\n            +resData.expires_in,\r\n            +resData.clientDeviceId,\r\n            pwHash\r\n          );\r\n        })\r\n      ).toPromise();\r\n  }\r\n\r\n  private handleAuthentication(\r\n    email: string,\r\n    userId: number,\r\n    token: string,\r\n    expiresIn: number,\r\n    clientDeviceId: number,\r\n    pwHash: string\r\n  ) {\r\n    const expirationDate = new Date(new Date().getTime() + expiresIn * 1000);\r\n    this.user = new User(email, userId, token, expirationDate, pwHash);\r\n    this.user.isLoggedIn = true;\r\n    const previousUser = this.baseData.getCurrentUser();\r\n    if (previousUser) {\r\n      this.baseData.setPreviousUser( previousUser );\r\n    }\r\n    this.setUserData( this.user );\r\n    this.setClientDeviceId( clientDeviceId );\r\n    this.connection.setAuthState(true);\r\n    this.connection.refresh();\r\n  }\r\n\r\n  private setUserData(userData: User): void {\r\n    this.baseData.setCurrentUser( this.user );\r\n    localStorage.setItem('userData', JSON.stringify(userData));\r\n  }\r\n\r\n  private async getUserByAuth(email: string, password: string, pwIsEncrypted: boolean): Promise<User|null> {\r\n    const encPassword = pwIsEncrypted ? password : this.getEncryptedPassword(password);\r\n    const userData = await this.userService.getByAuth(email, encPassword);\r\n    console.log('AuthServer.getUserByAuth(', email, password, ') #161 encPassword:', encPassword , 'userData:', userData );\r\n    if (userData) {\r\n      const minExpirationTime = 1000 * 60 * 60 * 2;\r\n      const expireDate = new Date( Date.now() + minExpirationTime );\r\n      return new User(email, userData.id, userData.remember_token, expireDate, encPassword );\r\n    }\r\n    let lastUser = this.getUser();\r\n    if (!lastUser) {\r\n      lastUser = this.getPreviousUser();\r\n    }\r\n    if (lastUser.email === email && lastUser.pwHash === encPassword) {\r\n      return lastUser;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private getUserData(): User {\r\n    return this.getUserDataOfLocalStorage('userData');\r\n  }\r\n\r\n  private getPreviousUser(): User {\r\n    return this.getUserDataOfLocalStorage('previousUser');\r\n  }\r\n\r\n  private getUserDataOfLocalStorage(itemName: string): User {\r\n    const userDataString = localStorage.getItem(itemName);\r\n    if (userDataString) {\r\n      const userData = JSON.parse(userDataString);\r\n      if (userData && ('uTokenExpirationDate' in userData)) {\r\n        userData.uTokenExpirationDate = new Date(userData.uTokenExpirationDate);\r\n      }\r\n\r\n      if (userData &&\r\n        ('email' in userData) &&\r\n        ('id' in userData) &&\r\n        ('uToken' in userData) &&\r\n        ('uTokenExpirationDate' in userData) &&\r\n        ('pwHash' in userData)) {\r\n        return new User(userData.email, userData.id, userData.uToken, userData.uTokenExpirationDate, userData.pwHash);\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public setClientDeviceId(devid: number): void {\r\n    this.baseData.setCurrentDevice( devid );\r\n  }\r\n\r\n  public getClientDeviceId(): number {\r\n    return this.baseData.getCurrentDeviceId() || 0;\r\n  }\r\n\r\n  public getUser(): User | null {\r\n    return this.getUserData();\r\n  }\r\n\r\n  public getUserToken(): string {\r\n    if (this.user instanceof User) {\r\n      return this.user.token;\r\n    }\r\n    return '';\r\n  }\r\n\r\n  public isLoggedIn(): boolean {\r\n    const user = this.getUser();\r\n    const isLoggedIn = (user && (user instanceof User) && user.hasValidUiSession);\r\n    if (!isLoggedIn) {\r\n      console.log('app.pages.auth.auth.service.ts #187 user is not logged in: ', user);\r\n    }\r\n    return isLoggedIn;\r\n  }\r\n\r\n  public isAuthenticated(): boolean {\r\n    if (!this.user || !(this.user instanceof User) || !this.user.token) {\r\n      return false;\r\n    }\r\n    const token = this.user.token;\r\n\r\n    return (this.user.expirationDate.getTime() <= Date.now());\r\n\r\n    // Check whether the token is expired and return\r\n    // true or false\r\n    // return !this.jwtHelper.isTokenExpired(token);\r\n  }\r\n\r\n  private handleError(errorRes: HttpErrorResponse) {\r\n    let errorMessage = 'An unknown error occurred!';\r\n    if (!errorRes.error || !errorRes.error.error) {\r\n      return throwError(errorMessage);\r\n    }\r\n    switch (errorRes.error.error.message) {\r\n      case 'EMAIL_EXISTS':\r\n        errorMessage = 'This email exists already';\r\n        break;\r\n      case 'EMAIL_NOT_FOUND':\r\n        errorMessage = 'This email does not exist.';\r\n        break;\r\n      case 'INVALID_PASSWORD':\r\n        errorMessage = 'This password is not correct.';\r\n        break;\r\n    }\r\n    return throwError(errorMessage);\r\n  }\r\n\r\n  private getEncryptedPassword(password: string): string {\r\n    const pwHash = CryptoJS.SHA3( this.pwSalt + password );\r\n    return CryptoJS.enc.Base64.stringify(pwHash);\r\n  }\r\n}\r\n","\r\nexport class User {\r\n  public isLoggedIn: boolean;\r\n\r\n  constructor(\r\n    public email: string,\r\n    public id: number,\r\n    private uToken: string,\r\n    private uTokenExpirationDate: Date|string,\r\n    public pwHash?: string\r\n  ) {\r\n    const dateNow = new Date();\r\n    const dateExp = (uTokenExpirationDate instanceof Date) ? uTokenExpirationDate : new Date(uTokenExpirationDate);\r\n    this.isLoggedIn = (uTokenExpirationDate !== null && dateNow < dateExp);\r\n    if (typeof uTokenExpirationDate === 'string') {\r\n      this.uTokenExpirationDate = new Date(uTokenExpirationDate);\r\n    }\r\n  }\r\n\r\n  get token(): string | null {\r\n    if (!this.uTokenExpirationDate || new Date() > this.uTokenExpirationDate) {\r\n      return null;\r\n    }\r\n    return this.uToken;\r\n  }\r\n\r\n  get hasValidUiSession(): boolean {\r\n    const hasValidUiSession = {\r\n      isLoggedIn: this.isLoggedIn,\r\n      uTokenExpirationDate: this.uTokenExpirationDate,\r\n      Date: new Date(),\r\n      result: false\r\n    };\r\n    if (this.isLoggedIn && new Date() < this.uTokenExpirationDate) {\r\n      hasValidUiSession.result = true;\r\n      // console.log('app.pages.auth.user.model.ts #34 ', hasValidUiSession);\r\n      return true;\r\n    }\r\n    console.error('app.pages.auth.user.model.ts #39 use has no valid session ', hasValidUiSession);\r\n    return false;\r\n  }\r\n\r\n  get expirationDate(): Date | null {\r\n    if (typeof this.uTokenExpirationDate === 'string') {\r\n      this.uTokenExpirationDate = new Date(this.uTokenExpirationDate);\r\n    }\r\n    return this.uTokenExpirationDate;\r\n  }\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2Ric3luYy9kYnN5bmMuY29tcG9uZW50LnNjc3MifQ== */\"","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {\r\n  DBSyncClientService,\r\n  SyncJobResult,\r\n  SyncJobStatus,\r\n  SyncServerError, SyncServerErrorChange,\r\n  SyncServerErrorEvent\r\n} from '../../shared/services/dbsync-client.service';\r\nimport {BasedataService} from '../../shared/services/basedata.service';\r\nimport {DBDIInventuren, DBDIServerSyncErrors} from '../../shared/interfaces/dexie.interfaces';\r\nimport {faSync, faSyncAlt} from '@fortawesome/free-solid-svg-icons';\r\nimport {DataService} from '../../shared/services/data.service';\r\nimport {ConnectionService} from '../../shared/services/connection-service.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {\r\n  DbsyncLogService,\r\n  TableSyncProgress,\r\n  TotalSyncProgress,\r\n  SyncMessage,\r\n  SyncError\r\n} from '../../shared/services/dbsync-log.service';\r\nimport {User} from '../auth/user.model';\r\nimport {DexieService} from '../../shared/services/dexie.service';\r\n\r\ninterface TotalSyncProgressPct extends TotalSyncProgress {\r\n  percent: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-dbsync',\r\n  templateUrl: './dbsync.component.html',\r\n  styleUrls: ['./dbsync.component.scss']\r\n})\r\nexport class DbsyncComponent implements OnInit, OnDestroy {\r\n  faSync = faSync;\r\n  faSyncAlt = faSyncAlt;\r\n\r\n  jobid?: number;\r\n  numUnsyncedChanges?: number;\r\n  currProcess?: SyncJobResult;\r\n  syncInProcess = true;\r\n  syncJobid?: number;\r\n  syncStatus?: SyncJobStatus;\r\n  syncStatusName?: string;\r\n  syncFinished?: boolean;\r\n  syncErrorMsg?: string;\r\n  syncDuration?: number;\r\n  syncUid?: number;\r\n  syncDevid?: number;\r\n  syncDurFormatted?: string;\r\n  syncAutoRun?: boolean;\r\n  currInventur?: DBDIInventuren;\r\n  currUser?: User;\r\n  deviceId?: number;\r\n  clientRevisionId?: number;\r\n  serverRevisionId?: number;\r\n  numServerChanges?: number;\r\n\r\n  syncTotal: TotalSyncProgressPct;\r\n  syncTables: TableSyncProgress[] = [];\r\n\r\n  subscriptionAutoSyncChange: Subscription;\r\n  subscriptionProcessStarted: Subscription;\r\n  subscriptionProcessFinished: Subscription;\r\n  subscriptionNetworkService: Subscription;\r\n\r\n  subscriptionSyncTable: Subscription;\r\n  subscriptionSyncTotal: Subscription;\r\n  subscriptionSyncMsg: Subscription;\r\n  subscriptionSyncErr: Subscription;\r\n  subscriptionLastSyncErr: Subscription;\r\n\r\n  lastServerSyncJobid: number;\r\n  lastServerSyncErrors: DBDIServerSyncErrors[] = [];\r\n  lastServerSyncDate: Date;\r\n\r\n  private subscribedSyncJobProcesses: [SyncJobResult, Subscription][] = [];\r\n\r\n  constructor(\r\n    private dbsyncClient: DBSyncClientService,\r\n    private baseData: BasedataService,\r\n    private networkService: ConnectionService,\r\n    private dataService: DataService,\r\n    private dbsyncLogService: DbsyncLogService,\r\n    private dexie: DexieService) {\r\n    this.syncTotal = {\r\n      jobid: 0,\r\n      revisionId: 0,\r\n      total: 0,\r\n      executed: 0,\r\n      percent: 0,\r\n      puts: 0,\r\n      modified: 0,\r\n      deleted: 0,\r\n      tables: [],\r\n      chunks: 0,\r\n      start: null\r\n    };\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscriptionSyncTotal.unsubscribe();\r\n    this.subscriptionSyncTable.unsubscribe();\r\n    this.subscriptionSyncMsg.unsubscribe();\r\n    this.subscriptionSyncErr.unsubscribe();\r\n    this.subscriptionNetworkService.unsubscribe();\r\n    this.subscriptionAutoSyncChange.unsubscribe();\r\n    this.subscriptionProcessStarted.unsubscribe();\r\n    this.subscriptionProcessFinished.unsubscribe();\r\n    this.subscriptionLastSyncErr.unsubscribe();\r\n    this.removeAllSyncJobStatusSubscriptions();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.jobid = this.baseData.getCurrentJobid();\r\n    this.refreshStatusInfos();\r\n    this.loadServerSyncErrors(this.jobid);\r\n\r\n    this.subscriptionLastSyncErr = this.dbsyncClient.syncErrorChange.subscribe( (result: SyncServerErrorChange) => {\r\n      this.lastServerSyncErrors = [];\r\n      if (result.count > 0) {\r\n        this.loadServerSyncErrors(result.jobid);\r\n      }\r\n    });\r\n\r\n    this.subscriptionSyncTable = this.dbsyncLogService.tableSyncProgress\r\n      .subscribe( (data: TableSyncProgress) => {\r\n      const tb = data.table;\r\n      const rv = data.revisionId;\r\n      const num = data.executed;\r\n      let syncTbl = this.syncTables.find( t => t.table === data.table);\r\n      if (!syncTbl) {\r\n        syncTbl = { ...data };\r\n        this.syncTables.push(syncTbl);\r\n      } else {\r\n        syncTbl.executed = data.executed;\r\n        syncTbl.puts = data.puts;\r\n        syncTbl.modified = data.modified;\r\n        syncTbl.deleted = data.deleted;\r\n      }\r\n    });\r\n    this.subscriptionSyncTotal = this.dbsyncLogService.totalSyncProgress\r\n      .subscribe( (data: TotalSyncProgress) => {\r\n        this.refreshStatusInfos();\r\n        if (data.executed === 0) {\r\n          while (this.syncTables.length) {\r\n            this.syncTables.pop();\r\n          }\r\n        }\r\n        for (const k of Object.keys(data)) {\r\n          this.syncTotal[ k ] = data[ k ];\r\n        }\r\n    });\r\n\r\n    this.subscriptionSyncMsg = this.dbsyncLogService.syncMessage\r\n      .subscribe( (data: SyncMessage) => {\r\n        this.refreshStatusInfos();\r\n\r\n    });\r\n\r\n    this.subscriptionSyncErr = this.dbsyncLogService.syncError\r\n      .subscribe( (data: SyncError) => {\r\n        this.refreshStatusInfos();\r\n      });\r\n\r\n    this.subscriptionNetworkService = this.networkService.monitor().subscribe( () => {\r\n      if (this.networkService.hasServerAccess) {\r\n        this.refreshStatusInfos();\r\n      }\r\n    });\r\n\r\n    this.subscriptionAutoSyncChange = this.dbsyncClient.autoSyncChange.subscribe( (isRunning) => {\r\n      this.syncAutoRun = isRunning;\r\n    });\r\n\r\n    this.subscriptionProcessStarted = this.dbsyncClient.processStarted.subscribe( (proc: SyncJobResult) => {\r\n      console.log('Gestarted: Synchronisierung fr Inventur mit JobId ' + proc.jobid, { proc });\r\n      if (proc.jobid === this.syncJobid) {\r\n        this.syncInProcess = !proc.finished;\r\n      }\r\n    });\r\n\r\n    this.subscriptionProcessFinished = this.dbsyncClient.processFinished.subscribe( (proc: SyncJobResult) => {\r\n      console.log('Beendet: Synchronisierung fr Inventur mit JobId ' + proc.jobid, { proc });\r\n      if (proc.jobid === this.syncJobid) {\r\n        this.syncInProcess = !proc.finished;\r\n      }\r\n    });\r\n  }\r\n\r\n  async loadServerSyncErrors(jobid): Promise<number> {\r\n    return this.dexie.serverSyncErrors\r\n      .where({jobid})\r\n      .toArray()\r\n      .then( (errors) => {\r\n        errors.find( (itm) => {\r\n          if (itm.timestamp instanceof Date) {\r\n            this.lastServerSyncDate = itm.timestamp;\r\n            return true;\r\n          }\r\n          return false;\r\n        });\r\n        this.lastServerSyncJobid = jobid;\r\n        this.lastServerSyncErrors = errors;\r\n\r\n        return errors.length;\r\n      });\r\n  }\r\n\r\n  async refreshStatusInfos() {\r\n    this.jobid = this.baseData.getCurrentJobid();\r\n    this.syncJobid = this.jobid;\r\n    this.currInventur = this.baseData.getCurrentInventur();\r\n    this.deviceId = this.baseData.getCurrentDeviceId();\r\n    this.currUser = this.baseData.getCurrentUser();\r\n    this.syncUid = this.baseData.getCurrentUid();\r\n    this.syncDevid = this.baseData.getCurrentDeviceId();\r\n    this.currProcess = this.dbsyncClient.getProcessByJobId( this.jobid );\r\n\r\n    console.log({\r\n      method: 'refreshStatusInfos',\r\n      syncUid: this.syncUid,\r\n      syncUser: this.baseData.getCurrentUser(),\r\n      syncDevid: this.syncDevid,\r\n      syncStatus: this.syncStatus,\r\n      syncFinished: this.syncFinished\r\n    });\r\n\r\n    this.checkForUnsyncedChanges();\r\n    if (this.currProcess) {\r\n      this.syncInProcess = !this.currProcess.finished;\r\n      this.syncJobid = this.currProcess.jobid;\r\n      this.syncStatus = this.currProcess.getStatus();\r\n      this.syncStatusName = this.currProcess.getStatusName();\r\n      this.syncErrorMsg = this.currProcess.errorMsg;\r\n      this.syncFinished = this.currProcess.finished;\r\n      this.syncDuration = this.currProcess.duration;\r\n      this.syncDurFormatted = this.currProcess.durationFormatted;\r\n\r\n      console.log('Synchronisierung luft ...', { proc: this.currProcess });\r\n    } else {\r\n      console.log('Synchronisierung luft nicht ...');\r\n      this.syncStatus = SyncJobStatus.Init;\r\n      this.syncFinished = true;\r\n      this.syncInProcess = false;\r\n    }\r\n\r\n    console.log('DbsyncComponent.refreshStatusInfos() #248 call askServerForChanges', (new Date()).toString());\r\n    this.dbsyncClient.getLastServerChanges(this.jobid, 15 * 1000)\r\n      .then( (infos) => {\r\n        console.log( 'DbsyncComponent.refreshStatusInfos() #250 callback of async askServerForChange for jobid ' + this.jobid, { infos });\r\n        if (infos.success) {\r\n          this.serverRevisionId = infos.MaxRevisionId;\r\n          this.numServerChanges = infos.NumChanges;\r\n        }\r\n      })\r\n      .catch( (reason) => {\r\n        console.error('DbsyncComponent.refreshStatusInfos() #257', { reason });\r\n      });\r\n\r\n    this.dbsyncClient.getCurrentClientRevId().then( (revid) => {\r\n      this.clientRevisionId = revid;\r\n    });\r\n\r\n    this.syncAutoRun = this.dbsyncClient.autoSyncIsRunning();\r\n  }\r\n\r\n  checkForUnsyncedChanges() {\r\n    this.dbsyncClient.numUnsyncedChangeLogsByJobId(this.jobid).then( num => {\r\n      this.numUnsyncedChanges = num;\r\n    });\r\n  }\r\n\r\n  syncAutoStop() {\r\n    this.dbsyncClient.autoSyncStop();\r\n  }\r\n\r\n  syncAutoStart() {\r\n    this.dbsyncClient.autoSyncStart(true);\r\n  }\r\n\r\n  async syncCurrJob() {\r\n    if (typeof this.syncJobid === 'number') {\r\n      console.log('called syncCurrJob, call syncStart(' + this.syncJobid + ')');\r\n      this.syncStart( this.syncJobid );\r\n    } else {\r\n      console.error('syncJobid is not defined');\r\n    }\r\n  }\r\n\r\n  async resetCurrJob() {\r\n    console.log('#287 dbsync called resetCurrJob() this.syncJobid: ', this.syncJobid);\r\n    this.syncInProcess = true;\r\n    this.dataService.loadInventurDataByInventurId(this.syncJobid, true).finally( () => {\r\n      this.syncInProcess = false;\r\n    });\r\n  }\r\n\r\n  syncStart(jobid: number) {\r\n    console.log('called syncStart, call dbsyncClient.syncJob(' + jobid + ')');\r\n    const sync: Promise<SyncJobResult> = this.dbsyncClient.syncJob( jobid );\r\n\r\n    sync.then( (proc: SyncJobResult) => {\r\n      if (this.isSyncJobStatusSubscribed(proc)) {\r\n        return;\r\n      }\r\n      const syncJobStatusChangeSubscription = proc.statusChanged.subscribe( (status: SyncJobStatus) => {\r\n        this.syncJobid = proc.jobid;\r\n        this.syncStatus = proc.getStatus();\r\n        this.syncStatusName = proc.getStatusName();\r\n        this.syncErrorMsg = this.currProcess && ('errorMsg' in this.currProcess) ? this.currProcess.errorMsg : '';\r\n        this.syncFinished = this.currProcess ? this.currProcess.finished : null;\r\n        this.syncDuration = this.currProcess ? this.currProcess.duration : null;\r\n        this.syncDurFormatted = this.currProcess ? this.currProcess.durationFormatted : '';\r\n\r\n        console.log('Process-Status has changed', { proc });\r\n        this.syncInProcess = !proc.finished;\r\n\r\n        if (proc.finished) {\r\n          console.log('#186 dbsync.component remove/unsubscribe finished SyncJob');\r\n          this.removeSyncJobStatusSubscriptionBySub( syncJobStatusChangeSubscription );\r\n        }\r\n      });\r\n      this.addSyncJobStatusSubscription(proc, syncJobStatusChangeSubscription);\r\n    });\r\n  }\r\n\r\n  private isSyncJobStatusSubscribed(proc: SyncJobResult): boolean {\r\n    const foundProc = this.subscribedSyncJobProcesses.find( p => p[0] === proc );\r\n    return !!foundProc;\r\n  }\r\n\r\n  private addSyncJobStatusSubscription(proc: SyncJobResult, sub: Subscription) {\r\n    console.log('#200 dbsync.component addSyncJobStatusSubscription');\r\n    this.subscribedSyncJobProcesses.push( [proc, sub] );\r\n  }\r\n\r\n  private removeSyncJobStatusSubscriptionBySub(sub: Subscription) {\r\n    console.log('#204 dbsync.component removeSyncJobStatusSubscriptionBySub');\r\n    const foundProc = this.subscribedSyncJobProcesses.find( p => p[1] === sub );\r\n    if (foundProc) {\r\n      console.log('#207 dbsync.component foundProc');\r\n      foundProc[1].unsubscribe();\r\n      this.subscribedSyncJobProcesses = this.subscribedSyncJobProcesses.filter( p => p !== foundProc );\r\n    }\r\n  }\r\n\r\n  private removeSyncJobStatusSubscriptionByProc(proc: SyncJobResult) {\r\n    console.log('#214 dbsync.component removeSyncJobStatusSubscriptionByProc');\r\n    const foundProc = this.subscribedSyncJobProcesses.find( p => p[0] === proc );\r\n    if (foundProc) {\r\n      console.log('#217 dbsync.component foundProc');\r\n      foundProc[1].unsubscribe();\r\n      this.subscribedSyncJobProcesses = this.subscribedSyncJobProcesses.filter( p => p !== foundProc );\r\n    }\r\n  }\r\n\r\n  private removeAllSyncJobStatusSubscriptions() {\r\n    console.log('#224 dbsync.component removeSyncJobStatusSubscriptionByProc');\r\n    this.subscribedSyncJobProcesses.forEach( proc => {\r\n      proc[1].unsubscribe();\r\n    });\r\n    this.subscribedSyncJobProcesses.length = 0;\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {DbInsertResult, DbUpdateResult} from './data-interfaces';\r\nimport {\r\n  DBDIArtikel, DBDIHersteller, DBDIInventar,\r\n  DBDIObjektKatalogGlobal,\r\n  DBDIObjektKatalogMandant\r\n} from '../../../shared/interfaces/dexie.interfaces';\r\nimport { DexieService } from '../../../shared/services/dexie.service';\r\nimport {AuthService} from '../../auth/auth.service';\r\nimport {Guid} from 'guid-typescript';\r\nimport Dexie from 'dexie';\r\nimport {throwError} from 'rxjs';\r\nimport {\r\n  DataService,\r\n  JoinFlexFormatted,\r\n  JoinResultType,\r\n  JoinStrictFormatted,\r\n  TableIdxProps\r\n} from '../../../shared/services/data.service';\r\nimport {BasedataService} from '../../../shared/services/basedata.service';\r\nimport {HerstellerService} from './hersteller.service';\r\n\r\n\r\nexport interface ArtikelBasisDaten {\r\n  mid?: number;\r\n  mcid?: number;\r\n  mcuuid?: string;\r\n  gcid?: number;\r\n  gcuuid?: string;\r\n  Bezeichnung?: string;\r\n  Gruppe?: string;\r\n  Kategorie?: string;\r\n  Typ?: string;\r\n  Hersteller?: string;\r\n  Groesse?: string;\r\n  Farbe?: string;\r\n  hid?: number;\r\n  huuid?: string;\r\n  log?: boolean;\r\n}\r\n\r\nexport interface ArtikelRefInsertData {\r\n  gcid: number;\r\n  gcuuid: string;\r\n  mid?: number;\r\n  for_jobid?: number;\r\n}\r\n\r\nexport interface DBInsertArtikelResult extends DbInsertResult {\r\n  newItem?: DBDIArtikel;\r\n  artikelRef: DBDIObjektKatalogMandant;\r\n  artikelData: DBDIObjektKatalogGlobal;\r\n}\r\n\r\nexport interface DBUpdateArtikelResult extends DbUpdateResult {\r\n  item?: DBDIArtikel;\r\n}\r\n\r\nexport interface ArtikelPropertiesForQueryCount {\r\n  hid?: number;\r\n  huuid?: string;\r\n  Bezeichnung?: string;\r\n  Typ?: string;\r\n  Kategorie?: string;\r\n  Gruppe?: string;\r\n  Farbe?: string;\r\n  Groesse?: string;\r\n}\r\n\r\nexport interface ArtikelHerstellerImg {\r\n  gcid: number;\r\n  gcuuid: string;\r\n  mcid?: number;\r\n  mcuuid?: string;\r\n  hid?: number;\r\n  huuid?: string;\r\n  Bezeichnung?: string;\r\n  Typ?: string;\r\n  Kategorie?: string;\r\n  Gruppe?: string;\r\n  Farbe?: string;\r\n  Groesse?: string;\r\n  Hersteller?: string;\r\n  hersteller?: DBDIHersteller;\r\n  artikelRef?: DBDIObjektKatalogMandant;\r\n  inventar_count?: number;\r\n  img_id?: number;\r\n  img_uuid?: string;\r\n  count?: number;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ArtikelService {\r\n\r\n  constructor(private dexie: DexieService,\r\n              private authService: AuthService,\r\n              private dataService: DataService,\r\n              private baseData: BasedataService,\r\n              private herstellerService: HerstellerService) {}\r\n\r\n  public async artikelBezeichnungExistsGlobal(bezeichnung: string, jobid: number = 0): Promise<number> {\r\n    const globalItems = await this.dexie.objektKatalogGlobal\r\n      .where('Bezeichnung')\r\n      .equalsIgnoreCase( bezeichnung )\r\n      .toArray();\r\n    if (jobid !== 0 && globalItems && globalItems.length > 0) {\r\n      const gcuuids = globalItems.map( itm => itm.uuid );\r\n      return await this.dexie.objektKatalogMandant\r\n        .where('gcuuid').anyOf(gcuuids)\r\n        .and( itm => itm.for_jobid === jobid)\r\n        .count();\r\n    }\r\n    return globalItems.length;\r\n  }\r\n\r\n  public async ___DEL__artikelExistsMandant(mid: number, gcid: number): Promise<boolean> {\r\n    const numItems = await this.dexie.objektKatalogMandant\r\n      .where({ mid, gcid })\r\n      .count();\r\n\r\n    return 0 < numItems;\r\n  }\r\n\r\n  public async artikelGlobalByBezeichnung(bezeichnung: string): Promise<DBDIObjektKatalogGlobal[]> {\r\n    const items = await this.dexie.objektKatalogGlobal\r\n      .where('Bezeichnung')\r\n      .equalsIgnoreCase( bezeichnung )\r\n      .toArray();\r\n\r\n    return items;\r\n  }\r\n\r\n  public async artikelMcuuidByGcuuids(mid: number, gcuuids: string|string[]): Promise<DBDIObjektKatalogMandant[]> {\r\n    if (typeof gcuuids === 'string') {\r\n      gcuuids = [ gcuuids ];\r\n    }\r\n\r\n    const items = await this.dexie.objektKatalogMandant\r\n      .where( 'gcuuid').anyOf(gcuuids)\r\n      .filter( itm => itm.mid === mid)\r\n      .toArray();\r\n\r\n    return items;\r\n  }\r\n\r\n  public async ___DEL__getGcuuidByGcuuid(uuid: string): Promise<string> {\r\n    return this.dexie.objektKatalogGlobal.get( uuid ).then( (itm) => itm.uuid );\r\n  }\r\n\r\n  public async insertArtikelData(daten: ArtikelBasisDaten): Promise<DBDIObjektKatalogGlobal> {\r\n    const db = this.dexie;\r\n    const katalog = db.objektKatalogGlobal;\r\n    const hersteller = db.hersteller;\r\n    const uid = this.authService.getUser().id;\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const deviceid = this.baseData.getCurrentDeviceId();\r\n    const uuid = Guid.create().toString();\r\n    const log = { log: true };\r\n\r\n    if (daten.Hersteller) {\r\n      console.log('ArtikelService insertArtikelDate() #153');\r\n      await this.herstellerService.getByNameOrCreate(daten.Hersteller).then( hstData => {\r\n        daten.hid = hstData.hid;\r\n        daten.huuid = hstData.uuid;\r\n      });\r\n    }\r\n\r\n    const exists = await katalog.where({\r\n      Bezeichnung: daten.Bezeichnung,\r\n      huuid: daten.huuid\r\n    }).toArray();\r\n\r\n    if (exists) {\r\n      const sameData = exists.filter( (itm) => {\r\n        for (const k of [ 'huuid', 'Gruppe', 'Kategorie', 'Typ', 'Farbe', 'Groesse']) {\r\n          if (itm[k] !== daten[k]) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      });\r\n      if (sameData.length > 0) {\r\n        console.log('ArtikelService insertArtikelData() #175');\r\n        return sameData[0];\r\n      } else {\r\n        throwError({\r\n          name: 'DuplicateEntry',\r\n          message: 'Es existiert bereits ein Katalogeintrag mit gleicher Bezeichnung,' +\r\n            ' der aufgrund abweichender Details nicht bernommen werden kann.\\n' +\r\n            ' Da Bezeichnungen unique sein mssen, ndern sie diese bitte ab oder bernehmen den anderen Eintrag!',\r\n          data: sameData\r\n        });\r\n      }\r\n    }\r\n\r\n    const insertData: DBDIObjektKatalogGlobal = {\r\n      uuid,\r\n      hash: null,\r\n      code: uuid,\r\n      hid: daten.hid,\r\n      huuid: daten.huuid,\r\n      Bezeichnung: daten.Bezeichnung,\r\n      Typ: daten.Typ,\r\n      Gruppe: daten.Gruppe,\r\n      Kategorie: daten.Kategorie,\r\n      Farbe: daten.Farbe,\r\n      Groesse: daten.Groesse,\r\n      created_at: new Date(),\r\n      modified_at: null,\r\n      created_uid: uid,\r\n      created_device_id: deviceid,\r\n      created_jobid: jobid,\r\n      lid: !('lid' in daten as any) ? null :  (daten as any).lid,\r\n      Produktnr: !('Produktnr' in daten) ? null : (daten as any).Produktnr,\r\n      Bild: !('Bild' in daten) ? null : (daten as any).Bild,\r\n      AnlagenNr: !('AnlagenNr' in daten) ? null : (daten as any).AnlagenNr,\r\n      GeraetNr: !('GeraetNr' in daten) ? null : (daten as any).GeraetNr,\r\n      FibuNr: !('FibuNr' in daten) ? null : (daten as any).FibuNr,\r\n      Flaeche: !('Flaeche' in daten) ? null : (daten as any).Flaeche,\r\n      Gewicht: !('Gewicht' in daten) ? null : (daten as any).Gewicht,\r\n      Baujahr: !('Baujahr' in daten) ? null : (daten as any).Baujahr,\r\n      Kst: !('Kst' in daten) ? null : (daten as any).Kst,\r\n      log: true\r\n    };\r\n    const insertNewData = { ...insertData, ...log };\r\n    const insertKey = await katalog.add({ ...insertData, ...log });\r\n    if (!insertKey) {\r\n      console.error('ArtikelService # 220 insertArtikelData(daten) empty result insertKey', { insertKey, insertNewData});\r\n      alert('#219 ArtikelService.insertArtikelData(daten) empty Result. See console.log');\r\n    }\r\n    console.log('ArtikelService insertArtikelData() #223');\r\n    return katalog.get(insertKey);\r\n  }\r\n\r\n  public async insertArtikelRefByGcidGcuuid(gcuuid: string): Promise<DBDIObjektKatalogMandant> {\r\n    const db = this.dexie;\r\n    const artikelRef = db.objektKatalogMandant;\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const mid = this.baseData.getCurrentMid();\r\n    const uid = this.authService.getUser().id;\r\n    const uuid = Guid.create().toString();\r\n    const devID = this.baseData.getCurrentDeviceId();\r\n    const log = { log: true };\r\n    const d = new Date();\r\n    const code = uuid;\r\n\r\n    const insertData = {\r\n      ...{ gcuuid },\r\n      ...{\r\n        mid,\r\n        code,\r\n        for_jobid: jobid,\r\n        created_at: new Date(),\r\n        created_uid: uid,\r\n        created_device_id: devID,\r\n        uuid\r\n      },\r\n      ...log\r\n    } as DBDIObjektKatalogMandant;\r\n    return artikelRef.add( insertData ).catch( (reason) => {\r\n      console.error(reason, 'ArtikelService.insertArtikelRefByGcidGcuuid #263 artikelRef.add', { insertData });\r\n      return null;\r\n    }).then( (mcuuid) => artikelRef.get(mcuuid));\r\n  }\r\n\r\n  public async insertArtikelRef(daten: ArtikelBasisDaten): Promise<DBDIObjektKatalogMandant> {\r\n    const db = this.dexie;\r\n    const artikelRef = db.objektKatalogMandant;\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const uid = this.authService.getUser().id;\r\n    const uuid = Guid.create().toString();\r\n    const defaultMid = this.baseData.getCurrentMid();\r\n    const devID = this.baseData.getCurrentDeviceId();\r\n    const log = { log: true };\r\n\r\n    if (!daten.gcuuid) {\r\n      console.log('ArtikelService insertArtikelRef() #265', { daten: {...daten}});\r\n      const artikelData: DBDIObjektKatalogGlobal = await this.insertArtikelData({ ...daten, ...log});\r\n      console.log('ArtikelService insertArtikelRef() #270 artikelData', { artikelData: {...artikelData}});\r\n      if (!artikelData) {\r\n        console.error('ArtikelService #267 unexpected empty Result: artikelData = this.insertArikelData()',\r\n          { artikelData, daten });\r\n        alert('ArikelService #269 unexpected Result for insertArtikelData. See console.log');\r\n        return null;\r\n      }\r\n      daten.gcid = artikelData.gcid;\r\n      daten.gcuuid = artikelData.uuid;\r\n    }\r\n\r\n    const insertData: DBDIArtikel = {\r\n      mid: daten.mid || defaultMid,\r\n      gcid: daten.gcid,\r\n      gcuuid: daten.gcuuid,\r\n      for_jobid: jobid,\r\n      uuid,\r\n      code: uuid,\r\n      created_at: new Date(),\r\n      created_uid: uid,\r\n      created_jobid: jobid,\r\n      created_device_id: devID,\r\n      modified_at: null,\r\n      modified_uid: null\r\n    };\r\n    return artikelRef.add( {...insertData, ...log} )\r\n      .then(insertUuid => artikelRef.get({uuid: insertUuid}))\r\n      .catch( reason => {\r\n        console.error(reason, 'ArtikelService #309 artikelRef.add', { insertData } );\r\n        return null;\r\n      });\r\n  }\r\n\r\n  public async insert(daten: ArtikelBasisDaten): Promise<DBInsertArtikelResult> {\r\n    try {\r\n      console.log('ArtikelService #295 insert(daten) call this.getFirstArtikelGcuuidByBasisDaten(daten)', { daten });\r\n      try {\r\n        const existingGcuuid = await this.getFirstArtikelGcuuidByBasisDaten(daten);\r\n        daten.gcuuid = existingGcuuid;\r\n      } catch (e) {\r\n        console.error('ArtikelService #299', { e });\r\n        throw e;\r\n      }\r\n      console.log('ArtikelService #303 insert(daten) call this.insertArtikelRef(daten)');\r\n      const artikelRefData: DBDIObjektKatalogMandant = await this.insertArtikelRef( daten );\r\n      console.log('ArtikelService #305 artikelRefData = insert(daten)', { daten, artikelRefData });\r\n      if (!artikelRefData || !('gcuuid' in artikelRefData)) {\r\n        alert('ERROR: #307 ArtikelService.insert() after calling ArtikelService.insertArtikelRef(daten)' +\r\n          JSON.stringify({daten}));\r\n        return {\r\n          success: false,\r\n          newId: null,\r\n          data: null,\r\n          newItem: null,\r\n          artikelRef: null,\r\n          artikelData: null\r\n        };\r\n      }\r\n\r\n      const gItem = await this.dexie.objektKatalogGlobal.get( {uuid: artikelRefData.gcuuid});\r\n      const mItem = artikelRefData;\r\n      const item = { ...mItem, ...gItem, ...{ mcuuid: mItem.uuid } };\r\n\r\n      return {\r\n        success: true,\r\n        newId: artikelRefData.uuid,\r\n        data: artikelRefData,\r\n        newItem: item,\r\n        artikelRef: artikelRefData,\r\n        artikelData: gItem\r\n      } as DBInsertArtikelResult;\r\n    } catch ( err ) {\r\n      const errorMsg = ( 'name' in err ? err.name + ': ' : '')\r\n        + ( ('message' in err) ? err.message : JSON.stringify(err) );\r\n      return {\r\n        success: false,\r\n        errorMsg,\r\n        debug: err,\r\n        data: daten\r\n      } as DBInsertArtikelResult;\r\n    }\r\n  }\r\n\r\n  public async getFirstArtikelGcuuidByBasisDaten(properties: ArtikelBasisDaten): Promise<string> {\r\n    if ( ('Hersteller' in properties) && properties.Hersteller.length > 0) {\r\n      const hst = await this.herstellerService.getByName(properties.Hersteller);\r\n      if (hst && hst.uuid) {\r\n        properties.huuid = hst.uuid;\r\n      } else {\r\n        return '';\r\n      }\r\n    }\r\n\r\n    const filledProps: any = {};\r\n    const emptyProps: any = {};\r\n    for (const pName of Object.keys(properties)) {\r\n      if (!(pName in properties)) {\r\n        continue;\r\n      }\r\n      if (properties[pName] !== '' && properties[pName] !== null) {\r\n        filledProps[pName] = properties[pName];\r\n      } else {\r\n        emptyProps[pName] = properties[pName];\r\n      }\r\n    }\r\n\r\n    if (Object.keys(filledProps).length === 0) {\r\n      return '';\r\n    }\r\n\r\n    if (!('huuid' in filledProps) && !('Bezeichnung' in filledProps)) {\r\n      return '';\r\n    }\r\n\r\n    let query: Dexie.Collection<DBDIObjektKatalogGlobal, string>;\r\n\r\n    if (properties.huuid && 'huuid' in filledProps) {\r\n      query = this.dexie.objektKatalogGlobal.where({huuid: properties.huuid});\r\n      delete filledProps.huuid;\r\n    } else if (properties.Bezeichnung && 'Bezeichnung' in filledProps) {\r\n      query = this.dexie.objektKatalogGlobal.where('Bezeichnung').equalsIgnoreCase(properties.Bezeichnung);\r\n      delete filledProps.Bezeichnung;\r\n    }\r\n\r\n    query.filter( (okg) => {\r\n      for (const k of Object.keys(filledProps)) {\r\n        if ( (k in okg) && okg[k] !== filledProps[k]) {\r\n          return false;\r\n        }\r\n      }\r\n      for (const k of Object.keys(emptyProps)) {\r\n        if (!(k in okg) || okg[k] === emptyProps[k]) {\r\n          continue;\r\n        }\r\n        if (okg[k] !== null && okg[k] !== '') {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    }).first().then( (okg) => {\r\n      if (okg && ('uuid' in okg)) {\r\n        return okg.uuid;\r\n      } else {\r\n        return '';\r\n      }\r\n    });\r\n  }\r\n\r\n  public async __DEL__update(artikel: DBDIArtikel): Promise<DBUpdateArtikelResult> {\r\n    return {\r\n      success: false\r\n    };\r\n  }\r\n\r\n  public async countArticleByHerstellerUuid(huuid: string): Promise<number> {\r\n    const artikelTbl = this.dexie.objektKatalogGlobal;\r\n    return await artikelTbl.where({ huuid }).count();\r\n  }\r\n\r\n  public async countArticleByProperties(props: ArtikelPropertiesForQueryCount): Promise<number> {\r\n    const artikelTbl = this.dexie.objektKatalogGlobal;\r\n    let query: any = artikelTbl;\r\n    const propKeys = Object.keys( props );\r\n    propKeys.forEach( k => { if (!props[k]) { delete props[k]; }});\r\n    if (props.huuid) {\r\n      query = artikelTbl.where({ huuid: props.huuid });\r\n      delete props.huuid;\r\n    }\r\n    if (!('filter' in query)) {\r\n      throwError('query has an Unexpected Type. ' +\r\n        'Expected Collection|Table with method filter! Given: ' + (typeof query));\r\n    }\r\n    return await query.filter( props ).count();\r\n  }\r\n\r\n\r\n  public async listArticleByProperties(\r\n    mid: number, hstId: string|number, props: ArtikelPropertiesForQueryCount\r\n  ): Promise<ArtikelHerstellerImg[]> {\r\n    const huuid = (typeof hstId === 'string') ? hstId : null;\r\n\r\n    let propKeys = Object.keys( props );\r\n    propKeys.forEach( k => {\r\n      if (!props[k]) {\r\n        delete props[k];\r\n      } else if (typeof props[k] === 'string') {\r\n        props[k] = (props[k] as string).toLowerCase();\r\n      }\r\n    });\r\n    propKeys = Object.keys( props );\r\n\r\n    const join: JoinFlexFormatted = {\r\n      table: 'objektKatalogGlobal',\r\n      where: (huuid) ? { huuid } : null,\r\n      joins: [\r\n        { parentKey: 'huuid', key: 'uuid', table: 'hersteller', alias: 'hersteller', resultType: JoinResultType.First },\r\n        { parentKey: 'uuid', table: 'images', key: 'gcuuid', alias: 'image', resultType: JoinResultType.First },\r\n        { parentKey: 'uuid', table: 'objektKatalogMandant', key: 'gcuuid', alias: 'artikelRef', multi: true,\r\n          where: { mid },\r\n          joins: [{\r\n            parentKey: 'uuid', table: 'inventar', key: 'mcuuid', alias: 'inventar_count', multi: true,\r\n            resultType: JoinResultType.Count,\r\n            map: (obj: DBDIInventar) => ({ uuid: obj.uuid, ruuid: obj.ruuid })\r\n          }],\r\n          filter: (obj: DBDIObjektKatalogMandant) => obj.mid === mid\r\n      }],\r\n      filter: (item: DBDIObjektKatalogGlobal): boolean => {\r\n        for (const k of propKeys) {\r\n          if (!(k in item)) {\r\n            return false;\r\n          }\r\n          if (typeof props[k] === 'string' && typeof item[k] === 'string') {\r\n            if (-1 === item[k].toLowerCase().indexOf( props[k] )) {\r\n              return false;\r\n            }\r\n          } else if (props[k] !== item[k]) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      },\r\n      map: (obj: any) => {\r\n        obj.gcuuid = obj.uuid;\r\n        obj.inventar_count = 0;\r\n        obj.Hersteller = '';\r\n        obj.img_id = null;\r\n        obj.img_uuid = null;\r\n        obj.mcid = null;\r\n        obj.mcuuid = null;\r\n\r\n        if (obj.hersteller !== undefined && obj.hersteller !== null) {\r\n          obj.Hersteller = obj.hersteller.Hersteller;\r\n        }\r\n\r\n        if (obj.image !== undefined && obj.image !== null ) {\r\n          obj.img_id = obj.image.id;\r\n          obj.img_uuid = obj.image.uuid;\r\n        }\r\n\r\n        if (Array.isArray(obj.artikelRef)) {\r\n          obj.artikelRef.forEach( (a) => obj.inventar_count += a.inventar_count);\r\n          obj.mcid = (obj.artikelRef.length) ? obj.artikelRef[0].mcid : null;\r\n          obj.mcuuid = (obj.artikelRef.length) ? obj.artikelRef[0].mcuuid : null;\r\n        } else if (!!obj.artikelRef) {\r\n          obj.inventar_count = obj.artikelRef.inventar_count;\r\n          obj.mcid = obj.artikelRef.mcid;\r\n          obj.mcuuid = obj.artikelRef.mcuuid;\r\n        }\r\n        return obj;\r\n      },\r\n      sort: (a: any, b: any) => {\r\n        const r = ('inventar_count' in a) && ('inventar_count' in b)\r\n        ? (a.inventar_count > b.inventar_count ? -1 : 1)\r\n        : 0;\r\n        // console.log('#311 sort joinie result', a.inventar_count, b.inventar_count, r);\r\n        return r;\r\n      },\r\n      limit: 10\r\n    };\r\n\r\n    return this.dataService.joinie( join ).then( (list) => {\r\n      console.log( { 'joinie.result': list });\r\n      return list as ArtikelHerstellerImg[];\r\n    });\r\n  }\r\n\r\n  async getGroupedArtikelGruppen(where?: TableIdxProps): Promise<string[]> {\r\n    return this.getGroupedArtikelProperties('Gruppe', where);\r\n  }\r\n\r\n  async getGroupedArtikelKategorien(where?: TableIdxProps): Promise<string[]> {\r\n    return this.getGroupedArtikelProperties('Kategorie', where);\r\n  }\r\n\r\n  async getGroupedArtikelTypen(where?: TableIdxProps): Promise<string[]> {\r\n    return this.getGroupedArtikelProperties('Typ', where);\r\n  }\r\n\r\n  async getGroupedArtikelGroessen(where?: TableIdxProps): Promise<string[]> {\r\n    return this.getGroupedArtikelProperties('Groesse', where);\r\n  }\r\n\r\n  async getGroupedArtikelFarben(where?: TableIdxProps): Promise<string[]> {\r\n    return this.getGroupedArtikelProperties('Farbe', where);\r\n  }\r\n\r\n  async getGroupedArtikelProperties(property: string, where?: TableIdxProps): Promise<string[]> {\r\n    const db = this.dexie;\r\n    const table = db.objektKatalogGlobal;\r\n    const names: string[] = [];\r\n    const hasWhere = where && Object.keys(where).length > 0;\r\n    const keysWhere = (hasWhere) ? Object.keys(where) : [];\r\n    const collection = (hasWhere) ? table.where(where) : table.toCollection();\r\n\r\n    const uniqNames = await table.orderBy(property).filter( itm => {\r\n      if (!(property in itm) || typeof itm[property] !== 'string' || itm[property].trim() === '') {\r\n        return false;\r\n      }\r\n      if (!hasWhere) {\r\n        return true;\r\n      }\r\n      for (const k of keysWhere) {\r\n        if (!(k in itm)) {\r\n          return false;\r\n        }\r\n        if (typeof itm[k] === 'string' && typeof where[k] === 'string' ) {\r\n          if (itm[k].toString().toLowerCase().trim() !== where[k].toString().toLowerCase().trim() ) {\r\n            return false;\r\n          }\r\n        } else if (itm[k] !== where[k] ) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    })\r\n      .uniqueKeys();\r\n\r\n    uniqNames.forEach( (n) => {\r\n      if (typeof n === 'string') {\r\n        names.push(n);\r\n      }\r\n    });\r\n    return names;\r\n  }\r\n\r\n\r\n  async getGroupedArtikelGruppenKategorien(where?: TableIdxProps): Promise<{gruppe: string, kategorien: string[]}[]> {\r\n    console.log('#364 getGroupedArtikelGruppenKategorien', { where });\r\n    const db = this.dexie;\r\n    const Promise = Dexie.Promise;\r\n    const table = db.objektKatalogGlobal;\r\n\r\n    const uniqGrps = await table.orderBy('Gruppe').uniqueKeys();\r\n\r\n    return Promise.all(\r\n      uniqGrps.map( async (grp) => table.orderBy('Kategorie')\r\n        .filter( (itm) => itm.Gruppe === grp && typeof itm.Kategorie === 'string' && itm.Kategorie.trim() !== '')\r\n        .uniqueKeys() )\r\n    ).then( (ktgs) => {\r\n      return uniqGrps.map( (grp, i) => ({gruppe: grp.toString(), kategorien: ktgs[i] as string[] }));\r\n    });\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {DexieService} from '../../../shared/services/dexie.service';\r\nimport {\r\n  BarcodeLookupSimpleResult,\r\n  DBDIBarcodeLookup, DBDIBarcodeLookupCompatibleItem,\r\n  DBDIInventar,\r\n  DBDIObjektKatalogMandant,\r\n  DBDIRaeume,\r\n  DBDITableWithBarcode,\r\n  LookupResultTable\r\n} from '../../../shared/interfaces/dexie.interfaces';\r\nimport Dexie from 'dexie';\r\n\r\ninterface RebuildProcess {\r\n  jobid: number;\r\n  table: string;\r\n}\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BarcodeService {\r\n  lastErrors: any[] = [];\r\n  lkup: Dexie.Table<DBDIBarcodeLookup, [string, number]>;\r\n  rebuildProcesses: RebuildProcess[] = [];\r\n  private isInDebugMode = false;\r\n\r\n  constructor(private db: DexieService) {\r\n    this.lkup = this.db.barcodeLookup;\r\n  }\r\n\r\n  async simpleLookup(barcode: string, jobid: number): Promise<BarcodeLookupSimpleResult> {\r\n    if (barcode.startsWith('R') || barcode.startsWith('A')) {\r\n      const structLookupResult = await this.bcAnalyzeLookup(barcode, jobid);\r\n      if (structLookupResult && structLookupResult.success) {\r\n        return structLookupResult;\r\n      }\r\n    }\r\n    const indexLookupResult = await this.indexLookup(barcode, jobid);\r\n\r\n    if (indexLookupResult) {\r\n      return indexLookupResult;\r\n    }\r\n\r\n    return await this.allTablesLookup(barcode, jobid);\r\n    /*\r\n    return Promise.all([\r\n      this.indexLookup(barcode),\r\n      this.bcAnalyzeLookup(barcode)\r\n    ]).then( results => results[0] || results[1]);\r\n     */\r\n  }\r\n\r\n  async indexLookup(barcode: string, jobid: number): Promise<BarcodeLookupSimpleResult> {\r\n    barcode = this.bcTrimZero(barcode);\r\n    const found = await this.lkup.get( { code: barcode, for_jobid: jobid } );\r\n    if (this.isInDebugMode) {\r\n      console.log('BarcodeService.indexLookup(', { barcode, jobid}, ') #57', { found });\r\n    }\r\n\r\n    const result: BarcodeLookupSimpleResult = {\r\n      barcode,\r\n      foundRef: found,\r\n      success: false,\r\n      lookupResultTable: LookupResultTable.None,\r\n      data: null\r\n    };\r\n\r\n    if (found && found.uuid) {\r\n      const searchKey = { uuid: found.uuid };\r\n      const item = await this.db.table( found.table ).get( searchKey );\r\n      if (this.isInDebugMode) {\r\n        console.log('BarcodeService #68 indexLookup item = this.db.table(', found.table, ').get(', searchKey, ')',\r\n          { item });\r\n      }\r\n\r\n      if (item) {\r\n        result.success = true;\r\n        result.data = item;\r\n\r\n        switch (found.table) {\r\n          case 'inventar':\r\n            result.lookupResultTable = LookupResultTable.Inventar;\r\n            result.inventar = item;\r\n            break;\r\n\r\n          case 'raeume':\r\n            result.lookupResultTable = LookupResultTable.Raeume;\r\n            result.raum = item;\r\n            break;\r\n\r\n          case 'objektKatalogMandant':\r\n            result.lookupResultTable = LookupResultTable.ObjektKatalogMandant;\r\n            result.artikelRef = item;\r\n            break;\r\n\r\n          case 'objektKatalogGlobal':\r\n            result.lookupResultTable = LookupResultTable.ObjektKatalogGlobal;\r\n            result.artikelData = item;\r\n            break;\r\n\r\n          default:\r\n            result.lookupResultTable = LookupResultTable.Any;\r\n        }\r\n      }\r\n    }\r\n    if (this.isInDebugMode) {\r\n      console.log('BarcodeService #99 indexLookup(', { result, barcode, jobid}, ')', { found });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  async allTablesLookup(barcode: string, jobid: number): Promise<BarcodeLookupSimpleResult> {\r\n    const result: BarcodeLookupSimpleResult = {\r\n      barcode,\r\n      foundRef: null,\r\n      success: false,\r\n      lookupResultTable: LookupResultTable.None,\r\n      data: null\r\n    };\r\n\r\n    result.data = await this.db.inventar.where({code: barcode, for_jobid: jobid}).first();\r\n    if (result.data) {\r\n      result.lookupResultTable = LookupResultTable.Inventar;\r\n      result.success = true;\r\n      result.foundRef = {\r\n        code: barcode, key: 'uuid', id: (result.data as DBDIInventar).uuid,\r\n        for_jobid: jobid, table: 'inventar', updateHelper: 0, uuid: result.inventar.uuid};\r\n      return result;\r\n    }\r\n\r\n    result.data = await this.db.raeume.where({code: barcode, for_jobid: jobid}).first();\r\n    if (result.data) {\r\n      result.lookupResultTable = LookupResultTable.Raeume;\r\n      result.success = true;\r\n      result.foundRef = {\r\n        code: barcode, key: 'uuid', id: (result.data as DBDIRaeume).uuid,\r\n        for_jobid: jobid, table: 'raeume', updateHelper: 0, uuid: result.data.uuid};\r\n      return result;\r\n    }\r\n\r\n    result.data = await this.db.objektKatalogMandant.where({code: barcode, for_jobid: jobid}).first();\r\n    if (result.data) {\r\n      result.lookupResultTable = LookupResultTable.ObjektKatalogMandant;\r\n      result.success = true;\r\n      result.foundRef = {\r\n        code: barcode, key: 'uuid', id: (result.data as DBDIObjektKatalogMandant).uuid,\r\n        for_jobid: jobid, table: 'objektKatalogMandant', updateHelper: 0, uuid: result.data.uuid};\r\n      return result;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  async bcAnalyzeLookup(barcode: string, jobid: number): Promise<BarcodeLookupSimpleResult> {\r\n\r\n    const matchesObjektbuchArtikel = barcode.match(/^(A)(\\d+)-/);\r\n    const matchesObjektbuchRaum = !matchesObjektbuchArtikel ? barcode.match(/^(R)(\\d+)-/) : false;\r\n\r\n    let foundTable: string;\r\n    let foundTableKey: string;\r\n\r\n    const result: BarcodeLookupSimpleResult = {\r\n      barcode,\r\n      foundRef: null,\r\n      success: false,\r\n      lookupResultTable: LookupResultTable.None,\r\n      data: null\r\n    };\r\n\r\n    if ( matchesObjektbuchArtikel ) {\r\n      const [, , sMcid ] = matchesObjektbuchArtikel;\r\n      foundTable = 'objektKatalogMandant';\r\n      foundTableKey = 'uuid';\r\n    } else if ( matchesObjektbuchRaum) {\r\n      const [, , sRid ] = matchesObjektbuchRaum;\r\n      foundTable = 'raeume';\r\n      foundTableKey = 'uuid';\r\n    } else {\r\n      return result;\r\n    }\r\n\r\n    const objBookLkUp = await this.db.objektbuchBarcodesLookup.where({\r\n      code: barcode,\r\n      for_jobid: jobid,\r\n      table: foundTable\r\n    }).first();\r\n\r\n    if (foundTable && objBookLkUp) {\r\n      result.data = await this.db.table(foundTable).where({uuid: objBookLkUp.uuid }).first();\r\n\r\n      if (result.data) {\r\n        result.foundRef = {\r\n          code: barcode,\r\n          table: foundTable,\r\n          key: foundTableKey,\r\n          id: result.data.uuid,\r\n          uuid: result.data.uuid || null\r\n        };\r\n        result.success = true;\r\n        switch (foundTable) {\r\n          case 'raeume':\r\n            result.raum = result.data as DBDIRaeume;\r\n            result.lookupResultTable = LookupResultTable.Raeume;\r\n            break;\r\n\r\n          case 'objektKatalogMandant':\r\n            result.artikelRef = result.data as DBDIObjektKatalogMandant;\r\n            result.lookupResultTable = LookupResultTable.ObjektKatalogMandant;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  bcTrimZero(barcode: string) {\r\n    barcode = barcode.trim();\r\n    while (barcode.charAt(0) === '0') {\r\n      barcode = barcode.substr(1).trim();\r\n    }\r\n    return barcode;\r\n  }\r\n\r\n  async fullLookup(barcode: string, jobid: number) {\r\n    barcode = this.bcTrimZero(barcode);\r\n    const simpleResult = await this.simpleLookup(barcode, jobid);\r\n    const lookupResultTableText = LookupResultTable[simpleResult.lookupResultTable];\r\n    if (this.isInDebugMode) {\r\n      console.log(`BarcodeService.fullLookup() #230 for ${barcode} found ${lookupResultTableText}`, { simpleResult });\r\n    }\r\n\r\n    if (!simpleResult.success || simpleResult.lookupResultTable === LookupResultTable.ObjektKatalogGlobal) {\r\n      if (this.isInDebugMode) {\r\n        console.log(`BarcodeService.fullLookup() #235 for ${barcode} return ${lookupResultTableText}`);\r\n      }\r\n      return simpleResult;\r\n    }\r\n\r\n    switch (simpleResult.lookupResultTable) {\r\n      case LookupResultTable.ObjektKatalogMandant:\r\n        if (this.isInDebugMode) {\r\n          console.log(`BarcodeService.fullLookup() #243 for ${barcode} fetch global Data for ${lookupResultTableText}`);\r\n        }\r\n        simpleResult.artikelData = await this.db.objektKatalogGlobal.get({uuid: simpleResult.artikelRef.gcuuid });\r\n        simpleResult.image = await this.db.images.get({gcuuid: simpleResult.artikelRef.gcuuid });\r\n        if (simpleResult.image) {\r\n          simpleResult.image.data_url = null;\r\n          simpleResult.image.data_binary = null;\r\n        }\r\n        break;\r\n\r\n      case LookupResultTable.Raeume:\r\n        if (this.isInDebugMode) {\r\n          console.log(`BarcodeService.fullLookup() #255 for ${barcode} fetch gebaeude Data for ${lookupResultTableText}`);\r\n        }\r\n        simpleResult.gebaeude = await this.db.gebaeude.get( simpleResult.raum.gid );\r\n        break;\r\n\r\n      case LookupResultTable.Inventar:\r\n        if (this.isInDebugMode) {\r\n          console.log('BarcodeService.fullLookup() #262' +\r\n            ` for ${barcode} fetch artikelRef/global/image/raum Data for ${lookupResultTableText}`,\r\n            { mcuuid: simpleResult.inventar.mcuuid }\r\n          );\r\n        }\r\n\r\n        simpleResult.artikelRef = await this.db.objektKatalogMandant.get( { uuid: simpleResult.inventar.mcuuid });\r\n        if (simpleResult.artikelRef) {\r\n          if (this.isInDebugMode) {\r\n            console.log('BarcodeService.fullLookup() #271 ', { gcuuid: simpleResult.artikelRef.gcuuid });\r\n          }\r\n          simpleResult.artikelData = await this.db.objektKatalogGlobal.get({ uuid: simpleResult.artikelRef.gcuuid });\r\n          if (this.isInDebugMode) {\r\n            console.log('BarcodeService.fullLookup() #254 ');\r\n          }\r\n          simpleResult.image = await this.db.images.filter((img) => {\r\n            return ('mcuuid' in img) && (img.mcuuid === simpleResult.artikelRef.uuid);\r\n          }).first();\r\n          if (!simpleResult.image) {\r\n            simpleResult.image = await this.db.images.where({gcuuid: simpleResult.artikelRef.gcuuid }).first();\r\n          }\r\n          if (simpleResult.image) {\r\n            simpleResult.image.data_url = null;\r\n            simpleResult.image.data_binary = null;\r\n          }\r\n        }\r\n        if (this.isInDebugMode) {\r\n          console.log('BarcodeService.fullLookup() #261 ');\r\n        }\r\n        simpleResult.raum = await this.db.raeume.get( { uuid: simpleResult.inventar.ruuid });\r\n        break;\r\n\r\n      default:\r\n        // Nothing, Should not happen\r\n\r\n    }\r\n    if (this.isInDebugMode) {\r\n      console.log(`BarcodeService.fullLookup() #166 fullLookup for ${barcode} return data for ${lookupResultTableText}`, { simpleResult });\r\n    }\r\n    return simpleResult;\r\n  }\r\n\r\n  async rebuild() {\r\n    return Promise.all([\r\n      this.rebuildTable<DBDIInventar>(this.db.inventar),\r\n      this.rebuildTable<DBDIRaeume>(this.db.raeume),\r\n      this.rebuildTable<DBDIObjektKatalogMandant>(this.db.objektKatalogMandant)\r\n    ]).then( (results) => {\r\n      const numErrors = results.filter( re => !re).length;\r\n      this.addError( 'Beim Rebuild des Lookup-Indexes sind ' + numErrors + ' aufgetreten!');\r\n      return numErrors === 0;\r\n    });\r\n  }\r\n\r\n  async rebuildTable<I extends DBDITableWithBarcode>(table: Dexie.Table<I, string|number>): Promise<boolean> {\r\n    if (this.rebuildProcesses.find( p => p.table === table.name) ) {\r\n      return false;\r\n    }\r\n    this.rebuildProcesses.push( { jobid: 0, table: table.name });\r\n    const keyName: string = table.schema.primKey.keyPath.toString();\r\n    const tblName = table.name;\r\n    console.log('BarcodeService.rebuildTable() #323 delete index for table ', tblName);\r\n    await this.db.barcodeLookup.where( 'table').equals(tblName).delete();\r\n\r\n    return this.db\r\n      .transaction( 'rw', [table, this.db.barcodeLookup], () => {\r\n        table.each( (item) => {\r\n          this.db.barcodeLookup.put({...{\r\n            code: item.code,\r\n            table: tblName,\r\n            for_jobid: item.for_jobid,\r\n            key: keyName,\r\n            uuid: item.uuid,\r\n            updateHelper: 1\r\n          }, ...{log: false}});\r\n        });\r\n      })\r\n      .then( () => true)\r\n      .finally( () => {\r\n        this.rebuildProcesses = this.rebuildProcesses.filter( p => p.table !== tblName);\r\n      });\r\n  }\r\n\r\n  async rebuildByJobid(jobid: number) {\r\n    console.log('BarcodeService.rebuildByJobid(' + jobid + ') #346');\r\n    return Promise.all([\r\n      this.rebuildTableByJobid<DBDIInventar>(this.db.inventar, jobid),\r\n      this.rebuildTableByJobid<DBDIRaeume>(this.db.raeume, jobid),\r\n      this.rebuildTableByJobid<DBDIObjektKatalogMandant>(this.db.objektKatalogMandant, jobid)\r\n    ]).then( (results) => {\r\n      const numErrors = results.filter( re => !re).length;\r\n      this.addError( '#242 Beim Rebuild des Lookup-Indexes sind ' + numErrors + ' aufgetreten!');\r\n      return numErrors === 0;\r\n    });\r\n  }\r\n\r\n  async rebuildTableByJobid<I extends DBDITableWithBarcode>(table: Dexie.Table<I, string|number>, jobid: number): Promise<boolean> {\r\n    if (this.rebuildProcesses.find( p => (p.jobid === 0 || p.jobid === jobid) && p.table === table.name) ) {\r\n      console.error(`BarcodeService.rebuildTableByJobid(${table.name}, ${jobid}) #360 Abort rebuild, is already running`);\r\n      return false;\r\n    }\r\n\r\n    this.rebuildProcesses.push( { jobid, table: table.name} );\r\n    const keyName: string = table.schema.primKey.keyPath.toString();\r\n    const tblName = table.name;\r\n    if (this.isInDebugMode) {\r\n      console.log('BarcodeService.rebuildTableByJobid(' + jobid + ', ' + table + ') #253.' +\r\n        ' barcode.service rebuildTableByJobid delete barcodeLookup for table ', tblName, jobid);\r\n    }\r\n    const numDeleted = await this.db.barcodeLookup.where( { table: tblName, for_jobid: jobid }).delete();\r\n    if (this.isInDebugMode) {\r\n      console.log(`BarcodeService.rebuildTableByJobid(${table.name}, ${jobid}) #255`, ' numDeleted:', numDeleted);\r\n    }\r\n    let count = 0;\r\n    return this.db\r\n      .transaction( 'rw', [table, this.db.barcodeLookup], () => {\r\n        table.where({ for_jobid: jobid }).each( (item) => {\r\n          count += 1;\r\n          const putData = {...{\r\n              code: item.code,\r\n              table: tblName,\r\n              for_jobid: item.for_jobid,\r\n              key: keyName,\r\n              uuid: item.uuid,\r\n              updateHelper: 1\r\n            }, ...{log: false}};\r\n\r\n          if (!item.code) {\r\n            console.error('#359 BarcodeService.rebuildTableByJobid Missing Barcode', tblName, jobid, { putData });\r\n            return;\r\n          }\r\n\r\n          this.db.barcodeLookup.put(putData)\r\n            .catch( (argReason) => {\r\n              console.error('#365 barcode.serve rebuildTableByJobid put Errors', tblName, jobid, { argReason, putData });\r\n              return false;\r\n            });\r\n        });\r\n      })\r\n      .then( () => {\r\n        console.log(`BarcodeService.rebuildTableByJobid(${table.name}, ${jobid}) #403 finished`, { count });\r\n        return  true;\r\n      })\r\n      .catch( (argReason) => {\r\n        console.error(`BarcodeService.rebuildTableByJobid(${table.name}, ${jobid}) #274 finished with Errors`, argReason);\r\n        return false;\r\n      })\r\n      .finally( () => {\r\n        this.rebuildProcesses = this.rebuildProcesses.filter( p => p.jobid !== jobid && p.table !== tblName);\r\n      });\r\n  }\r\n\r\n  async importObjektbuchBarcodesLookup(): Promise<boolean> {\r\n    console.log('BarcodeService.importObjektbuchBarcodesLookup() #405');\r\n    this.lkup.where({updateHelper: 11}).modify({updateHelper: 12});\r\n    const list = await this.db.objektbuchBarcodesLookup.toArray();\r\n    await list.forEach( item => {\r\n      item.updateHelper = 11;\r\n      if (this.isInDebugMode) {\r\n        console.log('BarcodeService.importObjektbuchBarcodesLookup() #3411 import ', { item });\r\n      }\r\n      this.lkup.put({...item, ...{log: false}} ).then( (r) => {\r\n        // console.log('#229 result of put', item, r);\r\n      }).catch( (err) => {\r\n        console.error( '#231', err );\r\n      });\r\n    });\r\n    await this.lkup.where({updateHelper: 12}).delete();\r\n    return true;\r\n  }\r\n\r\n  async rebuildOnRunningSystemByJobid(jobid: number) {\r\n    return Promise.all([\r\n      this.rebuildTableOnRunningSystemByJobid<DBDIInventar>(this.db.inventar, jobid)\r\n        .then( () => true).catch( () => false)\r\n        .finally(() => console.log(`BarcodeService.rebuildOnRunningSystemByJobid(${jobid}) #413 Finished Inventar`)),\r\n      this.rebuildTableOnRunningSystemByJobid<DBDIRaeume>(this.db.raeume, jobid)\r\n        .then( () => true).catch( () => false)\r\n        .finally(() => console.log(`BarcodeService.rebuildOnRunningSystemByJobid(${jobid}) #415 Finished Raeume!`)),\r\n      this.rebuildTableOnRunningSystemByJobid<DBDIObjektKatalogMandant>(this.db.objektKatalogMandant, jobid)\r\n        .then( () => true).catch( () => false)\r\n        .finally(() => console.log(`BarcodeService.rebuildOnRunningSystemByJobid(${jobid}) #417 Finished objektKatalogMandant!`))\r\n    ]).then( (results) => {\r\n      const numErrors = results.filter( re => !re).length;\r\n      if (numErrors) {\r\n        this.addError(`Beim Rebuild des Lookup-Indexes sind ${numErrors} Fehler aufgetreten!`);\r\n        console.error(`BarcodeService.rebuildOnRunningSystemByJobid(${jobid}) #439\r\n        Beim Rebuild des Lookup-Indexes sind ${numErrors} Fehler aufgetreten!`);\r\n      }\r\n      return numErrors === 0;\r\n    }).catch( (err) => {\r\n      console.error(`BarcodeService.rebuildOnRunningSystemByJobid(${jobid}) #423. Fehler beim Barcode-Lookup-Aufbau: `, { err });\r\n    });\r\n  }\r\n\r\n  async rebuildTableOnRunningSystemByJobid<I extends DBDITableWithBarcode>(table: Dexie.Table<I, string|number>, jobid: number) {\r\n    if (this.rebuildProcesses.find( p => (p.jobid === 0 || p.jobid === jobid) && p.table === table.name) ) {\r\n      return false;\r\n    }\r\n    this.rebuildProcesses.push( { jobid, table: table.name } );\r\n    const keyName: string = table.schema.primKey.keyPath.toString();\r\n    const tblName = table.name;\r\n    const tblBarcodeLookup = this.db.barcodeLookup;\r\n    let count = 0;\r\n\r\n    await this.db.transaction('rw', [tblBarcodeLookup, table], () => {\r\n      tblBarcodeLookup\r\n        .where( { table: tblName, for_jobid: jobid, updateHelper: 1 })\r\n        .modify({ updateHelper: 2 })\r\n        .then( () => {\r\n          table.where({for_jobid: jobid })\r\n            .filter( (item) => !!item.code)\r\n            .each ( (item) => {\r\n              count += 1;\r\n              tblBarcodeLookup.put({...{\r\n                code: item.code,\r\n                table: tblName,\r\n                key: keyName,\r\n                for_jobid: jobid,\r\n                uuid: item.uuid,\r\n                updateHelper: 1\r\n            }, ...{log: false}});\r\n          });\r\n        });\r\n    } );\r\n\r\n    const numDeletes = await tblBarcodeLookup.where( {table: tblName, for_jobid: jobid, updateHelper: 2}).delete();\r\n\r\n    console.log(`BarcodeService.rebuildTableOnRunningSystemByJobid(${table.name}, ${jobid}) #477 finished`, {\r\n      count, numDeletes\r\n    });\r\n    // Clear Finished Process from ProcessList\r\n    this.rebuildProcesses = this.rebuildProcesses.filter( p => p.jobid !== jobid && p.table !== tblName);\r\n  }\r\n\r\n  async rebuildOnRunningSystem() {\r\n    return Promise.all([\r\n      this.rebuildTableOnRunningSystem<DBDIInventar>(this.db.inventar)\r\n        .finally(() => console.log('BarcodeService.rebuildOnRunningSystem() #487 Finished Inventar')),\r\n      this.rebuildTableOnRunningSystem<DBDIRaeume>(this.db.raeume)\r\n        .finally(() => console.log('BarcodeService.rebuildOnRunningSystem() #489 Finished Raeume!')),\r\n      this.rebuildTableOnRunningSystem<DBDIObjektKatalogMandant>(this.db.objektKatalogMandant)\r\n        .finally(() => console.log('BarcodeService.rebuildOnRunningSystem() #491 Finished objektKatalogMandant!'))\r\n    ]).then( (results) => {\r\n      const numErrors = results.filter( re => !re).length;\r\n      if (numErrors > 0) {\r\n        console.error(`BarcodeService.rebuildOnRunningSystem() #495 Es sind ${numErrors} Fehler aufgetreten!`);\r\n        this.addError(`Beim Rebuild des Lookup-Indexes sind ${numErrors} Fehler aufgetreten!`);\r\n      }\r\n      return numErrors === 0;\r\n    }).catch( (err) => {\r\n      console.error('BarcodeService.rebuildOnRunningSystem() #500. Fehler beim Barcode-Lookup-Aufbau: ', { err });\r\n    });\r\n  }\r\n\r\n  async rebuildTableOnRunningSystem<I extends DBDITableWithBarcode>(table: Dexie.Table<I, string|number>): Promise<boolean> {\r\n    if (this.rebuildProcesses.find( p => p.table === table.name)) {\r\n      return false;\r\n    }\r\n    this.rebuildProcesses.push( { jobid: 0, table: table.name } );\r\n    const keyName: string = table.schema.primKey.keyPath.toString();\r\n    const tblName = table.name;\r\n    const tblBarcodeLookup = this.db.barcodeLookup;\r\n\r\n    console.log(`BarcodeService.rebuildTableOnRunningSystem(${table.name}) #513 Start Transaction Re-Indexing`);\r\n    await this.db.transaction('rw', [tblBarcodeLookup, table], () => {\r\n      if (this.isInDebugMode) {\r\n        console.log(`BarcodeService.rebuildTableOnRunningSystem(${table.name}) #515 Set Flag updateHelper=2`);\r\n      }\r\n      tblBarcodeLookup\r\n        .where( {table: tblName, updateHelper: 1})\r\n        .modify({updateHelper: 2})\r\n        .then( () => {\r\n          if (this.isInDebugMode) {\r\n            console.log(`BarcodeService.rebuildTableOnRunningSystem(${table.name}) #520 rebuild Index`);\r\n          }\r\n          table.filter( (item) => !!item.code)\r\n            .each ( (item) => {\r\n              const forJobid = ('for_jobid' in item) ? item.for_jobid : 0;\r\n              tblBarcodeLookup.put({...{\r\n                code: item.code,\r\n                table: tblName,\r\n                key: keyName,\r\n                for_jobid: forJobid,\r\n                uuid: item.uuid,\r\n                updateHelper: 1\r\n              }, ...{log: false}});\r\n            });\r\n        });\r\n    } );\r\n    if (this.isInDebugMode) {\r\n      console.log(`BarcodeService.rebuildTableOnRunningSystem(${table.name}) #536 delete no more existing entries`);\r\n    }\r\n    await tblBarcodeLookup.where( {table: tblName, updateHelper: 2}).delete();\r\n    // Clear Finished Process from ProcessList\r\n    this.rebuildProcesses = this.rebuildProcesses.filter( p => p.table !== tblName);\r\n    return true;\r\n  }\r\n\r\n  async addBarcode(item: DBDIBarcodeLookup, log: boolean = false): Promise<string> {\r\n    return this.db.barcodeLookup.add({...item, ...{log}})\r\n      .then( (key) => key[0])\r\n      .catch( reason => {\r\n        console.error(reason, 'BarcodeService.addBarcode #517 add', { item });\r\n        return '';\r\n      });\r\n  }\r\n\r\n  async replaceBarcodeByUuid(uuid: string, item: DBDIBarcodeLookup, log: boolean = false): Promise<boolean> {\r\n    if ('code' in item) {\r\n      const updItem = item as DBDIBarcodeLookupCompatibleItem;\r\n      console.log('BarcodeService.updateBarcodeByuuid() #521 Run Barcode-Update ');\r\n\r\n      const bcFound = await this.db.barcodeLookup\r\n        .where({table: item.table, for_jobid: item.for_jobid})\r\n        .filter((oldBcItem) => oldBcItem.uuid === item.uuid)\r\n        .first();\r\n\r\n      if (bcFound) {\r\n        const numDel = await this.db.barcodeLookup.where({\r\n          code: bcFound.code,\r\n          for_jobid: bcFound.for_jobid\r\n        }).delete();\r\n\r\n        await this.addBarcode({\r\n          code: updItem.code,\r\n          for_jobid: item.for_jobid,\r\n          key: 'uuid',\r\n          table: item.table,\r\n          uuid: item.uuid\r\n        }, log);\r\n        return true;\r\n      }\r\n    } else {\r\n      console.log('DbsyncClientService.sendByJobId() #701 No-Barcode-Update, Origin-Element not found ', {item});\r\n    }\r\n    return false;\r\n  }\r\n\r\n  addError( err: any) {\r\n    this.lastErrors.push( err );\r\n    if (this.lastErrors.length > 20) {\r\n      this.lastErrors = this.lastErrors.slice(-20);\r\n    }\r\n  }\r\n\r\n  getLastErrors(): any[] {\r\n    return this.lastErrors;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {DBDIHersteller} from '../../../shared/interfaces/dexie.interfaces';\r\nimport {DexieService} from '../../../shared/services/dexie.service';\r\nimport {BasedataService} from '../../../shared/services/basedata.service';\r\nimport { Guid} from 'guid-typescript';\r\n\r\nexport interface HerstellerWithId {\r\n  Hersteller: string;\r\n  uuid: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class HerstellerService {\r\n\r\n  constructor(private dexie: DexieService,\r\n              private baseData: BasedataService) { }\r\n\r\n  async getAll(): Promise<DBDIHersteller[]> {\r\n    return await this.dexie.hersteller.orderBy('Hersteller').toArray();\r\n  }\r\n\r\n  async getAllHerstellerWithUuids(): Promise<HerstellerWithId[]> {\r\n    const result: HerstellerWithId[] = [];\r\n    return this.dexie.hersteller.orderBy('Hersteller')\r\n      .each( hst => {\r\n        result.push({\r\n          Hersteller: hst.Hersteller,\r\n          uuid: hst.uuid\r\n        });\r\n      })\r\n      .then( () => result );\r\n  }\r\n\r\n  async getByNameOrCreate(name: string): Promise<DBDIHersteller> {\r\n    const hstExisting = await this.getByName(name);\r\n    if (hstExisting) {\r\n      return hstExisting;\r\n    }\r\n    return this.createAndGetData(name);\r\n  }\r\n\r\n  async getByName(name: string): Promise<DBDIHersteller> {\r\n    console.log('called HerstellerService.getByName(name)');\r\n    const exakt = await this.dexie.hersteller.where( { Hersteller: name}).first();\r\n    if (exakt !== undefined) {\r\n      console.log('Found Hersteller with strict compare-search');\r\n      return exakt;\r\n    }\r\n    const fuzzy = await this.dexie.hersteller.filter( item => item.Hersteller.trim().toLowerCase() === name.trim().toLowerCase()).first();\r\n    if (fuzzy === undefined) {\r\n      console.log('Not Found Hersteller with strict compare-search, found with caseinsensitive');\r\n    } else {\r\n      console.error('Hersteller not found!');\r\n    }\r\n    return fuzzy;\r\n  }\r\n\r\n  async create(name: string): Promise<string> {\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const uid = this.baseData.getCurrentUid();\r\n    const uuid = Guid.create().toString();\r\n    const item = {\r\n      Hersteller: name,\r\n      uuid,\r\n      for_jobid: jobid,\r\n      created_at: new Date(),\r\n      created_uid: uid,\r\n      created_jobid: jobid\r\n    };\r\n\r\n    return this.dexie.hersteller.add(item)\r\n      .then( insertUuid => insertUuid)\r\n      .catch( reason => {\r\n        console.error(reason, 'HerstellerService.create #75', { item });\r\n        return '';\r\n      });\r\n  }\r\n\r\n  async createAndGetData(name: string): Promise<DBDIHersteller> {\r\n    const uuid = await this.create(name);\r\n    return this.dexie.hersteller.get({ uuid });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {DBDIImages, DBDIObjektKatalogImages } from '../../../shared/interfaces/dexie.interfaces';\r\nimport { DexieService } from '../../../shared/services/dexie.service';\r\nimport {Guid} from 'guid-typescript';\r\nimport {BasedataService} from '../../../shared/services/basedata.service';\r\n\r\nexport interface ImageBaseData {\r\n  id?: number;\r\n  uuid?: string;\r\n  name?: string;\r\n  desc?: string;\r\n  size?: number;\r\n  width: number;\r\n  height: number;\r\n  type: string;\r\n  for_jobid?: number;\r\n  mcuuid: string;\r\n  gcuuid: string;\r\n  url?: string;\r\n  data_binary?: any;\r\n  data_url?: string;\r\n  revnr?: number;\r\n  created_at?: Date;\r\n  created_uid?: number;\r\n  created_jobid?: number;\r\n  modified_at?: Date;\r\n  modified_uid?: number;\r\n  modified_jobid?: number;\r\n}\r\n\r\nexport interface ImageRefData {\r\n  id?: number;\r\n  uuid?: string;\r\n  for_jobid: number;\r\n  RefTable: string;\r\n  RefUuid: string;\r\n  ImgUuid: string;\r\n  RefText?: string;\r\n  Pos?: number;\r\n  Kategorie?: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ImagesService {\r\n\r\n  constructor(private dexie: DexieService,\r\n              private baseData: BasedataService) { }\r\n\r\n  async insertArtikelImage(image: ImageBaseData, useJobid?: number): Promise<string> {\r\n    const jobid = useJobid || this.baseData.getCurrentJobid();\r\n    const uid = this.baseData.getCurrentUid();\r\n    const item: DBDIImages = {\r\n      uuid: Guid.create().toString(),\r\n      name: image.name,\r\n      desc: image.desc,\r\n      size: image.size,\r\n      width: image.width,\r\n      height: image.height,\r\n      type: image.type,\r\n      for_jobid: image.for_jobid,\r\n      mcuuid: image.mcuuid,\r\n      gcuuid: image.gcuuid,\r\n      url: image.url || '',\r\n      data_binary: image.data_binary || null,\r\n      data_url: image.data_url || null,\r\n      revnr: 1,\r\n      created_at: image.created_at || new Date(),\r\n      created_uid: image.created_uid || uid,\r\n      created_jobid: image.created_jobid || jobid\r\n    };\r\n\r\n    return this.dexie.images\r\n      .add(item)\r\n      .then( (imgUuid) => {\r\n        this.addImageKatalogRef({\r\n          for_jobid: image.for_jobid,\r\n          RefTable: 'ObjektKatalogMandant',\r\n          RefUuid: image.mcuuid,\r\n          ImgUuid: imgUuid,\r\n          RefText: image.desc || image.name,\r\n          Pos: 1,\r\n          Kategorie: ''\r\n        });\r\n        return imgUuid;\r\n      })\r\n      .catch( reason => {\r\n        console.error(reason, 'ImageService.insertArtikelImage() #86 add ',\r\n          {\r\n            uuid: item.uuid,\r\n            mcuuid: item.mcuuid,\r\n            gcuuid: item.gcuuid,\r\n            name: item.name,\r\n            size: item.size,\r\n            width: item.width,\r\n            height: item.height\r\n          });\r\n        return null;\r\n      });\r\n  }\r\n\r\n  async addImageKatalogRef(data: ImageRefData): Promise<string> {\r\n    const uid = this.baseData.getCurrentUid();\r\n    const devID = this.baseData.getCurrentDeviceId();\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const item = {\r\n      for_jobid: data.for_jobid || jobid,\r\n      RefTable: data.RefTable,\r\n      RefUuid: data.RefUuid,\r\n      ImgUuid: data.ImgUuid,\r\n      RefText: data.RefText,\r\n      Pos: data.Pos,\r\n      Kategorie: data.Kategorie,\r\n      created_at: new Date(),\r\n      created_uid: uid,\r\n      created_jobid: jobid,\r\n      created_device_id: devID\r\n    };\r\n\r\n    return this.dexie.objektKatalogImages.add(item)\r\n      .then( uuid => uuid)\r\n      .catch( reason => {\r\n        console.error(reason, 'ImageService.addImageKatalogRef #119 ', { item });\r\n        return '';\r\n      });\r\n  }\r\n\r\n  async putRaumImage(image: ImageBaseData, ruuid: string, useJobid?: number): Promise<string> {\r\n\r\n    return this.insertRaumImage(image, ruuid, useJobid);\r\n  }\r\n\r\n  async putArtikelImage(image: ImageBaseData, useJobid?: number): Promise<string> {\r\n\r\n    await this.dexie.images.where({ gcuuid: image.gcuuid }).delete();\r\n\r\n    return this.insertArtikelImage(image, useJobid);\r\n  }\r\n\r\n  async getImageByMcuuid(mcuuid: string): Promise<DBDIImages> {\r\n    console.log('called ImageService.getImageByMcuuid:', mcuuid);\r\n    return this.dexie.images.filter( (img) => 'mcuuid' in img && img.mcuuid === mcuuid).first()\r\n      .then( img => img, err => null);\r\n\r\n    // Dexie hat den Index 'mcuuid' in Images nicht bernommen\r\n    return this.dexie.images.where({ mcuuid }).first();\r\n  }\r\n\r\n  async getImageByGcuuid(gcuuid: string): Promise<DBDIImages> {\r\n    console.log('called ImageService.getImageByGcuuid:', gcuuid);\r\n    return this.dexie.images.where({ gcuuid }).first();\r\n  }\r\n\r\n  async getImageByUuid(uuid: string): Promise<DBDIImages> {\r\n    console.log('called ImageService.getImageByUuid:', uuid);\r\n    return this.dexie.images.where({uuid}).first()\r\n      .then( img => img, err => null);\r\n  }\r\n\r\n  async imageExistsOfGcuuid(gcuuid: string): Promise<boolean> {\r\n    return this.dexie.images.where({ gcuuid}).count()\r\n      .then( nr => nr > 0)\r\n      .catch( err => { console.error(err); return false; });\r\n  }\r\n\r\n  async insertRaumImage(image: ImageBaseData, ruuid: string, useJobid?: number): Promise<string> {\r\n    const jobid = useJobid || this.baseData.getCurrentJobid();\r\n    const uid = this.baseData.getCurrentUid();\r\n\r\n    const numExists = await this.dexie.images.where({for_jobid: image.for_jobid, name: image.name}).count();\r\n    if (numExists) {\r\n      let inc = 1;\r\n      let incExists = 0;\r\n      let incName = '';\r\n      do {\r\n        ++inc;\r\n        incName = image.name + '(' + inc + ')';\r\n        incExists = await this.dexie.images.where({for_jobid: image.for_jobid, name: incName}).count();\r\n      } while (incExists > 0);\r\n      image.name = incName;\r\n    }\r\n\r\n    const item: DBDIImages = {\r\n      uuid: Guid.create().toString(),\r\n      name: image.name,\r\n      desc: image.desc,\r\n      size: image.size,\r\n      width: image.width,\r\n      height: image.height,\r\n      type: image.type,\r\n      for_jobid: image.for_jobid,\r\n      mcuuid: '',\r\n      gcuuid: '',\r\n      url: image.url || '',\r\n      data_binary: image.data_binary || null,\r\n      data_url: image.data_url || null,\r\n      revnr: 1,\r\n      created_at: image.created_at || new Date(),\r\n      created_uid: image.created_uid || uid,\r\n      created_jobid: image.created_jobid || jobid\r\n    };\r\n    return this.dexie.images.add(item)\r\n      .then( (imgUuid) => {\r\n        this.addImageKatalogRef({\r\n          for_jobid: image.for_jobid,\r\n          RefTable: 'Raeume',\r\n          RefUuid: ruuid,\r\n          ImgUuid: imgUuid,\r\n          RefText: image.desc || image.name,\r\n          Pos: 1,\r\n          Kategorie: 'Bild'\r\n        });\r\n        return imgUuid;\r\n      })\r\n      .catch( reason => {\r\n        console.error( reason, 'ImagesService.insertRaumImage() #214 images.add', {\r\n          uuid: item.uuid,\r\n          name: item.name,\r\n          size: item.size,\r\n          width: item.width,\r\n          height: item.height\r\n        });\r\n        return null;\r\n      });\r\n  }\r\n\r\n  async deleteByUuid(uuid: string): Promise<number> {\r\n    return this.dexie.images.where({uuid}).delete()\r\n      .then( (num) => {\r\n        return this.dexie.objektKatalogImages\r\n          .where({ImgUuid: uuid})\r\n          .delete()\r\n          .then( (numLinks) => num + numLinks)\r\n          .catch( () => {\r\n            console.error('ERROR: Can not delete links in objektKatalogImages for uuid: '  + uuid);\r\n            return num;\r\n          });\r\n      })\r\n      .catch( () => {\r\n        console.error('ERROR: Cannot Delete Image with uuid: ' + uuid);\r\n        return 0;\r\n      });\r\n  }\r\n}\r\n","import {EventEmitter, Injectable, Output} from '@angular/core';\r\nimport {\r\n  DBDIHersteller,\r\n  DBDIInventar,\r\n  DBDIObjektKatalogGlobal,\r\n  DBDIObjektKatalogMandant,\r\n  DBDIRaumEditStatus\r\n} from '../../../shared/interfaces/dexie.interfaces';\r\nimport {DexieService} from '../../../shared/services/dexie.service';\r\nimport {InventarData} from '../../../shared/services/data.service';\r\nimport {Guid} from 'guid-typescript';\r\nimport {BasedataService} from '../../../shared/services/basedata.service';\r\nimport {DatabaseChangeType} from 'dexie-observable/api';\r\nimport {AuthService} from '../../auth/auth.service';\r\nimport {ArtikelService} from './artikel.service';\r\nimport {HerstellerService} from './hersteller.service';\r\nimport {VariablesService} from '../../../shared/services/variables.service';\r\nimport {RaumService} from './raum.service';\r\n\r\nexport interface InventarFoundResult {\r\n  success: boolean;\r\n  inventar: null|DBDIInventar;\r\n  artikelRef: null|DBDIObjektKatalogMandant;\r\n  artikelData: null|DBDIObjektKatalogGlobal;\r\n  hersteller: null|DBDIHersteller;\r\n}\r\n\r\nexport interface InventarBasisDaten {\r\n  ivid?: number;\r\n  uuid?: string;\r\n  code?: string;\r\n  mid?: number;\r\n  mcid?: number;\r\n  mcuuid?: string;\r\n  gcid?: number;\r\n  gcuuid?: string;\r\n  Bezeichnung?: string;\r\n  Gruppe?: string;\r\n  Kategorie?: string;\r\n  Typ?: string;\r\n  Hersteller?: string;\r\n  Groesse?: string;\r\n  Farbe?: string;\r\n  Zustand?: string;\r\n  hid?: number;\r\n  huuid?: string;\r\n  log?: boolean;\r\n}\r\n\r\nexport const enum InventarChangeType {\r\n  Create = DatabaseChangeType.Create,\r\n  Update = DatabaseChangeType.Update,\r\n  Delete = DatabaseChangeType.Delete\r\n}\r\n\r\nexport interface InventarChanged {\r\n  type: InventarChangeType;\r\n  table: string;\r\n  key: any;\r\n  uuid?: string;\r\n  obj?: any;\r\n  mods?: {[keyPath: string]: any | undefined};\r\n}\r\n\r\nexport interface InventarEditResultPresets {\r\n  type: InventarChangeType;\r\n  success?: boolean;\r\n  message?: string;\r\n  errorMsg?: string;\r\n  errorCode?: InventarEditErrorCode;\r\n  insertID?: number;\r\n  insertUUID?: string;\r\n}\r\n\r\nexport interface InventarEditResult extends InventarEditResultPresets {\r\n  success: boolean;\r\n}\r\n\r\nexport interface InventarInsertResult extends InventarEditResult {\r\n  insertID: number;\r\n  insertUUID: string;\r\n}\r\n\r\nexport enum InventarEditErrorCode {\r\n  NoError,\r\n  RaumNotFound,\r\n  InventarNotFound,\r\n  ArtikelNotFound,\r\n  ArtikelMandantNotFound,\r\n  ArtikelGlobalNotFound\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InventarService {\r\n\r\n  @Output() changed = new EventEmitter<InventarChanged>();\r\n\r\n  constructor(private dexie: DexieService,\r\n              private authService: AuthService,\r\n              private baseData: BasedataService,\r\n              private herstellerService: HerstellerService,\r\n              private artikelService: ArtikelService,\r\n              private variablesService: VariablesService,\r\n              private raumService: RaumService\r\n  ) { }\r\n\r\n  returnResultSuccess<T extends InventarEditResult>(data: InventarEditResultPresets): T {\r\n    const result: any = {\r\n      type: data.type,\r\n      success: true,\r\n      message: data.message || ''\r\n    };\r\n    if (data.type === InventarChangeType.Create) {\r\n      result.insertID = data.insertID;\r\n      result.insertUUID = data.insertUUID;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  getJobiId(): number {\r\n    return this.baseData.getCurrentJobid();\r\n  }\r\n\r\n  getMid(): number {\r\n    return this.baseData.getCurrentMid();\r\n  }\r\n\r\n  getUserId(): number {\r\n    return this.authService.getUser().id;\r\n  }\r\n\r\n  getFreshUuid(): string {\r\n    return Guid.create().toString();\r\n  }\r\n\r\n  async getNewKunstBarcode(): Promise<string> {\r\n    const jobid = this.getJobiId();\r\n    const varLastOffset = 'KunstBarcodeOffset_' + jobid;\r\n    const devid = this.baseData.getCurrentDeviceId().toString(10);\r\n    const offsetDefault = '9' + devid.padStart(4, '0') + '00001';\r\n\r\n    let codeCheckInc =  await this.variablesService.get(varLastOffset, parseInt(offsetDefault, 10) );\r\n    if (!codeCheckInc) {\r\n      codeCheckInc = parseInt(offsetDefault, 10);\r\n    }\r\n    let code = ''; // codeCheckInc;\r\n    let itemCheck: DBDIInventar = null;\r\n\r\n    do {\r\n      code = codeCheckInc.toString(10);\r\n      itemCheck = await this.dexie.inventar.where({\r\n        for_jobid: jobid,\r\n        code\r\n      }).first();\r\n      ++codeCheckInc;\r\n    } while (itemCheck);\r\n\r\n    await this.variablesService.set(varLastOffset, parseInt(code, 10) );\r\n\r\n    return code;\r\n  }\r\n\r\n  returnResultError(data: InventarEditResultPresets): InventarEditResult {\r\n    return {\r\n      type: data.type,\r\n      success: false,\r\n      message: data.message || '',\r\n      errorMsg: data.errorMsg || '',\r\n      errorCode: data.errorCode || null,\r\n    };\r\n  }\r\n\r\n  getHello(): string {\r\n    return 'hello';\r\n  }\r\n\r\n  async getInventar(uuid: string): Promise<InventarFoundResult> {\r\n    const result: InventarFoundResult = {\r\n      success: false,\r\n      inventar: null,\r\n      artikelRef: null,\r\n      artikelData: null,\r\n      hersteller: null\r\n    };\r\n\r\n    console.log('InventarService #155 getInventar(uuid: ', uuid , ')');\r\n    result.inventar = await this.dexie.inventar.get(uuid);\r\n    console.log('InventarService #157 inventar.get(uuid: ', uuid , ')', { result });\r\n\r\n    if (result.inventar) {\r\n      console.log('InventarService #160 objektKatalogMandant.get(uuid: ', result.inventar.mcuuid , ')');\r\n      result.artikelRef = await this.dexie.objektKatalogMandant.get(result.inventar.mcuuid);\r\n      console.log('InventarService #162 objektKatalogMandant.get(uuid: ', result.inventar.mcuuid , ')',\r\n        { resultArtikelRef: result.artikelRef });\r\n\r\n      if (result.artikelRef) {\r\n        result.success = true;\r\n        console.log('InventarService #155 objektKatalogGlobal.get(uuid: ', result.artikelRef.gcuuid , ')');\r\n        result.artikelData = await this.dexie.objektKatalogGlobal.get(result.artikelRef.gcuuid);\r\n        console.log('InventarService #155 objektKatalogGlobal.get(uuid: ', result.artikelRef.gcuuid , ')',\r\n          { resultArtikelData: result.artikelData});\r\n\r\n        if (result.artikelData.huuid) {\r\n          console.log('InventarService #172 herteller.get(huuid: ', result.artikelData.huuid, ')');\r\n          result.hersteller = await this.dexie.hersteller.get(result.artikelData.huuid);\r\n          console.log('InventarService #174 hersteller.get(huuid: ', result.artikelData.huuid, ')',\r\n            {resultHersteller: result.hersteller});\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  async insertInventar(inventar: DBDIInventar, useJobid?: number): Promise<InventarInsertResult> {\r\n    const jobid = useJobid || this.getJobiId();\r\n    const uid = this.getUserId();\r\n    const uuid = this.getFreshUuid();\r\n    console.log('InventarService #189 insertInventar: ', { inventar });\r\n    const item: DBDIInventar = {\r\n      mcid: inventar.mcid,\r\n      uuid,\r\n      mcuuid: inventar.mcuuid,\r\n      hash: '',\r\n      code: inventar.code,\r\n      ruuid: inventar.ruuid,\r\n      ruuid_neu: inventar.ruuid,\r\n      for_jobid: inventar.jobid || jobid,\r\n      jobid: inventar.jobid || jobid,\r\n      created_at: inventar.created_at || new Date(),\r\n      created_uid: inventar.created_uid || uid,\r\n      created_jobid: inventar.created_jobid || jobid\r\n    };\r\n    const log = { log: true };\r\n    const insertUuid = await this.dexie.inventar\r\n      .add( { ...item, ...log})\r\n      .then( id => id)\r\n      .catch( reason => {\r\n        console.error( reason, 'InventarService.insertInventar() #239 inventar.add', { item });\r\n        return '';\r\n      });\r\n\r\n    console.log('InventarService #207 insertInventar: ', { insertUuid, data: {...item, ...log} });\r\n    const saved = await this.dexie.inventar.get(insertUuid);\r\n    console.log('InventarService #207 insertInventar: ', { insertUuid, saved, data: {...item, ...log} });\r\n    if (insertUuid && saved) {\r\n      this.dexie.barcodeLookup.add({\r\n        code: saved.code,\r\n        for_jobid: jobid,\r\n        table: 'inventar',\r\n        key: 'uuid',\r\n        uuid: insertUuid,\r\n        updateHelper: 11\r\n      }).catch( reason => {\r\n        console.error(reason, 'InventarService.insertInventar() barcodeLookup.add', {\r\n          code: saved.code,\r\n          for_jobid: jobid,\r\n          table: 'inventar',\r\n          key: 'uuid',\r\n          uuid: insertUuid,\r\n          updateHelper: 11\r\n        });\r\n      });\r\n      const lkupItem = await this.dexie.barcodeLookup.get({code: saved.code, for_jobid: jobid});\r\n      console.log('InventarService #220 insertInventar: ', { insertUuid, saved, lkupItem, data: {...item, ...log} });\r\n    }\r\n    this.changed.emit({\r\n      type: InventarChangeType.Create,\r\n      table: this.dexie.inventar.name,\r\n      key: insertUuid,\r\n      uuid,\r\n      obj: item\r\n    });\r\n\r\n    return this.returnResultSuccess<InventarInsertResult>({\r\n      type: InventarChangeType.Create,\r\n      insertUUID: uuid\r\n    });\r\n  }\r\n\r\n  async updateArtikelRef(uuid: string, inventar: DBDIInventar, useJobid?: number): Promise<InventarEditResult> {\r\n    const jobid = useJobid || this.getJobiId();\r\n    const uid = this.getUserId();\r\n\r\n    /*\r\n    const inventar: DBDIInventar = {\r\n      mcid: this.formInventar.mcid,\r\n      mcuuid: this.formInventar.mcuuid,\r\n      ruuid: this.formInventar.ruuid,\r\n      code: this.formInventar.Barcode,\r\n      jobid,\r\n      created_at: new Date(),\r\n      created_uid: uid\r\n    };\r\n    */\r\n    const inventarEditResult: InventarEditResult = {\r\n      type: InventarChangeType.Update,\r\n      success: false,\r\n      message: '',\r\n      errorMsg: '',\r\n      errorCode: InventarEditErrorCode.NoError,\r\n      insertUUID: uuid\r\n    };\r\n\r\n    const item: DBDIInventar = {\r\n      mcid: inventar.mcid,\r\n      uuid,\r\n      mcuuid: inventar.mcuuid,\r\n      code: inventar.code,\r\n      jobid: inventar.jobid || jobid,\r\n      modified_at: inventar.modified_at || new Date(),\r\n      modified_uid: inventar.modified_uid || uid,\r\n      modified_jobid: inventar.modified_jobid || jobid\r\n    };\r\n    return this.dexie.inventar.update(uuid, item).then(\r\n      (n: number) => {\r\n        inventarEditResult.success = true;\r\n        inventarEditResult.message = 'Inventar wurde aktualisiert!';\r\n        return inventarEditResult;\r\n    },\r\n      (reason: any) => {\r\n        console.error('InventarService updateArtikelRef #277', {\r\n          uuid,\r\n          inventar,\r\n          updateData: item,\r\n          reason\r\n        });\r\n        inventarEditResult.errorCode = InventarEditErrorCode.InventarNotFound;\r\n        inventarEditResult.message = 'Fehler bei Aktualisierung der Inventardaten! (siehe console.error)';\r\n        inventarEditResult.errorMsg = JSON.stringify(reason);\r\n        return inventarEditResult;\r\n      });\r\n  }\r\n\r\n  async updateByUuid(uuid: string, daten: InventarBasisDaten): Promise<InventarFoundResult> {\r\n    // return this.getInventar(ivid);\r\n    console.log('#205 updateById', { uuid, daten });\r\n\r\n    const updateData = daten;\r\n    const jobid = this.getJobiId();\r\n    const uid = this.getUserId();\r\n    const mid = this.getMid();\r\n    const devID = this.baseData.getCurrentDeviceId();\r\n    const oldData = await this.getInventar(uuid);\r\n    let bUpdateBarceLookup = false;\r\n\r\n    const globalKatalogDaten = {\r\n      Bezeichnung: daten.Bezeichnung,\r\n      Gruppe: daten.Gruppe,\r\n      Kategorie: daten.Kategorie,\r\n      Typ: daten.Typ,\r\n      Farbe: daten.Farbe,\r\n      Groesse: daten.Groesse,\r\n      hid: daten.hid || 0,\r\n      huuid: daten.huuid || null\r\n    };\r\n\r\n    if (daten.Hersteller) {\r\n      console.log('#226 checkAndGet Hersteller: ', daten.Hersteller);\r\n      const hstQuery = this.dexie.hersteller.where('Hersteller').equals(daten.Hersteller);\r\n      if (await hstQuery.count() > 0) {\r\n        console.log('#228 checkAndGet Hersteller existiert bereits');\r\n        await this.dexie.hersteller\r\n          .where('Hersteller').equals(daten.Hersteller)\r\n          .first()\r\n          .then( hstData => {\r\n            globalKatalogDaten.hid = hstData.hid;\r\n            globalKatalogDaten.huuid = hstData.uuid;\r\n          });\r\n      } else {\r\n        console.log('#238 checkAndGet Hersteller wird angelegt');\r\n        await this.herstellerService.createAndGetData(daten.Hersteller)\r\n          .then( (hst) => {\r\n          globalKatalogDaten.hid = hst.hid;\r\n          globalKatalogDaten.huuid = hst.uuid;\r\n        });\r\n      }\r\n    }\r\n\r\n    const okgFilledFields = this.getFilledFields(globalKatalogDaten);\r\n    const okgEmptyFieldnames = Object.keys(this.getEmptyFields(globalKatalogDaten));\r\n    const okgArtikelMatches = await this.dexie.objektKatalogGlobal\r\n      .filter( (rslt) => {\r\n        for (const ff of Object.keys(okgFilledFields)) {\r\n          const val = okgFilledFields[ff];\r\n          const valRslt = typeof rslt[ff] === 'string' ? rslt[ff].trim() : rslt[ff];\r\n          if (val !== valRslt) {\r\n            return false;\r\n          }\r\n        }\r\n        for (const ef of okgEmptyFieldnames) {\r\n          const valRslt = typeof rslt[ef] === 'string' ? rslt[ef].trim() : rslt[ef];\r\n          if (null !== valRslt && '' !== valRslt) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      }).toArray();\r\n\r\n    console.log('#267 okgArtikelMatches', { okgFilledFields, okgEmptyFieldnames, okgArtikelMatches });\r\n    let okgArtikel: DBDIObjektKatalogGlobal = null;\r\n    let okmArtikelRef: DBDIObjektKatalogMandant = null;\r\n\r\n    switch (okgArtikelMatches.length) {\r\n      case 0:\r\n        console.log('#273 checkAndGet Artikel wird angelegt');\r\n        okgArtikel = await this.artikelService.insertArtikelData(globalKatalogDaten);\r\n        break;\r\n\r\n      case 1:\r\n        okgArtikel = okgArtikelMatches[0];\r\n        break;\r\n\r\n      default:\r\n        okgArtikel = okgArtikelMatches.sort( (a, b) => {\r\n          const rankA = a.created_jobid === jobid ? 1 : (a.modified_jobid === jobid ? 2 : 3);\r\n          const rankB = b.created_jobid === jobid ? 1 : (b.modified_jobid === jobid ? 2 : 3);\r\n          return rankA < rankB ? -1 : (rankA > rankB ? 1 : 0);\r\n        })[0];\r\n    }\r\n\r\n    if (okgArtikel) {\r\n      console.log('#290 checkAndGet Artikel existiert/angelegt');\r\n      okmArtikelRef = await this.dexie.objektKatalogMandant.where({\r\n        mid,\r\n        for_jobid: jobid,\r\n        gcid: okgArtikel.gcid\r\n      }).first();\r\n\r\n      if (!okmArtikelRef) {\r\n        console.log('#296 checkAndGet ArtikelRef nuss angeleget werden');\r\n        okmArtikelRef = await this.artikelService.insertArtikelRefByGcidGcuuid(okgArtikel.uuid);\r\n      }\r\n\r\n      const updateInv: any = {};\r\n      if (okmArtikelRef.uuid !== daten.mcuuid) {\r\n        updateInv.mcuuid = okmArtikelRef.uuid;\r\n      }\r\n      if (oldData.inventar.Zustand !== daten.Zustand) {\r\n        updateInv.Zustand = daten.Zustand;\r\n      }\r\n      if (oldData.inventar.code !== daten.code) {\r\n        updateInv.code = daten.code;\r\n        bUpdateBarceLookup = true;\r\n      }\r\n\r\n      if (Object.keys(updateInv).length > 0) {\r\n        console.log('#310 checkAndGet ArtikelRef-ID muss im Inventar aktualisiert werden');\r\n        updateInv.modified_at = new Date();\r\n        updateInv.modified_uid = uid;\r\n        updateInv.modified_jobid = jobid;\r\n        updateInv.modified_device_id = devID;\r\n        updateInv.log = true;\r\n\r\n        await this.dexie.inventar.update(uuid, updateInv).then( () => {\r\n          if (bUpdateBarceLookup) {\r\n            console.log('InventarService #353 call updateBarcodelookup(', { ivid: uuid, datenCode: daten.code });\r\n            this.updateBarcodeLookup(uuid, daten.code, oldData.inventar.code);\r\n          } else {\r\n            console.log('InventarService #356 Barcode has not changed');\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    const result = await this.getInventar(uuid);\r\n    console.log('#322 return Inventar-Data', result);\r\n\r\n    return result;\r\n  }\r\n\r\n  async updateRefs(uuid: string, mcuuid: string, daten?: any) {\r\n    const jobid = this.getJobiId();\r\n    const uid = this.getUserId();\r\n    const mid = this.getMid();\r\n    const devID = this.baseData.getCurrentDeviceId();\r\n    const updateInv: any = {};\r\n    const oldData = await this.getInventar(uuid);\r\n    let bUpdateBarceLookup = false;\r\n\r\n    updateInv.mcuuid = mcuuid;\r\n\r\n    if (daten.Zustand && daten.Zustand !== oldData.inventar.Zustand) {\r\n      updateInv.Zustand = daten.Zustand;\r\n    }\r\n\r\n    if (daten.code && daten.code !== oldData.inventar.code) {\r\n      updateInv.code = daten.code;\r\n      bUpdateBarceLookup = true;\r\n    }\r\n\r\n    console.log('#310 checkAndGet ArtikelRef-ID muss im Inventar aktualisiert werden');\r\n    updateInv.modified_at = new Date();\r\n    updateInv.modified_uid = uid;\r\n    updateInv.modified_jobid = jobid;\r\n    updateInv.modified_device_id = devID;\r\n    updateInv.log = true;\r\n\r\n    this.dexie.inventar.update(uuid, updateInv).then( () => {\r\n      if (bUpdateBarceLookup) {\r\n        this.updateBarcodeLookup(uuid, daten.code, oldData.inventar.code);\r\n      }\r\n    });\r\n  }\r\n\r\n  async updateBarcodeLookup(uuid: string, code: string, oldCode?: string) {\r\n    console.log('InventarService #410 called updateBarcodelookup(', { uuid, code }, ')');\r\n    let savedRaumDataCode = oldCode;\r\n    const savedRaumData = await this.dexie.inventar.get(uuid);\r\n    if (!oldCode) {\r\n      savedRaumDataCode = savedRaumData.code;\r\n    }\r\n    const jobid = this.getJobiId();\r\n    console.log('InventarService #413 check if code has changed(', { ivid: uuid, code, savedRaumDataCode }, ')');\r\n    if (savedRaumDataCode !== code) {\r\n      const lkupKey = {\r\n        code: savedRaumDataCode,\r\n        for_jobid: jobid\r\n      };\r\n      const bcItem = await this.dexie.barcodeLookup.get(lkupKey);\r\n      if (bcItem) {\r\n        console.log('InventarService #420 make update on existing bcItem: ', { lkupKey });\r\n        await this.dexie.barcodeLookup.update([savedRaumDataCode, jobid], {\r\n          code\r\n        });\r\n      } else {\r\n        console.log('InventarService #425 create new bcItem');\r\n        this.dexie.barcodeLookup.put({\r\n          code,\r\n          for_jobid: jobid,\r\n          key: 'uuid',\r\n          table: 'inventar',\r\n          updateHelper: 1,\r\n          uuid: savedRaumData.uuid\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  getFilledFields(obj: object): object {\r\n    const allFields = Object.keys(obj);\r\n    const filledFields = {};\r\n    for (const f of allFields) {\r\n      const val = (typeof obj[f] === 'string') ? obj[f].trim() : obj[f];\r\n      if (null === val || '' === val) {\r\n        continue;\r\n      }\r\n      filledFields[f] = val;\r\n    }\r\n    return filledFields;\r\n  }\r\n\r\n  getEmptyFields(obj: object): object {\r\n    const allFields = Object.keys(obj);\r\n    const emptyFields = {};\r\n    for (const f of allFields) {\r\n      const val = (typeof obj[f] === 'string') ? obj[f].trim() : obj[f];\r\n      if (null === val || '' === val) {\r\n        emptyFields[f] = val;\r\n      }\r\n    }\r\n    return emptyFields;\r\n  }\r\n\r\n  async assignRaum(uuid: string, ruuid: string, useJobid?: number): Promise<InventarEditResult> {\r\n    const db = this.dexie;\r\n    const inventar = db.inventar;\r\n    const raeume = db.raeume;\r\n    const jobid = useJobid || this.baseData.getCurrentJobid();\r\n    const uid = this.baseData.getCurrentUid();\r\n    const devid = this.baseData.getCurrentDeviceId();\r\n    const log = { log: true };\r\n\r\n    console.log('InventoryEditorService.assignInventarToRaum', {\r\n      uuid,\r\n      ruuid,\r\n      jobid,\r\n      uid,\r\n      devid\r\n    });\r\n\r\n    return Promise.all([\r\n      inventar.get(uuid),\r\n      raeume.get(ruuid)\r\n    ])\r\n      .then(result => {\r\n        const inv = result[0];\r\n        const raum = result[1];\r\n        console.log('InventoryEditorService.assignInventarToRaum', {\r\n          inv,\r\n          raum\r\n        });\r\n\r\n        if (!inv) {\r\n          return this.returnResultError( {\r\n            type: InventarChangeType.Update,\r\n            errorCode: InventarEditErrorCode.InventarNotFound });\r\n        }\r\n\r\n        if (!raum) {\r\n          return this.returnResultError( {\r\n            type: InventarChangeType.Update,\r\n            errorCode: InventarEditErrorCode.RaumNotFound });\r\n        }\r\n        const changes = {\r\n          ruuid: raum.uuid,\r\n          jobid,\r\n          modified_at: new Date(),\r\n          modified_uid: uid,\r\n          modified_jobid: jobid,\r\n          modified_device_id: devid\r\n        };\r\n\r\n        return inventar.update(inv.uuid, { ...changes, ...log}).then( () => {\r\n          this.changed.emit({\r\n            type: InventarChangeType.Update,\r\n            table: inventar.name,\r\n            key: inv.uuid,\r\n            uuid: inv.uuid,\r\n            obj: { ...inv, ...changes },\r\n            mods: changes\r\n          });\r\n\r\n          if (raum.current_jobstatus === 0) {\r\n            this.raumService.setRaumStatus(DBDIRaumEditStatus.Started, ruuid, jobid);\r\n          }\r\n\r\n          return this.returnResultSuccess<InventarEditResult>({\r\n            type: InventarChangeType.Update\r\n          });\r\n        } );\r\n      });\r\n  }\r\n\r\n  async getInventarListRestByRaumUuid(ruuid: string, jobid: number): Promise<InventarData[]> {\r\n\r\n    const inventarDataList: InventarData[] = [];\r\n    const inventarList = await this.dexie.inventar\r\n      .where({ ruuid })\r\n      .and( (item) => item.jobid !== jobid)\r\n      .sortBy( 'created_at' );\r\n\r\n    const artikelRefs = await this.dexie.objektKatalogMandant\r\n      .where( 'uuid').anyOf( inventarList.map<string>( itm => itm.mcuuid ) )\r\n      .toArray();\r\n\r\n    const artikelData = await this.dexie.objektKatalogGlobal\r\n      .where( 'uuid').anyOf( artikelRefs.map<string>( itm => itm.gcuuid) )\r\n      .toArray();\r\n\r\n    for (const inventar of inventarList) {\r\n      const d: InventarData = { inventar, artikelRef: null, artikelData: null };\r\n      d.artikelRef = artikelRefs.find( itm => itm.uuid === inventar.mcuuid);\r\n      if (d.artikelRef) {\r\n        d.artikelData = artikelData.find( itm => itm.uuid === d.artikelRef.gcuuid );\r\n      }\r\n      inventarDataList.push(d);\r\n    }\r\n    return inventarDataList;\r\n  }\r\n\r\n  async getInventarListDoneByRaumUuid(ruuid: string, jobid: number): Promise<InventarData[]> {\r\n\r\n    const inventarDataList: InventarData[] = [];\r\n    const inventarList = await this.dexie.inventar\r\n      .where({ ruuid })\r\n      .and( (item) => item.jobid === jobid)\r\n      .sortBy( 'modified_at' );\r\n\r\n    const artikelRefs = await this.dexie.objektKatalogMandant\r\n      .where( 'uuid').anyOf( inventarList.map<string>( itm => itm.mcuuid ) )\r\n      .toArray();\r\n\r\n    const artikelData = await this.dexie.objektKatalogGlobal\r\n      .where( 'uuid').anyOf( artikelRefs.map<string>( itm => itm.gcuuid) )\r\n      .toArray();\r\n\r\n    for (const inventar of inventarList) {\r\n      const d: InventarData = { inventar, artikelRef: null, artikelData: null };\r\n      d.artikelRef = artikelRefs.find( itm => itm.uuid === inventar.mcuuid);\r\n      if (d.artikelRef) {\r\n        d.artikelData = artikelData.find( itm => itm.uuid === d.artikelRef.gcuuid );\r\n      }\r\n      inventarDataList.push(d);\r\n    }\r\n    return inventarDataList;\r\n  }\r\n}\r\n","import {EventEmitter, Injectable} from '@angular/core';\r\nimport {\r\n  DBDIImages,\r\n  DBDIObjektKatalogImages,\r\n  DBDIRaeume,\r\n  DBDIRaumEditStatus\r\n} from '../../../shared/interfaces/dexie.interfaces';\r\nimport { DexieService } from '../../../shared/services/dexie.service';\r\nimport {Guid} from 'guid-typescript';\r\nimport {AuthService} from '../../auth/auth.service';\r\nimport {DbInsertResult, DbUpdateResult} from './data-interfaces';\r\nimport {throwError} from 'rxjs';\r\nimport {BasedataService} from '../../../shared/services/basedata.service';\r\n\r\nexport interface RaumBasisDaten {\r\n  gid?: number;\r\n  Raum?: string;\r\n  Raumbezeichnung?: string;\r\n  Etage?: string;\r\n  code?: string;\r\n}\r\n\r\nexport interface RaumImages {\r\n  uuid: string;\r\n  name: string;\r\n  type: string;\r\n  size: number;\r\n  width: number;\r\n  height: number;\r\n  Kategorie: string;\r\n  RaumUuid: string;\r\n  desc: string;\r\n}\r\n\r\nexport interface DBInsertRaumResult extends DbInsertResult {\r\n  newItem?: DBDIRaeume;\r\n}\r\n\r\nexport interface DBUpdateRaumResult extends DbUpdateResult {\r\n  item?: DBDIRaeume;\r\n}\r\n\r\nexport interface RaumIDAndStatus {\r\n  uuid: string;\r\n  status: DBDIRaumEditStatus;\r\n}\r\n\r\nexport interface RaumStatusProgress {\r\n  uuid: string;\r\n  Raum: string;\r\n  Etage: string;\r\n  editStatus: DBDIRaumEditStatus;\r\n  progress: number;\r\n  total: number;\r\n  done: number;\r\n}\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RaumService {\r\n\r\n  raumStatusChanged = new EventEmitter<RaumIDAndStatus>();\r\n\r\n  constructor(private dexie: DexieService,\r\n              private authService: AuthService,\r\n              private baseDataService: BasedataService) {\r\n  }\r\n\r\n  public async raumExists(gid: number, raum: string): Promise<boolean> {\r\n    const numRaeume = await this.dexie.raeume\r\n      .where('Raum')\r\n      .equalsIgnoreCase(raum)\r\n      .filter(itm => itm.gid === gid)\r\n      .count();\r\n\r\n    return 0 < numRaeume;\r\n  }\r\n\r\n  public async raumBezeichnungExists(gid: number, bezeichnung: string): Promise<boolean> {\r\n    const numRaeume = await this.dexie.raeume\r\n      .where('Raumbezeichnung')\r\n      .equalsIgnoreCase(bezeichnung)\r\n      .filter(itm => itm.gid === gid)\r\n      .count();\r\n\r\n    return 0 < numRaeume;\r\n  }\r\n\r\n  public async codeExistsInInventur(jobid: number, ruuid: string, code: string): Promise<boolean> {\r\n    const raeume = this.dexie.raeume\r\n      .where('code')\r\n      .equalsIgnoreCase(code.trim())\r\n      .filter(itm => itm.uuid !== ruuid && itm.for_jobid !== jobid);\r\n\r\n    const numRaeume = await this.dexie.raeume\r\n      .where('code')\r\n      .equalsIgnoreCase(code.trim())\r\n      .filter(itm => itm.uuid !== ruuid && itm.for_jobid !== jobid)\r\n      .count();\r\n    const exists = 0 < numRaeume;\r\n\r\n    console.log('#85 raum.service.ts codeExistsInInventur', {\r\n      params: {\r\n        jobid,\r\n        ruuid,\r\n        code\r\n      },\r\n      result: {\r\n        exists,\r\n        raeume,\r\n        numRaeume\r\n      }\r\n    });\r\n    return exists;\r\n  }\r\n\r\n  public async raumExistsInInventur(jobid: number, ruuid: string, Raum: string): Promise<boolean> {\r\n    const numRaeume = await this.dexie.raeume\r\n      .where('Raum')\r\n      .equalsIgnoreCase(Raum.trim())\r\n      .filter(itm => itm.uuid !== ruuid && itm.for_jobid !== jobid)\r\n      .count();\r\n\r\n    return 0 < numRaeume;\r\n  }\r\n\r\n  async get(uuid: string): Promise<DBDIRaeume> {\r\n    return this.dexie.raeume.get(uuid);\r\n  }\r\n\r\n  public async insert(daten: RaumBasisDaten, useJobId?: number): Promise<DBInsertRaumResult> {\r\n    const jobid = useJobId || this.baseDataService.getCurrentJobid();\r\n\r\n    const insertData: DBDIRaeume = {\r\n      gid: daten.gid,\r\n      uuid: Guid.create().toString(),\r\n      hash: '',\r\n      for_jobid: jobid,\r\n      code: daten.code,\r\n      raumid: '',\r\n      Raum: daten.Raum,\r\n      Raumbezeichnung: daten.Raumbezeichnung,\r\n      Etage: daten.Etage,\r\n      created_at: new Date(),\r\n      created_jobid: jobid,\r\n      created_uid: this.authService.getUser().id,\r\n      modified_at: null,\r\n      modified_uid: null\r\n    };\r\n    const log = { log: true };\r\n\r\n    let newId = '';\r\n    let newItem = null;\r\n    try {\r\n      newId = await this.dexie.raeume.add( { ...insertData, ...log });\r\n      newItem = await this.dexie.raeume.get(newId);\r\n    } catch (err) {\r\n      const errorMsg = ( ('name' in err) ? err.name + ': ' : '')\r\n        + ( ('message' in err) ? err.message : JSON.stringify(err));\r\n      return {\r\n        success: false,\r\n        errorMsg,\r\n        debug: err,\r\n        data: insertData\r\n      } as DBInsertRaumResult;\r\n    }\r\n\r\n    console.log('insert Raum ', {newItem});\r\n    return {\r\n      success: true,\r\n      newId,\r\n      newItem\r\n    };\r\n  }\r\n\r\n  public async updateByUuid(uuid: string, raum: DBDIRaeume|RaumBasisDaten): Promise<DBUpdateRaumResult> {\r\n    console.log('#162 raum.service.ts updateById:', { uuid, raum });\r\n    const jobid = this.baseDataService.getCurrentJobid();\r\n    const savedRaumData = await this.dexie.raeume.get(uuid);\r\n\r\n    const hasUuid = ('uuid' in raum) && (typeof raum.uuid === 'string') && raum.uuid !== '';\r\n    const updUuid = hasUuid && ('uuid' in raum)  ? raum.uuid : uuid;\r\n\r\n    if (savedRaumData.code && savedRaumData.code !== raum.code) {\r\n      const lkupKey = {\r\n        code: savedRaumData.code,\r\n        for_jobid: jobid\r\n      };\r\n      console.log('#172 raum.service.ts Raum-Code has changed', { lkupKey });\r\n      const bcItem = await this.dexie.barcodeLookup.get(lkupKey);\r\n      console.log('#174 raum.service.ts check if bcItem exists', { bcItem });\r\n      if (bcItem) {\r\n        await this.dexie.barcodeLookup.delete([savedRaumData.code, jobid]).catch( (reason) => {\r\n          console.error('#177 Alter BC-Lookup fuer Raum konnte nicht geloescht werden!', { reason });\r\n        });\r\n      }\r\n\r\n      console.log('#184 raum.service.ts create new bcItem', {\r\n        code: raum.code,\r\n        for_jobid: jobid,\r\n        id: uuid,\r\n        key: 'uuid',\r\n        table: 'raeume',\r\n        updateHelper: 1,\r\n        uuid: updUuid\r\n      });\r\n\r\n      if (raum.code) {\r\n        await this.dexie.barcodeLookup.put({\r\n          code: raum.code,\r\n          for_jobid: jobid,\r\n          key: 'uuid',\r\n          table: 'raeume',\r\n          updateHelper: 1,\r\n          uuid: updUuid\r\n        });\r\n      }\r\n    } else if (raum.code) {\r\n      const bcItem = await this.dexie.barcodeLookup.get({code: raum.code, for_jobid: jobid});\r\n      if (!bcItem) {\r\n        this.dexie.barcodeLookup.put({\r\n          code: raum.code,\r\n          for_jobid: jobid,\r\n          key: 'uuid',\r\n          table: 'raeume',\r\n          updateHelper: 1,\r\n          uuid: updUuid\r\n        });\r\n      }\r\n    }\r\n\r\n    console.log('#205 raum.service.ts update raum', { uuid, raum });\r\n    const numChanges = await this.dexie.raeume.update(uuid, { ...raum, ...{ log: true }});\r\n    const savedData = await this.dexie.raeume.get(uuid);\r\n    console.log('#208 raum.service.ts get updated raumItem', { uuid, savedData, return: {\r\n        success: numChanges > 0,\r\n        id: uuid,\r\n        item: savedData,\r\n        data: raum\r\n      }});\r\n    return {\r\n      success: numChanges > 0,\r\n      id: uuid,\r\n      item: savedData,\r\n      data: raum\r\n    };\r\n  }\r\n\r\n  public async __DEL__updateByUuid(uuid: string, raum: DBDIRaeume|RaumBasisDaten): Promise<DBUpdateRaumResult> {\r\n    const numChanges = await this.dexie.raeume.where({ uuid }).modify(raum);\r\n    const savedData = await this.dexie.raeume.where({ uuid }).first();\r\n    return {\r\n      success: numChanges > 0,\r\n      id: savedData.uuid,\r\n      item: savedData,\r\n      data: raum\r\n    };\r\n  }\r\n\r\n  public async getRaumPlaene(ruuid: string): Promise<RaumImages[]> {\r\n    const totalImages = await this.dexie.objektKatalogImages.where({\r\n      RefTable: 'Raeume',\r\n      RefUuid: ruuid\r\n    }).toArray();\r\n    const imgWithUuids = await this.dexie.objektKatalogImages.where({\r\n      RefTable: 'Raeume',\r\n      RefUuid: ruuid,\r\n      Kategorie: 'Plan'\r\n    }).toArray();\r\n\r\n    const imgUuids = imgWithUuids.map( (row) => row.ImgUuid );\r\n\r\n    console.log('RaumService.getRaumPlaene, ruuid: ', ruuid, 'totalImages', totalImages, 'imgUuids', imgUuids);\r\n    if (imgUuids.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    return this.dexie.images\r\n      .where( 'uuid').anyOf(imgUuids)\r\n      .toArray()\r\n      .then( (images) => {\r\n        return images.map((img) => ({\r\n          uuid: img.uuid,\r\n          name: img.name,\r\n          type: img.type,\r\n          size: img.size,\r\n          width: img.width,\r\n          height: img.height,\r\n          desc: img.desc || '',\r\n          Kategorie: 'Plan',\r\n          RaumUuid: ruuid\r\n        }));\r\n      });\r\n  }\r\n\r\n  public async getRaumBilder(ruuid: string): Promise<RaumImages[]> {\r\n    const totalImages = await this.dexie.objektKatalogImages.where({\r\n      RefTable: 'Raeume',\r\n      RefUuid: ruuid\r\n    }).toArray();\r\n    const imgUuids = await this.dexie.objektKatalogImages.where({\r\n      RefTable: 'Raeume',\r\n      RefUuid: ruuid,\r\n      Kategorie: 'Bild'\r\n    }).toArray().then( (rows) => rows.map( (row) => row.ImgUuid) );\r\n\r\n    console.log('RaumService.getRaumBilder, ruuid: ', ruuid, 'totalImages', totalImages, 'imgUuids.length', imgUuids.length);\r\n    if (imgUuids.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    return this.dexie.images\r\n      .where( 'uuid').anyOf(imgUuids)\r\n      .toArray()\r\n      .then( (images) => {\r\n        return images.map((img) => ({\r\n          uuid: img.uuid,\r\n          name: img.name,\r\n          type: img.type,\r\n          size: img.size,\r\n          width: img.width,\r\n          height: img.height,\r\n          desc: img.desc || '',\r\n          Kategorie: 'Bild',\r\n          RaumUuid: ruuid\r\n        }));\r\n      });\r\n  }\r\n\r\n  public async getEtagenByGidInInventur(jobid: number, gid: number): Promise<string[]> {\r\n    const etagen: string[] = [];\r\n    return this.dexie.raeume\r\n      .where({ for_jobid: jobid, gid }).each( raum => {\r\n      if (etagen.indexOf(raum.Etage) === -1) {\r\n        etagen.push( raum.Etage );\r\n      }\r\n    }).then( () => etagen );\r\n  }\r\n\r\n  public async getRaumStatus(uuid: string): Promise<DBDIRaumEditStatus> {\r\n    const raum = await this.dexie.raeume.get(uuid);\r\n    if (raum) {\r\n      return raum.current_jobstatus;\r\n    }\r\n    throwError( `ERROR - GetRaumStatus: Raum mit ID ${uuid} wurde nicht gefunden`);\r\n  }\r\n\r\n  public async triggerRaumStatus(uuid: string): Promise<void> {\r\n    const raum = await this.dexie.raeume.get(uuid);\r\n    this.raumStatusChanged.emit({\r\n      uuid,\r\n      status: raum.current_jobstatus\r\n    });\r\n  }\r\n\r\n\r\n  public async setRaumStatus(stat: DBDIRaumEditStatus, uuid: string, jobid: number): Promise<number> {\r\n    const log = true;\r\n    const numChanges = await this.dexie.raeume.where({uuid}).modify({\r\n      current_jobstatus: stat,\r\n      current_jobid: jobid,\r\n      log\r\n    });\r\n\r\n    if (numChanges) {\r\n      this.triggerRaumStatus(uuid);\r\n    }\r\n    return numChanges;\r\n  }\r\n\r\n  public async setRaumStatusInit(uuid: string, jobid: number): Promise<number> {\r\n    return await this.setRaumStatus(DBDIRaumEditStatus.Init, uuid, jobid);\r\n  }\r\n\r\n  public async setRaumStatusStarted(uuid: string, jobid: number): Promise<number> {\r\n    return await this.setRaumStatus(DBDIRaumEditStatus.Started, uuid, jobid);\r\n  }\r\n\r\n  public async setRaumStatusClosed(uuid: string, jobid: number): Promise<number> {\r\n    return await this.setRaumStatus(DBDIRaumEditStatus.Closed, uuid, jobid);\r\n  }\r\n\r\n  public async getRaeumeStartedByGebaeudeId(gid: number, jobid: number): Promise<RaumStatusProgress[]> {\r\n    const raeume = await this.dexie.raeume.where({ gid }).toArray();\r\n    const raeumeStat = await Promise.all( raeume.map( (raum: DBDIRaeume) => {\r\n      return Promise.all([\r\n        this.dexie.inventar.where({ ruuid: raum.uuid }).count(),\r\n        this.dexie.inventar.where({ ruuid: raum.uuid, jobid }).count()\r\n        ]).then( (results) => {\r\n          const total = results[0];\r\n          const done = results[1];\r\n          const progress = total > 0 ? done * 100 / total : -1;\r\n\r\n          return {\r\n            uuid: raum.uuid,\r\n            Raum: raum.Raum,\r\n            Etage: raum.Etage,\r\n            editStatus: raum.current_jobstatus,\r\n            progress,\r\n            total,\r\n            done\r\n          } as RaumStatusProgress;\r\n      });\r\n    }));\r\n\r\n    return raeumeStat.filter( stat => stat.editStatus === DBDIRaumEditStatus.Closed || stat.done > 0);\r\n  }\r\n\r\n  public async getRaeumeToDoByGebaeudeId(gid: number, jobid: number): Promise<RaumStatusProgress[]> {\r\n    const raeume = await this.dexie.raeume\r\n      .where({ gid } )\r\n      .and( r => r.current_jobstatus !== DBDIRaumEditStatus.Closed).toArray();\r\n\r\n    const raeumeStat = await Promise.all(raeume.map( (raum: DBDIRaeume) => {\r\n      return Promise.all([\r\n        this.dexie.inventar.where({ ruuid: raum.uuid }).count(),\r\n        this.dexie.inventar.where({ ruuid: raum.uuid, jobid }).count()\r\n      ]).then( (results) => {\r\n        return {\r\n          uuid: raum.uuid,\r\n          Raum: raum.Raum,\r\n          Etage: raum.Etage,\r\n          progress: 0,\r\n          editStatus: raum.current_jobstatus,\r\n          total: results[0],\r\n          done: results[1]\r\n        };\r\n      });\r\n    }));\r\n    return raeumeStat.filter( stat => stat.done === 0);\r\n  }\r\n}\r\n","export default \"#inventurTitel {\\n  font-size: 0.7rem;\\n  color: silver;\\n  text-align: right;\\n}\\n\\n#formBottomDivider {\\n  margin-bottom: 1rem;\\n}\\n\\ntextarea.NewFreshScan {\\n  background-color: #8bffbb;\\n  color: #b6121c;\\n}\\n\\ntextarea.NewFreshScan.CountDown-4 {\\n  background-color: #9effc4;\\n  color: #98121c;\\n}\\n\\ntextarea.NewFreshScan.CountDown-3 {\\n  background-color: #aaffc9;\\n  color: #7a111a;\\n}\\n\\ntextarea.NewFreshScan.CountDown-2 {\\n  background-color: #bcffcf;\\n  color: #5c1018;\\n}\\n\\ntextarea.NewFreshScan.CountDown-2 {\\n  background-color: #ccffda;\\n  color: #3e1119;\\n}\\n\\ntextarea.NewFreshScan.CountDown-1 {\\n  background-color: #d6ffe1;\\n  color: #200f0f;\\n}\\n\\ninput.bg-danger {\\n  color: #ffffff;\\n  font-weight: bold;\\n}\\n\\ninput.bg-danger::-moz-placeholder {\\n  color: #ffffff;\\n  font-weight: bold;\\n}\\n\\ninput.bg-danger::placeholder {\\n  color: #ffffff;\\n  font-weight: bold;\\n}\\n\\n.input-group-text {\\n  min-width: 3.5rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxwYWdlc1xcaW52ZW50LWZvcm1cXGludmVudC1mb3JtLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9pbnZlbnQtZm9ybS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLGlCQUFBO0FDQ0Y7O0FERUE7RUFDRSxtQkFBQTtBQ0NGOztBREVBO0VBQ0UseUJBQUE7RUFDQSxjQUFBO0FDQ0Y7O0FEQ0E7RUFDRSx5QkFBQTtFQUNBLGNBQUE7QUNFRjs7QURDQTtFQUNFLHlCQUFBO0VBQ0EsY0FBQTtBQ0VGOztBRENBO0VBQ0UseUJBQUE7RUFDQSxjQUFBO0FDRUY7O0FEQ0E7RUFDRSx5QkFBQTtFQUNBLGNBQUE7QUNFRjs7QURDQTtFQUNFLHlCQUFBO0VBQ0EsY0FBQTtBQ0VGOztBREFBO0VBQ0UsY0FBQTtFQUNBLGlCQUFBO0FDR0Y7O0FEQUE7RUFDRSxjQUFBO0VBQ0EsaUJBQUE7QUNHRjs7QURMQTtFQUNFLGNBQUE7RUFDQSxpQkFBQTtBQ0dGOztBRERBO0VBQ0UsaUJBQUE7QUNJRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL2ludmVudC1mb3JtLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2ludmVudHVyVGl0ZWwge1xyXG4gIGZvbnQtc2l6ZTogMC43cmVtO1xyXG4gIGNvbG9yOiBzaWx2ZXI7XHJcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbn1cclxuXHJcbiNmb3JtQm90dG9tRGl2aWRlciB7XHJcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxufVxyXG5cclxudGV4dGFyZWEuTmV3RnJlc2hTY2FuIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjOGJmZmJiO1xyXG4gIGNvbG9yOiAjYjYxMjFjO1xyXG59XHJcbnRleHRhcmVhLk5ld0ZyZXNoU2Nhbi5Db3VudERvd24tNCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzllZmZjNDtcclxuICBjb2xvcjogIzk4MTIxYztcclxufVxyXG5cclxudGV4dGFyZWEuTmV3RnJlc2hTY2FuLkNvdW50RG93bi0zIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWFmZmM5O1xyXG4gIGNvbG9yOiAjN2ExMTFhO1xyXG59XHJcblxyXG50ZXh0YXJlYS5OZXdGcmVzaFNjYW4uQ291bnREb3duLTIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNiY2ZmY2Y7XHJcbiAgY29sb3I6ICM1YzEwMTg7XHJcbn1cclxuXHJcbnRleHRhcmVhLk5ld0ZyZXNoU2Nhbi5Db3VudERvd24tMiB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2NjZmZkYTtcclxuICBjb2xvcjogIzNlMTExOTtcclxufVxyXG5cclxudGV4dGFyZWEuTmV3RnJlc2hTY2FuLkNvdW50RG93bi0xIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDZmZmUxO1xyXG4gIGNvbG9yOiAjMjAwZjBmO1xyXG59XHJcbmlucHV0LmJnLWRhbmdlciB7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbmlucHV0LmJnLWRhbmdlcjo6cGxhY2Vob2xkZXIge1xyXG4gIGNvbG9yOiAjZmZmZmZmO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi5pbnB1dC1ncm91cC10ZXh0IHtcclxuICBtaW4td2lkdGg6IDMuNXJlbTtcclxufVxyXG4iLCIjaW52ZW50dXJUaXRlbCB7XG4gIGZvbnQtc2l6ZTogMC43cmVtO1xuICBjb2xvcjogc2lsdmVyO1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn1cblxuI2Zvcm1Cb3R0b21EaXZpZGVyIHtcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbn1cblxudGV4dGFyZWEuTmV3RnJlc2hTY2FuIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzhiZmZiYjtcbiAgY29sb3I6ICNiNjEyMWM7XG59XG5cbnRleHRhcmVhLk5ld0ZyZXNoU2Nhbi5Db3VudERvd24tNCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICM5ZWZmYzQ7XG4gIGNvbG9yOiAjOTgxMjFjO1xufVxuXG50ZXh0YXJlYS5OZXdGcmVzaFNjYW4uQ291bnREb3duLTMge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWFmZmM5O1xuICBjb2xvcjogIzdhMTExYTtcbn1cblxudGV4dGFyZWEuTmV3RnJlc2hTY2FuLkNvdW50RG93bi0yIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2JjZmZjZjtcbiAgY29sb3I6ICM1YzEwMTg7XG59XG5cbnRleHRhcmVhLk5ld0ZyZXNoU2Nhbi5Db3VudERvd24tMiB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNjY2ZmZGE7XG4gIGNvbG9yOiAjM2UxMTE5O1xufVxuXG50ZXh0YXJlYS5OZXdGcmVzaFNjYW4uQ291bnREb3duLTEge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDZmZmUxO1xuICBjb2xvcjogIzIwMGYwZjtcbn1cblxuaW5wdXQuYmctZGFuZ2VyIHtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG5pbnB1dC5iZy1kYW5nZXI6OnBsYWNlaG9sZGVyIHtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG4uaW5wdXQtZ3JvdXAtdGV4dCB7XG4gIG1pbi13aWR0aDogMy41cmVtO1xufSJdfQ== */\"","import {Component, ElementRef, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {Location} from '@angular/common';\r\nimport {DataService, InventarData} from '../../shared/services/data.service';\r\nimport {\r\n  BarcodeLookupSimpleResult,\r\n  DBDIArtikel,\r\n  DBDIGebaeude,\r\n  DBDIInventar,\r\n  DBDIInventuren,\r\n  DBDIJobLockStatus,\r\n  DBDIObjektKatalogImages,\r\n  DBDIMandanten,\r\n  DBDIRaeume,\r\n  DBDIRaumEditStatus,\r\n  DBDIRaumGebaeude,\r\n  IUnionLookupAssignedObject,\r\n  LookupResultTable,\r\n  LookupResultType\r\n} from '../../shared/interfaces/dexie.interfaces';\r\nimport {\r\n  faBarcode,\r\n  faBookReader,\r\n  faCamera,\r\n  faCheck,\r\n  faDoorClosed,\r\n  faDoorOpen,\r\n  faEdit,\r\n  faEye,\r\n  faImage,\r\n  faLock,\r\n  faPlus,\r\n  faSearch,\r\n  faUnlockAlt\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport {InventoryProgress, InventoryProgressService} from '../../shared/inventory-progress/inventory-progress.service';\r\n\r\nimport {ScanDetectData} from '../../shared/components/scannerdetection/scannerdetection.component';\r\n\r\nimport {\r\n  ArtikelFormType,\r\n  SelectCreateArtikelComponent\r\n} from './modals/select-create-artikel/select-create-artikel.component';\r\n\r\nimport {NgbModal, NgbModalRef} from '@ng-bootstrap/ng-bootstrap';\r\n// Dialogs\r\nimport {ScannerBarcodeData, ScannerComponent} from './modals/scanner/scanner.component';\r\nimport {CreateArtikelImageComponent} from './modals/create-artikel-image/create-artikel-image.component';\r\nimport {ShowArtikelImageComponent} from './modals/show-artikel-image/show-artikel-image.component';\r\nimport {\r\n  ArtikelOption,\r\n  SelectSearchArtikelComponent\r\n} from './modals/select-search-artikel/select-search-artikel.component';\r\nimport {SelectCreateRaumComponent} from './modals/select-create-raum/select-create-raum.component';\r\nimport {RaumListRestComponent} from './modals/raum-list-rest/raum-list-rest.component';\r\nimport {RaumListDoneComponent} from './modals/raum-list-done/raum-list-done.component';\r\nimport {SelectSearchRaumComponent} from './modals/select-search-raum/select-search-raum.component';\r\nimport {BasedataService} from '../../shared/services/basedata.service';\r\nimport {InventoryEditorService} from '../../shared/services/inventory-editor.service';\r\nimport {\r\n  InventarEditResult,\r\n  InventarFoundResult,\r\n  InventarInsertResult,\r\n  InventarService\r\n} from './data-services/inventar.service';\r\nimport {ImagesService} from './data-services/images.service';\r\nimport {BarcodeService} from './data-services/barcode.service';\r\nimport {RaumIDAndStatus, RaumImages, RaumService} from './data-services/raum.service';\r\nimport {GesamtListRestComponent} from './modals/gesamt-list-rest/gesamt-list-rest.component';\r\nimport {GesamtListDoneComponent} from './modals/gesamt-list-done/gesamt-list-done.component';\r\nimport {SoundsService} from '../../shared/services/sounds.service';\r\nimport {ToastrService} from 'ngx-toastr';\r\nimport {Subscription} from 'rxjs';\r\nimport {EditRaumComponent} from './modals/edit-raum/edit-raum.component';\r\nimport {VariablesService} from '../../shared/services/variables.service';\r\nimport {EditInventarComponent} from './modals/edit-inventar/edit-inventar.component';\r\nimport {DBInsertArtikelResult} from './data-services/artikel.service';\r\nimport {ImageboxComponent} from './modals/imagebox/imagebox.component';\r\nimport {ShowRaumImageComponent} from './modals/show-raum-image/show-raum-image.component';\r\nimport {CreateRaumImageComponent} from './modals/create-raum-image/create-raum-image.component';\r\nimport {BatchBarcodesComponent, LookupResultItem} from './modals/batch-barcodes/batch-barcodes.component';\r\n\r\ninterface ScannerConfiguration {\r\n  minLength?: number; // 7\r\n  maxLength?: number; //  14\r\n  scannerStartsWith?: string; // '' - characters to trim before the code\r\n  scannerEndsWith?: string; // '' - characters to trim after the code\r\n  scanTimeout?: number; // 100 - timeout for detection in ms\r\n  replaceNotNumber?: boolean; // true - allowes numbers only [0-9], replace everything else\r\n  allowNotNumber?: boolean; // false  - allowes numbers only [0-9], replace everything else\r\n  ignoreOverElement?: string[]; // ['INPUT'] - array of tag names that should disable emit\r\n  barcodeType?: string; // ean13 - gtin[d] or ean[\\]\r\n}\r\n\r\ninterface RaumProgressStatus {\r\n  hasTotal: boolean;\r\n  total: number;\r\n  numDone: number;\r\n}\r\n\r\ninterface FormInventar {\r\n  uuid?: string;\r\n  mcid?: number;\r\n  mcuuid?: string;\r\n  gcid?: number;\r\n  gcuuid?: string;\r\n  ruuid?: string;\r\n  Raum?: string;\r\n  Raumbezeichnung?: string;\r\n  RaumBarcode?: string;\r\n  Barcode?: string;\r\n  Bezeichnung?: string;\r\n  Typ?: string;\r\n}\r\n\r\ninterface CurrentModal {\r\n  modalRef?: NgbModalRef;\r\n  name: string;\r\n  isOpen: boolean;\r\n}\r\n\r\ninterface BCPartsObjektbuch {\r\n  src: string;\r\n  id: string;\r\n  mid: string;\r\n  hashStart: string;\r\n}\r\n\r\ninterface BCPartsObjektbuchRaum extends BCPartsObjektbuch {\r\n  gid: string;\r\n}\r\n\r\ninterface BCPartsObjektbuchArtikel extends BCPartsObjektbuch {\r\n  gcid: string;\r\n}\r\n\r\ninterface BCLookupResult {\r\n  barcode: string;\r\n  expectedType: LookupResultType;\r\n  bcParts?: BCPartsObjektbuchArtikel|BCPartsObjektbuchRaum;\r\n  result: IUnionLookupAssignedObject;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-invent-form',\r\n  templateUrl: './invent-form.component.html',\r\n  styleUrls: ['./invent-form.component.scss']\r\n})\r\nexport class InventFormComponent implements OnInit, OnDestroy {\r\n\r\n  faBarcode = faBarcode;\r\n  faSearch = faSearch;\r\n  faEye = faEye;\r\n  faCamera = faCamera;\r\n  faEdit = faEdit;\r\n  faImage = faImage;\r\n  faPlus = faPlus;\r\n  faCheck = faCheck;\r\n  faDoorOpen = faDoorOpen;\r\n  faDoorClosed = faDoorClosed;\r\n  faBookReader = faBookReader;\r\n  faLock = faLock;\r\n  faUnlockAlt = faUnlockAlt;\r\n\r\n  @ViewChild('input2', { static: true }) input2: ElementRef;\r\n  @ViewChild('inputSimulateBarcode', { static: true }) inputSimulateBarcode: ElementRef;\r\n  @ViewChild('rawInputBarcodes', { static: true }) rawInputBarcodes: ElementRef;\r\n\r\n  scanDetectorConfig: ScannerConfiguration = {\r\n    minLength: 5,\r\n    maxLength: 30,\r\n    scannerStartsWith: '',\r\n    scannerEndsWith: '', // {scannerEndsWith: 'Enter'}\r\n    scanTimeout: 100,\r\n    replaceNotNumber: false,\r\n    allowNotNumber: true,\r\n    ignoreOverElement: [ '.formcontrol-edit-barcode'],\r\n    barcodeType: ''\r\n  };\r\n\r\n  public formInventar: FormInventar = {\r\n    uuid: null,\r\n    mcid: null,\r\n    mcuuid: null,\r\n    gcid: null,\r\n    gcuuid: null,\r\n    ruuid: null,\r\n    Raum: null,\r\n    Raumbezeichnung: null,\r\n    RaumBarcode: null,\r\n    Barcode: '',\r\n    Bezeichnung: '',\r\n    Typ: '',\r\n  };\r\n\r\n  public jobid: number;\r\n  public inventur: DBDIInventuren;\r\n  public kunde?: DBDIMandanten;\r\n  public gebaeude?: DBDIGebaeude;\r\n  public raum?: DBDIRaeume;\r\n  public inventarData?: InventarData;\r\n\r\n  private clientID: number;\r\n  private buildingID: number;\r\n  private roomUuiD?: string;\r\n  private artikelUuiD?: string;\r\n  private routingSubscription: Subscription;\r\n  private raumStatusChangeSubscription: Subscription;\r\n  private inventarDataChangeSubscription: Subscription;\r\n  private inventurLockStatusChangeSubscription: Subscription;\r\n  private unsyncedAmountChangeSubscription: Subscription;\r\n\r\n  public lastScanDetectTime?: Date;\r\n  public lastScanDetectClass = '';\r\n  private lastScanDetectTimer = null;\r\n  waitingForNewInventarBarcode = false;\r\n  waitingForInventarData = false;\r\n  private openedCreateRaum = false;\r\n  artikelImageExists = false;\r\n  public allowNewInventarByGivenArticle = false;\r\n\r\n  jobProgress: InventoryProgress = {\r\n    total: 0,\r\n    done: 0,\r\n  };\r\n\r\n  numUnsynced = -1;\r\n\r\n  raumEditStatus: DBDIRaumEditStatus;\r\n  raumBilder: RaumImages[] = [];\r\n  raumPlaene: RaumImages[] = [];\r\n\r\n  jobLockStatus: DBDIJobLockStatus = DBDIJobLockStatus.Init;\r\n\r\n  raumProgress: InventoryProgress = {\r\n    total: 0,\r\n    done: 0,\r\n  };\r\n  beepSuccessSrc = '';\r\n  beepErrorSrc = '';\r\n\r\n  private currentModal: CurrentModal = {\r\n    modalRef: null,\r\n    isOpen: false,\r\n    name: ''\r\n  };\r\n\r\n  private currentModals: CurrentModal[] = [];\r\n\r\n  blobAlert?: string;\r\n  private blobAlertSuccess = 'success';\r\n  private blobAlertFailure = 'danger';\r\n  private blobAlertOff = null;\r\n  private blobAlertTimer = null;\r\n  private varChangeSubscription: Subscription = null;\r\n  manualBCInputEnabled: boolean;\r\n  useOverlay = 0;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private location: Location,\r\n    private dataService: DataService,\r\n    private modalService: NgbModal,\r\n    private baseData: BasedataService,\r\n    private inventoryProgress: InventoryProgressService,\r\n    private inventoryEditor: InventoryEditorService,\r\n    private inventarDataService: InventarService,\r\n    private raumService: RaumService,\r\n    private imageService: ImagesService,\r\n    private bcLookup: BarcodeService,\r\n    private sounds: SoundsService,\r\n    private variables: VariablesService,\r\n    private toastr: ToastrService) {\r\n    this.beepSuccessSrc = this.sounds.getSuccessSrc();\r\n    this.beepErrorSrc = this.sounds.getErrorSrc();\r\n  }\r\n\r\n  showBlobAlertSuccess() {\r\n    this.showBlobAlert('success');\r\n  }\r\n\r\n  showBlobAlertError() {\r\n    this.showBlobAlert('danger');\r\n  }\r\n\r\n  showBlobAlert(alertType: string) {\r\n    this.useOverlay = this.useOverlay < 2 ? this.useOverlay + 1 : 1;\r\n    this.blobAlert = null;\r\n    if (this.blobAlertTimer) {\r\n      clearTimeout( this.blobAlertTimer );\r\n    }\r\n    this.blobAlert = alertType;\r\n    this.blobAlertTimer = setTimeout(\r\n      () => {\r\n        this.blobAlert = null;\r\n        this.useOverlay = 0;\r\n      },\r\n      1200\r\n    );\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.inventoryProgress.getCurrentInventurLockStatus().then( (status) => {\r\n      this.jobLockStatus = status;\r\n    });\r\n\r\n    this.unsyncedAmountChangeSubscription = this.dataService.clientSyncAmountChanged\r\n      .subscribe( (amount) => {\r\n        this.numUnsynced = amount;\r\n    });\r\n\r\n    this.inventurLockStatusChangeSubscription = this.inventoryProgress.inventurLockStatusChanged\r\n      .subscribe((status) => {\r\n        this.jobLockStatus = status;\r\n    });\r\n\r\n    this.raumStatusChangeSubscription = this.raumService.raumStatusChanged\r\n      .subscribe( (stat: RaumIDAndStatus) => {\r\n      if (stat.uuid === this.roomUuiD) {\r\n        this.raumEditStatus = stat.status;\r\n      }\r\n    });\r\n\r\n    console.log('this.inventarDataService.changed', this.inventarDataService.changed);\r\n    this.inventarDataChangeSubscription = this.inventarDataService\r\n      .changed.subscribe( (change) => {\r\n        this.refreshRaumProgress();\r\n    });\r\n\r\n    this.routingSubscription = this.route.params.subscribe(params => {\r\n      this.clientID = parseInt( params.clientid,  10 );\r\n      this.buildingID = parseInt( params.buildingid, 10 );\r\n      const roomUUID = params.roomid;\r\n\r\n      this.dataService.getClient( this.clientID ).then( (clnt) => {\r\n        this.kunde = clnt;\r\n        this.baseData.setCurrentMandant( this.kunde );\r\n      });\r\n\r\n      this.dataService.getBuilding( this.buildingID, this.clientID ).then( (bldg) => {\r\n        this.gebaeude = bldg;\r\n      });\r\n\r\n      if (roomUUID) {\r\n        this.loadRaumById( roomUUID );\r\n      } else {\r\n        const lastSelectedRoom = this.baseData.getCurrentRaum();\r\n        if (lastSelectedRoom && lastSelectedRoom.gid === this.buildingID) {\r\n          this.loadRaumByData( lastSelectedRoom );\r\n        }\r\n      }\r\n      console.log({params, kunde: this.kunde, gebaeude: this.gebaeude });\r\n      this.refreshInventoryProgress();\r\n    });\r\n    this.jobid = this.baseData.getCurrentJobid();\r\n    this.inventur = this.baseData.getCurrentInventur();\r\n\r\n    this.variables.get('manualBarcodeInput', false).then( (status) => {\r\n      this.manualBCInputEnabled = status;\r\n    });\r\n\r\n    this.variables.watch('manualBarcodeInput');\r\n    this.varChangeSubscription = this.variables.varChanged.subscribe( (setting) => {\r\n      if (setting.name === 'manualBarcodeInput') {\r\n        this.manualBCInputEnabled = setting.newValue;\r\n      }\r\n    });\r\n  }\r\n\r\n  loadRaumById( roomUuid: string) {\r\n    this.dataService.getRaum( roomUuid )\r\n      .then( (raum: DBDIRaumGebaeude) => {\r\n        console.log('InventFormComponente #338 Retrieved Raum by roomUuid', {raum, roomUuid});\r\n        this.loadRaumByData(raum);\r\n      });\r\n  }\r\n\r\n  loadRaumByData(raum: DBDIRaeume) {\r\n    const url = '/form-inventory/' + this.clientID + '/' + this.buildingID + '/' + raum.uuid;\r\n    console.log('InventFormComponente #345 Change URL ', { raum, url });\r\n    this.location.go( url);\r\n    this.roomUuiD = raum.uuid;\r\n    this.raum = raum;\r\n    this.baseData.setCurrentRaum( this.raum );\r\n    this.formInventar.ruuid = raum.uuid;\r\n    this.formInventar.Raum = raum.Raum;\r\n    this.formInventar.Raumbezeichnung = raum.Raumbezeichnung;\r\n    this.formInventar.RaumBarcode = raum.code;\r\n    this.clearFormInventar();\r\n    this.raumEditStatus = this.raum.current_jobstatus;\r\n    this.raumBilder = [];\r\n    this.raumPlaene = [];\r\n    this.loadRaumImages();\r\n    this.refreshRaumProgress();\r\n  }\r\n\r\n  async loadRaumImages(): Promise<number> {\r\n    return Promise.all([\r\n      this.raumService.getRaumBilder(this.raum.uuid).then( (images) => {\r\n        console.log('InventFormComponent.raumService.getRaumBilder #376 images: ', images);\r\n        this.raumBilder = images;\r\n        return images.length;\r\n      }),\r\n      this.raumService.getRaumPlaene(this.raum.uuid).then( (images) => {\r\n        console.log('InventFormComponent.raumService.getRaumPlaene #376 images: ', images);\r\n        this.raumPlaene = images;\r\n        return images.length;\r\n      })\r\n    ]).then( results => results[0] + results[1]);\r\n  }\r\n\r\n  clearFormInventar() {\r\n    this.waitingForNewInventarBarcode = false;\r\n    this.waitingForInventarData = false;\r\n\r\n    this.inventarData = null;\r\n    this.artikelUuiD = null;\r\n\r\n    this.formInventar.uuid = '';\r\n    this.formInventar.mcid = 0;\r\n    this.formInventar.mcuuid = '';\r\n    this.formInventar.gcid = 0;\r\n    this.formInventar.gcuuid = '';\r\n    this.formInventar.Barcode = '';\r\n    this.formInventar.Bezeichnung = '';\r\n    this.formInventar.Typ = '';\r\n    this.artikelImageExists = false;\r\n  }\r\n\r\n  clearFormRaum() {\r\n    this.formInventar.ruuid = '';\r\n    this.formInventar.Raum = '';\r\n    this.formInventar.Raumbezeichnung = '';\r\n    this.formInventar.RaumBarcode = '';\r\n  }\r\n\r\n  async assignInventarToRaum(inventarData: InventarData) {\r\n    console.log('InventFormComponente #350 assignInventarToRaum(inventarData)', { inventarData });\r\n    this.loadInventarByData( inventarData );\r\n    this.inventarDataService.assignRaum(inventarData.inventar.uuid, this.roomUuiD)\r\n      .then( (rslt) => {\r\n        console.log('InventFormComponente #387 Inventar wurde dem Raum zugewiesen!', { rslt });\r\n      })\r\n      .catch( (err) => {\r\n        console.error('InventFormComponente #390 Inventar konnte nicht zugewiesen werden!', err);\r\n      });\r\n  }\r\n\r\n  async saveNewInventar(): Promise<InventarInsertResult> {\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const uid = this.baseData.getCurrentUid();\r\n    const inventar: DBDIInventar = {\r\n      mcid: this.formInventar.mcid,\r\n      mcuuid: this.formInventar.mcuuid,\r\n      ruuid: this.formInventar.ruuid,\r\n      code: this.formInventar.Barcode,\r\n      jobid,\r\n      created_at: new Date(),\r\n      created_uid: uid\r\n    };\r\n\r\n    const inserting = this.inventarDataService.insertInventar(inventar, jobid);\r\n\r\n    inserting.then( (result) => {\r\n      if (result.success) {\r\n        console.log('InventFormComponente #409 Inventar wurde hinzugefgt', result);\r\n        this.loadInventarByUuid(result.insertUUID);\r\n      } else {\r\n        console.error('InventFormComponent #424 Inventar konnte nicht hinzugefgt werden', { result });\r\n      }\r\n      })\r\n      .catch( (err) => {\r\n        console.error('InventFormComponente #413 Fehler beim Speichern neuer Inventar-Daten', { err });\r\n      });\r\n    return inserting;\r\n  }\r\n\r\n  async updateInventarArtikelRef(): Promise<InventarEditResult> {\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const uid = this.baseData.getCurrentUid();\r\n    const uuid = this.formInventar.uuid;\r\n    const inventar: DBDIInventar = {\r\n      mcid: this.formInventar.mcid,\r\n      mcuuid: this.formInventar.mcuuid,\r\n      ruuid: this.formInventar.ruuid,\r\n      code: this.formInventar.Barcode,\r\n      jobid,\r\n      modified_at: new Date(),\r\n      modified_uid: uid\r\n    };\r\n\r\n    return this.inventarDataService.updateArtikelRef(uuid, inventar, jobid);\r\n  }\r\n\r\n  async refreshInventoryProgress() {\r\n\r\n    return Promise.all([\r\n      this.refreshRaumProgress(),\r\n      this.refreshGebaeudeProgress()\r\n    ]).then( () =>  {\r\n      console.log('InventFormComponente #425 Fortschritt fr Gebaeude und Raum wurde aktualisiert');\r\n      return true;\r\n    }).catch( (err) => {\r\n      console.error('InventFormComponente #428Beim Aktualisieren des Fortschritts von Gebaeude und Raum ist ein Fehler aufgetreten');\r\n      return false;\r\n    });\r\n  }\r\n\r\n  async refreshGebaeudeProgress() {\r\n\r\n    this.inventoryProgress.getCurrentGebaeudeProgress().then( (progress: InventoryProgress) => {\r\n      this.jobProgress.done = progress.done;\r\n      this.jobProgress.total = progress.total;\r\n    });\r\n  }\r\n\r\n  async refreshRaumProgress() {\r\n\r\n    this.inventoryProgress.getCurrentRaumProgress(this.roomUuiD)\r\n      .then( (progress: InventoryProgress) => {\r\n        this.raumProgress.done = progress.done;\r\n        this.raumProgress.total = progress.total;\r\n      })\r\n      .catch( err => {\r\n        console.error( 'InventFormComponente #449 Fehler bei Raum-Progress-Aktualisierung', err );\r\n      });\r\n  }\r\n\r\n  loadArtikelByUuid(artikelUuid: string) {\r\n    this.dataService.getArtikel( artikelUuid )\r\n      .then( item => {\r\n        this.loadArtikelByData( item );\r\n      });\r\n  }\r\n\r\n  async loadArtikelByData(artikel: DBDIArtikel): Promise<boolean> {\r\n    this.artikelUuiD = artikel.uuid;\r\n    this.formInventar.mcid = artikel.mcid;\r\n    this.formInventar.mcuuid = artikel.mcuuid;\r\n    this.formInventar.gcid = artikel.gcid;\r\n    this.formInventar.gcuuid = artikel.uuid;\r\n    this.formInventar.Bezeichnung = artikel.Bezeichnung;\r\n    this.formInventar.Typ = artikel.Typ;\r\n\r\n    console.log('InventFormComponent #475 loadArtikelByData', {\r\n      artikel: {...artikel},\r\n      formInventar: {...this.formInventar},\r\n      waitingForInventarData: this.waitingForInventarData,\r\n      waitingForNewInventarBarcode: this.waitingForNewInventarBarcode\r\n    });\r\n\r\n    if (this.allowNewInventarByGivenArticle) {\r\n      if (!this.waitingForInventarData && this.formInventar.Barcode.length > 1) {\r\n        this.formInventar.Barcode = '';\r\n        console.log('InventFormComponent #479 set waitingForNewInventarBarcode = true');\r\n        this.waitingForNewInventarBarcode = true;\r\n      }\r\n    }\r\n\r\n    const tmp = {...this.formInventar};\r\n    this.formInventar = {...tmp};\r\n\r\n    if (!this.formInventar.uuid && this.waitingForInventarData) {\r\n      console.log('InventFormComponente #480 call this.saveNewInventar() from this.loadArtikelByData(...)');\r\n      const insertResult = await this.saveNewInventar();\r\n      if (insertResult && insertResult.success) {\r\n        this.waitingForInventarData = false;\r\n        this.toastr.success('Neues Inventar-Objekt wurde hinzugefgt!', 'Neuaufnahme gespeichert');\r\n      } else {\r\n        this.toastr.error('Neues Inventar-Objekt konnte nicht hinzugefgt werden!', 'Fehler bei Neuaufnahme');\r\n        return false;\r\n      }\r\n    }\r\n\r\n\r\n    if (this.formInventar.uuid) {\r\n      const bConfirmUpdate = confirm('Mchten Sie die Inventardaten wirklich ndern!\\n' +\r\n      'Dem Objekt wurden bereits Artikeldaten zugewiesen.\\n' +\r\n      'Drcken Sie [OK] zur Besttigung\\n' +\r\n      'oder auf [Abbrechen]!');\r\n      if (bConfirmUpdate) {\r\n        const updateResult = await this.updateInventarArtikelRef();\r\n        if (updateResult && updateResult.success) {\r\n          this.toastr.success('Inventar wurde mit neuen Artikeldaten gespeichert', 'Erfolgreiche Artikelzuweisung');\r\n        } else {\r\n          this.toastr.error('Inventar konnte nicht aktualisiert werden!', 'Fehler bei Artikelzuweisung');\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\n    console.log('InventFormComponente #487 loadArtikelByData', { waitingForNewInventarBarcode: this.waitingForNewInventarBarcode });\r\n    console.log('InventFormComponente #488Applied argument artikel', artikel, ' to formInventar', this.formInventar);\r\n    this.reloadImageExistsStatus();\r\n    return true;\r\n  }\r\n\r\n  loadInventarByUuid(uuid: string) {\r\n    this.dataService.getInventarData(uuid).then(result => {\r\n      console.log('InventFormComponente #494 loadInventarById(uuid)', { uuid });\r\n      this.loadInventarByData( result.inventarData );\r\n    });\r\n  }\r\n\r\n  loadInventarByData(inventarData: InventarData) {\r\n    const inventar = inventarData.inventar;\r\n    const artikelRef = inventarData.artikelRef;\r\n    const artikelData = inventarData.artikelData;\r\n    console.log('InventFormComponente #503 loadInventarByData(inventarData)', { inventarData });\r\n\r\n    this.inventarData = inventarData;\r\n    this.artikelUuiD = inventar.mcuuid;\r\n    this.formInventar.mcid = inventar.mcid;\r\n    this.formInventar.gcid = artikelRef ? artikelRef.gcid : 0;\r\n    this.formInventar.mcuuid = artikelRef.uuid;\r\n    this.formInventar.gcuuid = artikelData.uuid;\r\n    this.formInventar.Bezeichnung = artikelData.Bezeichnung;\r\n    this.formInventar.Typ = artikelData.Typ;\r\n    this.formInventar.Barcode = inventar.code;\r\n    this.formInventar.uuid = inventar.uuid;\r\n\r\n    this.reloadImageExistsStatus();\r\n  }\r\n\r\n  async reloadImageExistsStatus(): Promise<boolean> {\r\n    this.artikelImageExists = false;\r\n    if (!this.formInventar.gcuuid) {\r\n      return false;\r\n    }\r\n    return this.imageService.imageExistsOfGcuuid( this.formInventar.gcuuid )\r\n      .then( exists => {\r\n        this.artikelImageExists = exists;\r\n        return exists;\r\n      })\r\n      .catch( () => false);\r\n  }\r\n\r\n  async reloadRaumImageExistsStatus(): Promise<boolean> {\r\n    return this.loadRaumImages().then(numImgs => numImgs > 0);\r\n  }\r\n\r\n  async reloadRaumImages(): Promise<number> {\r\n    return this.raumService.getRaumBilder(this.raum.uuid).then( (images) => {\r\n      console.log('InventFormComponent.raumService.getRaumBilder #376 images: ', images);\r\n      this.raumBilder = images;\r\n      return images.length;\r\n    });\r\n  }\r\n\r\n\r\n  get kundeName(): string {\r\n    return this.kunde ? this.kunde.Mandant : '';\r\n  }\r\n\r\n  get adresse(): string {\r\n    return this.gebaeude ? this.gebaeude.Gebaeude : '';\r\n  }\r\n\r\n  get raumNr(): string {\r\n    return this.raum ? this.raum.Raum : '';\r\n  }\r\n\r\n  createKunstwerk() {\r\n    // YYYYMMDDHHMMSS\r\n    // Fantasy Barcode: 9{MID}{DEVID}\r\n    this.inventarDataService.getNewKunstBarcode().then( (kBarcode) => {\r\n      this.clearFormInventar();\r\n      this.formInventar.Barcode = kBarcode;\r\n      this.waitingForInventarData = true;\r\n      const modalCreateArtikel = this.openSelectCreateArtikel();\r\n      modalCreateArtikel.setFormType(ArtikelFormType.Kunst);\r\n    });\r\n  }\r\n\r\n  get gebaeudeId() { return this.buildingID; }\r\n\r\n  openRaumbild(idx: number) {\r\n    if (false) {\r\n      const imgUuids = this.raumBilder.map( (itm) => itm.uuid);\r\n      const modalRef = this.modalService.open(ShowRaumImageComponent, {size: 'xl'});\r\n      console.log('openRaumplan', { raumBilder: this.raumBilder, imgUuids, idx });\r\n      this.modalWatch(modalRef, 'ShowRaumImage');\r\n      modalRef.componentInstance.setTitel('Raumbilder');\r\n      modalRef.componentInstance.setImageUuid(imgUuids[idx]);\r\n    } else {\r\n      const imgUuids = this.raumBilder.map( (itm) => itm.uuid);\r\n      const modalRef = this.modalService.open(ImageboxComponent, {size: 'xl'});\r\n      console.log('openRaumplan', { raumBilder: this.raumBilder, imgUuids, idx });\r\n      this.modalWatch(modalRef, 'Imagebox');\r\n      modalRef.componentInstance.setTitel('Raumbilder');\r\n      modalRef.componentInstance.setImagesUuids(imgUuids, idx);\r\n      modalRef.result.finally( () => {\r\n        this.loadRaumImages();\r\n      });\r\n    }\r\n  }\r\n\r\n  openRaumplan(idx: number) {\r\n    if (false) {\r\n      const imgUuids = this.raumPlaene.map((itm) => itm.uuid);\r\n      const modalRef = this.modalService.open(ShowRaumImageComponent, {size: 'xl'});\r\n      console.log('openRaumplan', {raumPlaene: this.raumPlaene, imgUuids, idx});\r\n      this.modalWatch(modalRef, 'ShowRaumImage');\r\n      modalRef.componentInstance.setTitel('Raumplne');\r\n      modalRef.componentInstance.setImageUuid(imgUuids[idx]);\r\n    } else {\r\n      const imgUuids = this.raumPlaene.map( (itm) => itm.uuid);\r\n      const modalRef = this.modalService.open(ImageboxComponent, {size: 'xl'});\r\n      console.log('openRaumplan', { raumPlaene: this.raumPlaene, imgUuids, idx });\r\n      this.modalWatch(modalRef, 'Imagebox');\r\n      modalRef.componentInstance.setTitel('Raumplne');\r\n      modalRef.componentInstance.setImagesUuids(imgUuids, idx);\r\n    }\r\n  }\r\n\r\n  openCreateArtikelImage() {\r\n    const modalRef = this.modalService.open(CreateArtikelImageComponent, { size: 'xl' } );\r\n    this.modalWatch(modalRef, 'CreateArtikelImage');\r\n    modalRef.componentInstance.name = this.formInventar.Bezeichnung + '/' + this.formInventar.Typ;\r\n    modalRef.componentInstance.gcuuid = this.formInventar.gcuuid;\r\n    modalRef.componentInstance.setMetaData({\r\n      for_jobid: this.jobid,\r\n      mcuuid: this.formInventar.mcuuid,\r\n      gcuuid: this.formInventar.gcuuid,\r\n      name: this.formInventar.Bezeichnung + (this.formInventar.Typ ? '-' + this.formInventar.Typ : ''),\r\n      desc: this.formInventar.Bezeichnung + (this.formInventar.Typ ? ' / ' + this.formInventar.Typ : '')\r\n    });\r\n    modalRef.result.then( () => {\r\n      this.reloadImageExistsStatus();\r\n    });\r\n  }\r\n\r\n  openCreateRaumImage() {\r\n\r\n    const rb = this.formInventar.Raumbezeichnung;\r\n    const rm = this.formInventar.Raum;\r\n    let name = '';\r\n    if (rm) {\r\n      name = rm.split('/').join('.').split(' ').join('_');\r\n    } else {\r\n      name = rb.split('/').join('.').split(' ').join('_');\r\n    }\r\n    const modalRef = this.modalService.open(CreateRaumImageComponent, { size: 'xl' } );\r\n    this.modalWatch(modalRef, 'CreateRaumImage');\r\n    modalRef.componentInstance.name = this.formInventar.Bezeichnung + '/' + this.formInventar.Typ;\r\n    modalRef.componentInstance.gcuuid = this.formInventar.gcuuid;\r\n    modalRef.componentInstance.setMetaData({\r\n      for_jobid: this.jobid,\r\n      ruuid: this.formInventar.ruuid,\r\n      name,\r\n      desc: rb\r\n    });\r\n    modalRef.result.finally( () => {\r\n      this.reloadRaumImageExistsStatus();\r\n    });\r\n  }\r\n\r\n  openEditArtikelImage() {\r\n    const modalRef = this.modalService.open(CreateArtikelImageComponent, { size: 'xl' } );\r\n    this.modalWatch(modalRef, 'CreateArtikelImage');\r\n    modalRef.componentInstance.name = this.formInventar.Bezeichnung + '/' + this.formInventar.Typ;\r\n    modalRef.componentInstance.setMetaData({\r\n      mcuuid: this.formInventar.mcuuid,\r\n      gcuuid: this.formInventar.gcuuid,\r\n      for_jobid: this.jobid,\r\n      name: this.formInventar.Bezeichnung,\r\n      desc: this.formInventar.Bezeichnung\r\n    });\r\n    modalRef.result.then( () => {\r\n      this.reloadImageExistsStatus();\r\n    });\r\n  }\r\n\r\n  openShowArtikelImage() {\r\n    const modalRef = this.modalService.open(ShowArtikelImageComponent, { size: 'xl' } );\r\n    this.modalWatch(modalRef, 'ShowArtikelImage');\r\n    modalRef.componentInstance.name = 'World';\r\n    console.log('openShowArtikelImage #642 setMcuuid: ', this.formInventar.mcuuid);\r\n    modalRef.componentInstance.setMcuuid( this.formInventar.mcuuid, this.formInventar.gcuuid );\r\n    modalRef.result.then( () => {\r\n      this.reloadImageExistsStatus();\r\n    });\r\n  }\r\n\r\n  openScanner(inputElm?: HTMLElement) {\r\n    const modalRef = this.modalService.open(ScannerComponent, { size: 'xl' } );\r\n    this.modalWatch(modalRef, 'Scanner');\r\n    modalRef.componentInstance.name = 'World';\r\n    const sub = modalRef.componentInstance.onScan.subscribe((data: ScannerBarcodeData) => {\r\n      const scan: ScanDetectData = {\r\n        barcode: data.barcode,\r\n        length: data.length,\r\n        valid: data.valid,\r\n        target: inputElm\r\n      };\r\n      modalRef.close();\r\n      console.log('InventFormComponente #588 call handleScanData', { data, scan });\r\n      this.handleScanData( scan );\r\n    });\r\n    modalRef.result.then( () => {\r\n      sub.unsubscribe();\r\n    }).catch( () => {});\r\n  }\r\n\r\n  openBatchScans(barcodes: string[], inputElm?: HTMLElement): void {\r\n    console.log('InventFormComponent.openBatchScans(', barcodes, ') #778', { barcodes, inputElm });\r\n    const modalRef = this.modalService.open( BatchBarcodesComponent, { size: 'xl' } );\r\n    this.modalWatch(modalRef, 'BatchBarcodes');\r\n    if (!modalRef.componentInstance.jobid) {\r\n      modalRef.componentInstance.setJobid(this.jobid);\r\n    }\r\n    modalRef.componentInstance.setRaum(this.raum);\r\n    modalRef.componentInstance.setBarcodes(barcodes);\r\n    const sub = modalRef.componentInstance.onScan.subscribe((data: ScannerBarcodeData) => {\r\n      console.log('InventFormComponent.openBatchScans subscribe response #785', { data });\r\n      const scan: ScanDetectData = {\r\n        barcode: data.barcode,\r\n        length: data.length,\r\n        valid: data.valid,\r\n        target: inputElm\r\n      };\r\n      modalRef.close();\r\n      console.log('InventFormComponente #588 call handleScanData', { data, scan });\r\n      this.handleScanData( scan );\r\n    });\r\n    const sub2 = modalRef.componentInstance.onLookupResultApply.subscribe( (data: LookupResultItem) => {\r\n      let modalIsClosed = false;\r\n      if (data.ModalRaumUuid !== this.raum.uuid) {\r\n        modalRef.close();\r\n        modalIsClosed = true;\r\n        alert('Fehler: Raumangabe in Hauptfenster und Dialog stimmen nicht mehr berein!\\n' +\r\n          'ModalRaumUuid: ' + data.ModalRaumUuid + '\\n' +\r\n          'Main-Raum-UUID: ' + this.raum.uuid);\r\n        return;\r\n      }\r\n\r\n      if (modalRef.componentInstance.closeOnApplyBarcode) {\r\n        modalRef.close();\r\n        modalIsClosed = true;\r\n      }\r\n\r\n      if (data.result.lookupResultTable === LookupResultTable.Inventar) {\r\n\r\n        const inventarData: InventarData = {\r\n          inventar: data.result.inventar,\r\n          artikelRef: data.result.artikelRef,\r\n          artikelData: data.result.artikelData\r\n        };\r\n        this.assignInventarToRaum(inventarData)\r\n          .then( () => {\r\n            this.playSuccess();\r\n            if (!modalIsClosed && modalRef && modalRef.componentInstance) {\r\n              modalRef.componentInstance.showBlobAlertSuccess();\r\n              modalRef.componentInstance.setAssignedInventar(data.barcode);\r\n            }\r\n          })\r\n          .catch( (reason) => {\r\n            this.playError();\r\n            if (!modalIsClosed && modalRef && modalRef.componentInstance) {\r\n              modalRef.componentInstance.showBlobAlertError();\r\n            }\r\n          });\r\n      }\r\n    });\r\n\r\n\r\n    modalRef.result.then( () => {\r\n      sub.unsubscribe();\r\n      sub2.unsubscribe();\r\n    }, () => {});\r\n  }\r\n\r\n  getModalRefByName(name: string): NgbModalRef {\r\n    const modal = this.currentModals.find( mod => mod.name === name);\r\n    return (modal && modal.modalRef.componentInstance) ? modal.modalRef : null;\r\n  }\r\n\r\n  closeModalIfOpen(name: string): boolean {\r\n    const modal = this.currentModals.find( mod => mod.name === name);\r\n    if (modal && modal.modalRef.componentInstance) {\r\n      modal.modalRef.close();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  modalWatch(modalRef: NgbModalRef, name: string) {\r\n    const mRef = modalRef;\r\n    const mName = name;\r\n    console.log('InventFormComponente #610 Opened Modal: ', name);\r\n    const currModal = {\r\n      modalRef,\r\n      name,\r\n      isOpen: true\r\n    };\r\n    this.currentModal = currModal;\r\n    this.currentModals = this.currentModals.filter( mod => undefined !== mod.modalRef.componentInstance);\r\n    this.currentModals.push( currModal );\r\n    console.log('InventFormComponente #618 After open Modal: ', this.currentModal, this.currentModals);\r\n\r\n    modalRef.result.then( (result) => {\r\n      if (name === 'SelectCreateRaum') {\r\n        this.openedCreateRaum = false;\r\n      }\r\n      this.currentModals = this.currentModals.filter( mod => undefined !== mod.modalRef.componentInstance);\r\n\r\n      if (this.currentModals.length) {\r\n        this.currentModal = this.currentModals[ this.currentModals.length - 1];\r\n      } else {\r\n        this.currentModal = {\r\n          modalRef: null,\r\n          name: '',\r\n          isOpen: false\r\n        };\r\n      }\r\n    })\r\n      .catch( (err) => {\r\n        if (name === 'SelectCreateRaum') {\r\n          this.openedCreateRaum = false;\r\n        }\r\n        this.currentModals = this.currentModals.filter( mod => undefined !== mod.modalRef.componentInstance);\r\n        if (typeof err !== 'string' || err.indexOf('Cross click') === -1) {\r\n          console.error('InventFormComponente #902 Error on Closing Modal ', {mName, err});\r\n        }\r\n        if (this.currentModals.length) {\r\n          this.currentModal = this.currentModals[ this.currentModals.length - 1];\r\n        } else {\r\n          this.currentModal = {\r\n            modalRef: null,\r\n            name: '',\r\n            isOpen: false\r\n          };\r\n        }\r\n        console.log('InventFormComponente #652 After Catch: ', this.currentModal, this.currentModals);\r\n      });\r\n  }\r\n\r\n  openSelectCreateArtikel(settings: any = null): SelectCreateArtikelComponent {\r\n    const modalRef = this.modalService.open(SelectCreateArtikelComponent, { size: 'xl'}); // , scrollable: true } );\r\n    this.modalWatch(modalRef, 'SelectCreateArtikel');\r\n    modalRef.componentInstance.name = 'World';\r\n    modalRef.componentInstance.clientId = this.clientID;\r\n    modalRef.componentInstance.artikelCreated.subscribe( (artikel: DBInsertArtikelResult) => {\r\n      this.loadArtikelByData( artikel.newItem );\r\n    });\r\n    modalRef.componentInstance.artikelSelected.subscribe((item: ArtikelOption) => {\r\n      console.log('InventFormComponente #665 openSelectCreateArtikel Apply selected Article', item);\r\n      this.loadArtikelByUuid(item.uuid);\r\n    });\r\n    modalRef.componentInstance.artikelSearching.subscribe( (raum: number) => {\r\n      this.openSelectSearchArtikel();\r\n    });\r\n\r\n    return modalRef.componentInstance;\r\n  }\r\n\r\n  openSelectSearchArtikel() {\r\n    const modalRef = this.modalService.open(SelectSearchArtikelComponent, { size: 'xl' } );\r\n    this.modalWatch(modalRef, 'SelectSearchArtikel');\r\n    modalRef.componentInstance.clientId = this.clientID;\r\n    modalRef.componentInstance.artikelSelected.subscribe((item: ArtikelOption) => {\r\n      console.log('InventFormComponente #678 Apply selected Article', item);\r\n      this.loadArtikelByUuid(item.uuid);\r\n    });\r\n    modalRef.componentInstance.artikelCreating.subscribe((mid: number) => {\r\n      modalRef.close();\r\n      this.openSelectCreateArtikel();\r\n    });\r\n  }\r\n\r\n  openSelectSearchRaum() {\r\n    const modalRef = this.modalService.open(SelectSearchRaumComponent, { size: 'xl' } );\r\n    this.modalWatch(modalRef, 'SelectSearchRaum');\r\n    modalRef.componentInstance.gebaeudeId = this.buildingID;\r\n    modalRef.componentInstance.raumSelected.subscribe( (raum: DBDIRaeume) => {\r\n      this.loadRaumByData(raum);\r\n    });\r\n    modalRef.componentInstance.raumCreating.subscribe( (gid: number) => {\r\n      modalRef.close();\r\n      this.openSelectCreateRaum();\r\n    });\r\n  }\r\n\r\n  openEditRaum() {\r\n    const modalRef = this.modalService.open(EditRaumComponent, { size: 'xl' } );\r\n    this.modalWatch(modalRef, 'EditRaum');\r\n    modalRef.componentInstance.raumUuid = this.roomUuiD;\r\n    modalRef.componentInstance.raumChanged.subscribe( (raum: DBDIRaeume) => {\r\n      this.loadRaumByData(raum);\r\n    });\r\n    modalRef.componentInstance.scannerRequest.subscribe( (target: HTMLElement) => {\r\n      this.openScanner(target);\r\n    });\r\n  }\r\n\r\n  openEditInventar() {\r\n    const modalRef = this.modalService.open(EditInventarComponent, { size: 'xl' } );\r\n    this.modalWatch(modalRef, 'EditInventar');\r\n    console.log('InventFormComponente #715 this.inventarData ' + this.inventarData.inventar.uuid);\r\n    modalRef.componentInstance.inventarUuid = this.inventarData.inventar.uuid;\r\n    modalRef.componentInstance.inventarChanged.subscribe( (inventar: InventarFoundResult) => {\r\n      console.log('InventFormComponente #718 Aktualisierte Inventar-Daten', { inventar });\r\n      this.toastr.success('Inventardaten wurden aktualisiert!');\r\n      this.loadInventarByUuid(inventar.inventar.uuid);\r\n    });\r\n    modalRef.componentInstance.scannerRequest.subscribe( (target: HTMLElement) => {\r\n      this.openScanner(target);\r\n    });\r\n  }\r\n\r\n  openSelectCreateRaum() {\r\n    const modalRef = this.modalService.open(SelectCreateRaumComponent, { size: 'xl' } );\r\n    this.modalWatch(modalRef, 'SelectCreateRaum');\r\n    this.openedCreateRaum = true;\r\n    modalRef.componentInstance.gebaeudeId = this.buildingID;\r\n    modalRef.componentInstance.raumCreated.subscribe( (raum: DBDIRaeume) => {\r\n      this.loadRaumByData(raum);\r\n    });\r\n    modalRef.componentInstance.raumSearching.subscribe( () => {\r\n      this.openSelectSearchRaum();\r\n    });\r\n    modalRef.componentInstance.scannerRequest.subscribe( (target: HTMLElement) => {\r\n      this.openScanner(target);\r\n    });\r\n  }\r\n\r\n  openGesamtListDone(useGebaeude?: DBDIGebaeude) {\r\n    const gebaeude = useGebaeude || this.gebaeude;\r\n    const modalRef = this.modalService.open( GesamtListDoneComponent, { size: 'xl', scrollable: true } );\r\n    this.modalWatch(modalRef, 'GesamtListDone');\r\n    modalRef.componentInstance.gebaeude = gebaeude;\r\n    modalRef.componentInstance.raumSelected.subscribe( (ruuid: string) => {\r\n      this.loadRaumById(ruuid);\r\n    });\r\n    modalRef.componentInstance.requestGesamtRest.subscribe( (g: DBDIGebaeude) => {\r\n      this.openGesamtListRest(g);\r\n    });\r\n  }\r\n\r\n  openGesamtListRest(useGebaeude?: DBDIGebaeude) {\r\n    const gebaeude = useGebaeude || this.gebaeude;\r\n    if (!gebaeude || !gebaeude.gid) {\r\n      console.error('InventFormComponente #759 No Gebaeude-Data!!!');\r\n    } else {\r\n      console.log('InventFormComponente #761 OpenGesamtListRest', {\r\n        buildingID: this.buildingID,\r\n        gebaeude: this.gebaeude\r\n      });\r\n    }\r\n    const modalRef = this.modalService.open( GesamtListRestComponent, { size: 'xl', scrollable: true } );\r\n    this.modalWatch(modalRef, 'GesamtListRest');\r\n    modalRef.componentInstance.gebaeude = gebaeude;\r\n    modalRef.componentInstance.raumSelected.subscribe( (ruuid: string) => {\r\n      this.loadRaumById(ruuid);\r\n    });\r\n    modalRef.componentInstance.requestGesamtDone.subscribe( (g: DBDIGebaeude) => {\r\n      this.openGesamtListDone(g);\r\n    });\r\n  }\r\n\r\n  openRaumListDone(useRaum?: DBDIRaeume) {\r\n    const raum = useRaum || this.raum;\r\n    const modalRef = this.modalService.open( RaumListDoneComponent, { size: 'xl', scrollable: true } );\r\n    this.modalWatch(modalRef, 'RaumListDone');\r\n    modalRef.componentInstance.raum = raum;\r\n    modalRef.componentInstance.requestRestList.subscribe( (r: DBDIRaeume) => {\r\n      this.openRaumListRest(r);\r\n    });\r\n  }\r\n\r\n  openRaumListRest(useRaum?: DBDIRaeume) {\r\n    const raum = useRaum || this.raum;\r\n    const modalRef = this.modalService.open( RaumListRestComponent, { size: 'xl', scrollable: true } );\r\n    this.modalWatch(modalRef, 'RaumListRest');\r\n    modalRef.componentInstance.raum = raum;\r\n    modalRef.componentInstance.requestDoneList.subscribe( (r: DBDIRaeume) => {\r\n      this.openRaumListDone(r);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.routingSubscription.unsubscribe();\r\n    this.raumStatusChangeSubscription.unsubscribe();\r\n    this.inventarDataChangeSubscription.unsubscribe();\r\n    this.inventurLockStatusChangeSubscription.unsubscribe();\r\n  }\r\n\r\n  toggleRaumEditStatus() {\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    if (this.raumEditStatus !== DBDIRaumEditStatus.Closed) {\r\n      this.raumService.setRaumStatusClosed(this.roomUuiD, jobid);\r\n    } else {\r\n      this.raumService.setRaumStatusStarted(this.roomUuiD, jobid);\r\n    }\r\n  }\r\n\r\n  setJobLockStatusClosed() {\r\n    this.inventoryProgress.setCurrentInventurLockStatusClosed();\r\n  }\r\n\r\n  setJobLockStatusOpened() {\r\n    this.inventoryProgress.setCurrentInventurLockStatusOpened();\r\n  }\r\n\r\n  setRaumEditStatusClosed() {\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    this.raumService.setRaumStatusClosed(this.roomUuiD, jobid);\r\n  }\r\n\r\n  setRaumEditStatusStarted() {\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    this.raumService.setRaumStatusStarted(this.roomUuiD, jobid);\r\n  }\r\n\r\n  setRaumEditStatusUntouched() {\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    this.raumService.setRaumStatusInit(this.roomUuiD, jobid);\r\n  }\r\n\r\n  onRaumBarcodeInput(event: Event): void {\r\n    if (event.target instanceof HTMLInputElement || 'value' in event.target ) {\r\n      console.log('InventFormComponente #838 BarCodeInput :', event.target.value );\r\n    }\r\n  }\r\n\r\n  showGesamtDone(): void {\r\n    console.log('InventFormComponente #843 Called show Gesamt Done');\r\n    this.openGesamtListDone();\r\n  }\r\n\r\n  showGesamtRest(): void {\r\n    console.log('InventFormComponente #848 Called show Gesamt Rest');\r\n    this.openGesamtListRest();\r\n  }\r\n\r\n  showRaumDone(): void {\r\n    console.log('InventFormComponente #853 Called show Raum Done ...');\r\n    this.openRaumListDone();\r\n  }\r\n\r\n  showRaumRest(): void {\r\n    console.log('InventFormComponente #858 Called show Raum Rest');\r\n    this.openRaumListRest();\r\n  }\r\n\r\n  bcTrimZero(barcode: string) {\r\n    barcode = barcode.trim();\r\n    while (barcode.charAt(0) === '0') {\r\n      barcode = barcode.substr(1).trim();\r\n    }\r\n    return barcode;\r\n  }\r\n\r\n  onBarcodeInput(): void {}\r\n\r\n  async handleScanData(event: ScanDetectData) {\r\n    const enableBatchInput = false;\r\n    event.barcode = this.bcTrimZero(event.barcode);\r\n\r\n    if (this.kunde.mid === 5 && event.barcode.length > 10) {\r\n      if (!event.barcode.startsWith('A') && !event.barcode.startsWith('R')) {\r\n        event.barcode = event.barcode.substr(0, 10);\r\n      }\r\n    }\r\n\r\n    if (this.rawInputBarcodes && this.rawInputBarcodes.nativeElement && 'value' in this.rawInputBarcodes.nativeElement) {\r\n      this.rawInputBarcodes.nativeElement.value = '';\r\n      if (('rawInput' in event) && event.rawInput) {\r\n        this.rawInputBarcodes.nativeElement.value = event.rawInput;\r\n        if (('debugData' in event) && event.debugData && event.debugData.keyDownEvents) {\r\n          this.rawInputBarcodes.nativeElement.value += '\\n\\nkeyDownEvents:\\n' + JSON.stringify(event.debugData.keyDownEvents);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (event.barcode.indexOf('\\n') > -1) {\r\n      const numBatchCodes = event.barcode.split('\\n').length;\r\n      let batchError = '';\r\n      if (!this.raum) {\r\n        batchError = 'Whlen Sie erst einen Raum aus!';\r\n      } else if (this.waitingForNewInventarBarcode) {\r\n        batchError = 'Aktueller Vorgang erwartet einzelnen neuen Inventar-Barcode!';\r\n      } else if (this.waitingForInventarData) {\r\n        batchError = 'Aktueller Vorgang erwartet einzelne Artikelzuweisung!';\r\n      }\r\n      if (batchError) {\r\n        alert(batchError + '\\n' +\r\n          'Es wurden ' + numBatchCodes + ' Barcodes im Batchmodus bermittelt!'\r\n        );\r\n        return;\r\n      }\r\n      const barcodes = event.barcode.split('\\n').map( (c) => {\r\n        let bc = this.bcTrimZero( c.trim() );\r\n        if (this.kunde.mid === 5 && bc.length > 10 && !bc.startsWith('A') && !bc.startsWith('R')) {\r\n          bc = bc.substr(0, 10);\r\n        }\r\n        return bc;\r\n      });\r\n      if (enableBatchInput) {\r\n        return this.openBatchScans(barcodes, event.target);\r\n      }\r\n      alert('Auslesen mehrerer Barcodes pro Scan ist deaktiviert.\\nBarcodes mssen einzeln gescannt werden!');\r\n      return;\r\n    }\r\n\r\n    console.log('InventFormComponente #865 handleScanData', { waitingForNewInventarBarcode: this.waitingForNewInventarBarcode, event });\r\n    const bcResult = await this.bcLookup.fullLookup(event.barcode, this.jobid);\r\n    console.log('InventFormComponente #867 handleScanData', { bcResult });\r\n    const barcode = event.barcode;\r\n\r\n    this.displayScannedBarcode(event.barcode);\r\n\r\n    const RaumCreateModal = this.getModalRefByName('SelectCreateRaum');\r\n    const RaumEditModal = this.getModalRefByName('EditRaum');\r\n    const InventarEditModal = this.getModalRefByName('EditInventar');\r\n\r\n    if (RaumCreateModal && RaumCreateModal.componentInstance) {\r\n      if (bcResult.lookupResultTable === LookupResultTable.None) {\r\n        const modalComp: SelectCreateRaumComponent = RaumCreateModal.componentInstance;\r\n        // alert('transfer Code to Input SelectCreateRaumComponentraumDaten.code!');\r\n        modalComp.raumDaten.code = bcResult.barcode;\r\n        this.playSuccess();\r\n        return true;\r\n      } else {\r\n        this.playError();\r\n        this.toastr.error(\r\n          'Gebe einen glten Barcode ein oder schliee den Dialog \"Neuen Raum anlegen\"!' +\r\n          '<br>' + barcode,\r\n          'Ungltiger Barcode fr Raum-Neu-Erfassung:'\r\n        );\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (RaumEditModal && RaumEditModal.componentInstance) {\r\n      if (bcResult.lookupResultTable === LookupResultTable.None) {\r\n        const modalComp: EditRaumComponent = RaumEditModal.componentInstance;\r\n        // alert('transfer Code to Input EditRaumComponent.raumInput.code!');\r\n        if (confirm('Achtung! Mchtest du wirklich den Raumbarcode bearbeiten?')) {\r\n          modalComp.raumInput.code = bcResult.barcode;\r\n          this.playSuccess();\r\n        }\r\n        return true;\r\n      } else {\r\n        this.playError();\r\n        this.toastr.error(\r\n          'Gebe einen glten Barcode ein oder schliee den Dialog \"Raum aktualisieren\"!' +\r\n          '<br>' + barcode + ' [' + LookupResultTable[bcResult.lookupResultTable] + ']',\r\n          'Ungltiger Barcode fr Raum-Aktualisierung'\r\n        );\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (InventarEditModal && InventarEditModal.componentInstance) {\r\n      if (bcResult.lookupResultTable === LookupResultTable.None) {\r\n        const modalComp: EditInventarComponent = InventarEditModal.componentInstance;\r\n        // alert('transfer Code to Input EditRaumComponent.raumInput.code!');\r\n        modalComp.inventarInput.code = bcResult.barcode;\r\n        this.playSuccess();\r\n        return true;\r\n      } else {\r\n        this.playError();\r\n        this.toastr.error(\r\n          'Gebe einen glten Barcode ein oder schliee den Dialog \"Barcode aktualisieren\"!' +\r\n          '<br>' + barcode,\r\n          'Ungltiger Barcode fr Inventar-Aktualisierung'\r\n        );\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (this.waitingForNewInventarBarcode) {\r\n      console.log('InventFormComponente #949 handleScanData');\r\n      if (bcResult.lookupResultTable === LookupResultTable.None) {\r\n        this.formInventar.Barcode = bcResult.barcode;\r\n        console.log('InventFormComponente #952 handleScanData');\r\n        console.log('InventFormComponente #953 call this.saveNewInventar() from this.handleScanData');\r\n        this.waitingForNewInventarBarcode = false;\r\n        const insertResult = await this.saveNewInventar();\r\n        if (insertResult && insertResult.success) {\r\n          this.playSuccess();\r\n        } else {\r\n          this.playError();\r\n        }\r\n        return true;\r\n      } else {\r\n        this.playError();\r\n        console.log('InventFormComponente #960 handleScanData');\r\n        if (confirm('Barcode ist bereits vergeben!\\n' +\r\n          'Drcken Sie [Abbrechen], um die Neuaufnahme abzubrechen!\\n' +\r\n          'Drcken Sie [OK], wenn Sie einen neuen Barcode vergeben wollen.')) {\r\n          return;\r\n        } else {\r\n          this.waitingForNewInventarBarcode = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    console.log('InventFormComponente #972 handleScanData');\r\n    if (this.waitingForInventarData) {\r\n      if (bcResult.lookupResultTable !== LookupResultTable.ObjektKatalogMandant) {\r\n        this.playError();\r\n        if (confirm('Fehler: Erwarte Artikel-Barcode!\\n' +\r\n          'Drcken Sie [Abbrechen], um die Neuaufnahme abzubrechen!\\n' +\r\n          'Drcken Sie [OK], wenn Sie einen Artikel zuweisen mchten.')) {\r\n          return;\r\n        } else {\r\n          this.waitingForInventarData = false;\r\n          console.log('InventFormComponente #1034 handleScanData', { waitingForNewInventarBarcode: this.waitingForNewInventarBarcode });\r\n        }\r\n      } else {\r\n        console.log('InventFormComponente #986 Found Artikel-Barcode', { bcResult });\r\n        console.log('InventFormComponente #987 Continue ...');\r\n      }\r\n    }\r\n\r\n    switch (bcResult.lookupResultTable) {\r\n      case LookupResultTable.None:\r\n        console.log('InventFormComponente #990 handleScanData LookupResultTable.None');\r\n        if (!bcResult.barcode.match(/^(\\d{10}|L\\d{9,10})$/) ) {\r\n          console.log('InventFormComponent.handleScanData() #1163', { bcResult });\r\n          if (!confirm(\r\n            'Der Barcode besteht nicht wie erwartet aus 10 Zahlen!\\n' +\r\n            'Mchten Sie ihn dennoch fr die Neuaufnahme verwenden?')) {\r\n            return;\r\n          }\r\n        }\r\n        this.clearFormInventar();\r\n        this.formInventar.Barcode = bcResult.barcode;\r\n        this.waitingForInventarData = true;\r\n\r\n        this.playSuccess().then( () => {\r\n          // this.openSelectSearchArtikel();\r\n        });\r\n\r\n        // ToDo: Reaktion auf neuen Barcode ndern in Neufnahme\r\n        // User soll daraufhin einen Artikel zuweisen knnen\r\n        this.toastr.warning(\r\n          'Barcode: ' + barcode + '<br>' +\r\n          'Fr eine Neuaufnahme weisen sie bitte einen Artikel zu!<br>\\n' +\r\n          '<i>Oder nutzen Sie unter Einstellungen die Funktion reIndexBarcodeLookup, ' +\r\n          'falls neu aufgenommene Elemente nicht erkannt werden.</i>',\r\n          'Unbekannter Barcode'\r\n        );\r\n        break;\r\n\r\n      case LookupResultTable.Raeume:\r\n        console.log('InventFormComponente #1008 handleScanData LookupResultTable.Raeume');\r\n        if (bcResult.raum.gid === this.buildingID) {\r\n          this.loadRaumByData( bcResult.raum );\r\n          this.playSuccess();\r\n          return;\r\n        } else {\r\n          const geb = bcResult.gebaeude;\r\n          const gebName = geb ? (geb.Gebaeude || geb.Adresse) : ' Unbekannte Standort-ID ' + bcResult.raum.gid;\r\n          this.playError();\r\n          this.toastr.error(\r\n            'Der gescannte Raum-Barcode ist einem anderen Standort zugewiesen: ' + gebName,\r\n            'Fehler: Raum kann nicht geladen werden!'\r\n          );\r\n          if (0) {\r\n            alert('Fehler: Raum kann nicht geladen werden\\n' +\r\n              'Der gescannte Raum-Barcode ist einem anderen Standort zugewiesen:\\n' +\r\n              gebName\r\n            );\r\n          }\r\n        }\r\n        break;\r\n\r\n      case LookupResultTable.Inventar:\r\n        console.log('InventFormComponente #1031 handleScanData LookupResultTable.Inventar');\r\n        this.modalService.dismissAll();\r\n        this.assignInventarToRaum( {\r\n          inventar: bcResult.inventar,\r\n          artikelRef: bcResult.artikelRef,\r\n          artikelData: bcResult.artikelData\r\n        } );\r\n        this.playSuccess();\r\n        break;\r\n\r\n      case LookupResultTable.ObjektKatalogMandant:\r\n        console.log('InventFormComponente #1095 handleScanData LookupResultTable.Mandant', { bcResult });\r\n        if (!this.formInventar.Barcode) {\r\n          this.playError();\r\n          this.toastr.error(\r\n            'Bitte scanne erst einen neuen InventarBarcode fr die Artikelzuweisung',\r\n            'Fehler bei Barcodezuweisung');\r\n        }\r\n        if (!this.waitingForInventarData && this.formInventar.uuid) {\r\n          this.playError();\r\n          this.toastr.warning(\r\n            'Sie versuchen gerade bereits zugewiesene Inventar-Daten zu ndern',\r\n            'Warnung');\r\n        }\r\n        this.loadArtikelByData({\r\n          ...bcResult.artikelRef,\r\n          ...{mcuuid: bcResult.artikelRef.uuid },\r\n          ...bcResult.artikelData\r\n        }).then( (success) => {\r\n          if (success) {\r\n            this.playSuccess();\r\n          } else {\r\n            this.playError();\r\n          }\r\n        });\r\n        break;\r\n\r\n      default:\r\n        this.playError();\r\n        this.toastr.error('Ungltiger oder nicht richtig erkannter Barcode!');\r\n    }\r\n  }\r\n\r\n  displayScannedBarcode(barcode: string) {\r\n    this.input2.nativeElement.value = barcode;\r\n    this.lastScanDetectTime = new Date();\r\n    this.lastScanDetectClass = 'NewFreshScan CountDown-5';\r\n    let countdown = 5;\r\n    if (this.lastScanDetectTimer) {\r\n      clearInterval(this.lastScanDetectTimer);\r\n      this.lastScanDetectTimer = null;\r\n    }\r\n    this.lastScanDetectTimer = setInterval( () => {\r\n      this.lastScanDetectClass = 'NewFreshScan CountDown-' + (--countdown);\r\n      if (countdown < 1) {\r\n        this.lastScanDetectClass = '';\r\n        clearInterval(this.lastScanDetectTimer);\r\n        this.lastScanDetectTimer = null;\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  // dummy\r\n  simulateScanner() {\r\n\r\n    if (!this.inputSimulateBarcode\r\n      || !this.inputSimulateBarcode.nativeElement\r\n      || !this.inputSimulateBarcode.nativeElement.value\r\n      || !(typeof this.inputSimulateBarcode.nativeElement.value === 'string')\r\n    ) {\r\n      return;\r\n    }\r\n    const input = this.inputSimulateBarcode.nativeElement.value;\r\n    const s = input.replace('\\r\\n', '\\n').replace('\\r', '\\n');\r\n    for (const character of s) {\r\n      let key = character;\r\n      let shiftKey = false;\r\n\r\n      if (character === '\\t') {\r\n        key = 'Tab';\r\n\r\n      } else if (character === '\\n') {\r\n        key = 'Enter';\r\n\r\n      } else if (character !== character.toLowerCase() && character === character.toUpperCase()) {\r\n        shiftKey = true;\r\n        const shiftEvent = new KeyboardEvent('keydown', {bubbles : true, cancelable : true,\r\n          key : 'Shift', code: 'ShiftLeft', shiftKey });\r\n        document.dispatchEvent( shiftEvent );\r\n      }\r\n      const e = new KeyboardEvent('keydown', {bubbles : true, cancelable : true, key : character, shiftKey });\r\n      setTimeout(() => document.dispatchEvent(e));\r\n    }\r\n    const xe = new KeyboardEvent('keydown', {bubbles : true, cancelable : true, key : 'Enter', shiftKey : false});\r\n    setTimeout(() => document.dispatchEvent(xe));\r\n  }\r\n\r\n  async playSuccess() {\r\n    this.showBlobAlertSuccess();\r\n    this.sounds.playSuccess();\r\n  }\r\n\r\n  async playError(): Promise<void> {\r\n    this.showBlobAlertError();\r\n    this.sounds.playError();\r\n  }\r\n\r\n}\r\n","export default \"input.bg-danger::-moz-placeholder {\\n  color: #ffffff;\\n}\\n\\ninput.bg-danger::placeholder {\\n  color: #ffffff;\\n}\\n\\n.with-pulse-effect {\\n  -webkit-animation: enter-animation 2s ease;\\n          animation: enter-animation 2s ease;\\n}\\n\\n@-webkit-keyframes enter-animation {\\n  0% {\\n    box-shadow: 0px 0px 0px 0px #2382dc;\\n    color: black;\\n  }\\n  100% {\\n    box-shadow: 0px 0px 5px 25px rgba(35, 130, 220, 0);\\n    color: blue;\\n  }\\n}\\n\\n@keyframes enter-animation {\\n  0% {\\n    box-shadow: 0px 0px 0px 0px #2382dc;\\n    color: black;\\n  }\\n  100% {\\n    box-shadow: 0px 0px 5px 25px rgba(35, 130, 220, 0);\\n    color: blue;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2JhdGNoLWJhcmNvZGVzL0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxccGFnZXNcXGludmVudC1mb3JtXFxtb2RhbHNcXGJhdGNoLWJhcmNvZGVzXFxiYXRjaC1iYXJjb2Rlcy5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2JhdGNoLWJhcmNvZGVzL2JhdGNoLWJhcmNvZGVzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQ0UsY0FBQTtBQ0FGOztBRERBO0VBQ0UsY0FBQTtBQ0FGOztBREdBO0VBQ0UsMENBQUE7VUFBQSxrQ0FBQTtBQ0FGOztBREdBO0VBQ0U7SUFDRSxtQ0FBQTtJQUNBLFlBQUE7RUNBRjtFREVBO0lBQ0Usa0RBQUE7SUFDQSxXQUFBO0VDQUY7QUFDRjs7QURSQTtFQUNFO0lBQ0UsbUNBQUE7SUFDQSxZQUFBO0VDQUY7RURFQTtJQUNFLGtEQUFBO0lBQ0EsV0FBQTtFQ0FGO0FBQ0YiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvYmF0Y2gtYmFyY29kZXMvYmF0Y2gtYmFyY29kZXMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuaW5wdXQuYmctZGFuZ2VyOjpwbGFjZWhvbGRlciB7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbn1cclxuXHJcbi53aXRoLXB1bHNlLWVmZmVjdCB7XHJcbiAgYW5pbWF0aW9uOiBlbnRlci1hbmltYXRpb24gMnMgZWFzZTtcclxufVxyXG5cclxuQGtleWZyYW1lcyBlbnRlci1hbmltYXRpb24ge1xyXG4gIDAlIHtcclxuICAgIGJveC1zaGFkb3c6IDBweCAwcHggMHB4IDBweCByZ2JhKDM1LCAxMzAsIDIyMCwxKTtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICB9XHJcbiAgMTAwJSB7XHJcbiAgICBib3gtc2hhZG93OiAwcHggMHB4IDVweCAyNXB4IHJnYmEoMzUsIDEzMCwgMjIwLDApO1xyXG4gICAgY29sb3I6IGJsdWU7XHJcbiAgfVxyXG59XHJcbiIsImlucHV0LmJnLWRhbmdlcjo6cGxhY2Vob2xkZXIge1xuICBjb2xvcjogI2ZmZmZmZjtcbn1cblxuLndpdGgtcHVsc2UtZWZmZWN0IHtcbiAgYW5pbWF0aW9uOiBlbnRlci1hbmltYXRpb24gMnMgZWFzZTtcbn1cblxuQGtleWZyYW1lcyBlbnRlci1hbmltYXRpb24ge1xuICAwJSB7XG4gICAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggMHB4ICMyMzgyZGM7XG4gICAgY29sb3I6IGJsYWNrO1xuICB9XG4gIDEwMCUge1xuICAgIGJveC1zaGFkb3c6IDBweCAwcHggNXB4IDI1cHggcmdiYSgzNSwgMTMwLCAyMjAsIDApO1xuICAgIGNvbG9yOiBibHVlO1xuICB9XG59Il19 */\"","import {Component, ElementRef, EventEmitter, OnDestroy, OnInit, VERSION, ViewChild} from '@angular/core';\r\nimport {NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport BarcodeFormat from '@zxing/library/esm/core/BarcodeFormat';\r\nimport {BehaviorSubject, Subscription} from 'rxjs';\r\nimport {DataService} from '../../../../shared/services/data.service';\r\nimport {BarcodeService} from '../../data-services/barcode.service';\r\nimport {\r\n  BarcodeLookupSimpleResult,\r\n  DBDIImages,\r\n  DBDIRaeume,\r\n  LookupResultTable\r\n} from '../../../../shared/interfaces/dexie.interfaces';\r\nimport {faTrashAlt, faCheck} from '@fortawesome/free-solid-svg-icons';\r\nimport {ImagesService} from '../../data-services/images.service';\r\nimport {ZXingScannerComponent} from '@zxing/ngx-scanner';\r\nimport {BasedataService} from '../../../../shared/services/basedata.service';\r\nimport {VariablesService} from '../../../../shared/services/variables.service';\r\nimport {\r\n  InventoryProgress,\r\n  InventoryProgressService\r\n} from \"../../../../shared/inventory-progress/inventory-progress.service\";\r\nimport {InventarService} from \"../../data-services/inventar.service\";\r\n\r\nexport interface ScannerBarcodeData {\r\n  barcode?: string;\r\n  length?: number;\r\n  valid?: boolean;\r\n  result?: BarcodeLookupSimpleResult;\r\n}\r\nexport enum bcLookupTyp {\r\n  Neu,\r\n  Unbekannt,\r\n  Raum,\r\n  Artikel,\r\n  Inventar\r\n}\r\n\r\nexport interface LookupResultItem {\r\n  barcode: string;\r\n  typ?: bcLookupTyp;\r\n  typToString?: string;\r\n  infos?: string;\r\n  image?: DBDIImages;\r\n  result?: BarcodeLookupSimpleResult;\r\n  ModalRaumUuid?: string;\r\n  ModalJobid?: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-batch-barcodes',\r\n  templateUrl: './batch-barcodes.component.html',\r\n  styleUrls: ['./batch-barcodes.component.scss']\r\n})\r\nexport class BatchBarcodesComponent implements OnInit, OnDestroy {\r\n  faCheck = faCheck;\r\n  faRemove = faTrashAlt;\r\n\r\n  typeofLookupInventar = bcLookupTyp[bcLookupTyp.Inventar];\r\n  typeofLookupRaum = bcLookupTyp[bcLookupTyp.Raum];\r\n  typeofLookupArtikel = bcLookupTyp[bcLookupTyp.Artikel];\r\n  typeofLookupNeu = bcLookupTyp[bcLookupTyp.Neu];\r\n\r\n  onScan = new EventEmitter<ScannerBarcodeData>();\r\n  onLookupResultApply = new EventEmitter<LookupResultItem>();\r\n\r\n  jobid = 0;\r\n  raum: DBDIRaeume;\r\n\r\n  batchBarcodes: string[] = [];\r\n  uniqBatchBarcodes: string[] = [];\r\n  scanResultHistory: LookupResultItem[] = [];\r\n  scanResultAssigned: LookupResultItem[] = [];\r\n\r\n  blobAlert?: string;\r\n  private blobAlertTimer = null;\r\n  useOverlay = 0;\r\n\r\n  loadingTimer = null;\r\n  loadingShow = false;\r\n  loadingType = 'warning';\r\n  loadingAnimated = true;\r\n  loadingPercent = 0;\r\n  loadingCurrent = 0;\r\n  loadingTotal = 0;\r\n\r\n  closeOnApplyBarcode = false;\r\n\r\n  raumProgress: InventoryProgress = {\r\n    total: 0,\r\n    done: 0,\r\n  };\r\n\r\n  subRaumChanged: Subscription;\r\n\r\n  constructor(\r\n    public activeModal: NgbActiveModal,\r\n    private dataService: DataService,\r\n    private bcLookup: BarcodeService,\r\n    private imageService: ImagesService,\r\n    private baseData: BasedataService,\r\n    private variables: VariablesService,\r\n    private inventoryProgress: InventoryProgressService,\r\n    private inventarDataService: InventarService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.jobid = this.baseData.getCurrentJobid();\r\n    this.raum = this.baseData.getCurrentRaum();\r\n    this.refreshRaumProgress();\r\n\r\n    this.subRaumChanged = this.inventoryProgress.raumProgressChanged.subscribe(progress => {\r\n      if (this.raum && this.raum.uuid !== progress.uuid) {\r\n        return;\r\n      }\r\n      this.raumProgress.done = progress.done;\r\n      this.raumProgress.total = progress.total;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subRaumChanged.unsubscribe();\r\n  }\r\n  showBlobAlertSuccess() {\r\n    this.showBlobAlert('success');\r\n  }\r\n\r\n  showBlobAlertError() {\r\n    this.showBlobAlert('danger');\r\n  }\r\n\r\n  showBlobAlert(alertType: string) {\r\n    this.useOverlay = this.useOverlay < 2 ? this.useOverlay + 1 : 1;\r\n    this.blobAlert = null;\r\n    if (this.blobAlertTimer) {\r\n      clearTimeout( this.blobAlertTimer );\r\n    }\r\n    this.blobAlert = alertType;\r\n    this.blobAlertTimer = setTimeout(\r\n      () => {\r\n        this.blobAlert = null;\r\n        this.useOverlay = 0;\r\n      },\r\n      1200\r\n    );\r\n  }\r\n\r\n  setAssignedInventar(barcode: string) {\r\n    const result = this.scanResultHistory.find( (r) =>  r.barcode === barcode);\r\n    if (result) {\r\n      this.removeResult(result);\r\n      this.scanResultAssigned.unshift(result);\r\n    }\r\n  }\r\n\r\n  async setLoadingIndicator(current: number, total: number): Promise<void> {\r\n    this.loadingShow = true;\r\n    if (current === 0 || current > this.loadingCurrent) {\r\n      this.loadingPercent = (current > 0) ? current * 100 / total : 100;\r\n      this.loadingCurrent = current;\r\n      this.loadingType = (current > 0) ? 'success' : 'warning';\r\n      this.loadingAnimated = current !== total;\r\n      if (current === 0 && total > 0 && this.loadingTimer) {\r\n        clearTimeout(this.loadingTimer);\r\n        this.loadingTimer = null;\r\n      }\r\n      if (current > 0 && current === total) {\r\n        this.loadingTimer = setTimeout(() => { this.loadingShow = false; }, 4000);\r\n      }\r\n    }\r\n    this.loadingTotal = total;\r\n  }\r\n\r\n  setRaum(raum: DBDIRaeume): void {\r\n    this.raum = raum;\r\n  }\r\n\r\n  setJobid(jobid: number): void {\r\n    this.jobid = jobid;\r\n  }\r\n\r\n  setBarcodes(barcodes: string[]) {\r\n    // setBarcodes wird aus InventFormComponent aufgerufen, noch bevor ngOnInit ausgefuehrt wurde\r\n\r\n    const uniqBarcodes: string[] = [];\r\n    for (let i = 0; i < barcodes.length; i++) {\r\n      const bc = barcodes[i].trim();\r\n      if (bc !== '' && uniqBarcodes.indexOf(bc) === -1) {\r\n        uniqBarcodes.push(bc);\r\n      }\r\n    }\r\n    this.batchBarcodes = barcodes;\r\n    this.uniqBatchBarcodes = uniqBarcodes;\r\n\r\n    const total = uniqBarcodes.length;\r\n    let current = 0;\r\n    this.setLoadingIndicator(current, total);\r\n\r\n    console.log('BatchBarcodesComponent.setBarcodes(', barcodes, ') #106');\r\n    this.clearResult();\r\n    Promise.all(uniqBarcodes.map( async (code) => {\r\n      const rslt = await this.bcLookup.fullLookup(code, this.jobid);\r\n      ++current;\r\n      this.setLoadingIndicator(current, total);\r\n      return rslt;\r\n    })).then( (lkUpResults) => {\r\n      lkUpResults.reverse().forEach((rslt) => {\r\n        this.showResult(rslt);\r\n      });\r\n    }).catch(() => {\r\n      console.error('BatchBarcodesComponent.setBarcodes #121: Fehler bei Index-Barcode-Anfrage fuer', { barcodes });\r\n      alert('BatchBarcodesComponent.setBarcodes #121\\nFehler bei Index-Barcode-Anfrage.');\r\n    });\r\n  }\r\n\r\n  clearResult(): void {\r\n    this.scanResultHistory.length = 0;\r\n  }\r\n\r\n  showResult(result: BarcodeLookupSimpleResult): void {\r\n    let bezeichnung = '';\r\n    let bcObjectType: bcLookupTyp = bcLookupTyp.Unbekannt;\r\n    let bcObjectInfos = '';\r\n\r\n    switch (result.lookupResultTable) {\r\n      case LookupResultTable.None:\r\n        bezeichnung = 'Neuer Barcode';\r\n        bcObjectType = bcLookupTyp.Neu;\r\n        bcObjectInfos = this.bcInfoToString({\r\n          Gefunden: 'Neuer oder unbekannter Barcode'\r\n        });\r\n        break;\r\n\r\n      case LookupResultTable.Raeume:\r\n        const g = (result.gebaeude.Gebaeude || result.gebaeude.Adresse);\r\n        if (g) {\r\n          bezeichnung += `${g} :: `;\r\n        }\r\n        bezeichnung += result.raum.Raum;\r\n        if (result.raum.Raumbezeichnung) {\r\n          bezeichnung += ' / ' + result.raum.Raumbezeichnung;\r\n        }\r\n        if (result.raum.Etage) {\r\n          bezeichnung += ' :: ' + result.raum.Etage;\r\n        }\r\n        bezeichnung = (result.gebaeude.Gebaeude || result.gebaeude.Adresse);\r\n        bcObjectType = bcLookupTyp.Raum;\r\n        bcObjectInfos = bezeichnung;\r\n\r\n        if (false) {\r\n          this.bcInfoToString({\r\n            Gefunden: 'Raum',\r\n            Gebaeude: result.gebaeude.Gebaeude || result.gebaeude.Adresse,\r\n            Raum: result.raum.Raum,\r\n            Bezg: result.raum.Raumbezeichnung,\r\n            Etage: result.raum.Etage\r\n          });\r\n        }\r\n        break;\r\n\r\n      case LookupResultTable.Inventar:\r\n        if (result.artikelData.Typ) {\r\n          bezeichnung = result.artikelData.Typ + ' :: ';\r\n        }\r\n        bezeichnung += result.artikelData.Bezeichnung;\r\n        if (result.artikelData.Farbe) {\r\n          bezeichnung += ' :: ' + result.artikelData.Farbe;\r\n        }\r\n        if (result.artikelData.Groesse) {\r\n          bezeichnung += ' :: ' + result.artikelData.Groesse;\r\n        }\r\n        if (result.artikelData.Kategorie) {\r\n          bezeichnung += ' :: ' + result.artikelData.Kategorie;\r\n        }\r\n        if (result.artikelData.Gruppe) {\r\n          bezeichnung += ' :: ' + result.artikelData.Gruppe;\r\n        }\r\n        bcObjectType = bcLookupTyp.Inventar;\r\n        bcObjectInfos = bezeichnung;\r\n\r\n        if (false) {\r\n          this.bcInfoToString({\r\n            Gefunden: 'Inventar',\r\n            InventarNr: result.inventar.iv_nr,\r\n            Bezeichnung: result.artikelData.Bezeichnung,\r\n            Typ: result.artikelData.Typ,\r\n            Farbe: result.artikelData.Farbe,\r\n            Groesse: result.artikelData.Groesse,\r\n            Kategorie: result.artikelData.Kategorie,\r\n            Gruppe: result.artikelData.Gruppe\r\n          });\r\n        }\r\n        break;\r\n\r\n      case LookupResultTable.ObjektKatalogMandant:\r\n        bezeichnung = result.artikelData.Bezeichnung;\r\n        if (result.artikelData.Farbe) {\r\n          bezeichnung += ' :: ' + result.artikelData.Farbe;\r\n        }\r\n        if (result.artikelData.Groesse) {\r\n          bezeichnung += ' :: ' + result.artikelData.Groesse;\r\n        }\r\n        if (result.artikelData.Kategorie) {\r\n          bezeichnung += ' :: ' + result.artikelData.Kategorie;\r\n        }\r\n\r\n        bcObjectType = bcLookupTyp.Artikel;\r\n        bcObjectInfos = bezeichnung;\r\n\r\n        if (false) {\r\n          this.bcInfoToString({\r\n            Gefunden: 'Artikel',\r\n            Bezeichnung: result.artikelData.Bezeichnung,\r\n            Typ: result.artikelData.Typ,\r\n            Farbe: result.artikelData.Farbe,\r\n            Groesse: result.artikelData.Groesse,\r\n            Kategorie: result.artikelData.Kategorie\r\n          });\r\n        }\r\n        break;\r\n\r\n      default:\r\n        bezeichnung = 'Unerwartetes Ergebnis';\r\n        bcObjectType = bcLookupTyp.Unbekannt;\r\n        bcObjectInfos = bezeichnung;\r\n        this.bcInfoToString({\r\n          Gefunden: 'Unerwartetes Ergebnis',\r\n          Objekt: LookupResultTable[result.lookupResultTable]\r\n        });\r\n    }\r\n\r\n    const lastResult = {\r\n      typ: bcObjectType,\r\n      typToString: bcLookupTyp[ bcObjectType ],\r\n      barcode: result.barcode,\r\n      infos: bcObjectInfos,\r\n      image: result.image,\r\n      result\r\n    };\r\n    this.addHistoryResult(lastResult);\r\n\r\n    if (result.image && result.image.mcuuid) {\r\n      this.loadImageByMcuuid(result.image.mcuuid).then(img => {\r\n        const lastResultFound = this.scanResultHistory.find( r => r === lastResult);\r\n        if (lastResultFound) {\r\n          lastResultFound.image.data_url = img.data_url;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  addHistoryResult(result: LookupResultItem): number {\r\n    if (result) {\r\n      this.scanResultHistory.unshift(result);\r\n      while (this.scanResultHistory.length > 10) {\r\n        this.scanResultHistory.pop();\r\n      }\r\n    }\r\n    return this.scanResultHistory.length;\r\n  }\r\n\r\n  removeResult(result: any): void {\r\n    this.scanResultHistory = this.scanResultHistory.filter( r => r !== result);\r\n    console.log('remove Result', { result });\r\n    // alert(JSON.stringify(result));\r\n  }\r\n\r\n  applyResult(result: LookupResultItem): void {\r\n    console.log('BatchBarcodesComponent.applyHistoryResult(result: ', result, ') #335');\r\n    const emitScanResult = {\r\n      barcode: result.result.barcode,\r\n      length: result.result.barcode.length,\r\n      valid: true,\r\n      result\r\n    } as ScannerBarcodeData;\r\n    console.log('BatchBarcodesComponent.applyHistoryResult(result: \\', result, \\') #335apply applyHistoryResult', { emitScanResult });\r\n    result.ModalRaumUuid = this.raum.uuid;\r\n    result.ModalJobid = this.jobid;\r\n    this.onLookupResultApply.emit(result);\r\n    // this.onScan.emit( emitScanResult );\r\n  }\r\n\r\n  clearHistory(): void {\r\n    this.scanResultHistory = [];\r\n  }\r\n\r\n  bcInfoToString(json: any): string {\r\n    return JSON.stringify( json ).substr(1).split('').slice(0, -1).join('');\r\n    let tbl = '<table>';\r\n    for (const k of Object.keys(json)) {\r\n      tbl += '<tr><th>' + k + '</th><td>' + json[k] + '</td>';\r\n    }\r\n    tbl += '</table>';\r\n    return tbl;\r\n  }\r\n\r\n  async loadImageByMcuuid(mcuuid: string): Promise<DBDIImages|null> {\r\n    console.log('called loadImageByGcuuid', mcuuid);\r\n    if (mcuuid) {\r\n      return this.imageService.getImageByMcuuid(mcuuid)\r\n        .then( image => {\r\n          return image;\r\n        })\r\n        .catch( err => {\r\n          console.error( err );\r\n          return null;\r\n        });\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  async refreshRaumProgress() {\r\n\r\n    this.inventoryProgress.getCurrentRaumProgress(this.raum.uuid)\r\n      .then( (progress: InventoryProgress) => {\r\n        this.raumProgress.done = progress.done;\r\n        this.raumProgress.total = progress.total;\r\n      })\r\n      .catch( err => {\r\n        console.error( 'InventFormComponente #449 Fehler bei Raum-Progress-Aktualisierung', err );\r\n      });\r\n  }\r\n\r\n  showRaumDone() {}\r\n  showRaumRest() {}\r\n\r\n}\r\n\r\n","export default \".modal-header.modal-header-with-links {\\n  display: flex;\\n  flex-direction: row-reverse;\\n}\\n\\n.editor {\\n  height: 60%;\\n  position: relative;\\n}\\n\\n.canvas {\\n  height: 100%;\\n}\\n\\n.canvas {\\n  align-items: center;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.toolbar-cropend,\\n.toolbar {\\n  bottom: 1rem;\\n  color: #fff;\\n  height: 2rem;\\n  left: 50%;\\n  margin-left: -8rem;\\n  position: absolute;\\n  width: 16rem;\\n  z-index: 2015;\\n}\\n\\n.toolbar {\\n  background-color: rgba(0, 0, 0, 0.4);\\n}\\n\\n.toolbar button {\\n  background: transparent;\\n  color: #fff;\\n  border: 0;\\n}\\n\\n.toolbar-cropend {\\n  top: 1rem;\\n  width: 5rem;\\n  margin-left: -2.5rem;\\n  z-index: 2016;\\n  background-color: transparent;\\n}\\n\\n.btn-icon-cirular {\\n  width: 2rem;\\n  height: 2rem;\\n  border-radius: 1rem;\\n}\\n\\n.btn-icon-cirular + .btn-icon-cirular {\\n  margin-left: 1rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2NyZWF0ZS1hcnRpa2VsLWltYWdlL0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxccGFnZXNcXGludmVudC1mb3JtXFxtb2RhbHNcXGNyZWF0ZS1hcnRpa2VsLWltYWdlXFxjcmVhdGUtYXJ0aWtlbC1pbWFnZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2NyZWF0ZS1hcnRpa2VsLWltYWdlL2NyZWF0ZS1hcnRpa2VsLWltYWdlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLDJCQUFBO0FDQ0Y7O0FERUE7RUFDRSxXQUFBO0VBQ0Esa0JBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7QUNDRjs7QURFQTtFQUdFLG1CQUFBO0VBR0EsYUFBQTtFQUdBLHVCQUFBO0FDQ0Y7O0FERUE7O0VBRUUsWUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsU0FBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtBQ0NGOztBRENBO0VBQ0Usb0NBQUE7QUNFRjs7QURBQTtFQUNFLHVCQUFBO0VBQ0EsV0FBQTtFQUNBLFNBQUE7QUNHRjs7QURBQTtFQUNFLFNBQUE7RUFDQSxXQUFBO0VBQ0Esb0JBQUE7RUFDQSxhQUFBO0VBQ0EsNkJBQUE7QUNHRjs7QURBQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7QUNHRjs7QUREQTtFQUNFLGlCQUFBO0FDSUYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvY3JlYXRlLWFydGlrZWwtaW1hZ2UvY3JlYXRlLWFydGlrZWwtaW1hZ2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcclxufVxyXG5cclxuLmVkaXRvciB7XHJcbiAgaGVpZ2h0OiA2MCU7XHJcbiAgcG9zaXRpb246cmVsYXRpdmU7XHJcbn1cclxuXHJcbi5jYW52YXMge1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLmNhbnZhcyB7XHJcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcclxuICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XHJcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XHJcbiAgLW1zLWZsZXgtcGFjazogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4udG9vbGJhci1jcm9wZW5kLFxyXG4udG9vbGJhciB7XHJcbiAgYm90dG9tOiAxcmVtO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGhlaWdodDogMnJlbTtcclxuICBsZWZ0OiA1MCU7XHJcbiAgbWFyZ2luLWxlZnQ6IC04cmVtO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogMTZyZW07XHJcbiAgei1pbmRleDogMjAxNTtcclxufVxyXG4udG9vbGJhciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuNCk7XHJcbn1cclxuLnRvb2xiYXIgYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICBjb2xvcjojZmZmO1xyXG4gIGJvcmRlcjowO1xyXG59XHJcblxyXG4udG9vbGJhci1jcm9wZW5kIHtcclxuICB0b3A6IDFyZW07XHJcbiAgd2lkdGg6IDVyZW07XHJcbiAgbWFyZ2luLWxlZnQ6IC0yLjVyZW07XHJcbiAgei1pbmRleDogMjAxNjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxufVxyXG5cclxuLmJ0bi1pY29uLWNpcnVsYXIge1xyXG4gIHdpZHRoOjJyZW07XHJcbiAgaGVpZ2h0OjJyZW07XHJcbiAgYm9yZGVyLXJhZGl1czoxcmVtO1xyXG59XHJcbi5idG4taWNvbi1jaXJ1bGFyICsgLmJ0bi1pY29uLWNpcnVsYXIge1xyXG4gIG1hcmdpbi1sZWZ0OiAxcmVtO1xyXG59XHJcbiIsIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG59XG5cbi5lZGl0b3Ige1xuICBoZWlnaHQ6IDYwJTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uY2FudmFzIHtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uY2FudmFzIHtcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcbiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xuICBkaXNwbGF5OiBmbGV4O1xuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XG4gIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi50b29sYmFyLWNyb3BlbmQsXG4udG9vbGJhciB7XG4gIGJvdHRvbTogMXJlbTtcbiAgY29sb3I6ICNmZmY7XG4gIGhlaWdodDogMnJlbTtcbiAgbGVmdDogNTAlO1xuICBtYXJnaW4tbGVmdDogLThyZW07XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDE2cmVtO1xuICB6LWluZGV4OiAyMDE1O1xufVxuXG4udG9vbGJhciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTtcbn1cblxuLnRvb2xiYXIgYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjZmZmO1xuICBib3JkZXI6IDA7XG59XG5cbi50b29sYmFyLWNyb3BlbmQge1xuICB0b3A6IDFyZW07XG4gIHdpZHRoOiA1cmVtO1xuICBtYXJnaW4tbGVmdDogLTIuNXJlbTtcbiAgei1pbmRleDogMjAxNjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbi5idG4taWNvbi1jaXJ1bGFyIHtcbiAgd2lkdGg6IDJyZW07XG4gIGhlaWdodDogMnJlbTtcbiAgYm9yZGVyLXJhZGl1czogMXJlbTtcbn1cblxuLmJ0bi1pY29uLWNpcnVsYXIgKyAuYnRuLWljb24tY2lydWxhciB7XG4gIG1hcmdpbi1sZWZ0OiAxcmVtO1xufSJdfQ== */\"","import {Component, ElementRef, Input, OnInit, ViewChild} from '@angular/core';\r\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { CropperComponent } from 'angular-cropperjs';\r\nimport {ImagesService} from '../../data-services/images.service';\r\n\r\nimport {\r\n  faCropAlt,\r\n  faSearchPlus, faSearchMinus,\r\n  faUndo, faRedo, faTrashAlt, faTrashRestore, faTrashRestoreAlt,\r\n  faCheck, faBan, faSave, faCamera,\r\n  faArrowsAlt, faArrowsAltH, faArrowsAltV,\r\n  faDownload, faUpload, faSignOutAlt\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport {DBDIImages} from '../../../../shared/interfaces/dexie.interfaces';\r\n\r\nexport interface ArtikelImageMetaData {\r\n  name?: string;\r\n  gcuuid?: string;\r\n  mcuuid?: string;\r\n  for_jobid?: number;\r\n  desc?: string;\r\n}\r\n\r\nconst infoLogWorkaround = (...args: any[]): void => {\r\n  args.unshift('[INFO]');\r\n  console.log.apply(console, args);\r\n};\r\n\r\nconst infoLog = (...args: any[]) => {\r\n  const cons: any = console;\r\n  const consInfo = cons.info || infoLogWorkaround;\r\n  consInfo( args );\r\n};\r\n\r\n@Component({\r\n  selector: 'app-create-artikel-image',\r\n  templateUrl: './create-artikel-image.component.html',\r\n  styleUrls: ['./create-artikel-image.component.scss']\r\n})\r\nexport class CreateArtikelImageComponent implements OnInit {\r\n\r\n  // Get with @ViewChild\r\n  @ViewChild('angularCropper', { static: false })\r\n  public angularCropper: CropperComponent;\r\n\r\n  @ViewChild('prepareImgCanvas', { static: true })\r\n  public prepareImgCanvas: ElementRef;\r\n\r\n  @ViewChild('inputUploadFile', { static: true })\r\n  public inputUploadFile: ElementRef;\r\n\r\n  @ViewChild('inputUploadImage', { static: true })\r\n  public inputUploadImage: ElementRef;\r\n\r\n  // Editor-Button-Icons\r\n  faCamera = faCamera;\r\n  faCrop = faCropAlt;\r\n  faMove = faArrowsAlt;\r\n  faSearchPlus = faSearchPlus;\r\n  faSearchMinus = faSearchMinus;\r\n  faRotateLeft = faUndo;\r\n  faRotateRight = faRedo;\r\n  faCheck = faCheck;\r\n  faBan = faBan;\r\n  faSave = faSave;\r\n  faUpload = faUpload;\r\n  faTrash = faTrashAlt;\r\n  faTrashRestore = faTrashRestore;\r\n  faTrashRestoreAlt = faTrashRestoreAlt;\r\n\r\n  imgMetaData: ArtikelImageMetaData;\r\n\r\n  allowDelete = false;\r\n  inputFile?: File = null;\r\n  inputImgData = null;\r\n  inputImgType = '';\r\n  inputImgSize = 0;\r\n  inputImgWidth = 0;\r\n  inputImgHeight = 0;\r\n  inputImgSavedData = null;\r\n  previewImgUrl = null;\r\n\r\n  config: any = {\r\n    // aspectRatio : 16 / 9,\r\n    autoCrop: false,\r\n    dragMode : 'crop',\r\n    background : true,\r\n    movable: true,\r\n    rotatable : true,\r\n    scalable: true,\r\n    zoomable: true,\r\n    restore: true,\r\n    viewMode: 0,\r\n    checkImageOrigin : true,\r\n    // crop: this.onCrop.bind(this),\r\n    cropmove: this.cropMove.bind(this),\r\n    cropstart: this.cropStart.bind(this),\r\n    cropend: this.cropEnd.bind(this),\r\n    zoom: this.zoomed.bind(this),\r\n    ready: this.onCropperReady.bind(this),\r\n    checkCrossOrigin: true,\r\n    wheelZoomRatio: 0.1,\r\n    toggleDragModeOnDblclick: true\r\n  };\r\n  cropStatus = 0;\r\n  cropApplied = false;\r\n  dragMode = 'move';\r\n  canMove = false;\r\n\r\n  imageUrl?: string;\r\n\r\n  constructor(public activeModal: NgbActiveModal, private imageService: ImagesService) {\r\n  }\r\n\r\n  setMetaData(metaData: ArtikelImageMetaData) {\r\n    this.imgMetaData = metaData;\r\n  }\r\n\r\n  openInputUploadFile() {\r\n    this.inputUploadFile.nativeElement.dispatchEvent(new MouseEvent('click'));\r\n  }\r\n\r\n  openInputUploadImage() {\r\n    this.inputUploadImage.nativeElement.dispatchEvent(new MouseEvent('click'));\r\n  }\r\n\r\n  cropMove(data) {\r\n    this.cropStatus = 3;\r\n    this.previewImgUrl = this.angularCropper.cropper.getCroppedCanvas().toDataURL();\r\n  }\r\n\r\n  cropStart(e) {\r\n    this.cropStatus = 2;\r\n  }\r\n\r\n  cropEnd(e) {\r\n    if (['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'].indexOf(e.detail.action) !== -1) {\r\n      this.cropStatus = 5;\r\n    } else if (e.detail.action === 'move') {\r\n      const canvasData = this.angularCropper.cropper.getCanvasData();\r\n      const containerData = this.angularCropper.cropper.getContainerData();\r\n      console.log('cropEnd move', { e, canvasData, containerData });\r\n      let toLeft = canvasData.left > 0 ? 0 : canvasData.left;\r\n      let toTop = canvasData.top > 0 ? 0 : canvasData.top;\r\n      if (canvasData.left > 0 || canvasData.top > 0) {\r\n        this.angularCropper.cropper.moveTo(toLeft, toTop);\r\n      } else {\r\n        let posIsOk = true;\r\n        if (canvasData.top + canvasData.height < containerData.height) {\r\n          toTop = containerData.height - canvasData.height;\r\n          posIsOk = false;\r\n        }\r\n        if (canvasData.left + canvasData.width < containerData.width) {\r\n          toLeft = containerData.width - canvasData.width;\r\n          posIsOk = false;\r\n        }\r\n        if (!posIsOk) {\r\n          this.angularCropper.cropper.moveTo(toLeft, toTop);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onCrop(e) {\r\n    // console.log('onCrop Details: ', e.details);\r\n  }\r\n\r\n  zoomed(e) {\r\n    console.log('zoomListener Event: ', e, 'this.angularCropper: ', this.angularCropper);\r\n    const canvasData = this.angularCropper.cropper.getCanvasData();\r\n    const containerData = this.angularCropper.cropper.getContainerData();\r\n    const ratio = e.detail.ratio;\r\n    const oldRatio = e.detail.oldRatio;\r\n    const minRatioW = containerData.width / canvasData.naturalWidth;\r\n    const minRatioH = containerData.height / canvasData.naturalHeight;\r\n\r\n    if (ratio < oldRatio && (ratio < minRatioW || ratio < minRatioH) ) { // Zoom-Out\r\n      e.preventDefault(); // Prevent zoom out\r\n      return false;\r\n    }\r\n\r\n    this.canMove = Math.abs(minRatioW - ratio) > 0.01;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log('#39 CreateArtikelImageComponent ngOniInit');\r\n    this.dragMode = this.config.dragMode;\r\n  }\r\n\r\n  onInputImageFile(event: Event, elm: HTMLInputElement) {\r\n    console.log('onInputImageFile', { event });\r\n    if (elm.files.length) {\r\n      this.inputFile = elm.files[0];\r\n    } else {\r\n      this.inputFile = null;\r\n    }\r\n    this.prepareInputImageFile();\r\n  }\r\n\r\n  converterDataURItoBlob(dataURI): Blob {\r\n    let byteString;\r\n    let mimeString;\r\n    let ia;\r\n\r\n    if (dataURI.split(',')[0].indexOf('base64') >= 0) {\r\n      byteString = atob(dataURI.split(',')[1]);\r\n    } else {\r\n      byteString = encodeURI(dataURI.split(',')[1]);\r\n    }\r\n    // separate out the mime component\r\n    mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n\r\n    // write the bytes of the string to a typed array\r\n    ia = new Uint8Array(byteString.length);\r\n    for (let i = 0; i < byteString.length; i++) {\r\n      ia[i] = byteString.charCodeAt(i);\r\n    }\r\n    return new Blob([ia], {type: mimeString });\r\n  }\r\n\r\n\r\n  prepareInputImageFile() {\r\n    if (!this.inputFile) {\r\n      return;\r\n    }\r\n    this.inputImgSize = this.inputFile.size;\r\n    this.inputImgType = this.inputFile.type;\r\n\r\n    console.log('Filesize of ' + this.inputFile.name + ' (' + this.inputFile.type + ') is ' + this.inputFile.size);\r\n    const rd = new FileReader();\r\n    rd.onload = (ev: ProgressEvent) => {\r\n      console.log(ev);\r\n      this.inputImgData = rd.result;\r\n      const img = new Image();\r\n      img.onerror = (err) => {\r\n        console.error('Cannot load file as image', { err });\r\n      };\r\n\r\n      img.onload = (imgLoadEv) => {\r\n        console.log('im onlad', { imgLoadEv });\r\n        this.inputImgWidth = img.width;\r\n        this.inputImgHeight = img.height;\r\n        console.log(`Img W: ${this.inputImgWidth}, H: ${this.inputImgHeight}`);\r\n        const KB = 1024;\r\n        console.log( 'this.prepareImgCanvas', this.prepareImgCanvas);\r\n\r\n        if (this.inputImgHeight > 1000 || this.inputImgWidth > 1000) {\r\n          const canv: HTMLCanvasElement = this.prepareImgCanvas.nativeElement;\r\n          const ctx = canv.getContext('2d');\r\n          const iRel = this.inputImgWidth / this.inputImgHeight;\r\n          canv.width = (iRel > 1) ? 1000 : (1000 * iRel);\r\n          canv.height = (iRel > 1) ? (1000 / iRel) : 1000;\r\n          ctx.drawImage(img, 0, 0, this.inputImgWidth, this.inputImgHeight, 0, 0, canv.width, canv.height);\r\n          this.imageUrl = canv.toDataURL('image/jpeg', 0.6);\r\n        } else if (this.inputImgSize > 100 * KB) {\r\n          // 1264270 => 1.235 KB\r\n          const canv: HTMLCanvasElement = this.prepareImgCanvas.nativeElement;\r\n          const ctx = canv.getContext('2d');\r\n          const iRel = this.inputImgWidth / this.inputImgHeight;\r\n          canv.width = this.inputImgWidth;\r\n          canv.height = this.inputImgHeight;\r\n          ctx.drawImage(img, 0, 0);\r\n          this.imageUrl = canv.toDataURL('image/jpeg', 0.7);\r\n        } else {\r\n          this.imageUrl = this.inputImgData;\r\n        }\r\n      };\r\n\r\n      console.log('Assign DataUrl to img. ', this.inputImgData);\r\n      img.src = this.inputImgData;\r\n\r\n    };\r\n\r\n    rd.onprogress = (ev: ProgressEvent) => {\r\n      console.log('read ' + ev.loaded + ' of ' + ev.total);\r\n    };\r\n    rd.readAsDataURL(this.inputFile);\r\n  }\r\n\r\n  onCropperReady(data) {\r\n    console.log('called onCropperReady on this: ', this, 'this.angularCropper:', this.angularCropper, ' data: ', data);\r\n    if (!this.angularCropper.isLoading && typeof this.angularCropper.cropper !== 'undefined') {\r\n      this.angularCropper.cropper.setDragMode( this.config.dragMode );\r\n      this.dragMode = this.config.dragMode;\r\n      return;\r\n    }\r\n\r\n    this.angularCropper.ready.subscribe( (data2) => {\r\n      console.log('ready subscribe', { data2 });\r\n      this.angularCropper.cropper.setDragMode( this.config.dragMode );\r\n      this.dragMode = this.config.dragMode;\r\n    });\r\n  }\r\n\r\n  crop() {\r\n    console.log('crop this.angularCropper:', this.angularCropper);\r\n    this.imageUrl = this.angularCropper.cropper.getCroppedCanvas().toDataURL('image/jpeg');\r\n    this.cropApplied = true;\r\n    this.angularCropper.cropper.clear();\r\n    this.cropStatus = 0;\r\n  }\r\n  cropReset() {\r\n    console.log('reset this.angularCropper:', this.angularCropper);\r\n    this.angularCropper.cropper.clear();\r\n    this.angularCropper.cropper.reset();\r\n    this.cropStatus = 0;\r\n  }\r\n  setDragModeToMove() {\r\n    this.angularCropper.cropper.setDragMode( 'move' );\r\n    this.dragMode = 'move';\r\n    if (this.cropStatus === 1) {\r\n      this.cropStatus = 0;\r\n    }\r\n  }\r\n  setDragModeToCrop() {\r\n    this.angularCropper.cropper.setDragMode( 'crop' );\r\n    this.angularCropper.cropper.crop();\r\n    this.dragMode = 'crop';\r\n    this.cropStatus = 5;\r\n  }\r\n  hideCropBox() {\r\n    this.angularCropper.cropper.clear();\r\n  }\r\n  rotateLeft() {\r\n    // console.log('rotate left 90 this.angularCropper:', this.angularCropper);\r\n    this.angularCropper.cropper.rotate(-90);\r\n  }\r\n  rotateRight() {\r\n    // console.log('rotate right 90 this.angularCropper:', this.angularCropper);\r\n    this.angularCropper.cropper.rotate(90);\r\n  }\r\n  rotate180() {\r\n    // console.log('rotate 180 this.angularCropper:', this.angularCropper);\r\n    this.angularCropper.cropper.rotate(180);\r\n  }\r\n  zoomIn() {\r\n    // console.log('zoom( 0.1) this.angularCropper:', this.angularCropper);\r\n    this.angularCropper.cropper.zoom(.1);\r\n  }\r\n  zoomOut(useRatio?: number) {\r\n    const ratio = (typeof useRatio === 'undefined' || useRatio >= 0) ? -0.1 : useRatio;\r\n    console.log('zoom( -0.1) this.angularCropper:', this.angularCropper);\r\n    const canvasData = this.angularCropper.cropper.getCanvasData();\r\n    const cropBoxData = this.angularCropper.cropper.getCropBoxData();\r\n    const containerData = this.angularCropper.cropper.getContainerData();\r\n    const cad = canvasData;\r\n    const crd = cropBoxData;\r\n    const cod = containerData;\r\n    const caw = cad.width;\r\n    const cah = cad.height;\r\n    const crw = crd.width;\r\n    const crh = crd.height;\r\n    const cow = cod.width;\r\n    const coh = cod.height;\r\n    console.log({ratio, caw, cah, cow, coh, crw, crh, canvasData, cropBoxData, containerData });\r\n    if (caw < cow || cah < coh) {\r\n      console.error('Permission denied to zoom out smaller than canvas');\r\n      return;\r\n    }\r\n    console.log('Permission allowed to zoom out >= canvas');\r\n    this.angularCropper.cropper.zoom(ratio);\r\n  }\r\n  escape() {\r\n    this.imageUrl = null;\r\n    this.inputImgSavedData = null;\r\n    this.inputImgData = null;\r\n  }\r\n\r\n  close() {\r\n    this.escape();\r\n    this.activeModal.close();\r\n  }\r\n\r\n  async save() {\r\n    console.log('save this.angularCropper:', this.angularCropper);\r\n    this.angularCropper.cropper.disable();\r\n    const cropData = this.angularCropper.cropper.getImageData();\r\n    this.inputImgSavedData = this.angularCropper.cropper.getCroppedCanvas().toDataURL('image/jpeg', 0.8);\r\n    return this.imageService.putArtikelImage({\r\n      name: this.imgMetaData.name,\r\n      desc: this.imgMetaData.desc,\r\n      for_jobid: this.imgMetaData.for_jobid,\r\n      mcuuid: this.imgMetaData.mcuuid,\r\n      gcuuid: this.imgMetaData.gcuuid,\r\n      type: 'image/jpeg',\r\n      size: this.inputImgSavedData.toString().length,\r\n      width: cropData.width,\r\n      height: cropData.height,\r\n      data_url: this.inputImgSavedData\r\n    }).then( () => {\r\n      this.activeModal.close();\r\n      return true;\r\n    }).catch( (err) => {\r\n      console.error( 'Cannot save Image', { err });\r\n      this.angularCropper.cropper.enable();\r\n      return false;\r\n    });\r\n  }\r\n\r\n  cropSave() {\r\n    this.crop();\r\n    this.save();\r\n  }\r\n}\r\n","export default \".modal-header.modal-header-with-links {\\n  display: flex;\\n  flex-direction: row-reverse;\\n}\\n\\n.editor {\\n  height: 60%;\\n  position: relative;\\n}\\n\\n.canvas {\\n  height: 100%;\\n}\\n\\n.canvas {\\n  align-items: center;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.toolbar-cropend,\\n.toolbar {\\n  bottom: 1rem;\\n  color: #fff;\\n  height: 2rem;\\n  left: 50%;\\n  margin-left: -8rem;\\n  position: absolute;\\n  width: 16rem;\\n  z-index: 2015;\\n}\\n\\n.toolbar {\\n  background-color: rgba(0, 0, 0, 0.4);\\n}\\n\\n.toolbar button {\\n  background: transparent;\\n  color: #fff;\\n  border: 0;\\n}\\n\\n.toolbar-cropend {\\n  top: 1rem;\\n  width: 5rem;\\n  margin-left: -2.5rem;\\n  z-index: 2016;\\n  background-color: transparent;\\n}\\n\\n.btn-icon-cirular {\\n  width: 2rem;\\n  height: 2rem;\\n  border-radius: 1rem;\\n}\\n\\n.btn-icon-cirular + .btn-icon-cirular {\\n  margin-left: 1rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2NyZWF0ZS1yYXVtLWltYWdlL0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxccGFnZXNcXGludmVudC1mb3JtXFxtb2RhbHNcXGNyZWF0ZS1yYXVtLWltYWdlXFxjcmVhdGUtcmF1bS1pbWFnZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2NyZWF0ZS1yYXVtLWltYWdlL2NyZWF0ZS1yYXVtLWltYWdlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLDJCQUFBO0FDQ0Y7O0FERUE7RUFDRSxXQUFBO0VBQ0Esa0JBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7QUNDRjs7QURFQTtFQUdFLG1CQUFBO0VBR0EsYUFBQTtFQUdBLHVCQUFBO0FDQ0Y7O0FERUE7O0VBRUUsWUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsU0FBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtBQ0NGOztBRENBO0VBQ0Usb0NBQUE7QUNFRjs7QURBQTtFQUNFLHVCQUFBO0VBQ0EsV0FBQTtFQUNBLFNBQUE7QUNHRjs7QURBQTtFQUNFLFNBQUE7RUFDQSxXQUFBO0VBQ0Esb0JBQUE7RUFDQSxhQUFBO0VBQ0EsNkJBQUE7QUNHRjs7QURBQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsbUJBQUE7QUNHRjs7QUREQTtFQUNFLGlCQUFBO0FDSUYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvY3JlYXRlLXJhdW0taW1hZ2UvY3JlYXRlLXJhdW0taW1hZ2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcclxufVxyXG5cclxuLmVkaXRvciB7XHJcbiAgaGVpZ2h0OiA2MCU7XHJcbiAgcG9zaXRpb246cmVsYXRpdmU7XHJcbn1cclxuXHJcbi5jYW52YXMge1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLmNhbnZhcyB7XHJcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcclxuICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XHJcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XHJcbiAgLW1zLWZsZXgtcGFjazogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4udG9vbGJhci1jcm9wZW5kLFxyXG4udG9vbGJhciB7XHJcbiAgYm90dG9tOiAxcmVtO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGhlaWdodDogMnJlbTtcclxuICBsZWZ0OiA1MCU7XHJcbiAgbWFyZ2luLWxlZnQ6IC04cmVtO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogMTZyZW07XHJcbiAgei1pbmRleDogMjAxNTtcclxufVxyXG4udG9vbGJhciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuNCk7XHJcbn1cclxuLnRvb2xiYXIgYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICBjb2xvcjojZmZmO1xyXG4gIGJvcmRlcjowO1xyXG59XHJcblxyXG4udG9vbGJhci1jcm9wZW5kIHtcclxuICB0b3A6IDFyZW07XHJcbiAgd2lkdGg6IDVyZW07XHJcbiAgbWFyZ2luLWxlZnQ6IC0yLjVyZW07XHJcbiAgei1pbmRleDogMjAxNjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxufVxyXG5cclxuLmJ0bi1pY29uLWNpcnVsYXIge1xyXG4gIHdpZHRoOjJyZW07XHJcbiAgaGVpZ2h0OjJyZW07XHJcbiAgYm9yZGVyLXJhZGl1czoxcmVtO1xyXG59XHJcbi5idG4taWNvbi1jaXJ1bGFyICsgLmJ0bi1pY29uLWNpcnVsYXIge1xyXG4gIG1hcmdpbi1sZWZ0OiAxcmVtO1xyXG59XHJcbiIsIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG59XG5cbi5lZGl0b3Ige1xuICBoZWlnaHQ6IDYwJTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uY2FudmFzIHtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uY2FudmFzIHtcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcbiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xuICBkaXNwbGF5OiBmbGV4O1xuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XG4gIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi50b29sYmFyLWNyb3BlbmQsXG4udG9vbGJhciB7XG4gIGJvdHRvbTogMXJlbTtcbiAgY29sb3I6ICNmZmY7XG4gIGhlaWdodDogMnJlbTtcbiAgbGVmdDogNTAlO1xuICBtYXJnaW4tbGVmdDogLThyZW07XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDE2cmVtO1xuICB6LWluZGV4OiAyMDE1O1xufVxuXG4udG9vbGJhciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTtcbn1cblxuLnRvb2xiYXIgYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjZmZmO1xuICBib3JkZXI6IDA7XG59XG5cbi50b29sYmFyLWNyb3BlbmQge1xuICB0b3A6IDFyZW07XG4gIHdpZHRoOiA1cmVtO1xuICBtYXJnaW4tbGVmdDogLTIuNXJlbTtcbiAgei1pbmRleDogMjAxNjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbi5idG4taWNvbi1jaXJ1bGFyIHtcbiAgd2lkdGg6IDJyZW07XG4gIGhlaWdodDogMnJlbTtcbiAgYm9yZGVyLXJhZGl1czogMXJlbTtcbn1cblxuLmJ0bi1pY29uLWNpcnVsYXIgKyAuYnRuLWljb24tY2lydWxhciB7XG4gIG1hcmdpbi1sZWZ0OiAxcmVtO1xufSJdfQ== */\"","import {Component, ElementRef, Input, OnInit, ViewChild} from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { CropperComponent } from 'angular-cropperjs';\nimport {ImagesService} from '../../data-services/images.service';\n\nimport {\n  faCropAlt,\n  faSearchPlus, faSearchMinus,\n  faUndo, faRedo, faTrashAlt, faTrashRestore, faTrashRestoreAlt,\n  faCheck, faBan, faSave, faCamera,\n  faArrowsAlt, faArrowsAltH, faArrowsAltV,\n  faDownload, faUpload, faSignOutAlt\n} from '@fortawesome/free-solid-svg-icons';\nimport {DBDIImages} from '../../../../shared/interfaces/dexie.interfaces';\n\nexport interface RaumImageMetaData {\n  name?: string;\n  ruuid?: string;\n  for_jobid?: number;\n  desc?: string;\n}\n\nconst infoLogWorkaround = (...args: any[]): void => {\n  args.unshift('[INFO]');\n  console.log.apply(console, args);\n};\n\nconst infoLog = (...args: any[]) => {\n  const cons: any = console;\n  const consInfo = cons.info || infoLogWorkaround;\n  consInfo( args );\n};\n\n@Component({\n  selector: 'app-create-raum-image',\n  templateUrl: './create-raum-image.component.html',\n  styleUrls: ['./create-raum-image.component.scss']\n})\nexport class CreateRaumImageComponent implements OnInit {\n\n  // Get with @ViewChild\n  @ViewChild('angularCropper', { static: false })\n  public angularCropper: CropperComponent;\n\n  @ViewChild('prepareImgCanvas', { static: true })\n  public prepareImgCanvas: ElementRef;\n\n  @ViewChild('inputUploadFile', { static: true })\n  public inputUploadFile: ElementRef;\n\n  @ViewChild('inputUploadImage', { static: true })\n  public inputUploadImage: ElementRef;\n\n  // Editor-Button-Icons\n  faCamera = faCamera;\n  faCrop = faCropAlt;\n  faMove = faArrowsAlt;\n  faSearchPlus = faSearchPlus;\n  faSearchMinus = faSearchMinus;\n  faRotateLeft = faUndo;\n  faRotateRight = faRedo;\n  faCheck = faCheck;\n  faBan = faBan;\n  faSave = faSave;\n  faUpload = faUpload;\n  faTrash = faTrashAlt;\n  faTrashRestore = faTrashRestore;\n  faTrashRestoreAlt = faTrashRestoreAlt;\n\n  imgMetaData: RaumImageMetaData;\n\n  allowDelete = false;\n  inputFile?: File = null;\n  inputImgData = null;\n  inputImgType = '';\n  inputImgSize = 0;\n  inputImgWidth = 0;\n  inputImgHeight = 0;\n  inputImgSavedData = null;\n  previewImgUrl = null;\n\n  config: any = {\n    // aspectRatio : 16 / 9,\n    autoCrop: false,\n    dragMode : 'crop',\n    background : true,\n    movable: true,\n    rotatable : true,\n    scalable: true,\n    zoomable: true,\n    restore: true,\n    viewMode: 0,\n    checkImageOrigin : true,\n    // crop: this.onCrop.bind(this),\n    cropmove: this.cropMove.bind(this),\n    cropstart: this.cropStart.bind(this),\n    cropend: this.cropEnd.bind(this),\n    zoom: this.zoomed.bind(this),\n    ready: this.onCropperReady.bind(this),\n    checkCrossOrigin: true,\n    wheelZoomRatio: 0.1,\n    toggleDragModeOnDblclick: true\n  };\n  cropStatus = 0;\n  cropApplied = false;\n  dragMode = 'move';\n  canMove = false;\n\n  imageUrl?: string;\n\n  constructor(public activeModal: NgbActiveModal, private imageService: ImagesService) {\n  }\n\n  setMetaData(metaData: RaumImageMetaData) {\n    this.imgMetaData = metaData;\n  }\n\n  openInputUploadFile() {\n    this.inputUploadFile.nativeElement.dispatchEvent(new MouseEvent('click'));\n  }\n\n  openInputUploadImage() {\n    this.inputUploadImage.nativeElement.dispatchEvent(new MouseEvent('click'));\n  }\n\n  cropMove(data) {\n    this.cropStatus = 3;\n    this.previewImgUrl = this.angularCropper.cropper.getCroppedCanvas().toDataURL();\n  }\n\n  cropStart(e) {\n    this.cropStatus = 2;\n  }\n\n  cropEnd(e) {\n    if (['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'].indexOf(e.detail.action) !== -1) {\n      this.cropStatus = 5;\n    } else if (e.detail.action === 'move') {\n      const canvasData = this.angularCropper.cropper.getCanvasData();\n      const containerData = this.angularCropper.cropper.getContainerData();\n      console.log('cropEnd move', { e, canvasData, containerData });\n      let toLeft = canvasData.left > 0 ? 0 : canvasData.left;\n      let toTop = canvasData.top > 0 ? 0 : canvasData.top;\n      if (canvasData.left > 0 || canvasData.top > 0) {\n        this.angularCropper.cropper.moveTo(toLeft, toTop);\n      } else {\n        let posIsOk = true;\n        if (canvasData.top + canvasData.height < containerData.height) {\n          toTop = containerData.height - canvasData.height;\n          posIsOk = false;\n        }\n        if (canvasData.left + canvasData.width < containerData.width) {\n          toLeft = containerData.width - canvasData.width;\n          posIsOk = false;\n        }\n        if (!posIsOk) {\n          this.angularCropper.cropper.moveTo(toLeft, toTop);\n        }\n      }\n    }\n  }\n\n  onCrop(e) {\n    // console.log('onCrop Details: ', e.details);\n  }\n\n  zoomed(e) {\n    console.log('zoomListener Event: ', e, 'this.angularCropper: ', this.angularCropper);\n    const canvasData = this.angularCropper.cropper.getCanvasData();\n    const containerData = this.angularCropper.cropper.getContainerData();\n    const ratio = e.detail.ratio;\n    const oldRatio = e.detail.oldRatio;\n    const minRatioW = containerData.width / canvasData.naturalWidth;\n    const minRatioH = containerData.height / canvasData.naturalHeight;\n\n    if (ratio < oldRatio && (ratio < minRatioW || ratio < minRatioH) ) { // Zoom-Out\n      e.preventDefault(); // Prevent zoom out\n      return false;\n    }\n\n    this.canMove = Math.abs(minRatioW - ratio) > 0.01;\n  }\n\n  ngOnInit(): void {\n    console.log('#39 CreateArtikelImageComponent ngOniInit');\n    this.dragMode = this.config.dragMode;\n  }\n\n  onInputImageFile(event: Event, elm: HTMLInputElement) {\n    console.log('onInputImageFile', { event });\n    if (elm.files.length) {\n      this.inputFile = elm.files[0];\n    } else {\n      this.inputFile = null;\n    }\n    this.prepareInputImageFile();\n  }\n\n  converterDataURItoBlob(dataURI): Blob {\n    let byteString;\n    let mimeString;\n    let ia;\n\n    if (dataURI.split(',')[0].indexOf('base64') >= 0) {\n      byteString = atob(dataURI.split(',')[1]);\n    } else {\n      byteString = encodeURI(dataURI.split(',')[1]);\n    }\n    // separate out the mime component\n    mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n\n    // write the bytes of the string to a typed array\n    ia = new Uint8Array(byteString.length);\n    for (let i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ia], {type: mimeString });\n  }\n\n\n  prepareInputImageFile() {\n    if (!this.inputFile) {\n      return;\n    }\n    this.inputImgSize = this.inputFile.size;\n    this.inputImgType = this.inputFile.type;\n\n    console.log('Filesize of ' + this.inputFile.name + ' (' + this.inputFile.type + ') is ' + this.inputFile.size);\n    const rd = new FileReader();\n    rd.onload = (ev: ProgressEvent) => {\n      console.log(ev);\n      this.inputImgData = rd.result;\n      const img = new Image();\n      img.onerror = (err) => {\n        console.error('Cannot load file as image', { err });\n      };\n\n      img.onload = (imgLoadEv) => {\n        console.log('im onlad', { imgLoadEv });\n        this.inputImgWidth = img.width;\n        this.inputImgHeight = img.height;\n        console.log(`Img W: ${this.inputImgWidth}, H: ${this.inputImgHeight}`);\n        const KB = 1024;\n        console.log( 'this.prepareImgCanvas', this.prepareImgCanvas);\n\n        if (this.inputImgHeight > 1000 || this.inputImgWidth > 1000) {\n          const canv: HTMLCanvasElement = this.prepareImgCanvas.nativeElement;\n          const ctx = canv.getContext('2d');\n          const iRel = this.inputImgWidth / this.inputImgHeight;\n          canv.width = (iRel > 1) ? 1000 : (1000 * iRel);\n          canv.height = (iRel > 1) ? (1000 / iRel) : 1000;\n          ctx.drawImage(img, 0, 0, this.inputImgWidth, this.inputImgHeight, 0, 0, canv.width, canv.height);\n          this.imageUrl = canv.toDataURL('image/jpeg', 0.6);\n        } else if (this.inputImgSize > 100 * KB) {\n          // 1264270 => 1.235 KB\n          const canv: HTMLCanvasElement = this.prepareImgCanvas.nativeElement;\n          const ctx = canv.getContext('2d');\n          const iRel = this.inputImgWidth / this.inputImgHeight;\n          canv.width = this.inputImgWidth;\n          canv.height = this.inputImgHeight;\n          ctx.drawImage(img, 0, 0);\n          this.imageUrl = canv.toDataURL('image/jpeg', 0.7);\n        } else {\n          this.imageUrl = this.inputImgData;\n        }\n      };\n\n      console.log('Assign DataUrl to img. ', this.inputImgData);\n      img.src = this.inputImgData;\n\n    };\n\n    rd.onprogress = (ev: ProgressEvent) => {\n      console.log('read ' + ev.loaded + ' of ' + ev.total);\n    };\n    rd.readAsDataURL(this.inputFile);\n  }\n\n  onCropperReady(data) {\n    console.log('called onCropperReady on this: ', this, 'this.angularCropper:', this.angularCropper, ' data: ', data);\n    if (!this.angularCropper.isLoading && typeof this.angularCropper.cropper !== 'undefined') {\n      this.angularCropper.cropper.setDragMode( this.config.dragMode );\n      this.dragMode = this.config.dragMode;\n      return;\n    }\n\n    this.angularCropper.ready.subscribe( (data2) => {\n      console.log('ready subscribe', { data2 });\n      this.angularCropper.cropper.setDragMode( this.config.dragMode );\n      this.dragMode = this.config.dragMode;\n    });\n  }\n\n  crop() {\n    console.log('crop this.angularCropper:', this.angularCropper);\n    this.imageUrl = this.angularCropper.cropper.getCroppedCanvas().toDataURL('image/jpeg');\n    this.cropApplied = true;\n    this.angularCropper.cropper.clear();\n    this.cropStatus = 0;\n  }\n  cropReset() {\n    console.log('reset this.angularCropper:', this.angularCropper);\n    this.angularCropper.cropper.clear();\n    this.angularCropper.cropper.reset();\n    this.cropStatus = 0;\n  }\n  setDragModeToMove() {\n    this.angularCropper.cropper.setDragMode( 'move' );\n    this.dragMode = 'move';\n    if (this.cropStatus === 1) {\n      this.cropStatus = 0;\n    }\n  }\n  setDragModeToCrop() {\n    this.angularCropper.cropper.setDragMode( 'crop' );\n    this.angularCropper.cropper.crop();\n    this.dragMode = 'crop';\n    this.cropStatus = 5;\n  }\n  hideCropBox() {\n    this.angularCropper.cropper.clear();\n  }\n  rotateLeft() {\n    // console.log('rotate left 90 this.angularCropper:', this.angularCropper);\n    this.angularCropper.cropper.rotate(-90);\n  }\n  rotateRight() {\n    // console.log('rotate right 90 this.angularCropper:', this.angularCropper);\n    this.angularCropper.cropper.rotate(90);\n  }\n  rotate180() {\n    // console.log('rotate 180 this.angularCropper:', this.angularCropper);\n    this.angularCropper.cropper.rotate(180);\n  }\n  zoomIn() {\n    // console.log('zoom( 0.1) this.angularCropper:', this.angularCropper);\n    this.angularCropper.cropper.zoom(.1);\n  }\n  zoomOut(useRatio?: number) {\n    const ratio = (typeof useRatio === 'undefined' || useRatio >= 0) ? -0.1 : useRatio;\n    console.log('zoom( -0.1) this.angularCropper:', this.angularCropper);\n    const canvasData = this.angularCropper.cropper.getCanvasData();\n    const cropBoxData = this.angularCropper.cropper.getCropBoxData();\n    const containerData = this.angularCropper.cropper.getContainerData();\n    const cad = canvasData;\n    const crd = cropBoxData;\n    const cod = containerData;\n    const caw = cad.width;\n    const cah = cad.height;\n    const crw = crd.width;\n    const crh = crd.height;\n    const cow = cod.width;\n    const coh = cod.height;\n    console.log({ratio, caw, cah, cow, coh, crw, crh, canvasData, cropBoxData, containerData });\n    if (caw < cow || cah < coh) {\n      console.error('Permission denied to zoom out smaller than canvas');\n      return;\n    }\n    console.log('Permission allowed to zoom out >= canvas');\n    this.angularCropper.cropper.zoom(ratio);\n  }\n  escape() {\n    this.imageUrl = null;\n    this.inputImgSavedData = null;\n    this.inputImgData = null;\n  }\n\n  close() {\n    this.escape();\n    this.activeModal.close();\n  }\n\n  async save() {\n    console.log('save this.angularCropper:', this.angularCropper);\n    this.angularCropper.cropper.disable();\n    const cropData = this.angularCropper.cropper.getImageData();\n    this.inputImgSavedData = this.angularCropper.cropper.getCroppedCanvas().toDataURL('image/jpeg', 0.8);\n    return this.imageService.putRaumImage({\n      name: this.imgMetaData.name,\n      desc: this.imgMetaData.desc,\n      for_jobid: this.imgMetaData.for_jobid,\n      mcuuid: '',\n      gcuuid: '',\n      type: 'image/jpeg',\n      size: this.inputImgSavedData.toString().length,\n      width: cropData.width,\n      height: cropData.height,\n      data_url: this.inputImgSavedData\n    }, this.imgMetaData.ruuid).then( () => {\n      this.activeModal.close();\n      return true;\n    }).catch( (err) => {\n      console.error( 'Cannot save Image', { err });\n      this.angularCropper.cropper.enable();\n      return false;\n    });\n  }\n\n  cropSave() {\n    this.crop();\n    this.save();\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL21vZGFscy9lZGl0LWludmVudGFyL2VkaXQtaW52ZW50YXIuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, EventEmitter, OnInit, Output, ViewChild} from '@angular/core';\r\n\r\nimport { ModalDismissReasons, NgbActiveModal, NgbTypeahead} from '@ng-bootstrap/ng-bootstrap';\r\nimport { faCamera, faSignOutAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { DBDIArtikel, DBDIHersteller, DBDIInventar, DBDIRaeume} from '../../../../shared/interfaces/dexie.interfaces';\r\nimport {InventarService, InventarBasisDaten, InventarFoundResult} from '../../data-services/inventar.service';\r\nimport {merge, Observable, Subject} from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged, filter, map } from 'rxjs/operators';\r\nimport { ArtikelOption} from '../select-search-artikel/select-search-artikel.component';\r\nimport {HerstellerService, HerstellerWithId} from '../../data-services/hersteller.service';\r\nimport {\r\n  ArtikelHerstellerImg,\r\n  ArtikelPropertiesForQueryCount,\r\n  ArtikelService\r\n} from '../../data-services/artikel.service';\r\nimport {BasedataService} from '../../../../shared/services/basedata.service';\r\nimport {DataService} from '../../../../shared/services/data.service';\r\n\r\nconst states: HerstellerWithId[] = [];\r\nconst stateNames: string[] = [];\r\nconst artikelGruppen: string[] = [];\r\nconst artikelKategorien: string[] = [];\r\nconst artikelTypen: string[] = [];\r\nconst artikelGroessen: string[] = [];\r\nconst artikelFarben: string[] = [];\r\nconst gruppenKategorien: { gruppe: string, kategorien: string[]}[] = [];\r\n\r\ninterface SimilarityStat {\r\n  term: string;\r\n  count: number;\r\n}\r\ninterface ExistCountSimilarArticle {\r\n  Hersteller: SimilarityStat;\r\n  Bezeichnung: SimilarityStat;\r\n  Typ: SimilarityStat;\r\n  // Kategorie: SimilarityStat;\r\n  Groesse: SimilarityStat;\r\n  Farbe: SimilarityStat;\r\n}\r\n\r\ninterface HerstellerExistsStatus {\r\n  term?: string;\r\n  hid?: number;\r\n  uuid?: string;\r\n  data?: DBDIHersteller;\r\n  isQuerying: boolean;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-edit-inventar',\r\n  templateUrl: './edit-inventar.component.html',\r\n  styleUrls: ['./edit-inventar.component.scss']\r\n})\r\nexport class EditInventarComponent implements OnInit {\r\n\r\n  @Output() artikelSelected = new EventEmitter<ArtikelOption>();\r\n  @Output() artikelSearching = new EventEmitter<number>();\r\n  @Output() artikelCreated = new EventEmitter<DBDIArtikel>();\r\n  @Output() herstellerChanged = new EventEmitter<string>();\r\n  @Output() gruppeChanged = new EventEmitter<string>();\r\n  @Output() inputChanging = new EventEmitter();\r\n  @Output() inputChanged = new EventEmitter<Event>();\r\n  @Output() inventarChanged = new EventEmitter<InventarFoundResult>();\r\n  @Output() scannerRequest = new EventEmitter<HTMLElement>();\r\n\r\n  faSignOutAlt = faSignOutAlt;\r\n  faCamera = faCamera;\r\n\r\n  numBezeichnungExists = -1;\r\n\r\n  closeResult: string;\r\n  inventarDaten: InventarFoundResult = null;\r\n  public inventarInput: InventarBasisDaten = {\r\n    code: '',\r\n    uuid: '',\r\n    Bezeichnung: '',\r\n    Gruppe: '',\r\n    Kategorie: '',\r\n    Typ: '',\r\n    Hersteller: '',\r\n    Groesse: '',\r\n    Farbe: '',\r\n    huuid: '',\r\n  };\r\n\r\n  @ViewChild('instance', {static: true}) instance: NgbTypeahead;\r\n  focus$ = new Subject<string>();\r\n  click$ = new Subject<string>();\r\n\r\n  @ViewChild('instanceGrp', {static: true}) instanceGrp: NgbTypeahead;\r\n  focusGrp$ = new Subject<string>();\r\n  clickGrp$ = new Subject<string>();\r\n\r\n  @ViewChild('instanceKtg', {static: true}) instanceKtg: NgbTypeahead;\r\n  focusKtg$ = new Subject<string>();\r\n  clickKtg$ = new Subject<string>();\r\n\r\n  @ViewChild('instanceTyp', {static: true}) instanceTyp: NgbTypeahead;\r\n  focusTyp$ = new Subject<string>();\r\n  clickTyp$ = new Subject<string>();\r\n\r\n  @ViewChild('instanceGrs', {static: true}) instanceGrs: NgbTypeahead;\r\n  focusGrs$ = new Subject<string>();\r\n  clickGrs$ = new Subject<string>();\r\n\r\n  @ViewChild('instanceFa', {static: true}) instanceFa: NgbTypeahead;\r\n  focusFa$ = new Subject<string>();\r\n  clickFa$ = new Subject<string>();\r\n\r\n  existsStatus: ExistCountSimilarArticle = {\r\n    Hersteller: { term: '', count: 0 },\r\n    Bezeichnung: { term: '', count: 0 },\r\n    Typ: { term: '', count: 0 },\r\n    Groesse: { term: '', count: 0 },\r\n    Farbe: { term: '', count: 0 },\r\n  };\r\n\r\n  herstellerExistsStatus: HerstellerExistsStatus = {\r\n    term: '',\r\n    hid: 0,\r\n    uuid: '',\r\n    data: null,\r\n    isQuerying: false\r\n  };\r\n  delayedTrigger: any = {};\r\n\r\n  listExistingArticleMatches: ArtikelHerstellerImg[] = [];\r\n  listExistingArticlePage: ArtikelHerstellerImg[] = [];\r\n  pageSize = 8;\r\n  collectionSize = 0;\r\n  page = 1;\r\n  maxSize = 6;\r\n\r\n  public validationErrors: string[] = [];\r\n  public formIsValid = true;\r\n  public formError = '';\r\n  private uuid = '';\r\n\r\n  private gid: number;\r\n  private mid: number;\r\n\r\n  constructor(\r\n    public activeModal: NgbActiveModal,\r\n    public inventarService: InventarService,\r\n    private artikelService: ArtikelService,\r\n    private herstellerService: HerstellerService,\r\n    private baseData: BasedataService,\r\n    private dataService: DataService ) { }\r\n\r\n    async loadHersteller(): Promise<number> {\r\n      console.log('EditInventarComponent #150 loadHersteller');\r\n      return this.herstellerService.getAllHerstellerWithUuids()\r\n        .then( list => {\r\n          while (states.length > 0) {\r\n            states.pop();\r\n            stateNames.pop();\r\n          }\r\n          list.forEach( item =>  {\r\n            states.push(item);\r\n            stateNames.push(item.Hersteller);\r\n          });\r\n          console.log('#118 ngOnInit', { states, stateNames });\r\n          return states.length;\r\n        })\r\n        .catch( () => -1);\r\n    }\r\n\r\n    async loadGruppenKategorien(): Promise<number> {\r\n      console.log('EditInventarComponent #168');\r\n      return this.artikelService.getGroupedArtikelGruppenKategorien()\r\n        .then( (list) => {\r\n          gruppenKategorien.length = 0;\r\n          list.forEach( itm => gruppenKategorien.push(itm));\r\n          return gruppenKategorien.length;\r\n        })\r\n        .catch( () => -1);\r\n    }\r\n\r\n    async loadGruppen(): Promise<number> {\r\n      console.log('EditInventarComponent #179');\r\n      return this.artikelService.getGroupedArtikelGruppen()\r\n        .then( list => {\r\n          artikelGruppen.length = 0;\r\n          list.forEach( (it) => artikelGruppen.push( it ) );\r\n          return artikelGruppen.length;\r\n        })\r\n        .catch( () => -1);\r\n    }\r\n\r\n    async loadKategorien(): Promise<number> {\r\n      console.log('EditInventarComponent #190');\r\n      return this.artikelService.getGroupedArtikelKategorien()\r\n        .then( list => {\r\n          artikelKategorien.length = 0;\r\n          list.forEach( (it) => artikelKategorien.push( it ) );\r\n          return artikelKategorien.length;\r\n        })\r\n        .catch( () => -1);\r\n    }\r\n\r\n    async loadArtikeltypen(): Promise<number> {\r\n      console.log('EditInventarComponent #201');\r\n      return this.artikelService.getGroupedArtikelProperties('Typ')\r\n        .then( list => {\r\n          artikelTypen.length = 0;\r\n          list.forEach( (it) => artikelTypen.push( it ) );\r\n          return artikelTypen.length;\r\n        })\r\n        .catch( () => -1);\r\n    }\r\n\r\n    async loadFarben(): Promise<number> {\r\n      console.log('EditInventarComponent #212');\r\n      return this.artikelService.getGroupedArtikelFarben()\r\n        .then( list => {\r\n          artikelFarben.length = 0;\r\n          list.forEach( (it) => artikelFarben.push( it ) );\r\n          return artikelFarben.length;\r\n        })\r\n        .catch( () => -1);\r\n    }\r\n\r\n    async loadGroessen(): Promise<number> {\r\n      console.log('EditInventarComponent #223');\r\n      return this.artikelService.getGroupedArtikelGroessen()\r\n        .then( list => {\r\n          artikelGroessen.length = 0;\r\n          list.forEach( (it) => artikelGroessen.push( it ) );\r\n          return artikelGroessen.length;\r\n        })\r\n        .catch( () => -1);\r\n    }\r\n\r\n  ngOnInit() {\r\n    console.log('EditInventarComponent #234 ngOnInit');\r\n    this.mid = this.baseData.getCurrentMid();\r\n    Promise.all([\r\n      this.loadHersteller(),\r\n      this.loadGruppenKategorien(),\r\n      this.loadGruppen(),\r\n      this.loadKategorien(),\r\n      this.loadArtikeltypen(),\r\n      this.loadFarben(),\r\n      this.loadGroessen()\r\n    ])\r\n      .then( (result) => {\r\n        console.log('loaded all ArtikelData', {\r\n          result,\r\n          states,\r\n          stateNames,\r\n          artikelTypen,\r\n          'gruppenKategorien.length': gruppenKategorien.length,\r\n          'artikelGruppen.length': artikelGruppen.length,\r\n          'artikelKategorien.length': artikelKategorien.length,\r\n          'artikelTypen.length': artikelTypen.length,\r\n          'artikelFarben.length': artikelFarben.length,\r\n          'artikelGroessen.length': artikelGroessen.length\r\n        });\r\n      });\r\n\r\n    this.herstellerChanged.subscribe( () => {\r\n      this.checkHersteller().then( () => {\r\n        this.inputChanged.emit();\r\n        // this.rebuildTypeaheadGruppen();\r\n        this.rebuildTypeaheadFarben();\r\n        // this.rebuildTypeaheadKategorien();\r\n        this.rebuildTypeaheadTypen();\r\n      });\r\n    });\r\n\r\n    this.gruppeChanged.subscribe( (gruppe?: string) => {\r\n      this.rebuildTypeaheadKategorien(gruppe);\r\n      this.inputChanged.emit();\r\n    });\r\n\r\n    this.inputChanging.subscribe(() => {\r\n      this.delegateListArticleMatches(3000);\r\n    });\r\n\r\n    this.inputChanged.subscribe(() => {\r\n      // this.checkIfArtikelExistsGlobal();\r\n      this.checkIfArtikelExistsMandant();\r\n      this.delegateListArticleMatches(500);\r\n    });\r\n  }\r\n\r\n  openScanner(target) {\r\n    console.log('EditInventarComponent #287 openScanner');\r\n    this.scannerRequest.emit(target);\r\n  }\r\n\r\n  get inventarUuid() {\r\n    console.log('called get raumId() ', this.uuid);\r\n    return this.uuid;\r\n  }\r\n\r\n  set inventarUuid(uuid: string) {\r\n    console.log('EditInventarComponent #297 set inventarId(id)', { id: uuid });\r\n    this.uuid = uuid;\r\n    this.inventarService.getInventar(uuid).then(result => {\r\n      console.log('EditInventarComponent #300 getInventar', { result });\r\n      this.inventarDaten = result;\r\n      if (result && result.success) {\r\n        this.inventarInput.uuid = uuid;\r\n        this.inventarInput.code = result.inventar.code;\r\n        this.inventarInput.Bezeichnung = result.artikelData.Bezeichnung;\r\n        this.inventarInput.Gruppe = result.artikelData.Gruppe;\r\n        this.inventarInput.Kategorie = result.artikelData.Kategorie;\r\n        this.inventarInput.Typ = result.artikelData.Typ;\r\n        if (result.hersteller && result.hersteller.Hersteller) {\r\n          this.inventarInput.Hersteller = result.hersteller.Hersteller;\r\n        } else {\r\n          this.inventarInput.Hersteller = '';\r\n        }\r\n        this.inventarInput.Groesse = result.artikelData.Groesse;\r\n        this.inventarInput.Farbe = result.artikelData.Farbe;\r\n        this.inventarInput.mcid = result.inventar.mcid;\r\n        this.inventarInput.mcuuid = result.inventar.mcuuid;\r\n        this.inventarInput.gcid = result.artikelRef.gcid;\r\n        this.inventarInput.gcuuid = result.artikelRef.gcuuid;\r\n        this.inventarInput.hid = result.artikelData.hid;\r\n        this.inventarInput.huuid = result.artikelData.huuid;\r\n        this.inventarInput.Zustand = result.inventar.Zustand;\r\n      }\r\n    });\r\n  }\r\n\r\n  async formValidate(): Promise<boolean> {\r\n    return true;\r\n  }\r\n\r\n  getWhereInputsOf(artikelProperties: string[]): any {\r\n    const daten = { ...this.inventarInput };\r\n    console.log('#201 getWhereInputsOf', { artikelProperties, daten, inventarInput: this.inventarInput });\r\n    const where = artikelProperties\r\n      .filter( p => {\r\n        const hasInput = (p in daten)\r\n          && daten[p] !== 0\r\n          && daten[p] !== ''\r\n          && !!daten[p];\r\n        console.log('#206 getWhereInputsOf', {\r\n          p, hasInput, daten, artikelDaten: { ...this.inventarInput},\r\n          value: this.inventarInput[p], dvalue: daten[p]\r\n        });\r\n        return hasInput;\r\n      })\r\n      .reduce( (o, p) => { o[p] = this.inventarInput[p]; return o; }, {} as any);\r\n    console.log('#210 getWhereInputsOf', { artikelProperties, where, artikelDaten: this.inventarInput });\r\n    return where;\r\n  }\r\n\r\n  async delegateListArticleMatches(delay?: number) {\r\n    console.log('EditInventarComponent #347');\r\n    const funcName = 'listArticleMatches';\r\n    const delayMS = isNaN(delay) ? 2000 : delay;\r\n    if (funcName in this.delayedTrigger) {\r\n      clearTimeout( this.delayedTrigger[funcName] );\r\n      delete this.delayedTrigger[funcName];\r\n    }\r\n\r\n    console.log('delegate listArticleMatches');\r\n    this.delayedTrigger[funcName] = setTimeout( this.listArticleMatches.bind(this), delayMS );\r\n  }\r\n\r\n  async rebuildTypeaheadKategorien(gruppe?: string) {\r\n    console.log('EditInventarComponent #360');\r\n    const grpKategorien = gruppenKategorien.find( itm => itm.gruppe === gruppe);\r\n    if (gruppe && grpKategorien && grpKategorien.kategorien.length) {\r\n      artikelKategorien.length = 0;\r\n      grpKategorien.kategorien.forEach( ktg => artikelKategorien.push( ktg ));\r\n      return;\r\n    }\r\n\r\n    const buffer: string[] = [];\r\n    gruppenKategorien.forEach( itm => {\r\n      itm.kategorien.forEach( ktg => {\r\n        if (ktg && artikelKategorien.indexOf(ktg) === -1) {\r\n          buffer.push( ktg );\r\n        }\r\n      });\r\n    });\r\n\r\n    artikelKategorien.length = 0;\r\n    buffer.sort( (a, b) => a.toLowerCase() < b.toLowerCase() ? -1 : 1)\r\n      .forEach( ktg => artikelKategorien.push( ktg ));\r\n    return;\r\n  }\r\n\r\n  async rebuildTypeaheadTypen() {\r\n    console.log('EditInventarComponent #384');\r\n    const where = this.getWhereInputsOf(['hid']);\r\n    this.artikelService.getGroupedArtikelTypen(where).then( list => {\r\n      artikelTypen.length = 0;\r\n      list.forEach( (it) => artikelTypen.push( it ) );\r\n    });\r\n  }\r\n\r\n  async rebuildTypeaheadFarben() {\r\n    console.log('EditInventarComponent #393');\r\n    const where = this.getWhereInputsOf(['hid']);\r\n    this.artikelService.getGroupedArtikelFarben(where).then( list => {\r\n      artikelFarben.length = 0;\r\n      list.forEach( (it) => artikelFarben.push( it ) );\r\n    });\r\n  }\r\n\r\n  async checkHersteller(): Promise<boolean> {\r\n    console.log('EditInventarComponent #402');\r\n    console.log('called checkHersteller');\r\n    const input = this.inventarInput.Hersteller;\r\n    const term = (typeof input === 'string') ? input.trim() : '';\r\n\r\n    if (term !== this.herstellerExistsStatus.term) {\r\n      this.herstellerExistsStatus.term = term;\r\n      this.herstellerExistsStatus.data = null;\r\n      this.herstellerExistsStatus.hid = null;\r\n      this.herstellerExistsStatus.uuid = null;\r\n    }\r\n\r\n    if (term.length) {\r\n      this.herstellerExistsStatus.isQuerying = true;\r\n      return await this.herstellerService.getByName( term ).then( (data) => {\r\n        this.herstellerExistsStatus.data = data;\r\n        this.herstellerExistsStatus.isQuerying = false;\r\n        if (data !== null && data !== undefined) {\r\n          this.herstellerExistsStatus.hid = data.hid;\r\n          this.herstellerExistsStatus.uuid = ('uuid' in data) ? data.uuid : null;\r\n          console.log('#167 Hersteller exists: ', this.herstellerExistsStatus);\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n    }\r\n    console.log('#172 Hersteller not found: ', term);\r\n    return false;\r\n  }\r\n\r\n  async listArticleMatches() {\r\n    console.log('#175 called listArticleMatches');\r\n    const mid = this.baseData.getCurrentMid();\r\n    const oInputStatus = this.existsStatus;\r\n    const d = this.inventarInput;\r\n    const oCheckData: ArtikelPropertiesForQueryCount = {};\r\n\r\n    await this.checkHersteller();\r\n    const hid = this.herstellerExistsStatus.hid;\r\n\r\n    for (const k of ['Bezeichnung', 'Typ', 'Kategorie', 'Gruppe', 'Groesse', 'Farbe']) {\r\n      if (d[k]) {\r\n        oCheckData[k] = d[k];\r\n      }\r\n    }\r\n\r\n    this.listExistingArticleMatches = await this.artikelService.listArticleByProperties(mid, hid, oCheckData);\r\n    this.page = 1;\r\n    this.onPageChange(this.page);\r\n    console.log('finished listArticleMatches with results.count: ', this.listExistingArticleMatches.length,\r\n      ' for', { mid, hid, oCheckData } );\r\n  }\r\n\r\n  async checkIfArtikelExistsMandant(): Promise<boolean> {\r\n    console.log('EditInventarComponent #465');\r\n    console.log('check if bezeichnung exists');\r\n    this.numBezeichnungExists = -1;\r\n\r\n    let globalArtikelIds: string[] = [];\r\n\r\n    await this.artikelService\r\n      .artikelGlobalByBezeichnung( this.inventarInput.Bezeichnung )\r\n      .then( items => {\r\n        globalArtikelIds = items.map<string>( item => item.uuid );\r\n      });\r\n\r\n    if (globalArtikelIds.length === 0) {\r\n      return false;\r\n    }\r\n\r\n    return 0 < await this.artikelService\r\n      .artikelMcuuidByGcuuids( this.mid, globalArtikelIds )\r\n      .then( items => {\r\n        return items.length;\r\n      });\r\n  }\r\n\r\n  async save(): Promise<boolean> {\r\n    console.log('EditInventarComponent #481');\r\n    this.formError = '';\r\n    console.log('save inventar');\r\n    if (await this.formValidate()) {\r\n      const uuid = this.uuid;\r\n      const result = await this.inventarService.updateByUuid(uuid, this.inventarInput);\r\n      if (result.success) {\r\n        this.inventarChanged.emit(result);\r\n\r\n        if (result.hersteller && result.hersteller.hid) {\r\n          this.inventarInput.hid = result.hersteller.hid;\r\n        } else {\r\n          this.inventarInput.hid = null;\r\n        }\r\n        this.inventarInput.huuid = result.hersteller.uuid;\r\n        this.inventarInput.mcid = result.artikelRef.mcid;\r\n        this.inventarInput.mcuuid = result.artikelRef.uuid;\r\n        this.inventarInput.gcid = result.artikelData.gcid;\r\n        this.inventarInput.gcuuid = result.artikelData.uuid;\r\n\r\n      } else {\r\n        this.formError = 'Daten konnten nicht aktualisiert werden!<br>';\r\n        return false;\r\n      }\r\n      return true;\r\n    } else {\r\n      this.formError = 'Bitte die Angaben vervollstndigen, Raum darf noch nicht vergeben sein';\r\n      return false;\r\n    }\r\n  }\r\n\r\n  async applyItemAsArtikel(item: any) {\r\n    console.log('EditInventarComponent #509');\r\n    this.applyItemAsInput(item);\r\n    console.log('#361 applyItemAsArtikel', { item });\r\n    if (!item.mcuuid) {\r\n      let artikelRef = await this.dataService.getArtikelRefByGcuuidMid(item.gcuuid, this.mid);\r\n      if (!artikelRef) {\r\n        artikelRef = await this.artikelService.insertArtikelRef(item);\r\n      }\r\n      item.mcid = artikelRef.mcid;\r\n      item.mcuuid = artikelRef.uuid;\r\n    }\r\n\r\n    if (this.inventarDaten.inventar.mcuuid !== item.mcuuid) {\r\n      await this.inventarService.updateRefs(this.uuid, item.mcuuid, {\r\n        Zustand: this.inventarInput.Zustand,\r\n        code: this.inventarInput.code\r\n      });\r\n    }\r\n    const result = await this.inventarService.getInventar(this.uuid);\r\n\r\n    this.inventarChanged.emit(result);\r\n    return;\r\n  }\r\n\r\n  applyItemAsInput(item: any) {\r\n    console.log('EditInventarComponent #534');\r\n    console.log('#367 applyItemAsInput', { item });\r\n    this.inventarInput.Hersteller = item.Hersteller;\r\n    this.inventarInput.hid = item.hid;\r\n    this.inventarInput.Bezeichnung = item.Bezeichnung;\r\n    this.inventarInput.Gruppe = item.Gruppe;\r\n    this.inventarInput.Kategorie = item.Kategorie;\r\n    this.inventarInput.Farbe = item.Farbe;\r\n    this.inventarInput.Groesse = item.Groesse;\r\n    this.inventarInput.Typ = item.Typ;\r\n    return;\r\n  }\r\n\r\n  formatter = (state: string) => state;\r\n\r\n  search = (text$: Observable<string>) => {\r\n    console.log('EditInventarComponent #550');\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.click$.pipe(filter(() => !this.instance.isPopupOpen()));\r\n    const inputFocus$ = this.focus$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? stateNames\r\n        : stateNames.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  searchGruppen = (text$: Observable<string>) => {\r\n    console.log('EditInventarComponent #562');\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.clickGrp$.pipe(filter(() => !this.instanceGrp.isPopupOpen()));\r\n    const inputFocus$ = this.focusGrp$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? artikelGruppen\r\n        : artikelGruppen.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  searchKategorien = (text$: Observable<string>) => {\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.clickKtg$.pipe(filter(() => !this.instanceKtg.isPopupOpen()));\r\n    const inputFocus$ = this.focusKtg$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? artikelKategorien\r\n        : artikelKategorien.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  searchTypen = (text$: Observable<string>) => {\r\n    console.log('EditInventarComponent #585');\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.clickTyp$.pipe(filter(() => !this.instanceTyp.isPopupOpen()));\r\n    const inputFocus$ = this.focusTyp$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? artikelTypen\r\n        : artikelTypen.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  searchGroessen = (text$: Observable<string>) => {\r\n    console.log('EditInventarComponent #597');\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.clickGrs$.pipe(filter(() => !this.instanceGrs.isPopupOpen()));\r\n    const inputFocus$ = this.focusGrs$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? artikelGroessen\r\n        : artikelGroessen.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  searchFarben = (text$: Observable<string>) => {\r\n    console.log('EditInventarComponent #609', { text$ });\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.clickFa$.pipe(filter(() => !this.instanceFa.isPopupOpen()));\r\n    const inputFocus$ = this.focusFa$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? artikelFarben\r\n        : artikelFarben.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n    console.log('EditInventarComponent #618');\r\n  }\r\n\r\n  onInput(event?: Event) {\r\n    console.log('EditInventarComponent #621');\r\n    this.inputChanging.emit(event);\r\n  }\r\n\r\n  onChange(event?: Event) {\r\n    this.inputChanged.emit(event);\r\n  }\r\n\r\n  onSelectHersteller(selected) {\r\n    const foundHst = states.find( (st) => st.Hersteller === selected.item);\r\n    console.log('selected:', selected, 'selected.item: ', selected.item,\r\n      'foundHst:', foundHst);\r\n    this.inventarInput.huuid = (foundHst) ? foundHst.uuid : null;\r\n    console.log('this.artikelDaten.Hersteller: ', this.inventarInput.Hersteller, { selected });\r\n    this.herstellerChanged.emit(selected.item);\r\n  }\r\n\r\n  onChangeHersteller(event: Event) {\r\n    console.log('Hersteller changed', event);\r\n    if (event.target instanceof HTMLInputElement) {\r\n      this.herstellerChanged.emit((event.target as HTMLInputElement).value);\r\n    }\r\n  }\r\n\r\n  onSelectGruppe(selected) {\r\n    console.log('Gruppe selected', selected);\r\n    this.gruppeChanged.emit(selected.item);\r\n  }\r\n\r\n  onChangeGruppe(event: Event) {\r\n    console.log('Gruppe changed', event);\r\n    if (event.target instanceof HTMLInputElement) {\r\n      this.gruppeChanged.emit((event.target as HTMLInputElement).value);\r\n    }\r\n  }\r\n\r\n  onSelectKategorie(selected) {\r\n    console.log('Kategorien selected', selected);\r\n    this.inputChanged.emit();\r\n  }\r\n\r\n  onSelectTypen(selected) {\r\n    console.log('Typen selected', selected);\r\n    this.inputChanged.emit();\r\n  }\r\n\r\n  onSelectFarben(selected) {\r\n    console.log('Farben selected', selected);\r\n    this.inputChanged.emit();\r\n  }\r\n\r\n  onSelectGroessen(selected) {\r\n    console.log('Groessen selected', selected);\r\n    this.inputChanged.emit();\r\n  }\r\n\r\n  onPageChange(page: number) {\r\n    console.log('EditInventarComponent #678');\r\n    this.collectionSize = this.listExistingArticleMatches.length;\r\n    this.pageSize = 8;\r\n    const start = (page - 1) * this.pageSize;\r\n    const end = start + this.pageSize;\r\n    this.listExistingArticlePage = this.listExistingArticleMatches.slice(start, end);\r\n    console.log('#599 pagination goto page', page, '.slice(', start, end, ') of', this.collectionSize);\r\n  }\r\n\r\n  onSubmit(event) {\r\n    console.log( 'onSubmit', this.inventarInput );\r\n    this.save();\r\n  }\r\n\r\n}\r\n","export default \".input-group-text {\\n  min-width: 4rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2VkaXQtcmF1bS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxlZGl0LXJhdW1cXGVkaXQtcmF1bS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2VkaXQtcmF1bS9lZGl0LXJhdW0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDRSxlQUFBO0FDQUYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvZWRpdC1yYXVtL2VkaXQtcmF1bS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4uaW5wdXQtZ3JvdXAtdGV4dCB7XHJcbiAgbWluLXdpZHRoOiA0cmVtO1xyXG59XHJcbiIsIi5pbnB1dC1ncm91cC10ZXh0IHtcbiAgbWluLXdpZHRoOiA0cmVtO1xufSJdfQ== */\"","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\r\n\r\nimport { ModalDismissReasons, NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport { faCamera, faBarcode } from '@fortawesome/free-solid-svg-icons';\r\nimport { DBDIRaeume} from '../../../../shared/interfaces/dexie.interfaces';\r\nimport { RaumService, RaumBasisDaten } from '../../data-services/raum.service';\r\nimport {Observable} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, filter, map} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-edit-raum',\r\n  templateUrl: './edit-raum.component.html',\r\n  styleUrls: ['./edit-raum.component.scss']\r\n})\r\nexport class EditRaumComponent implements OnInit {\r\n  closeResult: string;\r\n  // faSearch = faSearch;\r\n  faBarcode = faBarcode;\r\n  faCamera = faCamera;\r\n  // faSignOutAlt = faSignOutAlt;\r\n\r\n  raumExistsStatus = -1;\r\n  bezeichnungExistsStatus = -1;\r\n  raumDaten: DBDIRaeume = null;\r\n  etagen: string[] = [];\r\n  validationErrors: string[] = [];\r\n\r\n  public raumInput: RaumBasisDaten = {\r\n    gid: 0,\r\n    Raum: '',\r\n    Raumbezeichnung: '',\r\n    Etage: '',\r\n    code: ''\r\n  };\r\n\r\n  formIsValid = false;\r\n  formError = '';\r\n\r\n  private uuid: string;\r\n  private gid: number;\r\n\r\n  @Output() raumSearching = new EventEmitter<number>();\r\n  @Output() raumChanged = new EventEmitter<DBDIRaeume>();\r\n  @Output() scannerRequest = new EventEmitter<HTMLElement>();\r\n\r\n\r\n  searchEtage = (text$: Observable<string>) => text$.pipe(\r\n    debounceTime(200),\r\n    distinctUntilChanged(),\r\n    filter(term => {\r\n      return term.length >= 0;\r\n    }),\r\n    map(term => {\r\n      // console.log('map and slice artikel by term', term, 'states', states);\r\n      const matches = this.etagen\r\n        .filter(item => new RegExp(term, 'mi').test(item) )\r\n        .slice(0, 10);\r\n      // console.log('search ', { term, matches, etagen: this.etagen });\r\n      return matches;\r\n    })\r\n  )\r\n\r\n  constructor(\r\n    // private modalService: NgbModal,\r\n    public activeModal: NgbActiveModal,\r\n    private raumService: RaumService\r\n  ) {}\r\n\r\n  private getDismissReason(reason: any): string {\r\n    if (reason === ModalDismissReasons.ESC) {\r\n      return 'by pressing ESC';\r\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\r\n      return 'by clicking on a backdrop';\r\n    } else {\r\n      return  `with: ${reason}`;\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  openScanner(target) {\r\n    this.scannerRequest.emit(target);\r\n  }\r\n\r\n  async formValidate(): Promise<boolean> {\r\n    console.log('called formValidate');\r\n    this.validationErrors.length = 0;\r\n    if (typeof this.raumInput.code === 'string' &&\r\n      this.raumInput.code.trim().length > 0 &&\r\n      this.raumInput.code !== this.raumDaten.code) {\r\n      const codeExists = await this.raumService.codeExistsInInventur(\r\n        this.raumDaten.for_jobid,\r\n        this.raumDaten.uuid,\r\n        this.raumInput.code\r\n      );\r\n      if (codeExists) {\r\n        this.validationErrors.push(\r\n          '#96 Raum-Barcode ist bereits fr einen anderen Raum vergeben!',\r\n          JSON.stringify({codeExists})\r\n        );\r\n      }\r\n    }\r\n    if (this.raumInput.Raum.trim().length > 0 && this.raumInput.Raum.trim() !== this.raumDaten.Raum) {\r\n      if (await this.raumService.raumExistsInInventur(\r\n        this.raumDaten.for_jobid,\r\n        this.raumDaten.uuid,\r\n        this.raumInput.Raum\r\n      )) {\r\n        this.validationErrors.push('Raum-Name ist bereits fr einen anderen Raum vergeben!');\r\n      }\r\n    }\r\n    this.formIsValid =\r\n      this.raumInput.Raum.length > 0\r\n      && this.validationErrors.length === 0;\r\n\r\n    console.log('called formValidate return ', this.formIsValid);\r\n    return this.formIsValid;\r\n  }\r\n\r\n  get raumUuid() {\r\n    console.log('called get raumId() ', this.uuid);\r\n    return this.uuid;\r\n  }\r\n\r\n  set raumUuid(uuid: string) {\r\n    console.log( 'called set raumId', 'param', uuid, 'old-uuid', this.uuid);\r\n    this.raumService.get( uuid ).then(raum => {\r\n      this.raumDaten = raum;\r\n      if (raum) {\r\n        this.uuid = raum.uuid;\r\n        for (const inputFld of Object.keys(this.raumInput) ) {\r\n          this.raumInput[inputFld] = raum[inputFld];\r\n        }\r\n        console.log('#128 edit-raum.component.ts set raumId(uuid: ' + uuid + ')', { raum, raumInput: { ...this.raumInput}});\r\n        this.etagen = [];\r\n        this.raumService.getEtagenByGidInInventur(this.raumDaten.for_jobid, this.raumDaten.gid).then( (etagen) => {\r\n          this.etagen = etagen;\r\n        });\r\n      } else {\r\n        this.uuid = '';\r\n      }\r\n    }).catch( () => {\r\n      this.raumDaten = null;\r\n      this.uuid = '';\r\n    });\r\n  }\r\n\r\n  async checkIfRaumExists(): Promise<boolean> {\r\n    console.log('check if raum exists');\r\n    this.raumExistsStatus = -1;\r\n    let raumExists = false;\r\n    await this.raumService\r\n      .raumExists( this.gid, this.raumInput.Raum )\r\n      .then( exists => {\r\n        this.raumExistsStatus = exists ? 1 : 0;\r\n        raumExists = exists;\r\n      });\r\n    await this.formValidate();\r\n    console.log('check if raum exists: ', raumExists);\r\n    return raumExists;\r\n  }\r\n\r\n  async checkIfRaumbezeichnungExists(): Promise<boolean> {\r\n    console.log('check if bezeichnung exists');\r\n    this.bezeichnungExistsStatus = -1;\r\n    let bezeichnungExists = false;\r\n    await this.raumService\r\n      .raumBezeichnungExists( this.gid, this.raumInput.Raumbezeichnung )\r\n      .then( exists => {\r\n        this.bezeichnungExistsStatus = exists ? 1 : 0;\r\n        bezeichnungExists = exists;\r\n      });\r\n    console.log('check if bezeichnung exists: ', bezeichnungExists);\r\n    return bezeichnungExists;\r\n  }\r\n\r\n  async save(): Promise<boolean> {\r\n    this.formError = '';\r\n    console.log('save raum ');\r\n    if (await this.formValidate()) {\r\n      console.log('save raumdaten ', this.raumInput);\r\n      for (const col of Object.keys(this.raumDaten)) {\r\n\r\n      }\r\n      const result = await this.raumService.updateByUuid( this.raumDaten.uuid, this.raumInput );\r\n      console.log('save raumdaten result ', result);\r\n      if (!result.success) {\r\n        this.formError = 'Daten konnten nicht aktualisiert werden!<br>' + result.errorMsg;\r\n        return false;\r\n      } else {\r\n        this.raumChanged.emit( result.item );\r\n        this.activeModal.close();\r\n        return true;\r\n      }\r\n    } else {\r\n      this.formError = 'Bitte die Angaben vervollstndigen, Raum darf noch nicht vergeben sein';\r\n    }\r\n  }\r\n\r\n  onSubmit(event) {\r\n    console.log( 'onSubmit', this.raumInput );\r\n    this.save();\r\n  }\r\n}\r\n","export default \".modal-header.modal-header-with-links {\\n  display: flex;\\n  flex-direction: row-reverse;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LWRvbmUvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxwYWdlc1xcaW52ZW50LWZvcm1cXG1vZGFsc1xcZ2VzYW10LWxpc3QtZG9uZVxcZ2VzYW10LWxpc3QtZG9uZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LWRvbmUvZ2VzYW10LWxpc3QtZG9uZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSwyQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LWRvbmUvZ2VzYW10LWxpc3QtZG9uZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xyXG59XHJcbiIsIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG59Il19 */\"","import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\nimport {NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport {BasedataService} from '../../../../shared/services/basedata.service';\r\nimport {RaumService, RaumStatusProgress} from '../../data-services/raum.service';\r\nimport {DBDIGebaeude} from '../../../../shared/interfaces/dexie.interfaces';\r\nimport {\r\n  faCheck,\r\n  faSpinner,\r\n  faBatteryEmpty,\r\n  faBatteryQuarter,\r\n  faBatteryHalf,\r\n  faBatteryThreeQuarters,\r\n  faBatteryFull,\r\n  faSignOutAlt,\r\n  faExchangeAlt\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\ninterface RaumStatusProgressWithIconName extends RaumStatusProgress {\r\n  statusIconName: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-gesamt-list-done',\r\n  templateUrl: './gesamt-list-done.component.html',\r\n  styleUrls: ['./gesamt-list-done.component.scss']\r\n})\r\nexport class GesamtListDoneComponent implements OnInit {\r\n  requestGesamtRest = new EventEmitter<DBDIGebaeude>();\r\n  gebaeudeDaten?: DBDIGebaeude;\r\n  raeumeListDone?: RaumStatusProgressWithIconName[];\r\n\r\n  // FA-Icons\r\n  faCheck = faCheck;\r\n  faInWork = faSpinner;\r\n  faEmpty = faBatteryEmpty;\r\n  faQuarter = faBatteryQuarter;\r\n  faHalf = faBatteryHalf;\r\n  faThreeQuarter = faBatteryThreeQuarters;\r\n  faFull = faBatteryFull;\r\n  faSignOutAlt = faSignOutAlt;\r\n  faExchangeAlt = faExchangeAlt;\r\n\r\n  @Output() raumSelected = new EventEmitter<string>();\r\n\r\n  constructor(\r\n    public activeModal: NgbActiveModal,\r\n    private baseData: BasedataService,\r\n    private raumData: RaumService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  set gebaeude(gebaeude: DBDIGebaeude) {\r\n    this.gebaeudeDaten = gebaeude;\r\n    this.loadGebaeudeStat();\r\n  }\r\n\r\n  onSelectRaum(uuid: string) {\r\n    this.raumSelected.emit( uuid );\r\n    this.activeModal.close();\r\n  }\r\n\r\n  getStatusIconNameByItem(item: RaumStatusProgress): string {\r\n    if (item.done === 0) {\r\n      return 'empty';\r\n    } else if (item.done >= item.total ) {\r\n      return 'full';\r\n    } else if (item.progress >= 75) {\r\n      return 'three-quarter';\r\n    } else if (item.progress >= 50) {\r\n      return 'half';\r\n    } else {\r\n      return 'quarter';\r\n    }\r\n  }\r\n\r\n  loadGebaeudeStat(useJobid?: number) {\r\n    const jobid = useJobid || this.baseData.getCurrentJobid();\r\n    this.raumData.getRaeumeStartedByGebaeudeId(this.gebaeudeDaten.gid, jobid).then( (list: RaumStatusProgress[]) => {\r\n      this.raeumeListDone = list\r\n        .map<RaumStatusProgressWithIconName>( (item) => {\r\n          item.progress = Math.ceil(item.progress < 99 || item.progress >= 100 ? item.progress : 99);\r\n          return {\r\n            ...item,\r\n            ...{ statusIconName: this.getStatusIconNameByItem(item) }\r\n          } as RaumStatusProgressWithIconName;\r\n        })\r\n        .sort( (a: RaumStatusProgress, b: RaumStatusProgress) => {\r\n          if (a.editStatus === b.editStatus && a.progress === b.progress) {\r\n            return a.Raum.toLowerCase() < b.Raum.toLowerCase() ? -1 : 1;\r\n          } else if (a.editStatus !== b.editStatus) {\r\n            return a.editStatus < b.editStatus ? -1 : 1;\r\n          } else {\r\n            return a.progress < b.progress ? -1 : 1;\r\n          }\r\n      });\r\n    });\r\n  }\r\n\r\n  showGesamtRestForm() {\r\n    console.log('click showGesamtToDoForm');\r\n    this.activeModal.close();\r\n    this.requestGesamtRest.emit( this.gebaeudeDaten );\r\n  }\r\n\r\n}\r\n","export default \".modal-header.modal-header-with-links {\\n  display: flex;\\n  flex-direction: row-reverse;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LXJlc3QvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxwYWdlc1xcaW52ZW50LWZvcm1cXG1vZGFsc1xcZ2VzYW10LWxpc3QtcmVzdFxcZ2VzYW10LWxpc3QtcmVzdC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LXJlc3QvZ2VzYW10LWxpc3QtcmVzdC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSwyQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL2dlc2FtdC1saXN0LXJlc3QvZ2VzYW10LWxpc3QtcmVzdC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xyXG59XHJcbiIsIi5tb2RhbC1oZWFkZXIubW9kYWwtaGVhZGVyLXdpdGgtbGlua3Mge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG59Il19 */\"","import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\nimport {NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport {BasedataService} from '../../../../shared/services/basedata.service';\r\nimport {RaumService, RaumStatusProgress} from '../../data-services/raum.service';\r\nimport {DBDIGebaeude} from '../../../../shared/interfaces/dexie.interfaces';\r\nimport { faSignOutAlt, faExchangeAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\n@Component({\r\n  selector: 'app-gesamt-list-rest',\r\n  templateUrl: './gesamt-list-rest.component.html',\r\n  styleUrls: ['./gesamt-list-rest.component.scss']\r\n})\r\nexport class GesamtListRestComponent implements OnInit {\r\n  requestGesamtDone = new EventEmitter<DBDIGebaeude>();\r\n  gebaeudeDaten?: DBDIGebaeude;\r\n  raeumeListDone?: RaumStatusProgress[];\r\n\r\n  @Output() raumSelected = new EventEmitter<string>();\r\n\r\n  faSignOutAlt = faSignOutAlt;\r\n  faExchangeAlt = faExchangeAlt;\r\n\r\n  constructor(\r\n    public activeModal: NgbActiveModal,\r\n    private baseData: BasedataService,\r\n    private raumData: RaumService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  set gebaeude(gebaeude: DBDIGebaeude) {\r\n    this.gebaeudeDaten = gebaeude;\r\n    this.loadGebaeudeStat();\r\n  }\r\n\r\n  onSelectRaum(ruuid: string) {\r\n    this.raumSelected.emit( ruuid );\r\n    this.activeModal.close();\r\n  }\r\n\r\n  loadGebaeudeStat(useJobid?: number) {\r\n    const jobid = useJobid || this.baseData.getCurrentJobid();\r\n    this.raumData.getRaeumeToDoByGebaeudeId(this.gebaeudeDaten.gid, jobid).then( (list: RaumStatusProgress[]) => {\r\n      this.raeumeListDone = list.sort( (a: RaumStatusProgress, b: RaumStatusProgress) => {\r\n        return a.Raum.toLowerCase() < b.Raum.toLowerCase() ? -1 : 1;\r\n      });\r\n    });\r\n  }\r\n\r\n  showGesamtDoneForm() {\r\n    console.log('click showGesamtToDoForm');\r\n    this.activeModal.close();\r\n    this.requestGesamtDone.emit( this.gebaeudeDaten );\r\n  }\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL21vZGFscy9pbWFnZWJveC9pbWFnZWJveC5jb21wb25lbnQuc2NzcyJ9 */\"","import {Component, ElementRef, OnInit, ViewChild} from '@angular/core';\r\nimport {\r\n  faArrowAltCircleLeft,\r\n  faArrowAltCircleRight,\r\n  faDotCircle,\r\n  faAngleLeft,\r\n  faAngleRight,\r\n  faTrashAlt\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport {DBDIImages} from '../../../../shared/interfaces/dexie.interfaces';\r\nimport {DexieService} from '../../../../shared/services/dexie.service';\r\nimport {NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport {ImagesService} from '../../data-services/images.service';\r\nimport {DomSanitizer, SafeUrl} from '@angular/platform-browser';\r\nimport {VariablesService} from '../../../../shared/services/variables.service';\r\nimport {ToastrService} from 'ngx-toastr';\r\n\r\nenum HtmlImageLoadingStatus {\r\n  Pending,\r\n  Loading,\r\n  Aborted,\r\n  Loaded,\r\n  NotFound,\r\n  Error\r\n}\r\n\r\ninterface HtmlImageWithStatus {\r\n  uuid: string;\r\n  name?: string;\r\n  width?: number;\r\n  height?: number;\r\n  type?: string;\r\n  titel?: string;\r\n  desc?: string;\r\n  img?: HTMLImageElement;\r\n  loadingStatus: HtmlImageLoadingStatus;\r\n  isDeletable: boolean;\r\n  isEditable: boolean;\r\n  error?: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-imagebox',\r\n  templateUrl: './imagebox.component.html',\r\n  styleUrls: ['./imagebox.component.scss']\r\n})\r\nexport class ImageboxComponent implements OnInit {\r\n\r\n  @ViewChild('currentImage', { static: true })\r\n  public currentImage: ElementRef;\r\n\r\n  faAngleLeft = faAngleLeft;\r\n  faAngleRight = faAngleRight;\r\n  faArrowLeft = faArrowAltCircleLeft;\r\n  faArrowRight = faArrowAltCircleRight;\r\n  faDot = faDotCircle;\r\n  faTrashAlt = faTrashAlt;\r\n\r\n  titel = '';\r\n  htmlImageLoadingStatus = HtmlImageLoadingStatus;\r\n  images: HtmlImageWithStatus[] = [];\r\n  imageUuidList: string[] = [];\r\n  numImages = 0;\r\n  numImgFound = 0;\r\n  numImgFinished = 0;\r\n  numImgLoaded = 0;\r\n  currImgIdx = 0;\r\n  finishedLoading = false;\r\n  currImg?: HtmlImageWithStatus = null;\r\n  prevImg?: HtmlImageWithStatus = null;\r\n  nextImg?: HtmlImageWithStatus = null;\r\n  error = '';\r\n\r\n  constructor(private dexie: DexieService,\r\n              private imgService: ImagesService,\r\n              public activeModal: NgbActiveModal,\r\n              private domSanitizer: DomSanitizer,\r\n              private toastr: ToastrService) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  setTitel(titel: string) {\r\n    this.titel = titel;\r\n  }\r\n\r\n  async setImagesUuids(uuids: string[], currIdx: number = 0) {\r\n    console.log('ImageboxComponent.setImagesUuids #65', { uuids, currIdx });\r\n    this.currImg = null;\r\n    this.prevImg = null;\r\n    this.nextImg = null;\r\n    this.imageUuidList = uuids;\r\n    this.numImages = this.imageUuidList.length;\r\n    if (currIdx < 0 ) {\r\n      this.currImgIdx = 0;\r\n    } else if (currIdx > this.numImages - 1) {\r\n      this.currImgIdx = this.numImages - 1;\r\n    } else {\r\n      this.currImgIdx = currIdx;\r\n    }\r\n    this.images.length = 0;\r\n    this.images.length = this.imageUuidList.length;\r\n    this.images.fill(null);\r\n\r\n    console.log('ImageboxComponent.setImagesUuids #82 loadImage', { currIdx });\r\n    await this.loadImage(currIdx)\r\n      .catch( reason => {\r\n        console.error('Could not load Image', { reason });\r\n      })\r\n      .then( (success) => {\r\n        console.log('#86 loadImage(', currIdx, ') successful');\r\n      });\r\n\r\n    if (this.numImages > 1) {\r\n      console.log('ImageboxComponent.setImagesUuids #82 loadImages');\r\n      await this.loadImages()\r\n        .catch( reason => {\r\n          console.error('#92 Could not load all Images', { reason });\r\n        }).then( (result) => {\r\n          console.log('#94 loaded all Images in List by loadImages() successful', { result });\r\n        });\r\n    }\r\n    this.finishedLoading = true;\r\n  }\r\n\r\n  async loadImages(): Promise<number> {\r\n    const dbImages = this.dexie.images;\r\n    const thisImages = this.images;\r\n    const numUuids = this.imageUuidList.length;\r\n    let numResults = 0;\r\n    let numFound = 0;\r\n    let numFinished = 0;\r\n    let numLoaded = 0;\r\n    return new Promise( (resolve, reject) => {\r\n      const checkResolve = () => {\r\n        console.log('ImageboxComponent.setImagesUuids #102 loadImages checkResolve',\r\n          numResults, numUuids, numFinished, numFound, numLoaded);\r\n        if (numResults === numUuids && numFinished === numFound) {\r\n          console.log('ImageboxComponent.setImagesUuids #104 loadImages checkResolve');\r\n          if (numFound === numUuids) {\r\n            console.log('ImageboxComponent.setImagesUuids #106 loadImages checkResolve resolve');\r\n            resolve(numLoaded);\r\n          } else {\r\n            console.log('ImageboxComponent.setImagesUuids #109 loadImages checkResolve reject');\r\n            reject(numLoaded);\r\n          }\r\n        }\r\n      };\r\n      this.imageUuidList.map((uuid, idx) => {\r\n        console.log('ImageboxComponent #124', { uuid, idx }, thisImages[idx]);\r\n        if (thisImages[idx] !== null\r\n          && typeof thisImages[idx] === 'object'\r\n          && 'loadingStatus' in thisImages[idx]\r\n          && thisImages[idx].loadingStatus === HtmlImageLoadingStatus.Loaded) {\r\n          ++numResults;\r\n          ++numLoaded;\r\n          return;\r\n        }\r\n        dbImages.get(uuid)\r\n          .then(row => {\r\n            ++numResults;\r\n            if (!row) {\r\n              thisImages[idx] = {\r\n                uuid,\r\n                img: null,\r\n                loadingStatus: HtmlImageLoadingStatus.NotFound,\r\n                isDeletable: true,\r\n                isEditable: true\r\n              };\r\n              checkResolve();\r\n              return;\r\n            }\r\n            ++numFound;\r\n            console.log('ImageboxComponent #145', idx, thisImages[idx]);\r\n            if (thisImages[idx] !== null\r\n              && typeof thisImages[idx] === 'object'\r\n              && 'loadingStatus' in thisImages[idx]\r\n              && thisImages[idx].loadingStatus === HtmlImageLoadingStatus.Loaded) {\r\n              ++numLoaded;\r\n              checkResolve();\r\n              return;\r\n            }\r\n            ++this.numImgFound;\r\n            thisImages[idx] = {\r\n              uuid,\r\n              name: row.name,\r\n              width: row.width,\r\n              height: row.height,\r\n              type: row.type,\r\n              desc: row.desc,\r\n              loadingStatus: HtmlImageLoadingStatus.Loading,\r\n              isDeletable: true,\r\n              isEditable: true,\r\n              img: new Image()\r\n            };\r\n            thisImages[idx].img.onload = (ev) => {\r\n              ++numFinished;\r\n              ++numLoaded;\r\n              ++this.numImgLoaded;\r\n              ++this.numImgFinished;\r\n              thisImages[idx].loadingStatus = HtmlImageLoadingStatus.Loaded;\r\n              console.log('successfull loaded ' + idx + '=' + thisImages[idx].img.src);\r\n              checkResolve();\r\n            };\r\n            thisImages[idx].img.onerror = (ev) => {\r\n              ++numFinished;\r\n              ++this.numImgFinished;\r\n              thisImages[idx].loadingStatus = HtmlImageLoadingStatus.Error;\r\n              checkResolve();\r\n            };\r\n            thisImages[idx].img.onabort = (ev) => {\r\n              ++numFinished;\r\n              ++this.numImgFinished;\r\n              thisImages[idx].loadingStatus = HtmlImageLoadingStatus.Aborted;\r\n              checkResolve();\r\n            };\r\n            thisImages[idx].img.src = row.data_url.replace(/(\\r\\n|\\n|\\r)/gm, '');\r\n          }).catch(reason => {\r\n            ++numResults;\r\n            ++this.numImgFinished;\r\n            thisImages[idx].loadingStatus = HtmlImageLoadingStatus.NotFound;\r\n            checkResolve();\r\n        });\r\n      });\r\n      checkResolve();\r\n    });\r\n  }\r\n\r\n  prev() {\r\n    this.loadImage(this.currImgIdx - 1);\r\n  }\r\n\r\n  next() {\r\n    this.loadImage(this.currImgIdx + 1);\r\n  }\r\n\r\n  async delete(imgUuid: string) {\r\n    // let delUuid = imgUuid;\r\n    console.log('ImageboxComponent.delete() #236 this.images.length:', this.images.length);\r\n    const idx = this.imageUuidList.indexOf(imgUuid);\r\n    let numDeleted = 0;\r\n\r\n    if (idx === -1) {\r\n      console.error('ImageboxComponent.delete(' + imgUuid + ') #230 Image not found');\r\n      // alert('Bild kann nicht gelscht werden. Unbekannte Bild-ID: ' + imgUuid);\r\n      this.toastr.error('Fehler beim Lschen: Unbekannte Bild-ID ' + imgUuid);\r\n      return;\r\n    }\r\n\r\n    if (!confirm('Mchten Sie das Bild wirklich lschen?')) {\r\n      return false;\r\n    }\r\n\r\n    if (imgUuid) {\r\n      numDeleted = await this.imgService.deleteByUuid(imgUuid);\r\n      if (numDeleted) {\r\n        this.toastr.success('Bild wurde gelscht ' + imgUuid);\r\n      }\r\n    }\r\n\r\n    if (!numDeleted) {\r\n      console.error('ImageboxComponent.delete(' + imgUuid + ') #247 wurde nicht gelscht');\r\n      this.toastr.error('Bild konnte nicht gelscht werden. Bild-ID: ' + imgUuid, 'Fehler');\r\n      return;\r\n    }\r\n\r\n    const len = this.imageUuidList.length;\r\n    const newLen = len - 1;\r\n    for (let i = idx; i < len; ++i) {\r\n      if (i < newLen) {\r\n        this.imageUuidList[i] = this.imageUuidList[i + 1];\r\n        this.images[i] = this.images[i + 1];\r\n      }\r\n    }\r\n    this.imageUuidList.length = newLen;\r\n    this.images.length = newLen;\r\n    this.numImages = newLen;\r\n\r\n    if (idx < this.images.length && this.images[idx]) {\r\n      this.currImgIdx = idx;\r\n      this.currImg = this.images[idx];\r\n    } else if (this.images.length > 0) {\r\n      this.currImgIdx = this.images.length - 1;\r\n      this.currImg = this.images[ this.currImgIdx ];\r\n    } else {\r\n      this.currImg = null;\r\n      this.currImgIdx = 0;\r\n    }\r\n  }\r\n\r\n  async loadImage(imgIdx: number): Promise<boolean> {\r\n    console.log('ImageboxComponent.setImagesUuids #195 loadImage(', imgIdx, ')');\r\n    return new Promise( (resolve, reject) => {\r\n      if (imgIdx < 0) {\r\n        imgIdx = this.numImages - 1;\r\n      } else if (imgIdx > this.numImages - 1) {\r\n        imgIdx = 0;\r\n      }\r\n      if (!this.imageUuidList[imgIdx]) {\r\n        // Error\r\n        this.error = 'Mit dem Index ' + imgIdx + ' ist keine Datei hinterlegt!';\r\n        console.log('ImageboxComponent.setImagesUuids #205 loadImage(', imgIdx, ') reject');\r\n        reject(false);\r\n        return null;\r\n      }\r\n      console.log('ImageboxComponent #220', imgIdx, this.images[imgIdx]);\r\n      if (this.images[imgIdx] !== null\r\n        && typeof this.images[imgIdx] === 'object'\r\n        && 'img' in this.images[imgIdx]\r\n        && 'loadingStatus' in this.images[imgIdx]\r\n        && this.images[imgIdx].loadingStatus === HtmlImageLoadingStatus.Loaded\r\n      ) {\r\n        this.currImgIdx = imgIdx;\r\n        this.currImg = this.images[imgIdx];\r\n        console.log('ImageboxComponent.setImagesUuids #215 loadImage(', imgIdx, ') resolve');\r\n        resolve(true);\r\n        return;\r\n      }\r\n\r\n      const uuid = this.imageUuidList[imgIdx];\r\n      if (this.images[imgIdx] === null) {\r\n        this.images[imgIdx] = {\r\n          uuid,\r\n          img: null,\r\n          loadingStatus: HtmlImageLoadingStatus.Pending,\r\n          isDeletable: true,\r\n          isEditable: true\r\n        };\r\n      } else {\r\n        this.images[imgIdx].loadingStatus = HtmlImageLoadingStatus.Pending;\r\n      }\r\n      this.dexie.images.where({uuid}).first()\r\n        .then( row => {\r\n          if (!row) {\r\n            this.error = 'In der Datenbank wurde kein Bild mit UUID ' + uuid + ' gefunden!';\r\n            return;\r\n          }\r\n          ++this.numImgFound;\r\n          this.images[imgIdx] = {\r\n            uuid,\r\n            name: row.name,\r\n            width: row.width,\r\n            height: row.height,\r\n            type: row.type,\r\n            desc: row.desc,\r\n            loadingStatus: HtmlImageLoadingStatus.Loading,\r\n            isDeletable: true,\r\n            isEditable: true,\r\n            img: new Image()\r\n          };\r\n          this.images[imgIdx].img.onload = (ev) => {\r\n            ++this.numImgLoaded;\r\n            ++this.numImgFinished;\r\n            this.currImgIdx = imgIdx;\r\n            this.currImg = this.images[imgIdx];\r\n            this.images[imgIdx].loadingStatus = HtmlImageLoadingStatus.Loaded;\r\n            console.log('ImageboxComponent.setImagesUuids #237 loadImage(', imgIdx, ') resolve');\r\n            console.log('successfull loaded ' + imgIdx + '=' + this.images[imgIdx].img.src);\r\n            resolve(true);\r\n          };\r\n          this.images[imgIdx].img.onerror = (ev) => {\r\n            ++this.numImgFinished;\r\n            this.images[imgIdx].loadingStatus = HtmlImageLoadingStatus.Error;\r\n            this.error = 'Bild ' + row.name + ' konnte nicht geladen werden!';\r\n            console.error('ImageboxComponent.setImagesUuids #243 loadImage(', imgIdx, ') reject');\r\n            console.error('row.data_url = ', row.data_url);\r\n            console.error(ev);\r\n            reject(false);\r\n          };\r\n          this.images[imgIdx].img.onabort = (ev) => {\r\n            ++this.numImgFinished;\r\n            this.images[imgIdx].loadingStatus = HtmlImageLoadingStatus.Aborted;\r\n            this.error = 'Der Ladeprozess fr das Bild ' + row.name + ' wurde abgebrochen!';\r\n            console.error('ImageboxComponent.setImagesUuids #249 loadImage(', imgIdx, ') reject');\r\n            console.error(ev);\r\n            reject(false);\r\n          };\r\n          this.images[imgIdx].img.src = row.data_url.replace(/(\\r\\n|\\n|\\r)/gm, '');\r\n          // this.images[imgIdx].loadingStatus = HtmlImageLoadingStatus.Loaded;\r\n        })\r\n        .catch(reason => {\r\n          this.error = 'DB(Dexie) Afragefehler ' + JSON.stringify(reason || '');\r\n          console.error('#288 this.dexie.images.get(', uuid , ')');\r\n          console.error(reason);\r\n          reject(false);\r\n        });\r\n    });\r\n  }\r\n\r\n}\r\n","export default \".modal-header.modal-header-with-links {\\n  flex-direction: row-reverse;\\n  display: flex;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3JhdW0tbGlzdC1kb25lL0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxccGFnZXNcXGludmVudC1mb3JtXFxtb2RhbHNcXHJhdW0tbGlzdC1kb25lXFxyYXVtLWxpc3QtZG9uZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3JhdW0tbGlzdC1kb25lL3JhdW0tbGlzdC1kb25lLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsMkJBQUE7RUFDQSxhQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvcmF1bS1saXN0LWRvbmUvcmF1bS1saXN0LWRvbmUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XHJcbiAgZGlzcGxheTogZmxleDtcclxufVxyXG4iLCIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xuICBkaXNwbGF5OiBmbGV4O1xufSJdfQ== */\"","import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\nimport {DBDIRaeume} from '../../../../shared/interfaces/dexie.interfaces';\r\nimport {InventarService} from '../../data-services/inventar.service';\r\nimport {InventarData} from '../../../../shared/services/data.service';\r\nimport {NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport {BasedataService} from '../../../../shared/services/basedata.service';\r\n\r\nimport { faSignOutAlt, faExchangeAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\ninterface RaumInventarDone {\r\n  mcuuid?: string;\r\n  Bezeichnung?: string;\r\n  Typ?: string;\r\n  Menge?: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-raum-list-done',\r\n  templateUrl: './raum-list-done.component.html',\r\n  styleUrls: ['./raum-list-done.component.scss']\r\n})\r\nexport class RaumListDoneComponent implements OnInit {\r\n\r\n  @Output() requestRestList = new EventEmitter<DBDIRaeume>();\r\n\r\n  faSignOutAlt = faSignOutAlt;\r\n  faExchangeAlt = faExchangeAlt;\r\n\r\n  inventarListDone: RaumInventarDone[] = [];\r\n  inventarListGrouped: RaumInventarDone[] = [];\r\n  inventarDetailList: InventarData[] = [];\r\n  raumDaten?: DBDIRaeume;\r\n\r\n  total = 0;\r\n  pageNr = 1;\r\n  pageSize = 0;\r\n  totalPages = 0;\r\n\r\n  constructor(\r\n    public activeModal: NgbActiveModal,\r\n    private inventarService: InventarService,\r\n    private baseData: BasedataService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  set raum(raum: DBDIRaeume) {\r\n    this.raumDaten = raum;\r\n    this.loadInventarByRuuid(raum.uuid).then( () => {\r\n      this.setPage(1);\r\n    });\r\n  }\r\n\r\n  setPage(pageNr: number, pageSize?: number) {\r\n    this.total = this.inventarListGrouped.length;\r\n    this.pageSize = Math.max(1, Math.min(this.total, pageSize || this.pageSize || this.total));\r\n    this.totalPages = Math.ceil(this.total / this.pageSize);\r\n    this.pageNr = Math.min(this.totalPages, Math.max(1, pageNr));\r\n\r\n    this.inventarListDone = this.inventarListGrouped\r\n      .slice( Math.max(0, this.pageNr - 1) * this.pageSize, this.pageSize );\r\n  }\r\n\r\n  async loadInventarByRuuid(ruuid: string, useJobid?: number): Promise<boolean> {\r\n    const jobid = useJobid || this.baseData.getCurrentJobid();\r\n    const groupedList: RaumInventarDone[] = [];\r\n    console.log('#54 getHello:', this.inventarService.getHello());\r\n    return this.inventarService.getInventarListDoneByRaumUuid( ruuid, jobid )\r\n      .then( list => {\r\n        this.inventarDetailList = list;\r\n        console.log('loadInventarByRuuid #70 list: ', list);\r\n        this.inventarListGrouped = this.inventarDetailList\r\n          .sort(\r\n            (a, b) => a.inventar.mcuuid > b.inventar.mcuuid ? -1\r\n              : (a.inventar.mcuuid < b.inventar.mcuuid ? 1 : 0)\r\n          )\r\n          .reduce<RaumInventarDone[]>( (gList, item) => {\r\n            console.log('loadInventarByRuuid #70 reduce list, currentItem ', item);\r\n            if (!item) {\r\n              return gList;\r\n            }\r\n            const l = gList.length;\r\n            const i = l - 1;\r\n            const artikelData = item.artikelData || { Bezeichnung: '?[Fehlende Katalogdaten]', Typ: '' };\r\n            if (!l || gList[i].mcuuid !== item.inventar.mcuuid) {\r\n              gList[l] = {\r\n                mcuuid: item.inventar.mcuuid,\r\n                Bezeichnung: artikelData.Bezeichnung || '',\r\n                Typ: item.inventar.Typ || artikelData.Typ || '',\r\n                Menge: 1\r\n              };\r\n            } else {\r\n              gList[i].Menge++;\r\n            }\r\n            return gList;\r\n          }, groupedList);\r\n        return true;\r\n      });\r\n  }\r\n\r\n  showRaumRestForm(e) {\r\n    console.log('click showRaumDoneForm');\r\n    this.activeModal.close();\r\n    this.requestRestList.emit( this.raumDaten );\r\n  }\r\n\r\n}\r\n","export default \".modal-header.modal-header-fb-align-right {\\n  flex-direction: row-reverse;\\n  display: flex;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3JhdW0tbGlzdC1yZXN0L0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxccGFnZXNcXGludmVudC1mb3JtXFxtb2RhbHNcXHJhdW0tbGlzdC1yZXN0XFxyYXVtLWxpc3QtcmVzdC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3JhdW0tbGlzdC1yZXN0L3JhdW0tbGlzdC1yZXN0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsMkJBQUE7RUFDQSxhQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9pbnZlbnQtZm9ybS9tb2RhbHMvcmF1bS1saXN0LXJlc3QvcmF1bS1saXN0LXJlc3QuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci1mYi1hbGlnbi1yaWdodCB7XHJcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbn1cclxuIiwiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItZmItYWxpZ24tcmlnaHQge1xuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG4gIGRpc3BsYXk6IGZsZXg7XG59Il19 */\"","import {Component, Directive, EventEmitter, OnInit, Output} from '@angular/core';\r\nimport {DBDIInventar, DBDIRaeume} from '../../../../shared/interfaces/dexie.interfaces';\r\nimport {InventarService} from '../../data-services/inventar.service';\r\nimport {InventarData} from '../../../../shared/services/data.service';\r\nimport {NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport {BasedataService} from '../../../../shared/services/basedata.service';\r\nimport { faSignOutAlt, faExchangeAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\ninterface RaumInventarRest {\r\n  mcuuid: string;\r\n  Bezeichnung?: string;\r\n  Typ?: string;\r\n  Menge?: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-raum-list-rest',\r\n  templateUrl: './raum-list-rest.component.html',\r\n  styleUrls: ['./raum-list-rest.component.scss']\r\n})\r\nexport class RaumListRestComponent implements OnInit {\r\n\r\n  @Output() requestDoneList = new EventEmitter<DBDIRaeume>();\r\n\r\n  faSignOutAlt = faSignOutAlt;\r\n  faExchangeAlt = faExchangeAlt;\r\n\r\n  inventarListRest: RaumInventarRest[] = [];\r\n  inventarListGrouped: RaumInventarRest[] = [];\r\n  inventarDetailList: InventarData[] = [];\r\n  raumDaten?: DBDIRaeume;\r\n\r\n  total = 0;\r\n  pageNr = 1;\r\n  pageSize = 0;\r\n  totalPages = 0;\r\n\r\n  constructor(\r\n    public activeModal: NgbActiveModal,\r\n    private inventarService: InventarService,\r\n    private baseData: BasedataService) { }\r\n\r\n  ngOnInit() {\r\n    console.log('typeof this.activeModal.dismiss: ', this.activeModal.dismiss );\r\n  }\r\n\r\n  set raum(raum: DBDIRaeume) {\r\n    this.raumDaten = raum;\r\n    if (raum === null || raum === undefined || (typeof raum === 'object' && !('uuid' in raum))) {\r\n      // Do Nothing\r\n      return;\r\n    }\r\n    this.loadInventarByRuuid(raum.uuid).then( () => {\r\n      this.setPage(1);\r\n    });\r\n  }\r\n\r\n  setPage(pageNr: number, pageSize?: number) {\r\n    this.total = this.inventarListGrouped.length;\r\n    this.pageSize = Math.max(1, Math.min(this.total, pageSize || this.pageSize || this.total));\r\n    this.totalPages = Math.ceil(this.total / this.pageSize);\r\n    this.pageNr = Math.min(this.totalPages, Math.max(1, pageNr));\r\n\r\n    this.inventarListRest = this.inventarListGrouped\r\n      .slice( Math.max(0, this.pageNr - 1) * this.pageSize, this.pageSize );\r\n  }\r\n\r\n  async loadInventarByRuuid(ruuid: string, useJobid?: number): Promise<boolean> {\r\n    const jobid = useJobid || this.baseData.getCurrentJobid();\r\n    const groupedList: RaumInventarRest[] = [];\r\n    console.log('#54 getHello:', this.inventarService.getHello());\r\n    return this.inventarService.getInventarListRestByRaumUuid( ruuid, jobid )\r\n      .then( list => {\r\n        this.inventarDetailList = list;\r\n        this.inventarListGrouped = this.inventarDetailList\r\n          .sort(\r\n          (a, b) => a.inventar.mcuuid > b.inventar.mcuuid ? -1\r\n            : (a.inventar.mcuuid < b.inventar.mcuuid ? 1 : 0)\r\n          )\r\n          .reduce<RaumInventarRest[]>( (gList, item) => {\r\n            const l = gList.length;\r\n            const i = l - 1;\r\n            if (!l || gList[i].mcuuid !== item.inventar.mcuuid) {\r\n              gList[l] = {\r\n                mcuuid: item.inventar.mcuuid,\r\n                Bezeichnung: item.inventar.Bezeichnung || item.artikelData.Bezeichnung,\r\n                Typ: item.inventar.Typ || item.artikelData.Typ,\r\n                Menge: 1\r\n              };\r\n            } else {\r\n              gList[i].Menge++;\r\n            }\r\n            return gList;\r\n          }, groupedList);\r\n        return true;\r\n      });\r\n  }\r\n\r\n  showRaumDoneForm(e) {\r\n    console.log('click showRaumDoneForm');\r\n    this.activeModal.close();\r\n    this.requestDoneList.emit( this.raumDaten );\r\n  }\r\n\r\n}\r\n","export default \"input.bg-danger::-moz-placeholder {\\n  color: #ffffff;\\n}\\n\\ninput.bg-danger::placeholder {\\n  color: #ffffff;\\n}\\n\\n.scanner-view-port {\\n  position: relative;\\n  height: auto;\\n  overflow-y: hidden;\\n  width: 100%;\\n}\\n\\nzxing-scanner::ng-deep video {\\n  height: 5rem;\\n  width: 100%;\\n}\\n\\n#ScannerFocusRedLine {\\n  position: absolute;\\n  left: 5%;\\n  width: 90%;\\n  top: 50%;\\n  border: 0;\\n  border-top: 1rem solid rgba(255, 0, 0, 0.5);\\n  margin-top: -0.5rem;\\n}\\n\\n#barcodeChangedPart {\\n  color: blue;\\n}\\n\\n.with-pulse-effect {\\n  -webkit-animation: enter-animation 2s ease;\\n          animation: enter-animation 2s ease;\\n}\\n\\n@-webkit-keyframes enter-animation {\\n  0% {\\n    box-shadow: 0px 0px 0px 0px #2382dc;\\n    color: black;\\n  }\\n  100% {\\n    box-shadow: 0px 0px 5px 25px rgba(35, 130, 220, 0);\\n    color: blue;\\n  }\\n}\\n\\n@keyframes enter-animation {\\n  0% {\\n    box-shadow: 0px 0px 0px 0px #2382dc;\\n    color: black;\\n  }\\n  100% {\\n    box-shadow: 0px 0px 5px 25px rgba(35, 130, 220, 0);\\n    color: blue;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NjYW5uZXIvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxwYWdlc1xcaW52ZW50LWZvcm1cXG1vZGFsc1xcc2Nhbm5lclxcc2Nhbm5lci5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NjYW5uZXIvc2Nhbm5lci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGNBQUE7QUNBRjs7QUREQTtFQUNFLGNBQUE7QUNBRjs7QURHQTtFQUNFLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsV0FBQTtBQ0FGOztBREdBO0VBQ0UsWUFBQTtFQUNBLFdBQUE7QUNBRjs7QURHQTtFQUNFLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLDJDQUFBO0VBQ0EsbUJBQUE7QUNBRjs7QURHQTtFQUNFLFdBQUE7QUNBRjs7QURHQTtFQUNFLDBDQUFBO1VBQUEsa0NBQUE7QUNBRjs7QURJQTtFQUNFO0lBQ0UsbUNBQUE7SUFDQSxZQUFBO0VDREY7RURHQTtJQUNFLGtEQUFBO0lBQ0EsV0FBQTtFQ0RGO0FBQ0Y7O0FEUEE7RUFDRTtJQUNFLG1DQUFBO0lBQ0EsWUFBQTtFQ0RGO0VER0E7SUFDRSxrREFBQTtJQUNBLFdBQUE7RUNERjtBQUNGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NjYW5uZXIvc2Nhbm5lci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5pbnB1dC5iZy1kYW5nZXI6OnBsYWNlaG9sZGVyIHtcclxuICBjb2xvcjogI2ZmZmZmZjtcclxufVxyXG5cclxuLnNjYW5uZXItdmlldy1wb3J0IHtcclxuICBwb3NpdGlvbjpyZWxhdGl2ZTtcclxuICBoZWlnaHQ6YXV0bztcclxuICBvdmVyZmxvdy15OmhpZGRlbjtcclxuICB3aWR0aDoxMDAlO1xyXG59XHJcblxyXG56eGluZy1zY2FubmVyOjpuZy1kZWVwIHZpZGVvIHtcclxuICBoZWlnaHQ6NXJlbTtcclxuICB3aWR0aDoxMDAlO1xyXG59XHJcblxyXG4jU2Nhbm5lckZvY3VzUmVkTGluZSB7XHJcbiAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgbGVmdDo1JTtcclxuICB3aWR0aDo5MCU7XHJcbiAgdG9wOjUwJTtcclxuICBib3JkZXI6MDtcclxuICBib3JkZXItdG9wOjFyZW0gc29saWQgcmdiYSgyNTUsMCwwLC41KTtcclxuICBtYXJnaW4tdG9wOi0wLjVyZW1cclxufVxyXG5cclxuI2JhcmNvZGVDaGFuZ2VkUGFydCB7XHJcbiAgY29sb3I6Ymx1ZTtcclxufVxyXG5cclxuLndpdGgtcHVsc2UtZWZmZWN0IHtcclxuICBhbmltYXRpb246IGVudGVyLWFuaW1hdGlvbiAycyBlYXNlO1xyXG59XHJcblxyXG5cclxuQGtleWZyYW1lcyBlbnRlci1hbmltYXRpb24ge1xyXG4gIDAlIHtcclxuICAgIGJveC1zaGFkb3c6IDBweCAwcHggMHB4IDBweCByZ2JhKDM1LCAxMzAsIDIyMCwxKTtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICB9XHJcbiAgMTAwJSB7XHJcbiAgICBib3gtc2hhZG93OiAwcHggMHB4IDVweCAyNXB4IHJnYmEoMzUsIDEzMCwgMjIwLDApO1xyXG4gICAgY29sb3I6IGJsdWU7XHJcbiAgfVxyXG59XHJcbiIsImlucHV0LmJnLWRhbmdlcjo6cGxhY2Vob2xkZXIge1xuICBjb2xvcjogI2ZmZmZmZjtcbn1cblxuLnNjYW5uZXItdmlldy1wb3J0IHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBoZWlnaHQ6IGF1dG87XG4gIG92ZXJmbG93LXk6IGhpZGRlbjtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbnp4aW5nLXNjYW5uZXI6Om5nLWRlZXAgdmlkZW8ge1xuICBoZWlnaHQ6IDVyZW07XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4jU2Nhbm5lckZvY3VzUmVkTGluZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogNSU7XG4gIHdpZHRoOiA5MCU7XG4gIHRvcDogNTAlO1xuICBib3JkZXI6IDA7XG4gIGJvcmRlci10b3A6IDFyZW0gc29saWQgcmdiYSgyNTUsIDAsIDAsIDAuNSk7XG4gIG1hcmdpbi10b3A6IC0wLjVyZW07XG59XG5cbiNiYXJjb2RlQ2hhbmdlZFBhcnQge1xuICBjb2xvcjogYmx1ZTtcbn1cblxuLndpdGgtcHVsc2UtZWZmZWN0IHtcbiAgYW5pbWF0aW9uOiBlbnRlci1hbmltYXRpb24gMnMgZWFzZTtcbn1cblxuQGtleWZyYW1lcyBlbnRlci1hbmltYXRpb24ge1xuICAwJSB7XG4gICAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggMHB4ICMyMzgyZGM7XG4gICAgY29sb3I6IGJsYWNrO1xuICB9XG4gIDEwMCUge1xuICAgIGJveC1zaGFkb3c6IDBweCAwcHggNXB4IDI1cHggcmdiYSgzNSwgMTMwLCAyMjAsIDApO1xuICAgIGNvbG9yOiBibHVlO1xuICB9XG59Il19 */\"","import {Component, ElementRef, EventEmitter, OnInit, VERSION, ViewChild} from '@angular/core';\r\nimport {NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport BarcodeFormat from '@zxing/library/esm/core/BarcodeFormat';\r\nimport {BehaviorSubject} from 'rxjs';\r\nimport {DataService} from '../../../../shared/services/data.service';\r\nimport {BarcodeService} from '../../data-services/barcode.service';\r\nimport {BarcodeLookupSimpleResult, DBDIImages, LookupResultTable} from '../../../../shared/interfaces/dexie.interfaces';\r\nimport {faTrashAlt, faCheck} from '@fortawesome/free-solid-svg-icons';\r\nimport {ImagesService} from '../../data-services/images.service';\r\nimport {ZXingScannerComponent} from '@zxing/ngx-scanner';\r\nimport {BasedataService} from '../../../../shared/services/basedata.service';\r\nimport {VariablesService} from \"../../../../shared/services/variables.service\";\r\n\r\nexport interface ScannerBarcodeData {\r\n  barcode?: string;\r\n  length?: number;\r\n  valid?: boolean;\r\n  result?: BarcodeLookupSimpleResult;\r\n}\r\nexport enum bcLookupTyp {\r\n  Neu,\r\n  Unbekannt,\r\n  Raum,\r\n  Artikel,\r\n  Inventar\r\n}\r\n\r\ninterface ScanResultItem {\r\n  barcode: string;\r\n  typ?: bcLookupTyp;\r\n  typToString?: string;\r\n  infos?: string;\r\n  image?: DBDIImages;\r\n  result?: BarcodeLookupSimpleResult;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-scanner',\r\n  templateUrl: './scanner.component.html',\r\n  styleUrls: ['./scanner.component.scss'],\r\n  animations: [\r\n  ]\r\n})\r\nexport class ScannerComponent implements OnInit {\r\n  ngVersion = VERSION.full;\r\n\r\n  faCheck = faCheck;\r\n  faRemove = faTrashAlt;\r\n\r\n  availableDevices: MediaDeviceInfo[];\r\n  currentDevice: MediaDeviceInfo = null;\r\n\r\n  onScan = new EventEmitter<ScannerBarcodeData>();\r\n  scanResultTarget?: HTMLElement;\r\n\r\n  formatsEnabled: BarcodeFormat[] = [\r\n    BarcodeFormat.CODE_128\r\n    // , BarcodeFormat.DATA_MATRIX\r\n    // , BarcodeFormat.EAN_13\r\n    // , BarcodeFormat.QR_CODE\r\n  ];\r\n\r\n  hasDevices: boolean;\r\n  hasPermission: boolean;\r\n\r\n  @ViewChild('scanner', { static: true })\r\n  scanner: ZXingScannerComponent;\r\n\r\n  @ViewChild('barcodeChangedPart', { static: true })\r\n  barcodeChangedPart: ElementRef;\r\n\r\n  jobid: number;\r\n  allowBarcodeInput = false;\r\n  qrResultString: string;\r\n  scannedBarcode?: string;\r\n  scannedBarcodeInfos?: string;\r\n  scannedBarcodeInfoImg?: DBDIImages;\r\n  scannedBarcodeRsltTyp?: bcLookupTyp;\r\n  scanBCLookupSimpleResult?: BarcodeLookupSimpleResult;\r\n  scanResultHistory: ScanResultItem[] = [];\r\n  scanResultCurrent?: ScanResultItem;\r\n\r\n  torchEnabled = false;\r\n  torchAvailable$ = new BehaviorSubject<boolean>(false);\r\n  tryHarder = false;\r\n\r\n  constructor(\r\n//    private readonly _dialog: MatDialo,\r\n    public activeModal: NgbActiveModal,\r\n    private dataService: DataService,\r\n    private bcLookup: BarcodeService,\r\n    private imageService: ImagesService,\r\n    private baseData: BasedataService,\r\n    private variables: VariablesService\r\n  ) {}\r\n\r\n\r\n  ngOnInit() {\r\n    this.jobid = this.baseData.getCurrentJobid();\r\n\r\n    this.variables.get('manualBarcodeInput', false).then( (status) => {\r\n      this.allowBarcodeInput = status;\r\n    });\r\n  }\r\n\r\n  clearResult(): void {\r\n    this.qrResultString = null;\r\n    this.scanResultCurrent = null;\r\n  }\r\n\r\n  bctest(test) {\r\n    console.log({test});\r\n    if (typeof test === 'string' && test.length) {\r\n      this.onCodeResult( test );\r\n    }\r\n  }\r\n\r\n  applyResult(): void {\r\n    const emitScanResult = {\r\n      barcode: this.scanBCLookupSimpleResult.barcode,\r\n      length: this.scanBCLookupSimpleResult.barcode.length,\r\n      valid: true,\r\n      result: this.scanBCLookupSimpleResult\r\n    } as ScannerBarcodeData;\r\n    console.log('apply applyResult ', { emitScanResult });\r\n    this.onScan.emit( emitScanResult );\r\n  }\r\n\r\n  bcLookupTypToString(typ: bcLookupTyp): string {\r\n    return bcLookupTyp[ typ ];\r\n  }\r\n\r\n  showResult(result: BarcodeLookupSimpleResult): void {\r\n    this.scanBCLookupSimpleResult = result;\r\n    this.scannedBarcodeInfoImg = result.image;\r\n    let bezeichnung = '';\r\n    switch (result.lookupResultTable) {\r\n      case LookupResultTable.None:\r\n        bezeichnung = 'Neuer Barcode';\r\n        this.scannedBarcodeRsltTyp = bcLookupTyp.Neu;\r\n        this.scannedBarcodeInfos = this.bcInfoToString({\r\n          Gefunden: 'Neuer oder unbekannter Barcode'\r\n        });\r\n        break;\r\n\r\n      case LookupResultTable.Raeume:\r\n        const g = (result.gebaeude.Gebaeude || result.gebaeude.Adresse);\r\n        if (g) {\r\n          bezeichnung += `${g} :: `;\r\n        }\r\n        bezeichnung += result.raum.Raum;\r\n        if (result.raum.Raumbezeichnung) {\r\n          bezeichnung += ' / ' + result.raum.Raumbezeichnung;\r\n        }\r\n        if (result.raum.Etage) {\r\n          bezeichnung += ' :: ' + result.raum.Etage;\r\n        }\r\n        bezeichnung = (result.gebaeude.Gebaeude || result.gebaeude.Adresse);\r\n        this.scannedBarcodeRsltTyp = bcLookupTyp.Raum;\r\n        this.scannedBarcodeInfos = bezeichnung;\r\n\r\n        this.bcInfoToString({\r\n          Gefunden: 'Raum',\r\n          Gebaeude: result.gebaeude.Gebaeude || result.gebaeude.Adresse,\r\n          Raum: result.raum.Raum,\r\n          Bezg: result.raum.Raumbezeichnung,\r\n          Etage: result.raum.Etage\r\n        });\r\n        break;\r\n\r\n      case LookupResultTable.Inventar:\r\n        if (result.artikelData.Typ) {\r\n          bezeichnung = result.artikelData.Typ + ' :: ';\r\n        }\r\n        bezeichnung += result.artikelData.Bezeichnung;\r\n        if (result.artikelData.Farbe) {\r\n          bezeichnung += ' :: ' + result.artikelData.Farbe;\r\n        }\r\n        if (result.artikelData.Groesse) {\r\n          bezeichnung += ' :: ' + result.artikelData.Groesse;\r\n        }\r\n        if (result.artikelData.Kategorie) {\r\n          bezeichnung += ' :: ' + result.artikelData.Kategorie;\r\n        }\r\n        this.scannedBarcodeRsltTyp = bcLookupTyp.Inventar;\r\n        this.scannedBarcodeInfos = bezeichnung;\r\n\r\n        this.bcInfoToString({\r\n          Gefunden: 'Inventar',\r\n          InventarNr: result.inventar.iv_nr,\r\n          Bezeichnung: result.artikelData.Bezeichnung,\r\n          Typ: result.artikelData.Typ,\r\n          Farbe: result.artikelData.Farbe,\r\n          Groesse: result.artikelData.Groesse,\r\n          Kategorie: result.artikelData.Kategorie\r\n        });\r\n        break;\r\n\r\n      case LookupResultTable.ObjektKatalogMandant:\r\n        bezeichnung = result.artikelData.Bezeichnung;\r\n        if (result.artikelData.Farbe) {\r\n          bezeichnung += ' :: ' + result.artikelData.Farbe;\r\n        }\r\n        if (result.artikelData.Groesse) {\r\n          bezeichnung += ' :: ' + result.artikelData.Groesse;\r\n        }\r\n        if (result.artikelData.Kategorie) {\r\n          bezeichnung += ' :: ' + result.artikelData.Kategorie;\r\n        }\r\n\r\n        this.scannedBarcodeRsltTyp = bcLookupTyp.Artikel;\r\n        this.scannedBarcodeInfos = bezeichnung;\r\n        this.bcInfoToString({\r\n          Gefunden: 'Artikel',\r\n          Bezeichnung: result.artikelData.Bezeichnung,\r\n          Typ: result.artikelData.Typ,\r\n          Farbe: result.artikelData.Farbe,\r\n          Groesse: result.artikelData.Groesse,\r\n          Kategorie: result.artikelData.Kategorie\r\n        });\r\n        break;\r\n\r\n      default:\r\n        bezeichnung = 'Unerwartetes Ergebnis';\r\n        this.scannedBarcodeRsltTyp = bcLookupTyp.Unbekannt;\r\n        this.scannedBarcodeInfos = bezeichnung;\r\n        this.bcInfoToString({\r\n          Gefunden: 'Unerwartetes Ergebnis',\r\n          Objekt: LookupResultTable[result.lookupResultTable]\r\n        });\r\n    }\r\n\r\n    const newHistoryItem = (this.scanResultCurrent) ? { ...this.scanResultCurrent } : null;\r\n\r\n\r\n    this.scanResultCurrent = {\r\n      typ: this.scannedBarcodeRsltTyp,\r\n      typToString: bcLookupTyp[ this.scannedBarcodeRsltTyp ],\r\n      barcode: this.scannedBarcode,\r\n      infos: this.scannedBarcodeInfos,\r\n      image: this.scannedBarcodeInfoImg,\r\n      result\r\n    };\r\n    const lastResult = this.scanResultCurrent;\r\n\r\n    if (this.scannedBarcodeInfoImg && this.scannedBarcodeInfoImg.mcuuid) {\r\n      this.loadImageByMcuuid(this.scannedBarcodeInfoImg.mcuuid).then(img => {\r\n        if (this.scanResultCurrent === lastResult) {\r\n          this.scanResultCurrent.image.data_url = img.data_url;\r\n        } else {\r\n          const lastResultFound = this.scanResultHistory.find( r => r === lastResult);\r\n          if (lastResultFound) {\r\n            lastResultFound.image.data_url = img.data_url;\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    this.addHistoryResult(newHistoryItem );\r\n  }\r\n\r\n  addHistoryResult(result: ScanResultItem): number {\r\n    if (result) {\r\n      this.scanResultHistory.unshift(result);\r\n      while (this.scanResultHistory.length > 10) {\r\n        this.scanResultHistory.pop();\r\n      }\r\n    }\r\n    return this.scanResultHistory.length;\r\n  }\r\n\r\n  removeResult(result: any): void {\r\n    this.scanResultHistory = this.scanResultHistory.filter( r => r !== result);\r\n    console.log('remove Result', { result });\r\n    // alert(JSON.stringify(result));\r\n  }\r\n\r\n  applyHistoryResult(result: ScanResultItem): void {\r\n    const emitScanResult = {\r\n      barcode: this.scanBCLookupSimpleResult.barcode,\r\n      length: this.scanBCLookupSimpleResult.barcode.length,\r\n      valid: true,\r\n      result: this.scanBCLookupSimpleResult\r\n    } as ScannerBarcodeData;\r\n    console.log('apply applyHistoryResult', { emitScanResult });\r\n    this.onScan.emit( emitScanResult );\r\n  }\r\n\r\n  clearHistory(): void {\r\n    this.scanResultHistory = [];\r\n  }\r\n\r\n  onCamerasFound(devices: MediaDeviceInfo[]): void {\r\n    this.availableDevices = devices;\r\n    // this.allowBarcodeInput = false;\r\n    this.hasDevices = Boolean(devices && devices.length);\r\n    if (this.hasDevices) {\r\n      for (const dev of this.availableDevices) {\r\n        console.log( 'found camera mediaDeviceInfo: ', dev);\r\n      }\r\n    }\r\n  }\r\n\r\n  bcInfoToString(json: any): string {\r\n    return JSON.stringify( json ).substr(1).split('').slice(0, -1).join('');\r\n    let tbl = '<table>';\r\n    for (const k of Object.keys(json)) {\r\n      tbl += '<tr><th>' + k + '</th><td>' + json[k] + '</td>';\r\n    }\r\n    tbl += '</table>';\r\n    return tbl;\r\n  }\r\n\r\n  onCodeResult(resultString: string) { // resultString: string\r\n    // const resultString = '0000037536';\r\n    // const oldBarcode: string = this.scannedBarcode || '';\r\n    this.scannedBarcode = resultString;\r\n    this.scannedBarcodeInfos = '';\r\n    this.scannedBarcodeInfoImg = null;\r\n    this.bcLookup.fullLookup(resultString, this.jobid).then( (result) => {\r\n      this.showResult( result );\r\n    });\r\n  }\r\n\r\n  async loadImageByMcuuid(mcuuid: string): Promise<DBDIImages|null> {\r\n    console.log('called loadImageByGcuuid', mcuuid);\r\n    if (mcuuid) {\r\n      return this.imageService.getImageByMcuuid(mcuuid)\r\n        .then( image => {\r\n          return image;\r\n        })\r\n        .catch( err => {\r\n          console.error( err );\r\n          return null;\r\n        });\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  onDeviceSelectChange(selected: string) {\r\n    const device = this.availableDevices.find(x => x.deviceId === selected);\r\n    this.currentDevice = device || null;\r\n    // this.allowBarcodeInput = !device;\r\n  }\r\n\r\n  openFormatsDialog() {\r\n    const data = {\r\n      formatsEnabled: this.formatsEnabled,\r\n    };\r\n  }\r\n\r\n  onHasPermission(has: boolean) {\r\n    this.hasPermission = has;\r\n  }\r\n\r\n  openInfoDialog() {\r\n    const data = {\r\n      hasDevices: this.hasDevices,\r\n      hasPermission: this.hasPermission,\r\n    };\r\n  }\r\n\r\n  onTorchCompatible(isCompatible: boolean): void {\r\n    this.torchAvailable$.next(isCompatible || false);\r\n  }\r\n\r\n  toggleTorch(): void {\r\n    this.torchEnabled = !this.torchEnabled;\r\n  }\r\n\r\n  toggleTryHarder(): void {\r\n    this.tryHarder = !this.tryHarder;\r\n  }\r\n\r\n}\r\n","export default \".modal-header.modal-header-with-links {\\n  display: flex;\\n  flex-direction: row-reverse;\\n}\\n\\n.card-body,\\n.card-footer {\\n  padding: 0.5rem;\\n}\\n\\n.artikel-form .input-group-prepend .input-group-text {\\n  min-width: 4rem;\\n}\\n\\n.artikel-form.artikel-form-kunst .input-group-prepend .input-group-text {\\n  min-width: 5.5rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1jcmVhdGUtYXJ0aWtlbC9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzZWxlY3QtY3JlYXRlLWFydGlrZWxcXHNlbGVjdC1jcmVhdGUtYXJ0aWtlbC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1jcmVhdGUtYXJ0aWtlbC9zZWxlY3QtY3JlYXRlLWFydGlrZWwuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsMkJBQUE7QUNDRjs7QURFQTs7RUFFRSxlQUFBO0FDQ0Y7O0FERUE7RUFDRSxlQUFBO0FDQ0Y7O0FERUE7RUFDRSxpQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1jcmVhdGUtYXJ0aWtlbC9zZWxlY3QtY3JlYXRlLWFydGlrZWwuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcclxufVxyXG5cclxuLmNhcmQtYm9keSxcclxuLmNhcmQtZm9vdGVyIHtcclxuICBwYWRkaW5nOiAwLjVyZW07XHJcbn1cclxuXHJcbi5hcnRpa2VsLWZvcm0gLmlucHV0LWdyb3VwLXByZXBlbmQgLmlucHV0LWdyb3VwLXRleHQge1xyXG4gIG1pbi13aWR0aDo0cmVtO1xyXG59XHJcblxyXG4uYXJ0aWtlbC1mb3JtLmFydGlrZWwtZm9ybS1rdW5zdCAuaW5wdXQtZ3JvdXAtcHJlcGVuZCAuaW5wdXQtZ3JvdXAtdGV4dCB7XHJcbiAgbWluLXdpZHRoOjUuNXJlbTtcclxufVxyXG4iLCIubW9kYWwtaGVhZGVyLm1vZGFsLWhlYWRlci13aXRoLWxpbmtzIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xufVxuXG4uY2FyZC1ib2R5LFxuLmNhcmQtZm9vdGVyIHtcbiAgcGFkZGluZzogMC41cmVtO1xufVxuXG4uYXJ0aWtlbC1mb3JtIC5pbnB1dC1ncm91cC1wcmVwZW5kIC5pbnB1dC1ncm91cC10ZXh0IHtcbiAgbWluLXdpZHRoOiA0cmVtO1xufVxuXG4uYXJ0aWtlbC1mb3JtLmFydGlrZWwtZm9ybS1rdW5zdCAuaW5wdXQtZ3JvdXAtcHJlcGVuZCAuaW5wdXQtZ3JvdXAtdGV4dCB7XG4gIG1pbi13aWR0aDogNS41cmVtO1xufSJdfQ== */\"","import {Component, EventEmitter, OnInit, Output, ViewChild} from '@angular/core';\r\nimport { ModalDismissReasons, NgbActiveModal, NgbTypeahead} from '@ng-bootstrap/ng-bootstrap';\r\nimport { faSearch, faSignOutAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport {DBDIArtikel, DBDIHersteller } from '../../../../shared/interfaces/dexie.interfaces';\r\nimport {\r\n  ArtikelService,\r\n  ArtikelBasisDaten,\r\n  ArtikelPropertiesForQueryCount,\r\n  ArtikelHerstellerImg, DBInsertArtikelResult\r\n} from '../../data-services/artikel.service';\r\n\r\nimport {Observable, Subject, merge} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, filter, map} from 'rxjs/operators';\r\nimport {HerstellerService, HerstellerWithId} from '../../data-services/hersteller.service';\r\nimport {BasedataService} from '../../../../shared/services/basedata.service';\r\nimport {DataService} from '../../../../shared/services/data.service';\r\nimport {ArtikelOption} from '../select-search-artikel/select-search-artikel.component';\r\nimport {IndexableType} from 'dexie';\r\n\r\n\r\nconst states: HerstellerWithId[] = [];\r\nconst stateNames: string[] = [];\r\nconst artikelGruppen: string[] = [];\r\nconst artikelKategorien: string[] = [];\r\nconst artikelTypen: string[] = [];\r\nconst artikelGroessen: string[] = [];\r\nconst artikelFarben: string[] = [];\r\nconst gruppenKategorien: { gruppe: string, kategorien: string[]}[] = [];\r\n\r\nexport enum ArtikelFormType {\r\n  Inventar,\r\n  Kunst\r\n}\r\n\r\ninterface FormControlOptions {\r\n  isVisible: boolean;\r\n  label: string;\r\n  labelShort: string;\r\n  placeholder: string;\r\n}\r\n\r\ninterface ArtikelFormLabels {\r\n  Hersteller: FormControlOptions; // string; // = 'Hersteller';\r\n  Gruppe: FormControlOptions; // string; // = 'Gruppe';\r\n  Kategorie: FormControlOptions; // string; // = 'Kategorie';\r\n  Bezeichnung: FormControlOptions; // string; // = 'Bezeichnung';\r\n  Typ: FormControlOptions; // string; // = 'Typ';\r\n  Groesse: FormControlOptions; // string; // = 'Groesse';\r\n  Farbe: FormControlOptions; // string; // = 'Farbe';\r\n}\r\n\r\ninterface SimilarityStat {\r\n  term: string;\r\n  count: number;\r\n}\r\ninterface ExistCountSimilarArticle {\r\n  Hersteller: SimilarityStat;\r\n  Bezeichnung: SimilarityStat;\r\n  Typ: SimilarityStat;\r\n  // Kategorie: SimilarityStat;\r\n  Groesse: SimilarityStat;\r\n  Farbe: SimilarityStat;\r\n}\r\n\r\ninterface HerstellerExistsStatus {\r\n  term?: string;\r\n  uuid?: string;\r\n  data?: DBDIHersteller;\r\n  isQuerying: boolean;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-select-create-artikel',\r\n  templateUrl: './select-create-artikel.component.html',\r\n  styleUrls: ['./select-create-artikel.component.scss']\r\n})\r\nexport class SelectCreateArtikelComponent implements OnInit {\r\n  closeResult: string;\r\n  faSearch = faSearch;\r\n  faSignOutAlt = faSignOutAlt;\r\n\r\n  ArtikelExistsStatus = -1;\r\n  numBezeichnungExists = -1;\r\n\r\n  public artikelDaten: ArtikelBasisDaten = {\r\n    mid: 0,\r\n    mcid: 0,\r\n    mcuuid: '',\r\n    gcid: 0,\r\n    gcuuid: '',\r\n    Bezeichnung: '',\r\n    Gruppe: '',\r\n    Kategorie: '',\r\n    Typ: '',\r\n    Hersteller: '',\r\n    huuid: '',\r\n    Groesse: '',\r\n    Farbe: ''\r\n  };\r\n  model: any;\r\n\r\n  @ViewChild('instance', {static: true}) instance: NgbTypeahead;\r\n  focus$ = new Subject<string>();\r\n  click$ = new Subject<string>();\r\n\r\n  @ViewChild('instanceGrp', {static: true}) instanceGrp: NgbTypeahead;\r\n  focusGrp$ = new Subject<string>();\r\n  clickGrp$ = new Subject<string>();\r\n\r\n  @ViewChild('instanceKtg', {static: true}) instanceKtg: NgbTypeahead;\r\n  focusKtg$ = new Subject<string>();\r\n  clickKtg$ = new Subject<string>();\r\n\r\n  @ViewChild('instanceTyp', {static: true}) instanceTyp: NgbTypeahead;\r\n  focusTyp$ = new Subject<string>();\r\n  clickTyp$ = new Subject<string>();\r\n\r\n  @ViewChild('instanceGrs', {static: true}) instanceGrs: NgbTypeahead;\r\n  focusGrs$ = new Subject<string>();\r\n  clickGrs$ = new Subject<string>();\r\n\r\n  @ViewChild('instanceFa', {static: true}) instanceFa: NgbTypeahead;\r\n  focusFa$ = new Subject<string>();\r\n  clickFa$ = new Subject<string>();\r\n\r\n  formIsValid = false;\r\n  formError = '';\r\n\r\n  private gid: number;\r\n  private mid: number;\r\n\r\n  existsStatus: ExistCountSimilarArticle = {\r\n    Hersteller: { term: '', count: 0 },\r\n    Bezeichnung: { term: '', count: 0 },\r\n    Typ: { term: '', count: 0 },\r\n    Groesse: { term: '', count: 0 },\r\n    Farbe: { term: '', count: 0 },\r\n  };\r\n\r\n  herstellerExistsStatus: HerstellerExistsStatus = {\r\n    term: '',\r\n    uuid: '',\r\n    data: null,\r\n    isQuerying: false\r\n  };\r\n  delayedTrigger: any = {};\r\n\r\n  listExistingArticleMatches: ArtikelHerstellerImg[] = [];\r\n  listExistingArticlePage: ArtikelHerstellerImg[] = [];\r\n  pageSize = 8;\r\n  collectionSize = 0;\r\n  page = 1;\r\n  maxSize = 6;\r\n\r\n  @Output() artikelSelected = new EventEmitter<ArtikelOption>();\r\n  @Output() artikelSearching = new EventEmitter<number>();\r\n  @Output() artikelCreated = new EventEmitter<DBInsertArtikelResult>();\r\n  @Output() herstellerChanged = new EventEmitter<string>();\r\n  @Output() gruppeChanged = new EventEmitter<string>();\r\n  @Output() inputChanging = new EventEmitter();\r\n  @Output() inputChanged = new EventEmitter<Event>();\r\n\r\n  formTitle = 'Neuen Artikel anlegen';\r\n\r\n  formType: ArtikelFormType = ArtikelFormType.Inventar;\r\n  formTypeInventar = ArtikelFormType.Inventar;\r\n  formTypeKunst = ArtikelFormType.Kunst;\r\n\r\n  formLabels: ArtikelFormLabels = {\r\n    Hersteller: {\r\n      isVisible: true,\r\n      label: 'Hersteller',\r\n      labelShort: 'HST',\r\n      placeholder: 'Hersteller'\r\n    },\r\n    Gruppe: {\r\n      isVisible: true,\r\n      label: 'Gruppe',\r\n      labelShort: 'GRP',\r\n      placeholder: 'Gruppe'\r\n    },\r\n    Kategorie: {\r\n      isVisible: true,\r\n      label: 'Kategorie',\r\n      labelShort: 'KTG',\r\n      placeholder: 'Kategorie'\r\n    },\r\n    Bezeichnung: {\r\n      isVisible: true,\r\n      label: 'Bezeichnung',\r\n      labelShort: 'BEZ',\r\n      placeholder: 'Artikel-Bezeichnung'\r\n    },\r\n    Typ: {\r\n      isVisible: true,\r\n      label: 'Typ',\r\n      labelShort: 'TYP',\r\n      placeholder: 'Artikel-Typ'\r\n    },\r\n    Groesse : {\r\n      isVisible: true,\r\n      label: 'Groesse',\r\n      labelShort: 'Gre',\r\n      placeholder: 'Gre / Abmessungen'\r\n    },\r\n    Farbe: {\r\n      isVisible: true,\r\n      label: 'Farbe',\r\n      labelShort: 'Farbe',\r\n      placeholder: 'Artikelfarbe'\r\n    }\r\n  };\r\n  formLabelsInventar: ArtikelFormLabels = this.formLabels;\r\n\r\n  constructor(\r\n    // private modalService: NgbModal,\r\n    public activeModal: NgbActiveModal,\r\n    private artikelService: ArtikelService,\r\n    private herstellerService: HerstellerService,\r\n    private baseData: BasedataService,\r\n    private dataService: DataService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.herstellerService.getAllHerstellerWithUuids().then(list => {\r\n      while (states.length > 0) {\r\n        states.pop();\r\n        stateNames.pop();\r\n      }\r\n      list.forEach( item =>  {\r\n        states.push(item);\r\n        stateNames.push(item.Hersteller);\r\n      });\r\n      console.log('#118 ngOnInit', { states, stateNames });\r\n    });\r\n\r\n    this.artikelService.getGroupedArtikelGruppenKategorien().then( (list) => {\r\n      gruppenKategorien.length = 0;\r\n      list.forEach( itm => gruppenKategorien.push(itm));\r\n    });\r\n\r\n    this.artikelService.getGroupedArtikelGruppen().then( list => {\r\n      list.forEach( (it) => artikelGruppen.push( it ) );\r\n    });\r\n\r\n    this.artikelService.getGroupedArtikelKategorien().then( list => {\r\n      list.forEach( (it) => artikelKategorien.push( it ) );\r\n    });\r\n\r\n    this.artikelService.getGroupedArtikelProperties('Typ').then( list => {\r\n      list.forEach( (it) => artikelTypen.push( it ) );\r\n    });\r\n\r\n    this.artikelService.getGroupedArtikelFarben().then( list => {\r\n      list.forEach( (it) => artikelFarben.push( it ) );\r\n    });\r\n\r\n    this.artikelService.getGroupedArtikelGroessen().then( list => {\r\n      list.forEach( (it) => artikelGroessen.push( it ) );\r\n    });\r\n\r\n    this.herstellerChanged.subscribe( () => {\r\n      this.checkHersteller().then( () => {\r\n        this.inputChanged.emit();\r\n        // this.rebuildTypeaheadGruppen();\r\n        this.rebuildTypeaheadFarben();\r\n        // this.rebuildTypeaheadKategorien();\r\n        this.rebuildTypeaheadTypen();\r\n      });\r\n    });\r\n\r\n    this.gruppeChanged.subscribe( (gruppe?: string) => {\r\n      this.rebuildTypeaheadKategorien(gruppe);\r\n      this.inputChanged.emit();\r\n    });\r\n\r\n    this.inputChanging.subscribe(() => {\r\n      this.delegateListArticleMatches(3000);\r\n    });\r\n\r\n    this.inputChanged.subscribe(() => {\r\n      // this.checkIfArtikelExistsGlobal();\r\n      // this.checkIfArtikelExistsMandant();\r\n      this.delegateListArticleMatches(500);\r\n      if (this.artikelDaten.Kategorie === 'Kunst' && this.formType !== ArtikelFormType.Kunst) {\r\n        this.setKunstFormLabels();\r\n      } else if (this.artikelDaten.Kategorie !== 'Kunst' && this.formType === ArtikelFormType.Kunst) {\r\n        this.setInventarFormLabels();\r\n      }\r\n    });\r\n  }\r\n\r\n  setFormType(type: ArtikelFormType) {\r\n    this.formType = type;\r\n    if (type === ArtikelFormType.Inventar) {\r\n      this.formTitle = 'Neuen Artikel anlegen';\r\n      this.setInventarFormLabels();\r\n    } else if (type === ArtikelFormType.Kunst) {\r\n      this.formTitle = 'Neues Kunstobjekt anlegen';\r\n      this.setKunstForm({ Kategorie: 'Kunst' });\r\n    }\r\n  }\r\n\r\n  setInventarFormLabels() {\r\n    for (const lbl in Object.keys(this.formLabelsInventar)) {\r\n      if (this.formLabelsInventar.hasOwnProperty(lbl)) {\r\n        this.formLabels[lbl].isVisible = this.formLabelsInventar[lbl].isVisible;\r\n        this.formLabels[lbl].label = this.formLabelsInventar[lbl].label;\r\n        this.formLabels[lbl].labelShort = this.formLabelsInventar[lbl].labelShort;\r\n      }\r\n    }\r\n  }\r\n\r\n  setKunstForm(vals?: ArtikelBasisDaten) {\r\n    this.setKunstFormLabels();\r\n    if (vals) {\r\n      this.setFormValues(vals);\r\n    }\r\n  }\r\n\r\n  setKunstFormLabels() {\r\n    this.formLabels.Bezeichnung.label = 'Titel';\r\n    this.formLabels.Bezeichnung.labelShort = 'Titel';\r\n    this.formLabels.Bezeichnung.placeholder = 'Titel';\r\n    this.formLabels.Typ.label = 'Knstler';\r\n    this.formLabels.Typ.labelShort = 'Knstler';\r\n    this.formLabels.Typ.placeholder = 'Knstler';\r\n    this.artikelDaten.Kategorie = 'Kunst';\r\n  }\r\n\r\n  setFormValues(vals: ArtikelBasisDaten) {\r\n    for (const fld in vals) {\r\n      if (vals.hasOwnProperty(fld) && this.artikelDaten[fld]) {\r\n        this.artikelDaten[fld] = vals[fld];\r\n      }\r\n    }\r\n  }\r\n\r\n  getWhereInputsOf(artikelProperties: string[]): any {\r\n    const daten = { ...this.artikelDaten };\r\n    console.log('#201 getWhereInputsOf', { artikelProperties, daten, artikelDaten: this.artikelDaten });\r\n    const where = artikelProperties\r\n      .filter( p => {\r\n        const hasInput = (p in daten)\r\n        && daten[p] !== 0\r\n        && daten[p] !== ''\r\n        && !!daten[p];\r\n        console.log('#206 getWhereInputsOf', { p, hasInput, daten, artikelDaten: { ...this.artikelDaten},\r\n          value: this.artikelDaten[p], dvalue: daten[p] });\r\n        return hasInput;\r\n      })\r\n      .reduce( (o, p) => { o[p] = this.artikelDaten[p]; return o; }, {} as any);\r\n    console.log('#210 getWhereInputsOf', { artikelProperties, where, artikelDaten: this.artikelDaten });\r\n    return where;\r\n  }\r\n\r\n  async rebuildTypeaheadGruppen() {\r\n    const where = this.getWhereInputsOf(['huuid']);\r\n    this.artikelService.getGroupedArtikelGruppen(where).then( list => {\r\n      artikelGruppen.length = 0;\r\n      list.forEach( (it) => artikelGruppen.push( it ) );\r\n    });\r\n  }\r\n\r\n  async rebuildTypeaheadKategorien(gruppe?: string) {\r\n    const grpKategorien = gruppenKategorien.find( itm => itm.gruppe === gruppe);\r\n    if (gruppe && grpKategorien && grpKategorien.kategorien.length) {\r\n      artikelKategorien.length = 0;\r\n      grpKategorien.kategorien.forEach( ktg => artikelKategorien.push( ktg ));\r\n      return;\r\n    }\r\n\r\n    const buffer: string[] = [];\r\n    gruppenKategorien.forEach( itm => {\r\n      itm.kategorien.forEach( ktg => {\r\n        if (ktg && artikelKategorien.indexOf(ktg) === -1) {\r\n          buffer.push( ktg );\r\n        }\r\n      });\r\n    });\r\n\r\n    artikelKategorien.length = 0;\r\n    buffer.sort( (a, b) => a.toLowerCase() < b.toLowerCase() ? -1 : 1)\r\n      .forEach( ktg => artikelKategorien.push( ktg ));\r\n    return;\r\n  }\r\n\r\n  async rebuildTypeaheadTypen() {\r\n    const where = this.getWhereInputsOf(['huuid']);\r\n    this.artikelService.getGroupedArtikelTypen(where).then( list => {\r\n      artikelTypen.length = 0;\r\n      list.forEach( (it) => artikelTypen.push( it ) );\r\n    });\r\n  }\r\n\r\n  async rebuildTypeaheadGroessen() {\r\n    const where = this.getWhereInputsOf(['huuid']);\r\n    this.artikelService.getGroupedArtikelGroessen(where).then( list => {\r\n      artikelGroessen.length = 0;\r\n      list.forEach( (it) => artikelGroessen.push( it ) );\r\n    });\r\n  }\r\n\r\n  async rebuildTypeaheadFarben() {\r\n    const where = this.getWhereInputsOf(['huuid']);\r\n    this.artikelService.getGroupedArtikelFarben(where).then( list => {\r\n      artikelFarben.length = 0;\r\n      list.forEach( (it) => artikelFarben.push( it ) );\r\n    });\r\n  }\r\n\r\n  async delegateCheckHersteller() {\r\n    const funcName = 'checkHersteller';\r\n    const delayMS = 1000;\r\n    if (funcName in this.delayedTrigger) {\r\n      clearTimeout( this.delayedTrigger[funcName] );\r\n      delete this.delayedTrigger[funcName];\r\n    }\r\n\r\n    console.log('delegate checkHersteller');\r\n    this.delayedTrigger[funcName] = setTimeout( this.checkHersteller.bind(this), delayMS );\r\n  }\r\n\r\n  async delegateListArticleMatches(delay?: number) {\r\n    const funcName = 'listArticleMatches';\r\n    const delayMS = isNaN(delay) ? 2000 : delay;\r\n    if (funcName in this.delayedTrigger) {\r\n      clearTimeout( this.delayedTrigger[funcName] );\r\n      delete this.delayedTrigger[funcName];\r\n    }\r\n\r\n    console.log('delegate listArticleMatches');\r\n    this.delayedTrigger[funcName] = setTimeout( this.listArticleMatches.bind(this), delayMS );\r\n  }\r\n\r\n  async checkHersteller(): Promise<boolean> {\r\n    console.log('called checkHersteller');\r\n    const input = this.artikelDaten.Hersteller;\r\n    const term = (typeof input === 'string') ? input.trim() : '';\r\n\r\n    if (term !== this.herstellerExistsStatus.term) {\r\n      this.herstellerExistsStatus.term = term;\r\n      this.herstellerExistsStatus.data = null;\r\n      this.herstellerExistsStatus.uuid = null;\r\n    }\r\n\r\n    if (term.length) {\r\n      this.herstellerExistsStatus.isQuerying = true;\r\n      return await this.herstellerService.getByName( term ).then( (data) => {\r\n        this.herstellerExistsStatus.data = data;\r\n        this.herstellerExistsStatus.isQuerying = false;\r\n        if (data !== null && data !== undefined) {\r\n          this.herstellerExistsStatus.uuid = ('uuid' in data) ? data.uuid : null;\r\n          console.log('#167 Hersteller exists: ', this.herstellerExistsStatus);\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n    }\r\n    console.log('#172 Hersteller not found: ', term);\r\n    return false;\r\n  }\r\n\r\n  async listArticleMatches() {\r\n    console.log('#175 called listArticleMatches');\r\n    const mid = this.baseData.getCurrentMid();\r\n    const oInputStatus = this.existsStatus;\r\n    const d = this.artikelDaten;\r\n    const oCheckData: ArtikelPropertiesForQueryCount = {};\r\n\r\n    await this.checkHersteller();\r\n    const huuid = this.herstellerExistsStatus.uuid;\r\n\r\n    for (const k of ['Bezeichnung', 'Typ', 'Kategorie', 'Gruppe', 'Groesse', 'Farbe']) {\r\n      if (d[k]) {\r\n        oCheckData[k] = d[k];\r\n      }\r\n    }\r\n\r\n    this.listExistingArticleMatches = await this.artikelService.listArticleByProperties(mid, huuid, oCheckData);\r\n    this.page = 1;\r\n    this.onPageChange(this.page);\r\n    console.log('finished listArticleMatches with results.count: ', this.listExistingArticleMatches.length,\r\n      ' for', { mid, huuid, oCheckData } );\r\n  }\r\n\r\n  async applyItemAsArtikel(item: any) {\r\n    console.log('#361 applyItemAsArtikel', { item });\r\n    if (!item.mcuuid) {\r\n      let artikelRef = await this.dataService.getArtikelRefByGcuuidMid(item.gcuuid, this.clientId);\r\n      if (!artikelRef) {\r\n        artikelRef = await this.artikelService.insertArtikelRef(item);\r\n      }\r\n      item.mcid = artikelRef.mcid;\r\n      item.mcuuid = artikelRef.uuid;\r\n    }\r\n    this.artikelSelected.emit({\r\n      uuid: item.mcuuid,\r\n      mcuuid: item.mcuuid,\r\n      name: item.Bezeichnung\r\n    } as ArtikelOption);\r\n    return;\r\n  }\r\n\r\n  applyItemAsInput(item: any) {\r\n    console.log('#367 applyItemAsInput', { item });\r\n    this.artikelDaten.Hersteller = item.Hersteller;\r\n    this.artikelDaten.huuid = item.huuid;\r\n    this.artikelDaten.Bezeichnung = item.Bezeichnung;\r\n    this.artikelDaten.Gruppe = item.Gruppe;\r\n    this.artikelDaten.Kategorie = item.Kategorie;\r\n    this.artikelDaten.Farbe = item.Farbe;\r\n    this.artikelDaten.Groesse = item.Groesse;\r\n    this.artikelDaten.Typ = item.Typ;\r\n    return;\r\n  }\r\n\r\n  formatter = (state: string) => state;\r\n\r\n  search = (text$: Observable<string>) => {\r\n    const isPopupOpen = (typeof this.instance === 'object' && this.instance instanceof NgbTypeahead)\r\n      ? this.instance.isPopupOpen()\r\n      : false;\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.click$.pipe(filter(() => !isPopupOpen));\r\n    const inputFocus$ = this.focus$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? stateNames\r\n        : stateNames.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  searchGruppen = (text$: Observable<string>) => {\r\n    const isPopupOpen = (typeof this.instanceGrp === 'object' && this.instanceGrp instanceof NgbTypeahead)\r\n      ? this.instanceGrp.isPopupOpen()\r\n      : false;\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.clickGrp$.pipe(filter(() => !isPopupOpen));\r\n    const inputFocus$ = this.focusGrp$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? artikelGruppen\r\n        : artikelGruppen.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  searchKategorien = (text$: Observable<string>) => {\r\n    const isPopupOpen = (typeof this.instanceKtg === 'object' && this.instanceKtg instanceof NgbTypeahead)\r\n      ? this.instanceKtg.isPopupOpen()\r\n      : false;\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.clickKtg$.pipe(filter(() => !isPopupOpen));\r\n    const inputFocus$ = this.focusKtg$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? artikelKategorien\r\n        : artikelKategorien.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  searchTypen = (text$: Observable<string>) => {\r\n    const isPopupOpen = (typeof this.instanceTyp === 'object' && this.instanceTyp instanceof NgbTypeahead)\r\n      ? this.instanceTyp.isPopupOpen()\r\n      : false;\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.clickTyp$.pipe(filter(() => !isPopupOpen));\r\n    const inputFocus$ = this.focusTyp$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? artikelTypen\r\n        : artikelTypen.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  searchGroessen = (text$: Observable<string>) => {\r\n    const isPopupOpen = (typeof this.instanceGrs === 'object' && this.instanceGrs instanceof NgbTypeahead)\r\n      ? this.instanceGrs.isPopupOpen()\r\n      : false;\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.clickGrs$.pipe(filter(() => !isPopupOpen));\r\n    const inputFocus$ = this.focusGrs$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? artikelGroessen\r\n        : artikelGroessen.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  searchFarben = (text$: Observable<string>) => {\r\n    const isPopupOpen = (typeof this.instanceFa === 'object' && this.instanceFa instanceof NgbTypeahead)\r\n      ? this.instanceFa.isPopupOpen()\r\n      : false;\r\n    const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\r\n    const clicksWithClosedPopup$ = this.clickFa$.pipe(filter(() => !isPopupOpen));\r\n    const inputFocus$ = this.focusFa$;\r\n\r\n    return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$).pipe(\r\n      map(term => (term === '' ? artikelFarben\r\n        : artikelFarben.filter(item => new RegExp(term, 'mi').test(item))).slice(0, 10))\r\n    );\r\n  }\r\n\r\n  onInput(event?: Event) {\r\n    this.inputChanging.emit(event);\r\n  }\r\n\r\n  onChange(event?: Event) {\r\n    this.inputChanged.emit(event);\r\n  }\r\n\r\n  onSelectHersteller(selected) {\r\n    const foundHst = states.find( (st) => st.Hersteller === selected.item);\r\n    this.artikelDaten.huuid = (foundHst) ? foundHst.uuid : null;\r\n    console.log('SelectCreateArtikel onSelectHersteller this.artikelDaten.Hersteller: ', this.artikelDaten.Hersteller,\r\n      { selected, foundHst });\r\n    this.herstellerChanged.emit(selected.item);\r\n  }\r\n  onChangeHersteller(event: Event) {\r\n    console.log('Hersteller changed', event);\r\n    if (event.target instanceof HTMLInputElement) {\r\n      this.herstellerChanged.emit((event.target as HTMLInputElement).value);\r\n    }\r\n  }\r\n\r\n  onSelectGruppe(selected) {\r\n    console.log('Gruppe selected', selected);\r\n    this.gruppeChanged.emit(selected.item);\r\n  }\r\n  onChangeGruppe(event: Event) {\r\n    console.log('Gruppe changed', event);\r\n    if (event.target instanceof HTMLInputElement) {\r\n      this.gruppeChanged.emit((event.target as HTMLInputElement).value);\r\n    }\r\n  }\r\n\r\n  onSelectKategorie(selected) {\r\n    console.log('Kategorien selected', selected);\r\n    this.inputChanged.emit();\r\n  }\r\n  onChangeKategorie(event) {\r\n    console.log('Kategorien changed', event);\r\n    this.inputChanged.emit(event);\r\n  }\r\n\r\n  onSelectTypen(selected) {\r\n    console.log('Typen selected', selected);\r\n    this.inputChanged.emit();\r\n  }\r\n  onChangeTyp(event) {\r\n    console.log('Typ changed', event);\r\n    this.inputChanged.emit(event);\r\n  }\r\n\r\n  onSelectFarben(selected) {\r\n    console.log('Farben selected', selected);\r\n    this.inputChanged.emit();\r\n  }\r\n\r\n  onSelectGroessen(selected) {\r\n    console.log('Groessen selected', selected);\r\n    this.inputChanged.emit();\r\n  }\r\n\r\n  private getDismissReason(reason: any): string {\r\n    if (reason === ModalDismissReasons.ESC) {\r\n      return 'by pressing ESC';\r\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\r\n      return 'by clicking on a backdrop';\r\n    } else {\r\n      return  `with: ${reason}`;\r\n    }\r\n  }\r\n\r\n  formValidate(): boolean {\r\n    this.formIsValid =\r\n      this.artikelDaten.Bezeichnung.length > 0\r\n      && this.numBezeichnungExists === 0;\r\n\r\n    console.log('called formValidate return ', this.formIsValid);\r\n    return this.formIsValid;\r\n  }\r\n\r\n  showSearchForm(event) {\r\n    this.artikelSearching.emit(1);\r\n    this.activeModal.close();\r\n  }\r\n\r\n  get gebaeudeId() {\r\n    return this.gid;\r\n  }\r\n\r\n  set gebaeudeId(gid: number) {\r\n    this.gid = gid;\r\n  }\r\n\r\n  get clientId() {\r\n    return this.mid;\r\n  }\r\n\r\n  set clientId(mid: number) {\r\n    this.mid = mid;\r\n  }\r\n\r\n  async checkIfABezeichnungExistsGlobal(): Promise<number> {\r\n    this.delegateListArticleMatches();\r\n    this.numBezeichnungExists = -1;\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const numExists = await this.artikelService\r\n      .artikelBezeichnungExistsGlobal( this.artikelDaten.Bezeichnung, jobid );\r\n    this.numBezeichnungExists = numExists;\r\n    this.formValidate();\r\n    console.log('check if Artikel exists: ', numExists, 'this.numBezeichnungExists', this.numBezeichnungExists);\r\n    this.listArticleMatches();\r\n    return numExists;\r\n  }\r\n\r\n  async checkIfArtikelExistsMandant(): Promise<boolean> {\r\n    this.numBezeichnungExists = -1;\r\n\r\n    let globalArtikelUuids: string[] = [];\r\n\r\n    await this.artikelService\r\n      .artikelGlobalByBezeichnung( this.artikelDaten.Bezeichnung )\r\n      .then( items => {\r\n        globalArtikelUuids = items.map<string>( item => item.uuid );\r\n      });\r\n\r\n    if (globalArtikelUuids.length === 0) {\r\n      this.numBezeichnungExists = 0;\r\n      return false;\r\n    }\r\n\r\n    const numExistsByMandant = await this.artikelService\r\n      .artikelMcuuidByGcuuids( this.mid, globalArtikelUuids )\r\n      .then( items => {\r\n        return items.length;\r\n      });\r\n\r\n    this.numBezeichnungExists = numExistsByMandant;\r\n\r\n    return numExistsByMandant > 0;\r\n  }\r\n\r\n  async save(): Promise<boolean> {\r\n    this.formError = '';\r\n    if (this.formValidate()) {\r\n      this.artikelDaten.mid = this.mid;\r\n      const result: DBInsertArtikelResult = await this.artikelService.insert( this.artikelDaten );\r\n      if (!result.success) {\r\n        this.formError = 'Daten konnten nicht gespeichert werden!<br>' + result.errorMsg;\r\n        console.error('save Artikeldaten result ', { artikelDaten: this.artikelDaten, result});\r\n        return false;\r\n      } else {\r\n        this.artikelCreated.emit( result );\r\n        this.activeModal.close();\r\n        return true;\r\n      }\r\n    } else {\r\n      this.formError = 'Bitte die Angaben vervollstndigen, Artikel-Bezeichnung darf noch nicht vergeben sein';\r\n    }\r\n  }\r\n\r\n  onPageChange(page: number) {\r\n    this.collectionSize = this.listExistingArticleMatches.length;\r\n    this.pageSize = 8;\r\n    const start = (page - 1) * this.pageSize;\r\n    const end = start + this.pageSize;\r\n    this.listExistingArticlePage = this.listExistingArticleMatches.slice(start, end);\r\n    console.log('#599 pagination goto page', page, '.slice(', start, end, ') of', this.collectionSize);\r\n  }\r\n\r\n  onSubmit(event) {\r\n    console.log( 'onSubmit', this.artikelDaten );\r\n    this.save();\r\n  }\r\n}\r\n\r\n","export default \".modal-header.modal-header-with-links {\\n  display: flex;\\n  flex-direction: row-reverse;\\n}\\n\\n.input-group-text {\\n  min-width: 4rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1jcmVhdGUtcmF1bS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzZWxlY3QtY3JlYXRlLXJhdW1cXHNlbGVjdC1jcmVhdGUtcmF1bS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1jcmVhdGUtcmF1bS9zZWxlY3QtY3JlYXRlLXJhdW0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsMkJBQUE7QUNDRjs7QURFQTtFQUNFLGVBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL21vZGFscy9zZWxlY3QtY3JlYXRlLXJhdW0vc2VsZWN0LWNyZWF0ZS1yYXVtLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XHJcbn1cclxuXHJcbi5pbnB1dC1ncm91cC10ZXh0IHtcclxuICBtaW4td2lkdGg6IDRyZW07XHJcbn1cclxuIiwiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcbn1cblxuLmlucHV0LWdyb3VwLXRleHQge1xuICBtaW4td2lkdGg6IDRyZW07XG59Il19 */\"","import {Component, EventEmitter, OnInit, Output } from '@angular/core';\r\n\r\nimport { ModalDismissReasons, NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport { faSearch, faCamera, faSignOutAlt, faExchangeAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { DBDIRaeume} from '../../../../shared/interfaces/dexie.interfaces';\r\nimport { RaumService, RaumBasisDaten } from '../../data-services/raum.service';\r\n\r\n@Component({\r\n  selector: 'app-select-create-raum',\r\n  templateUrl: './select-create-raum.component.html',\r\n  styleUrls: ['./select-create-raum.component.scss']\r\n})\r\nexport class SelectCreateRaumComponent implements OnInit {\r\n  closeResult: string;\r\n  faSearch = faSearch;\r\n  faCamera = faCamera;\r\n  faSignOutAlt = faSignOutAlt;\r\n\r\n  raumExistsStatus = -1;\r\n  bezeichnungExistsStatus = -1;\r\n\r\n\r\n  public raumDaten: RaumBasisDaten = {\r\n    Raum: '',\r\n    Raumbezeichnung: '',\r\n    Etage: '',\r\n    code: ''\r\n  };\r\n\r\n  formIsValid = false;\r\n  formError = '';\r\n\r\n  private gid: number;\r\n\r\n  @Output() raumSearching = new EventEmitter();\r\n  @Output() raumCreated = new EventEmitter<DBDIRaeume>();\r\n  @Output() scannerRequest = new EventEmitter<HTMLElement>();\r\n\r\n  constructor(\r\n    // private modalService: NgbModal,\r\n    public activeModal: NgbActiveModal,\r\n    private raumService: RaumService\r\n  ) {}\r\n\r\n  private getDismissReason(reason: any): string {\r\n    if (reason === ModalDismissReasons.ESC) {\r\n      return 'by pressing ESC';\r\n    } else if (reason === ModalDismissReasons.BACKDROP_CLICK) {\r\n      return 'by clicking on a backdrop';\r\n    } else {\r\n      return  `with: ${reason}`;\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  openScanner(target) {\r\n    this.scannerRequest.emit(target);\r\n  }\r\n\r\n  formValidate(): boolean {\r\n    console.log('called formValidate');\r\n    this.formIsValid =\r\n      this.raumDaten.Raum.length > 0\r\n      && this.raumExistsStatus === 0;\r\n\r\n    console.log('called formValidate return ', this.formIsValid);\r\n    return this.formIsValid;\r\n  }\r\n\r\n  showSearchForm(event) {\r\n    console.log('called showSearchForm');\r\n    this.raumSearching.emit();\r\n    this.activeModal.close();\r\n  }\r\n\r\n  get gebaeudeId() {\r\n    console.log('called get gebaeudeId() ', this.gid);\r\n    return this.gid;\r\n  }\r\n\r\n  set gebaeudeId(gid: number) {\r\n    console.log( 'called set gebaeudeId', 'param', gid, 'old-gid', this.gid);\r\n    this.gid = gid;\r\n  }\r\n\r\n  async checkIfRaumExists(): Promise<boolean> {\r\n    console.log('check if raum exists');\r\n    this.raumExistsStatus = -1;\r\n    let raumExists = false;\r\n    await this.raumService\r\n      .raumExists( this.gid, this.raumDaten.Raum )\r\n      .then( exists => {\r\n        this.raumExistsStatus = exists ? 1 : 0;\r\n        raumExists = exists;\r\n    });\r\n    this.formValidate();\r\n    console.log('check if raum exists: ', raumExists);\r\n    return raumExists;\r\n  }\r\n\r\n  async checkIfRaumbezeichnungExists(): Promise<boolean> {\r\n    console.log('check if bezeichnung exists');\r\n    this.bezeichnungExistsStatus = -1;\r\n    let bezeichnungExists = false;\r\n    await this.raumService\r\n      .raumBezeichnungExists( this.gid, this.raumDaten.Raumbezeichnung )\r\n      .then( exists => {\r\n        this.bezeichnungExistsStatus = exists ? 1 : 0;\r\n        bezeichnungExists = exists;\r\n    });\r\n    console.log('check if bezeichnung exists: ', bezeichnungExists);\r\n    return bezeichnungExists;\r\n  }\r\n\r\n  async save(): Promise<boolean> {\r\n    this.formError = '';\r\n    console.log('save raum ');\r\n    if (this.formValidate()) {\r\n      this.raumDaten.gid = this.gid;\r\n      console.log('save raumdaten ', this.raumDaten);\r\n      const result = await this.raumService.insert( this.raumDaten );\r\n      console.log('save raumdaten result ', result);\r\n      if (!result.success) {\r\n        this.formError = 'Daten konnten nicht gespeichert werden!<br>' + result.errorMsg;\r\n        return false;\r\n      } else {\r\n        this.raumCreated.emit( result.newItem );\r\n        this.activeModal.close();\r\n        return true;\r\n      }\r\n    } else {\r\n      this.formError = 'Bitte die Angaben vervollstndigen, Raum darf noch nicht vergeben sein';\r\n    }\r\n  }\r\n\r\n  onSubmit(event) {\r\n    console.log( 'onSubmit', this.raumDaten );\r\n    this.save();\r\n  }\r\n}\r\n","export default \".modal-header.modal-header-with-links {\\n  display: flex;\\n  flex-direction: row-reverse;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1zZWFyY2gtYXJ0aWtlbC9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzZWxlY3Qtc2VhcmNoLWFydGlrZWxcXHNlbGVjdC1zZWFyY2gtYXJ0aWtlbC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1zZWFyY2gtYXJ0aWtlbC9zZWxlY3Qtc2VhcmNoLWFydGlrZWwuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsMkJBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL21vZGFscy9zZWxlY3Qtc2VhcmNoLWFydGlrZWwvc2VsZWN0LXNlYXJjaC1hcnRpa2VsLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XHJcbn1cclxuIiwiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcbn0iXX0= */\"","import {Component, ElementRef, EventEmitter, OnInit, AfterViewInit, Output, ViewChild} from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged, map, filter} from 'rxjs/operators';\r\nimport { DataService } from '../../../../shared/services/data.service';\r\nimport { faPlus, faSearch, faSignOutAlt, faExchangeAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport { DBDIArtikel } from '../../../../shared/interfaces/dexie.interfaces';\r\n\r\ninterface Artikel extends DBDIArtikel {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\ninterface State {uuid: string; name: string; }\r\n\r\nconst states: State[] = [];\r\n\r\nexport interface ArtikelOption {\r\n  uuid: string;\r\n  mcuuid: string;\r\n  name: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-select-search-artikel',\r\n  templateUrl: './select-search-artikel.component.html',\r\n  styleUrls: ['./select-search-artikel.component.scss']\r\n})\r\nexport class SelectSearchArtikelComponent implements OnInit, AfterViewInit {\r\n\r\n  faPlus = faPlus;\r\n  faSignOutAlt = faSignOutAlt;\r\n  faSearch = faSearch;\r\n\r\n  public model: Artikel;\r\n  private mid: number;\r\n  private options: ArtikelOption[];\r\n\r\n  @Output() artikelSelected = new EventEmitter<ArtikelOption>();\r\n  @Output() artikelCreating = new EventEmitter<number>();\r\n  @ViewChild('searchArtikelInput', {static: false}) searchArtikelInput: ElementRef;\r\n\r\n  formatter = (state: Artikel) => state.name;\r\n\r\n  search = (text$: Observable<string>) => text$.pipe(\r\n    debounceTime(200),\r\n    distinctUntilChanged(),\r\n    filter(term => {\r\n      console.log( 'filter by term', term);\r\n      return term.length >= 2;\r\n    }),\r\n    map(term => {\r\n      console.log('map and slice artikels by term', term, 'states', states);\r\n      return states\r\n        .filter(item => new RegExp(term, 'mi').test(item.name))\r\n        .slice(0, 10);\r\n    })\r\n  )\r\n\r\n  constructor(private dataService: DataService, public activeModal: NgbActiveModal) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.setSearchFocus();\r\n  }\r\n\r\n  setSearchFocus() {\r\n    if (this.searchArtikelInput && this.searchArtikelInput.nativeElement && this.searchArtikelInput.nativeElement.focus) {\r\n      this.searchArtikelInput.nativeElement.focus();\r\n    } else {\r\n      console.error('NOT FOUND this.searchArtikelInput.nativeElement');\r\n    }\r\n  }\r\n\r\n  showCreateForm(event) {\r\n    console.log('showCreateForm');\r\n    this.artikelCreating.emit( this.mid );\r\n    this.activeModal.close();\r\n  }\r\n\r\n  onSelectItem(selected) {\r\n    console.log(selected, selected.item);\r\n\r\n    this.artikelSelected.emit( selected.item );\r\n    this.activeModal.close();\r\n  }\r\n\r\n  get clientId() {\r\n    return this.mid;\r\n  }\r\n\r\n  set clientId(mid: number) {\r\n    console.log( 'SET gebaeudeId', 'param', mid, 'old-mid', this.mid);\r\n    if (this.mid !== mid) {\r\n      this.mid = mid;\r\n      console.log( 'Reload Search-List' );\r\n      this.loadArtikels().then( () => {\r\n        this.setSearchFocus();\r\n      });\r\n    }\r\n  }\r\n\r\n  async loadArtikels() {\r\n    console.log('called loadArtikels');\r\n    states.length = 1;\r\n    await this.dataService.getArtikelListByClientId( this.mid )\r\n      .then( items => {\r\n          console.log('process fetched artikels', items.length );\r\n          return items.map( artikel => {\r\n            const nameParts = [];\r\n            if (artikel.Typ) {\r\n              nameParts.push(artikel.Typ);\r\n            }\r\n            if (artikel.Bezeichnung) {\r\n              nameParts.push(artikel.Bezeichnung);\r\n            }\r\n            if (artikel.Kategorie) {\r\n              nameParts.push(artikel.Kategorie);\r\n            }\r\n            if (artikel.Gruppe) {\r\n              nameParts.push(artikel.Gruppe);\r\n            }\r\n            if (artikel.Farbe) {\r\n              nameParts.push(artikel.Farbe);\r\n            }\r\n            if (artikel.Groesse) {\r\n              nameParts.push(artikel.Groesse);\r\n            }\r\n            if (artikel.Hersteller) {\r\n              nameParts.push(artikel.Hersteller);\r\n            }\r\n\r\n            const option: ArtikelOption = {\r\n              uuid: artikel.mcuuid,\r\n              mcuuid: artikel.mcuuid,\r\n              name: nameParts.join(' :: ')\r\n            };\r\n\r\n            states.push( option );\r\n            return { ...artikel, ...option };\r\n        });\r\n      }).then()\r\n      .catch( err => { console.error( err ); });\r\n\r\n    if (1) {\r\n      this.search = (text$: Observable<string>) => text$.pipe(\r\n        debounceTime(200),\r\n        distinctUntilChanged(),\r\n        filter(term => term.length >= 2),\r\n        map(term => states\r\n          .filter(item => new RegExp(term, 'mi').test(item.name))\r\n          .slice(0, 10))\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n","export default \".modal-header.modal-header-with-links {\\n  display: flex;\\n  flex-direction: row-reverse;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1zZWFyY2gtcmF1bS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzZWxlY3Qtc2VhcmNoLXJhdW1cXHNlbGVjdC1zZWFyY2gtcmF1bS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3NlbGVjdC1zZWFyY2gtcmF1bS9zZWxlY3Qtc2VhcmNoLXJhdW0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsMkJBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2ludmVudC1mb3JtL21vZGFscy9zZWxlY3Qtc2VhcmNoLXJhdW0vc2VsZWN0LXNlYXJjaC1yYXVtLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XHJcbn1cclxuIiwiLm1vZGFsLWhlYWRlci5tb2RhbC1oZWFkZXItd2l0aC1saW5rcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcbn0iXX0= */\"","import {AfterViewInit, Component, ElementRef, EventEmitter, OnInit, Output, ViewChild} from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { debounceTime, distinctUntilChanged, map, filter} from 'rxjs/operators';\r\nimport { DataService } from '../../../../shared/services/data.service';\r\nimport { faPlus, faSearch, faSearchLocation, faSignOutAlt, faExchangeAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport { NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport { DBDIRaeume} from '../../../../shared/interfaces/dexie.interfaces';\r\nimport { BasedataService} from '../../../../shared/services/basedata.service';\r\n\r\ninterface Raum extends DBDIRaeume {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nconst raeume: Raum[] = [];\r\ninterface State {uuid: string; name: string; }\r\n\r\nconst states: State[] = [];\r\n\r\ninterface RaumOption extends DBDIRaeume {\r\n  uuid: string;\r\n  name: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-select-search-raum',\r\n  templateUrl: './select-search-raum.component.html',\r\n  styleUrls: ['./select-search-raum.component.scss']\r\n})\r\nexport class SelectSearchRaumComponent implements OnInit, AfterViewInit {\r\n\r\n  faPlus = faPlus;\r\n  faSearch = faSearch;\r\n  faSearchLocation = faSearchLocation;\r\n  faSignOutAlt = faSignOutAlt;\r\n\r\n  public model: Raum;\r\n  private gid: number;\r\n  private jobid: number;\r\n  private options: RaumOption[];\r\n\r\n  @Output() raumSelected = new EventEmitter<DBDIRaeume>();\r\n  @Output() raumCreating = new EventEmitter<number>();\r\n  @ViewChild('searchInput', {static: true}) searchInput: ElementRef;\r\n\r\n  formatter = (state: Raum) => state.name;\r\n\r\n  search = (text$: Observable<string>) => text$.pipe(\r\n    debounceTime(200),\r\n    distinctUntilChanged(),\r\n    filter(term => {\r\n      return term.length >= 1;\r\n    }),\r\n    map(term => {\r\n      // console.log('map and slice artikel by term', term, 'states', states);\r\n      const matches = states\r\n        .filter(item => new RegExp(term, 'mi').test(item.name) )\r\n        .sort()\r\n        .slice(0, 10);\r\n      console.log('search ', { term, matches: { ...matches}, states });\r\n      return matches;\r\n    })\r\n  )\r\n\r\n  constructor(private dataService: DataService,\r\n              public activeModal: NgbActiveModal,\r\n              private baseData: BasedataService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.setSearchFocus();\r\n  }\r\n\r\n  setSearchFocus() {\r\n    if (this.searchInput && this.searchInput.nativeElement && this.searchInput.nativeElement.focus) {\r\n      this.searchInput.nativeElement.focus();\r\n    } else {\r\n      console.error('NOT FOUND this.searchInput.nativeElement');\r\n    }\r\n  }\r\n\r\n  showCreateForm(event) {\r\n    console.log('showCreateForm');\r\n    this.raumCreating.emit( this.gid );\r\n    this.activeModal.close();\r\n  }\r\n\r\n  onSelectItem(selected) {\r\n    console.log(selected, selected.item);\r\n\r\n    this.raumSelected.emit( selected.item );\r\n    this.activeModal.close();\r\n  }\r\n\r\n  get gebaeudeId() {\r\n    return this.gid;\r\n  }\r\n\r\n  set gebaeudeId(gid: number) {\r\n    console.log( 'SET gebaeudeId', 'param', gid, 'old-gid', this.gid);\r\n    if (this.gid !== gid) {\r\n      this.gid = gid;\r\n      this.jobid = this.baseData.getCurrentJobid();\r\n      console.log( 'Reload Search-List' );\r\n      this.loadRaeume().then( () => {\r\n        this.setSearchFocus();\r\n      });\r\n      this.setSearchFocus();\r\n    }\r\n  }\r\n\r\n  async loadRaeume() {\r\n    console.log('called loadRaeume');\r\n    states.length = 0;\r\n    this.dataService.getRaeumeByGebaeudeId( this.gid, this.jobid )\r\n      .then( raeume2 => {\r\n        console.log('loadRaeume: ', { raeume2: {...raeume2} });\r\n        const raeume3: RaumOption[] = raeume2.map<RaumOption>( raum => {\r\n          const nameParts = [];\r\n          if (raum.Raum) {\r\n            nameParts.push(raum.Raum);\r\n          }\r\n          if (raum.Raumbezeichnung) {\r\n            nameParts.push(raum.Raumbezeichnung);\r\n          }\r\n          if (raum.Etage) {\r\n            nameParts.push(raum.Etage);\r\n          }\r\n          const itm = { uuid: raum.uuid, name: nameParts.join(' :: ') };\r\n          const rOpt: RaumOption = { ...itm, ...raum};\r\n          if (!states.find( st => st.uuid === rOpt.uuid )) {\r\n            states.push(rOpt);\r\n          }\r\n          return rOpt;\r\n        }) as RaumOption[];\r\n        console.log('loadRaeume: ', { states: {...states} });\r\n        return raeume3;\r\n      })\r\n      .catch( err => { console.error( err ); });\r\n  }\r\n}\r\n","export default \"#inputPreview {\\n  max-width: 100%;\\n  max-height: calc(100vh - 200px);\\n}\\n\\n.editor {\\n  height: 60%;\\n  position: relative;\\n}\\n\\n.canvas {\\n  height: 100%;\\n}\\n\\n.canvas {\\n  align-items: center;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.toolbar {\\n  background-color: rgba(0, 0, 0, 0.4);\\n  bottom: 1rem;\\n  color: #fff;\\n  height: 2rem;\\n  left: 50%;\\n  margin-left: -7rem;\\n  position: absolute;\\n  width: 16rem;\\n  z-index: 2015;\\n}\\n\\n.toolbar button {\\n  background: transparent;\\n  color: #fff;\\n  border: 0;\\n}\\n\\n.toolbar-close {\\n  position: absolute;\\n  top: 0.2rem;\\n  right: 0.2rem;\\n  z-index: 2016;\\n  background-color: transparent;\\n}\\n\\n.btn-icon-cirular {\\n  width: 2rem;\\n  height: 2rem;\\n  border-radius: 1rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctYXJ0aWtlbC1pbWFnZS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzaG93LWFydGlrZWwtaW1hZ2VcXHNob3ctYXJ0aWtlbC1pbWFnZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctYXJ0aWtlbC1pbWFnZS9zaG93LWFydGlrZWwtaW1hZ2UuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFBO0VBQ0EsK0JBQUE7QUNDRjs7QURDQTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtBQ0VGOztBRENBO0VBQ0UsWUFBQTtBQ0VGOztBRENBO0VBR0UsbUJBQUE7RUFHQSxhQUFBO0VBR0EsdUJBQUE7QUNFRjs7QURDQTtFQUNFLG9DQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsU0FBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtBQ0VGOztBRENBO0VBQ0UsdUJBQUE7RUFDQSxXQUFBO0VBQ0EsU0FBQTtBQ0VGOztBRENBO0VBQ0Usa0JBQUE7RUFDQSxXQUFBO0VBQ0EsYUFBQTtFQUNBLGFBQUE7RUFDQSw2QkFBQTtBQ0VGOztBRENBO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtBQ0VGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctYXJ0aWtlbC1pbWFnZS9zaG93LWFydGlrZWwtaW1hZ2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjaW5wdXRQcmV2aWV3IHtcclxuICBtYXgtd2lkdGg6MTAwJTtcclxuICBtYXgtaGVpZ2h0OmNhbGMoMTAwdmggLSAyMDBweCk7XHJcbn1cclxuLmVkaXRvciB7XHJcbiAgaGVpZ2h0OiA2MCU7XHJcbiAgcG9zaXRpb246cmVsYXRpdmU7XHJcbn1cclxuXHJcbi5jYW52YXMge1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLmNhbnZhcyB7XHJcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcclxuICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XHJcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XHJcbiAgLW1zLWZsZXgtcGFjazogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4udG9vbGJhciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuNCk7XHJcbiAgYm90dG9tOiAxcmVtO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGhlaWdodDogMnJlbTtcclxuICBsZWZ0OiA1MCU7XHJcbiAgbWFyZ2luLWxlZnQ6IC03cmVtO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogMTZyZW07XHJcbiAgei1pbmRleDogMjAxNTtcclxufVxyXG5cclxuLnRvb2xiYXIgYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICBjb2xvcjojZmZmO1xyXG4gIGJvcmRlcjowO1xyXG59XHJcblxyXG4udG9vbGJhci1jbG9zZSB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogLjJyZW07XHJcbiAgcmlnaHQ6IDAuMnJlbTtcclxuICB6LWluZGV4OiAyMDE2O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG59XHJcblxyXG4uYnRuLWljb24tY2lydWxhciB7XHJcbiAgd2lkdGg6MnJlbTtcclxuICBoZWlnaHQ6MnJlbTtcclxuICBib3JkZXItcmFkaXVzOjFyZW07XHJcbn1cclxuXHJcbiIsIiNpbnB1dFByZXZpZXcge1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIG1heC1oZWlnaHQ6IGNhbGMoMTAwdmggLSAyMDBweCk7XG59XG5cbi5lZGl0b3Ige1xuICBoZWlnaHQ6IDYwJTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uY2FudmFzIHtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uY2FudmFzIHtcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcbiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xuICBkaXNwbGF5OiBmbGV4O1xuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XG4gIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi50b29sYmFyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpO1xuICBib3R0b206IDFyZW07XG4gIGNvbG9yOiAjZmZmO1xuICBoZWlnaHQ6IDJyZW07XG4gIGxlZnQ6IDUwJTtcbiAgbWFyZ2luLWxlZnQ6IC03cmVtO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAxNnJlbTtcbiAgei1pbmRleDogMjAxNTtcbn1cblxuLnRvb2xiYXIgYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjZmZmO1xuICBib3JkZXI6IDA7XG59XG5cbi50b29sYmFyLWNsb3NlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDAuMnJlbTtcbiAgcmlnaHQ6IDAuMnJlbTtcbiAgei1pbmRleDogMjAxNjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbi5idG4taWNvbi1jaXJ1bGFyIHtcbiAgd2lkdGg6IDJyZW07XG4gIGhlaWdodDogMnJlbTtcbiAgYm9yZGVyLXJhZGl1czogMXJlbTtcbn0iXX0= */\"","import {Component, ElementRef, OnInit, ViewChild} from '@angular/core';\r\nimport {NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\r\nimport {ImagesService} from '../../data-services/images.service';\r\n\r\nimport {\r\n  faCropAlt,\r\n  faSearchPlus, faSearchMinus,\r\n  faUndo, faRedo,\r\n  faCheck, faBan,\r\n  faArrowsAlt, faTimes, faTimesCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport {CropperComponent} from 'angular-cropperjs';\r\n\r\n@Component({\r\n  selector: 'app-show-artikel-image',\r\n  templateUrl: './show-artikel-image.component.html',\r\n  styleUrls: ['./show-artikel-image.component.scss']\r\n})\r\nexport class ShowArtikelImageComponent implements OnInit {\r\n  // Editor-Button-Icons\r\n  faCrop = faCropAlt;\r\n  faMove = faArrowsAlt;\r\n  faSearchPlus = faSearchPlus;\r\n  faSearchMinus = faSearchMinus;\r\n  faRotateLeft = faUndo;\r\n  faRotateRight = faRedo;\r\n  faCheck = faCheck;\r\n  faBan = faBan;\r\n  faClose = faTimes;\r\n\r\n  // Get with @ViewChild\r\n  @ViewChild('angularCropper', { static: false })\r\n  public angularCropper: CropperComponent;\r\n\r\n  mcuuid?: string = null;\r\n  gcuuid?: string = null;\r\n  inputFile?: File = null;\r\n  previewEnable = false;\r\n  imageUrl = null;\r\n  maxWidth = 600;\r\n  maxHeight = 600;\r\n  error = '';\r\n  config: any = {\r\n    // aspectRatio : 16 / 9,\r\n    autoCrop: false,\r\n    dragMode : 'move',\r\n    background : true,\r\n    movable: true,\r\n    rotatable : true,\r\n    scalable: true,\r\n    zoomable: true,\r\n    restore: true,\r\n    viewMode: 0,\r\n    checkImageOrigin : true,\r\n    cropend: this.cropEnd.bind(this),\r\n    zoom: this.zoomed.bind(this),\r\n    // ready: this.onCropperReady.bind(this),\r\n    checkCrossOrigin: true,\r\n    wheelZoomRatio: 0.1,\r\n    toggleDragModeOnDblclick: true\r\n  };\r\n  cropStatus = 0;\r\n\r\n  constructor(public activeModal: NgbActiveModal, private imageService: ImagesService) { }\r\n\r\n  ngOnInit() {\r\n    console.log('called ShowArtikelImageComponent.ngOnInit');\r\n  }\r\n\r\n  setMcuuid(mcuuid: string, gcuuid: string = '') {\r\n    this.mcuuid = mcuuid;\r\n    this.gcuuid = gcuuid;\r\n    console.log('called setMcuuid', this.mcuuid);\r\n    this.loadImageByMcuuid(this.mcuuid).then( mSuccess => {\r\n      if (!mSuccess && gcuuid) {\r\n        this.loadImageByGcuuid(this.gcuuid).then( gSuccess => {\r\n          if (!gSuccess) {\r\n            alert('Bild konnte leider nicht geladen werden!');\r\n          }\r\n        });\r\n      }\r\n    }, err => {\r\n      if (gcuuid) {\r\n        this.loadImageByGcuuid(this.gcuuid).then( gSuccess => {\r\n          if (!gSuccess) {\r\n            alert('Bild konnte leider nicht geladen werden!');\r\n          }\r\n        });\r\n      } else {\r\n        alert('Bild konnte leider nicht geladen werden!');\r\n      }\r\n    });\r\n  }\r\n\r\n  async loadImageByMcuuid(mcuuid: string): Promise<boolean> {\r\n    console.log('called loadImageByGcuuid', mcuuid);\r\n    if (mcuuid) {\r\n      return this.imageService.getImageByMcuuid(mcuuid)\r\n        .then( image => {\r\n          if (image) {\r\n            this.imageUrl = image.data_url;\r\n            return true;\r\n          }\r\n          return false;\r\n        })\r\n        .catch( err => {\r\n          console.error( err );\r\n          return false;\r\n        });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async loadImageByGcuuid(gcuuid: string): Promise<boolean> {\r\n    console.log('called loadImageByGcuuid', gcuuid);\r\n    if (gcuuid) {\r\n      return this.imageService.getImageByGcuuid(gcuuid)\r\n        .then( image => {\r\n          if (image) {\r\n            this.imageUrl = image.data_url;\r\n            return true;\r\n          }\r\n          return false;\r\n        })\r\n        .catch( err => {\r\n          console.error( err );\r\n          return false;\r\n        });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  zoomed(e) {\r\n    console.log('zoomListener Event: ', e, 'this.angularCropper: ', this.angularCropper);\r\n    const canvasData = this.angularCropper.cropper.getCanvasData();\r\n    const containerData = this.angularCropper.cropper.getContainerData();\r\n    const ratio = e.detail.ratio;\r\n    const oldRatio = e.detail.oldRatio;\r\n    const minRatioW = containerData.width / canvasData.naturalWidth;\r\n    const minRatioH = containerData.height / canvasData.naturalHeight;\r\n\r\n    if (ratio < oldRatio && (ratio < minRatioW || ratio < minRatioH) ) { // Zoom-Out\r\n      e.preventDefault(); // Prevent zoom out\r\n      return false;\r\n    }\r\n  }\r\n\r\n  cropEnd(e) {\r\n    if (['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'].indexOf(e.detail.action) !== -1) {\r\n      this.cropStatus = 5;\r\n    } else if (e.detail.action === 'move') {\r\n      const canvasData = this.angularCropper.cropper.getCanvasData();\r\n      const containerData = this.angularCropper.cropper.getContainerData();\r\n      console.log('cropEnd move', { e, canvasData, containerData });\r\n      const toLeft = canvasData.left > 0 ? 0 : canvasData.left;\r\n      const toTop = canvasData.top > 0 ? 0 : canvasData.top;\r\n      if (canvasData.left > 0 || canvasData.top > 0) {\r\n        this.angularCropper.cropper.moveTo(toLeft, toTop);\r\n      }\r\n    }\r\n  }\r\n\r\n  rotateLeft() {\r\n    this.angularCropper.cropper.rotate(-90);\r\n  }\r\n  rotateRight() {\r\n    this.angularCropper.cropper.rotate(90);\r\n  }\r\n  rotate180() {\r\n    this.angularCropper.cropper.rotate(180);\r\n  }\r\n  zoomIn() {\r\n    const canvasData = this.angularCropper.cropper.getCanvasData();\r\n    console.log('zoomIn ', { canvasData });\r\n    this.angularCropper.cropper.zoom(.1);\r\n  }\r\n  zoomOut(useRatio?: number) {\r\n    const ratio = (typeof useRatio === 'undefined' || useRatio >= 0) ? -0.1 : useRatio;\r\n    console.log('zoom( -0.1) this.angularCropper:', this.angularCropper);\r\n    const canvasData = this.angularCropper.cropper.getCanvasData();\r\n    const cropBoxData = this.angularCropper.cropper.getCropBoxData();\r\n    const containerData = this.angularCropper.cropper.getContainerData();\r\n    const cad = canvasData;\r\n    const crd = cropBoxData;\r\n    const cod = containerData;\r\n    const caw = cad.width;\r\n    const cah = cad.height;\r\n    const crw = crd.width;\r\n    const crh = crd.height;\r\n    const cow = cod.width;\r\n    const coh = cod.height;\r\n    console.log({ratio, caw, cah, cow, coh, crw, crh, canvasData, cropBoxData, containerData });\r\n    if (caw < cow || cah < coh) {\r\n      console.error('Permission denied to zoom out smaller than canvas');\r\n      return;\r\n    }\r\n    console.log('Permission allowed to zoom out >= canvas');\r\n    this.angularCropper.cropper.zoom(ratio);\r\n  }\r\n  escape() {\r\n    this.imageUrl = null;\r\n  }\r\n  close() {\r\n    this.escape();\r\n    this.activeModal.close();\r\n  }\r\n\r\n}\r\n","export default \"#inputPreview {\\n  max-width: 100%;\\n  max-height: calc(100vh - 200px);\\n}\\n\\n.editor {\\n  height: 60%;\\n  position: relative;\\n}\\n\\n.canvas {\\n  height: 100%;\\n}\\n\\n.canvas {\\n  align-items: center;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.toolbar {\\n  background-color: rgba(0, 0, 0, 0.4);\\n  bottom: 1rem;\\n  color: #fff;\\n  height: 2rem;\\n  left: 50%;\\n  margin-left: -7rem;\\n  position: absolute;\\n  width: 16rem;\\n  z-index: 2015;\\n}\\n\\n.toolbar button {\\n  background: transparent;\\n  color: #fff;\\n  border: 0;\\n}\\n\\n.toolbar-close {\\n  position: absolute;\\n  top: 0.2rem;\\n  right: 0.2rem;\\n  z-index: 2016;\\n  background-color: transparent;\\n}\\n\\n.btn-icon-cirular {\\n  width: 2rem;\\n  height: 2rem;\\n  border-radius: 1rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctcmF1bS1pbWFnZS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxpbnZlbnQtZm9ybVxcbW9kYWxzXFxzaG93LXJhdW0taW1hZ2VcXHNob3ctcmF1bS1pbWFnZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctcmF1bS1pbWFnZS9zaG93LXJhdW0taW1hZ2UuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFBO0VBQ0EsK0JBQUE7QUNDRjs7QURDQTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtBQ0VGOztBRENBO0VBQ0UsWUFBQTtBQ0VGOztBRENBO0VBR0UsbUJBQUE7RUFHQSxhQUFBO0VBR0EsdUJBQUE7QUNFRjs7QURDQTtFQUNFLG9DQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsU0FBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtBQ0VGOztBRENBO0VBQ0UsdUJBQUE7RUFDQSxXQUFBO0VBQ0EsU0FBQTtBQ0VGOztBRENBO0VBQ0Usa0JBQUE7RUFDQSxXQUFBO0VBQ0EsYUFBQTtFQUNBLGFBQUE7RUFDQSw2QkFBQTtBQ0VGOztBRENBO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtBQ0VGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvaW52ZW50LWZvcm0vbW9kYWxzL3Nob3ctcmF1bS1pbWFnZS9zaG93LXJhdW0taW1hZ2UuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjaW5wdXRQcmV2aWV3IHtcclxuICBtYXgtd2lkdGg6MTAwJTtcclxuICBtYXgtaGVpZ2h0OmNhbGMoMTAwdmggLSAyMDBweCk7XHJcbn1cclxuLmVkaXRvciB7XHJcbiAgaGVpZ2h0OiA2MCU7XHJcbiAgcG9zaXRpb246cmVsYXRpdmU7XHJcbn1cclxuXHJcbi5jYW52YXMge1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLmNhbnZhcyB7XHJcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcclxuICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XHJcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XHJcbiAgLW1zLWZsZXgtcGFjazogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4udG9vbGJhciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuNCk7XHJcbiAgYm90dG9tOiAxcmVtO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIGhlaWdodDogMnJlbTtcclxuICBsZWZ0OiA1MCU7XHJcbiAgbWFyZ2luLWxlZnQ6IC03cmVtO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogMTZyZW07XHJcbiAgei1pbmRleDogMjAxNTtcclxufVxyXG5cclxuLnRvb2xiYXIgYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICBjb2xvcjojZmZmO1xyXG4gIGJvcmRlcjowO1xyXG59XHJcblxyXG4udG9vbGJhci1jbG9zZSB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogLjJyZW07XHJcbiAgcmlnaHQ6IDAuMnJlbTtcclxuICB6LWluZGV4OiAyMDE2O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG59XHJcblxyXG4uYnRuLWljb24tY2lydWxhciB7XHJcbiAgd2lkdGg6MnJlbTtcclxuICBoZWlnaHQ6MnJlbTtcclxuICBib3JkZXItcmFkaXVzOjFyZW07XHJcbn1cclxuXHJcbiIsIiNpbnB1dFByZXZpZXcge1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIG1heC1oZWlnaHQ6IGNhbGMoMTAwdmggLSAyMDBweCk7XG59XG5cbi5lZGl0b3Ige1xuICBoZWlnaHQ6IDYwJTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uY2FudmFzIHtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuXG4uY2FudmFzIHtcbiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjtcbiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xuICBkaXNwbGF5OiBmbGV4O1xuICAtd2Via2l0LWJveC1wYWNrOiBjZW50ZXI7XG4gIC1tcy1mbGV4LXBhY2s6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59XG5cbi50b29sYmFyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjQpO1xuICBib3R0b206IDFyZW07XG4gIGNvbG9yOiAjZmZmO1xuICBoZWlnaHQ6IDJyZW07XG4gIGxlZnQ6IDUwJTtcbiAgbWFyZ2luLWxlZnQ6IC03cmVtO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAxNnJlbTtcbiAgei1pbmRleDogMjAxNTtcbn1cblxuLnRvb2xiYXIgYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGNvbG9yOiAjZmZmO1xuICBib3JkZXI6IDA7XG59XG5cbi50b29sYmFyLWNsb3NlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDAuMnJlbTtcbiAgcmlnaHQ6IDAuMnJlbTtcbiAgei1pbmRleDogMjAxNjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbi5idG4taWNvbi1jaXJ1bGFyIHtcbiAgd2lkdGg6IDJyZW07XG4gIGhlaWdodDogMnJlbTtcbiAgYm9yZGVyLXJhZGl1czogMXJlbTtcbn0iXX0= */\"","import {Component, ElementRef, OnInit, ViewChild} from '@angular/core';\nimport {NgbActiveModal} from '@ng-bootstrap/ng-bootstrap';\nimport {ImagesService} from '../../data-services/images.service';\n\nimport {\n  faCropAlt,\n  faSearchPlus, faSearchMinus,\n  faUndo, faRedo,\n  faCheck, faBan,\n  faArrowsAlt, faTimes, faTimesCircle } from '@fortawesome/free-solid-svg-icons';\nimport {CropperComponent} from 'angular-cropperjs';\n\n@Component({\n  selector: 'app-show-raum-image',\n  templateUrl: './show-raum-image.component.html',\n  styleUrls: ['./show-raum-image.component.scss']\n})\nexport class ShowRaumImageComponent implements OnInit {\n  // Editor-Button-Icons\n  faCrop = faCropAlt;\n  faMove = faArrowsAlt;\n  faSearchPlus = faSearchPlus;\n  faSearchMinus = faSearchMinus;\n  faRotateLeft = faUndo;\n  faRotateRight = faRedo;\n  faCheck = faCheck;\n  faBan = faBan;\n  faClose = faTimes;\n\n  // Get with @ViewChild\n  @ViewChild('angularCropper', { static: false })\n  public angularCropper: CropperComponent;\n  titel = '';\n\n  uuid?: string = null;\n  imageUrl = null;\n  error = '';\n  config: any = {\n    // aspectRatio : 16 / 9,\n    autoCrop: false,\n    dragMode : 'move',\n    background : true,\n    movable: true,\n    rotatable : true,\n    scalable: true,\n    zoomable: true,\n    restore: true,\n    viewMode: 0,\n    checkImageOrigin : true,\n    cropend: this.cropEnd.bind(this),\n    zoom: this.zoomed.bind(this),\n    // ready: this.onCropperReady.bind(this),\n    checkCrossOrigin: true,\n    wheelZoomRatio: 0.1,\n    toggleDragModeOnDblclick: true\n  };\n  cropStatus = 0;\n\n  constructor(public activeModal: NgbActiveModal, private imageService: ImagesService) { }\n\n  ngOnInit() {\n    console.log('called ShowArtikelImageComponent.ngOnInit');\n  }\n\n  setImageUuid(uuid: string) {\n    this.uuid = uuid;\n    console.log('called setMcuuid', this.uuid);\n    this.loadImageByUuid(this.uuid).then(mSuccess => {\n      if (!mSuccess) {\n          alert('Bild konnte leider nicht geladen werden!');\n        }\n    });\n  }\n\n  setTitel(titel: string) {\n    this.titel = titel;\n  }\n\n  async loadImageByUuid(uuid: string): Promise<boolean> {\n    console.log('called loadImageByGcuuid', uuid);\n    if (uuid) {\n      return this.imageService.getImageByUuid(uuid)\n        .then( image => {\n          if (image) {\n            this.imageUrl = image.data_url.replace(/(\\r\\n|\\n|\\r)/gm, '');\n            return true;\n          }\n          return false;\n        })\n        .catch( err => {\n          console.error( err );\n          return false;\n        });\n    }\n    return false;\n  }\n\n  zoomed(e) {\n    console.log('zoomListener Event: ', e, 'this.angularCropper: ', this.angularCropper);\n    const canvasData = this.angularCropper.cropper.getCanvasData();\n    const containerData = this.angularCropper.cropper.getContainerData();\n    const ratio = e.detail.ratio;\n    const oldRatio = e.detail.oldRatio;\n    const minRatioW = containerData.width / canvasData.naturalWidth;\n    const minRatioH = containerData.height / canvasData.naturalHeight;\n\n    if (ratio < oldRatio && (ratio < minRatioW || ratio < minRatioH) ) { // Zoom-Out\n      e.preventDefault(); // Prevent zoom out\n      return false;\n    }\n  }\n\n  cropEnd(e) {\n    if (['n', 'ne', 'e', 'se', 's', 'sw', 'w', 'nw'].indexOf(e.detail.action) !== -1) {\n      this.cropStatus = 5;\n    } else if (e.detail.action === 'move') {\n      const canvasData = this.angularCropper.cropper.getCanvasData();\n      const containerData = this.angularCropper.cropper.getContainerData();\n      console.log('cropEnd move', { e, canvasData, containerData });\n      const toLeft = canvasData.left > 0 ? 0 : canvasData.left;\n      const toTop = canvasData.top > 0 ? 0 : canvasData.top;\n      if (canvasData.left > 0 || canvasData.top > 0) {\n        this.angularCropper.cropper.moveTo(toLeft, toTop);\n      }\n    }\n  }\n\n  rotateLeft() {\n    this.angularCropper.cropper.rotate(-90);\n  }\n  rotateRight() {\n    this.angularCropper.cropper.rotate(90);\n  }\n  rotate180() {\n    this.angularCropper.cropper.rotate(180);\n  }\n  zoomIn() {\n    const canvasData = this.angularCropper.cropper.getCanvasData();\n    console.log('zoomIn ', { canvasData });\n    this.angularCropper.cropper.zoom(.1);\n  }\n  zoomOut(useRatio?: number) {\n    const ratio = (typeof useRatio === 'undefined' || useRatio >= 0) ? -0.1 : useRatio;\n    console.log('zoom( -0.1) this.angularCropper:', this.angularCropper);\n    const canvasData = this.angularCropper.cropper.getCanvasData();\n    const cropBoxData = this.angularCropper.cropper.getCropBoxData();\n    const containerData = this.angularCropper.cropper.getContainerData();\n    const cad = canvasData;\n    const crd = cropBoxData;\n    const cod = containerData;\n    const caw = cad.width;\n    const cah = cad.height;\n    const crw = crd.width;\n    const crh = crd.height;\n    const cow = cod.width;\n    const coh = cod.height;\n    console.log({ratio, caw, cah, cow, coh, crw, crh, canvasData, cropBoxData, containerData });\n    if (caw < cow || cah < coh) {\n      console.error('Permission denied to zoom out smaller than canvas');\n      return;\n    }\n    console.log('Permission allowed to zoom out >= canvas');\n    this.angularCropper.cropper.zoom(ratio);\n  }\n  escape() {\n    this.imageUrl = null;\n  }\n  close() {\n    this.escape();\n    this.activeModal.close();\n  }\n\n}\n","export default \".progress.progress-elemente {\\n  height: calc(1.5em + 0.75rem + 2px);\\n}\\n\\n.select-inventory .input-group-text {\\n  min-width: 5.5em;\\n}\\n\\n.dropdown.myDropdown {\\n  width: 100%;\\n}\\n\\n.dropdown.myDropdown [aria-haspopup=true] {\\n  text-align: left;\\n  position: relative;\\n  text-indent: 1em;\\n  border-top-left-radius: 0;\\n  border-bottom-left-radius: 0;\\n}\\n\\n.dropdown.myDropdown [aria-haspopup=true][aria-expanded=true] {\\n  border-bottom-right-radius: 0;\\n  border-bottom-left-radius: 0;\\n}\\n\\n.dropdown.myDropdown [aria-haspopup=true]::after {\\n  position: absolute;\\n  right: 0;\\n  top: 0;\\n  margin-top: 1em;\\n  margin-right: 1em;\\n}\\n\\n.dropdown.myDropdown .dropdown-menu {\\n  width: 100%;\\n  border-top-right-radius: 0px;\\n  border-top-left-radius: 0px;\\n  margin-top: 1px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2VsZWN0LWludmVudG9yeS9DOlxcVXNlcnNcXGYuYmFydGhvbGRcXHdvcmtzcGFjZVxcRXJ3aW5JbnZlbnRhcmlzaWVydW5nXFxhcHBzXFxmcm9udGVuZFJldHJ1Y3R1cmUvc3JjXFxhcHBcXHBhZ2VzXFxzZWxlY3QtaW52ZW50b3J5XFxzZWxlY3QtaW52ZW50b3J5LmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9wYWdlcy9zZWxlY3QtaW52ZW50b3J5L3NlbGVjdC1pbnZlbnRvcnkuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtQ0FBQTtBQ0NGOztBREVBO0VBQ0UsZ0JBQUE7QUNDRjs7QURDQTtFQUNFLFdBQUE7QUNFRjs7QURBQTtFQUNFLGdCQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLHlCQUFBO0VBQ0EsNEJBQUE7QUNHRjs7QUREQTtFQUNFLDZCQUFBO0VBQ0EsNEJBQUE7QUNJRjs7QURGQTtFQUNFLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLE1BQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7QUNLRjs7QURGQTtFQUNFLFdBQUE7RUFDQSw0QkFBQTtFQUNBLDJCQUFBO0VBQ0EsZUFBQTtBQ0tGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvc2VsZWN0LWludmVudG9yeS9zZWxlY3QtaW52ZW50b3J5LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnByb2dyZXNzLnByb2dyZXNzLWVsZW1lbnRlIHtcclxuICBoZWlnaHQ6Y2FsYygxLjVlbSArIDAuNzVyZW0gKyAycHgpO1xyXG59XHJcblxyXG4uc2VsZWN0LWludmVudG9yeSAuaW5wdXQtZ3JvdXAtdGV4dCB7XHJcbiAgbWluLXdpZHRoOiA1LjVlbTtcclxufVxyXG4uZHJvcGRvd24ubXlEcm9wZG93biB7XHJcbiAgd2lkdGg6MTAwJTtcclxufVxyXG4uZHJvcGRvd24ubXlEcm9wZG93biBbYXJpYS1oYXNwb3B1cD10cnVlXSB7XHJcbiAgdGV4dC1hbGlnbjogbGVmdDtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgdGV4dC1pbmRlbnQ6IDFlbTtcclxuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwO1xyXG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDA7XHJcbn1cclxuLmRyb3Bkb3duLm15RHJvcGRvd24gW2FyaWEtaGFzcG9wdXA9dHJ1ZV1bYXJpYS1leHBhbmRlZD10cnVlXSB7XHJcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XHJcbiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDtcclxufVxyXG4uZHJvcGRvd24ubXlEcm9wZG93biBbYXJpYS1oYXNwb3B1cD10cnVlXTo6YWZ0ZXIge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICByaWdodDogMDtcclxuICB0b3A6IDA7XHJcbiAgbWFyZ2luLXRvcDogMWVtO1xyXG4gIG1hcmdpbi1yaWdodDogMWVtO1xyXG59XHJcblxyXG4uZHJvcGRvd24ubXlEcm9wZG93biAuZHJvcGRvd24tbWVudSB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDBweDtcclxuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwcHg7XHJcbiAgbWFyZ2luLXRvcDogMXB4O1xyXG59XHJcbiIsIi5wcm9ncmVzcy5wcm9ncmVzcy1lbGVtZW50ZSB7XG4gIGhlaWdodDogY2FsYygxLjVlbSArIDAuNzVyZW0gKyAycHgpO1xufVxuXG4uc2VsZWN0LWludmVudG9yeSAuaW5wdXQtZ3JvdXAtdGV4dCB7XG4gIG1pbi13aWR0aDogNS41ZW07XG59XG5cbi5kcm9wZG93bi5teURyb3Bkb3duIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5kcm9wZG93bi5teURyb3Bkb3duIFthcmlhLWhhc3BvcHVwPXRydWVdIHtcbiAgdGV4dC1hbGlnbjogbGVmdDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0ZXh0LWluZGVudDogMWVtO1xuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwO1xuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwO1xufVxuXG4uZHJvcGRvd24ubXlEcm9wZG93biBbYXJpYS1oYXNwb3B1cD10cnVlXVthcmlhLWV4cGFuZGVkPXRydWVdIHtcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDA7XG59XG5cbi5kcm9wZG93bi5teURyb3Bkb3duIFthcmlhLWhhc3BvcHVwPXRydWVdOjphZnRlciB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogMDtcbiAgbWFyZ2luLXRvcDogMWVtO1xuICBtYXJnaW4tcmlnaHQ6IDFlbTtcbn1cblxuLmRyb3Bkb3duLm15RHJvcGRvd24gLmRyb3Bkb3duLW1lbnUge1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDBweDtcbiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMHB4O1xuICBtYXJnaW4tdG9wOiAxcHg7XG59Il19 */\"","import {Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {DataService, TableLoadingStatus, TablesLoadingStatus} from '../../shared/services/data.service';\r\nimport {NgForm} from '@angular/forms';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {DBDIGebaeude, DBDIInventuren, DBDIMandanten, DBDIRaeume} from '../../shared/interfaces/dexie.interfaces';\r\nimport {AuthService} from '../auth/auth.service';\r\nimport {BasedataService} from '../../shared/services/basedata.service';\r\nimport {InventoryProgress, InventoryProgressService} from '../../shared/inventory-progress/inventory-progress.service';\r\nimport { faSyncAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport {ConnectionService, ConnectionState} from '../../shared/services/connection-service.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {DbsyncLogService, LoadingMetaData, LoadingMetaMessage} from '../../shared/services/dbsync-log.service';\r\nimport {BarcodeService} from '../invent-form/data-services/barcode.service';\r\n\r\nenum StatusLoadingInventories {\r\n  None,\r\n  WaitingForNetwork,\r\n  WaitingForServerAccess,\r\n  Pending,\r\n  Loading,\r\n  FinishedSuccessful,\r\n  Failure\r\n}\r\n\r\ninterface LastInventoryDetails {\r\n  jobid: number;\r\n  mid: number;\r\n  gid: number;\r\n  Titel: string;\r\n  Gebaeude: string;\r\n  Mandant: string;\r\n  routeParams: [number, number, string?];\r\n  ruuid?: string;\r\n  Etage?: string;\r\n  Raum?: string;\r\n  Raumbezeichnung?: string;\r\n}\r\n\r\ninterface InventurIds {\r\n  mid: number;\r\n  jobid?: number;\r\n  gid?: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-select-inventory',\r\n  templateUrl: './select-inventory.component.html',\r\n  styleUrls: ['./select-inventory.component.scss']\r\n})\r\nexport class SelectInventoryComponent implements OnInit, OnDestroy {\r\n\r\n  @ViewChild('f', {static: false })\r\n  selectForm: NgForm;\r\n\r\n  faSyncIcon = faSyncAlt;\r\n  hasConnection = false;\r\n  hasServerConnection = false;\r\n\r\n  public status = '';\r\n  public statusLoadingUserInventories = StatusLoadingInventories.None;\r\n  public loadedUserInventories = false;\r\n\r\n  totalElements = 0;\r\n  doneElements = 0;\r\n\r\n  private jobid?: number;\r\n  inventory?: DBDIInventuren;\r\n  client: DBDIMandanten;\r\n  building: DBDIGebaeude;\r\n  loading = false;\r\n\r\n  clients: DBDIMandanten[];\r\n  buildings: DBDIGebaeude[];\r\n\r\n  private routingSubscription: any;\r\n\r\n  inventories: DBDIInventuren[];\r\n  inventoriesSelectable: DBDIInventuren[];\r\n  lastInventory: DBDIInventuren;\r\n  lastBuilding: DBDIGebaeude;\r\n  lastRaum: DBDIRaeume;\r\n  lastInventoryDetails: LastInventoryDetails;\r\n  private connectionSubscription: Subscription;\r\n\r\n  subscriptionMetaMsg: Subscription;\r\n  subscriptionMetaErr: Subscription;\r\n  subscriptionMetaData: Subscription;\r\n  subscriptionLoadingStatus: Subscription;\r\n  listMetaData: LoadingMetaData[] = [];\r\n  listMetaMsg: {type: string, message: string}[] = [];\r\n  lastMetaErr = '';\r\n  lastMetaMsg = '';\r\n  showListmetaMsg = false;\r\n\r\n  tablesLoadingStatus: TableLoadingStatus[] = [];\r\n  tablesLoadingStarted = false;\r\n  tablesLoadingDetailsIsExpanded = false;\r\n\r\n  constructor(\r\n    private dataService: DataService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private auth: AuthService,\r\n    private baseData: BasedataService,\r\n    private progressService: InventoryProgressService,\r\n    private connection: ConnectionService,\r\n    private dbsyncLogService: DbsyncLogService,\r\n    private bcLookupService: BarcodeService) {\r\n  }\r\n\r\n  get progressAmount(): number {\r\n    if (typeof this.doneElements !== 'number' || this.doneElements <= 0) {\r\n      return 0;\r\n    }\r\n    if (typeof this.totalElements !== 'number') {\r\n      return 0;\r\n    }\r\n    const done = this.doneElements;\r\n    const total = this.totalElements;\r\n    return total > 0 ? Math.round((done * 1000) / total) / 10 : 0;\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n    this.loading = false;\r\n    this.lastInventory = this.baseData.getCurrentInventur();\r\n    this.lastBuilding = this.baseData.getCurrentGebaeude();\r\n    this.lastRaum = this.baseData.getCurrentRaum();\r\n    this.tablesLoadingStarted = Object.keys(this.tablesLoadingStatus).length > 0;\r\n\r\n    this.routingSubscription = this.route.params.subscribe(params => {\r\n      console.log({params});\r\n    });\r\n\r\n    this.hasConnection = this.connection.hasServerAccess;\r\n    this.hasServerConnection = this.connection.hasServerAccess;\r\n\r\n    this.subscriptionLoadingStatus = this.dataService.loadingDataChanged\r\n      .subscribe( (stat: TablesLoadingStatus) => {\r\n        this.tablesLoadingStarted = true;\r\n        for (const tbl in stat) {\r\n          if (!stat.hasOwnProperty(tbl)) {\r\n            continue;\r\n          }\r\n          if (!this.tablesLoadingStatus.find( (tblStat) => tblStat.table === tbl)) {\r\n            this.tablesLoadingStatus.push(stat[tbl]);\r\n            continue;\r\n          }\r\n          const tblIdx = this.tablesLoadingStatus.findIndex( (tblStat) => tblStat.table === tbl);\r\n\r\n          for (const statKey in stat[tbl]) {\r\n            if ( stat[tbl].hasOwnProperty(statKey) && stat[tbl][statKey] !== this.tablesLoadingStatus[tblIdx][statKey]) {\r\n              this.tablesLoadingStatus[tblIdx][statKey] = stat[tbl][statKey];\r\n            }\r\n          }\r\n        }\r\n    });\r\n\r\n    this.connectionSubscription = this.connection.monitor().subscribe( (conn: ConnectionState) => {\r\n      this.hasConnection = conn.hasNetworkConnection;\r\n      this.hasServerConnection = conn.hasServerAccess;\r\n\r\n      if (this.statusLoadingUserInventories < StatusLoadingInventories.FinishedSuccessful) {\r\n        this.checkLoadUserInventories();\r\n      }\r\n    });\r\n\r\n    this.subscriptionMetaData = this.dbsyncLogService.loadingMetaData.subscribe( (data: LoadingMetaData) => {\r\n      if (data.table) {\r\n        const existing = this.listMetaData.find((item) => item.table === data.table);\r\n        if (existing) {\r\n          existing.message = data.message;\r\n          if (data.executed) {\r\n            existing.executed = data.executed;\r\n          }\r\n          if (data.total) {\r\n            existing.total = data.total;\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    this.subscriptionMetaMsg = this.dbsyncLogService.loadingMetaMessage.subscribe( (data: LoadingMetaMessage) => {\r\n      this.lastMetaMsg = data.message;\r\n      this.listMetaMsg.push({\r\n        type: 'success',\r\n        message: data.message\r\n      });\r\n    });\r\n\r\n    this.subscriptionMetaErr = this.dbsyncLogService.loadingMetaError.subscribe( (data) => {\r\n      this.lastMetaErr = data.message;\r\n      this.listMetaMsg.push({\r\n        type: 'danger',\r\n        message: data.message\r\n      });\r\n    });\r\n\r\n    if (!this.connection.hasNetworkConnection) {\r\n      this.loadUserInventories().then( (success) => {\r\n        this.statusLoadingUserInventories = success\r\n          ? StatusLoadingInventories.FinishedSuccessful\r\n          : StatusLoadingInventories.Failure;\r\n      }).catch( (err) => {\r\n        this.statusLoadingUserInventories = StatusLoadingInventories.Failure;\r\n        this.status = JSON.stringify( err );\r\n      });\r\n    }\r\n  }\r\n\r\n  closeMsg(msg: any) {\r\n    this.listMetaMsg.splice(this.listMetaMsg.indexOf(msg), 1);\r\n  }\r\n\r\n  private async loadLastInventoryDetails() {\r\n    this.lastInventoryDetails = null;\r\n    const inv = this.baseData.getCurrentInventur();\r\n    const geb = this.baseData.getCurrentGebaeude();\r\n    const mandant = await this.dataService.getClient(inv.mid);\r\n    const rm = this.baseData.getCurrentRaum();\r\n\r\n    if (inv && geb && mandant) {\r\n      this.lastInventoryDetails = {\r\n        jobid: inv.jobid,\r\n        mid: inv.mid,\r\n        gid: geb.gid,\r\n        Titel: inv.Titel,\r\n        Mandant: mandant.Mandant,\r\n        Gebaeude: geb.Gebaeude,\r\n        routeParams: [inv.mid, geb.gid],\r\n        Etage: null,\r\n        Raum: null,\r\n        Raumbezeichnung: null\r\n      };\r\n      if (rm) {\r\n        this.lastInventoryDetails.ruuid = rm.uuid;\r\n        this.lastInventoryDetails.Etage = rm.Etage;\r\n        this.lastInventoryDetails.Raum = rm.Raum;\r\n        this.lastInventoryDetails.Raumbezeichnung = rm.Raumbezeichnung;\r\n        this.lastInventoryDetails.routeParams.push( rm.uuid );\r\n      }\r\n    }\r\n  }\r\n\r\n  gotoLastInventory() {\r\n    if (this.lastInventoryDetails && this.lastInventoryDetails.routeParams.length > 1) {\r\n      this.gotoFormInventory.apply(this, this.lastInventoryDetails.routeParams );\r\n    }\r\n  }\r\n\r\n  private gotoFormInventory(mid: number, gid: number, ruuid?: string): void {\r\n    const routeData = [ '/form-inventory', mid, gid ];\r\n    if (ruuid && ruuid.length > 0) {\r\n      routeData.push(ruuid);\r\n    }\r\n    this.router.navigate( routeData );\r\n  }\r\n\r\n  public checkLoadUserInventories(onlineOnly = true) {\r\n    const stat = this.statusLoadingUserInventories;\r\n    if (stat < StatusLoadingInventories.FinishedSuccessful) {\r\n      if (stat < StatusLoadingInventories.Pending) {\r\n        if (!this.hasConnection) {\r\n          this.statusLoadingUserInventories = StatusLoadingInventories.WaitingForNetwork;\r\n          return;\r\n        }\r\n\r\n        if (!this.hasServerConnection) {\r\n          this.statusLoadingUserInventories = StatusLoadingInventories.WaitingForServerAccess;\r\n          return;\r\n        }\r\n\r\n        this.statusLoadingUserInventories = StatusLoadingInventories.Pending;\r\n        this.loadUserInventories().then( (success) => {\r\n          this.statusLoadingUserInventories = success\r\n            ? StatusLoadingInventories.FinishedSuccessful\r\n            : StatusLoadingInventories.Failure;\r\n        }).catch( (err) => {\r\n          this.statusLoadingUserInventories = StatusLoadingInventories.Failure;\r\n          this.status = JSON.stringify( err );\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  public getStatusLoadingInventoryText(status: StatusLoadingInventories): string {\r\n    return StatusLoadingInventories[status];\r\n  }\r\n\r\n  public async loadUserInventories(): Promise<boolean> {\r\n    console.log('ngOnInit select-iventory.components.ts');\r\n    const uid = this.auth.getUser().id;\r\n    const lastMid = this.baseData.getCurrentMid() || 0;\r\n    const lastGid = this.baseData.getCurrentGid() || 0;\r\n    const lastJobid = this.baseData.getCurrentJobid();\r\n    const lastRuuid = this.baseData.getCurrentRuuid();\r\n\r\n    return await this.dataService.getUserAssignedInventories( uid )\r\n      .then( (result: DBDIInventuren[]) => {\r\n        console.log({ called: 'this.dataService.getUserAssignedInventories', result});\r\n        this.inventories = result;\r\n        this.inventoriesSelectable = this.inventories;\r\n        this.lastInventory = this.inventories.find( (inv) => inv.jobid === lastJobid);\r\n\r\n        let defaultMid = 0;\r\n        let defaultGid = 0;\r\n        let defaultJobid = 0;\r\n\r\n        this.statusLoadingUserInventories = StatusLoadingInventories.Loading;\r\n\r\n        if (this.lastInventory) {\r\n          this.loadLastInventoryDetails();\r\n          defaultMid = this.lastInventory.mid;\r\n          defaultGid = this.lastInventory.gid;\r\n          defaultJobid = this.lastInventory.jobid;\r\n        }\r\n\r\n        const aMids = this.inventories.map<number>( (itm) => itm.mid );\r\n        console.log( 'ngOnInit', { uid, aMids });\r\n\r\n        return this.dataService.getClientList()\r\n          .then( (mandanten: DBDIMandanten[]) => {\r\n            this.clients = mandanten.filter( (itm) => aMids.indexOf( itm.mid ) !== -1 );\r\n            return this.clients;\r\n          })\r\n          .then( clientList => {\r\n            this.setDefaultSelection({\r\n              mid: defaultMid,\r\n              gid: defaultGid,\r\n              jobid: defaultJobid\r\n            });\r\n            return true;\r\n          })\r\n          .catch( (err) => {\r\n            this.status = JSON.stringify(err);\r\n            return false;\r\n          });\r\n      })\r\n      .catch( (err) => {\r\n        this.status = JSON.stringify(err);\r\n        return false;\r\n      });\r\n  }\r\n\r\n  public setDefaultSelection(ids: InventurIds) {\r\n    const clientListIdx = this.getClientListIdxByMid(ids.mid);\r\n    if (-1 !== clientListIdx) {\r\n      const clientChanged = this.clientChanged( clientListIdx);\r\n\r\n      if (ids.gid || ids.jobid) {\r\n        clientChanged.then( (success) => {\r\n          if (!success) {\r\n            return false;\r\n          }\r\n          if (ids.gid) {\r\n            const buildingsListIdx = this.getBuildingListIdxByGid(ids.gid);\r\n            this.buildingChanged(buildingsListIdx);\r\n          }\r\n          if (ids.jobid) {\r\n            this.inventoriesSelectable = this.inventories.filter( (inv) => inv.mid === ids.mid);\r\n            const checkInv = this.inventoriesSelectable.find( (inv) => inv.jobid === ids.jobid);\r\n            if (checkInv) {\r\n              this.inventory = checkInv;\r\n              if (this.lastBuilding) {\r\n                this.inventorySelectionChanged(checkInv.jobid).then(() => {\r\n                  const checkGeb = this.buildings.find((b: DBDIGebaeude) => b.gid === this.lastBuilding.gid);\r\n                  if (checkGeb) {\r\n                    this.building = checkGeb;\r\n                  }\r\n                });\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  private getClientListIdxByMid(mid: number): number {\r\n    if (!mid) {\r\n      return -1;\r\n    }\r\n    for (let i = 0; i < this.clients.length; i++) {\r\n      if (this.clients[i].mid === mid) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  private getBuildingListIdxByGid(gid: number): number {\r\n    if (!gid) {\r\n      return -1;\r\n    }\r\n    for (let i = 0; i < this.buildings.length; i++) {\r\n      if (this.buildings[i].mid === gid) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routingSubscription.unsubscribe();\r\n    this.connectionSubscription.unsubscribe();\r\n\r\n    this.subscriptionMetaMsg.unsubscribe();\r\n    this.subscriptionMetaErr.unsubscribe();\r\n    this.subscriptionMetaData.unsubscribe();\r\n  }\r\n\r\n  async clientChanged(clientIdx) {\r\n    this.client = this.clients[ clientIdx];\r\n    console.log('client changed to ', { clientIdx, this_clients: this.clients, this_client: this.client});\r\n    this.buildings = await this.dataService.getBuildingList( this.client.mid );\r\n    this.inventoriesSelectable = this.inventories.filter( (inv) => inv.mid === this.client.mid );\r\n    console.log( 'assign selection buildings: ', this.buildings );\r\n    if (this.inventory && this.inventory.mid !== this.client.mid) {\r\n      this.inventory = null;\r\n      this.building = null;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  async onSubmit() {\r\n    this.loading = true;\r\n    console.log( this.selectForm );\r\n    if (!this.client || !this.inventory || !this.building) {\r\n      this.status = 'Bitte vervollstndige die Auswahl!';\r\n      return;\r\n    }\r\n\r\n    this.jobid = this.inventory.jobid;\r\n    this.baseData.setCurrentMandant(this.client);\r\n    this.baseData.setCurrentInventur( this.inventory );\r\n    this.baseData.setCurrentGebaeude( this.building );\r\n\r\n    if (\r\n      this.lastInventory && this.lastInventory.jobid === this.jobid\r\n      && this.lastBuilding && this.lastBuilding.gid === this.building.gid\r\n      && await this.dataService.hasValidInventurRevId(this.inventory.jobid)\r\n      && await this.dataService.hasAllInventurData(this.inventory.jobid)\r\n    ) {\r\n      console.log('SelectInventoryComponent #410 onSubmit gotoLastInventory');\r\n      await this.bcLookupService.rebuildOnRunningSystemByJobid(this.jobid);\r\n      this.gotoLastInventory();\r\n    } else {\r\n      console.log('SelectInventoryComponent #414 onSubmit dataService.loadInventurDataByInventurId', this.inventory.jobid);\r\n      this.status = 'Bitte warten .... Inventarisierungsdaten werden vom Server geladen.';\r\n      await this.dataService.loadInventurDataByInventurId( this.inventory.jobid );\r\n      this.status = 'Daten wurden geladen';\r\n      // More Control for navigate\r\n      this.router.navigate([\r\n        '/form-inventory', this.client.mid, this.building.gid\r\n      ]);\r\n    }\r\n  }\r\n\r\n  buildingChanged(buildingListIdx: number) {\r\n    this.building = this.buildings[ buildingListIdx ];\r\n\r\n    this.progressService.getCurrentGebaeudeProgress().then( (progress: InventoryProgress) => {\r\n      this.totalElements = progress.total;\r\n      this.doneElements = progress.done;\r\n    });\r\n  }\r\n\r\n  async inventorySelectionChanged(jobid: number) {\r\n    this.inventory = this.inventories.find((ivy) => ivy.jobid === jobid);\r\n    this.buildings = await this.dataService.getBuildingListByJobid(this.inventory.jobid, this.inventory.mid);\r\n  }\r\n\r\n}\r\n","export default \".variables-list .row + .row {\\n  border-top: 1px solid rgba(86, 61, 124, 0.2);\\n  padding-top: 4px;\\n  padding-bottom: 4px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2V0dGluZ3MvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxwYWdlc1xcc2V0dGluZ3NcXHNldHRpbmdzLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9wYWdlcy9zZXR0aW5ncy9zZXR0aW5ncy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDRDQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvc2V0dGluZ3Mvc2V0dGluZ3MuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudmFyaWFibGVzLWxpc3QgLnJvdyArIC5yb3cge1xyXG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDg2LCA2MSwgMTI0LCAuMik7XHJcbiAgcGFkZGluZy10b3A6IDRweDtcclxuICBwYWRkaW5nLWJvdHRvbTogNHB4O1xyXG59XHJcbiIsIi52YXJpYWJsZXMtbGlzdCAucm93ICsgLnJvdyB7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDg2LCA2MSwgMTI0LCAwLjIpO1xuICBwYWRkaW5nLXRvcDogNHB4O1xuICBwYWRkaW5nLWJvdHRvbTogNHB4O1xufSJdfQ== */\"","import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\nimport {VariablesService} from '../../shared/services/variables.service';\r\nimport {BasedataService} from '../../shared/services/basedata.service';\r\nimport {BarcodeService} from '../invent-form/data-services/barcode.service';\r\nimport {DBDIVariables} from '../../shared/interfaces/dexie.interfaces';\r\nimport {DexieService} from '../../shared/services/dexie.service';\r\nimport {SoundsService} from '../../shared/services/sounds.service';\r\nimport {ScanDetectData} from '../../shared/components/scannerdetection/scannerdetection.component';\r\nimport Dexie from 'dexie';\r\nimport {Router} from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-settings',\r\n  templateUrl: './settings.component.html',\r\n  styleUrls: ['./settings.component.scss']\r\n})\r\nexport class SettingsComponent implements OnInit {\r\n  variableList: DBDIVariables[] = [];\r\n  buildBcLookup = false;\r\n  enableManualBCInput: boolean;\r\n  useOverlay = 0;\r\n  blobAlert?: string;\r\n  dbName: string;\r\n  dbVersion: number;\r\n  private blobAlertTimer = null;\r\n\r\n  @Output() changedManualBCInput = new EventEmitter<boolean>();\r\n\r\n  constructor(\r\n    private dexieService: DexieService,\r\n    private variables: VariablesService,\r\n    private baseData: BasedataService,\r\n    private barcodeLookup: BarcodeService,\r\n    private sounds: SoundsService,\r\n    private router: Router) {\r\n    this.dbName = this.dexieService.name;\r\n    this.dbVersion = this.dexieService.verno;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.reloadVariableList();\r\n\r\n    this.variables.get('manualBarcodeInput', false).then( (val) => {\r\n      this.enableManualBCInput = !!val;\r\n    });\r\n  }\r\n\r\n  async reloadVariableList() {\r\n    this.variableList = await this.variables.getAll();\r\n  }\r\n\r\n  async changeManualBCInput(event) {\r\n    console.log('changeManualBCInput', { event });\r\n    this.variables.set('manualBarcodeInput', this.enableManualBCInput);\r\n    this.changedManualBCInput.emit( this.enableManualBCInput);\r\n  }\r\n\r\n  async dbClear() {\r\n    this.baseData.setCurrentInventur(null);\r\n    this.baseData.setCurrentRaum(null);\r\n    this.baseData.setCurrentGebaeude(null);\r\n    this.baseData.setCurrentRaum(null);\r\n    await this.dexieService.clearDB();\r\n    this.router.navigate(['/select-inventory']);\r\n  }\r\n\r\n  async dbDelete() {\r\n    this.baseData.setCurrentInventur(null);\r\n    this.baseData.setCurrentRaum(null);\r\n    this.baseData.setCurrentGebaeude(null);\r\n    this.baseData.setCurrentRaum(null);\r\n    await this.dexieService.deleteDB();\r\n    this.router.navigate(['/select-inventory']);\r\n  }\r\n\r\n  async reIndexBarcodeLookup() {\r\n    this.buildBcLookup = true;\r\n    console.log('Start rebuildOnRunningSystem');\r\n    this.barcodeLookup.rebuildOnRunningSystem().then( (result) => {\r\n      console.log('Finished BC-Lookup-Rebuild', { result });\r\n    }).catch( (err) => {\r\n      console.error(err);\r\n    }).finally( () => {\r\n      this.buildBcLookup = false;\r\n    });\r\n    this.reloadVariableList();\r\n  }\r\n\r\n  async playSuccess() {\r\n    this.showBlobAlertSuccess();\r\n    this.sounds.playSuccess();\r\n  }\r\n\r\n  async playError() {\r\n    this.showBlobAlertError();\r\n    this.sounds.playError();\r\n  }\r\n\r\n  showBlobAlertSuccess() {\r\n    this.showBlobAlert('success');\r\n  }\r\n\r\n  showBlobAlertError() {\r\n    this.showBlobAlert('danger');\r\n  }\r\n\r\n  showBlobAlert(alertType: string) {\r\n    this.useOverlay = this.useOverlay < 2 ? this.useOverlay + 1 : 1;\r\n    this.blobAlert = null;\r\n    if (this.blobAlertTimer) {\r\n      clearTimeout( this.blobAlertTimer );\r\n    }\r\n    this.blobAlert = alertType;\r\n    this.blobAlertTimer = setTimeout(\r\n      () => {\r\n        this.blobAlert = null;\r\n        this.useOverlay = 0;\r\n      },\r\n      1200\r\n    );\r\n  }\r\n\r\n}\r\n","export default \".app-navbar,\\nnav.navbar {\\n  background-color: #f2f2f2;\\n}\\n\\nnav.navbar .navbar-brand img.logo {\\n  width: 40vw;\\n  max-width: 221px;\\n}\\n\\n.rowed-inline {\\n  justify-content: space-between;\\n  flex-direction: row;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvbmdiaGVhZGVyL0M6XFxVc2Vyc1xcZi5iYXJ0aG9sZFxcd29ya3NwYWNlXFxFcndpbkludmVudGFyaXNpZXJ1bmdcXGFwcHNcXGZyb250ZW5kUmV0cnVjdHVyZS9zcmNcXGFwcFxcc2hhcmVkXFxjb21wb25lbnRzXFxuZ2JoZWFkZXJcXG5nYmhlYWRlci5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvbmdiaGVhZGVyL25nYmhlYWRlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7RUFFRSx5QkFBQTtBQ0NGOztBRENBO0VBQ0UsV0FBQTtFQUNBLGdCQUFBO0FDRUY7O0FEQ0E7RUFDRSw4QkFBQTtFQUNBLG1CQUFBO0FDRUYiLCJmaWxlIjoic3JjL2FwcC9zaGFyZWQvY29tcG9uZW50cy9uZ2JoZWFkZXIvbmdiaGVhZGVyLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmFwcC1uYXZiYXIsXHJcbm5hdi5uYXZiYXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7XHJcbn1cclxubmF2Lm5hdmJhciAubmF2YmFyLWJyYW5kIGltZy5sb2dvIHtcclxuICB3aWR0aDogNDB2dztcclxuICBtYXgtd2lkdGg6MjIxcHg7XHJcbn1cclxuXHJcbi5yb3dlZC1pbmxpbmUge1xyXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICBmbGV4LWRpcmVjdGlvbjogcm93O1xyXG59XHJcbiIsIi5hcHAtbmF2YmFyLFxubmF2Lm5hdmJhciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7XG59XG5cbm5hdi5uYXZiYXIgLm5hdmJhci1icmFuZCBpbWcubG9nbyB7XG4gIHdpZHRoOiA0MHZ3O1xuICBtYXgtd2lkdGg6IDIyMXB4O1xufVxuXG4ucm93ZWQtaW5saW5lIHtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xufSJdfQ== */\"","import {Component, Input} from '@angular/core';\r\nimport { faCog, faHome, faPlayCircle, faPowerOff, faSync, faUser } from '@fortawesome/free-solid-svg-icons';\r\nimport {BasedataService} from '../../services/basedata.service';\r\nimport {Router} from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-ngbheader',\r\n  templateUrl: './ngbheader.component.html',\r\n  styleUrls: ['./ngbheader.component.scss']\r\n})\r\nexport class NgbheaderComponent {\r\n  collapsed = true;\r\n  faCog = faCog;\r\n  faHome = faHome;\r\n  faPlayCircle = faPlayCircle;\r\n  faPowerOff = faPowerOff;\r\n  faSync = faSync;\r\n  faUser = faUser;\r\n\r\n  @Input() isLoginPage = false;\r\n\r\n  constructor(private baseData: BasedataService, private router: Router) {\r\n  }\r\n\r\n  continueLastInventory(): Promise<boolean> {\r\n    //  routerLink=\"/form-inventory\"\r\n    // { path: 'form-inventory/:clientid/:buildingid/:roomid', component: InventFormComponent },\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const mid = this.baseData.getCurrentMid();\r\n    const gid = this.baseData.getCurrentGid();\r\n    const room = this.baseData.getCurrentRaum();\r\n    console.log('NgbheaderComponent #25 continuelastInventory', {jobid, mid, gid, room });\r\n\r\n    if (jobid && mid && gid && room && room.gid === gid) {\r\n      console.log('NgbheaderComponent #28 continuelastInventory goto form-inventory with room');\r\n      return this.router.navigate([\r\n        '/form-inventory', mid, gid, room.uuid\r\n      ]);\r\n    }\r\n\r\n    if (jobid && mid && gid) {\r\n      console.log('NgbheaderComponent #35 continuelastInventory goto form-inventory without room');\r\n      return this.router.navigate([\r\n        '/form-inventory', mid, gid\r\n      ]);\r\n    }\r\n\r\n    console.log('NgbheaderComponent #28 continuelastInventory goto select-inventory');\r\n    return this.router.navigate(['/select-inventory']);\r\n  }\r\n}\r\n","export default \".progress.progress-elemente {\\n  height: calc(1.5em + 0.75rem + 2px);\\n  position: relative;\\n}\\n\\n.progress-text {\\n  position: absolute;\\n  top: 0;\\n  left: calc(50% - 1rem);\\n  color: #fff;\\n  line-height: calc(1.5em + 0.75rem + 2px);\\n}\\n\\nbutton.btn.btn-sx {\\n  font-size: 0.7rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvcHJvZ3Jlc3NiYXIvQzpcXFVzZXJzXFxmLmJhcnRob2xkXFx3b3Jrc3BhY2VcXEVyd2luSW52ZW50YXJpc2llcnVuZ1xcYXBwc1xcZnJvbnRlbmRSZXRydWN0dXJlL3NyY1xcYXBwXFxzaGFyZWRcXGNvbXBvbmVudHNcXHByb2dyZXNzYmFyXFxwcm9ncmVzc2Jhci5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvc2hhcmVkL2NvbXBvbmVudHMvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtQ0FBQTtFQUNBLGtCQUFBO0FDQ0Y7O0FERUE7RUFDRSxrQkFBQTtFQUNBLE1BQUE7RUFDQSxzQkFBQTtFQUNBLFdBQUE7RUFDQSx3Q0FBQTtBQ0NGOztBREVBO0VBQ0UsaUJBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9jb21wb25lbnRzL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnByb2dyZXNzLnByb2dyZXNzLWVsZW1lbnRlIHtcclxuICBoZWlnaHQ6Y2FsYygxLjVlbSArIDAuNzVyZW0gKyAycHgpO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuLnByb2dyZXNzLXRleHR7XHJcbiAgcG9zaXRpb246YWJzb2x1dGU7XHJcbiAgdG9wOjA7XHJcbiAgbGVmdDogY2FsYyg1MCUgLSAxcmVtKTtcclxuICBjb2xvcjojZmZmO1xyXG4gIGxpbmUtaGVpZ2h0OiBjYWxjKDEuNWVtICsgMC43NXJlbSArIDJweCk7XHJcbn1cclxuXHJcbmJ1dHRvbi5idG4uYnRuLXN4IHtcclxuICBmb250LXNpemU6IDAuN3JlbTtcclxufVxyXG4iLCIucHJvZ3Jlc3MucHJvZ3Jlc3MtZWxlbWVudGUge1xuICBoZWlnaHQ6IGNhbGMoMS41ZW0gKyAwLjc1cmVtICsgMnB4KTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4ucHJvZ3Jlc3MtdGV4dCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICBsZWZ0OiBjYWxjKDUwJSAtIDFyZW0pO1xuICBjb2xvcjogI2ZmZjtcbiAgbGluZS1oZWlnaHQ6IGNhbGMoMS41ZW0gKyAwLjc1cmVtICsgMnB4KTtcbn1cblxuYnV0dG9uLmJ0bi5idG4tc3gge1xuICBmb250LXNpemU6IDAuN3JlbTtcbn0iXX0= */\"","import {Component, OnInit, Input, Output, EventEmitter} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-progressbar',\r\n  templateUrl: './progressbar.component.html',\r\n  styleUrls: ['./progressbar.component.scss']\r\n})\r\nexport class ProgressbarComponent implements OnInit {\r\n  @Input() title = 'Fortschrittsanzeige';\r\n  @Input() shortTitle = '';\r\n  @Input() type = 'success';\r\n  @Input() restType = 'danger';\r\n  @Input() value = 0;\r\n  @Input() total = 0;\r\n  @Input() sendDoneClick = false;\r\n  @Input() sendRestClick = false;\r\n\r\n  @Output() clickedDone = new EventEmitter();\r\n  @Output() clickedRest = new EventEmitter();\r\n\r\n  get short(): string {\r\n    return this.shortTitle ? this.shortTitle : this.title;\r\n  }\r\n  get progressAmount(): number {\r\n    return !this.value\r\n      ? 0\r\n      : (!this.total\r\n        ? 50\r\n        : Math.round(this.value * 1000 / this.total) / 10);\r\n  }\r\n  get progressRest(): number {\r\n    return 100 - this.progressAmount;\r\n  }\r\n\r\n  get rest(): number {\r\n    return Math.min(0, this.total - this.value);\r\n  }\r\n\r\n  get doneText(): string {\r\n    return this.doneAmountText + this.donePercentText;\r\n  }\r\n\r\n  get doneAmountText(): string {\r\n    return this.value + ' St';\r\n  }\r\n\r\n  get donePercentText(): string {\r\n    return !this.total || this.total === 100 ? '' : '' + this.progressAmount + ' %';\r\n  }\r\n\r\n  get totalText(): string {\r\n    return (this.total ? this.total.toString() : '??') + ' St';\r\n  }\r\n\r\n  get restText(): string {\r\n    return (!this.total\r\n      ? '??'\r\n      : (this.total - this.value) + ' St' + (!this.total || this.total === 100\r\n        ? ''\r\n        : ' (' + this.progressRest + ' %)'));\r\n  }\r\n\r\n  get restAmountText(): string {\r\n    return this.total ? '' + Math.max(0, this.total - this.value) + ' St' : '';\r\n  }\r\n\r\n  get restPercentText(): string {\r\n    return this.total ? '' + this.progressRest + ' %' : '';\r\n  }\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  onClickDone(e) {\r\n    console.log('onClickDone', { e });\r\n    this.clickedDone.emit(e);\r\n  }\r\n\r\n  onClickBarDone(e) {\r\n    e.stopPropagation();\r\n    this.onClickDone(e);\r\n  }\r\n\r\n  onClickRest(e) {\r\n    console.log('onClickRest', { e });\r\n    this.clickedRest.emit(e);\r\n  }\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9jb21wb25lbnRzL3NjYW5uZXJkZXRlY3Rpb24vc2Nhbm5lcmRldGVjdGlvbi5jb21wb25lbnQuc2NzcyJ9 */\"","import {Component, EventEmitter, HostListener, Input, OnInit, Output} from '@angular/core';\r\n\r\nexport interface ScanDetectData {\r\n  barcode: string;\r\n  length: number;\r\n  valid: boolean;\r\n  rawInput?: string;\r\n  debugData?: any;\r\n  target?: HTMLElement;\r\n}\r\n\r\nexport interface ScanDetectConfig {\r\n  minLength?: number;\r\n  maxLength?: number;\r\n  scannerStartsWith?: string;\r\n  scannerEndsWith?: string;\r\n  scanTimeout?: number;\r\n  ignoreChars?: string;\r\n  ignoreEndsWith?: boolean;\r\n  ignoreOverElements?: string[];\r\n  barcodeType?: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-scannerdetection',\r\n  templateUrl: './scannerdetection.component.html',\r\n  styleUrls: ['./scannerdetection.component.scss']\r\n})\r\nexport class ScannerdetectionComponent implements OnInit {\r\n\r\n  private input = '';\r\n  private rawInput = '';\r\n  private keyDownEvents: any[] = [];\r\n  private lastKeyEventTime = 0;\r\n  private lastTimer = null;\r\n  private lastTimerTime = null;\r\n  private isInDebugMode = false;\r\n\r\n  private detectorConfig: ScanDetectConfig = {\r\n    minLength: 5,\r\n    maxLength: 32,\r\n    scannerStartsWith: '',\r\n    scannerEndsWith: '',\r\n    scanTimeout: 100,\r\n    ignoreChars: '',\r\n    ignoreEndsWith: true,\r\n    ignoreOverElements: ['.scanner-detect-ignore'], // [ 'INPUT' ],\r\n    barcodeType: 'code128'\r\n  };\r\n\r\n  @Input()\r\n  set config(input: ScanDetectConfig) {\r\n    this.detectorConfig = Object.assign(this.detectorConfig, input);\r\n  }\r\n\r\n  @Output() scanned: EventEmitter<ScanDetectData> = new EventEmitter();\r\n\r\n  @HostListener('window:keydown', ['$event', '$event.target'])\r\n  onKeyDown(event: KeyboardEvent, useTarget?: HTMLElement) {\r\n    if (this.isInDebugMode) {\r\n      console.log('#55 scannerDetection Key-Down-Event', { event, useTarget });\r\n    }\r\n\r\n    const target: HTMLElement = useTarget;\r\n    const targetTagName = target.tagName;\r\n    const targetElementId = target.id;\r\n    const targetClassName = target.className;\r\n    const ignoreElements = this.detectorConfig.ignoreOverElements;\r\n    let emitScanData = true;\r\n\r\n    const ignoreTagNames = ignoreElements\r\n      .filter( name => !name.startsWith('.') && !name.startsWith('#'))\r\n      .map( name => name.toUpperCase());\r\n\r\n    const ignoreElementIds = ignoreElements\r\n      .filter( name => name.startsWith('#'))\r\n      .map(name => name.substr(1));\r\n\r\n    const ignoreClassNames = ignoreElements\r\n      .filter( name => name.startsWith('.'))\r\n      .map(name => name.substr(1));\r\n\r\n    const isEditableTextInput = (\r\n      target instanceof HTMLInputElement\r\n      && target.tagName === 'input'\r\n      && target.type.match(/text|number|/)\r\n      && !target.readOnly\r\n      && !target.disabled\r\n    );\r\n\r\n    if (ignoreElementIds.indexOf( targetElementId ) !== -1) {\r\n      emitScanData = false;\r\n    }\r\n\r\n    if (ignoreClassNames.indexOf( targetClassName ) !== -1) {\r\n      emitScanData = false;\r\n    }\r\n\r\n    if (ignoreTagNames.indexOf( targetTagName ) !== -1) {\r\n      emitScanData = false;\r\n    }\r\n\r\n    if (isEditableTextInput) {\r\n      emitScanData = false;\r\n    }\r\n\r\n    if (!emitScanData && this.isInDebugMode) {\r\n      console.log('#89 scannerDetection target is not our target: ', {\r\n        useTarget,\r\n        isEditableTextInput,\r\n        ignoreTagNames,\r\n        ignoreElementIds,\r\n        ignoreClassNames\r\n      });\r\n      return;\r\n    }\r\n\r\n    const now = Date.now();\r\n    const diff = now - this.lastKeyEventTime;\r\n    const isScanInput: boolean = diff > this.detectorConfig.scanTimeout;\r\n    const key = 'key' in event ? event.key : '';\r\n    const isShiftKey = event.shiftKey;\r\n\r\n    if (!isScanInput) {\r\n      this.input = key;\r\n      this.rawInput = key;\r\n      if (this.isInDebugMode) {\r\n        console.log('#101 scannerDetection Start, input', this.input);\r\n      }\r\n    } else {\r\n      this.rawInput += '|' + key;\r\n      if (this.isInDebugMode) {\r\n        console.log('#109 scannerDetection isScanInput', { target, key, 'this.input': this.input, 'event.type': event.type, event});\r\n      }\r\n      if (key.length === 1 ) {\r\n        this.input += !isShiftKey ? key : key.toUpperCase();\r\n        const barcode = this.input;\r\n        if (this.isInDebugMode) {\r\n          console.log('#106 scannerDetection add Char to Barcode', { key, barcode });\r\n        }\r\n      } else if (key === 'Tab') {\r\n        this.input += '\\t';\r\n      } else if (key === 'Enter') {\r\n        this.input += '\\n';\r\n      }\r\n    }\r\n\r\n    this.lastTimerTime = now;\r\n    if (this.lastTimer) {\r\n      clearTimeout(this.lastTimer);\r\n    }\r\n    this.lastTimer = setTimeout( () => {\r\n      let input = this.input;\r\n      if (input.indexOf('') !== -1) {\r\n        input = input.split('').join('-');\r\n      }\r\n      const barcode = input;\r\n      const rawInput = this.rawInput;\r\n      const keyDownEvents = this.keyDownEvents;\r\n      if (this.isInDebugMode) {\r\n        console.log('#138 scannerDetection Emit After Timeout', { key, barcode });\r\n      }\r\n      this.input = '';\r\n      if (barcode.length >= 5) {\r\n        this.scanned.emit({\r\n          barcode,\r\n          rawInput,\r\n          length: barcode.length,\r\n          valid: true,\r\n          debugData: {\r\n            keyDownEvents\r\n          }\r\n        });\r\n      }\r\n    }, this.detectorConfig.scanTimeout);\r\n  }\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NoYXJlZC9jb21wb25lbnRzL3N0YXR1cy1jaGVjay9zdGF0dXMtY2hlY2suY29tcG9uZW50LnNjc3MifQ== */\"","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {ConnectionState, ConnectionService} from '../../services/connection-service.service';\r\nimport {Subscription} from 'rxjs';\r\nimport {DataService} from '../../services/data.service';\r\nimport {DBSyncClientService} from '../../services/dbsync-client.service';\r\nimport {environment} from '../../../../environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-status-check',\r\n  templateUrl: './status-check.component.html',\r\n  styleUrls: ['./status-check.component.scss']\r\n})\r\nexport class StatusCheckComponent implements OnInit, OnDestroy {\r\n\r\n  currentState: ConnectionState;\r\n  connectionSubscription: Subscription;\r\n  unsyncedAmountChangeSubscription: Subscription;\r\n  numUnsynced: number;\r\n  currentApplicationVersion = environment.appVersion;\r\n\r\n  constructor(\r\n    private connectionService: ConnectionService,\r\n    private dataService: DataService,\r\n    private syncService: DBSyncClientService) {\r\n    this.numUnsynced = -1;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.syncService.numUnsyncedChangeLogs().then( (amount) => {\r\n      this.numUnsynced = amount;\r\n    });\r\n\r\n    this.connectionSubscription = this.connectionService.monitor().subscribe((currentState: ConnectionState) => {\r\n      console.log(currentState);\r\n      this.currentState = currentState;\r\n    });\r\n\r\n    this.unsyncedAmountChangeSubscription = this.dataService.clientSyncAmountChanged\r\n      .subscribe( (amount) => {\r\n        this.numUnsynced = amount;\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.connectionSubscription.unsubscribe();\r\n    this.unsyncedAmountChangeSubscription.unsubscribe();\r\n  }\r\n\r\n\r\n}\r\n","import { Directive, HostListener } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: 'button[appScannerinput]'\r\n})\r\nexport class ScannerinputDirective {\r\n  numberOfClicks = 0;\r\n\r\n  @HostListener('click', ['$event.target'])\r\n  onClick(btn) {\r\n    console.log('button', btn, 'number of clicks:', this.numberOfClicks++);\r\n  }\r\nn\r\n}\r\n","\r\nexport interface DBDITableWithBarcode {\r\n  code?: string;\r\n  uuid?: string;\r\n  for_jobid?: number;\r\n}\r\n\r\nexport enum DBDIRaumEditStatus {\r\n  Init = 0,\r\n  Started = 1,\r\n  Closed = 2\r\n}\r\n\r\n\r\nexport enum DBDIJobLockStatus {\r\n  Init = 0,\r\n  Unlocked = 1,\r\n  Locked = 2\r\n}\r\n/**\r\n * @PREFIX DBDI DataBasaDataInterface\r\n */\r\nexport interface DBDIClientChangeLog {\r\n  id?: number;\r\n  jobid?: number;\r\n  timestamp: Date;\r\n  table: string;\r\n  type: number;\r\n  key: number;\r\n  uuid?: string;\r\n  obj?: any;\r\n  oldObj?: any;\r\n  mods?: any;\r\n  mid?: number;\r\n  uid?: number;\r\n  devid?: string;\r\n  sync_attempts?: number;\r\n  sync_lastattempt?: Date;\r\n  sync_time?: Date;\r\n  sync_done: number;\r\n}\r\n\r\nexport interface DBDIServerSyncErrors {\r\n  id?: number;\r\n  jobid: number;\r\n  clientChangeLogId: number;\r\n  table: string;\r\n  type?: number;\r\n  uuid: string;\r\n  error_code: string;\r\n  error_msg: string;\r\n  error_data?: any;\r\n  error_ref_table?: string;\r\n  error_ref_by?: string;\r\n  error_ref_uuid?: string;\r\n  timestamp?: Date;\r\n}\r\n\r\nexport interface DBDIDevices {\r\n  id?: number;\r\n  name: string;\r\n  user_agent?: string;\r\n  created_uid: string;\r\n  created_at: Date;\r\n  modified_uid?: string;\r\n  modified_at?: Date;\r\n}\r\n\r\nexport interface DBDIGebaeude {\r\n  gid: number;\r\n  mid: number;\r\n  mandanten_id: number;\r\n  Gebaeude: string;\r\n  Adresse: string;\r\n  created_at: Date;\r\n  modified_at?: Date;\r\n  created_uid: number;\r\n  modified_uid?: number;\r\n}\r\n\r\nexport interface DBDIHersteller {\r\n  hid?: number;\r\n  uuid?: string;\r\n  for_jobid?: number;\r\n  Hersteller: string;\r\n  created_at?: Date;\r\n  updated_at?: Date;\r\n  created_uid: number;\r\n  modified_uid?: number;\r\n  created_jobid?: number;\r\n  modified_jobid?: number;\r\n  created_device_id?: number;\r\n  modified_device_id?: number;\r\n  log?: boolean;\r\n}\r\n\r\nexport interface DBDIInventar extends DBDITableWithBarcode {\r\n  ivid?: number;\r\n  mcid?: number;\r\n  uuid?: string;\r\n  for_jobid?: number;\r\n  mcuuid?: string;\r\n  hash?: string;\r\n  code?: string;\r\n  rid?: number;\r\n  ruuid?: string;\r\n  rid_init?: number;\r\n  rid_neu?: number;\r\n  ruuid_neu?: string;\r\n  Bezeichnung?: string;\r\n  Typ?: string;\r\n  Kategorie?: string;\r\n  Farbe?: string;\r\n  Groesse?: string;\r\n  Zustand?: string;\r\n  Seriennr?: string;\r\n  jobid: number;\r\n  invid?: string;\r\n  iv_nr?: string;\r\n  ErsteAufnahmeAm?: Date;\r\n  LetzteAufnahmeAm?: Date;\r\n  created_at?: Date;\r\n  modified_at?: Date;\r\n  created_uid?: number;\r\n  modified_uid?: number;\r\n  created_jobid?: number;\r\n  modified_jobid?: number;\r\n  created_device_id?: number;\r\n  modified_device_id?: number;\r\n  log?: boolean;\r\n}\r\n\r\nexport interface DBDIInventuren {\r\n  jobid: number;\r\n  mid?: number;\r\n  gid?: number;\r\n  Titel: string;\r\n  Start: Date;\r\n  aktiviert: number;\r\n  AbgeschlossenAm?: Date;\r\n  created_at: Date;\r\n  modified_at?: Date;\r\n  created_uid: number;\r\n  modified_uid?: number;\r\n}\r\n\r\nexport interface DBDIInventurenGebaeude {\r\n  jobid: number;\r\n  gid: number;\r\n  uid?: number;\r\n}\r\n\r\nexport interface DBDIInventurenUser {\r\n  jobid: number;\r\n  uid: number;\r\n}\r\n\r\nexport interface DBDIInventurenUserStatus {\r\n  jobid: number;\r\n  uid: number;\r\n  device_id: number;\r\n  status: number;\r\n  token: string;\r\n  last_client_revision_id?: number;\r\n  last_sync_at?: Date;\r\n  geladen_am?: Date;\r\n  geschlossen_am?: Date;\r\n  created_at?: Date;\r\n  modified_at?: Date;\r\n}\r\n\r\nexport interface DBDILieferant {\r\n  hid: number;\r\n  Lieferant: string;\r\n  created_at?: Date;\r\n  updated_at?: Date;\r\n  log?: boolean;\r\n}\r\n\r\nexport interface DBDIMandanten {\r\n  mid: number;\r\n  Mandant: string;\r\n  created_at: Date;\r\n  modified_at?: Date;\r\n  created_uid: number;\r\n  modified_uid?: number;\r\n}\r\n\r\nexport interface DBDIObjektKatalogGlobal extends DBDITableWithBarcode {\r\n  gcid?: number;\r\n  uuid?: string;\r\n  hash?: string;\r\n  code?: string;\r\n  hid?: number;\r\n  huuid?: string;\r\n  lid?: number;\r\n  Bezeichnung?: string;\r\n  Produktnr?: string;\r\n  Typ?: string;\r\n  Gruppe?: string;\r\n  Kategorie?: string;\r\n  Farbe?: string;\r\n  Groesse?: string;\r\n  Bild?: string;\r\n  AnlagenNr?: string;\r\n  GeraetNr?: string;\r\n  FibuNr?: string;\r\n  Flaeche?: string;\r\n  Gewicht?: string;\r\n  Baujahr?: string;\r\n  Kst?: string;\r\n  created_at: Date;\r\n  modified_at?: Date;\r\n  created_uid: number;\r\n  modified_uid?: number;\r\n  created_jobid?: number;\r\n  modified_jobid?: number;\r\n  created_device_id?: number;\r\n  modified_device_id?: number;\r\n  log?: boolean;\r\n}\r\n\r\nexport interface DBDIObjektKatalogMandant extends DBDITableWithBarcode {\r\n  mcid?: number;\r\n  uuid?: string;\r\n  gcid?: number;\r\n  gcuuid?: string;\r\n  for_jobid?: number;\r\n  code?: string;\r\n  mid: number;\r\n  created_at: Date;\r\n  modified_at?: Date;\r\n  created_uid: number;\r\n  modified_uid?: number;\r\n  created_jobid?: number;\r\n  modified_jobid?: number;\r\n  created_device_id?: number;\r\n  modified_device_id?: number;\r\n  log?: boolean;\r\n}\r\n\r\nexport interface DBDIObjektKatalogImages {\r\n  id?: number;\r\n  uuid?: string;\r\n  for_jobid?: number;\r\n  RefTable: string;\r\n  RefUuid: string;\r\n  ImgUuid: string;\r\n  RefText?: string;\r\n  Pos: number;\r\n  Kategorie: string;\r\n  created_at: Date;\r\n  created_uid?: number;\r\n  created_jobid?: number;\r\n  created_device_id?: number;\r\n  modified_at?: Date;\r\n  modified_uid?: number;\r\n  modified_jobid?: string;\r\n  modified_device_id?: number;\r\n}\r\n\r\n\r\nexport interface DBDIRaeume extends DBDITableWithBarcode {\r\n  rid?: number;\r\n  gid: number;\r\n  uuid?: string;\r\n  for_jobid?: number;\r\n  hash?: string;\r\n  code?: string;\r\n  raumid: string;\r\n  Raum: string;\r\n  Raumbezeichnung?: string;\r\n  Etage?: string;\r\n  current_jobid?: number;\r\n  current_jobstatus?: DBDIRaumEditStatus;\r\n  created_at: Date;\r\n  modified_at?: Date;\r\n  created_uid: number;\r\n  modified_uid?: number;\r\n  created_device_id?: number;\r\n  modified_device_id?: number;\r\n  created_jobid?: number;\r\n  modified_jobid?: number;\r\n  log?: boolean;\r\n}\r\n\r\nexport interface DBDIImages {\r\n  id?: number;\r\n  uuid: string;\r\n  for_jobid?: number;\r\n  name: string;\r\n  size: number;\r\n  width: number;\r\n  height: number;\r\n  type: string;\r\n  gcuuid?: string;\r\n  mcuuid?: string;\r\n  mcid?: number;\r\n  url?: string;\r\n  desc?: string;\r\n  data_binary?: string;\r\n  data_url?: string;\r\n  revnr: number;\r\n  created_at: Date;\r\n  created_uid: number;\r\n  created_jobid: number;\r\n  modified_at?: Date;\r\n  modified_uid?: number;\r\n  modified_jobid?: number;\r\n  log?: boolean;\r\n}\r\n\r\nexport interface DBDIUploads {\r\n  id: number;\r\n  uuid?: string;\r\n  mid: number;\r\n  standort?: string;\r\n  importkey?: string;\r\n  filename?: string;\r\n  filesize?: number;\r\n  checksum?: string;\r\n  content?: string;\r\n  stat?: string;\r\n  errors?: string;\r\n  created_at: Date;\r\n  created_uid?: number;\r\n  modified_at?: Date;\r\n  modified_uid?: number;\r\n}\r\n\r\nexport interface DBDIUsers {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  password: string;\r\n  remember_token?: string;\r\n  created_at?: Date;\r\n  updated_at?: Date;\r\n}\r\n\r\nexport interface DBDIObjektbuchBarcodesLookup {\r\n  code: string;\r\n  table: string;\r\n  key: string;\r\n  id: number;\r\n  uuid: string;\r\n  for_jobid: number;\r\n  updateHelper: number;\r\n}\r\n\r\n/**\r\n * END SQL-GENERATED Interfaces\r\n */\r\nexport interface DBDIVariables {\r\n  name: string;\r\n  value?: any;\r\n}\r\n\r\nexport interface DBDIBarcodeLookupCompatibleItem {\r\n  code: string;\r\n  table: string;\r\n  key: string;\r\n  uuid: string;\r\n  for_jobid: number;\r\n}\r\n\r\nexport interface DBDIBarcodeLookup {\r\n  code: string;\r\n  table: string;\r\n  key: string;\r\n  id?: string|number;\r\n  uuid: string;\r\n  for_jobid?: number;\r\n  updateHelper?: number;\r\n}\r\n\r\nexport enum LookupResultTable {\r\n  None,\r\n  Any,\r\n  Inventar,\r\n  Raeume,\r\n  ObjektKatalogGlobal,\r\n  ObjektKatalogMandant,\r\n  Objektbuch\r\n}\r\n\r\nexport interface BarcodeLookupSimpleResult {\r\n  barcode: string;\r\n  foundRef?: DBDIBarcodeLookup;\r\n  success: boolean;\r\n  lookupResultTable: LookupResultTable;\r\n  data: null|DBDIInventar|DBDIObjektKatalogGlobal|DBDIObjektKatalogMandant|DBDIRaeume|DBDIObjektbuchBarcodesLookup;\r\n  inventar?: DBDIInventar;\r\n  gebaeude?: DBDIGebaeude;\r\n  raum?: DBDIRaeume;\r\n  artikelData?: DBDIObjektKatalogGlobal;\r\n  artikelRef?: DBDIObjektKatalogMandant;\r\n  image?: DBDIImages;\r\n}\r\n\r\nexport interface DBDIArtikel extends DBDIObjektKatalogMandant, DBDIObjektKatalogGlobal {\r\n  mcuuid?: string;\r\n}\r\nexport interface DBDIArtikelMitHersteller extends DBDIArtikel {\r\n  Hersteller?: string;\r\n}\r\n\r\nexport interface DBDIRaumGebaeude extends DBDIRaeume, DBDIGebaeude {}\r\n\r\nexport enum LookupResultType {\r\n  NoMatch,\r\n  Inventar,\r\n  Raum,\r\n  ObjektBuchArtikel,\r\n  ObjektBuchRaum\r\n}\r\n\r\nexport interface LookupResult {\r\n  type: LookupResultType;\r\n  count?: number;\r\n}\r\n\r\nexport interface LookupNoMatches extends LookupResult {\r\n  type: LookupResultType.NoMatch;\r\n  count?: 0;\r\n}\r\n\r\nexport interface LookupAssignedObjektbuchArtikel extends LookupResult {\r\n  type: LookupResultType.ObjektBuchArtikel;\r\n  artikelRef: DBDIObjektKatalogMandant;\r\n  artikelData: DBDIObjektKatalogGlobal;\r\n}\r\n\r\nexport interface LookupAssignedObjektbuchRaum extends LookupResult {\r\n  type: LookupResultType.ObjektBuchRaum;\r\n  raum: DBDIRaeume;\r\n  gebaeude: DBDIGebaeude;\r\n}\r\n\r\nexport interface LookupAssignedInventar extends LookupResult {\r\n  type: LookupResultType.Inventar;\r\n  inventar: DBDIInventar;\r\n  artikelRef: DBDIObjektKatalogMandant;\r\n  artikelData: DBDIObjektKatalogGlobal;\r\n}\r\n\r\nexport interface LookupAssignedRoom extends LookupResult {\r\n  type: LookupResultType.Raum;\r\n  raum: DBDIRaeume;\r\n  gebaeude: DBDIGebaeude;\r\n}\r\n\r\nexport type IUnionLookupAssignedObject = LookupAssignedInventar |\r\n  LookupAssignedRoom |\r\n  LookupAssignedObjektbuchArtikel |\r\n  LookupAssignedObjektbuchRaum |\r\n  LookupNoMatches;\r\n","import { Directive } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appInventoryProgress]'\r\n})\r\nexport class InventoryProgressDirective {\r\n\r\n  constructor() { }\r\n\r\n}\r\n","import {EventEmitter, Injectable, Output} from '@angular/core';\r\nimport {DBDIInventar, DBDIInventurenUserStatus, DBDIJobLockStatus, DBDIRaeume} from '../interfaces/dexie.interfaces';\r\nimport { DexieService } from '../services/dexie.service';\r\nimport {BasedataService} from '../services/basedata.service';\r\n\r\nexport interface InventoryProgress {\r\n  total: number;\r\n  done: number;\r\n}\r\n\r\nexport interface RaumInventoryProgress extends InventoryProgress {\r\n  uuid: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InventoryProgressService {\r\n  @Output() inventurLockStatusChanged = new EventEmitter<DBDIJobLockStatus>();\r\n  @Output() raumProgressChanged = new EventEmitter<RaumInventoryProgress>();\r\n\r\n  constructor(private dexieService: DexieService, private baseData: BasedataService) { }\r\n\r\n  async getCurrentInventurLockStatus(): Promise<DBDIJobLockStatus> {\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const uid = this.baseData.getCurrentUid();\r\n    const deviceId = this.baseData.getCurrentDeviceId();\r\n\r\n    return this.dexieService.inventurenUserStatus.get([jobid, uid, deviceId])\r\n      .then( (item) => {\r\n        if (item) {\r\n          return item.status;\r\n        }\r\n      })\r\n      .catch(() => {\r\n        return DBDIJobLockStatus.Init;\r\n      });\r\n  }\r\n\r\n  async setCurrentInventurLockStatusClosed(): Promise<boolean> {\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const uid = this.baseData.getCurrentUid();\r\n    const deviceId = this.baseData.getCurrentDeviceId();\r\n    const status = DBDIJobLockStatus.Locked;\r\n    console.log('InventoryProgressService #40 setCurrentInventurLockStatusClosed',\r\n      { jobid, uid, deviceId, status });\r\n\r\n    const exists = await this.dexieService.inventurenUserStatus\r\n      .where({jobid, uid, device_id: deviceId})\r\n      .count();\r\n\r\n    console.log('InventoryProgressService #46 setCurrentInventurLockStatusClosed', { exists });\r\n    if (exists) {\r\n      return this.dexieService.inventurenUserStatus\r\n        .update([jobid, uid, deviceId], {\r\n          status,\r\n          geschlossen_am: new Date(),\r\n          modified_at: new Date()\r\n        })\r\n        .then( () => {\r\n          console.log('InventoryProgressService #55 setCurrentInventurLockStatusClosed update emit Status Locked');\r\n          this.inventurLockStatusChanged.emit( status );\r\n          return true;\r\n      })\r\n        .catch( () => {\r\n          return false;\r\n        });\r\n    } else {\r\n      console.log('InventoryProgressService #63 setCurrentInventurLockStatusClosed insert Status Locked');\r\n      const insertKey = [jobid, uid, deviceId];\r\n      const insertDaten: DBDIInventurenUserStatus = {\r\n        jobid,\r\n        uid,\r\n        device_id: deviceId,\r\n        token: '',\r\n        status: DBDIJobLockStatus.Locked,\r\n        geladen_am: new Date(),\r\n        geschlossen_am: new Date(),\r\n        created_at: new Date(),\r\n        modified_at: new Date()\r\n      };\r\n      return this.dexieService.inventurenUserStatus\r\n        .add(insertDaten)\r\n        .then( () => {\r\n          console.log('InventoryProgressService #77 setCurrentInventurLockStatusClosed inserted emit Status Locked');\r\n          this.inventurLockStatusChanged.emit( status );\r\n          return true;\r\n        })\r\n        .catch( (reason) => {\r\n          console.error('InventoryProgressService #83 Status Locked konnte nicht gesetzt werden', { reason, insertDaten });\r\n          return false;\r\n        });\r\n    }\r\n  }\r\n\r\n  async setCurrentInventurLockStatusOpened(): Promise<boolean> {\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const uid = this.baseData.getCurrentUid();\r\n    const deviceId = this.baseData.getCurrentDeviceId();\r\n    const status = DBDIJobLockStatus.Unlocked;\r\n    console.log('InventoryProgressService #88 setCurrentInventurLockStatusOpened',\r\n      { jobid, uid, deviceId, status });\r\n\r\n    const exists = await this.dexieService.inventurenUserStatus\r\n      .where({jobid, uid, device_id: deviceId})\r\n      .count();\r\n\r\n    if (exists) {\r\n      return this.dexieService.inventurenUserStatus\r\n        .update([jobid, uid, deviceId], {\r\n        status,\r\n        geschlossen_am: new Date(),\r\n        modified_at: new Date()\r\n      })\r\n        .then( () => {\r\n          this.inventurLockStatusChanged.emit( status );\r\n          return true;\r\n        })\r\n        .catch( () => {\r\n          return false;\r\n        });\r\n    } else {\r\n      const insertKey: [number, number, number ] = [jobid, uid, deviceId];\r\n      const insertDaten: DBDIInventurenUserStatus = {\r\n        jobid,\r\n        uid,\r\n        device_id: deviceId,\r\n        token: '',\r\n        status,\r\n        geladen_am: new Date(),\r\n        geschlossen_am: null,\r\n        created_at: new Date(),\r\n        modified_at: new Date()\r\n      };\r\n      return this.dexieService.inventurenUserStatus\r\n        .put(insertDaten, insertKey)\r\n        .then( () => {\r\n          this.inventurLockStatusChanged.emit( status );\r\n          return true;\r\n        })\r\n        .catch( (reason) => {\r\n          console.error('InventoryProgressService #137 Status Opened konnte nicht gesetzt werden',\r\n            { reason, insertKey, insertDaten });\r\n          return false;\r\n        });\r\n    }\r\n  }\r\n\r\n  async getCurrentGebaeudeProgress(useGid?: number): Promise<InventoryProgress> {\r\n    const gid = useGid || this.baseData.getCurrentGid();\r\n    const jobid = this.baseData.getCurrentJobid();\r\n\r\n    return this.getGebaeudeProgressByGidAndJobid(gid, jobid);\r\n  }\r\n\r\n  async getGebaeudeProgressByGidAndJobid(gid: number, jobid: number): Promise<InventoryProgress> {\r\n    const db = this.dexieService;\r\n    const raeume = db.raeume;\r\n    const inventar = db.inventar;\r\n\r\n    const progress: InventoryProgress = {\r\n      total: 0,\r\n      done: 0,\r\n    };\r\n\r\n    const ruuidListTmp = await raeume.where( {gid}).toArray();\r\n    const ruuidList = ruuidListTmp.filter( (rg) => rg.gid === gid && rg.for_jobid === jobid).map( (rg) => rg.uuid);\r\n\r\n    const chunkSize = Math.ceil( ruuidList.length / 8 );\r\n    const chunks = [];\r\n    for (let i = 0; i < ruuidList.length; i += chunkSize) {\r\n      chunks.push( ruuidList.slice(i, i + chunkSize) );\r\n    }\r\n\r\n    return await Promise.all([\r\n      inventar.where( { jobid } ).count(),\r\n      Promise.all(\r\n          chunks.map( async (ruuidChunkList) => inventar\r\n              .where( 'ruuid' ).anyOf( ruuidChunkList )\r\n              .and((inv) => inv.for_jobid === jobid)\r\n              .count()\r\n          )\r\n      )\r\n    ]).then( (chunksTotalAndProgress) => {\r\n      console.log({chunksTotalAndProgress});\r\n      progress.done = chunksTotalAndProgress[0];\r\n      progress.total = chunksTotalAndProgress[1].reduce( (sum, chnk) => sum + chnk, 0);\r\n      return progress;\r\n    });\r\n  }\r\n\r\n  async getCurrentRaumProgress(useRuuid?: string): Promise<InventoryProgress> {\r\n    const uuid = useRuuid || this.baseData.getCurrentRuuid();\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    console.log('getCurrentRaumProgress calls getRaumProgressByRidAndJobid', { uuid, jobid });\r\n\r\n    return this.getRaumProgressByUuidAndJobid(uuid, jobid).then( (progress) => {\r\n      this.raumProgressChanged.emit({uuid, ...progress});\r\n      return progress;\r\n    });\r\n  }\r\n\r\n  async getRaumProgressByUuidAndJobid(uuid: string, jobid: number): Promise<InventoryProgress> {\r\n    const progress: InventoryProgress = {\r\n      total: 0,\r\n      done: 0,\r\n    };\r\n\r\n    await Promise.all([\r\n      this.dexieService.inventar.where( { ruuid: uuid } ).count(),\r\n      this.dexieService.inventar.where( { ruuid: uuid } ).and(itm => itm.jobid === jobid).count()\r\n    ]).then( totalAndProgress => {\r\n      progress.total = totalAndProgress[0];\r\n      progress.done = totalAndProgress[1];\r\n    });\r\n    console.log('called getRaumProgressByUuidAndJobid', { uuid, jobid, progress });\r\n\r\n    return progress;\r\n  }\r\n\r\n  async getCurrentRaumInventarFound(useRuuid?: string): Promise<DBDIInventar[]> {\r\n    const ruuid = useRuuid || this.baseData.getCurrentRuuid();\r\n    const jobid = this.baseData.getCurrentJobid();\r\n\r\n    return this.getRaumInventarFoundByRuuidAndJobid(ruuid, jobid);\r\n  }\r\n\r\n  async getRaumInventarFoundByRuuidAndJobid(ruuid: string, jobid: number): Promise<DBDIInventar[]> {\r\n    return this.dexieService.inventar.where({ ruuid, jobid }).toArray();\r\n  }\r\n\r\n  async getCurrentRaumInventarNotFound(useRuuid?: string): Promise<DBDIInventar[]> {\r\n    const ruuid = useRuuid || this.baseData.getCurrentRuuid();\r\n    const jobid = this.baseData.getCurrentJobid();\r\n\r\n    return this.getRaumInventarNotFoundByRuuidAndJobid(ruuid, jobid);\r\n  }\r\n\r\n  async getRaumInventarNotFoundByRuuidAndJobid(ruuid: string, jobid: number): Promise<DBDIInventar[]> {\r\n    return this.dexieService.inventar.where({ ruuid }).and(item => item.jobid !== jobid).toArray();\r\n  }\r\n\r\n  async getCurrentGebaeudeRaeumeFinished(useGid?: number): Promise<DBDIRaeume[]> {\r\n    const gid = useGid || this.baseData.getCurrentGid();\r\n    const jobid = this.baseData.getCurrentJobid();\r\n\r\n    return this.getGebaeudeRaeumeFinishedByGidAndJobid(gid, jobid);\r\n  }\r\n\r\n  async getGebaeudeRaeumeFinishedByGidAndJobid(gid: number, jobid: number): Promise<DBDIRaeume[]> {\r\n    return this.dexieService.raeume\r\n      .where({ gid })\r\n      .and( itm => itm.current_jobid === jobid && itm.current_jobstatus === 2)\r\n      .toArray();\r\n  }\r\n\r\n  async getCurrentGebaeudeRaeumeNotFinished(useGid: number): Promise<DBDIRaeume[]> {\r\n    const gid = useGid || this.baseData.getCurrentGid();\r\n    const jobid = this.baseData.getCurrentJobid();\r\n\r\n    return this.getGebaeudeRaeumeNotFinishedByGidAndJobid(gid, jobid);\r\n  }\r\n\r\n  async getGebaeudeRaeumeNotFinishedByGidAndJobid(gid: number, jobid: number): Promise<DBDIRaeume[]> {\r\n    return this.dexieService.raeume\r\n      .where({ gid })\r\n      .and( itm => itm.current_jobid !== jobid || itm.current_jobstatus !== 2)\r\n      .toArray();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {BasedataService} from './basedata.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ApiService {\r\n\r\n  private apiBaseUrl = '';\r\n\r\n  constructor(private http: HttpClient, private baseData: BasedataService) {\r\n    this.apiBaseUrl = this.baseData.getCurrentApiBaseUrlOrSetDefault( this.getDefaultApiUrl );\r\n  }\r\n\r\n  getDefaultApiUrl(): string {\r\n    const hostName = window.location.hostname;\r\n    let defaultUrl = '';\r\n\r\n    const rgx = /(demo-)(.*?)(-app)(.mertens.services)/;\r\n    if (rgx.test(hostName)) {\r\n      defaultUrl = 'https://' + hostName.replace(rgx, '$1$2-admin$4') + '/';\r\n      console.log('ApiService #24 getDefaultApiUrl()', { hostName, defaultUrl });\r\n      return defaultUrl;\r\n    }\r\n\r\n    switch (hostName) {\r\n      case 'inventory.local':\r\n      case '127.0.0.1':\r\n      case 'localhost':\r\n        defaultUrl = 'https://' + hostName + ':8040/';\r\n        break;\r\n\r\n      case 'mertens-inventory-client.bluebirdapp.de':\r\n        defaultUrl = 'https://mertens-inventory.bluebirdapp.de/';\r\n        break;\r\n\r\n      case 'demo-rheinenergie-app.mertens.services':\r\n      case 'demo-apo-app.mertens.services':\r\n      case 'demo-pc-app.mertens.services':\r\n        defaultUrl = 'https://' + hostName.replace('-app.mertens.services', '-admin.mertens.services') + '/';\r\n        break;\r\n\r\n      case 'mertens-inventory-rc.web.app':\r\n      case 'mertens-inventory-rc.firebaseapp.com':\r\n      case 'mertens-inventory-dev.web.app':\r\n      case 'mertens-inventory-dev.firebaseapp.com':\r\n      case 'dev-inventory-app.mertens.services':\r\n        defaultUrl = 'https://dev-inventory.mertens.services/';\r\n        break;\r\n\r\n      case 'mertens-inventory.firebaseapp.com':\r\n      case 'mertens-inventory.web.app':\r\n      default:\r\n        defaultUrl = 'https://inventory.mertens.services/';\r\n    }\r\n    console.log('ApiService #50 getDefaultApiUrl()', { hostName, defaultUrl });\r\n    return defaultUrl;\r\n  }\r\n\r\n  getBaseUrl(): string {\r\n    return this.apiBaseUrl;\r\n  }\r\n\r\n  getUrlByPath(path: string) {\r\n    while (path.startsWith('/')) {\r\n      path = path.substr(1);\r\n    }\r\n    return this.apiBaseUrl + path;\r\n  }\r\n\r\n  getHealthPingUrl(): string {\r\n    return this.getUrlByPath('assets/ping.json');\r\n  }\r\n\r\n  getConnectedPingUrl(): string {\r\n    return this.getUrlByPath('auth/connected');\r\n  }\r\n\r\n  private getUrl( url: string ): string {\r\n    if ( url.substr(0, 10).match(/^[a-zA-Z]:\\/\\//)) {\r\n      return url;\r\n    }\r\n    return this.getUrlByPath(url);\r\n  }\r\n\r\n  get<T>(path: string, options?: object): Observable<T> {\r\n    return this.http.get<T>(\r\n      this.getUrl( path ),\r\n      options\r\n    );\r\n  }\r\n\r\n  post<T>(path: string, body: any | null, options?: object): Observable<T> {\r\n    return this.http.post<T>(\r\n      this.getUrl( path ),\r\n      body,\r\n      options\r\n    );\r\n  }\r\n\r\n  put<T>(path: string, body: any | null, options?: object): Observable<T> {\r\n    return this.http.put<T>(\r\n      this.getUrl( path ),\r\n      body,\r\n      options\r\n    );\r\n  }\r\n\r\n}\r\n","import {EventEmitter, Injectable, Output} from '@angular/core';\r\nimport {DBDIGebaeude, DBDIInventuren, DBDIJobLockStatus, DBDIMandanten, DBDIRaeume} from '../interfaces/dexie.interfaces';\r\nimport {User} from '../../pages/auth/user.model';\r\n\r\ntype stringCallback = () => string;\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BasedataService {\r\n\r\n  @Output() userChanged = new EventEmitter<User>();\r\n  @Output() mandantChanged = new EventEmitter<DBDIMandanten>();\r\n  @Output() inventurChanged = new EventEmitter<DBDIInventuren>();\r\n  @Output() gebaeudeChanged = new EventEmitter<DBDIGebaeude>();\r\n  @Output() raumChanged = new EventEmitter<DBDIRaeume>();\r\n  @Output() deviceChanged = new EventEmitter<number>();\r\n  @Output() inventurStatusChanged = new EventEmitter<DBDIJobLockStatus>();\r\n  @Output() apiBaseUrlChanged = new EventEmitter<string>();\r\n\r\n  private currentMandant: DBDIMandanten;\r\n  private currentInventur: DBDIInventuren;\r\n  private currentGebaeude: DBDIGebaeude;\r\n  private currentRaum: DBDIRaeume;\r\n  private currentUser: User;\r\n  private previousUser: User;\r\n  private currentDevice: number;\r\n  private currentInventurStatus: DBDIJobLockStatus;\r\n  private currentApiBaseUrl: string;\r\n\r\n  constructor() {\r\n    this.currentMandant = JSON.parse( localStorage.getItem( 'currentMandant' ) );\r\n    this.currentInventur = JSON.parse( localStorage.getItem( 'currentInventur' ) );\r\n    this.currentUser = JSON.parse(localStorage.getItem('currentUser' ) );\r\n    this.previousUser = JSON.parse(localStorage.getItem('previousUser' ) );\r\n    this.currentGebaeude = JSON.parse( localStorage.getItem( 'currentGebaeude' ) );\r\n    this.currentRaum = JSON.parse( localStorage.getItem( 'currentRaum' ) );\r\n    this.currentDevice = JSON.parse( localStorage.getItem( 'currentDevice' ) );\r\n    this.currentInventurStatus = JSON.parse( localStorage.getItem( 'currentInventurStatus' ) );\r\n    this.currentApiBaseUrl = JSON.parse( localStorage.getItem( 'currentApiBaseUrl' ) );\r\n  }\r\n\r\n  setCurrentMandant(mandant: DBDIMandanten) {\r\n    this.currentMandant = mandant;\r\n    localStorage.setItem('currentMandant', JSON.stringify( mandant ) );\r\n    this.mandantChanged.emit( this.currentMandant );\r\n  }\r\n\r\n  setCurrentInventur(inventur: DBDIInventuren) {\r\n    this.currentInventur = inventur;\r\n    localStorage.setItem('currentInventur', JSON.stringify( inventur ) );\r\n    this.inventurChanged.emit( this.currentInventur );\r\n  }\r\n\r\n  setCurrentInventurStatus(inventurStatus: DBDIJobLockStatus) {\r\n    this.currentInventurStatus = inventurStatus;\r\n    localStorage.setItem('currentInventurStatus', JSON.stringify( inventurStatus ) );\r\n    this.inventurStatusChanged.emit( this.currentInventurStatus );\r\n  }\r\n\r\n  setCurrentGebaeude(gebaeude: DBDIGebaeude) {\r\n    this.currentGebaeude = gebaeude;\r\n    localStorage.setItem('currentGebaeude', JSON.stringify( gebaeude ) );\r\n    this.gebaeudeChanged.emit( this.currentGebaeude );\r\n  }\r\n\r\n  setCurrentRaum(raum: DBDIRaeume) {\r\n    this.currentRaum = raum;\r\n    localStorage.setItem('currentRaum', JSON.stringify( raum ) );\r\n    this.raumChanged.emit( this.currentRaum );\r\n  }\r\n\r\n  setCurrentDevice(deviceid: number) {\r\n    this.currentDevice = deviceid;\r\n    localStorage.setItem('currentDevice', JSON.stringify( deviceid ) );\r\n    this.deviceChanged.emit( this.currentDevice );\r\n  }\r\n\r\n  setCurrentUser(user: User) {\r\n    this.currentUser = user;\r\n    localStorage.setItem('currentUser', JSON.stringify( user ) );\r\n    this.userChanged.emit( this.currentUser );\r\n  }\r\n\r\n  setPreviousUser(user: User) {\r\n    this.previousUser = user;\r\n    localStorage.setItem('previousUser', JSON.stringify( user ) );\r\n  }\r\n\r\n  setCurrentApiBaseUrl(apiBaseUrl: string) {\r\n    this.currentApiBaseUrl = apiBaseUrl;\r\n    localStorage.setItem('currentApiBaseUrl', JSON.stringify( apiBaseUrl ) );\r\n    this.apiBaseUrlChanged.emit( this.currentApiBaseUrl );\r\n  }\r\n\r\n  getCurrentDevice(): number {\r\n    return this.currentDevice;\r\n  }\r\n\r\n  getCurrentDeviceId(): number {\r\n    try {\r\n      return this.currentDevice;\r\n    } catch (e) {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  getCurrentUser(): User {\r\n    return this.currentUser;\r\n  }\r\n\r\n  getPreviousUser(): User {\r\n    return this.previousUser;\r\n  }\r\n\r\n  getPreviousUid(): number {\r\n    try {\r\n      return this.previousUser.id;\r\n    } catch (e) {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  getCurrentUid(): number {\r\n    try {\r\n      return this.currentUser.id;\r\n    } catch (e) {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  getCurrentMandant(): DBDIMandanten {\r\n    return this.currentMandant;\r\n  }\r\n\r\n  getCurrentInventur(): DBDIInventuren {\r\n    return this.currentInventur;\r\n  }\r\n\r\n  getCurrentInventurStatus(): DBDIJobLockStatus {\r\n    return this.currentInventurStatus;\r\n  }\r\n\r\n  getCurrentJobid(): number {\r\n    try {\r\n      return this.currentInventur.jobid;\r\n    } catch (e) {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  getCurrentMid(): number {\r\n    try {\r\n      return this.currentInventur.mid;\r\n    } catch (e) {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  getCurrentGebaeude(): DBDIGebaeude {\r\n    return this.currentGebaeude;\r\n  }\r\n\r\n  getCurrentGid(): number {\r\n    try {\r\n      return this.currentGebaeude.gid;\r\n    } catch (e) {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  getCurrentRaum(): DBDIRaeume {\r\n    return this.currentRaum;\r\n  }\r\n\r\n  getCurrentRuuid(): string {\r\n    try {\r\n      return this.currentRaum.uuid;\r\n    } catch (e) {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  getCurrentApiBaseUrl(): string {\r\n    return this.currentApiBaseUrl;\r\n  }\r\n\r\n  getCurrentApiBaseUrlOrSetDefault(setter: stringCallback): string {\r\n    if (!this.currentApiBaseUrl) {\r\n      this.setCurrentApiBaseUrl(setter());\r\n    }\r\n    return this.currentApiBaseUrl;\r\n  }\r\n}\r\n","import {EventEmitter, Inject, Injectable, InjectionToken, OnDestroy, Optional} from '@angular/core';\r\nimport {fromEvent, Observable, Subscription, timer} from 'rxjs';\r\nimport {debounceTime, delay, retryWhen, startWith, switchMap, tap} from 'rxjs/operators';\r\nimport * as _ from 'lodash';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport {ApiService} from './api.service';\r\n\r\n/**\r\n * Instance of this interface is used to report current connection status.\r\n */\r\nexport interface ConnectionState {\r\n  /**\r\n   * \"True\" if browser has network connection. Determined by Window objects \"online\" / \"offline\" events.\r\n   */\r\n  hasNetworkConnection: boolean;\r\n  /**\r\n   * \"True\" if browser has Internet access. Determined by heartbeat system which periodically makes request to heartbeat Url.\r\n   */\r\n  hasServerAccess: boolean;\r\n\r\n  hasValidSession: boolean;\r\n}\r\n\r\n/**\r\n * Instance of this interface could be used to configure \"ConnectionService\".\r\n */\r\nexport interface ConnectionServiceOptions {\r\n  /**\r\n   * Controls the Internet connectivity heartbeat system. Default value is 'true'.\r\n   */\r\n  enableHeartbeat?: boolean;\r\n  /**\r\n   * Url used for checking Internet connectivity, heartbeat system periodically makes \"HEAD\" requests to this URL to determine Internet\r\n   * connection status. Default value is \"//internethealthtest.org\".\r\n   */\r\n  heartbeatUrl?: string;\r\n  /**\r\n   * Interval used to check Internet connectivity specified in milliseconds. Default value is \"30000\".\r\n   */\r\n  heartbeatInterval?: number;\r\n  /**\r\n   * Interval used to retry Internet connectivity checks when an error is detected (when no Internet connection). Default value is \"1000\".\r\n   */\r\n  heartbeatRetryInterval?: number;\r\n  /**\r\n   * HTTP method used for requesting heartbeat Url. Default is 'head'.\r\n   */\r\n  requestMethod?: 'get' | 'post' | 'head' | 'options';\r\n\r\n  responseType?: string;\r\n\r\n}\r\n\r\n/**\r\n * InjectionToken for specifing ConnectionService options.\r\n */\r\nexport const ConnectionServiceOptionsToken: InjectionToken<ConnectionServiceOptions> = new InjectionToken('ConnectionServiceOptionsToken');\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ConnectionService implements OnDestroy {\r\n  private static DEFAULT_OPTIONS: ConnectionServiceOptions = {\r\n    enableHeartbeat: true,\r\n    heartbeatUrl: '/auth/heartbeat',\r\n    heartbeatInterval: 120000,\r\n    heartbeatRetryInterval: 60000,\r\n    requestMethod: 'get',\r\n    responseType: 'text'\r\n  };\r\n\r\n  private stateChangeEventEmitter = new EventEmitter<ConnectionState>();\r\n\r\n  private currentState: ConnectionState = {\r\n    hasServerAccess: false,\r\n    hasValidSession: false,\r\n    hasNetworkConnection: window.navigator.onLine\r\n  };\r\n  private offlineSubscription: Subscription;\r\n  private onlineSubscription: Subscription;\r\n  private httpSubscription: Subscription;\r\n  private sessionStateSubscription: Subscription;\r\n  private serviceOptions: ConnectionServiceOptions;\r\n\r\n  /**\r\n   * Current ConnectionService options. Notice that changing values of the returned object has not effect on service execution.\r\n   * You should use \"updateOptions\" function.\r\n   */\r\n  get options(): ConnectionServiceOptions {\r\n    return _.clone(this.serviceOptions);\r\n  }\r\n\r\n  constructor(private http: HttpClient,\r\n              @Inject(ConnectionServiceOptionsToken)\r\n              @Optional()\r\n                options: ConnectionServiceOptions,\r\n              private apiService: ApiService) {\r\n    this.serviceOptions = _.defaults({}, options, ConnectionService.DEFAULT_OPTIONS);\r\n\r\n    this.checkNetworkState();\r\n    this.checkInternetState();\r\n    // this.checkAuthenticationState();\r\n  }\r\n\r\n  public setAuthState(isLoggedIn: boolean) {\r\n    this.currentState.hasValidSession = isLoggedIn;\r\n    this.emitEvent();\r\n  }\r\n\r\n  public refresh() {\r\n    this.checkInternetState();\r\n  }\r\n\r\n  private checkInternetState() {\r\n\r\n    if (!_.isNil(this.httpSubscription)) {\r\n      this.httpSubscription.unsubscribe();\r\n    }\r\n    const method = this.serviceOptions.requestMethod;\r\n    const heartBeatPath = this.serviceOptions.heartbeatUrl;\r\n\r\n    if (this.serviceOptions.enableHeartbeat) {\r\n      this.httpSubscription = timer(0, this.serviceOptions.heartbeatInterval)\r\n        .pipe(\r\n          switchMap(() => this.apiService[method]<ArrayBuffer>(heartBeatPath, {responseType: 'text'})),\r\n          retryWhen(errors =>\r\n            errors.pipe(\r\n              // log error message\r\n              tap(val => {\r\n                console.error('Http error:', val);\r\n                const lastAccess = this.currentState.hasServerAccess;\r\n                this.currentState.hasServerAccess = false;\r\n                if (lastAccess !== false) {\r\n                  this.emitEvent();\r\n                }\r\n              }),\r\n              // restart after 5 seconds\r\n              delay(this.serviceOptions.heartbeatRetryInterval)\r\n            )\r\n          )\r\n        )\r\n        .subscribe(result => {\r\n          const lastAccess = this.currentState.hasServerAccess;\r\n          const lastSession = this.currentState.hasValidSession;\r\n          this.currentState.hasServerAccess = true;\r\n          if (result && typeof result === 'string' && result.match(/\"connected\"\\s*:\\s*true/)) {\r\n            this.currentState.hasValidSession = true;\r\n          }\r\n          if (lastAccess !== this.currentState.hasServerAccess\r\n          || lastSession !== this.currentState.hasValidSession) {\r\n            this.emitEvent();\r\n          }\r\n        });\r\n    } else {\r\n      const lastAccess = this.currentState.hasServerAccess;\r\n      this.currentState.hasServerAccess = false;\r\n      if (lastAccess !== false) {\r\n        this.emitEvent();\r\n      }\r\n    }\r\n  }\r\n\r\n  private checkNetworkState() {\r\n    if (!_.isNil(this.onlineSubscription)) {\r\n      this.onlineSubscription.unsubscribe();\r\n    }\r\n    this.onlineSubscription = fromEvent(window, 'online').subscribe(() => {\r\n      this.currentState.hasNetworkConnection = true;\r\n      this.checkInternetState();\r\n      this.emitEvent();\r\n    });\r\n\r\n    if (!_.isNil(this.offlineSubscription)) {\r\n      this.offlineSubscription.unsubscribe();\r\n    }\r\n    this.offlineSubscription = fromEvent(window, 'offline').subscribe(() => {\r\n      this.currentState.hasNetworkConnection = false;\r\n      this.currentState.hasServerAccess = false;\r\n      this.emitEvent();\r\n    });\r\n  }\r\n\r\n  private emitEvent() {\r\n    this.stateChangeEventEmitter.emit(this.currentState);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    try {\r\n      this.offlineSubscription.unsubscribe();\r\n      this.onlineSubscription.unsubscribe();\r\n      this.httpSubscription.unsubscribe();\r\n    } catch (e) {\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Monitor Network & Internet connection status by subscribing to this observer. If you set \"reportCurrentState\" to \"false\" then\r\n   * function will not report current status of the connections when initially subscribed.\r\n   * @param reportCurrentState Report current state when initial subscription. Default is \"true\"\r\n   */\r\n  monitor(reportCurrentState = true): Observable<ConnectionState> {\r\n    return reportCurrentState ?\r\n      this.stateChangeEventEmitter.pipe(\r\n        debounceTime(300),\r\n        startWith(this.currentState),\r\n      )\r\n      :\r\n      this.stateChangeEventEmitter.pipe(\r\n        debounceTime(300)\r\n      );\r\n  }\r\n\r\n  /**\r\n   * Update options of the service. You could specify partial options object. Values that are not specified will use default / previous\r\n   * option values.\r\n   * @param options Partial option values.\r\n   */\r\n  updateOptions(options: Partial<ConnectionServiceOptions>) {\r\n    this.serviceOptions = _.defaults({}, options, this.serviceOptions);\r\n    this.checkInternetState();\r\n  }\r\n\r\n  getCurrentState() {\r\n    return this.currentState;\r\n  }\r\n\r\n  get hasServerAccess() {\r\n    return this.currentState.hasServerAccess;\r\n  }\r\n\r\n  get hasNetworkConnection() {\r\n    return this.currentState.hasNetworkConnection;\r\n  }\r\n\r\n}\r\n","import {EventEmitter, Injectable, OnDestroy, Output} from '@angular/core';\r\nimport {ApiService} from './api.service';\r\nimport {\r\n  DBDIArtikel, DBDIArtikelMitHersteller, DBDIDevices,\r\n  DBDIGebaeude, DBDIHersteller, DBDIImages,\r\n  DBDIInventar,\r\n  DBDIInventuren, DBDIInventurenGebaeude,\r\n  DBDIInventurenUser, DBDIInventurenUserStatus,\r\n  DBDIMandanten, DBDIObjektbuchBarcodesLookup,\r\n  DBDIObjektKatalogGlobal, DBDIObjektKatalogImages,\r\n  DBDIObjektKatalogMandant,\r\n  DBDIRaeume,\r\n  DBDIRaumGebaeude,\r\n  IUnionLookupAssignedObject,\r\n  LookupAssignedInventar,\r\n  LookupAssignedObjektbuchArtikel,\r\n  LookupAssignedRoom,\r\n  LookupNoMatches,\r\n  LookupResult,\r\n  LookupResultType\r\n} from '../interfaces/dexie.interfaces';\r\nimport { DexieService } from './dexie.service';\r\nimport {ConnectionService, ConnectionState} from './connection-service.service';\r\nimport {VariablesService} from './variables.service';\r\nimport Dexie, {IndexableType } from 'dexie';\r\nimport {DBSyncClientService, SyncJobResult} from './dbsync-client.service';\r\nimport {BarcodeService} from '../../pages/invent-form/data-services/barcode.service';\r\nimport {DbsyncLogService} from './dbsync-log.service';\r\nimport {Subscription} from 'rxjs';\r\n\r\nexport interface LoadApiDataResult {\r\n  success: boolean;\r\n  errorMsg?: string;\r\n  total?: number;\r\n  inserts?: number;\r\n  revisionId?: number;\r\n  switchedToSync?: boolean;\r\n  syncJobResult?: SyncJobResult;\r\n  debug?: any;\r\n}\r\n\r\nexport interface TableLoadingStatus {\r\n  table: string;\r\n  status: string;\r\n  total: number;\r\n  current: number;\r\n  progress: number;\r\n  startDate: Date;\r\n  finished: Date;\r\n}\r\n\r\nexport interface TablesLoadingStatus {\r\n  [key: string]: TableLoadingStatus;\r\n}\r\n\r\nexport interface ArtikelRefAndData {\r\n  artikelRef: DBDIObjektKatalogMandant;\r\n  artikelData: DBDIObjektKatalogGlobal;\r\n}\r\n\r\nexport interface RaumAndGebaude {\r\n  raum: DBDIRaeume;\r\n  gebaeude: DBDIGebaeude;\r\n}\r\n\r\nexport interface InventarData {\r\n  inventar: DBDIInventar;\r\n  artikelRef: DBDIObjektKatalogMandant;\r\n  artikelData: DBDIObjektKatalogGlobal;\r\n}\r\n\r\nexport enum InventarDataResultError {\r\n  InventarNotFound = 1,\r\n  ArtikelRefNotFound,\r\n  ArtikelDataNotFound\r\n}\r\n\r\nexport interface InventarDataResult {\r\n  success: boolean;\r\n  errorMsg?: string;\r\n  errorCode?: InventarDataResultError;\r\n  inventarData?: InventarData;\r\n}\r\n\r\nexport interface ApiCollectionDataResponse<T> {\r\n  revisionId: number;\r\n  nextUrl?: string;\r\n  rows: T[];\r\n  total: number;\r\n  offset: number;\r\n}\r\n\r\nexport interface TableIdxProps {\r\n  [key: string]: IndexableType;\r\n}\r\n\r\nexport interface RefsStrict {\r\n  [key: string]: [ string|string[], Dexie.Table<any, any>, string|string[]];\r\n}\r\nexport interface RefsFlex {\r\n  [key: string]: string|Dexie.Table<any, any>|[ (string|string[])?, (string|Dexie.Table<any, any>)?, (string|string[])?];\r\n}\r\n\r\nexport interface JoinOptions {\r\n  refs?: RefsFlex;\r\n  filter?: (obj: any) => boolean;\r\n  map?: (oby: any) => any;\r\n  multi?: boolean;\r\n  limit?: number;\r\n  sort?: (obj: any) => number;\r\n  groupCounter?: { [key: string]: (obj: any) => number };\r\n  groupReducer?: { [key: string]: (obj: any) => any };\r\n  joins?: JoinOptions[];\r\n}\r\n\r\nexport interface JoinFlexFormatted {\r\n  parentKey?: string|string[];\r\n  table: string|Dexie.Table<any, any>;\r\n  key?: string|string[];\r\n  alias?: string;\r\n  where?: TableIdxProps;\r\n  multi?: boolean;\r\n  offset?: number;\r\n  limit?: number;\r\n  filter?: (obj: any) => boolean;\r\n  map?: (obj: any) => any;\r\n  sort?: (a: any, b: any) => number;\r\n  refs?: RefsFlex;\r\n  joins?: any[];\r\n}\r\nexport enum JoinResultType {\r\n  List,\r\n  First,\r\n  Count,\r\n}\r\nexport interface JoinStrictFormatted {\r\n  parentKey?: string|string[];\r\n  table: Dexie.Table<any, any>;\r\n  key: string|string[];\r\n  alias: string;\r\n  resultType: JoinResultType;\r\n  multi?: boolean;\r\n  offset?: number;\r\n  limit?: number;\r\n  sortBy?: string;\r\n  where?: TableIdxProps;\r\n  filter?: (obj: any) => boolean;\r\n  map?: (obj: any) => any;\r\n  sort?: (a: any, b: any) => number;\r\n  refs?: RefsStrict;\r\n  joins?: JoinStrictFormatted[];\r\n}\r\n\r\nconst log = {\r\n  info: (line: number, ...vars: any) => {\r\n    const l = console.log.bind(console, '[INFO] data.service.ts #' + line);\r\n    l.apply(console, vars);\r\n  },\r\n  err: (line: number, ...vars: any) => {\r\n    const l = console.error.bind(console, '[ERROR] data.service.ts #' + line);\r\n    l.apply(console, vars);\r\n  },\r\n  dbg: (line: number, ...vars: any) => {\r\n    const l = console.log.bind(console, '[Debug] data.service.ts #' + line);\r\n    l.apply(console, vars);\r\n  },\r\n  warn: (line: number, ...vars: any) => {\r\n    const l = console.log.bind(console, '[Warning] data.service.ts #' + line);\r\n    l.apply(console, vars);\r\n  }\r\n};\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DataService implements OnDestroy {\r\n\r\n  currentState: ConnectionState;\r\n  lastLoadFailed = false;\r\n  lastFailed;\r\n  @Output() loadingDataChanged = new EventEmitter<TablesLoadingStatus>();\r\n  @Output() clientSyncAmountChanged = new EventEmitter<number>();\r\n  private subscriptionClientLogsChanged: Subscription;\r\n\r\n  constructor(\r\n    private api: ApiService,\r\n    private dexie: DexieService,\r\n    private barcodeLookup: BarcodeService,\r\n    private connectionService: ConnectionService,\r\n    private settingsService: VariablesService,\r\n    private DbSyncService: DBSyncClientService,\r\n    private dbSyncLogService: DbsyncLogService) {\r\n    this.currentState = connectionService.getCurrentState();\r\n    this.connectionService.monitor().subscribe((currentState: ConnectionState) => {\r\n      log.info(43, 'network status has changed', { currentState });\r\n      this.currentState = currentState;\r\n\r\n      this.subscriptionClientLogsChanged = this.dexie.clientSyncAmountChanged.subscribe( (amount) => {\r\n        console.log('DataService #245 clientSyncAmountChanged: ', { amount });\r\n        this.clientSyncAmountChanged.emit(amount);\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptionClientLogsChanged.unsubscribe();\r\n  }\r\n\r\n  getSelectedRoom() {\r\n\r\n  }\r\n\r\n  async getUserAssignedInventories(uid: number): Promise<DBDIInventuren[]>  {\r\n    log.info(173, 'getUserAssignedInventories');\r\n    let userInventuren: DBDIInventuren[] = [];\r\n\r\n    if (this.currentState.hasServerAccess) {\r\n      log.dbg(177, 'getUserAssignedInventories, call loadUserAssignedInventories');\r\n      await this.loadUserAssignedInventories();\r\n    } else {\r\n      log.err(180,\r\n        'getUserAssignedInventories no InternetAccess. Cannot call loadUserAssignedInventories',\r\n        { 'this.currentState': this.currentState, 'this.currentState.hasInternetAccess': this.currentState.hasServerAccess });\r\n    }\r\n\r\n    await Promise.all([\r\n      this.dexie.inventuren.toArray(),\r\n      this.dexie.inventurenUser.where('uid').equals(uid).toArray()\r\n    ]).then( (results) => {\r\n      const inv = results[0];\r\n      const jobids = results[1].map( (itm) => itm.jobid );\r\n\r\n      userInventuren = inv.filter( (itm) => jobids.indexOf(itm.jobid) !== -1 );\r\n      console.log('#72 getUserAssignedInventories', { inv, jobids, userInventuren } );\r\n    });\r\n    return userInventuren;\r\n  }\r\n\r\n\r\n  loadInventurSelection() {\r\n\r\n  }\r\n\r\n  async loadUserAssignedInventories(): Promise<boolean>  {\r\n    log.dbg(205, 'loadUserAssignedInventories');\r\n\r\n    const db = this.dexie;\r\n    const api = this.api;\r\n\r\n    this.dbSyncLogService.metaMessage({ message: 'Lade Inventuren Meta-Daten ...' });\r\n    // jobidsByAuthUser\r\n    return await Promise\r\n    .all([\r\n      api.get<any>( 'auth/me').toPromise(),\r\n      api.get<DBDIInventurenUser[]>( 'api/inventur/jobidsByAuthUser').toPromise(),\r\n\r\n      api.get<DBDIMandanten[]>( 'api/inventur/clientsByAuthUser').toPromise()\r\n        .then( list => {\r\n          this.dbSyncLogService.metaMessage({ message: 'Lade Mandanten ... ' + list.length });\r\n          return Promise.all( list.map( (item: DBDIMandanten) => db.mandanten.put(item) ) );\r\n        } ),\r\n\r\n      api.get<DBDIGebaeude[]>( 'api/inventur/gebaeudeByAuthUser').toPromise()\r\n        .then( list => {\r\n          this.dbSyncLogService.metaMessage({ message: 'Lade Mandanten ... ' + list.length });\r\n          return Promise.all(list.map((item: DBDIGebaeude) => db.gebaeude.put(item)));\r\n        }),\r\n\r\n      api.get<DBDIInventuren[]>( 'api/inventur/listByAuthUser').toPromise()\r\n        .then( list => {\r\n          this.dbSyncLogService.metaMessage({ message: 'Lade Gebude ... ' + list.length});\r\n          return Promise.all(list.map((item: DBDIInventuren) => db.inventuren.put(item)));\r\n        }),\r\n\r\n      api.get<DBDIInventurenGebaeude[]>( 'api/inventur/inventurenGebaeudeByAuthUser').toPromise()\r\n\r\n      // ,api.get<DBDIInventurenUserStatus[]>( 'api/inventur/inventurenStatusByAuthUser').toPromise()\r\n\r\n    ])\r\n      .then( async (results) => {\r\n        this.dbSyncLogService.metaMessage({ message: 'Inventuren Meta-Daten wurden heruntergeladen'});\r\n        const authUser = results[0];\r\n        const invUser = results[1];\r\n        const mandantenRslt = results[2];\r\n        const gebaeudeRslt = results[3];\r\n        const inventurenRslt = results[4];\r\n        const invGebaeude = results[5];\r\n\r\n        this.dbSyncLogService.metaMessage({ message: 'Bereinige Inventur-Auswahl'});\r\n        const del = await db.inventurenUser.where('uid').equals(authUser.id).delete();\r\n        await invUser.map((item: DBDIInventurenUser) => {\r\n          return db.inventurenUser.add(item)\r\n            .then( id => id)\r\n            .catch( reason => {\r\n              console.error( reason, 'DataService.loadUserAssignedInventories() #293', { item });\r\n              return [0, 0];\r\n            });\r\n        });\r\n\r\n        this.dbSyncLogService.metaMessage({ message: 'Bereinige Gebude-Auswahl'});\r\n        const delG = await db.inventurenGebaeude.where('uid').equals(authUser.id).delete()\r\n          .catch( (reason) => console.error('Cannot delete GRef', reason));\r\n\r\n        await invGebaeude.map((item: DBDIInventurenGebaeude) => db.inventurenGebaeude.add(item)\r\n          .catch( (reason) => {\r\n          console.error(reason, 'DataService..loadUserAssignedInventories() #304 inventurenGebaeude.add', { item } );\r\n        }));\r\n\r\n        this.dbSyncLogService.metaMessage({ message: 'Inventuren Meta-Daten wurden importiert'});\r\n        console.log('Finished loading user-inventories');\r\n        return true;\r\n      })\r\n      .finally( () => {\r\n      });\r\n  }\r\n\r\n  async loadClientList(): Promise<any> {\r\n    console.log('#244  data.service loadClientList');\r\n    return this.api\r\n      .get<any>( 'api/mandant')\r\n      .subscribe( (list: DBDIMandanten[]) => {\r\n        console.log( 'SelectInventoryComponent', 'loadClientList', {list });\r\n\r\n        const asyncJobs: Promise<void|number>[] = [];\r\n        asyncJobs.push(this.dexie.mandanten.clear());\r\n        list.forEach( (item: DBDIMandanten) => {\r\n          console.log({ called: 'loadClientList', item });\r\n          asyncJobs.push( this.dexie.mandanten.put(item) );\r\n        });\r\n        Promise.all( asyncJobs ).finally( () => {} );\r\n      });\r\n  }\r\n\r\n  async loadGebaeudeListByClientId(mid: number): Promise<boolean> {\r\n    console.log('#261  data.service loadGebaeudeListByClientd');\r\n    await this.api\r\n      .get<any>( 'api/mandant/' + mid + '/gebaeude')\r\n      .subscribe( (list: DBDIGebaeude[]) => {\r\n        console.log( 'SelectInventoryComponent', 'loadClientList', {list });\r\n\r\n        this.dexie.gebaeude.where('mid').equals(mid)\r\n          .delete()\r\n          .then( () => {\r\n            return list.map( (item: DBDIGebaeude) => {\r\n              console.log({ called: 'loadGebaeudeList', item });\r\n              return this.dexie.gebaeude.put(item);\r\n            });\r\n          })\r\n          .finally( () => {\r\n          });\r\n      });\r\n\r\n    return true;\r\n  }\r\n\r\n  async loadRaeumeListByGebaeudeId(gid: number): Promise<void> {\r\n    console.log('#283  data.service');\r\n    this.api.get<any>( 'api/gebaeude/' + gid + '/raeume').subscribe( async (list: DBDIRaeume[]) => {\r\n      console.log( 'SelectInventoryComponent', 'loadClientList', {list });\r\n\r\n      this.dexie.stopChangeLogForImport( true );\r\n      await this.dexie.raeume\r\n        .where('gid').equals(gid)\r\n        .delete()\r\n        .then( (nr) => list.map( (item: DBDIRaeume) => {\r\n          console.log({ called: 'loadClientList', item });\r\n          return this.dexie.raeume.put({ ...item, ...{log: false}});\r\n        })\r\n        )\r\n        .finally( () => {\r\n          this.dexie.stopChangeLogForImport( false );\r\n        });\r\n    });\r\n  }\r\n\r\n  async loadInventar(gid: number): Promise<void> {\r\n    console.log('#303  data.service');\r\n    this.api.get<any>( 'api/gebaeude/' + gid + '/raeume').subscribe( async (list: DBDIRaeume[]) => {\r\n      console.log( 'SelectInventoryComponent', 'loadClientList', {list });\r\n\r\n      this.dexie.stopChangeLogForImport( true);\r\n      console.log('#303 data-service delete raeume');\r\n      return this.dexie.raeume.where('gid').equals(gid)\r\n        .delete()\r\n        .then( (nr: number) => {\r\n          return list.map( (item: DBDIRaeume) => {\r\n            console.log({ called: 'loadClientList', item });\r\n            return this.dexie.raeume.put( {...item, ...{log: false}});\r\n          });\r\n        })\r\n        .finally( () => {\r\n          this.dexie.stopChangeLogForImport( false );\r\n        });\r\n      });\r\n  }\r\n\r\n  public async hasAllInventurData(jobid: number): Promise<boolean> {\r\n    // tslint:disable-next-line:variable-name\r\n    const for_jobid = jobid;\r\n\r\n    return (!!await this.dexie.inventar.where({for_jobid}).first()\r\n       && !!await this.dexie.raeume.where({for_jobid}).first()\r\n       && !!await this.dexie.objektKatalogMandant.where({for_jobid}).first()\r\n       && !!await this.dexie.objektbuchBarcodesLookup.where({for_jobid}).first()\r\n       && !!await this.dexie.barcodeLookup.where({for_jobid}).first());\r\n  }\r\n\r\n  public async hasValidInventurRevId(jobid: number): Promise<boolean> {\r\n    const varName = 'jobid-' + jobid + '-revision-id';\r\n    const lastRevId = +(await this.settingsService.get(varName, 0));\r\n    return (!isNaN(lastRevId) && lastRevId > 0);\r\n  }\r\n\r\n  async loadInventurDataByInventurId(jobid: number, reset: boolean = false): Promise<LoadApiDataResult[]> {\r\n    console.log('#324 called loadInventurDataByInventurId(', jobid, reset, ')');\r\n    this.setLoadingStarted( jobid );\r\n    const syncLogMsg = this.dbSyncLogService.message.bind(this.dbSyncLogService, [jobid]);\r\n    const syncLogErr = this.dbSyncLogService.error.bind(this.dbSyncLogService, [jobid]);\r\n\r\n    const tables = {\r\n      gebaeude: 'pending',\r\n      raeume: 'pending',\r\n      hersteller: 'pending',\r\n      images: 'pending',\r\n      inventar: 'pending',\r\n      objektKatalogGlobal: 'pending',\r\n      objektKatalogMandant: 'pending',\r\n      objektKatalogImages: 'pending',\r\n      objektbuchBarcodesLookup: 'pending'\r\n    };\r\n\r\n    const tablesLoadingStatus: TablesLoadingStatus = {};\r\n    for (const t in tables) {\r\n      if (!tables.hasOwnProperty(t)) {\r\n        continue;\r\n      }\r\n      tablesLoadingStatus[t] = {\r\n        table: t,\r\n        status: 'pending',\r\n        total: -1,\r\n        current: -1,\r\n        progress: 0,\r\n        startDate: null,\r\n        finished: null\r\n      };\r\n    }\r\n\r\n    const tblStatus = (table, statKey: string|object, value?: string|number|Date) => {\r\n      console.log('#441 tblStatus', { table, statKey, value, tables, tablesLoadingStatus });\r\n      if (typeof statKey === 'string' && typeof value !== 'undefined') {\r\n        tablesLoadingStatus[table][statKey] = value;\r\n        tables[ table ] = statKey + ' ' + value;\r\n      } else if (typeof statKey === 'string') {\r\n        tablesLoadingStatus[table].status = statKey;\r\n        tables[ table ] = statKey;\r\n      } else if (typeof statKey === 'object') {\r\n        for (const k in statKey) {\r\n          if (statKey.hasOwnProperty(k)) {\r\n            tablesLoadingStatus[table][k] = statKey[k];\r\n            tables[ table ] = k + ' ' + statKey[k];\r\n          }\r\n        }\r\n      }\r\n      this.loadingDataChanged.emit(tablesLoadingStatus);\r\n      console.log( tables );\r\n    };\r\n\r\n    const inventurAlreadyStartedRevId = +(await this.settingsService.get('jobid-' + jobid + '-revision-id', 0));\r\n    console.log('#388 loadInventurDataByInventurId, inventurAlreadyStartedRevId: ', inventurAlreadyStartedRevId);\r\n\r\n    const hasAllInventurData = await this.hasAllInventurData(jobid);\r\n\r\n    if (!reset\r\n      && !isNaN(inventurAlreadyStartedRevId) && inventurAlreadyStartedRevId > 0\r\n      && hasAllInventurData\r\n    ) {\r\n      console.log('#338 loadInventurDataByInventurId');\r\n      const numUnsyncedClientChanges = await this.DbSyncService.numUnsyncedChangeLogsByJobId(jobid);\r\n      console.log('#340 loadInventurDataByInventurId', {numUnsyncedClientChanges});\r\n      if (numUnsyncedClientChanges) {\r\n        console.log('#342 loadInventurDataByInventurId START SYNC', {numUnsyncedClientChanges});\r\n        this.setLoadingFinished();\r\n        const syncJobResult = await this.DbSyncService.syncJob(jobid);\r\n        return [{\r\n          success: true,\r\n          switchedToSync: true,\r\n          syncJobResult\r\n        }] as LoadApiDataResult[];\r\n      } else {\r\n        console.log('#346 loadInventurDataByInventurId NOTHING TO SYNC');\r\n        this.setLoadingFinished();\r\n        return [{\r\n          success: true,\r\n          errorMsg: '',\r\n          total: 0,\r\n          inserts: 0,\r\n          revisionId: await this.settingsService.get('jobid-' + jobid + '-revision-id'),\r\n          debug: null,\r\n        }];\r\n      }\r\n    }\r\n\r\n    // await this.DbSyncService\r\n\r\n    this.dbSyncLogService.start(jobid, inventurAlreadyStartedRevId);\r\n    this.dexie.stopChangeLogForImport( true );\r\n    if (reset) {\r\n      syncLogMsg( 'Reset: Daten werden fr kompletten Neu-Import zurckgesetzt!');\r\n      console.log('DataService.loadInventurDataByInventurId(', jobid, reset, ')  #473');\r\n      const numRaeume = await this.dexie.raeume.where( { for_jobid: jobid}).count().catch( (reason) => {\r\n        console.error('#354 ', { reason });\r\n      });\r\n      console.log('#357 Before cleanup');\r\n      await Promise.all([\r\n        this.dexie.raeume.where( { for_jobid: jobid}).delete()\r\n          .finally(() => {\r\n            syncLogMsg('Finished Reset Rume');\r\n            console.log('#359finished cleanup raeume');\r\n          }),\r\n        this.dexie.inventar.where( { for_jobid: jobid}).delete()\r\n          .finally(() => {\r\n            syncLogMsg('Finished Reset Inventar');\r\n            console.log('#361 finished cleanup inventar');\r\n          }),\r\n        this.dexie.hersteller.where( { for_jobid: jobid}).delete()\r\n          .finally(() => {\r\n            syncLogMsg('Finished Reset Hersteller');\r\n            console.log('#363 finished cleanup hersteller');\r\n          }),\r\n        this.dexie.images.filter( (img) => img.for_jobid === jobid).delete()\r\n          .finally(() => {\r\n            syncLogMsg('Finished Reset Images');\r\n            console.log('#365 finished cleanup images');\r\n          }),\r\n        this.dexie.objektKatalogMandant\r\n          .where( { for_jobid: jobid}).delete()\r\n          .finally(() => {\r\n            syncLogMsg('Finished Reset Katalogdaten (Mandant)');\r\n            console.log('#367 finished cleanup okg');\r\n\r\n            this.dexie.objektKatalogGlobal\r\n              .where( { created_jobid: jobid})\r\n              .each( (itm) => {\r\n                this.dexie.objektKatalogMandant.where({gcuuid: itm.uuid}).count().then( (num) => {\r\n                  if (num === 0) {\r\n                    this.dexie.objektKatalogGlobal.delete(itm.uuid);\r\n                  }\r\n                });\r\n              })\r\n              .finally(() => {\r\n                syncLogMsg('Finished Reset Mandanten-Spezifische Katalogdaten (Global)');\r\n                console.log('#463 finished cleanup okm');\r\n              });\r\n          })\r\n        ,\r\n        this.dexie.objektKatalogImages.where( { created_jobid: jobid}).delete()\r\n          .finally(() => {\r\n            syncLogMsg('Finished Reset Katalog/Raum-Images');\r\n            console.log('#459 finished cleanup okm');\r\n          }),\r\n        this.dexie.clientChangeLog.where({ jobid }).delete()\r\n          .finally(() => {\r\n            syncLogMsg('Finished Reset Client-Change-Log');\r\n            console.log('#464 finished cleanup clientchangelog');\r\n          })\r\n      ]);\r\n      syncLogMsg( 'Reset: Daten wurden zurckgesetzt!');\r\n      console.log('#373 After cleanup');\r\n      const resetCmt = 'data.service.tx loadInventurDataByInventurId() reset';\r\n      await Promise.all([\r\n        this.settingsService.set('jobid-' + jobid + '-revision-id', 0, resetCmt),\r\n        this.settingsService.set('inventar-' + jobid + '-revision-id', 0, resetCmt),\r\n        this.settingsService.set('raeume-' + jobid + '-revision-id', 0, resetCmt),\r\n        this.settingsService.set('images-' + jobid + '-revision-id', 0, resetCmt),\r\n        this.settingsService.set('hersteller-' + jobid + '-revision-id', 0, resetCmt),\r\n        this.settingsService.set('objektKatalogGlobal-' + jobid + '-revision-id', 0, resetCmt),\r\n        this.settingsService.set('objektKatalogMandant-' + jobid + '-revision-id', 0, resetCmt),\r\n        this.settingsService.set('objektKatalogImages-' + jobid + '-revision-id', 0, resetCmt)\r\n      ]);\r\n      syncLogMsg( 'Reset: Revision-Ids wurden zurckgesetzt!');\r\n      console.log('#362 loadInventurDataByInventurId');\r\n    }\r\n\r\n    syncLogMsg( 'Import: Starte Server-Download!');\r\n    console.log('#477 loadInventurDataByInventurId, start parallel data-imports.');\r\n    const loadingResult = await Promise\r\n      .all([\r\n        this.loadTableDataByUrl<DBDIGebaeude>(\r\n          'gebaeude', `api/inventur/${jobid}/gebaeude`, tblStatus, { jobid, reset }),\r\n        this.loadTableDataByUrl<DBDIRaeume>(\r\n          'raeume', `api/inventur/${jobid}/raeume`, tblStatus, { jobid, reset }),\r\n        this.loadTableDataByUrl<DBDIHersteller>(\r\n           'hersteller', `api/inventur/${jobid}/hersteller`, tblStatus, { jobid, reset }),\r\n        this.loadTableDataByUrl<DBDIImages>(\r\n          'images', `api/inventur/${jobid}/images`, tblStatus, { jobid, reset }),\r\n        this.loadTableDataByUrl<DBDIInventar>(\r\n          'inventar', `api/inventur/${jobid}/inventar`, tblStatus, { jobid, reset }),\r\n        this.loadTableDataByUrl<DBDIObjektKatalogGlobal>(\r\n          'objektKatalogGlobal', `api/inventur/${jobid}/katalog`, tblStatus, { jobid, reset }),\r\n        this.loadTableDataByUrl<DBDIObjektKatalogMandant>(\r\n          'objektKatalogMandant', `api/inventur/${jobid}/artikelids`, tblStatus, { jobid, reset }),\r\n\r\n        this.loadTableDataByUrl<DBDIObjektbuchBarcodesLookup>(\r\n           'objektbuchBarcodesLookup', `api/inventur/${jobid}/objektbuchLookup`, tblStatus, { jobid, reset }),\r\n\r\n        this.loadTableDataByUrl<DBDIObjektKatalogImages>(\r\n          'objektKatalogImages', `api/inventur/${jobid}/katalogImages`, tblStatus, { jobid, reset })\r\n      ])\r\n      .then( async (results) => {\r\n        const maxRevId = results.reduce( (carry, item) => {\r\n          if (isNaN(item.revisionId)) {\r\n            console.log('#501 data.service item.revisionId not found', { carry, item });\r\n            return carry;\r\n          }\r\n\r\n          const max = Math.max(carry, item.revisionId || 0);\r\n          console.log('#414 data.service reduce to maxRevId', { carry, item, max });\r\n          return Math.max(carry, item.revisionId);\r\n        }, 0);\r\n\r\n        this.settingsService.setRevId('jobid-' + jobid + '-revision-id', maxRevId, 'data.service.ts loadInventurDataByInventurId()');\r\n        console.log('#511 data.service.ts loadInventurDataByInventurId() Start rebuild of barcodeLookup Table');\r\n        await this.barcodeLookup.rebuildByJobid(jobid);\r\n        console.log('#513 data.service.ts loadInventurDataByInventurId() finished', 'arguments', arguments);\r\n        return results;\r\n      })\r\n      .finally( () => {\r\n        this.dexie.stopChangeLogForImport( false );\r\n      });\r\n    this.setLoadingFinished();\r\n    return loadingResult;\r\n  }\r\n\r\n  setLoadingStarted(jobid: number) {\r\n    this.DbSyncService.setFullImportJobId(jobid);\r\n  }\r\n\r\n  setLoadingFinished() {\r\n    this.DbSyncService.setFullImportJobId(0);\r\n  }\r\n\r\n  getLoadingJobId() {\r\n    return this.DbSyncService.getFullImportJobId();\r\n  }\r\n\r\n  async loadTableDataByUrl<T>(table: string, dataUrl: string, cbTblStatus?: any, options?: any): Promise<LoadApiDataResult> {\r\n    const syncLogMsg = this.dbSyncLogService.message.bind(this.dbSyncLogService, [options.jobid]);\r\n    const syncLogErr = this.dbSyncLogService.error.bind(this.dbSyncLogService, [options.jobid]);\r\n    const syncLogData = this.dbSyncLogService.log.bind(this.dbSyncLogService);\r\n\r\n    console.log('#425  data.service loadTableDataByUrl ', table);\r\n    const jobid = options.jobid;\r\n    const reset = options.reset || false;\r\n    const varLastRevisionId = `${table}-${jobid}-revision-id`;\r\n    const varLastLoadAttempt = `${table}-${jobid}-download-attempt`;\r\n    const varLastLoadSuccess = `${table}-${jobid}-download-success`;\r\n    const varLastLoadEntries = `${table}-${jobid}-download-entries`;\r\n    const lastRevisionId = await this.settingsService.get( varLastRevisionId );\r\n    const lastLoadSuccessDate = await this.settingsService.get( varLastLoadSuccess );\r\n    const lastLoadAttemptDate = new Date();\r\n    let nextUrl = dataUrl;\r\n    this.settingsService.set(varLastLoadAttempt, lastLoadAttemptDate);\r\n\r\n    if (!reset && lastLoadSuccessDate) {\r\n      nextUrl += '?lastLoad=' + Date.parse( lastLoadSuccessDate ) + '&lastRevId=' + lastRevisionId;\r\n    }\r\n\r\n    let inserts = 0;\r\n    let total = 0;\r\n    let revisionId = 0;\r\n    let numChunks = 0;\r\n    syncLogMsg('Starte Download und Import: ' + table + ' from ' + nextUrl);\r\n    if (!nextUrl) {\r\n      console.error('#551  this.loadTableDataByUrl nextUrl is Empty', { table, dataUrl, nextUrl, reset });\r\n    }\r\n\r\n\r\n    const logData = (puts: number) => {\r\n      return {\r\n        jobid,\r\n        table,\r\n        revisionId,\r\n        total,\r\n        puts,\r\n        modified: 0,\r\n        deleted: 0\r\n      };\r\n    };\r\n\r\n    while (nextUrl) {\r\n      const url = nextUrl;\r\n\r\n      if (cbTblStatus) {\r\n        cbTblStatus(table, {\r\n          status: 'downloading Part ' + (numChunks + 1),\r\n          startDate: new Date()\r\n        });\r\n      }\r\n\r\n      console.log({ function: 'loadTableDataByUrl', table, url, cbTblStatus, options });\r\n      await this.api.get<any>( url).toPromise()\r\n        .then( async (data: ApiCollectionDataResponse<T>) => {\r\n\r\n          nextUrl = ('nextUrl' in data) ? data.nextUrl : '';\r\n\r\n          console.log('#452 data.service: Retrieved Data ', table, ' for processing!');\r\n\r\n          numChunks++;\r\n          const numRows = data.rows.length;\r\n          if ('total' in data) {\r\n            total = data.total;\r\n          } else {\r\n            total = numRows;\r\n          }\r\n\r\n          if (cbTblStatus) {\r\n            cbTblStatus(table, {\r\n              status: 'process import',\r\n              total\r\n            });\r\n          }\r\n          revisionId = data.revisionId || 0;\r\n          this.settingsService.set(varLastLoadSuccess, lastLoadAttemptDate);\r\n          this.settingsService.set(varLastLoadEntries, inserts + numRows);\r\n\r\n          const stepSize = parseInt((data.rows.length / 10).toString(), 10);\r\n          if (!data.rows) {\r\n            console.error('#468 data.service loadTableDataByUrl Invalid Data-Structure from ', { url, data});\r\n          }\r\n\r\n          return await Promise.all(data.rows.map(async (item: T, i) => {\r\n            return this.dexie.table(table).put({ ...item, ...{log: false}}).then(() => {\r\n              if (((i + 1) % stepSize === 0 || (i + 1) === total) && cbTblStatus) {\r\n                cbTblStatus(table, {\r\n                  current: inserts + 1,\r\n                  progress: ((inserts + 1) * 100 / total).toFixed(1)\r\n                });\r\n              }\r\n              inserts += 1;\r\n              if (inserts % 100 === 0) {\r\n                syncLogData( logData(inserts) );\r\n              }\r\n              return true;\r\n            });\r\n          }));\r\n        });\r\n    }\r\n\r\n    if (revisionId) {\r\n      this.settingsService.set(varLastRevisionId, revisionId);\r\n    }\r\n    syncLogData( logData(inserts) );\r\n    syncLogMsg('Finished Table ' + table);\r\n\r\n    if (cbTblStatus) {\r\n      cbTblStatus(table, {\r\n        status: 'finished',\r\n        finished: new Date()\r\n      });\r\n    }\r\n\r\n    console.log( '#543 data.service loadTableDataByUrl Finished Importprocess Data ', table, ' inserts', inserts );\r\n\r\n    return {\r\n      success: true,\r\n      errorMsg: '',\r\n      total,\r\n      inserts,\r\n      numChunks,\r\n      revisionId,\r\n    } as LoadApiDataResult;\r\n  }\r\n\r\n  async getClient(clientID: number): Promise<DBDIMandanten> | null {\r\n    const clients = await this.getClientList();\r\n    const fclients = clients.filter( client => client.mid === clientID);\r\n    console.log( { clientID, clients, fclients });\r\n    return fclients.length ? fclients[0] : null;\r\n  }\r\n\r\n  async getBuilding(bldgID: number, clientID: number): Promise<DBDIGebaeude> | null {\r\n    const bldgs = await this.getBuildingList(clientID);\r\n    const fbldgs = bldgs.filter( bldg => bldg.gid === bldgID);\r\n    console.log( { bldgID, clientID, bldgs, fbldgs });\r\n    return fbldgs.length ? fbldgs[0] : null;\r\n  }\r\n\r\n  async getClientList(): Promise<DBDIMandanten[]>  {\r\n    return await this.dexie.mandanten.toArray();\r\n  }\r\n\r\n  getFullArtikelData(link: DBDIObjektKatalogMandant, globalData: DBDIObjektKatalogGlobal): DBDIArtikel {\r\n    return {...globalData, ...link, ...{mcuuid: link.uuid }} as DBDIArtikel;\r\n  }\r\n\r\n  getFullRaumData(raum: DBDIRaeume, gebaeude: DBDIGebaeude): DBDIRaumGebaeude {\r\n    const raumGebaeudeData: DBDIRaumGebaeude = {...raum, ...gebaeude};\r\n    return raumGebaeudeData;\r\n  }\r\n\r\n  getArtikelRefByGcuuidMid(gcuuid: string, mid: number): Promise<DBDIObjektKatalogMandant> {\r\n    return this.dexie.objektKatalogMandant.where( { gcuuid, mid } ).first();\r\n  }\r\n\r\n  public async getArtikelRef(uuid: string): Promise<DBDIObjektKatalogMandant> {\r\n    return this.dexie.objektKatalogMandant.get( uuid );\r\n  }\r\n\r\n  public async getArtikelData(gcuuid: string): Promise<DBDIObjektKatalogGlobal> {\r\n    return this.dexie.objektKatalogGlobal.get( gcuuid );\r\n  }\r\n\r\n  public async getArtikel(uuid: string): Promise<DBDIArtikel> {\r\n    const artikelLink = await this.dexie.objektKatalogMandant.get( { uuid } );\r\n    const artikelData = await this.dexie.objektKatalogGlobal.get( { uuid: artikelLink.gcuuid } );\r\n    return this.getFullArtikelData(artikelLink, artikelData);\r\n  }\r\n\r\n  public async getArtikelRefAndData(uuid: string): Promise<ArtikelRefAndData> {\r\n    const artikelRef = await this.dexie.objektKatalogMandant.get( { uuid } );\r\n    const artikelData = await this.dexie.objektKatalogGlobal.get( { uuid: artikelRef.gcuuid } );\r\n    return {\r\n      artikelRef,\r\n      artikelData\r\n    };\r\n  }\r\n\r\n  public async getInventarRef(uuid: string): Promise<DBDIInventar> {\r\n    return this.dexie.inventar.get(uuid);\r\n  }\r\n\r\n  public async getInventarData(uuid: string): Promise<InventarDataResult> {\r\n    const inventarRef = await this.dexie.inventar.get( uuid );\r\n    if (!inventarRef) {\r\n      return { success: false, errorCode: InventarDataResultError.InventarNotFound };\r\n    }\r\n    const artikelRef = await this.dexie.objektKatalogMandant.get( inventarRef.mcuuid );\r\n    if (!artikelRef) {\r\n      return { success: false, errorCode: InventarDataResultError.ArtikelRefNotFound };\r\n    }\r\n    const artikelData = await this.dexie.objektKatalogGlobal.get (artikelRef.gcuuid );\r\n\r\n    if (!artikelData) {\r\n      return { success: false, errorCode: InventarDataResultError.ArtikelDataNotFound };\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      inventarData: {\r\n        inventar: inventarRef,\r\n        artikelRef,\r\n        artikelData\r\n      }\r\n    };\r\n  }\r\n\r\n  public async getRaumAndGebaeude(ruuid: string): Promise<RaumAndGebaude> {\r\n    const raum = await this.dexie.raeume.get( ruuid );\r\n    if (raum) {\r\n      const gebaeude = await this.dexie.gebaeude.get( raum.gid );\r\n      return {\r\n        raum,\r\n        gebaeude\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public getRaum(uuid: string) {\r\n    let raum: DBDIRaeume;\r\n    return this.dexie.raeume.get( {uuid})\r\n      .then( (data: DBDIRaeume) => {\r\n        raum = data;\r\n        const gid = raum.gid;\r\n        return this.dexie.gebaeude.get({ gid });\r\n      })\r\n      .then( (gebaeude: DBDIGebaeude) => this.getFullRaumData(raum, gebaeude));\r\n  }\r\n\r\n  public getRaeumeByGebaeudeId(gid: number, jobid: number): Promise<DBDIRaeume[]> {\r\n    return this.dexie.raeume.where({ gid, for_jobid: jobid }).toArray();\r\n  }\r\n\r\n  public async getArtikelListByClientId(mid: number): Promise<DBDIArtikelMitHersteller[]> {\r\n    const artikelRefs = await this.dexie.objektKatalogMandant\r\n      .where({ mid }).toArray();\r\n\r\n    const artikelData = await Promise.all(artikelRefs.map( async (ref) => {\r\n      return await this.dexie.objektKatalogGlobal.get( ref.gcuuid );\r\n    }));\r\n\r\n    const artikelHst = await Promise.all(artikelData.map( async (ref) => {\r\n      if (typeof ref === 'undefined' || !ref || !ref.huuid) {\r\n        return '';\r\n      }\r\n      const hst = await this.dexie.hersteller.get( ref.huuid );\r\n      if (hst) {\r\n        return hst.Hersteller;\r\n      }\r\n      return '';\r\n    } ));\r\n\r\n    return artikelRefs.map( (ref, i) => (\r\n      {\r\n        ...artikelData[i],\r\n        ...ref,\r\n        ...{ mcuuid: ref.uuid },\r\n        ...{ Hersteller: artikelHst[i] } // artikelHst[i].Hersteller\r\n      })\r\n    );\r\n  }\r\n\r\n  async getInventarByBarcode(barcode: string, useMid?: number): Promise<LookupAssignedInventar|LookupNoMatches> {\r\n    const db = this.dexie;\r\n\r\n    const inventarMatches = await db.inventar\r\n      .where( { code: barcode } )\r\n      .toArray();\r\n\r\n    for (const inventar of inventarMatches) {\r\n      const artikelRef = await db.objektKatalogMandant.get(inventar.mcuuid);\r\n      if (!useMid || artikelRef.mid === useMid) {\r\n        const artikelData = await db.objektKatalogGlobal.get(artikelRef.gcuuid);\r\n\r\n        return {\r\n          type: LookupResultType.Inventar,\r\n          inventar,\r\n          artikelRef,\r\n          artikelData\r\n        };\r\n      }\r\n    }\r\n\r\n    return {\r\n      type: LookupResultType.NoMatch\r\n    };\r\n  }\r\n\r\n  async getRaumByBarcode(barcode: string, useMid?: number): Promise<LookupAssignedRoom|LookupNoMatches> {\r\n    const db = this.dexie;\r\n\r\n    const raumMatch = await db.raeume.where( { code: barcode } ).first();\r\n\r\n    if (raumMatch) {\r\n      const gebaeude = await db.gebaeude.get(raumMatch.gid);\r\n\r\n      return {\r\n        type: LookupResultType.Raum,\r\n        raum: raumMatch,\r\n        gebaeude\r\n      };\r\n    }\r\n\r\n    return { type: LookupResultType.NoMatch };\r\n  }\r\n\r\n  async getArtikelByBarcode(barcode: string, useMid?: number):\r\n    Promise<LookupResult|LookupAssignedObjektbuchArtikel|LookupAssignedObjektbuchArtikel[]> {\r\n    const db = this.dexie;\r\n\r\n    const listArtikelData = await db.objektKatalogGlobal.where( { code: barcode } ).toArray();\r\n\r\n    if (listArtikelData.length === 0) {\r\n      return {type: LookupResultType.NoMatch};\r\n    }\r\n\r\n    return db.objektKatalogMandant.where( 'gcid')\r\n      .anyOf( listArtikelData.map<number>( (d) => d.gcid))\r\n      .filter( (d) => !useMid || d.mid === useMid)\r\n      .toArray()\r\n      .then( (refs) => {\r\n        if (refs.length === 0) {\r\n          console.log('#531 barcodeLookup im Mandanten-Objektbuch NOT FOUND', {barcode, useMid});\r\n          return {type: LookupResultType.NoMatch};\r\n        }\r\n        if (refs.length === 1) {\r\n          return {\r\n            type: LookupResultType.ObjektBuchArtikel,\r\n            artikelRef: refs[0],\r\n            artikelData: listArtikelData.find( itm => itm.gcid === refs[0].gcid )\r\n          };\r\n        }\r\n        return refs.map<LookupAssignedObjektbuchArtikel>( artikelRef => {\r\n          return {\r\n            type: LookupResultType.ObjektBuchArtikel,\r\n            artikelRef,\r\n            artikelData: listArtikelData.find( itm => itm.gcid === artikelRef.gcid )\r\n          };\r\n        });\r\n      });\r\n  }\r\n\r\n  async getBuildingList(clientID: number): Promise<DBDIGebaeude[]> {\r\n    const list = await this.dexie.gebaeude.where({mid: clientID}).toArray();\r\n    return list;\r\n  }\r\n\r\n  async getBuildingListByJobid(jobid: number, clientID: number): Promise<DBDIGebaeude[]> {\r\n    const listGebaeudeRef = await this.dexie.inventurenGebaeude.where({jobid}).toArray();\r\n    const listGid = listGebaeudeRef.map( (jg) => jg.gid);\r\n    const list = await this.dexie.gebaeude.where( 'gid').anyOf(listGid).filter( (g) => g.mid === clientID).toArray();\r\n    return list;\r\n  }\r\n\r\n  joinsToStrictFormat(joins: JoinFlexFormatted, parent?: JoinFlexFormatted): JoinStrictFormatted {\r\n    const db = this.dexie;\r\n    const f = { ...joins };\r\n    if (typeof f.table === 'string' ) {\r\n      f.table = db.table( f.table );\r\n    }\r\n    if (!f.alias) {\r\n      f.alias = f.table.name;\r\n    }\r\n    if (parent) {\r\n      const pTable = parent.table as Dexie.Table<any, any>;\r\n      const fKey = f.table.schema.primKey.keyPath;\r\n      const pKey = pTable.schema.primKey.keyPath;\r\n      const fIndexes = f.table.schema.indexes;\r\n      const pIndexes = pTable.schema.indexes;\r\n\r\n      if (!f.key && !f.parentKey) {\r\n        if (pIndexes.find( (idx) => JSON.stringify(idx.keyPath) === JSON.stringify(fKey) )) {\r\n          f.key = fKey;\r\n          f.parentKey = fKey;\r\n        } else if (fIndexes.find( (idx) => JSON.stringify(idx.keyPath) === JSON.stringify(pKey) )) {\r\n          f.key = pKey;\r\n          f.parentKey = pKey;\r\n        }\r\n      } else if (!f.key) {\r\n        if (fIndexes.find( (idx) => JSON.stringify(idx.keyPath) === JSON.stringify(f.parentKey) )) {\r\n          f.key = f.parentKey;\r\n        }\r\n      } else if (!f.parentKey) {\r\n        if (pIndexes.find( (idx) => JSON.stringify(idx.keyPath) === JSON.stringify(f.key) )) {\r\n          f.parentKey = f.key;\r\n        }\r\n      }\r\n    }\r\n    if (f.joins && Array.isArray(f.joins)) {\r\n      f.joins = f.joins.map( (jn) => this.joinsToStrictFormat(jn, f) );\r\n    }\r\n    return f as JoinStrictFormatted;\r\n  }\r\n\r\n  joinieTables(join: JoinStrictFormatted): Dexie.Table<any, any>[] {\r\n    let tables: Dexie.Table<any, any>[] = [ join.table ];\r\n    if (join.joins) {\r\n      join.joins.forEach( (jn) => tables = tables.concat( this.joinieTables( jn )) );\r\n    }\r\n    return tables;\r\n  }\r\n\r\n  async joinie(flexJoins: JoinFlexFormatted): Promise<any[]|Dexie.Collection<any, any>> {\r\n    const joins: JoinStrictFormatted = this.joinsToStrictFormat(flexJoins);\r\n\r\n    const db = this.dexie;\r\n    const Promise = Dexie.Promise;\r\n    const tables: Dexie.Table<any, any>[] = this.joinieTables(joins);\r\n    const debugConsole = console;\r\n    const debugJoinie = false;\r\n    const logDebug = (...args: any[]) => {\r\n      if (debugJoinie) {\r\n        if ( 'debug' in debugConsole) {\r\n          (debugConsole as unknown as any).debug.apply(debugConsole, arguments);\r\n        } else if ( 'log' in debugConsole) {\r\n          (debugConsole as unknown as any).log.apply(debugConsole, arguments);\r\n        }\r\n      }\r\n    };\r\n    logDebug('found Tables in recursive join', tables);\r\n    const fullRslt: any[] = [];\r\n\r\n    return db.transaction('r', tables, async () => {\r\n      let coll: Dexie.Collection<any, any>;\r\n      if (joins.where) {\r\n        logDebug('Create collection with where Query:', joins.where);\r\n        coll = joins.table.where( joins.where );\r\n      } else {\r\n        logDebug('Create collection from table:', joins.table.name);\r\n        coll = joins.table.toCollection();\r\n      }\r\n      logDebug('#706');\r\n\r\n      if (!joins.joins || !joins.joins.length) {\r\n        logDebug('#709');\r\n        return coll;\r\n      }\r\n      const recursiveRelationshipMapper = async (parent: any, subJoins: JoinStrictFormatted[], deep: number): Promise<boolean> => {\r\n        if (!subJoins || subJoins.length === 0) {\r\n          logDebug('#714');\r\n          return true;\r\n        }\r\n        for (const join of subJoins) {\r\n          const references = {};\r\n          const resultType = !('resultType' in join) ? JoinResultType.List : join.resultType;\r\n          const filterKeysBeforeJoin = !join.where ? [] : Object.keys(join.where);\r\n          const filter = !filterKeysBeforeJoin.length\r\n              ? null\r\n              : (obj: any) => {\r\n                for (const k of filterKeysBeforeJoin) {\r\n                  if (obj[k] !== join.where[k]) {\r\n                    return false;\r\n                  }\r\n                }\r\n                return true;\r\n              };\r\n\r\n          if (!Array.isArray(join.key) && !Array.isArray(join.parentKey)) {\r\n            references[join.key] = parent[join.parentKey];\r\n          } else if (Array.isArray(join.key) && Array.isArray(join.key) && join.key.length === join.parentKey.length) {\r\n            join.key.forEach( (k, i) => {\r\n              references[k] = parent[ join.parentKey[i] ];\r\n            });\r\n          }\r\n          logDebug('#738');\r\n\r\n          const hasNullKeys = Object.values(references).length !== Object.values(references).filter(k => {\r\n            const isValid = !(k === 0 || k === '' || k === null || k === undefined || typeof k === 'undefined');\r\n            logDebug('#741', { k, isValid });\r\n            return isValid;\r\n          }).length;\r\n          if (hasNullKeys) {\r\n            logDebug('#745 Abort Join-Query with Null-Keys on Leading Table: ', { where: references, obj: parent,\r\n            joinTable: join.table });\r\n            return false;\r\n          }\r\n\r\n          logDebug('#738 query join with references', { hasNullKeys, references} );\r\n          if (resultType === JoinResultType.Count) {\r\n            parent[join.alias] = await join.table.where(references).count();\r\n            return true;\r\n          } else if (resultType === JoinResultType.First) {\r\n            parent[join.alias] = await join.table.where(references).first();\r\n            return true;\r\n          }\r\n          await join.table.where( references ).each(subItm => {\r\n\r\n            logDebug('#750');\r\n            // Possibility to remove Item before executing Join-Queries\r\n            if (filter && !filter(subItm)) {\r\n              logDebug('#753 removed item');\r\n              return;\r\n            }\r\n\r\n            recursiveRelationshipMapper(subItm, join.joins || [], deep + 1).then( (b) => {\r\n              logDebug('#758');\r\n              if ( ((join.alias in parent) && parent[join.alias]) && (\r\n                join.multi === false\r\n                || (\r\n                    !isNaN(join.limit)\r\n                    && (isNaN(join.offset) || join.offset === 0)\r\n                    && !join.sort\r\n                    && Array.isArray(parent[join.alias])\r\n                    && ( join.limit <= parent[join.alias].length)\r\n                ))) {\r\n                logDebug('#768');\r\n                return;\r\n              }\r\n              if (join.filter && !join.filter(subItm)) {\r\n                logDebug('#772');\r\n                return; // Nothing\r\n              }\r\n\r\n              if (join.map) {\r\n                logDebug('#777');\r\n                join.map(subItm);\r\n              }\r\n\r\n              if (!parent[join.alias]) {\r\n                logDebug('#782');\r\n                parent[join.alias] = (('multi' in join) && join.multi === true) ? [ subItm ] : subItm;\r\n              } else if (!Array.isArray(parent[join.alias])) {\r\n                logDebug('#785');\r\n                parent[join.alias] = [parent[join.alias], subItm];\r\n              } else {\r\n                logDebug('#788');\r\n                parent[join.alias].push(subItm);\r\n              }\r\n              return;\r\n            });\r\n          }).then( () => {\r\n            logDebug('#794');\r\n            if ( (join.alias in parent) && Array.isArray(parent[join.alias])) {\r\n              logDebug('#796');\r\n              if ( ('sort' in join) && join.sort) {\r\n                console.log('#798');\r\n                parent[join.alias] = (parent[join.alias] as any[]).sort( join.sort );\r\n              }\r\n              logDebug('#801');\r\n              const offset = ('offset' in join) && !!isNaN(join.offset) ? join.offset : 0;\r\n              logDebug('#803');\r\n              const useLimit = ('limit' in join) && !!isNaN(join.limit);\r\n              logDebug('#805');\r\n              const maxLimit = parent[join.alias].length;\r\n              if (offset > 0 || useLimit) {\r\n                console.log('#808');\r\n                parent[join.alias] = (parent[join.alias] as any[]).slice(offset, useLimit ? join.limit : maxLimit);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      };\r\n      await coll.each(itm => {\r\n        recursiveRelationshipMapper(itm, joins.joins || [], 0).then( (b) => {\r\n          logDebug('#809 recursiveRelationMapper.then', { b });\r\n          if (joins.filter && !joins.filter( itm )) {\r\n            logDebug('#811 filter returns false for', { itm });\r\n            return;\r\n          }\r\n          logDebug('#814 add item', { itm });\r\n          fullRslt.push(itm);\r\n        });\r\n      });\r\n    }).then( () => {\r\n      logDebug('#827');\r\n      if (('map' in joins) && joins.map && ('sort' in joins) && joins.sort) {\r\n        logDebug('#829 return fullRslt map and sort');\r\n        return fullRslt.map( joins.map ).sort( joins.sort );\r\n      }\r\n      logDebug('#832');\r\n      if (('map' in joins) && joins.map) {\r\n        logDebug('#834 return fullRslt.map');\r\n        return fullRslt.map( joins.map );\r\n      }\r\n      if (('sort' in joins) && joins.sort) {\r\n        logDebug('#838 return fullRlst.sort');\r\n        return fullRslt.sort( joins.sort );\r\n      }\r\n      logDebug('#841 return fullRslt');\r\n      return fullRslt;\r\n    });\r\n  }\r\n}\r\n\r\n\r\n","import {EventEmitter, Injectable, OnDestroy, Output} from '@angular/core';\r\nimport {ApiService} from './api.service';\r\nimport {BasedataService} from './basedata.service';\r\nimport {DexieService} from './dexie.service';\r\nimport {\r\n  DBDIBarcodeLookup, DBDIBarcodeLookupCompatibleItem,\r\n  DBDIClientChangeLog,\r\n  DBDIInventar, DBDIObjektKatalogMandant, DBDIRaeume,\r\n  DBDIServerSyncErrors\r\n} from '../interfaces/dexie.interfaces';\r\nimport {ConnectionService} from './connection-service.service';\r\nimport {VariablesService} from './variables.service';\r\nimport {DbsyncLogService, TableSyncProgress} from './dbsync-log.service';\r\nimport {DatabaseChangeType} from 'dexie-observable/api';\r\nimport {Subscription} from 'rxjs';\r\nimport {BarcodeService} from '../../pages/invent-form/data-services/barcode.service';\r\nimport {environment} from '../../../environments/environment';\r\n\r\nexport interface TableSyncProgressList {\r\n  [key: string]: TableSyncProgress;\r\n}\r\n\r\ninterface SyncServerChangeRevisionLog {\r\n  revision_id: number;\r\n  jobid?: number;\r\n  timestamp: Date;\r\n  table: string;\r\n  type: number;\r\n  uuid?: string;\r\n  key: number;\r\n  id: number;\r\n  obj?: string;\r\n  mods?: any;\r\n  mid?: number;\r\n  uid?: number;\r\n  devid?: string;\r\n}\r\ninterface SyncServerReChanges {\r\n  table: string;\r\n  uuid: string;\r\n  mods: any;\r\n}\r\ninterface SyncServerTableChangeLog {\r\n  inserts?: [];\r\n  updates?: [];\r\n}\r\ninterface SyncServerChangeLog {\r\n  [key: string ]: SyncServerTableChangeLog;\r\n}\r\nexport interface SyncServerError {\r\n  clientChangeLogId: number;\r\n  table: string;\r\n  type?: number;\r\n  uuid: string;\r\n  ERROR_CODE: string;\r\n  ERROR_MSG: string;\r\n  ERROR_DATA?: any;\r\n  ERROR_REF_TABLE?: string;\r\n  ERROR_REF_BY?: string;\r\n  ERROR_REF_UUID?: string;\r\n}\r\n\r\nexport interface SyncServerErrorEvent {\r\n  jobid: number;\r\n  startDate: Date;\r\n  errors: SyncServerError[];\r\n}\r\n\r\nexport interface SyncServerErrorChange {\r\n  jobid: number;\r\n  count: number;\r\n}\r\n\r\ninterface SyncMappedIds {\r\n  hersteller?: {[key: string]: number }[];\r\n  objektKatalogGlobal?: {[key: string]: number }[];\r\n  objektKatalogMandant?: {[key: string]: number }[];\r\n  objektKatalogImages?: {[key: string]: number }[];\r\n  raeume?: {[key: string]: number }[];\r\n  inventar?: {[key: string]: number }[];\r\n  images?: {[key: string]: number }[];\r\n}\r\n\r\ninterface SyncServerChangeNextChunk {\r\n  numRows: number;\r\n  size: number;\r\n  firstRevisionId: number;\r\n  lastRevisionId: number;\r\n}\r\n\r\ninterface SyncServerChanges {\r\n  total: number;\r\n  rows: SyncServerChangeRevisionLog[];\r\n  chunkSize: number;\r\n  firstRevisionId: number;\r\n  lastRevisionId: number;\r\n}\r\n\r\ninterface SyncServerResponse {\r\n  success: boolean;\r\n  jobid: number;\r\n  errorMsg?: string;\r\n  setClientDeviceId?: number;\r\n  syncedLogIds: number[];\r\n  aSyncedChangeIds: number[];\r\n  aSyncErrors: SyncServerError[];\r\n  aFailedChangeIds: { id: number, reason: string}[];\r\n  // serverChanges: SyncServerChangeRevisionLog[];\r\n  serverRechanges: SyncServerReChanges[];\r\n  iNumImports?: number;\r\n  syncMappedIds?: SyncMappedIds;\r\n  serverChangeLogs?: SyncServerChangeLog;\r\n  revisionId: number;\r\n\r\n  serverChanges: {\r\n    total: number;\r\n    rows: SyncServerChangeRevisionLog[];\r\n    chunkSize: number;\r\n    firstRevisionId: number;\r\n    lastRevisionId: number;\r\n  };\r\n}\r\n\r\nexport interface ServerChangesStatusInfo {\r\n  success?: boolean;\r\n  MaxRevisionId: number;\r\n  NumChanges: number;\r\n  errorMsg?: string;\r\n}\r\n\r\ninterface ServerChangesStatusInfoCache {\r\n  jobid: number;\r\n  timestamp: number;\r\n  data: ServerChangesStatusInfo;\r\n}\r\n\r\ninterface SyncIncompleteInventuren {\r\n  jobid: number;\r\n  changes: DBDIClientChangeLog[];\r\n}\r\n\r\ninterface CurrentJobSyncStatus {\r\n  jobid: number;\r\n  unsyncedClientLogs: number;\r\n  serverRevisionId: number;\r\n  clientRevisionId: number;\r\n  isRunning: boolean;\r\n  isUploading: boolean;\r\n  jobStatus: SyncJobStatus;\r\n}\r\n\r\nexport enum SyncJobStatus {\r\n  Init = 0,\r\n  Pending ,\r\n  AlreadyStarted,\r\n  Offline,\r\n  Aborted,\r\n  QueryChangeLogs,\r\n  AbortedEmptyChangeLogs,\r\n  Uploading,\r\n  ServerAnswered,\r\n  ServerAnsweredWithErrors,\r\n  WriteServerSyncedIds,\r\n  WriteServerReChanges,\r\n  WriteServerChanges,\r\n  RefreshLogs,\r\n  FinishedWithErrors,\r\n  Finished\r\n}\r\n\r\ntype statusCallback = (status: SyncJobStatus) => any;\r\n\r\n\r\nexport class SyncJobResult {\r\n  public status: SyncJobStatus = SyncJobStatus.Init;\r\n  public sendClientDeviceId?: number;\r\n  public committed = 0;\r\n  public confirmed = 0;\r\n  public committedIds: number[] = [];\r\n  public confirmedIds: number[] = [];\r\n  public refreshed?: number = null;\r\n  public serverChanges?: SyncServerChangeLog = {};\r\n  public unsynced = -1;\r\n  public errorMsg = '';\r\n  public starttime = Date.now();\r\n  public stoptime = 0;\r\n  public alreadyStartedProcess?: SyncJobResult = null;\r\n  public statusChanged = new EventEmitter<SyncJobStatus>();\r\n  public finished = false;\r\n\r\n  public revisionId?: number;\r\n  public synced?: number;\r\n  public conflicts?: number;\r\n  public numServerRechanges?: number;\r\n  public numServerChanges?: number;\r\n\r\n  constructor(\r\n    public jobid: number) {}\r\n\r\n  get duration(): number {\r\n    return (this.stoptime || Date.now()) - this.starttime;\r\n  }\r\n\r\n  get durationFormatted(): string {\r\n    const dur = (this.stoptime || Date.now()) - this.starttime;\r\n    const ms = dur % 1000;\r\n    const s = Math.floor(dur / 1000) % 60;\r\n    const m = Math.floor( dur / 60000 ) % 60;\r\n    const h = Math.floor( dur / (60 * 60 * 1000));\r\n    return ((h > 0) ? `${h}h ` : '') +\r\n      ((m > 0) ? `${m}m ` : '') +\r\n      ((s > 0) ? `${s}s ` : '') +\r\n      ((ms > 0) ? `${ms}ms ` : '');\r\n  }\r\n\r\n  private statusChangeCallback?: statusCallback;\r\n\r\n  public onStatusChange( cb: statusCallback ) {\r\n    this.statusChangeCallback = cb;\r\n  }\r\n\r\n  public setStatus(status: SyncJobStatus): SyncJobResult {\r\n    if (status !== this.status) {\r\n      this.status = status;\r\n      this.statusChanged.emit(status);\r\n\r\n      if (this.statusChangeCallback) {\r\n        this.statusChangeCallback(this.status);\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  public getStatus(): SyncJobStatus {\r\n    return this.status;\r\n  }\r\n\r\n  public getStatusName(): string {\r\n    return SyncJobStatus[this.status].toString();\r\n  }\r\n\r\n  public finish(status: SyncJobStatus, errorMsg?: string): SyncJobResult {\r\n    this.stoptime = Date.now();\r\n    this.finished = true;\r\n    this.setStatus( status );\r\n    if (typeof errorMsg !== 'undefined') {\r\n      this.errorMsg = errorMsg;\r\n    }\r\n    return this;\r\n  }\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DBSyncClientService implements OnDestroy {\r\n\r\n  private status: 0;\r\n  private processes: SyncJobResult[] = [];\r\n  private processingJobids: number[] = [];\r\n  public processStarted = new EventEmitter<SyncJobResult>();\r\n  public processFinished = new EventEmitter<SyncJobResult>();\r\n  private syncIntervalTimer = null;\r\n  private syncIntervalTime = 1 * 60 * 1000;\r\n  private fullImportJobid = 0;\r\n  private currentJobSyncStatus: CurrentJobSyncStatus;\r\n  private subscriptionClientLogsChanged: Subscription;\r\n  private dbgLog = false;\r\n  private subscriptionNetworkChanged: Subscription;\r\n  private aLastServerChangesByJobid: ServerChangesStatusInfoCache[] = [];\r\n  private serverChangesCacheLifetime = 60 * 1000;\r\n  private isInDebugMode = false;\r\n  private appVersion = environment.appVersion;\r\n\r\n  @Output() autoSyncChange = new EventEmitter<boolean>();\r\n  @Output() updateStatusChanges = new EventEmitter<any>();\r\n  @Output() currentJobChange = new EventEmitter<CurrentJobSyncStatus>();\r\n  @Output() syncErrorChange = new EventEmitter<SyncServerErrorChange>();\r\n\r\n  constructor(\r\n    private dexieService: DexieService,\r\n    private apiService: ApiService,\r\n    private baseData: BasedataService,\r\n    private networkService: ConnectionService,\r\n    private settings: VariablesService,\r\n    private dbSyncLogService: DbsyncLogService,\r\n    private bcLookupService: BarcodeService) {\r\n\r\n    this.subscriptionClientLogsChanged = this.dexieService.clientSyncAmountChanged.subscribe( (amount) => {\r\n      if (this.isInDebugMode) {\r\n        console.log('DBSyncClientService.constructor() subscribedEvent #271 clientSyncAmountChanged: ', { amount });\r\n      }\r\n    });\r\n    this.subscriptionNetworkChanged = this.networkService.monitor().subscribe( (state) => {\r\n      if (this.isInDebugMode) {\r\n        console.log('DBSyncClientService.constructor() connectionChanged #275', { state });\r\n      }\r\n      if (state.hasServerAccess) {\r\n        this.autoSyncStart(true);\r\n      } else {\r\n        this.autoSyncStop();\r\n      }\r\n    });\r\n    if (this.networkService.getCurrentState().hasServerAccess) {\r\n      this.autoSyncStart();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptionClientLogsChanged.unsubscribe();\r\n  }\r\n\r\n  initCurrentJobSyncStatus() {\r\n    this.currentJobSyncStatus = {\r\n      jobid: 0,\r\n      unsyncedClientLogs: 0,\r\n      serverRevisionId: 0,\r\n      clientRevisionId: 0,\r\n      isUploading: false,\r\n      isRunning: false,\r\n      jobStatus: SyncJobStatus.Init\r\n    };\r\n  }\r\n\r\n  autoSyncIsRunning() {\r\n    return this.syncIntervalTimer !== null;\r\n  }\r\n\r\n  setFullImportJobId(jobid: number) {\r\n    this.fullImportJobid = jobid;\r\n  }\r\n\r\n  getFullImportJobId(): number {\r\n    return this.fullImportJobid;\r\n  }\r\n\r\n  autoSyncStart(startNow: boolean = false) {\r\n    const logTi = 'DbsyncClientService.autoSyncStart(' + (startNow ? 'true' : 'false') + ')';\r\n    if (this.syncIntervalTimer) {\r\n      this.autoSyncStop();\r\n    }\r\n\r\n    // Sync im 1-Minuten-Takt\r\n    console.log(logTi + (new Date()).toTimeString() + ' setInterval this.sync, ' + this.syncIntervalTime + 'ms');\r\n    const syncFunction = this.sync.bind(this);\r\n    this.syncIntervalTimer = setInterval( () => {\r\n      console.log(logTi + (new Date()).toTimeString() + ' interval execute this.sync.bind');\r\n      syncFunction();\r\n    }, this.syncIntervalTime);\r\n    this.autoSyncChange.emit( true );\r\n\r\n    if (startNow) {\r\n      console.log(logTi + (new Date()).toTimeString() + ' startNow before interval starts in ' + this.syncIntervalTime + 'ms');\r\n      this.sync();\r\n    }\r\n  }\r\n\r\n  autoSyncStop() {\r\n    if (this.syncIntervalTimer) {\r\n      try {\r\n        clearInterval(this.syncIntervalTimer);\r\n        this.syncIntervalTimer = null;\r\n        this.autoSyncChange.emit( false );\r\n      } catch (e) {}\r\n    }\r\n  }\r\n\r\n  async sync() {\r\n    const logTi = 'DbsyncClientService.sync()';\r\n    const currJobId = this.baseData.getCurrentJobid();\r\n    console.log('DBSyncClientService.sync() #377 STARTED currJobId(', currJobId, ') at ' + (new Date()).toLocaleString());\r\n    if (!this.networkService.getCurrentState().hasServerAccess) {\r\n      console.error(logTi + ' #379 ABORT No-Internet-Access');\r\n      return;\r\n    }\r\n    const isDBSyncService = (this instanceof DBSyncClientService);\r\n    if (this.isInDebugMode) {\r\n      console.log(logTi + ' #384 this is DBSyncClientService', { isDBSyncService });\r\n    }\r\n    if (!isDBSyncService) {\r\n      console.error(logTi + ' #387 this is not correct binded to Instance of DBSyncClientService');\r\n      return;\r\n    }\r\n\r\n    if (this.isInDebugMode) {\r\n      console.log(logTi + ' #392 call getIncompleteInventuren()');\r\n    }\r\n    let incompleteInventurLogs = await this.getIncompleteInventuren();\r\n    console.log(logTi + ' #389 all changes', incompleteInventurLogs\r\n      .reduce((carry, job) => {\r\n        return carry + job.changes.length;\r\n      }, 0 ));\r\n\r\n    const currJobIdx = incompleteInventurLogs.map( itm => itm.jobid ).indexOf( currJobId );\r\n    if (this.isInDebugMode) {\r\n      console.log(logTi + ' #398 currJobIdx: ', currJobIdx);\r\n    }\r\n\r\n    if (currJobIdx !== -1) {\r\n      if (this.isInDebugMode) {\r\n        console.log(logTi + ' #403');\r\n      }\r\n      const currJob = incompleteInventurLogs[ currJobIdx ];\r\n      incompleteInventurLogs = incompleteInventurLogs.slice( currJobIdx, 1);\r\n      console.log(logTi + ' #407 call sendByJobId(', currJob.jobid, currJob.changes, ')');\r\n      await this.sendByJobId( currJob.jobid, currJob.changes);\r\n    } else {\r\n      console.log(logTi + ' #410 no changes of currJobId(' + currJobId + ')');\r\n    }\r\n\r\n    for (const logs of incompleteInventurLogs) {\r\n      if (logs.jobid === currJobId) {\r\n        continue;\r\n      }\r\n      if (this.isInDebugMode) {\r\n        console.log(logTi + ' #418 call sendByJobId(', logs.jobid, logs.changes, ')');\r\n      }\r\n      await this.sendByJobId( logs.jobid, logs.changes );\r\n    }\r\n    console.log(logTi + ' #423 END');\r\n  }\r\n\r\n  async getCurrentClientRevId(): Promise<number> {\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    return this.getClientRevIdByJobid( jobid );\r\n  }\r\n\r\n  async getClientRevIdByJobid(jobid: number): Promise<number> {\r\n    const lastRevIdVar = `jobid-${jobid}-revision-id`;\r\n    return await this.settings.get( lastRevIdVar) || 0;\r\n  }\r\n\r\n  async setCurrentClientRevId(newRevId: number): Promise<boolean> {\r\n    console.log(`DBSyncClientService.setCurrentClientRevId(newRevId: ${newRevId}) #410`);\r\n    const jobid = this.baseData.getCurrentJobid();\r\n    const lastRevIdVar = `jobid-${jobid}-revision-id`;\r\n    return await this.settings.setRevId( lastRevIdVar, newRevId, 'dbsync-client.service.ts setCurrentClientRevId');\r\n  }\r\n\r\n  async askServerForChanges(jobid: number = 0): Promise<ServerChangesStatusInfo> {\r\n    if (!jobid) {\r\n      jobid = this.baseData.getCurrentJobid();\r\n    }\r\n    const devid = this.baseData.getCurrentDeviceId() || 0;\r\n    const lastRevId = await this.getClientRevIdByJobid(jobid);\r\n\r\n    if (!this.networkService.hasServerAccess) {\r\n      console.error('Abort Change-Request: No Internet!');\r\n      return { success: false, errorMsg: 'Abort Change-Request: No Internet!', MaxRevisionId: -1, NumChanges: -1 };\r\n    }\r\n\r\n    return this.apiService\r\n      .get<any>(\r\n        `api/sync/havingChanges/${jobid}/${lastRevId}/${devid}`,\r\n        {})\r\n      .toPromise()\r\n      .then(async (data) => {\r\n        if ( ('errorMsg' in data) && data.errorMsg) {\r\n          console.error( data.errorMsg );\r\n          return { success: false };\r\n        }\r\n        return { ...{ success: true}, ...data};\r\n      });\r\n  }\r\n\r\n  async refreshServerChangeCache(jobid, timestamp, data): Promise<void> {\r\n    const sc = this.aLastServerChangesByJobid.find( ch => ch.jobid === jobid);\r\n    if (sc) {\r\n      sc.timestamp = Date.now();\r\n      sc.data = data;\r\n    } else {\r\n      this.aLastServerChangesByJobid.unshift({\r\n        jobid,\r\n        timestamp: Date.now(),\r\n        data\r\n      });\r\n    }\r\n  }\r\n\r\n  async getLastServerChanges(jobid: number = 0, maxAge = 60 * 10 * 1000): Promise<ServerChangesStatusInfo> {\r\n    const sc = this.aLastServerChangesByJobid.find( ch => ch.jobid === jobid);\r\n    if (!sc || Date.now() - sc.timestamp > maxAge) {\r\n      return this.askServerForChanges(jobid);\r\n    }\r\n    return sc.data;\r\n  }\r\n\r\n  async syncJob(jobid: number): Promise<SyncJobResult> {\r\n    console.log('DBSyncClientService.syncJob(jobid:', jobid, ') #404');\r\n    this.clearFinishedProcesses();\r\n\r\n    const currJobProc = this.processes.find( proc => proc.jobid === jobid);\r\n    const newJob = new SyncJobResult(jobid);\r\n\r\n    if (currJobProc && !currJobProc.finished) {\r\n      console.log('DBSyncClientService.syncJob() #411. Sync fr Job ', jobid, ' luft bereits!');\r\n      newJob.alreadyStartedProcess = currJobProc;\r\n      return newJob.finish(SyncJobStatus.AlreadyStarted,\r\n        'Sync-Process is already running. Duration: ' + currJobProc.durationFormatted\r\n      );\r\n    }\r\n\r\n    const numChanges = await this.numUnsyncedChangeLogsByJobId(jobid);\r\n    if (!numChanges && this.isInDebugMode) {\r\n      console.log('DBSyncClientService.syncJob() #420. numClientChanges: ' + numChanges);\r\n      // return newJob.finish(SyncJobStatus.AbortedEmptyChangeLogs);\r\n    }\r\n\r\n    if (this.isInDebugMode) {\r\n      console.log('DBSyncClientService.syncJob() #424. call this.sendByJobId(' + jobid + ', [], newJob)');\r\n    }\r\n    this.sendByJobId(jobid, [], newJob);\r\n    return newJob;\r\n  }\r\n\r\n  private async finishProcess(proc: SyncJobResult, status: SyncJobStatus, errorMsg?: string): Promise<SyncJobResult> {\r\n    if (!proc.finished) {\r\n      proc.finish(status, errorMsg || null);\r\n    }\r\n    this.clearFinishedProcesses();\r\n    this.processFinished.emit( proc );\r\n    return proc;\r\n  }\r\n\r\n  async sendByJobId(useJobid: number, useLogs?: DBDIClientChangeLog[], useJobResult?: SyncJobResult): Promise<SyncJobResult> {\r\n    const origDebugMode = this.isInDebugMode;\r\n    this.isInDebugMode = true;\r\n    const logTi = 'DbsyncClientService.sendByJobId(' + useJobid +\r\n      ', logs[' + (Array.isArray(useLogs) ? useLogs.length : 0) + '], ' +\r\n      (typeof useJobResult) + ')';\r\n    console.log(logTi + ' #448 at ', (new Date()).toLocaleTimeString());\r\n    this.clearFinishedProcesses();\r\n    const jobid = useJobid;\r\n    const syncJobResult = useJobResult || new SyncJobResult(jobid);\r\n    const jobInProcess = this.processes.find(proc => proc.jobid === jobid);\r\n\r\n    if (jobInProcess && !jobInProcess.finished) {\r\n      if (this.isInDebugMode) {\r\n        console.log(`DBSyncClientService.sendByJobId(${jobid}) #537. Abbruch. Sync luft bereits`);\r\n      }\r\n      syncJobResult.alreadyStartedProcess = jobInProcess;\r\n      return syncJobResult.finish(SyncJobStatus.AlreadyStarted);\r\n    }\r\n    this.processingJobids.push(jobid);\r\n    this.processes.push(syncJobResult);\r\n\r\n    if (this.getFullImportJobId() === useJobid ) {\r\n      return this.finishProcess(\r\n        syncJobResult,\r\n        SyncJobStatus.AlreadyStarted,\r\n        'Synchronisation wurde abgebrochen, da Import noch luft!'\r\n      );\r\n    }\r\n\r\n    if (!this.networkService.hasServerAccess) {\r\n      return this.finishProcess(\r\n        syncJobResult,\r\n        SyncJobStatus.Offline,\r\n        'Synchronisatioon wurde abgebrochen wegen fehlender Serververbindung!'\r\n      );\r\n    }\r\n\r\n    if (this.isInDebugMode) {\r\n      console.log(`DbsyncClientServer.sendByJobId(${jobid}) #525 call askServerForChanges`, (new Date()).toString());\r\n    }\r\n    const ServerInfo = await this.askServerForChanges();\r\n\r\n    const devid = this.baseData.getCurrentDeviceId() || 0;\r\n    const lastRevIdVar = `jobid-${jobid}-revision-id`;\r\n\r\n    let lastRevId = (await this.settings.get(lastRevIdVar)) || 0;\r\n\r\n    syncJobResult.setStatus(SyncJobStatus.Pending);\r\n    this.processStarted.emit(syncJobResult);\r\n\r\n    if (!useLogs || !useLogs.length) {\r\n      if (this.isInDebugMode) {\r\n        console.log(`DBSyncClientService.sendByJobId(${jobid}) #548. Keine Client-nderungen!`);\r\n      }\r\n      syncJobResult.setStatus(SyncJobStatus.QueryChangeLogs);\r\n      useLogs = await this.getUnsyncedChangeLogsByJobId(useJobid);\r\n    }\r\n\r\n    if (!useLogs && !ServerInfo.NumChanges) {\r\n      if (this.isInDebugMode) {\r\n        console.log(`DBSyncClientService.sendByJobId(${jobid}) #556; Abbruch. Keine nderungen!`);\r\n      }\r\n      return this.finishProcess(syncJobResult, SyncJobStatus.AbortedEmptyChangeLogs);\r\n    }\r\n    let logs = useLogs;\r\n\r\n    syncJobResult.sendClientDeviceId = devid;\r\n    syncJobResult.committedIds = logs.map<number>((itm) => itm.id);\r\n\r\n    // ASK for Server-Changes\r\n    this.dbSyncLogService.start(jobid, lastRevId);\r\n    const syncLogMsg = this.dbSyncLogService.message.bind(this.dbSyncLogService, [jobid]);\r\n    const syncLogErr = this.dbSyncLogService.error.bind(this.dbSyncLogService, [jobid]);\r\n    const syncLogData = this.dbSyncLogService.log.bind(this.dbSyncLogService);\r\n\r\n    syncLogMsg('Starte Synchronisation');\r\n    let total = 0;\r\n    let executed = 0;\r\n    let chunks = 0;\r\n    let lastSyncDate: Date;\r\n    const tableLogs: TableSyncProgressList = {};\r\n\r\n    let syncJobLoop = 0;\r\n    while (!syncJobResult.finished && syncJobLoop < 20) {\r\n      syncJobLoop++;\r\n      if (syncJobLoop > 1) {\r\n        lastRevId = (await this.settings.get(lastRevIdVar)) || 0;\r\n        logs = await this.getUnsyncedChangeLogsByJobId(useJobid);\r\n      }\r\n      if (lastRevIdVar === 'jobid-2-revision-id' && lastRevId === 0 ) {\r\n        const err = 'Fehlerhafter Wert fr ' + name + ': ' + lastRevId;\r\n        console.error( err );\r\n        alert( err );\r\n        return;\r\n      }\r\n      if (this.isInDebugMode) {\r\n        console.log(\r\n          logTi + ` #599. Synchronisations-Loop!`,\r\n          { syncJobLoop, lastRevId, 'logs.length': logs.length }\r\n        );\r\n      }\r\n\r\n      syncLogMsg('Download Daten ...');\r\n      syncJobResult.committed = logs.length;\r\n      lastSyncDate = new Date();\r\n      await this.apiService\r\n        .post<SyncServerResponse>(\r\n          `api/sync/syncWithRevisionId/${jobid}`,\r\n          {\r\n            jobid,\r\n            devid,\r\n            lastRevId,\r\n            appVersion: this.appVersion,\r\n            changes: logs\r\n          })\r\n        .toPromise()\r\n        .then(async (data) => {\r\n          chunks++;\r\n          if (('errorMsg' in data) && data.errorMsg) {\r\n            syncJobResult.errorMsg = data.errorMsg;\r\n            console.error(logTi + ' #552 ', data.errorMsg);\r\n            syncLogErr('Download Fehler: ' + data.errorMsg);\r\n            return this.finishProcess(syncJobResult, SyncJobStatus.ServerAnsweredWithErrors);\r\n          }\r\n\r\n          this.saveLastSyncErrorEvent({\r\n            jobid,\r\n            startDate: lastSyncDate,\r\n            errors: data.aSyncErrors || []\r\n          });\r\n\r\n          if (total === 0) {\r\n            total = data.serverChanges.total;\r\n            this.dbSyncLogService.jobSetTotal(jobid, total);\r\n          }\r\n          this.dbSyncLogService.jobSetChunks(jobid, chunks);\r\n\r\n          syncLogMsg('Verarbeite Server-Antwort ...');\r\n          console.log(logTi + ' #570 Changes wurden gesendet, verarbeite Response', {\r\n            aSyncedChangeIds: data.aSyncedChangeIds ? data.aSyncedChangeIds.length : 0,\r\n            aFailedChangeIds: data.aFailedChangeIds ? data.aFailedChangeIds.length : 0,\r\n            serverRechanges: data.serverRechanges ? data.serverRechanges.length : 0,\r\n            serverChanges: data.serverChanges.rows ? data.serverChanges.rows.length : 0\r\n          });\r\n\r\n          console.log(logTi + ' #577 Process sync_done');\r\n          if (data.aSyncedChangeIds && data.aSyncedChangeIds.length > 0) {\r\n            syncLogMsg('Entferne vom Server besttige Client-Logs ...');\r\n            syncJobResult.setStatus(SyncJobStatus.WriteServerSyncedIds);\r\n            await this.dexieService.clientChangeLog\r\n              .where('id')\r\n              .anyOf(data.aSyncedChangeIds)\r\n              .modify({sync_done: 1});\r\n\r\n            await this.dexieService.clientChangeLog\r\n              .where({sync_done: 1})\r\n              .delete();\r\n          }\r\n\r\n          if (data.aFailedChangeIds && data.aFailedChangeIds.length > 0) {\r\n            syncJobResult.errorMsg += 'Num Failed Server-Syncs: ' + data.aFailedChangeIds.length + '.\\n';\r\n            for (const chckFailure of data.aFailedChangeIds) {\r\n              switch (chckFailure.reason) {\r\n                case 'INSERT_ALREADY_EXISTS':\r\n                case 'NEWER_VERSION_ON_SERVER':\r\n                  await this.dexieService.clientChangeLog.delete(chckFailure.id);\r\n                  break;\r\n              }\r\n            }\r\n          }\r\n\r\n          console.log(logTi + ' #603 Process serverRechanges');\r\n          if (data.serverRechanges && data.serverRechanges.length > 0) {\r\n            syncLogMsg('Korrigiere Client-Ids nach Server-Antwort ...');\r\n            syncJobResult.setStatus(SyncJobStatus.WriteServerReChanges);\r\n            await Promise.all(data.serverRechanges.map(async (chg) => {\r\n              chg.table = chg.table[0].toLowerCase() + chg.table.substr(1);\r\n              chg.mods.log = false;\r\n              return this.dexieService.table(chg.table).where({uuid: chg.uuid}).modify(chg.mods);\r\n            }));\r\n          }\r\n          if (this.isInDebugMode) {\r\n            console.log(logTi + ' #614 Process serverChanges');\r\n          }\r\n\r\n          if (data.serverChanges.rows && data.serverChanges.rows.length > 0) {\r\n            syncLogMsg('Import Server-Changes ...');\r\n            syncJobResult.setStatus(SyncJobStatus.WriteServerChanges);\r\n            const chgLen = data.serverChanges.rows.length;\r\n            for (let ci = 0; ci < chgLen; ci++) {\r\n              const chg = data.serverChanges.rows[ci];\r\n              const currRevId = chg.revision_id;\r\n              if (currRevId < lastRevId) {\r\n                const err = `#701 SYNC-FEHLER: LastRevId ist grer als CurrRevID: ${lastRevId} > ${currRevId}`;\r\n                console.error(err);\r\n                return this.finishProcess(syncJobResult, SyncJobStatus.Aborted,\r\n                  'Server-Aenderungen sind nicht streng nach RevId sortiert!');\r\n              }\r\n\r\n              chg.table = chg.table[0].toLowerCase() + chg.table.substr(1);\r\n              if (!(chg.table in tableLogs) ) {\r\n                tableLogs[chg.table] = {\r\n                  jobid,\r\n                  table: chg.table,\r\n                  revisionId: chg.revision_id,\r\n                  executed: 0,\r\n                  puts: 0,\r\n                  modified: 0,\r\n                  deleted: 0,\r\n                  total: 0,\r\n                  lastEmittedrevisionId: 0\r\n                };\r\n              }\r\n\r\n              switch (chg.type) {\r\n                case 1: // Insert\r\n                  tableLogs[chg.table].puts++;\r\n                  const objInsertData = { ...(JSON.parse(chg.obj)), ...{ log: false }};\r\n                  if (this.isInDebugMode) {\r\n                    console.log(logTi + ' #651 ' + ci + '/' + chgLen +\r\n                      ' insert into ' + chg.table + ' ', objInsertData);\r\n                  }\r\n                  await this.dexieService.table(chg.table).put(objInsertData);\r\n                  if (['inventar', 'raeume', 'objektKatalogMandant'].indexOf(chg.table) > -1) {\r\n                    const newItem = objInsertData as DBDIBarcodeLookupCompatibleItem;\r\n\r\n                    this.bcLookupService.addBarcode({\r\n                      code: newItem.code,\r\n                      table: chg.table,\r\n                      key: 'uuid',\r\n                      for_jobid: newItem.for_jobid,\r\n                      uuid: newItem.uuid\r\n                    });\r\n                  }\r\n                  break;\r\n\r\n                case 2: // Update\r\n                  tableLogs[chg.table].modified++;\r\n                  const objUpdateData = { ...(JSON.parse(chg.mods)), ...{ log: false }};\r\n                  const hasCodeMod = ('code' in objUpdateData);\r\n                  if (this.isInDebugMode) {\r\n                    console.log(logTi + ' #671 ' + ci + '/' + chgLen + ' hasCodeMod: ',\r\n                      hasCodeMod,\r\n                      objUpdateData\r\n                    );\r\n                  }\r\n                  await this.dexieService.table(chg.table)\r\n                    .where({uuid: chg.uuid})\r\n                    .modify(objUpdateData);\r\n\r\n                  if (['inventar', 'raeume', 'objektKatalogMandant'].indexOf(chg.table) > -1\r\n                    && ('code' in objUpdateData)) {\r\n                    const updItem = objUpdateData as DBDIBarcodeLookupCompatibleItem;\r\n                    if (this.isInDebugMode) {\r\n                      console.log(logTi + ' #682 Run Barcode-Update ', hasCodeMod, objUpdateData);\r\n                    }\r\n                    const replaceSuccess = await this.bcLookupService.replaceBarcodeByUuid(chg.uuid, {\r\n                      code: updItem.code,\r\n                      for_jobid: jobid,\r\n                      key: 'uuid',\r\n                      table: chg.table,\r\n                      uuid: chg.uuid\r\n                    });\r\n                    if (this.isInDebugMode) {\r\n                      console.log(logTi + ' #690', { replaceSuccess });\r\n                    }\r\n                  } else {\r\n                    if (this.isInDebugMode) {\r\n                      console.log(logTi + ' #692 No-Barcode-Update ', hasCodeMod,\r\n                        {chg, objUpdateData}\r\n                      );\r\n                    }\r\n                  }\r\n                  break;\r\n\r\n                case 3: // Delete\r\n                  tableLogs[chg.table].deleted++;\r\n                  if (this.isInDebugMode) {\r\n                    console.log(logTi + ' #700 ' + ci + '/' + chgLen +\r\n                      ' dbsync-client delete ' + chg.table + ' by uuid ' + chg.uuid);\r\n                  }\r\n                  await this.dexieService.table(chg.table)\r\n                    .where({uuid: chg.uuid})\r\n                    .delete();\r\n              }\r\n\r\n              executed++;\r\n              tableLogs[chg.table].executed++;\r\n              lastRevId = currRevId;\r\n              if (this.isInDebugMode) {\r\n                console.log(logTi + ' #710 ' + ci + '/' + chgLen +\r\n                  ' this.settings.set(', lastRevIdVar, chg.revision_id, ')');\r\n              }\r\n              await this.settings.setRevId(lastRevIdVar, chg.revision_id, 'LogRow ' + ci + '/' + chgLen + '; RevId ' + currRevId);\r\n\r\n              if (executed === total || executed % 100 === 0) {\r\n                for (const logData of Object.values(tableLogs)) {\r\n                  if (logData.revisionId > logData.lastEmittedrevisionId) {\r\n                    syncLogData(logData);\r\n                    logData.lastEmittedrevisionId = logData.revisionId;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          console.log(logTi + ' #725 Process SyncResponse finished');\r\n          syncJobResult.revisionId = await this.settings.get(lastRevIdVar);\r\n          syncJobResult.committed = logs ? logs.length : 0;\r\n          syncJobResult.synced = data.aSyncedChangeIds ? data.aSyncedChangeIds.length : 0;\r\n          syncJobResult.conflicts = data.aFailedChangeIds ? data.aFailedChangeIds.length : 0;\r\n          syncJobResult.numServerRechanges = data.serverRechanges ? data.serverRechanges.length : 0;\r\n          syncJobResult.numServerChanges = data.serverChanges ? data.serverChanges.rows.length : 0;\r\n\r\n          console.log(logTi + ' #733 data.serverChanges.total:', data.serverChanges.total);\r\n\r\n          for (const logData of Object.values(tableLogs)) {\r\n            syncLogData(logData);\r\n            logData.lastEmittedrevisionId = logData.revisionId;\r\n          }\r\n\r\n          if (data.serverChanges.rows.length < data.serverChanges.total) {\r\n            console.log(logTi + ' #741 keep SyncProcess(jobid: ' + syncJobResult.jobid + ') open');\r\n            return syncJobResult;\r\n          }\r\n          console.log(logTi + ' #744 finish SyncProcess(jobid: ' + syncJobResult.jobid + ')');\r\n          syncLogMsg('Aktuelle Synchronisation wurde abgeschlossen');\r\n          return this.finishProcess(syncJobResult, SyncJobStatus.Finished);\r\n        }\r\n      );\r\n    }\r\n    this.isInDebugMode = origDebugMode;\r\n  }\r\n\r\n  async addBarcodeToLookupTable(\r\n    code: DBDIBarcodeLookup['code'],\r\n    table: DBDIBarcodeLookup['table'],\r\n    uuid: DBDIBarcodeLookup['uuid'],\r\n    forJobid: DBDIBarcodeLookup['for_jobid'],\r\n    id?: DBDIBarcodeLookup['id']): Promise<boolean> {\r\n\r\n    const tblBarcodeLookup = this.dexieService.barcodeLookup;\r\n    const updateHelper = 1;\r\n    const key = this.dexieService.table( table ).schema.primKey.keyPath as string;\r\n\r\n    tblBarcodeLookup.put({...{\r\n      code,\r\n      table,\r\n      key,\r\n      id,\r\n      for_jobid: forJobid,\r\n      uuid,\r\n      updateHelper\r\n    }, ...{log: false}});\r\n    return true;\r\n  }\r\n\r\n  public clearFinishedProcesses() {\r\n    console.log('DBSyncClientService #668 processList before clearFinishedProcesses', { ...this.processes.map(p => p) });\r\n    this.processes = this.processes.filter( proc => !proc.finished );\r\n    this.processingJobids = this.processes.map<number>( proc => proc.jobid );\r\n    console.log('DBSyncClientService #677 processList after clearFinishedProcesses', { ...this.processes.map(p => p) });\r\n  }\r\n\r\n  public getRunningProcesses(): SyncJobResult[] {\r\n    this.clearFinishedProcesses();\r\n    return this.processes;\r\n  }\r\n\r\n  public getProcessByJobId(jobid: number): SyncJobResult {\r\n    return this.processes.find( proc => proc.jobid === jobid);\r\n  }\r\n\r\n  private async updateCommitCounter(committedIds: number[], jobid?: number): Promise<number> {\r\n    return await this.dexieService.clientChangeLog\r\n      .where('id')\r\n      .anyOf( committedIds )\r\n      .and((log) => !jobid || log.jobid === jobid)\r\n      .modify((log) => {\r\n        log.sync_attempts++;\r\n        log.sync_lastattempt = new Date();\r\n        return log;\r\n      });\r\n  }\r\n\r\n  private async processResponseByJobId(syncedLogIds: number[], jobid?: number): Promise<number> {\r\n    // Return Anzahl betroffener Datenstze\r\n    const syncTime = Date.now();\r\n    return await this.dexieService.clientChangeLog\r\n      .where('id')\r\n      .anyOf(syncedLogIds)\r\n      .and((log) => !jobid || log.jobid === jobid)\r\n      .modify({\r\n        sync_done: 1,\r\n        sync_time: syncTime\r\n      });\r\n  }\r\n\r\n  public async getUnsyncedChangeLogsByJobId(jobid: number): Promise<DBDIClientChangeLog[]> {\r\n    const tablePrio = [ 'inventar', 'objektKatalogMandant', 'objektKatalogGlobal', 'hersteller' ];\r\n    const db = this.dexieService;\r\n\r\n    return db.clientChangeLog\r\n      .where({ jobid })\r\n      .filter(itm => !('sync_done' in itm) || itm.sync_done === 0)\r\n      .toArray()\r\n      .then( (list) => {\r\n        return this.sortAndFixChangeLogs(list);\r\n      });\r\n  }\r\n\r\n  public sortAndFixChangeLogs(list: DBDIClientChangeLog[]): Promise<DBDIClientChangeLog[]> {\r\n    console.log('DbSyncClientService #866 sortAndFixChangeLogs', { ...list });\r\n    const tablePrio = [ 'inventar', 'objektKatalogMandant', 'objektKatalogGlobal', 'hersteller' ];\r\n    const db = this.dexieService;\r\n\r\n    list.sort( (a, b) => {\r\n      if (a.timestamp !== b.timestamp) {\r\n        return a.timestamp < b.timestamp ? -1 : 1;\r\n      } else {\r\n        return (tablePrio.indexOf(a.table) > tablePrio.indexOf(b.table)) ? -1 : 1;\r\n      }\r\n    });\r\n\r\n    return Promise.all(list.map( async (itm) => {\r\n      if (itm.type === DatabaseChangeType.Update) {\r\n        if (Object.keys(itm.mods).length === 0 || (Object.keys(itm.mods).length === 1 && 'modified_at' in itm.mods)) {\r\n          console.log('DbSyncClientService #881 Removing empty Entry from Change-Log', { itm });\r\n          db.clientChangeLog.delete(itm.id);\r\n          return null;\r\n        }\r\n      }\r\n\r\n      if (itm.table === 'objektKatalogMandant') {\r\n        if (itm.type === DatabaseChangeType.Create && !itm.obj.gcuuid) {\r\n          const artikelData = await db.objektKatalogGlobal.where({gcid: itm.obj.gcid}).first();\r\n          if (artikelData) {\r\n            itm.obj.gcuuid = artikelData.uuid;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (itm.table === 'inventar') {\r\n        if (itm.type === DatabaseChangeType.Update) {\r\n          let isEmptyMod = false;\r\n          if (itm.mods.mcid && !itm.mods.mcuuid) {\r\n            console.error('DBSyncClient Found Inventar-Update #872 without mcuuid-Field', {...itm});\r\n            const artikelRef = await db.objektKatalogMandant.where({mcid: itm.mods.mcid}).first();\r\n            if (artikelRef) {\r\n              itm.mods.mcuuid = artikelRef.uuid;\r\n              console.log('DBSyncClient Found Inventar-Update #875 added mcuuid-Field', {...itm});\r\n            } else {\r\n              console.error('DBSyncClient Found Inventar-Update #875 but don t found ArtikelRef.mcuuid-Field', {...itm});\r\n            }\r\n            delete itm.mods.mcid;\r\n          }\r\n          if (Object.keys(itm.mods).length === 1 && 'modified_at' in itm.mods) {\r\n            isEmptyMod = true;\r\n          }\r\n          if (Object.keys(itm.mods).length === 0) {\r\n            isEmptyMod = true;\r\n          }\r\n          if (isEmptyMod) {\r\n            console.log('DbSyncClientService #908 Removing empty Entry from Change-Log', { itm });\r\n            db.clientChangeLog.delete(itm.id);\r\n            itm = null;\r\n          }\r\n        } else if (itm.type === DatabaseChangeType.Create) {\r\n          // Test und Korrektur falls GCUUID stat MCUUID in Inventar hinterlegt wurde\r\n          console.log('DBSyncClient #849 Test if inventar has gcuuid instead of mcuuid, itm.obj.mcuuid: ' + itm.obj.mcuuid);\r\n          await db.objektKatalogGlobal.where({uuid: itm.obj.mcuuid}).first().then( async (rslt) => {\r\n            console.log('DbSyncClientService #851 result of okm-Query by mcuuid', { rslt });\r\n            if (rslt) {\r\n              const okgItm = rslt;\r\n              await db.objektKatalogMandant.where({gcuuid: okgItm.uuid }).first().then( (okm) => {\r\n                itm.obj.mcuuid = okm.uuid;\r\n                db.inventar.update(itm.obj.uuid, { mcuuid: okm.uuid });\r\n                db.clientChangeLog.update(itm.id, {\r\n                  obj: {\r\n                    ...itm.obj,\r\n                    ...{mcuuid: okm.uuid }\r\n                  }\r\n                });\r\n              });\r\n            }\r\n            return rslt;\r\n          })\r\n            .catch( (reason) => {\r\n              console.error('DBSyncClient #865 Error on Querying for OKG by ' + itm.obj.mcuuid, {reason});\r\n            });\r\n\r\n          if (itm.obj.mcid && itm.obj.mcuuid) {\r\n            console.log('DBSyncClient Found Inventar-Update #872 with mcuuid-Field', {...itm});\r\n            delete itm.obj.mcid;\r\n          }\r\n          if (itm.obj.rid && !itm.obj.ruuid) {\r\n            console.error('DBSyncClient Found Inventar-Update #872 without ruuid-Field', {...itm});\r\n            const raum = await db.raeume.where({rid: itm.obj.rid}).first();\r\n            if (raum) {\r\n              itm.obj.ruuid = raum.uuid;\r\n              console.log('Fixed Missing ruuid-Field', {...itm});\r\n            }\r\n          }\r\n          if (!itm.obj.ruuid || !itm.obj.mcuuid) {\r\n            console.error('DbSyncClientService #938 Removing incomplete Inventar + Entry from Change-Log', { itm });\r\n            await db.clientChangeLog.delete(itm.id);\r\n            await db.inventar.delete(itm.uuid);\r\n            if (itm.obj.code && itm.obj.for_jobid && itm.uuid) {\r\n              await db.barcodeLookup\r\n                .where({code: itm.obj.code, for_jobid: itm.obj.for_jobid})\r\n                .filter((lkup) => lkup.uuid === itm.uuid)\r\n                .delete();\r\n            }\r\n            itm = null;\r\n          }\r\n        }\r\n      }\r\n\r\n      return itm;\r\n    }).filter( (itm) => !!itm));\r\n  }\r\n\r\n  public async numUnsyncedChangeLogsByJobId(jobid: number): Promise<number> {\r\n    const rslt = this.dexieService.clientChangeLog\r\n      .where('jobid' )\r\n      .equals( jobid )\r\n      // .filter(itm => !('sync_done' in itm) || itm.sync_done === 0)\r\n      .count();\r\n\r\n    rslt.then( num => {\r\n      console.log('then numUnsyncedChangeLogsByJobId: ', { jobid, num });\r\n      return num;\r\n    }).catch( err => {\r\n      console.error('then numUnsyncedChangeLogsByJobId: ', { jobid, err } );\r\n    });\r\n    return rslt;\r\n  }\r\n\r\n  public async getCurrentSyncStatus(): Promise<any> {\r\n    return Promise.all([\r\n      this.numUnsyncedChangeLogs(),\r\n      this.getRunningProcesses()\r\n    ]);\r\n  }\r\n\r\n  public async numUnsyncedChangeLogs(): Promise<number> {\r\n    return this.dexieService.clientChangeLog.where({sync_done: 0}).count()\r\n      .catch( reason => {\r\n        console.error(reason, 'DbsyncClientService.numUnsyncedChangeLogs() #1055');\r\n        throw reason;\r\n      });\r\n  }\r\n\r\n  private async getIncompleteInventuren(): Promise<SyncIncompleteInventuren[]> {\r\n    const currJobId = this.baseData.getCurrentJobid();\r\n    const numPending = await this.dexieService.clientChangeLog.where({ sync_done: 0 }).count();\r\n    if (!numPending) {\r\n      return [];\r\n    }\r\n\r\n    const uniqJobIds: number[] = [];\r\n    await this.dexieService.clientChangeLog.where({ sync_done: 0 }).each( (log) => {\r\n      if (-1 === uniqJobIds.indexOf(log.jobid)) {\r\n        if (log.jobid === currJobId) {\r\n          uniqJobIds.unshift(log.jobid);\r\n        } else {\r\n          uniqJobIds.push(log.jobid);\r\n        }\r\n      }\r\n    });\r\n\r\n    return Promise.all( uniqJobIds.map( async jobid => {\r\n      const changes = await this.dexieService.clientChangeLog\r\n        .where({ jobid, sync_done: 0 }).sortBy('id');\r\n      return {\r\n        jobid,\r\n        changes\r\n      };\r\n    }));\r\n  }\r\n\r\n  private async saveLastSyncErrorEvent(event: SyncServerErrorEvent): Promise<void> {\r\n    const jobid = event.jobid;\r\n    const insertData: DBDIServerSyncErrors[] = event.errors.map( (itm: SyncServerError) => {\r\n      return {\r\n        jobid,\r\n        clientChangeLogId: itm.clientChangeLogId || null,\r\n        table: itm.table,\r\n        type: itm.type || null,\r\n        uuid: itm.uuid,\r\n        error_code: itm.ERROR_CODE,\r\n        error_msg: itm.ERROR_MSG || '',\r\n        error_data: itm.ERROR_DATA || null,\r\n        error_ref_table: itm.ERROR_REF_TABLE || null,\r\n        error_ref_by: itm.ERROR_REF_BY || null,\r\n        error_ref_uuid: itm.ERROR_REF_UUID || null,\r\n        timestamp: new Date()\r\n      };\r\n    });\r\n    const delAction = this.dexieService.serverSyncErrors.where({jobid}).delete();\r\n    delAction.finally(() => this.dexieService.serverSyncErrors.bulkAdd(\r\n      insertData\r\n    )).then( (n) => {\r\n      if (n > 0) {\r\n        this.resyncServerErrors(jobid);\r\n      }\r\n    }).finally( () => {\r\n      this.syncErrorChange.emit({ jobid, count: event.errors.length});\r\n    });\r\n  }\r\n\r\n  async resyncServerErrors(jobid: number): Promise<any> {\r\n    const db = this.dexieService;\r\n    console.log('DBSyncClientService resyncServerErrors #980');\r\n\r\n    const aErrors = await db.serverSyncErrors.where({jobid}).toArray();\r\n\r\n    aErrors.map( async (err) => {\r\n      console.log('DBSyncClientService resyncServerErrors #983', { err });\r\n      if (!('clientChangeLogId' in err) || !err.clientChangeLogId) {\r\n        console.error('DBSyncClientService resyncServerErrors #985 NO clientChangeLogId in err', { err });\r\n        return false;\r\n      }\r\n      const table = err.table;\r\n      const uuid = err.uuid;\r\n      const chId = err.clientChangeLogId;\r\n      console.log('DBSyncClientService resyncServerErrors #992 ', { id: chId, table, uuid });\r\n\r\n      const logItem = await db.clientChangeLog.get(chId);\r\n\r\n      if (!logItem || logItem.table !== table || logItem.uuid !== uuid) {\r\n        console.error('logItem by id ', chId, ' not found', { table, uuid });\r\n      }\r\n\r\n      console.log('DBSyncClientService resyncServerErrors #998 ', {\r\n        logItem,\r\n        id: chId,\r\n        table,\r\n        uuid\r\n      });\r\n\r\n      console.log('DBSyncClientService resyncServerErrors #1003', { logItem });\r\n      const data = await db.table( table ).get(uuid);\r\n      console.log('DBSyncClientService resyncServerErrors #1005', { err_code: err.error_code, data });\r\n\r\n      switch (err.error_code) {\r\n        case 'ITEM_NOT_FOUND':\r\n          console.log('DBSyncClientService resyncServerErrors #1009 clientChangeLog.delete ', { chId });\r\n          await db.clientChangeLog.delete(chId);\r\n          if (data) {\r\n            const chgLogData: DBDIClientChangeLog = {\r\n              jobid: logItem.jobid,\r\n              key: 0,\r\n              mid: logItem.mid,\r\n              obj: data,\r\n              sync_attempts: 0,\r\n              sync_done: 0,\r\n              table: logItem.table,\r\n              timestamp: new Date(),\r\n              type: 1,\r\n              uid: logItem.uid,\r\n              uuid: logItem.uuid\r\n            };\r\n            console.log('DBSyncClientService resyncServerErrors #1025 clientChangeLog.add ', { chgLogData });\r\n            db.clientChangeLog.add(chgLogData).catch( reason => {\r\n              console.error(reason, 'DbsyncClientService.resyncServerErrors() #1108 clientChangeLog.add', { chgLogData });\r\n            });\r\n          }\r\n          break;\r\n\r\n        case 'NEWER_VERSION_ON_SERVER':\r\n          console.log('DBSyncClientService resyncServerErrors #1031 clientChangeLog.delete ', { chId });\r\n          await db.clientChangeLog.delete(chId);\r\n          break;\r\n      }\r\n    });\r\n  }\r\n}\r\n","import {EventEmitter, Injectable} from '@angular/core';\r\n\r\nexport interface TableSyncProgress {\r\n  jobid: number;\r\n  table: string;\r\n  revisionId: number;\r\n  executed: number;\r\n  total: number;\r\n  puts?: number;\r\n  modified?: number;\r\n  deleted?: number;\r\n  lastEmittedrevisionId: number;\r\n}\r\nexport interface TableSyncTotal {\r\n  table: string;\r\n  executed: number;\r\n  total: number;\r\n}\r\n\r\nexport interface TotalSyncProgress {\r\n  jobid: number;\r\n  revisionId: number;\r\n  executed: number;\r\n  total: number;\r\n  puts: number;\r\n  modified: number;\r\n  deleted: number;\r\n  tables: TableSyncTotal[];\r\n  tableSyncDetails?: {[key: string]: TableSyncProgress };\r\n  chunks: number;\r\n  start: Date;\r\n}\r\nexport interface SyncMessage {\r\n  jobid: number;\r\n  message: string;\r\n}\r\nexport interface SyncError {\r\n  jobid: number;\r\n  message: string;\r\n}\r\nexport interface LoadingMetaData {\r\n  message: string;\r\n  table?: string;\r\n  executed?: number;\r\n  total?: number;\r\n}\r\nexport interface LoadingMetaMessage {\r\n  message: string;\r\n}\r\n\r\nexport interface LoadingMetaError {\r\n  message: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DbsyncLogService {\r\n\r\n  tableSyncProgress = new EventEmitter<TableSyncProgress>();\r\n  totalSyncProgress = new EventEmitter<TotalSyncProgress>();\r\n  syncMessage = new EventEmitter<SyncMessage>();\r\n  syncError = new EventEmitter<SyncError>();\r\n  loadingMetaData = new EventEmitter<LoadingMetaData>();\r\n  loadingMetaError = new EventEmitter<LoadingMetaError>();\r\n  loadingMetaMessage = new EventEmitter<LoadingMetaMessage>();\r\n\r\n  private jobList: TotalSyncProgress[] = [];\r\n\r\n  constructor() {}\r\n\r\n  start(jobid: number, revisionId: number) {\r\n    const job = this.jobList.find( s => s.jobid !== jobid);\r\n    if (job) {\r\n      this.finish(jobid);\r\n    }\r\n    const newJob = {\r\n      jobid,\r\n      revisionId,\r\n      executed: 0,\r\n      total: 0,\r\n      chunks: 0,\r\n      puts: 0,\r\n      modified: 0,\r\n      deleted: 0,\r\n      tables: [],\r\n      tableSyncDetails: {},\r\n      start: new Date()\r\n    };\r\n    this.jobList.push(newJob);\r\n    this.totalSyncProgress.emit(newJob);\r\n  }\r\n\r\n  finish(jobid: number) {\r\n    this.jobList = this.jobList.filter( s => s.jobid !== jobid);\r\n  }\r\n\r\n  jobSetTotal(jobid: number, total: number) {\r\n    const job = this.jobList.find( s => s.jobid !== jobid);\r\n    if (job) {\r\n      job.total = total;\r\n    }\r\n  }\r\n\r\n  jobSetRevisionId(jobid: number, revisionId: number) {\r\n    const job = this.jobList.find( s => s.jobid !== jobid);\r\n    if (job) {\r\n      job.revisionId = revisionId;\r\n    }\r\n  }\r\n\r\n  jobSetChunks(jobid: number, chunks: number) {\r\n    const job = this.jobList.find( s => s.jobid !== jobid);\r\n    if (job) {\r\n      job.chunks = chunks;\r\n    }\r\n  }\r\n\r\n  log(data: TableSyncProgress ) {\r\n    const job = this.jobList.find( s => s.jobid === data.jobid);\r\n    this.tableSyncProgress.emit(data);\r\n\r\n    if (job) {\r\n      job.revisionId = Math.max(job.revisionId, data.revisionId);\r\n      job.executed += data.executed;\r\n      job.puts += data.puts;\r\n      job.modified += data.modified;\r\n      job.deleted += data.deleted;\r\n      job.tableSyncDetails[ data.table ] = data;\r\n\r\n      const tbl = job.tables.find( t => t.table === data.table);\r\n      if (!tbl) {\r\n        job.tables.push({\r\n          table: data.table,\r\n          executed: data.executed,\r\n          total: data.total\r\n        });\r\n        job.total += data.total;\r\n      }\r\n\r\n      this.totalSyncProgress.emit(job);\r\n    }\r\n  }\r\n\r\n  message(jobid: number, message: string) {\r\n    this.syncMessage.emit({jobid, message});\r\n  }\r\n\r\n  error(jobid: number, message: string) {\r\n    this.syncError.emit({jobid, message});\r\n  }\r\n\r\n  metaData(data: LoadingMetaData) {\r\n    this.loadingMetaData.emit(data);\r\n  }\r\n\r\n  metaMessage(message: LoadingMetaMessage) {\r\n    this.loadingMetaMessage.emit(message);\r\n  }\r\n\r\n  metaError(error: LoadingMetaError) {\r\n    this.loadingMetaError.emit(error);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ApiService } from './api.service';\r\nimport { IDatabaseChange } from 'dexie-observable/api';\r\nimport { ISyncProtocol, IPersistedContext, ApplyRemoteChangesFunction, PollContinuation, ReactiveContinuation } from 'dexie-syncable/api';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DexieSyncClientService implements ISyncProtocol {\r\n\r\n  constructor(private apiService: ApiService) {}\r\n\r\n  sync(\r\n    context: IPersistedContext,\r\n    url: string,\r\n    options: object,\r\n    baseRevision: any,\r\n    syncedRevision: any,\r\n    changes: IDatabaseChange[],\r\n    partial: boolean,\r\n    applyRemoteChanges: ApplyRemoteChangesFunction,\r\n    onChangesAccepted: () => void,\r\n    onSuccess: (continuation: PollContinuation | ReactiveContinuation) => void,\r\n    onError: (error: any, again?: number) => void) {\r\n\r\n    const POLL_INTERVAL = 10000; // Poll every 10th second\r\n\r\n    // In this example, the server expects the following JSON format of the request:\r\n    //  {\r\n    //      [clientIdentity: unique value representing the client identity. If omitted, server will return a new client\r\n    //                       identity in its response that we should apply in next sync call.]\r\n    //      baseRevision: baseRevision,\r\n    //      partial: partial,\r\n    //      changes: changes,\r\n    //      syncedRevision: syncedRevision\r\n    //  }\r\n    //  To keep the sample simple, we assume the server has the exact same specification of how changes are structured.\r\n    //  In real world, you would have to pre-process the changes array to fit the server specification.\r\n    //  However, this example shows how to deal with ajax to fulfil the API.\r\n    const request = {\r\n      clientIdentity: context.clientIdentity || null,\r\n      baseRevision,\r\n      partial,\r\n      changes,\r\n      syncedRevision\r\n    };\r\n\r\n    /**\r\n     *\r\n     * $.ajax(url, {\r\n     * type: 'post',\r\n     * contentType: 'application/json', // Make sure we set the correct content-type header as some servers expect this\r\n     * dataType: 'json',\r\n     * data: JSON.stringify(request)\r\n     * });\r\n     */\r\n    this.apiService\r\n      .post<any>( '/api/sync/dexie', request)\r\n      .toPromise()\r\n      .catch( err => {\r\n        // onError(textStatus, POLL_INTERVAL);\r\n        onError(err, POLL_INTERVAL);\r\n      })\r\n      .then( data => {\r\n        // In this example, the server response has the following format:\r\n        // {\r\n        //    success: true / false,\r\n        //    errorMessage: \"\",\r\n        //    changes: changes,\r\n        //    currentRevision: revisionOfLastChange,\r\n        //    needsResync: false,    // Flag telling that server doesn't have given syncedRevision or of other reason\r\n        //                           // wants client to resync. ATTENTION: this flag is currently\r\n        //                           // ignored by Dexie.Syncable\r\n        //    partial: true / false, // The server sent only a part of the changes it has for us.\r\n        //                           // On next resync it will send more based on the clientIdentity\r\n        //    [clientIdentity: unique value representing the client identity.\r\n        //    Only provided if we did not supply a valid clientIdentity in the request.]\r\n        // }\r\n        if (!data.success) {\r\n          onError (data.errorMessage, Infinity); // Infinity = Don't try again. We would continue getting this error.\r\n        } else {\r\n          if ('clientIdentity' in data) {\r\n            context.clientIdentity = data.clientIdentity;\r\n            // Make sure we save the clientIdentity sent by the server before we try to resync.\r\n            // If saving fails we wouldn't be able to do a partial synchronization\r\n            context.save()\r\n              .then(() => {\r\n                // Since we got success, we also know that server accepted our changes:\r\n                onChangesAccepted();\r\n                // Convert the response format to the Dexie.Syncable.Remote.SyncProtocolAPI specification:\r\n                applyRemoteChanges (data.changes, data.currentRevision, data.partial, data.needsResync);\r\n                onSuccess({ again: POLL_INTERVAL });\r\n              })\r\n              .catch((e) => {\r\n                // We didn't manage to save the clientIdentity stop synchronization\r\n                onError(e, Infinity);\r\n              });\r\n          } else {\r\n            // Since we got success, we also know that server accepted our changes:\r\n            onChangesAccepted();\r\n            // Convert the response format to the Dexie.Syncable.Remote.SyncProtocolAPI specification:\r\n            applyRemoteChanges (data.changes, data.currentRevision, data.partial, data.needsResync);\r\n            onSuccess({ again: POLL_INTERVAL });\r\n          }\r\n        }\r\n      })\r\n    ;\r\n  }\r\n}\r\n","import {EventEmitter, Injectable, Output} from '@angular/core';\r\nimport Dexie from 'dexie';\r\nimport 'dexie-observable';\r\nimport {DatabaseChangeType, IDatabaseChange, ICreateChange, IDeleteChange, IUpdateChange} from 'dexie-observable/api';\r\n\r\nimport 'dexie-syncable';\r\n\r\nimport { DexieSyncClientService } from './dexie-sync-client.service';\r\nimport {BasedataService} from './basedata.service';\r\nimport {\r\n  DBDIBarcodeLookup,\r\n  DBDIClientChangeLog, DBDIServerSyncErrors,\r\n  DBDIDevices, DBDIGebaeude, DBDIHersteller, DBDIImages,\r\n  DBDIInventar, DBDIInventuren, DBDIInventurenGebaeude, DBDIInventurenUser,\r\n  DBDILieferant, DBDIMandanten, DBDIObjektbuchBarcodesLookup,\r\n  DBDIObjektKatalogGlobal, DBDIObjektKatalogMandant, DBDIObjektKatalogImages,\r\n  DBDIRaeume, DBDIUploads, DBDIUsers, DBDIVariables, DBDIInventurenUserStatus\r\n} from '../interfaces/dexie.interfaces';\r\nimport {Guid} from 'guid-typescript';\r\nimport {log} from \"util\";\r\n\r\nconst database = 'merTensIventory.1';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DexieService extends Dexie {\r\n\r\n  @Output() clientSyncAmountChanged = new EventEmitter<number>();\r\n\r\n  barcodeLookup: Dexie.Table<DBDIBarcodeLookup, [string, number]>;\r\n  clientChangeLog: Dexie.Table<DBDIClientChangeLog, number>;\r\n  devices: Dexie.Table<DBDIDevices, number>;\r\n  gebaeude: Dexie.Table<DBDIGebaeude, number>;\r\n  hersteller: Dexie.Table<DBDIHersteller, string>;\r\n  images: Dexie.Table<DBDIImages, string>;\r\n  inventar: Dexie.Table<DBDIInventar, string>;\r\n  inventuren: Dexie.Table<DBDIInventuren, number>;\r\n  inventurenGebaeude: Dexie.Table<DBDIInventurenGebaeude, [number, number, number]>;\r\n  inventurenUser: Dexie.Table<DBDIInventurenUser, [number, number]>;\r\n  inventurenUserStatus: Dexie.Table<DBDIInventurenUserStatus, [number, number, number]>;\r\n  lieferant: Dexie.Table<DBDILieferant, number>;\r\n  mandanten: Dexie.Table<DBDIMandanten, number>;\r\n  objektbuchBarcodesLookup: Dexie.Table<DBDIObjektbuchBarcodesLookup, string>;\r\n  objektKatalogGlobal: Dexie.Table<DBDIObjektKatalogGlobal, string>;\r\n  objektKatalogMandant: Dexie.Table<DBDIObjektKatalogMandant, string>;\r\n  objektKatalogImages: Dexie.Table<DBDIObjektKatalogImages, string>;\r\n  raeume: Dexie.Table<DBDIRaeume, string>;\r\n  serverSyncErrors: Dexie.Table<DBDIServerSyncErrors, number>;\r\n  uploads: Dexie.Table<DBDIUploads, number>;\r\n  users: Dexie.Table<DBDIUsers, number>;\r\n  variables: Dexie.Table<DBDIVariables, string>;\r\n\r\n  dbVersion = 12;\r\n  nextDbVersion = 0;\r\n  stopClientLogForServerLoad = false;\r\n\r\n  constructor(private syncClient: DexieSyncClientService, private baseData: BasedataService) {\r\n    super( database );\r\n    this.nextDbVersion = this.dbVersion + 1;\r\n    this.on('versionchange', (event: IDBVersionChangeEvent) => {\r\n      console.log('DexieService #62 event versionchange ', { event });\r\n    });\r\n    this.on('message', event => {\r\n      console.log('DexieService #65 event message', { event });\r\n    });\r\n    this.init();\r\n  }\r\n\r\n  async clearDB(): Promise<boolean> {\r\n    console.log('clear db');\r\n    return Promise.all(this.tables.map( (t) => t.clear() ))\r\n      .then( () => {\r\n        console.log('Datenbank wurde geleert!');\r\n        return true;\r\n      }).catch( (r) => {\r\n        console.error(r);\r\n        return false;\r\n      });\r\n  }\r\n\r\n  async deleteDB(): Promise<boolean> {\r\n    const dbName = this.name;\r\n    console.log('delete db ' + dbName);\r\n    return Dexie.delete(dbName).then( () => {\r\n      alert('Browser-Datenbank ' + dbName + ' wurde gelscht!\\n' +\r\n        'Die Seite wird fr den Neu-Aufbau neu geladen\\n' +\r\n        ' und muss ntigenfalls auch hndisch wiederholt neu geladen werden!');\r\n      document.location.href = '/';\r\n      return true;\r\n    }).catch( (reason) => {\r\n      alert('Beim Lschen sind Fehler aufgetreten\\n' +\r\n        'Die Seite wird neu geladen\\n' +\r\n        ' und muss ntigenfalls auch hndisch wiederholt neu geladen werden!');\r\n      document.location.href = '/';\r\n      return false;\r\n    });\r\n  }\r\n\r\n  init() {\r\n    Dexie.Syncable.registerSyncProtocol('inventorySync', this.syncClient );\r\n    this.nextDbVersion = this.dbVersion + 1;\r\n\r\n    this.version(12).stores({\r\n      barcodeLookup:\r\n        '&[code+for_jobid],table,for_jobid,[table+for_jobid],updateHelper,[table+updateHelper]',\r\n      clientChangeLog:\r\n       '++id,table,type,key,uuid,jobid,sync_done',\r\n      devices:\r\n       '++id,name,user_agent',\r\n      gebaeude:\r\n       '++gid,mid,Gebaeude',\r\n      hersteller:\r\n       '$$uuid,hid,Hersteller,for_jobid,created_jobid',\r\n      images:\r\n        '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid,created_jobid,modified_jobid',\r\n      inventar:\r\n        '$$uuid,ivid,mcid,for_jobid,mcuuid,code,[rid+jobid],rid,rid_init,rid_neu,ruuid,jobid,invid,iv_nr',\r\n      inventuren:\r\n       '++jobid,mid,gid,Titel,Start,aktiviert,AbgeschlossenAm',\r\n      inventurenGebaeude:\r\n        '[jobid+gid+uid],jobid,gid,uid',\r\n      inventurenUser:\r\n        '&[jobid+uid],jobid,uid',\r\n      inventurenUserStatus:\r\n        '&[jobid+uid+device_id],jobid,uid,device_id,status,token',\r\n      lieferant:\r\n       '++hid,Lieferant',\r\n      mandanten:\r\n       '++mid,Mandant',\r\n      objektbuchBarcodesLookup:\r\n        '&code,for_jobid',\r\n      objektKatalogGlobal:\r\n       '$$uuid,gcid,code,hid,Bezeichnung,Typ,Gruppe,Kategorie,Farbe,Groesse,created_jobid',\r\n      objektKatalogMandant:\r\n       '$$uuid,mcid,gcid,gcuuid,code,mid,for_jobid,created_jobid',\r\n      objektKatalogImages:\r\n      '$$uuid,id,for_jobid,RefTable,RefUuid,ImgUuid,Kategorie',\r\n      raeume:\r\n       '$$uuid,rid,gid,[rid+gid],for_jobid,code,raumid,Raum,Raumbezeichnung,Etage,current_jobid,current_jobstatus',\r\n      serverSyncErrors:\r\n        '++id,jobid,clientChangeLogId,table,type,uuid,error_code,error_msg',\r\n      uploads:\r\n       '++id,uuid,mid,standort,importkey,filename,filesize,checksum,stat,errors',\r\n      users:\r\n       '++id,name,email,password',\r\n      variables:\r\n        '&name,value'\r\n    });\r\n    const sleep = (ms) => {\r\n      return new Promise(resolve => setTimeout(resolve, ms));\r\n    };\r\n\r\n    if (1) {\r\n      const v2 = this.nextDbVersion;\r\n      this.version(v2).stores({\r\n        images:\r\n          '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid,created_jobid,modified_jobid'\r\n      }).upgrade((trans) => {\r\n        console.log('Starte Upgrade for DB-Version ' + v2);\r\n        this.images.toCollection().each( (img) => {\r\n          this.objektKatalogMandant.where({mcid: img.mcid}).first().then( (okm) => {\r\n            this.images.where({uuid: img.uuid}).modify({mcuuid: okm.uuid});\r\n          });\r\n        });\r\n      });\r\n      this.nextDbVersion += 1;\r\n    }\r\n\r\n    if (1) {\r\n      const v3 = this.nextDbVersion;\r\n      this.version(v3).stores({\r\n        images:\r\n          '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid,created_jobid,modified_jobid'\r\n      }).upgrade((trans) => {\r\n        console.log('Starte Upgrade for DB-Version ' + v3);\r\n        this.images.toCollection().each( (img) => {\r\n          this.objektKatalogMandant.where({mcid: img.mcid}).first().then( (okm) => {\r\n            this.images.where({uuid: img.uuid}).modify({mcuuid: okm.uuid});\r\n          });\r\n        });\r\n      });\r\n      this.nextDbVersion += 1;\r\n    }\r\n\r\n    if (1) {\r\n      const v4 = this.nextDbVersion;\r\n      this.version(v4).stores({\r\n        images:\r\n          '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid,created_jobid,modified_jobid'\r\n      }).upgrade((trans) => {\r\n        console.log('Starte Upgrade for DB-Version ' + v4);\r\n        return trans;\r\n      });\r\n      this.nextDbVersion += 1;\r\n    }\r\n\r\n    if (1) {\r\n      const v5 = this.nextDbVersion;\r\n      this.version(v5).stores({\r\n        objektKatalogGlobal:\r\n          '$$uuid,gcid,code,huuid,Bezeichnung,Typ,Gruppe,Kategorie,Farbe,Groesse,created_jobid',\r\n      }).upgrade((trans) => {\r\n        console.log('Starte Upgrade for DB-Version ' + v5);\r\n        return trans;\r\n      });\r\n      this.nextDbVersion += 1;\r\n    }\r\n\r\n    if (1) {\r\n      const v6 = this.nextDbVersion;\r\n      this.version(v6).stores({\r\n        objektKatalogGlobal:\r\n          '$$uuid,gcid,code,huuid,Bezeichnung,[Bezeichnung+huuid],Typ,Gruppe,Kategorie,Farbe,Groesse,created_jobid',\r\n      }).upgrade((trans) => {\r\n        console.log('Starte Upgrade for DB-Version ' + v6);\r\n        return trans;\r\n      });\r\n      this.nextDbVersion += 1;\r\n    }\r\n\r\n    if (1) {\r\n      const v7 = this.nextDbVersion;\r\n      this.version(v7).stores({\r\n        objektKatalogGlobal:\r\n          '$$uuid,uuid,gcid,code,huuid,Bezeichnung,[Bezeichnung+huuid],Typ,Gruppe,Kategorie,Farbe,Groesse,created_jobid',\r\n      }).upgrade((trans) => {\r\n        console.log('Starte Upgrade for DB-Version ' + v7);\r\n        return trans;\r\n      });\r\n      this.nextDbVersion += 1;\r\n    }\r\n\r\n    if (1) {\r\n      const v8 = this.nextDbVersion;\r\n      this.version(v8).stores({\r\n        images:\r\n          '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid,created_jobid,modified_jobid',\r\n      }).upgrade((trans) => {\r\n        console.log('Starte Upgrade for DB-Version ' + v8);\r\n        return trans;\r\n      });\r\n      this.nextDbVersion += 1;\r\n    }\r\n\r\n    if (1) {\r\n      const v9 = this.nextDbVersion;\r\n      this.version(v9).stores({\r\n        images:\r\n          '$$uuid,id,name,type,size,width,height,gcuuid,mcuuid,url,for_jobid',\r\n      });\r\n      this.nextDbVersion += 1;\r\n    }\r\n\r\n    if (true) {\r\n      const v10 = this.nextDbVersion;\r\n      this.version(v10).stores({\r\n        barcodeLookup:\r\n          '&[code+for_jobid],table,for_jobid,[table+for_jobid],[table+for_jobid+updateHelper],updateHelper,[table+updateHelper]',\r\n      });\r\n      this.nextDbVersion += 1;\r\n    }\r\n    if (true) {\r\n      const v11 = this.nextDbVersion;\r\n      this.version(v11).stores({\r\n        objektKatalogImages:\r\n          '$$uuid,id,for_jobid,RefTable,RefUuid,ImgUuid,Kategorie,[RefTable+RefUuid+Kategorie]',\r\n      });\r\n      this.nextDbVersion += 1;\r\n    }\r\n    if (true) {\r\n      const v12 = this.nextDbVersion;\r\n      this.version(v12).stores({\r\n        objektKatalogImages:\r\n          '$$uuid,id,for_jobid,RefTable,RefUuid,ImgUuid,Kategorie,[RefTable+RefUuid+Kategorie],[RefTable+RefUuid]',\r\n      });\r\n      this.nextDbVersion += 1;\r\n    }\r\n\r\n\r\n    const validLogTables = [\r\n      'hersteller',\r\n      'inventar',\r\n      'inventurenUserStatus',\r\n      'images',\r\n      'objektKatalogGlobal',\r\n      'objektKatalogMandant',\r\n      'objektKatalogImages',\r\n      'raeume'\r\n    ];\r\n\r\n    let lastClientChangeLogTimestamp = 0;\r\n    const lastClientChangeLogDelay = 2000;\r\n    let lastClientChangeLogTimer = null;\r\n    const lastClientChangeLogTrigger = () => {\r\n      this.clientChangeLog.count().then( (num) => {\r\n        this.clientSyncAmountChanged.emit(num);\r\n      });\r\n    };\r\n    const checkEmitClientChange = () => {\r\n      const now = Date.now();\r\n      if (lastClientChangeLogTimer) {\r\n        if (now - lastClientChangeLogTimestamp < lastClientChangeLogDelay) {\r\n          return;\r\n        }\r\n        clearTimeout(lastClientChangeLogTimer);\r\n        lastClientChangeLogTimer = null;\r\n      }\r\n\r\n      lastClientChangeLogTimestamp = Date.now();\r\n      lastClientChangeLogTimer = setTimeout( lastClientChangeLogTrigger, lastClientChangeLogDelay);\r\n    };\r\n\r\n    this.on( 'changes', (changes, partial) => {\r\n      // console.log('#145 dexie.service on changes: changes.length', changes.length, partial, { changes});\r\n      changes.forEach( (change: IDatabaseChange) => {\r\n        if (change.table === 'clientChangeLog') {\r\n          if (change.type === DatabaseChangeType.Update && !('sync_done' in change.mods)) {\r\n            return;\r\n          }\r\n          checkEmitClientChange();\r\n        }\r\n      });\r\n\r\n      if (this.stopClientLogForServerLoad) {\r\n        // console.log('#145 dexie.service on changes: is disabled for Server-Load');\r\n        return;\r\n      }\r\n      changes.forEach( (change: IDatabaseChange) => {\r\n\r\n        if (validLogTables.indexOf(change.table) === -1 || change.table === this.clientChangeLog.name) {\r\n          // console.log('#151 dexie.service on changes: ChangeLog disabled for table ', change.table);\r\n          return;\r\n        }\r\n\r\n        this.addChangeLog( change );\r\n      });\r\n    });\r\n  }\r\n\r\n  async addChangeLog(change: IDatabaseChange) {\r\n    const logFlag = this.getChangeLogFlag(change);\r\n    // if (log === undefined || !log) {\r\n    //   console.log('#152 addChangeLog Skip DB-Change-Logging - No Log-Flag', { change });\r\n    //   return;\r\n    // }\r\n    const logPrefix = 'DexieService.addChangeLog(change[' + change.table + ',' + change.type + ',' + change.key + '] ';\r\n    console.log(logPrefix + '#322');\r\n\r\n    if (logFlag !== undefined && logFlag !== null && logFlag === false) {\r\n      console.log(logPrefix + '#324 ABORT log:', logFlag, {change});\r\n      if (change.type !== 3) {\r\n        await this.table(change.table).update(change.key, {log: undefined});\r\n      }\r\n      return;\r\n    }\r\n    const uuid = this.getChangeLogUuid(change);\r\n\r\n    if (change.type !== 3 && 'obj' in change && 'log' in change.obj && change.obj.log !== undefined) {\r\n      await this.table(change.table).update(change.key, {log: undefined});\r\n    }\r\n\r\n    const chlog = {\r\n      timestamp: new Date(),\r\n      table: change.table,\r\n      type: change.type,\r\n      key: change.key,\r\n      uuid,\r\n      mid: this.baseData.getCurrentMid(),\r\n      uid: this.baseData.getCurrentUid(),\r\n      jobid: this.baseData.getCurrentJobid(),\r\n      sync_attempts: 0,\r\n      sync_done: 0\r\n    } as DBDIClientChangeLog;\r\n\r\n    switch ( change.type ) {\r\n      case DatabaseChangeType.Create:\r\n        const insertChange = change as ICreateChange;\r\n        if ('log' in change.obj) {\r\n          delete change.obj.log;\r\n        }\r\n        chlog.obj = change.obj;\r\n        switch (change.table) {\r\n          case 'objektKatalogGlobal':\r\n            if (!('huuid' in chlog.obj)) {\r\n              chlog.obj.huuid = this.getChangeLogProp<string>(change, 'huuid');\r\n            }\r\n            break;\r\n\r\n          case 'objektKatalogMandant':\r\n            if (!('gcuuid' in chlog.obj)) {\r\n              chlog.obj.gcuuid = this.getChangeLogProp<string>(change, 'gcuuid');\r\n            }\r\n            break;\r\n\r\n          case 'inventar':\r\n            if (!('mcuuid' in chlog.obj)) {\r\n              chlog.obj.mcuuid = this.getChangeLogProp<string>(change, 'mcuuid');\r\n            }\r\n            if (!('ruuid' in chlog.obj)) {\r\n              chlog.obj.ruuid = this.getChangeLogProp<string>(change, 'ruuid');\r\n            }\r\n            break;\r\n        }\r\n        break;\r\n\r\n      case DatabaseChangeType.Update:\r\n        const updateChange = change as IUpdateChange;\r\n        chlog.mods = updateChange.mods;\r\n        if ('log' in chlog.mods) {\r\n          delete chlog.mods.log;\r\n        }\r\n\r\n        const colNames = Object.keys(chlog.mods);\r\n\r\n        if (colNames.length === 0 || (colNames.length === 1 && colNames[0].startsWith('modified_'))) {\r\n          return;\r\n        }\r\n        const iNumContentCols = colNames.filter( (col) => {\r\n          if (['mcuuid', 'ruuid', 'gcuuid', 'huuid'].indexOf(col) !== -1 && undefined === change.mods[col]) {\r\n            return false;\r\n          }\r\n          return col !== 'log' && !col.startsWith('modified');\r\n        });\r\n        if (!iNumContentCols) {\r\n          return;\r\n        }\r\n        console.log(logPrefix + '#384 update', change.mods, { chlog });\r\n        break;\r\n\r\n      case DatabaseChangeType.Delete:\r\n        const deleteChange = change as IDeleteChange;\r\n        break;\r\n    }\r\n\r\n    this.clientChangeLog.add(chlog)\r\n      .then( (n) => {\r\n        console.log(logPrefix + '#439 added number:', n);\r\n      })\r\n      .catch( reason => {\r\n        console.error(reason, logPrefix + ' #443 clientChangeLog.add', { chlog });\r\n      });\r\n  }\r\n\r\n  getChangeLogUuid(change: IDatabaseChange): string|undefined {\r\n    const ch = change as any;\r\n    if (typeof change.key === 'string' && change.key.match(/([a-z0-9]+-){2,}[a-z0-9]/)) {\r\n      return change.key;\r\n    }\r\n    if ( ('obj' in ch) && ('uuid' in ch.obj)) {\r\n      return ch.obj.uuid;\r\n    }\r\n    if ( ('mods' in ch) && ('uuid' in ch.mods)) {\r\n      return ch.mods.uuid;\r\n    }\r\n    if ( ('oldObj' in ch) && ('uuid' in ch.oldObj)) {\r\n      return ch.oldObj.uuid;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  getChangeLogProp<T>(change: IDatabaseChange, propName: string): T|null {\r\n    const ch = change as any;\r\n    if ( (propName in ch) && (propName in ch.obj)) {\r\n      return ch.obj.uuid;\r\n    }\r\n    if ( (propName in ch) && (propName in ch.mods)) {\r\n      return ch.mods.uuid;\r\n    }\r\n    if ( (propName in ch) && (propName in ch.oldObj)) {\r\n      return ch.oldObj.uuid;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  getChangeLogFlag(change: IDatabaseChange): boolean|undefined {\r\n    const ch = change as any;\r\n    const showFlagLog = false;\r\n    if ( typeof ch !== 'object') {\r\n      if (showFlagLog) {\r\n        console.error('DexieService.getChangeLogFlag(change) #192 change is not a object: ', change);\r\n      }\r\n      return false;\r\n    }\r\n    const logPrefix = 'DexieService.getChangeLogFlag(change[' + ch.table + ',' + ch.type + ',' + ch.key + ']) ';\r\n    console.log(logPrefix + '#482 change', {...change});\r\n\r\n    if ( (typeof ch.obj === 'object') && ('log' in ch.obj) ) {\r\n      if (showFlagLog) {\r\n        console.log(logPrefix + '#485 return ch.obj.log ', ch.obj.log);\r\n      }\r\n      return ch.obj.log;\r\n      // return !!ch.obj.log;\r\n    }\r\n\r\n    if ( (typeof ch.mods === 'object') && ('log' in ch.mods)) {\r\n      if (showFlagLog) {\r\n        console.log(logPrefix + '#491 return ch.mods.log ', ch.mods.log);\r\n      }\r\n      return ch.mods.log;\r\n      // return !!ch.mods.log;\r\n    }\r\n\r\n    if ( (typeof ch.oldObj === 'object') && ('log' in ch.oldObj)) {\r\n      if (showFlagLog) {\r\n        console.log(logPrefix + '#497 return ch.oldObj.log ', ch.oldObj.log);\r\n      }\r\n      return ch.oldObj.log;\r\n      // return !!ch.oldObj.log;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  stopChangeLogForImport( stop: boolean) {\r\n    const showFlagLog = false;\r\n    if (showFlagLog) {\r\n      console.log('#199 stopClientLogForServerLoad => ', stop);\r\n    }\r\n    this.stopClientLogForServerLoad = stop;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { DBDIArtikel} from '../interfaces/dexie.interfaces';\r\nimport { DexieService } from './dexie.service';\r\nimport { BasedataService} from './basedata.service';\r\nimport { DatabaseChangeType} from 'dexie-observable/api';\r\n\r\nexport interface InventoryEditorResultPresets {\r\n  success?: boolean;\r\n  message?: string;\r\n  errorMsg?: string;\r\n  errorCode?: InventoryEditorErrorCode;\r\n}\r\n\r\nexport interface InventoryEditorResult {\r\n  success: boolean;\r\n  message?: string;\r\n  errorMsg?: string;\r\n  errorCode?: InventoryEditorErrorCode;\r\n}\r\n\r\nexport interface InventoryEditorInsertResult extends InventoryEditorResult {\r\n  insertID?: number;\r\n}\r\n\r\nexport enum InventoryEditorErrorCode {\r\n  NoError,\r\n  RaumNotFound,\r\n  InventarNotFound,\r\n  ArtikelNotFound,\r\n  ArtikelMandantNotFound,\r\n  ArtikelGlobalNotFound\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InventoryEditorService {\r\n\r\n  constructor(private dexieService: DexieService, private baseData: BasedataService) { }\r\n\r\n  returnResultSuccess(data?: InventoryEditorResultPresets) {\r\n    data = data || {};\r\n    return {\r\n      success: true,\r\n      message: data.message || '',\r\n      errorMsg: data.errorMsg || '',\r\n      errorCode: data.errorCode || null,\r\n    };\r\n  }\r\n\r\n  returnResultError(data?: InventoryEditorResultPresets) {\r\n    data = data || {};\r\n    return {\r\n      success: false,\r\n      message: data.message || '',\r\n      errorMsg: data.errorMsg || '',\r\n      errorCode: data.errorCode || null,\r\n    };\r\n  }\r\n\r\n  async updateInventar(invid: number, data: DBDIArtikel) {}\r\n\r\n  async updateArtikelImage(invid: number, data: Blob) {}\r\n\r\n  async assignInventarToRaum(invUuid: string, ruuid: string, useJobid?: number): Promise<InventoryEditorResult> {\r\n    const jobid = useJobid || this.baseData.getCurrentJobid();\r\n    const uid = this.baseData.getCurrentUid();\r\n    const devid = this.baseData.getCurrentDeviceId();\r\n    console.log('InventoryEditorService.assignInventarToRaum', {\r\n      invUuid,\r\n      ruuid,\r\n      jobid,\r\n      uid,\r\n      devid\r\n    });\r\n\r\n    return Promise.all([\r\n        this.dexieService.inventar.get(invUuid),\r\n        this.dexieService.raeume.get(ruuid)\r\n      ])\r\n      .then(result => {\r\n        const inv = result[0];\r\n        const raum = result[1];\r\n        console.log('InventoryEditorService.assignInventarToRaum', {\r\n          inv,\r\n          raum\r\n        });\r\n\r\n        if (!inv) {\r\n          return this.returnResultError( { errorCode: InventoryEditorErrorCode.InventarNotFound });\r\n        }\r\n\r\n        if (!raum) {\r\n          return this.returnResultError( { errorCode: InventoryEditorErrorCode.RaumNotFound });\r\n        }\r\n\r\n        return this.dexieService.inventar.update(inv.uuid, {\r\n          ruuid: raum.uuid,\r\n          jobid,\r\n          modified_uid: uid,\r\n          modified_jobid: jobid,\r\n          modified_device_id: devid\r\n        }).then( () => this.returnResultSuccess() );\r\n      });\r\n  }\r\n\r\n  async undoAssignedInventarToRaum(invUuid: string, ruuid: string, useJobid?: number): Promise<InventoryEditorResult> {\r\n    const jobid = useJobid || this.baseData.getCurrentJobid();\r\n    return this.dexieService.clientChangeLog\r\n      .where({ table: 'raeume', uuid: invUuid, jobid })\r\n      .filter( item => item.obj && ('uuid' in item.obj) && item.obj.uuid === ruuid )\r\n      .last()\r\n      .then( item => {\r\n\r\n        if (item.type === DatabaseChangeType.Create) {\r\n          return this.dexieService.inventar\r\n            .delete( item.uuid )\r\n            .then( () => this.dexieService.clientChangeLog.delete( item.id) )\r\n            .then( () => this.returnResultSuccess());\r\n\r\n        } else if (item.type === DatabaseChangeType.Update) {\r\n          return this.dexieService.inventar\r\n            .update(invUuid, item.oldObj)\r\n            .then( (num: number) => {\r\n              if (num > 0) {\r\n                return this.dexieService.clientChangeLog.delete( item.id);\r\n              } else {\r\n                throw new Error('Cannot undo Raum-Inventar-Zuweisung!');\r\n              }\r\n            })\r\n            .then( () => this.returnResultSuccess())\r\n            .catch( (err) => this.returnResultError( { errorMsg: err }));\r\n        } else {\r\n          return this.returnResultError();\r\n        }\r\n      });\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\n\r\n\r\ninterface Tone {\r\n  taste: number;\r\n  en: string;\r\n  de: string;\r\n  freq: number;\r\n}\r\n\r\nconst tempo = {\r\n  n1: 1000,\r\n  n2: 500,\r\n  n3: 750,\r\n  n4: 250,\r\n  n8: 125,\r\n  n16: 62.5,\r\n  n32: 31.75\r\n};\r\n\r\nconst tones: Tone[] = [\r\n  { taste: 1, en: 'A0', de: 'A2', freq: 27.5 },\r\n  { taste: 2, en: 'A#0/Bb0', de: 'Ais2/B2', freq: 29.1352 },\r\n  { taste: 3, en: 'B0', de: 'H2', freq: 30.8677 },\r\n  { taste: 4, en: 'C1', de: 'C1', freq: 32.7032 },\r\n  { taste: 5, en: 'C#1/Db1', de: 'Cis1/Des1', freq: 34.6478 },\r\n  { taste: 6, en: 'D1', de: 'D1', freq: 36.7081 },\r\n  { taste: 7, en: 'D#1/Eb1', de: 'Dis1/Es1', freq: 38.8909 },\r\n  { taste: 8, en: 'E1', de: 'E1', freq: 41.2034 },\r\n  { taste: 9, en: 'F1', de: 'F1', freq: 43.6535 },\r\n  { taste: 10, en: 'F#1/Gb1', de: 'Fis1/Ges1', freq: 46.2493 },\r\n  { taste: 11, en: 'G1', de: 'G1', freq: 48.9994 },\r\n  { taste: 12, en: 'G#1/Ab1', de: 'Gis1/As1', freq: 51.9131 },\r\n  { taste: 13, en: 'A1', de: 'A1', freq: 55 },\r\n  { taste: 14, en: 'A#1/Bb1', de: 'Ais1/B1', freq: 58.2705 },\r\n  { taste: 15, en: 'B1', de: 'H1', freq: 61.7354 },\r\n  { taste: 16, en: 'C2', de: 'C', freq: 65.4064 },\r\n  { taste: 17, en: 'C#2/Db2', de: 'Cis/Des', freq: 69.2957 },\r\n  { taste: 18, en: 'D2', de: 'D', freq: 73.4162 },\r\n  { taste: 19, en: 'D#2/Eb2', de: 'Dis/Es', freq: 77.7817 },\r\n  { taste: 20, en: 'E2', de: 'E', freq: 82.4069 },\r\n  { taste: 21, en: 'F2', de: 'F', freq: 87.3071 },\r\n  { taste: 22, en: 'F#2/Gb2', de: 'Fis/Ges', freq: 92.4986 },\r\n  { taste: 23, en: 'G2', de: 'G', freq: 97.9989 },\r\n  { taste: 24, en: 'G#2/Ab2', de: 'Gis/As', freq: 103.826 },\r\n  { taste: 25, en: 'A2', de: 'A', freq: 110 },\r\n  { taste: 26, en: 'A#2/Bb2', de: 'Ais/B', freq: 116.541 },\r\n  { taste: 27, en: 'B2', de: 'H', freq: 123.471 },\r\n  { taste: 28, en: 'C3', de: 'c', freq: 130.813 },\r\n  { taste: 29, en: 'C#3/Db3', de: 'cis/des', freq: 138.591 },\r\n  { taste: 30, en: 'D3', de: 'd', freq: 146.832 },\r\n  { taste: 31, en: 'D#3/Eb3', de: 'dis/es', freq: 155.563 },\r\n  { taste: 32, en: 'E3', de: 'e', freq: 164.814 },\r\n  { taste: 33, en: 'F3', de: 'f', freq: 174.614 },\r\n  { taste: 34, en: 'F#3/Gb3', de: 'fis/ges', freq: 184.997 },\r\n  { taste: 35, en: 'G3', de: 'g', freq: 195.998 },\r\n  { taste: 36, en: 'G#3/Ab3', de: 'gis/as', freq: 207.652 },\r\n  { taste: 37, en: 'A3', de: 'a', freq: 220 },\r\n  { taste: 38, en: 'A#3/Bb3', de: 'ais/b', freq: 233.082 },\r\n  { taste: 39, en: 'B3', de: 'h', freq: 246.942 },\r\n  { taste: 40, en: 'C4[3]', de: 'c1', freq: 261.626 },\r\n  { taste: 41, en: 'C#4/Db4', de: 'cis1/des1', freq: 277.183 },\r\n  { taste: 42, en: 'D4', de: 'd1', freq: 293.665 },\r\n  { taste: 43, en: 'D#4/Eb4', de: 'dis1/es1', freq: 311.127 },\r\n  { taste: 44, en: 'E4', de: 'e1', freq: 329.628 },\r\n  { taste: 45, en: 'F4', de: 'f1', freq: 349.228 },\r\n  { taste: 46, en: 'F#4/Gb4', de: 'fis1/ges1', freq: 369.994 },\r\n  { taste: 47, en: 'G4', de: 'g1', freq: 391.995 },\r\n  { taste: 48, en: 'G#4/Ab4', de: 'gis1/as1', freq: 415.305 },\r\n  { taste: 49, en: 'A4[2]', de: 'a1 Kammerton', freq: 440 },\r\n  { taste: 50, en: 'A#4/Bb4', de: 'ais1/b1', freq: 466.164 },\r\n  { taste: 51, en: 'B4', de: 'h1', freq: 493.883 },\r\n  { taste: 52, en: 'C5', de: 'c2', freq: 523.251 },\r\n  { taste: 53, en: 'C#5/Db5', de: 'cis2/des2', freq: 554.365 },\r\n  { taste: 54, en: 'D5', de: 'd2', freq: 587.33 },\r\n  { taste: 55, en: 'D#5/Eb5', de: 'dis2/es2', freq: 622.254 },\r\n  { taste: 56, en: 'E5', de: 'e2', freq: 659.255 },\r\n  { taste: 57, en: 'F5', de: 'f2', freq: 698.456 },\r\n  { taste: 58, en: 'F#5/Gb5', de: 'fis2/ges2', freq: 739.989 },\r\n  { taste: 59, en: 'G5', de: 'g2', freq: 783.991 },\r\n  { taste: 60, en: 'G#5/Ab5', de: 'gis2/as2', freq: 830.609 },\r\n  { taste: 61, en: 'A5', de: 'a2', freq: 880 },\r\n  { taste: 62, en: 'A#5/Bb5', de: 'ais2/b2', freq: 932.328 },\r\n  { taste: 63, en: 'B5', de: 'h2', freq: 987.767 },\r\n  { taste: 64, en: 'C6', de: 'c3', freq: 1046.5 },\r\n  { taste: 65, en: 'C#6/Db6', de: 'cis3/des3', freq: 1108.73 },\r\n  { taste: 66, en: 'D6', de: 'd3', freq: 1174.66 },\r\n  { taste: 67, en: 'D#6/Eb6', de: 'dis3/es3', freq: 1244.51 },\r\n  { taste: 68, en: 'E6', de: 'e3', freq: 1318.51 },\r\n  { taste: 69, en: 'F6', de: 'f3', freq: 1396.91 },\r\n  { taste: 70, en: 'F#6/Gb6', de: 'fis3/ges3', freq: 1479.98 },\r\n  { taste: 71, en: 'G6', de: 'g3', freq: 1567.98 },\r\n  { taste: 72, en: 'G#6/Ab6', de: 'gis3/as3', freq: 1661.22 },\r\n  { taste: 73, en: 'A6', de: 'a3', freq: 1760 },\r\n  { taste: 74, en: 'A#6/Bb6', de: 'ais3/b3', freq: 1864.66 },\r\n  { taste: 75, en: 'B6', de: 'h3', freq: 1975.53 },\r\n  { taste: 76, en: 'C7', de: 'c4', freq: 2093 },\r\n  { taste: 77, en: 'C#7/Db7', de: 'cis4/des4', freq: 2217.46 },\r\n  { taste: 78, en: 'D7', de: 'd4', freq: 2349.32 },\r\n  { taste: 79, en: 'D#7/Eb7', de: 'dis4/es4', freq: 2489.02 },\r\n  { taste: 80, en: 'E7', de: 'e4', freq: 2637.02 },\r\n  { taste: 81, en: 'F7', de: 'f4', freq: 2793.83 },\r\n  { taste: 82, en: 'F#7/Gb7', de: 'fis4/ges4', freq: 2959.96 },\r\n  { taste: 83, en: 'G7', de: 'g4', freq: 3135.96 },\r\n  { taste: 84, en: 'G#7/Ab7', de: 'gis4/as4', freq: 3322.44 },\r\n  { taste: 85, en: 'A7', de: 'a4', freq: 3520 },\r\n  { taste: 86, en: 'A#7/Bb7', de: 'ais4/b4', freq: 3729.31 },\r\n  { taste: 87, en: 'B7', de: 'h4', freq: 3951.07 },\r\n  { taste: 88, en: 'C8', de: 'c5', freq: 4186.01 }\r\n];\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SoundsService {\r\n  success: HTMLAudioElement;\r\n  error: HTMLAudioElement;\r\n\r\n  constructor() {\r\n    this.success = new Audio();\r\n    this.success.muted = true;\r\n    this.success.autoplay = true;\r\n    this.success.src = '../assets/googlesounds/notification_simple-01.mp3';\r\n    this.success.load();\r\n\r\n    this.error = new Audio();\r\n    this.error.muted = true;\r\n    this.error.autoplay = true;\r\n    this.error.src = '../assets/googlesounds/alert_error-01.mp3';\r\n    this.error.load();\r\n  }\r\n\r\n  public getSuccessSrc(): string {\r\n    return this.success.src;\r\n  }\r\n\r\n  public getErrorSrc(): string {\r\n    return this.error.src;\r\n  }\r\n\r\n  async playSuccess(): Promise<void> {\r\n    this.success.muted = false;\r\n    this.success.play();\r\n  }\r\n\r\n  async playError(): Promise<void> {\r\n    this.error.muted = false;\r\n    this.error.play();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {DexieService} from './dexie.service';\r\nimport {DBDIUsers} from '../interfaces/dexie.interfaces';\r\n\r\ninterface UserUpdateData {\r\n  email?: DBDIUsers['email'];\r\n  name?: DBDIUsers['name'];\r\n  password?: DBDIUsers['password'];\r\n  remember_token?: DBDIUsers['remember_token'];\r\n  created_at?: DBDIUsers['created_at'];\r\n  updated_at?: DBDIUsers['updated_at'];\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n\r\n  constructor(private dexie: DexieService) {}\r\n\r\n  async getByUid(id: number): Promise<DBDIUsers> {\r\n    const user = await this.dexie.users.get(id);\r\n    this.fitDateAttr(user);\r\n    return user;\r\n  }\r\n\r\n  async put(user: DBDIUsers): Promise<number> {\r\n    return this.dexie.users.put(user);\r\n  }\r\n\r\n  async update(id: number, data: UserUpdateData): Promise<number> {\r\n    return this.dexie.users.update(id, data);\r\n  }\r\n\r\n  async getByEmail(email: string): Promise<DBDIUsers> {\r\n    const user = await this.dexie.users.where('email').equalsIgnoreCase(email).first();\r\n    this.fitDateAttr(user);\r\n    return user;\r\n  }\r\n\r\n  async getByAuth(email: string, password: string): Promise<DBDIUsers> {\r\n    const user = await this.dexie.users.where({email, password }).first();\r\n    this.fitDateAttr(user);\r\n    return user;\r\n  }\r\n\r\n  private fitDateAttr(user: DBDIUsers): DBDIUsers {\r\n    if (user) {\r\n      if (user.created_at && typeof user.created_at === 'string') {\r\n        user.created_at = new Date(user.created_at);\r\n      }\r\n      if (user.updated_at && typeof user.updated_at === 'string') {\r\n        user.updated_at = new Date(user.updated_at);\r\n      }\r\n    }\r\n    return user;\r\n  }\r\n}\r\n","import {EventEmitter, Injectable, Output} from '@angular/core';\r\nimport {DBDIVariables} from '../interfaces/dexie.interfaces';\r\nimport {DexieService} from './dexie.service';\r\nimport {BasedataService} from './basedata.service';\r\nimport Dexie from 'dexie';\r\n\r\nexport enum SettingsChangeAction {\r\n  Insert,\r\n  Update,\r\n  Delete,\r\n  SetProperty,\r\n  AddListItem,\r\n  AppendString\r\n}\r\n\r\nexport interface SettingsChanged {\r\n  name: string;\r\n  action: SettingsChangeAction;\r\n  varType: any;\r\n  oldValue?: any;\r\n  newValue?: any;\r\n  oldSize?: number;\r\n}\r\n\r\nexport interface VarChangeInfo<T> {\r\n  name: string;\r\n  action: string;\r\n  varType: string;\r\n  newValue: T;\r\n  oldValue: any;\r\n  oldSize: any;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VariablesService {\r\n  variables?: Dexie.Table<DBDIVariables, any>;\r\n  watchVariables: string[] = [];\r\n  @Output() varChanged = new EventEmitter<SettingsChanged>();\r\n\r\n  constructor(private db: DexieService, private baseData: BasedataService) {\r\n    this.variables = this.db.variables;\r\n    this.get('Settings.watchVariables', []).then( watchVars => {\r\n      this.watchVariables = watchVars;\r\n    });\r\n  }\r\n\r\n  public watch(...watchNames: string[]) {\r\n    watchNames.forEach( (name) => {\r\n      if (!this.watchVariables.find( (alreadyWatched) => alreadyWatched === name)) {\r\n        this.watchVariables.push(name);\r\n      }\r\n    });\r\n    this.set('Settings.watchVariables', this.watchVariables);\r\n  }\r\n\r\n  public unwatch(...unwatchNames: string[]) {\r\n    this.watchVariables = this.watchVariables.filter(\r\n      (alreadyWatched) => unwatchNames.indexOf(alreadyWatched) === -1\r\n    );\r\n    this.set('Settings.watchVariables', this.watchVariables);\r\n  }\r\n\r\n  private async checkWatchVar(name: string, action: SettingsChangeAction, newValue?: any, oldValue?: any) {\r\n    if (!this.watchVariables.find( (watchVar) => watchVar === name)) {\r\n      return;\r\n    }\r\n\r\n    const checkVal = (action !== SettingsChangeAction.Delete) ? newValue : oldValue;\r\n    let varType = 'any';\r\n\r\n    if (checkVal === undefined) {\r\n      varType = 'undefined';\r\n    } else if (typeof checkVal === null) {\r\n      varType = 'null';\r\n    } else {\r\n      varType = checkVal.constructor.name;\r\n    }\r\n\r\n    this.varChanged.emit({\r\n      name,\r\n      action,\r\n      varType,\r\n      newValue,\r\n      oldValue:\r\n        (action !== SettingsChangeAction.AddListItem\r\n          && action !== SettingsChangeAction.AppendString) ? oldValue : null,\r\n      oldSize:\r\n        (action === SettingsChangeAction.AddListItem\r\n          || action === SettingsChangeAction.AppendString) ? oldValue : null\r\n    });\r\n  }\r\n\r\n  public async getAll(): Promise<DBDIVariables[]> {\r\n    return this.variables.toArray();\r\n  }\r\n\r\n  public async set(name: string, value: any, logComment: string = ''): Promise<boolean> {\r\n    let oldVal;\r\n    let action = SettingsChangeAction.Insert;\r\n    if (await this.has(name)) {\r\n      oldVal = await this.get(name);\r\n      action = SettingsChangeAction.Update;\r\n    }\r\n\r\n    const success = await this.variables.put({name, value})\r\n      .then(() => {\r\n        this.checkWatchVar(name, action, value, oldVal);\r\n        return true;\r\n      })\r\n      .catch((err) => false);\r\n\r\n    return success;\r\n  }\r\n\r\n  public async setRevId(name: string, value: any, logComment: string = ''): Promise<boolean> {\r\n    let oldVal;\r\n    let action = SettingsChangeAction.Insert;\r\n    if (await this.has(name)) {\r\n      oldVal = await this.get(name);\r\n      action = SettingsChangeAction.Update;\r\n    }\r\n    if (value === 0 || oldVal > value) {\r\n      const err = 'Kritischer Zugriff: Wert von ' + name + ' wurde versucht herunterzusetzen von ' + oldVal + ' auf ' + value;\r\n      console.error( err, { name, value, logComment, oldVal, action } );\r\n      return false;\r\n    }\r\n    const success = await this.variables.put({name, value})\r\n      .then(() => {\r\n        this.checkWatchVar(name, action, value, oldVal);\r\n        return true;\r\n      })\r\n      .catch((err) => false);\r\n\r\n    return success;\r\n  }\r\n\r\n  public async get(name: string, defaultValue: any = null): Promise<any> {\r\n    return this.variables.get( name )\r\n      .then( item => item.value)\r\n      .catch( (err) => defaultValue );\r\n  }\r\n\r\n  public async has(name: string): Promise<boolean> {\r\n    return 0 < ( await this.variables.where({name}).count() );\r\n  }\r\n\r\n  public async delete(name: string): Promise<boolean> {\r\n    if (!(await this.has(name))) {\r\n      return true;\r\n    }\r\n    const oldVal = await this.get(name);\r\n    if (0 < await this.variables.where( { name } ).delete()) {\r\n      this.checkWatchVar(name, SettingsChangeAction.Delete, null, oldVal);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private toKeyValueObject(key: string, value: any): object {\r\n    const obj = {};\r\n    obj[key] = value;\r\n    return obj;\r\n  }\r\n\r\n  public async setObjectPropery(name: string, propertyName: string, propertyValue): Promise<boolean> {\r\n    const obj = await this.get(name, {});\r\n    const oldVal = this.toKeyValueObject(propertyName, (propertyName in obj) ? obj[propertyName] : undefined);\r\n    const newVal = this.toKeyValueObject(propertyName, propertyValue);\r\n    obj[propertyName] = propertyValue;\r\n    await this.set(name, obj);\r\n    this.checkWatchVar(name, SettingsChangeAction.SetProperty, newVal, oldVal);\r\n    return true;\r\n  }\r\n\r\n  public async appendListItem<T>(name: string, item: T): Promise<number> {\r\n    const list: T[] = await this.get(name, []);\r\n    list.push(item);\r\n    await this.set(name, list);\r\n    this.checkWatchVar(name, SettingsChangeAction.AddListItem, item, list.length - 1);\r\n    return list.length;\r\n  }\r\n\r\n  public async appendString(name: string, append: string, sep: string = ''): Promise<boolean> {\r\n    const oldStr = await this.get(name, '');\r\n    if (oldStr) {\r\n      await this.set(name, oldStr + sep + append);\r\n    } else {\r\n      await this.set(name, append);\r\n    }\r\n    this.checkWatchVar(name, SettingsChangeAction.AppendString, append, oldStr.length);\r\n\r\n    return true;\r\n  }\r\n\r\n  public async isEqual(name, compare: any): Promise<boolean> {\r\n    return compare === await this.get(name);\r\n  }\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  appVersion:  require('../../package.json').version + '-dev',\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"sourceRoot":"webpack:///"}